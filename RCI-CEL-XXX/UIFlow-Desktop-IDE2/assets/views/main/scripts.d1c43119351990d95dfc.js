!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Blockly=e()}(this,function(){"use strict";var t={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.connectionTypes.INPUT_VALUE]=t.connectionTypes.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.OUTPUT_VALUE]=t.connectionTypes.INPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.NEXT_STATEMENT]=t.connectionTypes.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.connectionTypes.PREVIOUS_STATEMENT]=t.connectionTypes.NEXT_STATEMENT,t.DELETE_AREA_NONE=null,t.DELETE_AREA_TRASH=1,t.DELETE_AREA_TOOLBOX=2,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.utils={},t.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n)return n;if(n="#"==(n="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?n:"#"+n,/^#[0-9a-f]{6}$/.test(n))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=e&&256>e&&0<=n&&256>n&&0<=o&&256>o)?t.utils.colour.rgbToHex(e,n,o):null},t.utils.colour.rgbToHex=function(t,e,n){return e=t<<16|e<<8|n,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,o){var l=0,i=0,a=0;if(0==n)a=i=l=o;else{var s=Math.floor(e/60),r=e/60-s;e=o*(1-n);var c=o*(1-n*r);switch(n=o*(1-n*(1-r)),s){case 1:l=c,i=o,a=e;break;case 2:l=e,i=o,a=n;break;case 3:l=e,i=c,a=o;break;case 4:l=n,i=e,a=o;break;case 5:l=o,i=e,a=c;break;case 6:case 0:l=o,i=n,a=e}}return t.utils.colour.rgbToHex(Math.floor(l),Math.floor(i),Math.floor(a))},t.utils.colour.blend=function(e,n,o){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+o*(e[0]-n[0])),Math.round(n[1]+o*(e[1]-n[1])),Math.round(n[2]+o*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(t,e){this.x=t,this.y=e},t.utils.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&(t.x==e.x&&t.y==e.y)},t.utils.Coordinate.distance=function(t,e){var n=t.x-e.x;return t=t.y-e.y,Math.sqrt(n*n+t*t)},t.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.utils.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},t.utils.Rect=function(t,e,n,o){this.top=t,this.bottom=e,this.left=n,this.right=o},t.utils.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},t.utils.string={},t.utils.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},t.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(t,e){return t.length<e.length?t:e}).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var l=0;l<n;l++){for(var i=e[0][l],a=1;a<e.length;a++)if(i!=e[a][l])return o;" "==i&&(o=l+1)}for(a=1;a<e.length;a++)if((i=e[a][l])&&" "!=i)return o;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var l=0;l<n;l++){for(var i=e[0].substr(-l-1,1),a=1;a<e.length;a++)if(i!=e[a].substr(-l-1,1))return o;" "==i&&(o=l+1)}for(a=1;a<e.length;a++)if((i=e[a].charAt(e[a].length-l-1))&&" "!=i)return o;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var o=0;o<e.length;o++)e[o]=t.utils.string.wrapLine_(e[o],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var o=e.trim().split(/\s+/),l=0;l<o.length;l++)o[l].length>n&&(n=o[l].length);l=-1/0;var i=1;do{var a=l,s=e;e=[];var r=o.length/i,c=1;for(l=0;l<o.length-1;l++)c<(l+1.5)/r?(c++,e[l]=!0):e[l]=!1;e=t.utils.string.wrapMutate_(o,e,n),l=t.utils.string.wrapScore_(o,e,n),e=t.utils.string.wrapToText_(o,e),i++}while(l>a);return s},t.utils.string.wrapScore_=function(t,e,n){for(var o=[0],l=[],i=0;i<t.length;i++)o[o.length-1]+=t[i].length,!0===e[i]?(o.push(0),l.push(t[i].charAt(t[i].length-1))):!1===e[i]&&o[o.length-1]++;for(t=Math.max.apply(Math,o),i=e=0;i<o.length;i++)e-=2*Math.pow(Math.abs(n-o[i]),1.5),e-=Math.pow(t-o[i],1.5),-1!=".?!".indexOf(l[i])?e+=n/3:-1!=",;)]}".indexOf(l[i])&&(e+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(e+=.5),e},t.utils.string.wrapMutate_=function(e,n,o){for(var l,i=t.utils.string.wrapScore_(e,n,o),a=0;a<n.length-1;a++)if(n[a]!=n[a+1]){var s=[].concat(n);s[a]=!s[a],s[a+1]=!s[a+1];var r=t.utils.string.wrapScore_(e,s,o);r>i&&(i=r,l=s)}return l?t.utils.string.wrapMutate_(e,l,o):n},t.utils.string.wrapToText_=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(t[o]),void 0!==e[o]&&n.push(e[o]?"\n":" ");return n.join("")},t.utils.Size=function(t,e){this.width=t,this.height=e},t.utils.Size.equals=function(t,e){return t==e||!(!t||!e)&&(t.width==e.width&&t.height==e.height)},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,o=n.display,l=n.visibility,i=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var a=e.offsetWidth;return e=e.offsetHeight,n.display=o,n.position=i,n.visibility=l,new t.utils.Size(a,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},t.utils.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new t.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=e.left+o.x,n.y=e.top+o.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(t,e){t.style.display=e?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),o=t.utils.style.getComputedStyle(e,"borderRightWidth"),l=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(l),right:parseFloat(o),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,o){e=t.utils.style.getContainerOffsetToScrollInto(e,n,o),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,o){var l=t.utils.style.getPageOffset(e),i=t.utils.style.getPageOffset(n),a=t.utils.style.getBorderBox(n),s=l.x-i.x-a.left;return l=l.y-i.y-a.top,i=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-i.width,i=n.clientHeight-i.height,a=n.scrollLeft,n=n.scrollTop,o?(a+=s-e/2,n+=l-i/2):(a+=Math.min(s,Math.max(s-e,0)),n+=Math.min(l,Math.max(l-i,0))),new t.utils.Coordinate(a,n)},t.utils.userAgent={},function(e){function n(t){return-1!=o.indexOf(t.toUpperCase())}t.utils.userAgent.raw=e;var o=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),t.utils.userAgent.IPAD=n("iPad"),t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},t.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),o=e.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=e.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=e.getAttribute("transform"))&&o.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,o=0;e;){var l=t.utils.getRelativeXY(e);if(n+=l.x,o+=l.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,o)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(t,e,n){var o=e.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,n||(n=e.getScreenCTM().inverse()),o.matrixTransform(n)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,o=t.Msg,l=e.match(/%{BKY_[A-Z]\w*}/gi),i=0;i<l.length;i++){null==o[l[i].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+l[i]+" in "+e),n=!1)}return n},t.utils.tokenizeInterpolation_=function(e,n){var o=[],l=e.split("");l.push("");var i=0;e=[];for(var a=null,s=0;s<l.length;s++){var r=l[s];0==i?"%"==r?((r=e.join(""))&&o.push(r),e.length=0,i=1):e.push(r):1==i?"%"==r?(e.push(r),i=0):n&&"0"<=r&&"9">=r?(i=2,a=r,(r=e.join(""))&&o.push(r),e.length=0):"{"==r?i=3:(e.push("%",r),i=0):2==i?"0"<=r&&"9">=r?a+=r:(o.push(parseInt(a,10)),s--,i=0):3==i&&(""==r?(e.splice(0,0,"%{"),s--,i=0):"}"!=r?e.push(r):(i=e.join(""),/[A-Z]\w*/i.test(i)?(r=i.toUpperCase(),(r=t.utils.string.startsWith(r,"BKY_")?r.substring(4):null)&&r in t.Msg?"string"==typeof(i=t.Msg[r])?Array.prototype.push.apply(o,t.utils.tokenizeInterpolation_(i,n)):n?o.push(String(i)):o.push(i):o.push("%{"+i+"}")):o.push("%{"+i+"}"),i=e.length=0))}for((r=e.join(""))&&o.push(r),n=[],s=e.length=0;s<o.length;++s)"string"==typeof o[s]?e.push(o[s]):((r=e.join(""))&&n.push(r),e.length=0,n.push(o[s]));return(r=e.join(""))&&n.push(r),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var l in document.body.insertBefore(e,null),o)if(void 0!==e.style[l]){if(e.style[l]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(o[l])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var e=setInterval(function(){"complete"==document.readyState&&(clearInterval(e),t())},10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(t,e){var n=Object.create(null),o=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=o.indexOf(t),o.splice(t,o.length-t)),t=0;e=o[t];t++)n[e.type]?n[e.type]++:n[e.type]=1;return n},t.utils.screenToWsCoordinates=function(e,n){var o=n.x;n=n.y;var l=e.getInjectionDiv().getBoundingClientRect();return o=new t.utils.Coordinate(o-l.left,n-l.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(o,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:t.utils.colour.hsvToHex(o,t.HSV_SATURATION,255*t.HSV_VALUE)};if(o=t.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',e!=n&&(o+=' (from "'+e+'")'),Error(o)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)},t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&void 0!==t.changedTouches[0].identifier&&null!==t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return void 0!==t.Touch.touchIdentifier_&&null!==t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var n=0;n<t.changedTouches.length;n++)e[n]={type:t.type,changedTouches:[t.changedTouches[n]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},t.browserEvents={},t.browserEvents.conditionalBind=function(e,n,o,l,i,a){var s=!1,r=function(e){var n=!i;e=t.Touch.splitEventByTouches(e);for(var a,r=0;a=e[r];r++)n&&!t.Touch.shouldHandleEvent(a)||(t.Touch.setClientFromTouch(a),o?l.call(o,a):l(a),s=!0)},c=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var u,_=0;u=t.Touch.TOUCH_MAP[n][_];_++)e.addEventListener(u,r,!1),c.push([e,u,r]);else if(e.addEventListener(n,r,!1),c.push([e,n,r]),n in t.Touch.TOUCH_MAP){var d=function(t){r(t),s&&!a&&t.preventDefault()};for(_=0;u=t.Touch.TOUCH_MAP[n][_];_++)e.addEventListener(u,d,!1),c.push([e,u,d])}return c},t.browserEvents.bind=function(e,n,o,l){var i=function(t){o?l.call(o,t):l(t)},a=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var s,r=0;s=t.Touch.TOUCH_MAP[n][r];r++)e.addEventListener(s,i,!1),a.push([e,s,i]);else if(e.addEventListener(n,i,!1),a.push([e,n,i]),n in t.Touch.TOUCH_MAP){var c=function(t){if(t.changedTouches&&1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}i(t),t.preventDefault()};for(r=0;s=t.Touch.TOUCH_MAP[n][r];r++)e.addEventListener(s,c,!1),a.push([e,s,c])}return a},t.browserEvents.unbind=function(t){for(;t.length;){var e=t.pop(),n=e[2];e[0].removeEventListener(e[1],n,!1)}return n},t.registry={},t.registry.typeMap_={},t.registry.DEFAULT="default",t.registry.Type=function(t){this.name_=t},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.CURSOR=new t.registry.Type("cursor"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.Type.METRICS_MANAGER=new t.registry.Type("metricsManager"),t.registry.register=function(e,n,o,l){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var i=t.registry.typeMap_[e];if(i||(i=t.registry.typeMap_[e]={}),t.registry.validate_(e,o),!l&&i[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');i[n]=o},t.registry.validate_=function(e,n){switch(e){case String(t.registry.Type.FIELD):if("function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')}},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var o=t.registry.typeMap_[e];o&&o[n]?delete t.registry.typeMap_[e][n]:console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},t.registry.getItem_=function(e,n,o){e=String(e).toLowerCase(),n=n.toLowerCase();var l=t.registry.typeMap_[e];if(!l||!l[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",o)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return l[n]},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n,o){return t.registry.getItem_(e,n,o)},t.registry.getObject=function(e,n,o){return t.registry.getItem_(e,n,o)},t.registry.getClassFromOptions=function(e,n,o){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n,o)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.BLOCK_DRAG="drag",t.Events.SELECTED="selected",t.Events.CLICK="click",t.Events.MARKER_MOVE="marker_move",t.Events.BUBBLE_OPEN="bubble_open",t.Events.TRASHCAN_OPEN="trashcan_open",t.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.Events.THEME_CHANGE="theme_change",t.Events.VIEWPORT_CHANGE="viewport_change",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var e,n=t.Events.filter(t.Events.FIRE_QUEUE_,!0),o=t.Events.FIRE_QUEUE_.length=0;e=n[o];o++)if(e.workspaceId){var l=t.Workspace.getById(e.workspaceId);l&&l.fireChangeListener(e)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var o,l=[],i=Object.create(null),a=0;o=e[a];a++)if(!o.isNull()){var s=[o.isUiEvent?t.Events.UI:o.type,o.blockId,o.workspaceId].join(" "),r=i[s],c=r?r.event:null;r?o.type==t.Events.MOVE&&r.index==a-1?(c.newParentId=o.newParentId,c.newInputName=o.newInputName,c.newCoordinate=o.newCoordinate,r.index=a):o.type==t.Events.CHANGE&&o.element==c.element&&o.name==c.name?c.newValue=o.newValue:o.type==t.Events.CLICK&&c.type==t.Events.BUBBLE_OPEN||(i[s]={event:o,index:a},l.push(o)):(i[s]={event:o,index:a},l.push(o))}for(e=l.filter(function(t){return!t.isNull()}),n||e.reverse(),a=1;o=e[a];a++)o.type==t.Events.CHANGE&&"mutation"==o.element&&e.unshift(e.splice(a,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var e,n=0;e=t.Events.FIRE_QUEUE_[n];n++)e.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++)e[o]=n.id;return e},t.Events.fromJson=function(e,n){var o=t.Events.get(e.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(e),o.workspaceId=n.id,o},t.Events.get=function(e){return t.registry.getClass(t.registry.Type.EVENT,e)},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId),o=n.getBlockById(e.blockId);if(o){e=t.Events.recordUndo;try{t.Events.recordUndo=!1;var l=o.getParent();if(l&&l.isEnabled()){var i,a=o.getDescendants(!1);for(n=0;i=a[n];n++)i.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{t.Events.recordUndo=e}}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.isUiEvent=!1,t.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},t.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(t){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(t,e){t.superClass_=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t.utils.object.mixin=function(t,e){for(var n in e)t[n]=e[n]},t.utils.object.deepMerge=function(e,n){for(var o in n)e[o]=null!=n[o]&&"object"==typeof n[o]?t.utils.object.deepMerge(e[o]||Object.create(null),n[o]):n[o];return e},t.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},t.inputTypes={VALUE:t.connectionTypes.INPUT_VALUE,STATEMENT:t.connectionTypes.NEXT_STATEMENT,DUMMY:5},t.utils.Svg=function(t){this.tagName_=t},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,o){for(var l in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(l,n[l]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),o&&o.appendChild(e),e},t.utils.dom.addClass=function(t,e){var n=t.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+e+" ")&&(n&&(n+=" "),t.setAttribute("class",n+e),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var o=0;o<n.length;o++)t.utils.dom.removeClass(e,n[o])},t.utils.dom.removeClass=function(t,e){var n=t.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+e+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=e||(n.splice(o,1),o--);return n.length?t.setAttribute("class",n.join(" ")):t.removeAttribute("class"),!0},t.utils.dom.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},t.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},t.utils.dom.insertAfter=function(t,e){var n=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");n?e.insertBefore(t,n):e.appendChild(t)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_={})},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var n,o=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(n=t.utils.dom.cacheWidths_[o]))return n;try{n=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(t){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[o]=n),n},t.utils.dom.getFastTextWidth=function(e,n,o,l){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",o,l)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,o,l){var i,a=e.textContent;return e=a+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(i=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((i=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(i),t.utils.dom.canvasContext_=i.getContext("2d")),t.utils.dom.canvasContext_.font=o+" "+n+" "+l,i=t.utils.dom.canvasContext_.measureText(a).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=i)),i},t.utils.dom.measureFontMetrics=function(t,e,n,o){var l=document.createElement("span");l.style.font=n+" "+e+" "+o,l.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(l),e.appendChild(t),document.body.appendChild(e);try{n={},e.style.alignItems="baseline",n.baseline=t.offsetTop-l.offsetTop,e.style.alignItems="flex-end",n.height=t.offsetTop-l.offsetTop}finally{document.body.removeChild(e)}return n},t.Xml={},t.Xml.workspaceToDom=function(e,n){var o=t.utils.xml.createElement("xml"),l=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));l.hasChildNodes()&&o.appendChild(l);var i,a=e.getTopComments(!0);for(l=0;i=a[l];l++)o.appendChild(i.toXmlWithXY(n));for(e=e.getTopBlocks(!0),l=0;a=e[l];l++)o.appendChild(t.Xml.blockToDomWithXY(a,n));return o},t.Xml.variablesToDom=function(e){for(var n,o=t.utils.xml.createElement("variables"),l=0;n=e[l];l++){var i=t.utils.xml.createElement("variable");i.appendChild(t.utils.xml.createTextNode(n.name)),n.type&&i.setAttribute("type",n.type),i.id=n.getId(),o.appendChild(i)}return o},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var o;e.workspace.RTL&&(o=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var l=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?o-l.x:l.x)),n.setAttribute("y",Math.round(l.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var o,l=0;o=e.inputList[l];l++)for(var i,a=0;i=o.fieldRow[a];a++){var s=t.Xml.fieldToDom_(i);if(s){if("math_slider"===e.type&&e.inputList){var r=i.getConfig("min"),c=i.getConfig("max"),u=i.getConfig("step");i=i.getConfig("decimalPlaces"),r&&s.setAttribute("min",r),c&&s.setAttribute("max",c),u&&s.setAttribute("step",u),i&&s.setAttribute("decimalPlaces",i)}n.appendChild(s)}}},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var o=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),n||o.setAttribute("id",e.id),e.mutationToDom){var l=e.mutationToDom();l&&(l.hasChildNodes()||l.hasAttributes())&&o.appendChild(l)}if(t.Xml.allFieldsToDom_(e,o),l=e.getCommentText()){var i=e.commentModel.size,a=e.commentModel.pinned,s=t.utils.xml.createElement("comment");s.appendChild(t.utils.xml.createTextNode(l)),s.setAttribute("pinned",a),s.setAttribute("h",i.height),s.setAttribute("w",i.width),o.appendChild(s)}for(e.data&&((l=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),o.appendChild(l)),l=0;i=e.inputList[l];l++){var r;if(a=!0,i.type!=t.inputTypes.DUMMY){var c=i.connection.targetBlock();i.type==t.inputTypes.VALUE?r=t.utils.xml.createElement("value"):i.type==t.inputTypes.STATEMENT&&(r=t.utils.xml.createElement("statement")),!(s=i.connection.getShadowDom())||c&&c.isShadow()||r.appendChild(t.Xml.cloneShadow_(s,n)),c&&((s=t.Xml.blockToDom(c,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(r.appendChild(s),a=!1)),r.setAttribute("name",i.name),a||o.appendChild(r)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&o.setAttribute("inline",e.inputsInline),e.isCollapsed()&&o.setAttribute("collapsed",!0),e.isEnabled()||o.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||o.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||o.setAttribute("movable",!1),e.isEditable()||o.setAttribute("editable",!1),(l=e.getNextBlock())&&((s=t.Xml.blockToDom(l,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((r=t.utils.xml.createElement("next")).appendChild(s),o.appendChild(r))),!(s=e.nextConnection&&e.nextConnection.getShadowDom())||l&&l.isShadow()||r.appendChild(t.Xml.cloneShadow_(s,n)),o},t.Xml.cloneShadow_=function(e,n){for(var o,l=e=e.cloneNode(!0);l;)if(n&&"shadow"==l.nodeName&&l.removeAttribute("id"),l.firstChild)l=l.firstChild;else{for(;l&&!l.nextSibling;)o=l,l=l.parentNode,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&l.firstChild!=o&&t.utils.dom.removeNode(o);l&&(o=l,l=l.nextSibling,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&t.utils.dom.removeNode(o))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",o=1;o<e.length;o++){var l=e[o];"/"==l[0]&&(n=n.substring(2)),e[o]=n+"<"+l,"/"!=l[0]&&"/>"!=l.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var l;n.RTL&&(l=n.getWidth()),o=[],t.utils.dom.startTextWidthCache();var i=t.Events.getGroup();i||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var a=!0;try{for(var s,r=0;s=e.childNodes[r];r++){var c=s.nodeName.toLowerCase(),u=s;if("block"==c||"shadow"==c&&!t.Events.recordUndo){var _=t.Xml.domToBlock(u,n);o.push(_.id);var d=u.hasAttribute("x")?parseInt(u.getAttribute("x"),10):10,h=u.hasAttribute("y")?parseInt(u.getAttribute("y"),10):10;isNaN(d)||isNaN(h)||_.moveBy(n.RTL?l-d:d,h),a=!1}else{if("shadow"==c)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==c)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(u,n,l):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(u,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==c){if(!a)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(u,n),a=!1}}}}finally{i||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new(t.Events.get(t.Events.FINISHED_LOADING))(n)),o},t.Xml.appendDomToWorkspace=function(e,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),o&&o.top!=o.bottom){var l=o.bottom,i=n.RTL?o.right:o.left,a=1/0,s=-1/0,r=1/0;for(o=0;o<e.length;o++){var c=n.getBlockById(e[o]).getRelativeToSurfaceXY();c.y<r&&(r=c.y),c.x<a&&(a=c.x),c.x>s&&(s=c.x)}for(l=l-r+10,i=n.RTL?i-s:i-a,o=0;o<e.length;o++)n.getBlockById(e[o]).moveBy(i,l)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),o=n.getAllVariables();try{var l=t.Xml.domToBlockHeadless_(e,n),i=l.getDescendants(!1);if(n.rendered){l.setConnectionTracking(!1);for(var a=i.length-1;0<=a;a--)i[a].initSvg();for(a=i.length-1;0<=a;a--)i[a].render(!1);setTimeout(function(){l.disposed||l.setConnectionTracking(!0)},1),l.updateDisabled(),n.resizeContents()}else for(a=i.length-1;0<=a;a--)i[a].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,o),a=0;a<e.length;a++)n=e[a],t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(n));t.Events.fire(new(t.Events.get(t.Events.CREATE))(l))}return l},t.Xml.domToVariables=function(e,n){for(var o,l=0;o=e.childNodes[l];l++)if(o.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var i=o.getAttribute("type"),a=o.getAttribute("id");n.createVariable(o.textContent,i,a)}},t.Xml.mapSupportedXmlTags_=function(e){for(var n,o={mutation:[],comment:[],data:[],field:[],input:[],next:[]},l=0;n=e.childNodes[l];l++)if(n.nodeType!=t.utils.dom.NodeType.TEXT_NODE)switch(n.nodeName.toLowerCase()){case"mutation":o.mutation.push(n);break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}o.comment.push(n);break;case"data":o.data.push(n);break;case"title":case"field":o.field.push(n);break;case"value":case"statement":o.input.push(n);break;case"next":o.next.push(n);break;default:console.warn("Ignoring unknown tag: "+n.nodeName)}return o},t.Xml.applyMutationTagNodes_=function(t,e){for(var n,o=!1,l=0;n=t[l];l++)e.domToMutation&&(e.domToMutation(n),e.initSvg&&(o=!0));return o},t.Xml.applyCommentTagNodes_=function(e,n){for(var o,l=0;o=e[l];l++){var i=o.textContent,a="true"==o.getAttribute("pinned"),s=parseInt(o.getAttribute("w"),10);o=parseInt(o.getAttribute("h"),10),n.setCommentText(i),n.commentModel.pinned=a,isNaN(s)||isNaN(o)||(n.commentModel.size=new t.utils.Size(s,o)),a&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},t.Xml.applyDataTagNodes_=function(t,e){for(var n,o=0;n=t[o];o++)e.data=n.textContent},t.Xml.applyFieldTagNodes_=function(e,n){for(var o,l=0;o=e[l];l++){var i=o.getAttribute("name");t.Xml.domToField_(n,i,o)}},t.Xml.findChildBlocks_=function(e){for(var n,o={childBlockElement:null,childShadowElement:null},l=0;n=e.childNodes[l];l++)n.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==n.nodeName.toLowerCase()?o.childBlockElement=n:"shadow"==n.nodeName.toLowerCase()&&(o.childShadowElement=n));return o},t.Xml.applyInputTagNodes_=function(e,n,o,l){for(var i,a=0;i=e[a];a++){var s=i.getAttribute("name"),r=o.getInput(s);if(!r){console.warn("Ignoring non-existent input "+s+" in block "+l);break}if((i=t.Xml.findChildBlocks_(i)).childBlockElement){if(!r.connection)throw TypeError("Input connection does not exist.");t.Xml.domToBlockHeadless_(i.childBlockElement,n,r.connection,!1)}i.childShadowElement&&r.connection.setShadowDom(i.childShadowElement)}},t.Xml.applyNextTagNodes_=function(e,n,o){for(var l,i=0;l=e[i];i++){if((l=t.Xml.findChildBlocks_(l)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");t.Xml.domToBlockHeadless_(l.childBlockElement,n,o.nextConnection,!0)}l.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(l.childShadowElement)}},t.Xml.domToBlockHeadless_=function(e,n,o,l){var i=e.getAttribute("type");if(!i)throw TypeError("Block type unspecified: "+e.outerHTML);var a=e.getAttribute("id");a=n.newBlock(i,a);var s=t.Xml.mapSupportedXmlTags_(e),r=t.Xml.applyMutationTagNodes_(s.mutation,a);if(t.Xml.applyCommentTagNodes_(s.comment,a),t.Xml.applyDataTagNodes_(s.data,a),o)if(l){if(!a.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(a.previousConnection)}else if(a.outputConnection)o.connect(a.outputConnection);else{if(!a.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(a.previousConnection)}if(t.Xml.applyFieldTagNodes_(s.field,a),t.Xml.applyInputTagNodes_(s.input,n,a,i),t.Xml.applyNextTagNodes_(s.next,n,a),r&&a.initSvg(),(n=e.getAttribute("inline"))&&a.setInputsInline("true"==n),(n=e.getAttribute("disabled"))&&a.setEnabled("true"!=n&&"disabled"!=n),(n=e.getAttribute("deletable"))&&a.setDeletable("true"==n),(n=e.getAttribute("movable"))&&a.setMovable("true"==n),(n=e.getAttribute("editable"))&&a.setEditable("true"==n),(n=e.getAttribute("collapsed"))&&a.setCollapsed("true"==n),"shadow"==e.nodeName.toLowerCase()){for(e=a.getChildren(!1),n=0;o=e[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(a.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");a.setShadow(!0)}return a},t.Xml.domToField_=function(t,e,n){var o=t.getField(e);if("math_slider"===t.type){var l=n.getAttribute("min");l&&o.setConfig("min",l),(l=n.getAttribute("max"))&&o.setConfig("max",l),(l=n.getAttribute("step"))&&o.setConfig("step",l),(l=n.getAttribute("decimalPlaces"))&&o.setConfig("decimalPlaces",l)}o?o.fromXml(n):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},t.Xml.deleteNext=function(t){for(var e,n=0;e=t.childNodes[n];n++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.Change=function(e,n,o,l,i){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===l?"":l,this.newValue=void 0===i?"":i)},t.utils.object.inherits(t.Events.Change,t.Events.BlockBase),t.Events.BlockChange=t.Events.Change,t.Events.Change.prototype.type=t.Events.CHANGE,t.Events.Change.prototype.toJson=function(){var e=t.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},t.Events.Change.prototype.fromJson=function(e){t.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},t.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.Change.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&t.Xml.domToText(o)),n.domToMutation){var l=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(l)}t.Events.fire(new(t.Events.get(t.Events.CHANGE))(n,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var o;o=this.ids[e];e++){var l=n.getBlockById(o);l?l.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.oldXml=t.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=t.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var o;o=this.ids[e];e++){var l=n.getBlockById(o);l?l.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Move.prototype.fromJson=function(e){if(t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var n=e.newCoordinate.split(",");this.newCoordinate=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},t.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var l=e?this.newParentId:this.oldParentId,i=e?this.newInputName:this.oldInputName,a=e?this.newCoordinate:this.oldCoordinate;if(e=null,l&&!(e=n.getBlockById(l)))return void console.warn("Can't connect to non-existent block: "+l);if(o.getParent()&&o.unplug(),a)i=o.getRelativeToSurfaceXY(),o.moveBy(a.x-i.x,a.y-i.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,i){if(e=e.getInput(i))var s=e.connection}else n==t.connectionTypes.PREVIOUS_STATEMENT&&(s=e.nextConnection);s?o.connect(s):console.warn("Can't connect to non-existent input: "+i)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.Change),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Abstract),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},t.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.UiBase=function(e){t.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===e,this.workspaceId=e||"",this.recordUndo=!1},t.utils.object.inherits(t.Events.UiBase,t.Events.Abstract),t.Events.UiBase.prototype.isUiEvent=!0,t.Events.Ui=function(e,n,o,l){t.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===l?"":l},t.utils.object.inherits(t.Events.Ui,t.Events.UiBase),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,n){this.scale_=n,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+n+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var o=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),e.appendChild(o),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","outline: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".searchBox {","width: 100%;","height: 36px;","position: relative;","}",".inputBox {","border: none;","height: 36px;","background-color: #3f3f3f;","width: 84%;","padding: 10px;","outline: none;","color: #fff;","font-size: 14px;","-webkit-appearance: none;","}",".inputBox::-webkit-input-placeholder {","color: #bdbdbd;","}",".searchIcon {","position: absolute;","cursor: pointer;","outline: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.utils.math={},t.utils.math.toRadians=function(t){return t*Math.PI/180},t.utils.math.toDegrees=function(t){return 180*t/Math.PI},t.utils.math.clamp=function(t,e,n){if(n<t){var o=n;n=t,t=o}return Math.max(t,Math.min(e,n))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",function(){t.utils.dom.addClass(e,"blocklyFocused")}),e.addEventListener("focusout",function(){t.utils.dom.removeClass(e,"blocklyFocused")})}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,o,l){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,o,l)},t.DropDownDiv.showPositionedByField=function(e,n,o){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,o)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),o=n.getBBox(),l=e.workspace.scale;return e=o.height*l,o=o.width*l,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+o)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,o,l){var i=e.left+(e.right-e.left)/2,a=e.bottom;e=e.top,l&&(e+=l);for(var s=(l=n.getSourceBlock()).workspace;s.options.parentWorkspace;)s=s.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(s.getParentSvg().parentNode),t.DropDownDiv.show(n,l.RTL,i,a,i,e,o)},t.DropDownDiv.show=function(e,n,o,l,i,a,s){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=s||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(o,l,i,a)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,o,l){var i=t.DropDownDiv.getBoundsInfo_(),a=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+a.height<i.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,i,a):l-a.height>i.top?t.DropDownDiv.getPositionAboveMetrics_(o,l,i,a):n+a.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,i,a):l-a.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(o,l,i,a):t.DropDownDiv.getPositionTopOfPageMetrics_(e,i,a)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,o,l){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,l.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,o,l){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,l.width)).divX,initialY:n-l.height,finalX:e.divX,finalY:n-l.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:l.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,o){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,o,l){var i=e;return e=t.utils.math.clamp(n,e-l/2,o-l),i-=t.DropDownDiv.ARROW_SIZE/2,n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:l=t.utils.math.clamp(n,i-e,l-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout(function(){t.DropDownDiv.hideWithoutAnimation()},1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,o,l){(e=t.DropDownDiv.getPositionMetrics_(e,n,o,l)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),o=Math.floor(e.initialY),l=Math.floor(e.finalX);var i=Math.floor(e.finalY),a=t.DropDownDiv.DIV_;return a.style.left=n+"px",a.style.top=o+"px",a.style.display="block",a.style.opacity=1,a.style.transform="translate("+(l-n)+"px,"+(i-o)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();n=(e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n)).left+(e.right-e.left)/2,t.DropDownDiv.positionInternal_(n,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var n=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=e+this.length_/2;e*=t,n*=t,o*=t,this.setLineAttributes_(this.line1_,t,n,o,e,e),this.setLineAttributes_(this.line2_,t,e,e,n,o)},t.Grid.prototype.setLineAttributes_=function(t,e,n,o,l,i){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",n),t.setAttribute("y1",l),t.setAttribute("x2",o),t.setAttribute("y2",i))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,o){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,o,l){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=l||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},t.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},t.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},t.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},t.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},t.Theme.prototype.setStartHats=function(t){this.startHats=t},t.Theme.defineTheme=function(e,n){var o=new t.Theme(e),l=n.base;return l&&("string"==typeof l&&(l=t.registry.getObject(t.registry.Type.THEME,l)),l instanceof t.Theme&&(t.utils.object.deepMerge(o,l),o.name=e)),t.utils.object.deepMerge(o.blockStyles,n.blockStyles),t.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(o.componentStyles,n.componentStyles),t.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter(function(t){return"CATEGORY"==t.kind.toUpperCase()}).length},t.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents)&&!!t.contents.filter(function(t){return"CATEGORY"==t.kind.toUpperCase()}).length},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var n,o=[],l=e.childNodes;for(l||(l=e),e=0;n=l[e];e++)if(n.tagName){var i={},a=n.tagName.toUpperCase();i.kind=a,"BLOCK"==a?i.blockxml=n:n.childNodes&&0<n.childNodes.length&&(i.contents=t.utils.toolbox.xmlToJsonArray_(n)),t.utils.toolbox.addAttributes_(n,i),o.push(i)}return o},t.utils.toolbox.addAttributes_=function(t,e){for(var n=0;n<t.attributes.length;n++){var o=t.attributes[n];-1<o.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[o.nodeName.replace("css-","")]=o.value):e[o.nodeName]=o.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.Options=function(e){var n=!!e.readOnly;if(n)var o=null,l=!1,i=!1,a=!1,s=!1,r=!1,c=!1;else{o=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),l=t.utils.toolbox.hasCategories(o),void 0===(i=e.trashcan)&&(i=l);var u=e.maxTrashcanContents;i?void 0===u&&(u=32):u=0,void 0===(a=e.collapse)&&(a=l),void 0===(s=e.comments)&&(s=l),void 0===(r=e.disable)&&(r=l),void 0===(c=e.sounds)&&(c=!0)}var _=!!e.rtl,d=e.horizontalLayout;void 0===d&&(d=!1);var h=e.toolboxPosition;h="end"!==h,h=d?h?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:h==_?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var y=e.css;void 0===y&&(y=!0);var p="https://blockly-demo.appspot.com/static/media/";e.media?p=e.media:e.path&&(p=e.path+"media/");var m=void 0===e.oneBasedIndex||!!e.oneBasedIndex,k=e.renderer||"geras",g=e.plugins||{};this.RTL=_,this.oneBasedIndex=m,this.collapse=a,this.comments=s,this.disable=r,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=p,this.hasCategories=l,this.moveOptions=t.Options.parseMoveOptions_(e,l),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=i,this.maxTrashcanContents=u,this.hasSounds=c,this.hasCss=y,this.horizontalLayout=d,this.languageTree=o,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=h,this.theme=t.Options.parseThemeOptions_(e),this.renderer=k,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=g},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(t,e){var n=t.move||{},o={};return void 0===n.scrollbars&&void 0===t.scrollbars?o.scrollbars=e:"object"==typeof n.scrollbars?(o.scrollbars={},o.scrollbars.horizontal=!!n.scrollbars.horizontal,o.scrollbars.vertical=!!n.scrollbars.vertical,o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!n.scrollbars||!!t.scrollbars,o.wheel=o.scrollbars&&void 0!==n.wheel?!!n.wheel:"object"==typeof o.scrollbars,o.drag=!!o.scrollbars&&(void 0===n.drag||!!n.drag),o},t.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},t.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.ScrollbarPair=function(e,n,o,l){this.workspace_=e,o=void 0===o||o;var i=(n=void 0===n||n)&&o;n&&(this.hScroll=new t.Scrollbar(e,!0,i,l)),o&&(this.vScroll=new t.Scrollbar(e,!1,i,l)),i&&(this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(o=!0)):o=n=!0,n||o){try{t.Events.disable(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},t.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},t.ScrollbarPair.prototype.setOrigin=function(t,e){this.hScroll&&this.hScroll.setOrigin(t,e),this.vScroll&&this.vScroll.setOrigin(t,e)},t.ScrollbarPair.prototype.set=function(t,e,n){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(e,!1),(n||void 0===n)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},t.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},t.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},t.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},t.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},t.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},t.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},t.Scrollbar=function(e,n,o,l){this.workspace_=e,this.pair_=o||!1,this.horizontal_=n,this.ratio=this.oldHostMetrics_=null,this.createDom_(l),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollbarLength_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.SCROLLBAR_MARGIN=.5,t.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.scrollWidth!=e.scrollWidth||t.scrollHeight!=e.scrollHeight||t.scrollLeft!=e.scrollLeft||t.scrollTop!=e.scrollTop)},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},t.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_()))},t.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||(this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop)},t.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-2*t.Scrollbar.SCROLLBAR_MARGIN;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=e.absoluteLeft+t.Scrollbar.SCROLLBAR_MARGIN,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-t.Scrollbar.SCROLLBAR_MARGIN),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewWidth/t.scrollWidth;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollWidth-t.viewWidth;var n=this.scrollbarLength_-this.handleLength_;t=(t.viewLeft-t.scrollLeft)/e*n,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=n/e}},t.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-2*t.Scrollbar.SCROLLBAR_MARGIN;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+t.Scrollbar.SCROLLBAR_MARGIN:e.absoluteLeft+e.viewWidth-t.Scrollbar.scrollbarThickness-t.Scrollbar.SCROLLBAR_MARGIN,e.absoluteTop+t.Scrollbar.SCROLLBAR_MARGIN),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewHeight/t.scrollHeight;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollHeight-t.viewHeight;var n=this.scrollbarLength_-this.handleLength_;t=(t.viewTop-t.scrollTop)/e*n,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=n/e}},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=t.utils.getInjectionDivXY_(this.svgHandle_);o=this.horizontal_?o.x:o.y;var l=this.handlePosition_,i=.95*this.handleLength_;n<=o?l-=i:n>=o+this.handleLength_&&(l+=i),this.setHandlePosition(this.constrainHandlePosition_(l)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},t.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},t.Scrollbar.prototype.set=function(t,e){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(e||void 0===e)&&this.updateMetrics_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.browserEvents.bind(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.browserEvents.bind(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.browserEvents.unbind(e.mouseOverWrapper_),t.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout(function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(o)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var l=t.Tooltip.lastX_;l=e?l-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):l+t.Tooltip.OFFSET_X;var i=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;i+t.Tooltip.DIV.offsetHeight>o+window.scrollY&&(i-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?l=Math.max(t.Tooltip.MARGINS-window.scrollX,l):l+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(l=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=i+"px",t.Tooltip.DIV.style.left=l+"px"}},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,o)},t.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,n,o,l,i){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,t.setAttribute("transform","translate(0, 0) scale("+i+")"),e.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",l),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},t.blockRendering={},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,o){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,o),e},t.ASTNode=function(e,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){if(!e)return null;var n=e.type;return n==t.connectionTypes.INPUT_VALUE||n==t.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):n==t.connectionTypes.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):n==t.connectionTypes.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):n==t.connectionTypes.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var e,n=this.location_.getParentInput(),o=n.getSourceBlock();for(n=o.inputList.indexOf(n)+1;e=o.inputList[n];n++){for(var l,i=e.fieldRow,a=0;l=i[a];a++)if(l.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(l);if(e.connection)return t.ASTNode.createInputNode(e)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),o=e.getSourceBlock(),l=o.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=o.inputList[l];l++){for(var i=n.fieldRow;e<i.length;){if(i[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var e,n=this.location_.getParentInput(),o=n.getSourceBlock(),l=o.inputList.indexOf(n);e=o.inputList[l];l--){if(e.connection&&e!==n)return t.ASTNode.createInputNode(e);for(var i,a=(e=e.fieldRow).length-1;i=e[a];a--)if(i.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i)}return null},t.ASTNode.prototype.findPrevForField_=function(){var e,n=this.location_,o=n.getParentInput(),l=n.getSourceBlock(),i=l.inputList.indexOf(o);for(n=o.fieldRow.indexOf(n)-1;e=l.inputList[i];i--){if(e.connection&&e!==o)return t.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<n;){if(e[n].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(e[n]);n--}0<=i-1&&(n=l.inputList[i-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var l,i=0;l=n[i];i++)if(o.id==l.id)return-1==(e=i+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var n,o=0;n=e[o];o++){for(var l,i=n.fieldRow,a=0;l=i[a];a++)if(l.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(l);if(n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createConnectionNode(e.targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case t.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.BLOCK:return e=this.location_,this.getOutAstNodeForBlock_(e);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return e=this.location_,this.getOutAstNodeForBlock_(e.getSourceBlock())}return null},t.Blocks=Object.create(null),t.utils.deprecation={},t.utils.deprecation.warn=function(t,e,n,o){t=t+" was deprecated on "+e+" and will be deleted on "+n+".",o&&(t+="\nUse "+o+" instead."),console.warn(t)},t.Connection=function(t,e){this.sourceBlock_=t,this.type=e},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var n,o=this,l=o.getSourceBlock(),i=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),o.isConnected()){var a=o.targetBlock(),s=o.getShadowDom();if(o.shadowDom_=null,a.isShadow())s=t.Xml.blockToDom(a),a.dispose(!1),a=null;else if(o.type==t.connectionTypes.INPUT_VALUE){if(!a.outputConnection)throw Error("Orphan block does not have an output connection.");var r=t.Connection.getConnectionForOrphanedOutput(i,a);r&&(a.outputConnection.connect(r),a=null)}else if(o.type==t.connectionTypes.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Orphan block does not have a previous connection.");for(r=i;r.nextConnection;){var c=r.getNextBlock();if(!c||c.isShadow()){a.workspace.connectionChecker.canConnect(a.previousConnection,r.nextConnection,!1)&&(r.nextConnection.connect(a.previousConnection),a=null);break}r=c}}if(a&&(o.disconnect(),t.Events.recordUndo)){var u=t.Events.getGroup();setTimeout(function(){a.workspace&&!a.getParent()&&(t.Events.setGroup(u),a.outputConnection?a.outputConnection.onFailedConnect(o):a.previousConnection&&a.previousConnection.onFailedConnect(o),t.Events.setGroup(!1))},t.BUMP_DELAY)}o.shadowDom_=s}t.Events.isEnabled()&&(n=new(t.Events.get(t.Events.BLOCK_MOVE))(i)),t.Connection.connectReciprocally_(o,e),i.setParent(l),n&&(n.recordNew(),t.Events.fire(n))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,e,!1);if(o!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(t){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},t.Connection.getSingleConnection_=function(t,e){for(var n,o=null,l=(e=e.outputConnection).getConnectionChecker(),i=0;n=t.inputList[i];i++)if((n=n.connection)&&l.canConnect(e,n,!1)){if(o)return null;o=n}return o},t.Connection.getConnectionForOrphanedOutput=function(e,n){for(var o;o=t.Connection.getSingleConnection_(e,n);)if(!(e=o.targetBlock())||e.isShadow())return o;return null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=e.getSourceBlock();e=this}else n=e.getSourceBlock(),o=this.sourceBlock_;var l=t.Events.getGroup();l||t.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||e.respawnShadow_(),l||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var o;t.Events.isEnabled()&&(o=new(t.Events.get(t.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),t.Events.fire(o))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(){return this.shadowDom_},t.Connection.prototype.neighbours=function(t){return[]},t.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)if(n[o].connection===this){t=n[o];break}return t},t.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{e=null;for(var n,o=0;n=t.inputList[o];o++)if(n.connection==this){e=n;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},t.Extensions={},t.Extensions.ALL_={},t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,function(){this.mixin(n)})},t.Extensions.registerMutator=function(e,n,o,l){var i='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(i,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(i,n.mutationToDom,"mutationToDom");var a=t.Extensions.checkMutatorDialog_(n,i);if(o&&"function"!=typeof o)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,function(){if(a){if(!t.Mutator)throw Error(i+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(l||[]))}this.mixin(n),o&&o.apply(this)})},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,o){var l=t.Extensions.ALL_[e];if("function"!=typeof l)throw Error('Error: Extension "'+e+'" not found.');if(o)t.Extensions.checkNoMutatorProperties_(e,n);else var i=t.Extensions.getMutatorProperties_(n);if(l.apply(n),o)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(i,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(t,e,n){if(!e)throw Error(t+'missing required property "'+n+'"');if("function"!=typeof e)throw Error(t+'" required property "'+n+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(t,e){var n=void 0!==t.compose,o=void 0!==t.decompose;if(n&&o){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(n||o)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var o=0;o<n.length;o++)if(e[o]!=n[o])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var o=[];return"object"==typeof document&&t.utils.runAfterPageLoad(function(){for(var e in n)t.utils.checkMessageReferences(n[e])}),function(){this.type&&-1==o.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),o.push(this.type)),this.setTooltip(function(){var l=String(this.getFieldValue(e)),i=n[l];return null==i?-1==o.indexOf(this.type)&&(l="No tooltip mapping for value "+l+" of field "+e,null!=this.type&&(l+=" of block type "+this.type),console.warn(l+".")):i=t.utils.replaceMessageReferences(i),i}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(t,e,n){var o=t.getField(e);if(!o.isOptionListDynamic()){o=o.getOptions();for(var l=0;l<o.length;++l){var i=o[l][1];null==n[i]&&console.warn("No tooltip mapping for value "+i+" of field "+e+" of block type "+t.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad(function(){t.utils.checkMessageReferences(e)}),function(){this.setTooltip(function(){var o=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",o?o.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,o=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=e.x,o.translateY_=e.y,o.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),t.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,o,l){var i=(new Date-o)/150;1<i?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*l/2*i)+","+(e.translateY_+e.bBox_.height*l*i)+") scale("+(1-i)*l+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,o,l))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var l=n.getSvgXY(e.getSvgRoot());e.outputConnection?(l.x+=(e.RTL?3:-3)*o,l.y+=13*o):e.previousConnection&&(l.x+=(e.RTL?-23:23)*o,l.y+=3*o),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:l.x,cy:l.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,o)}},t.blockAnimations.connectionUiStep_=function(e,n,o){var l=(new Date-n)/150;1<l?t.utils.dom.removeNode(e):(e.setAttribute("r",25*l*o),e.style.opacity=1-l,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,o))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,o){var l=(new Date-o)/200;1<l?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(l*Math.PI*3)*(1-l)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,o)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.Events.BlockDrag=function(e,n,o){t.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=n,this.blocks=o},t.utils.object.inherits(t.Events.BlockDrag,t.Events.UiBase),t.Events.BlockDrag.prototype.type=t.Events.BLOCK_DRAG,t.Events.BlockDrag.prototype.toJson=function(){var e=t.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},t.Events.BlockDrag.prototype.fromJson=function(e){t.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},t.registry.register(t.registry.Type.EVENT,t.Events.BLOCK_DRAG,t.Events.BlockDrag),t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var o=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,e))&&(t.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),e.mutationToDom){var l=e.mutationToDom();l&&o.domToMutation(l)}for(n=0;n<e.inputList.length;n++){var i=e.inputList[n];if(i.name!=t.constants.COLLAPSED_INPUT_NAME){var a=o.inputList[n];for(l=0;l<i.fieldRow.length;l++)a.fieldRow[l].setValue(i.fieldRow[l].getValue())}}o.setCollapsed(e.isCollapsed()),o.setInputsInline(e.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return o},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack();if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var o=e.local,l=e.closest;return e=e.radius,o&&l?this.localConnection_&&this.closestConnection_?(this.closestConnection_!=l||this.localConnection_!=o)&&(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),!(l&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),n=null,o=null,l=0;l<this.availableConnections_.length;l++){var i=this.availableConnections_[l],a=i.closest(e,t);a.connection&&(n=a.connection,o=i,e=a.radius)}return{closest:n,local:o,radius:e}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return e=e&&!!e.closest&&n!=t.DELETE_AREA_TOOLBOX,!!n&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e==this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,n=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=n.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),t&&e&&n.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),o=n.nextConnection,l=n.previousConnection,i=n.outputConnection;if(i=e.type==t.connectionTypes.INPUT_VALUE&&!(i&&i.targetConnection),!(e!=o||l&&l.targetConnection)||i?e.targetBlock().unplug(!1):e.type==t.connectionTypes.NEXT_STATEMENT&&e!=o?((o=e.targetConnection).getSourceBlock().unplug(!1),l=l?l.targetConnection:null,n.unplug(!0),l&&l.connect(o)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,n.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++){n=n.getIcons();for(var l=0;l<n.length;l++){var i={location:n[l].getIconLocation(),icon:n[l]};e.push(i)}}return e},t.BlockDragger.prototype.startBlockDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(n),e=this.pixelsToWorkspaceUnits_(e),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(e=this.workspace_.getToolbox())&&"function"==typeof e.addStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(n))},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.dragBlock=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var o=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(n,this.deleteArea_),this.updateCursorDuringBlockDrag_()},t.BlockDragger.prototype.endBlockDrag=function(e,n){this.dragBlock(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),e=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.moveOffDragSurface(n),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.closeLid.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[]):e&&e.closeLid(),this.wouldDeleteBlock_},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(t.utils.Coordinate.sum(o.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.IConnectionChecker=function(){},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,o,l){return this.canConnectWithReason(e,n,o,l)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,o,l){var i=this.doSafetyChecks(e,n);return i!=t.Connection.CAN_CONNECT?i:this.doTypeChecks(e,n)?o&&!this.doDragChecks(e,n,l||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,o){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var o=e.getSourceBlock(),l=n.getSourceBlock();else l=e.getSourceBlock(),o=n.getSourceBlock();return o==l?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:o.workspace!==l.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!l.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var n=0;n<t.length;n++)if(-1!=e.indexOf(t[n]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,o){if(e.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!e.targetConnection&&-1==t.draggingConnections.indexOf(n)&&(!n.targetConnection||!!(e=n.targetBlock()).isInsertionMarker()&&!e.getPreviousBlock())},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var o=this.getVariable(n,e.type),l=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{o&&o.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,o,l):this.renameVariableAndUses_(e,n,l)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(t,e){var n=this.getVariableById(t);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(n,e)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,o){for(t.Events.fire(new(t.Events.get(t.Events.VAR_RENAME))(e,n)),e.name=n,n=0;n<o.length;n++)o[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,o,l){var i=e.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,l),n=0;n<l.length;n++)l[n].renameVarById(e.getId(),o.getId());t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(i).indexOf(e),this.variableMap_[i].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,o){var l=this.getVariable(e,n);if(l){if(o&&l.getId()!=o)throw Error('Variable "'+e+'" is already in use and its id is "'+l.getId()+'" which conflicts with the passed in id, "'+o+'".');return l}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return l=o||t.utils.genUid(),n=n||"",l=new t.VariableModel(this.workspace,e,n,l),(e=this.variableMap_[n]||[]).push(l),delete this.variableMap_[n],this.variableMap_[n]=e,l},t.VariableMap.prototype.deleteVariable=function(e){for(var n,o=this.variableMap_[e.type],l=0;n=o[l];l++)if(n.getId()==e.getId()){o.splice(l,1),t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var o,l=n.name,i=this.getVariableUsesById(e);for(e=0;o=i[e];e++)if("procedures_defnoreturn"==o.type||"procedures_defreturn"==o.type)return e=o.getFieldValue("NAME"),l=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",l).replace("%2",e),void t.alert(l);var a=this;1<i.length?(l=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(i.length)).replace("%2",l),t.confirm(l,function(t){t&&n&&a.deleteVariableInternal(n,i)})):a.deleteVariableInternal(n,i)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var o=t.Events.getGroup();o||t.Events.setGroup(!0);try{for(var l=0;l<n.length;l++)n[l].dispose(!0);this.deleteVariable(e)}finally{o||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var o,l=0;o=n[l];l++)if(t.Names.equals(o.name,e))return o;return null},t.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),n=0;n<e.length;n++)for(var o,l=e[n],i=0;o=this.variableMap_[l][i];i++)if(o.getId()==t)return o;return null},t.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var o=0;o<e.length;o++)""==e[o]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var t,e=[];for(t in this.variableMap_)e=e.concat(this.variableMap_[t]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var t,e=[];for(t in this.variableMap_)for(var n,o=this.variableMap_[t],l=0;n=o[l];l++)e.push(n.name);return e},t.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var l=n[o].getVarModels();if(l)for(var i=0;i<l.length;i++)l[i].getId()==t&&e.push(n[o])}return e},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},t.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var e=[],n=0;n<t.length;n++)e.push.apply(e,t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push.apply(e,e[n].getChildren(!1));return e.filter(function(t){return!t.isInsertionMarker()})},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},t.Workspace.prototype.createVariable=function(t,e,n){return this.variableMap_.createVariable(t,e,n)},t.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},t.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},t.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},t.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},t.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e,n=0;for(e in t){if(t[e]>this.remainingCapacityOfType(e))return!1;n+=t[e]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_,l=n.pop();if(l){for(var i=[l];n.length&&l.group&&l.group==n[n.length-1].group;)i.push(n.pop());for(n=0;l=i[n];n++)o.push(l);i=t.Events.filter(i,e),t.Events.recordUndo=!1;try{for(n=0;l=i[n];n++)l.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e,n=0;e=this.listeners_[n];n++)e(t)},t.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},t.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},t.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},t.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},t.Workspace.prototype.allInputsFilled=function(t){for(var e,n=this.getTopBlocks(!1),o=0;e=n[o];o++)if(!e.allInputsFilled(t))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var e,n=[];for(e in t.Workspace.WorkspaceDB_)n.push(t.Workspace.WorkspaceDB_[e]);return n},t.Bubble=function(e,n,o,l,i,a){this.workspace_=e,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=t.utils.math.toRadians(o),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!i||!a))),this.setAnchorLocation(l),i&&a||(i=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,a=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(i,a),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(o={}),o=t.utils.dom.createSvgElement(t.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},o),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),n=2*t.Bubble.BORDER_WIDTH,t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,n.toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},t.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},t.Bubble.prototype.showContextMenu=function(t){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(t){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},t.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},t.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),e=this.getOptimalRelativeLeft_(t),n=this.getOptimalRelativeTop_(t),o=this.shape_.getBBox(),l={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},i={x:-this.width_-30,y:n};n={x:o.width,y:n};var a={x:e,y:o.height};e=o.width<o.height?n:a,o=o.width<o.height?a:n,n=this.getOverlap_(l,t),a=this.getOverlap_(i,t);var s=this.getOverlap_(e,t);t=this.getOverlap_(o,t),n==(t=Math.max(n,a,s,t))?(this.relativeLeft_=l.x,this.relativeTop_=l.y):a==t?(this.relativeLeft_=i.x,this.relativeTop_=i.y):s==t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=o.x,this.relativeTop_=o.y)},t.Bubble.prototype.getOverlap_=function(t,e){var n=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(n+this.width_,e.left+e.width)-Math.max(n,e.left))*(Math.min(t+this.height_,e.top+e.height)-Math.max(t,e.top))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,l=o-this.width_,i=e.left+e.width,a=e.left+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(l=n+this.anchorXY_.x)+this.width_,a=e.left,i=e.left+e.width-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?l<a?n=-(a-this.anchorXY_.x+this.width_):o>i&&(n=-(i-this.anchorXY_.x)):l<a?n=a-this.anchorXY_.x:o>i&&(n=i-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.height)return n;var o=this.anchorXY_.y+n,l=o+this.height_,i=e.top;e=e.top+e.height-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var a=this.anchorXY_.y;return o<i?n=i-a:l>e&&(n=e-a-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},t.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var o=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,o+45),n=Math.max(n,o+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*t.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-o)+","+(n-o)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,o=this.height_/2,l=-this.relativeLeft_,i=-this.relativeTop_;if(n==l&&o==i)e.push("M "+n+","+o);else{i-=o,l-=n,this.workspace_.RTL&&(l*=-1);var a=Math.sqrt(i*i+l*l),s=Math.acos(l/a);0>i&&(s=2*Math.PI-s);var r=s+Math.PI/2;r>2*Math.PI&&(r-=2*Math.PI);var c=Math.sin(r),u=Math.cos(r),_=this.getBubbleSize();r=(_.width+_.height)/t.Bubble.ARROW_THICKNESS,r=Math.min(r,_.width,_.height)/4,l=n+(_=1-t.Bubble.ANCHOR_RADIUS/a)*l,i=o+_*i,_=n+r*u;var d=o+r*c;n-=r*u,o-=r*c,(c=s+this.arrow_radians_)>2*Math.PI&&(c-=2*Math.PI),s=Math.sin(c)*a/t.Bubble.ARROW_BEND,a=Math.cos(c)*a/t.Bubble.ARROW_BEND,e.push("M"+_+","+d),e.push("C"+(_+a)+","+(d+s)+" "+l+","+i+" "+l+","+i),e.push("C"+l+","+i+" "+(n+a)+","+(o+s)+" "+n+","+o)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.browserEvents.unbind(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},t.Bubble.textToDom=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var o=0;o<e.length;o++){var l=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),i=document.createTextNode(e[o]);l.appendChild(i)}return n},t.Bubble.createNonEditableBubble=function(e,n,o){if((o=new t.Bubble(n.workspace,e,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(var l,i=0;l=e.childNodes[i];i++)l.setAttribute("text-anchor","end"),l.setAttribute("x",n+t.Bubble.BORDER_WIDTH)}return o},t.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,o){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var o=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,o)):(o=o.getCommentById(e.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){if(t.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var n=e.getXY();e.moveBy(t.x-n.x,t.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e&&"function"==typeof e.addStyle){var n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(n)}},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},t.BubbleDragger.prototype.maybeDeleteBubble_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBubble_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):t&&t.closeLid(),this.wouldDeleteBubble_},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=t.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveTo(e.x,e.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(t.Events.get(t.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.Events.Click=function(e,n,o){t.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:n),this.blockId=e?e.id:null,this.targetType=o},t.utils.object.inherits(t.Events.Click,t.Events.UiBase),t.Events.Click.prototype.type=t.Events.CLICK,t.Events.Click.prototype.toJson=function(){var e=t.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},t.Events.Click.prototype.fromJson=function(e){t.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.CLICK,t.Events.Click),t.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){if(e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&t.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_))&&(!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0))},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new t.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t)},t.Gesture.prototype.fireWorkspaceClick_=function(e){t.Events.fire(new(t.Events.get(t.Events.CLICK))(null,e.id,"workspace"))},t.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},t.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(t.Events.get(t.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");t.Events.fire(e)}this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},t.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},t.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},t.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},t.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},t.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.inProgress=function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)if(e.currentGesture_)return!0;return!1},t.Field=function(e,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.fieldType=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},t.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),"colourMatrix"!==this.fieldType&&"colourPicker"!==this.fieldType&&(t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.browserEvents.unbind(this.mouseDownWrapper_)),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},t.Field.prototype.setValidator=function(t){this.validator_=t},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),o=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),l=n.FIELD_TEXT_HEIGHT,i=0;this.textElement_&&(o+=i=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(l=Math.max(l,n.FIELD_BORDER_RECT_HEIGHT)),"colourMatrix"!==this.fieldType&&"colourPicker"!==this.fieldType&&(this.size_.height=l,this.size_.width=o),this.positionTextElement_(e,i),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),o=t.utils.style.getPageOffset(this.borderRect_),l=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),l=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),l+=1*n,e+=1*n}return new t.utils.Rect(o.y,o.y+e,o.x,o.x+l)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();if(o===e)this.doValueUpdate_(e);else{if(n&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,e)),this.selectedOption_&&o&&o!==e&&this.generatedOptions_){var l=0;this.generatedOptions_.forEach(function(t){t[1]===e&&l++}),l||(e=o)}this.doValueUpdate_(e),this.isDirty_&&this.forceRerender()}}}}},t.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(t){return null==t?null:t},t.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(t){},t.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},t.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return e?t.Tooltip.getTooltipOfObject(e):t.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)for(var l=n[o],i=l.fieldRow,a=0;a<i.length;a++)if(i[a]===this){t=l;break}return t},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onShortcut=function(t){return!1},t.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.FieldLabel=function(e,n,o){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,o),o||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,o,l){if(e!=t.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=o,this.connection=l,this.fieldRow=[]},t.Input.prototype.align=t.constants.ALIGN.LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},t.Input.prototype.insertFieldAt=function(e,n,o){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return n||""==n&&o?("string"==typeof n&&(n=t.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e):e},t.Input.prototype.removeField=function(t,e){for(var n,o=0;n=this.fieldRow[o];o++)if(n.name===t)return n.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;this.visible_=t;for(var n,o=0;n=this.fieldRow[o];o++)n.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),e},t.Input.prototype.markDirty=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.markDirty()},t.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},t.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},t.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,o){if(t.Generator&&void 0!==t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!e.getBlockById(o)?o:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=t.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,o)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME=t.constants.COLLAPSED_INPUT_NAME,t.Block.COLLAPSED_FIELD_NAME=t.constants.COLLAPSED_FIELD_NAME,t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_=null,t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_DELETE))(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var l,i=this.getConnections_(!0);for(n=0;l=i[n];n++)l.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var t,e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.initModel&&n.initModel()},t.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},t.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==t.connectionTypes.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e},t.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();t&&n&&!n.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},t.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,n=0;e=this.inputList[n];n++)e.connection&&t.push(e.connection);return t},t.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},t.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.type==t.connectionTypes.NEXT_STATEMENT)return e.connection;return null},t.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},t.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()==t&&(t=e));return t},t.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e,n=0;e=this.inputList[n];n++)e.connection&&(e=e.connection.targetBlock())&&t.push(e);return(n=this.getNextBlock())&&t.push(n),t},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(t){for(var e,n=[this],o=this.getChildren(t),l=0;e=o[l];l++)n.push.apply(n,e.getDescendants(t));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(t){this.deletable_=t},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(t){this.movable_=t},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(t){this.isShadow_=t},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(t,e){var n=this.getConnections_(!0);if(t=t.getConnections_(!0),n.length!=t.length)throw Error("Connection lists did not match in length.");for(var o=0;o<t.length;o++)if(t[o]==e)return n[o];return null},t.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},t.Block.prototype.setTooltip=function(t){this.tooltip=t},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(t){this.styleName_=t},t.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,l=0;o=e.fieldRow[l];l++)if(o.name==t)return o;return null},t.Block.prototype.getVars=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,l=0;o=t.fieldRow[l];l++)o.referencesVariables()&&e.push(o.getValue());return e},t.Block.prototype.getVarModels=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,l=0;o=t.fieldRow[l];l++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&e.push(o);return e},t.Block.prototype.updateVarName=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,l=0;o=e.fieldRow[l];l++)o.referencesVariables()&&t.getId()==o.getValue()&&o.refreshVariableName()},t.Block.prototype.renameVarById=function(t,e){for(var n,o=0;n=this.inputList[o];o++)for(var l,i=0;l=n.fieldRow[i];i++)l.referencesVariables()&&t==l.getValue()&&l.setValue(e)},t.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},t.Block.prototype.setFieldValue=function(t,e){var n=this.getField(e);if(!n)throw Error('Field "'+e+'" not found.');n.setValue(t)},t.Block.prototype.setFieldSliderLimit=function(t){if("math_slider"===this.type){var e=this.getField("NUM");e.setConfig("min",t[0]),e.setConfig("max",t[1])}},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.DUMMY&&this.inputList[e].type==t.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.VALUE&&this.inputList[e].type==t.inputTypes.DUMMY)return!0;return!1},t.Block.prototype.setOutputShape=function(t){this.outputShape_=t},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function o(t){var e=t.getCheck();return!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),!!e&&(-1!=e.indexOf("Boolean")||-1!=e.indexOf("Number"))}function l(){s&&s.getType()==r.getType()&&s.getLocation()==r.getLocation()&&(s=null)}var i=[];n=n||"?";var a=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var s=t.ASTNode.createBlockNode(this),r=s;s;){switch(s.getType()){case t.ASTNode.types.INPUT:var c=s.getLocation();s.in()?o(c)&&i.push("("):i.push(n);break;case t.ASTNode.types.FIELD:(c=s.getLocation()).name!=t.constants.COLLAPSED_FIELD_NAME&&i.push(c.getText())}if(!(s=(c=s).in()||c.next())){for(s=c.out(),l();s&&!s.next();)s=s.out(),l(),s&&s.getType()==t.ASTNode.types.INPUT&&o(s.getLocation())&&i.push(")");s&&(s=s.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=a,n=2,a=i.length;n<a;n++)"("==i[n-2]&&")"==i[n]&&(i[n-2]=i[n-1],i.splice(n-1,2),a-=2);return i=i.join(" ").replace(/(\() | (\))/gim,"$1$2").trim()||"???",e&&i.length>e&&(i=i.substring(0,e-3)+"..."),i},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.inputTypes.VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.inputTypes.STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.inputTypes.DUMMY,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var o=0;void 0!==e["message"+o];)this.interpolate_(e["message"+o],e["args"+o]||[],e["lastDummyAlign"+o],n),o++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(o=e.tooltip,o=t.utils.replaceMessageReferences(o),this.setTooltip(o)),void 0!==e.enableContextMenu&&(o=e.enableContextMenu,this.contextMenu=!!o),void 0!==e.helpUrl&&(o=e.helpUrl,o=t.utils.replaceMessageReferences(o),this.setHelpUrl(o)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(e=e.extensions,n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(n){console.warn(e+"Illegal colour value: ",t)}}},t.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch(n){console.warn(e+"Style does not exist: ",t)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],e)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,o,l){e=t.utils.tokenizeInterpolation(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,o),o=[],e=0;for(var i;i=n[e];e++)if(this.isInputKeyword_(i.type)){if(i=this.inputFromJson_(i,l)){for(var a,s=0;a=o[s];s++)i.appendField(a[0],a[1]);o.length=0}}else(s=this.fieldFromJson_(i))&&o.push([s,i.name])},t.Block.prototype.validateTokens_=function(t,e){for(var n=[],o=0,l=0;l<t.length;l++){var i=t[l];if("number"==typeof i){if(1>i||i>e)throw Error('Block "'+this.type+'": Message index %'+i+" out of range.");if(n[i])throw Error('Block "'+this.type+'": Message index %'+i+" duplicated.");n[i]=!0,o++}}if(o!=e)throw Error('Block "'+this.type+'": Message does not reference all '+e+" arg(s).")},t.Block.prototype.interpolateArguments_=function(t,e,n){for(var o=[],l=0;l<t.length;l++){var i=t[l];"number"==typeof i&&(i=e[i-1]),("string"!=typeof i||(i=this.stringToFieldJson_(i)))&&o.push(i)}return(t=o.length)&&!this.isInputKeyword_(o[t-1].type)&&(t={type:"input_dummy"},n&&(t.align=n),o.push(t)),o},t.Block.prototype.fieldFromJson_=function(e){var n=t.fieldRegistry.fromJson(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n},t.Block.prototype.inputFromJson_=function(e,n){var o={LEFT:t.constants.ALIGN.LEFT,RIGHT:t.constants.ALIGN.RIGHT,CENTRE:t.constants.ALIGN.CENTRE,CENTER:t.constants.ALIGN.CENTRE},l=null;switch(e.type){case"input_value":l=this.appendValueInput(e.name);break;case"input_statement":l=this.appendStatementInput(e.name);break;case"input_dummy":l=this.appendDummyInput(e.name)}return l?(e.check&&l.setCheck(e.check),e.align&&(void 0===(o=o[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):l.setAlign(o)),l):null},t.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},t.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},t.Block.prototype.appendInput_=function(e,n){var o=null;return e!=t.inputTypes.VALUE&&e!=t.inputTypes.STATEMENT||(o=this.makeConnection_(e)),e==t.inputTypes.STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,o),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var n,o=-1,l=e?-1:this.inputList.length,i=0;n=this.inputList[i];i++)if(n.name==t){if(o=i,-1!=l)break}else if(e&&n.name==e&&(l=i,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==l)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(o,l)}},t.Block.prototype.moveNumberedInputBefore=function(t,e){if(t==e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var n=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,n)},t.Block.prototype.removeInput=function(e,n){for(var o,l=0;o=this.inputList[l];l++)if(o.name==e)return o.type==t.inputTypes.STATEMENT&&this.statementInputCount--,o.dispose(),this.inputList.splice(l,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.name==t)return e;return null},t.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(t,e){},t.Block.prototype.setMutator=function(t){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(t.Events.get(t.Events.BLOCK_MOVE))(this);this.xy_.translate(e,n),o.recordNew(),t.Events.fire(o)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},t.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},t.Block.prototype.attrs,t.blockRendering.IPathObject=function(t,e){},t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var o,l=0;o=this.menuItems_[l];l++)n.appendChild(o.createDom());this.mouseOverHandler_=t.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(t){this.roleName_=t},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,n=0;e=this.menuItems_[n];n++)e.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var o,l=0;o=this.menuItems_[l];l++)if(o.getElement()==e)return o;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},t.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var n;n=this.menuItems_[t];){if(n.isEnabled()){this.setHighlighted(n);break}t+=e}},t.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var o=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,o))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(t){this.focus()},t.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},t.MenuItem.prototype.setRole=function(t){this.roleName_=t},t.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},t.MenuItem.prototype.setChecked=function(t){this.checked_=t},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,o){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=o,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,o){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=o+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,o,l){var i=t.WidgetDiv.calculateY_(e,n,o);e=t.WidgetDiv.calculateX_(e,n,o,l),0>i?t.WidgetDiv.positionInternal_(e,0,o.height+i):t.WidgetDiv.positionInternal_(e,i,o.height)},t.WidgetDiv.calculateX_=function(t,e,n,o){return o?(e=Math.max(e.right-n.width,t.left),Math.min(e,t.right-n.width)):(e=Math.min(e.left,t.right-n.width),Math.max(e,t.left))},t.WidgetDiv.calculateY_=function(t,e,n){return e.bottom+n.height>=t.bottom?e.top-n.height:e.bottom},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,o){if(t.WidgetDiv.show(t.ContextMenu,o,t.ContextMenu.dispose),n.length){var l=t.ContextMenu.populate_(n,o);t.ContextMenu.menu_=l,t.ContextMenu.position_(l,e,o),setTimeout(function(){l.focus()},1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var o=new t.Menu;o.setRole(t.utils.aria.Role.MENU);for(var l,i=0;l=e[i];i++){var a=new t.MenuItem(l.text);a.setRightToLeft(n),a.setRole(t.utils.aria.Role.MENUITEM),o.addChild(a),a.setEnabled(l.enabled),l.enabled&&a.onAction(function(e){t.ContextMenu.hide(),this.callback(this.scope)},l)}return o},t.ContextMenu.position_=function(e,n,o){var l=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+l.top,n.clientY+l.top,n.clientX+l.left,n.clientX+l.left),t.ContextMenu.createWidget_(e);var i=e.getSize();o&&(n.left+=i.width,n.right+=i.width,l.left+=i.width,l.right+=i.width),t.WidgetDiv.positionWithAnchor(l,n,i,o),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.browserEvents.conditionalBind(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var o=t.Xml.domToBlock(n,e.workspace),l=e.getRelativeToSurfaceXY();l.x=e.RTL?l.x-t.SNAP_RADIUS:l.x+t.SNAP_RADIUS,l.y+=2*t.SNAP_RADIUS,o.moveBy(l.x,l.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!o.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(o)),o.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!t.utils.userAgent.IE};return o.text=t.Msg.ADD_COMMENT,o.callback=function(){var o=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),l=e.getInjectionDiv().getBoundingClientRect();l=new t.utils.Coordinate(n.clientX-l.left,n.clientY-l.top);var i=e.getOriginOffsetInPixels();(l=t.utils.Coordinate.difference(l,i)).scale(1/e.scale),o.moveBy(l.x,l.y),e.rendered&&(o.initSvg(),o.render(),o.select())},o},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_={}},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with id "'+t.id+'" is already registered.');this.registry_[t.id]=t},t.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with id "'+t+'" not found.');delete this.registry_[t]},t.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]?this.registry_[t]:null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var n=[],o=this.registry_;return Object.keys(o).forEach(function(l){if(l=o[l],t==l.scopeType){var i=l.preconditionFn(e);"hidden"!=i&&(l={text:"function"==typeof l.displayText?l.displayText(e):l.displayText,enabled:"enabled"==i,callback:l.callback,scope:e,weight:l.weight},n.push(l))}}),n.sort(function(t,e){return t.weight-e.weight}),n},new t.ContextMenuRegistry,t.Events.Selected=function(e,n,o){t.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=e,this.newElementId=n},t.utils.object.inherits(t.Events.Selected,t.Events.UiBase),t.Events.Selected.prototype.type=t.Events.SELECTED,t.Events.Selected.prototype.toJson=function(){var e=t.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},t.Events.Selected.prototype.fromJson=function(e){t.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},t.registry.register(t.registry.Type.EVENT,t.Events.SELECTED,t.Events.Selected),t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,o=!0}var l=t.selected==n;l||n.addSelect();var i=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,a=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;o&&(a=-a),n.RTL&&(i=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(i,a),l||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},t.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var o=this.targetBlock(),l=o.getSvgRoot();if(!l)throw Error("block is not rendered.");l=t.utils.getRelativeXY(l),o.getSvgRoot().setAttribute("transform","translate("+(l.x-e)+","+(l.y-n)+")"),o.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,n=t.utils.svgPaths.moveBy(0,-e)+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(-e,0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var n=t[e],o=n.getConnections_(!0),l=0;l<o.length;l++)o[l].setTracking(!1);for(n=n.getIcons(),l=0;l<n.length;l++)n[l].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.connectionTypes.INPUT_VALUE&&this.type!=t.connectionTypes.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var l=0;l<o.length;l++)e.push.apply(e,o[l].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(t){this.bumpAwayFrom(t)},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var o=n.rendered,l=e.rendered;o&&n.updateDisabled(),l&&e.updateDisabled(),o&&l&&(this.type==t.connectionTypes.NEXT_STATEMENT||this.type==t.connectionTypes.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(t){this.drawer_=t},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?(e.getType()!=t.ASTNode.types.PREVIOUS&&e.getType()!=t.ASTNode.types.OUTPUT||(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.registry.register(t.registry.Type.CURSOR,t.registry.DEFAULT,t.Cursor),t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.registrationName="basicCursor",t.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var n=t.in()||t.next();return e(n)?n:n?this.getNextNode_(n,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},t.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var n=t.prev();return e(n=n?this.getRightMostChild_(n):t.out())?n:n?this.getPreviousNode_(n,e):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return(e=e&&e.getType())!=t.ASTNode.types.OUTPUT&&e!=t.ASTNode.types.INPUT&&e!=t.ASTNode.types.FIELD&&e!=t.ASTNode.types.NEXT&&e!=t.ASTNode.types.PREVIOUS&&e!=t.ASTNode.types.WORKSPACE||(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},t.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},t.registry.register(t.registry.Type.CURSOR,t.BasicCursor.registrationName,t.BasicCursor),t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,o=e&&e.getType();return e&&(e=e.getLocation(),o==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,o){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var l=this.pathObject.svgPath;l.tooltip=this,t.Tooltip.bindMouseEvents(l),t.BlockSvg.superClass_.constructor.call(this,e,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:t.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,n=0;e=this.inputList[n];n++)e.init();for(e=this.getIcons(),n=0;n<e.length;n++)e[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||t.browserEvents.conditionalBind(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}e=new(t.Events.get(t.Events.SELECTED))(e,this.id,this.workspace.id),t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new(t.Events.get(t.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var l=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(o),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-l.x,e.y-l.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(l.x,l.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,l=this.getSvgRoot();if(l)do{var i=t.utils.getRelativeXY(l);e+=i.x,n+=i.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==l&&(e+=(i=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=i.y),l=l.parentNode}while(l&&l!=this.workspace.getCanvas()&&l!=o);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=t.Events.isEnabled();if(o)var l=new(t.Events.get(t.Events.BLOCK_MOVE))(this);var i=this.getRelativeToSurfaceXY();this.translate(i.x+e,i.y+n),this.moveConnections(e,n),o&&(l.recordNew(),t.Events.fire(l)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},t.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},t.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),n=e/2,o=this.getRelativeToSurfaceXY();t=Math.round((o.x-n)/e)*e+n-o.x,e=Math.round((o.y-n)/e)*e+n-o.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=e.x-n.width,l=e.x;else o=e.x,l=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,o,l)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t,e=0;t=this.inputList[e];e++)t.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var e,n=this.isCollapsed(),o=t.constants.COLLAPSED_INPUT_NAME,l=t.constants.COLLAPSED_FIELD_NAME,i=0;e=this.inputList[i];i++)e.name!=o&&e.setVisible(!n);if(n){for(e=this.getIcons(),i=0;n=e[i];i++)n.setVisible(!1);i=this.toString(t.COLLAPSE_CHARS),(e=this.getField(l))?e.setValue(i):(e=this.getInput(o)||this.appendDummyInput(o)).appendField(new t.FieldLabel(i),l)}else this.updateDisabled(),this.removeInput(o)},t.BlockSvg.prototype.tab=function(e,n){var o=new t.TabNavigateCursor;o.setCurNode(t.ASTNode.createFieldNode(e)),e=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},t.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(t,e);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(t,e)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var o=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var l in this.warningTextDb_)clearTimeout(this.warningTextDb_[l]);this.warningTextDb_=null}for(n=this.getIcons(),l=0;l<n.length;l++)n[l].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e,n=0;e=t[n];n++)e.rendered&&e.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var l in this.warningTextDb_)clearTimeout(this.warningTextDb_[l]),delete this.warningTextDb_[l];if(this.workspace.isDragging()){var i=this;this.warningTextDb_[o]=setTimeout(function(){i.workspace&&(delete i.warningTextDb_[o],i.setWarningText(e,o))},100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){l=this.getSurroundParent();for(var a=null;l;)l.isCollapsed()&&(a=l),l=l.getSurroundParent();a&&a.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(l=this.warning.getText())||this.warning.dispose(),n=n!=l);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),n=e.parentNode,o=n.childNodes;o[o.length-1]!==e&&n.appendChild(e),t=t.getParent()}while(t)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.setTracking(t),(n=n.targetBlock())&&n.setConnectionTracking(t))}},t.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var n;n=this.inputList[t];t++)n.connection&&e.push(n.connection)}return e},t.BlockSvg.prototype.lastConnectionInStack=function(){return t.BlockSvg.superClass_.lastConnectionInStack.call(this)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var n,o=this.getConnections_(!1),l=0;n=o[l];l++){n.isConnected()&&n.isSuperior()&&n.targetBlock().bumpNeighbours();for(var i,a=n.neighbours(t.SNAP_RADIUS),s=0;i=a[s];s++)n.isConnected()&&i.isConnected()||i.getSourceBlock().getRootBlock()!=e&&(n.isSuperior()?i.bumpAwayFrom(n):n.bumpAwayFrom(i))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)},t.BUMP_DELAY/2),setTimeout(function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.connectionTypes.NEXT_STATEMENT&&e.type!=t.connectionTypes.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.moveToOffset(t),n.isConnected()&&n.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},t.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},t.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,n=this.getNextBlock();if(n){n=n.getHeightWidth();var o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=n.height-o,e=Math.max(e,n.width)}return{height:t,width:e}},t.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},t.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},t.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},t.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},t.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var n=this.calculateIndexForYPos_(e);if(n>=this.connections_.length)return-1;e=t.y;for(var o=n;0<=o&&this.connections_[o].y==e;){if(this.connections_[o]==t)return o;o--}for(;n<this.connections_.length&&this.connections_[n].y==e;){if(this.connections_[n]==t)return n;n++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,n=this.connections_.length;e<n;){var o=Math.floor((e+n)/2);if(this.connections_[o].y<t)e=o+1;else{if(!(this.connections_[o].y>t)){e=o;break}n=o}}return e},t.ConnectionDB.prototype.removeConnection=function(t,e){if(-1==(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},t.ConnectionDB.prototype.getNeighbours=function(t,e){function n(t){var n=l-o[t].x,a=i-o[t].y;return Math.sqrt(n*n+a*a)<=e&&r.push(o[t]),a<e}var o=this.connections_,l=t.x,i=t.y;t=0;for(var a=o.length-2,s=a;t<s;)o[s].y<i?t=s:a=s,s=Math.floor((t+a)/2);var r=[];if(a=t=s,o.length){for(;0<=t&&n(t);)t--;do{a++}while(a<o.length&&n(a))}return r},t.ConnectionDB.prototype.isInYRange_=function(t,e,n){return Math.abs(this.connections_[t].y-e)<=n},t.ConnectionDB.prototype.searchForClosest=function(t,e,n){if(!this.connections_.length)return{connection:null,radius:e};var o=t.y,l=t.x;t.x=l+n.x,t.y=o+n.y;var i=this.calculateIndexForYPos_(t.y);n=null;for(var a,s=e,r=i-1;0<=r&&this.isInYRange_(r,t.y,e);)a=this.connections_[r],this.connectionChecker_.canConnect(t,a,!0,s)&&(n=a,s=a.distanceFrom(t)),r--;for(;i<this.connections_.length&&this.isInYRange_(i,t.y,e);)a=this.connections_[i],this.connectionChecker_.canConnect(t,a,!0,s)&&(n=a,s=a.distanceFrom(t)),i++;return t.x=l,t.y=o,{connection:n,radius:s}},t.ConnectionDB.init=function(e){var n=[];return n[t.connectionTypes.INPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.connectionTypes.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.Events.ThemeChange=function(e,n){t.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=e},t.utils.object.inherits(t.Events.ThemeChange,t.Events.UiBase),t.Events.ThemeChange.prototype.type=t.Events.THEME_CHANGE,t.Events.ThemeChange.prototype.toJson=function(){var e=t.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},t.Events.ThemeChange.prototype.fromJson=function(e){t.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},t.registry.register(t.registry.Type.EVENT,t.Events.THEME_CHANGE,t.Events.ThemeChange),t.Events.ViewportChange=function(e,n,o,l,i){t.Events.ViewportChange.superClass_.constructor.call(this,l),this.viewTop=e,this.viewLeft=n,this.scale=o,this.oldScale=i},t.utils.object.inherits(t.Events.ViewportChange,t.Events.UiBase),t.Events.ViewportChange.prototype.type=t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange.prototype.toJson=function(){var e=t.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},t.Events.ViewportChange.prototype.fromJson=function(e){t.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},t.registry.register(t.registry.Type.EVENT,t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange),t.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=t},t.MarkerManager.LOCAL_MARKER="local_marker_1",t.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},t.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with id "+t+" does not exist. Can only unregistermarkers that exist.");e.dispose(),delete this.markers_[t]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]},t.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var t,e=Object.keys(this.markers_),n=0;t=e[n];n++)this.unregisterMarker(t);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.IMetricsManager=function(){},t.MetricsManager=function(t){this.workspace_=t},t.MetricsManager.prototype.getDimensionsPx_=function(e){var n=0,o=0;return e&&(n=e.getWidth(),o=e.getHeight()),new t.utils.Size(n,o)},t.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},t.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),l=!!this.workspace_.getToolbox(),i=!!this.workspace_.getFlyout(!0),a=l?n.position:o.position,s=a==t.utils.toolbox.Position.LEFT;return a=a==t.utils.toolbox.Position.TOP,l&&s?e=n.width:i&&s&&(e=o.width),s=0,l&&a?s=n.height:i&&a&&(s=o.height),{top:s,left:e}},t.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),l=this.getFlyoutMetrics(!0),i=this.workspace_.getToolbox()?o.position:l.position;return this.workspace_.getToolbox()?i==t.utils.toolbox.Position.TOP||i==t.utils.toolbox.Position.BOTTOM?n.height-=o.height:i!=t.utils.toolbox.Position.LEFT&&i!=t.utils.toolbox.Position.RIGHT||(n.width-=o.width):this.workspace_.getFlyout(!0)&&(i==t.utils.toolbox.Position.TOP||i==t.utils.toolbox.Position.BOTTOM?n.height-=l.height:i!=t.utils.toolbox.Position.LEFT&&i!=t.utils.toolbox.Position.RIGHT||(n.width-=l.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},t.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*t,width:(e.right-e.left)*t,top:e.top*t,left:e.left*t}},t.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},t.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var e=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var o={};return n||(o.top=t.top,o.bottom=t.top+t.height),e||(o.left=t.left,o.right=t.left+t.width),o},t.MetricsManager.prototype.getPaddedContent_=function(t,e){var n=e.top+e.height,o=e.left+e.width,l=t.width,i=l/2,a=(t=t.height)/2;return{top:Math.min(e.top-a,n-t),bottom:Math.max(n+a,e.top+t),left:Math.min(e.left-i,o-l),right:Math.max(o+i,e.left+l)}},t.MetricsManager.prototype.getScrollMetrics=function(t,e,n){t=t?this.workspace_.scale:1,e=e||this.getViewMetrics(!1);var o=n||this.getContentMetrics();n=this.getComputedFixedEdges_(e),e=this.getPaddedContent_(e,o),o=void 0!==n.top?n.top:e.top;var l=void 0!==n.left?n.left:e.left;return{top:o/t,left:l/t,width:((void 0!==n.right?n.right:e.right)-l)/t,height:((void 0!==n.bottom?n.bottom:e.bottom)-o)/t}},t.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},t.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),l=this.getViewMetrics(),i=this.getContentMetrics(),a=this.getScrollMetrics(!1,l,i);return{contentHeight:i.height,contentWidth:i.width,contentTop:i.top,contentLeft:i.left,scrollHeight:a.height,scrollWidth:a.width,scrollTop:a.top,scrollLeft:a.left,viewHeight:l.height,viewWidth:l.width,viewTop:l.top,viewLeft:l.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:e.width,flyoutHeight:e.height}},t.registry.register(t.registry.Type.METRICS_MANAGER,t.registry.DEFAULT,t.MetricsManager),t.FlyoutMetricsManager=function(e,n){this.flyout_=n,t.FlyoutMetricsManager.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.FlyoutMetricsManager,t.MetricsManager),t.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}return t},t.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var e=this.getBoundingBox_();return t=t?1:this.workspace_.scale,{height:e.height*t,width:e.width*t,top:e.y*t,left:e.x*t}},t.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,e,n){return e=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(e.height+2*n)/t,width:(e.width+e.left+n)/t,top:0,left:0}},t.FlyoutMetricsManager.prototype.getViewMetrics=function(t){var e=this.getSvgMetrics();if(t=t?this.workspace_.scale:1,this.flyout_.horizontalLayout){var n=e.width-2*this.flyout_.SCROLLBAR_PADDING;e=e.height-this.flyout_.SCROLLBAR_PADDING}else n=e.width-this.flyout_.SCROLLBAR_PADDING,e=e.height-2*this.flyout_.SCROLLBAR_PADDING;return{height:e/t,width:n/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},t.FlyoutMetricsManager.prototype.getAbsoluteMetrics=function(){var t=this.flyout_.SCROLLBAR_PADDING;return this.flyout_.horizontalLayout?{top:0,left:t}:{top:t,left:0}},t.PluginManager=function(){this.pluginData_={},this.typeToPluginIds_={}},t.PluginManager.prototype.addPlugin=function(t){this.pluginData_[t.id]=t;for(var e,n=0;e=t.types[n];n++)e=String(e).toLowerCase(),void 0===this.typeToPluginIds_[e]?this.typeToPluginIds_[e]=[t.id]:this.typeToPluginIds_[e].push(t.id)},t.PluginManager.prototype.getPlugin=function(t){return this.pluginData_[t]&&this.pluginData_[t].plugin},t.PluginManager.prototype.getPlugins=function(t,e){if(t=String(t).toLowerCase(),!(t=this.typeToPluginIds_[t]))return[];var n=[];if(e){var o=[],l=this.pluginData_;t.forEach(function(t){o.push(l[t])}),o.sort(function(t,e){return t.weight-e.weight}),o.forEach(function(t){n.push(t.plugin)})}else l=this.pluginData_,t.forEach(function(t){n.push(l[t].plugin)});return n},t.PluginManager.Type=function(t){this.name_=t},t.PluginManager.Type.prototype.toString=function(){return this.name_},t.PluginManager.Type.POSITIONABLE=new t.PluginManager.Type("positionable"),t.ThemeManager=function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var n,o=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(o&&t.utils.dom.removeClass(e,o.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),o=0;e=this.subscribedWorkspaces_[o];o++)e.refreshTheme();for(o=0,e=Object.keys(this.componentDB_);n=e[o];o++)for(var l,i=0;l=this.componentDB_[n][i];i++){var a=l.element;l=l.propertyName;var s=this.theme_&&this.theme_.getComponentStyle(n);a.style[l]=s||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},t.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},t.ThemeManager.prototype.subscribe=function(t,e,n){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:n}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[n]=e||""},t.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e,n=Object.keys(this.componentDB_),o=0;e=n[o];o++){for(var l=this.componentDB_[e],i=l.length-1;0<=i;i--)l[i].element===t&&l.splice(i,1);this.componentDB_[e].length||delete this.componentDB_[e]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.browserEvents.unbind(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*t.TouchGesture.ZOOM_IN_MULTIPLIER:o*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var l=this.startWorkspace_,i=t.utils.mouseToSvg(e,l.getParentSvg(),l.getInverseScreenCTM());l.zoom(i.x,i.y,o)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var o=new t.utils.global.Audio}catch(t){return}for(var l,i=0;i<e.length;i++){var a=e[i],s=a.match(/\.(\w+)$/);if(s&&o.canPlayType("audio/"+s[1])){l=new t.utils.global.Audio(a);break}}l&&l.play&&(this.SOUNDS_[n]=l)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var o=this.SOUNDS_[e];o?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(o=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,o){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(t.registry.getClassFromOptions(t.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.pluginManager_=new t.PluginManager,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_={},this.flyoutButtonCallbacks_={},t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.cachedParentSvgSize_=new t.utils.Size(0,0)},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.oldScale_=1,t.WorkspaceSvg.prototype.oldTop_=0,t.WorkspaceSvg.prototype.oldLeft_=0,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},t.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},t.WorkspaceSvg.prototype.getPluginManager=function(){return this.pluginManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},t.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},t.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(t){return void 0!==t.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(t.Events.get(t.Events.THEME_CHANGE))(this.getTheme().name,this.id);t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e,n=0;e=t[n];n++){var o=e.getStyleName();o&&(e.setStyle(o),e.mutator&&e.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,o=0,l=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(l=this.scale);do{var i=t.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(l=1),n+=i.x*l,o+=i.y*l,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,o)},t.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new t.utils.Size(e.width,e.height)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},t.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),(e=t.registry.getClassFromOptions(t.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_),this.pluginManager_.addPlugin({id:"trashcan",plugin:this.trashcan,weight:1,types:[t.PluginManager.Type.POSITIONABLE]})},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e),this.pluginManager_.addPlugin({id:"zoomControls",plugin:this.zoomControls_,weight:2,types:[t.PluginManager.Type.POSITIONABLE]})},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var e,n=this.pluginManager_.getPlugins(t.PluginManager.Type.POSITIONABLE,!0),o=this.getMetricsManager().getUiMetrics(),l=[],i=0;e=n[i];i++)e.position(o,l),l.push(e.getBoundingRectangle());this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,e){var n=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,n.cachedWidth_=t),e&&(this.cachedParentSvgSize_.height=e,n.cachedHeight_=e)},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(t.Events.isEnabled()){var e=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var l=new(t.Events.get(t.Events.VIEWPORT_CHANGE))(n,o,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=n,this.oldLeft_=o,t.Events.fire(l)}}},t.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var n="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),l=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,o,this.scale),this.workspaceDragSurface_.translateSurface(l.x,l.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var o,l=0;o=this.highlightedBlocks_[l];l++)o.setHighlighted(!1);this.highlightedBlocks_.length=0}(o=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(o)&&this.highlightedBlocks_.push(o):t.utils.arrayRemove(this.highlightedBlocks_,o),o.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),o=parseInt(e.getAttribute("x"),10),l=parseInt(e.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(l)){this.RTL&&(o=-o);do{e=!1;for(var i,a=this.getAllBlocks(!1),s=0;i=a[s];s++){var r=i.getRelativeToSurfaceXY();if(1>=Math.abs(o-r.x)&&1>=Math.abs(l-r.y)){e=!0;break}}if(!e){var c,u=n.getConnections_(!1);for(s=0;c=u[s];s++)if(c.closest(t.SNAP_RADIUS,new t.utils.Coordinate(o,l)).connection){e=!0;break}}e&&(o=this.RTL?o-t.SNAP_RADIUS:o+t.SNAP_RADIUS,l+=2*t.SNAP_RADIUS)}while(e);n.moveBy(o,l)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),o=parseInt(e.getAttribute("x"),10),l=parseInt(e.getAttribute("y"),10);isNaN(o)||isNaN(l)||(this.RTL&&(o=-o),n.moveBy(o+50,l+50))}finally{t.Events.enable()}t.Events.isEnabled()&&t.WorkspaceComment.fireCreateEvent(n),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,o){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,o),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&"function"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null},t.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TOOLBOX:t.DELETE_AREA_NONE},t.WorkspaceSvg.prototype.onMouseDown_=function(t){BlocklyEditor.getFlyout().isVisible_&&BlocklyEditor.getFlyout().setVisible(!1);var e=this.getGesture(t);e&&e.handleWsStart(t,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},t.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var l=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&o?(n=this.scrollX-l.x,o=this.scrollY-l.y,e.shiftKey&&!l.x&&(n=this.scrollX-l.y,o=this.scrollY),this.scroll(n,o)):(l=-l.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,l)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),o=1;o<e.length;o++){var l=e[o];l.isInsertionMarker&&l.isInsertionMarker()||((l=l.getBoundingRectangle()).top<n.top&&(n.top=l.top),l.bottom>n.bottom&&(n.bottom=l.bottom),l.left<n.left&&(n.left=l.left),l.right>n.right&&(n.right=l.right))}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var e,n=this.getTopBlocks(!0),o=0,l=0;e=n[l];l++)if(e.isMovable()){var i=e.getRelativeToSurfaceXY();e.moveBy(-i.x,o-i.y),e.snapToGrid(),o=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(t){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(t,e,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o=this.scale*n;if(this.scale!=o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var l=this.getCanvas().getCTM(),i=this.getParentSvg().createSVGPoint();i.x=t,i.y=e,t=(i=i.matrixTransform(l.inverse())).x,e=i.y,l=l.translate(t*(1-n),e*(1-n)).scale(n),this.scrollX=l.e,this.scrollY=l.f,this.setScale(o)}},t.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var n=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else n=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(n,e,t)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),l=o.right-o.left;if(o=o.bottom-o.top,l){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),l+=this.flyout_.getWidth()/this.scale)),n/=l,e/=o,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.scrollWidth-t.viewWidth)/2,n=(t.scrollHeight-t.viewHeight)/2;e=-e-t.scrollLeft,n=-n-t.scrollTop,this.scroll(e,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),n=t.getHeightWidth(),o=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*o,e=(e.y+n.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var o=this.getMetrics();e=Math.min(e,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var l=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-l),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(n+o.scrollTop),!1),e+=o.absoluteLeft,n+=o.absoluteTop,this.translate(e,n)},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(e.scrollTop+(e.scrollHeight-e.viewHeight)*t.y)),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},t.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,t.utils.aria.setState(o,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(o),e=t.createDom_(o,n);var l=new t.BlockDragSurfaceSvg(o),i=new t.WorkspaceDragSurfaceSvg(o),a=t.createMainWorkspace_(e,n,l,i);return t.init_(a),t.mainWorkspace=a,t.svgResize(a),o.addEventListener("focusin",function(){t.mainWorkspace=a}),a},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var o=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),l=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(l,n.gridOptions,o),e},t.createMainWorkspace_=function(e,n,o,l){return n.parentWorkspace=null,o=(n=new t.WorkspaceSvg(n,o,l)).options,n.scale=o.zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),t.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),t.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(l=n.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(l,e)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(t.bumpIntoBoundsHandler_(n)),t.svgResize(n),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),n},t.extractObjectFromEvent_=function(e,n){var o=null;switch(n.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:(o=e.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:o=e.getCommentById(n.commentId)}return o},t.bumpTopObjectsIntoBounds_=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);for(var o,l=e.getTopBoundedElements(),i=0;o=l[i];i++)t.bumpObjectIntoBounds_(e,n,o)}},t.bumpIntoBoundsHandler_=function(e){return function(n){var o=e.getMetricsManager();if(o.hasFixedEdges&&!e.isDragging())if(-1!==t.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var l=t.extractObjectFromEvent_(e,n);if(l){var i=t.Events.getGroup();t.Events.setGroup(n.group),t.bumpObjectIntoBounds_(e,o,l)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==i&&t.Events.setGroup(i)}}else n.type===t.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&t.bumpTopObjectsIntoBounds_(e)}},t.bumpObjectIntoBounds_=function(e,n,o){var l=o.getBoundingRectangle(),i=l.right-l.left,a=t.utils.math.clamp(n.top,l.top,n.top+n.height-(l.bottom-l.top))-l.top,s=n.left;return n=n.left+n.width-i,e.RTL?s=Math.min(n,s):n=Math.max(s,n),!(!(e=t.utils.math.clamp(s,l.left,n)-l.left)&&!a)&&(o.moveBy(e,a),!0)},t.init_=function(e){var n=e.options,o=e.getParentSvg();if(t.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(e){t.utils.isTargetInput(e)||e.preventDefault()}),o=t.browserEvents.conditionalBind(window,"resize",null,function(){t.hideChaff(!0),t.svgResize(e),t.bumpTopObjectsIntoBounds_(e)}),e.setResizeHandlerWrapper(o),t.inject.bindDocumentEvents_(),n.languageTree){o=e.getToolbox();var l=e.getFlyout(!0);o?o.init():l&&(l.init(e),l.show(n.languageTree),"function"==typeof l.scrollToStart&&l.scrollToStart())}o=t.Scrollbar.scrollbarThickness,n.hasTrashcan&&(o=e.trashcan.init(o)),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(o),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.browserEvents.conditionalBind(document,"scroll",null,function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()}),t.browserEvents.conditionalBind(document,"keydown",null,t.onKeyDown),t.browserEvents.bind(document,"touchend",null,t.longStop_),t.browserEvents.bind(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.browserEvents.conditionalBind(window,"orientationchange",document,function(){t.svgResize(t.getMainWorkspace())})),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var o=n.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var l=[];e=function(){for(;l.length;)t.browserEvents.unbind(l.pop());o.preload()},l.push(t.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),l.push(t.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},t.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(t){this.variableMap_=t},t.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_&&(t=this.variableMap_.getVariableById(t))?t.name:null},t.Names.prototype.getName=function(e,n){if(n==t.VARIABLE_CATEGORY_NAME){var o=this.getNameForUserVariable_(e);o&&(e=o)}o=e.toLowerCase()+"_"+n;var l=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return o in this.db_?l+this.db_[o]:(e=this.getDistinctName(e,n),this.db_[o]=e.substr(l.length),e)},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var o="";this.dbReverse_[e+o]||e+o in this.reservedDict_;)o=o?o+1:2;return e+=o,this.dbReverse_[e]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map(function(t){return t.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(t){return t.getProcedureDef()}),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,o){return!t.Procedures.isNameUsed(e,n,o)},t.Procedures.isNameUsed=function(e,n,o){n=n.getAllBlocks(!1);for(var l=0;l<n.length;l++)if(n[l]!=o&&n[l].getProcedureDef){var i=n[l].getProcedureDef();if(t.Names.equals(i[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),o=this.getValue();if(o!=e&&o!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var l=0;l<e.length;l++)e[l].renameProcedure&&e[l].renameProcedure(o,n)}return n},t.Procedures.flyoutCategory=function(e){function n(e,n){for(var l=0;l<e.length;l++){var i=e[l][0],a=e[l][1],s=t.utils.xml.createElement("block");s.setAttribute("type",n),s.setAttribute("gap",16);var r=t.utils.xml.createElement("mutation");for(r.setAttribute("name",i),s.appendChild(r),i=0;i<a.length;i++){var c=t.utils.xml.createElement("arg");c.setAttribute("name",a[i]),r.appendChild(c)}o.push(s)}}var o=[],l=document.createElement("button");if(l.setAttribute("text","%{BKY_FUNCTIONS}"),l.setAttribute("callbackKey","logicDocs"),l.setAttribute("url","functions"),l.setAttribute("web-class","blockly-title--style"),o.push(l),t.Blocks.procedures_defnoreturn){(l=t.utils.xml.createElement("block")).setAttribute("type","procedures_defnoreturn"),l.setAttribute("gap",16);var i=t.utils.xml.createElement("field");i.setAttribute("name","NAME"),i.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),l.appendChild(i),o.push(l)}return t.Blocks.procedures_defreturn&&((l=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),l.setAttribute("gap",16),(i=t.utils.xml.createElement("field")).setAttribute("name","NAME"),i.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),l.appendChild(i),o.push(l)),t.Blocks.procedures_ifreturn&&((l=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),l.setAttribute("gap",16),o.push(l)),o.length&&o[o.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),o},t.Procedures.updateMutatorFlyout_=function(e){for(var n,o=[],l=e.getBlocksByType("procedures_mutatorarg",!1),i=0;n=l[i];i++)o.push(n.getFieldValue("NAME"));l=t.utils.xml.createElement("xml"),(i=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(n=t.utils.xml.createElement("field")).setAttribute("name","NAME"),o=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,o),o=t.utils.xml.createTextNode(o),n.appendChild(o),i.appendChild(n),l.appendChild(i),e.updateToolbox(l)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!=n&&"procedures_defreturn"!=n||(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){e.type!=t.Events.BLOCK_CREATE&&e.type!=t.Events.BLOCK_DELETE&&e.type!=t.Events.BLOCK_CHANGE||(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var o=[];n=n.getAllBlocks(!1);for(var l=0;l<n.length;l++)if(n[l].getProcedureCall){var i=n[l].getProcedureCall();i&&t.Names.equals(i,e)&&o.push(n[l])}return o},t.Procedures.mutateCallers=function(e){var n,o=t.Events.recordUndo,l=e.getProcedureDef()[0],i=e.mutationToDom(!0);for(e=t.Procedures.getCallers(l,e.workspace),l=0;n=e[l];l++){var a=n.mutationToDom();a=a&&t.Xml.domToText(a),n.domToMutation(i);var s=n.mutationToDom();a!=(s=s&&t.Xml.domToText(s))&&(t.Events.recordUndo=!1,t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"mutation",null,a,s)),t.Events.recordUndo=o)}},t.Procedures.getDefinition=function(e,n){n=n.getTopBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var l=n[o].getProcedureDef();if(l&&t.Names.equals(l[0],e))return n[o]}return null},t.ShortcutRegistry=function(){t.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},t.ShortcutRegistry.modifierKeys={Shift:t.utils.KeyCodes.SHIFT,Control:t.utils.KeyCodes.CTRL,Alt:t.utils.KeyCodes.ALT,Meta:t.utils.KeyCodes.META},t.ShortcutRegistry.prototype.register=function(t,e){if(this.registry_[t.name]&&!e)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},t.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},t.ShortcutRegistry.prototype.addKeyMapping=function(t,e,n){t=String(t);var o=this.keyMap_[t];if(o&&!n)throw Error('Shortcut with name "'+e+'" collides with shortcuts '+o.toString());o&&n?o.unshift(e):this.keyMap_[t]=[e]},t.ShortcutRegistry.prototype.removeKeyMapping=function(t,e,n){var o=this.keyMap_[t];if(!o&&!n)return console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1;var l=o.indexOf(e);return-1<l?(o.splice(l,1),0==o.length&&delete this.keyMap_[t],!0):(n||console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1)},t.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var e in this.keyMap_)this.removeKeyMapping(e,t,!0)},t.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},t.ShortcutRegistry.prototype.getKeyMap=function(){return t.utils.object.deepMerge(Object.create(null),this.keyMap_)},t.ShortcutRegistry.prototype.getRegistry=function(){return t.utils.object.deepMerge(Object.create(null),this.registry_)},t.ShortcutRegistry.prototype.onKeyDown=function(t,e){var n=this.serializeKeyEvent_(e);if(!(n=this.getShortcutNamesByKeyCode(n)))return!1;for(var o,l=0;o=n[l];l++)if((!(o=this.registry_[o]).preconditionFn||o.preconditionFn(t))&&o.callback&&o.callback(t,e,o))return!0;return!1},t.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},t.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var e,n=[];for(e in this.keyMap_)-1<this.keyMap_[e].indexOf(t)&&n.push(e);return n},t.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var n,o="";for(n in t.ShortcutRegistry.modifierKeys)e.getModifierState(n)&&(""!=o&&(o+="+"),o+=n);return""!=o&&e.keyCode?o=o+"+"+e.keyCode:e.keyCode&&(o=e.keyCode.toString()),o},t.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var n,o=t.utils.object.values(t.ShortcutRegistry.modifierKeys),l=0;n=e[l];l++)if(0>o.indexOf(n))throw Error(n+" is not a valid modifier key.")},t.ShortcutRegistry.prototype.createSerializedKey=function(e,n){var o="";if(n)for(var l in this.checkModifiers_(n),t.ShortcutRegistry.modifierKeys)-1<n.indexOf(t.ShortcutRegistry.modifierKeys[l])&&(""!=o&&(o+="+"),o+=l);return""!=o&&e?o=o+"+"+e:e&&(o=e.toString()),o},new t.ShortcutRegistry,t.VariableModel=function(e,n,o,l){this.workspace=e,this.name=n,this.type=o||"",this.id_=l||t.utils.genUid(),t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t==e?0:1},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var n=0;n<e.length;n++){var o=e[n].getVarModels();if(o)for(var l=0;l<o.length;l++){var i=o[l],a=i.getId();a&&(t[a]=i)}}for(a in e=[],t)e.push(t[a]);return e},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var n,o=Object.create(null),l=0;n=e[l];l++){var i=n.getDeveloperVariables;if(!i&&n.getDeveloperVars&&(i=n.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+n.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]=!0)),i)for(n=i(),i=0;i<n.length;i++)o[n[i]]=!0}return Object.keys(o)},t.Variables.flyoutCategory=function(e){var n=[],o=document.createElement("button");o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE");var l=document.createElement("button");return l.setAttribute("text","%{BKY_VARIABLES}"),l.setAttribute("callbackKey","dataStructureDocs"),l.setAttribute("url","variables"),l.setAttribute("web-class","blockly-title--style"),e.registerButtonCallback("CREATE_VARIABLE",function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace())}),n.push(l),n.push(o),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var o=e[e.length-1];if(t.Blocks.variables_set){var l=t.utils.xml.createElement("block");l.setAttribute("type","variables_set"),l.setAttribute("gap",t.Blocks.math_change?8:24),l.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(l)}if(t.Blocks.math_change&&((l=t.utils.xml.createElement("block")).setAttribute("type","math_change"),l.setAttribute("gap",t.Blocks.variables_get?20:8),l.appendChild(t.Variables.generateVariableFieldDom(o)),o=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),l.appendChild(o),n.push(l)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),o=0;for(var i;i=e[o];o++)(l=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),l.setAttribute("gap",8),l.appendChild(t.Variables.generateVariableFieldDom(i)),n.push(l)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var o=t.Variables.VAR_LETTER_OPTIONS,l="",i=o.indexOf(e);;){for(var a=!1,s=0;s<n.length;s++)if(n[s].toLowerCase()==e){a=!0;break}if(!a)return e;++i==o.length&&(i=0,l=Number(l)+1),e=o.charAt(i)+l}},t.Variables.createVariableButtonHandler=function(e,n,o){var l=o||"",i=function(o){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,o,function(o){if(o){var a=t.Variables.nameUsedWithAnyType(o,e);if(a){if(a.type==l)var s=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",a.name);else s=(s=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",a.name).replace("%2",a.type);t.alert(s,function(){i(o)})}else e.createVariable(o,l),n&&n(o)}else n&&n(null)})};i("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,o){var l=function(i){var a=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(a,i,function(i){if(i){var a=t.Variables.nameUsedWithOtherType_(i,n.type,e);a?(a=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",a.name).replace("%2",a.type),t.alert(a,function(){l(i)})):(e.renameVariableById(n.getId(),i),o&&o(i))}else o&&o(null)})};l("")},t.Variables.promptName=function(e,n,o){window.Swal?Swal.fire({title:"Do you want to create variables?",inputPlaceholder:t.Msg.NEW_VARIABLE_TITLE,input:"text",showCancelButton:!0,confirmButtonColor:window.Blockly.Msg.SWAL_PRIMARY_HUE,cancelButtonColor:window.Blockly.Msg.SWAL_GRAY_HUE,allowOutsideClick:!1,preConfirm:function(t){(t=t.replace(/(\s*)/g,""))||Swal.showValidationMessage("Invalid variable")}}).then(function(t){if(t.isConfirmed){t.value=t.value.replace(/(\s*)/g,"");for(var e=window.Blockly.M5Component||[],n=0;n<e.length;n++)if(t.value==e[n].name)return void Swal.fire({title:"error",text:"Your name and component name repeat!",icon:"error",confirmButtonColor:window.Blockly.Msg.SWAL_PRIMARY_HUE,allowOutsideClick:!1});for(e=window.BlocklyEditor.getAllVariables(),n=0;n<e.length;n++)if(t.value==e[n].name)return void Swal.fire({title:"error",text:"Your variable name repeats!",icon:"error",confirmButtonColor:window.Blockly.Msg.SWAL_PRIMARY_HUE,allowOutsideClick:!1});o(t.value)}else o(null)}):t.prompt(e,n,function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||e==t.Msg.NEW_VARIABLE)&&(e=null),o(e)})},t.Variables.nameUsedWithOtherType_=function(t,e,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var o,l=0;o=n[l];l++)if(o.name.toLowerCase()==t&&o.type!=e)return o;return null},t.Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var n,o=0;n=e[o];o++)if(n.name.toLowerCase()==t)return n;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,o,l){var i=t.Variables.getVariable(e,n,o,l);return i||(i=t.Variables.createVariable_(e,n,o,l)),i},t.Variables.getVariable=function(t,e,n,o){var l=t.getPotentialVariableMap(),i=null;if(e&&(!(i=t.getVariableById(e))&&l&&(i=l.getVariableById(e)),i))return i;if(n){if(null==o)throw Error("Tried to look up a variable by name without a type");!(i=t.getVariable(n,o))&&l&&(i=l.getVariable(n,o))}return i},t.Variables.createVariable_=function(e,n,o,l){var i=e.getPotentialVariableMap();return o||(o=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),i?i.createVariable(o,l,n):e.createVariable(o,l,n)},t.Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var n=[];if(e.length!=t.length)for(var o=0;o<t.length;o++){var l=t[o];-1==e.indexOf(l)&&n.push(l)}return n},t.VERSION="5.20210325.1",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return t.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(t){t.resizeContents()},t.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),n=t.getCachedParentSvgSize(),o=e.parentNode;if(o){var l=o.offsetWidth;o=o.offsetHeight,n.width!=l&&(e.setAttribute("width",l+"px"),t.setCachedParentSvgSize(l,null)),n.height!=o&&(e.setAttribute("height",o+"px"),t.setCachedParentSvgSize(null,o)),t.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible())&&t.ShortcutRegistry.registry.onKeyDown(n,e)},t.deleteBlock=function(e){e.workspace.isFlyout||(t.Events.setGroup(!0),t.hideChaff(),e.dispose(!0,!0),t.Events.setGroup(!1))},t.copy=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.paste=function(){if(!t.clipboardXml_)return!1;var e=t.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!t.clipboardTypeCounts_||!e.isCapacityAvailable(t.clipboardTypeCounts_))&&(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1),!0)},t.duplicate=function(e){var n=t.clipboardXml_,o=t.clipboardSource_;t.copy(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=o},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),e||((e=t.getMainWorkspace()).trashcan&&e.trashcan.flyout&&e.trashcan.closeFlyout(),(e=e.getToolbox())&&e.getFlyout()&&e.getFlyout().autoClose&&e.clearSelection())},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(t,e){alert(t),e&&e()},t.confirm=function(t,e){e(confirm(t))},t.prompt=function(t,e,n){n(prompt(t,e))},t.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var o=e[n];if(o){var l=o.type;null==l||""===l?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[l]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+l+'".'),t.Blocks[l]={init:t.jsonInitFactory_(o),attrs:{keyword:o.keyword?o.keyword:[]}})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},t.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,o){for(var l="Blockly",i=t,a=0;a<n.length;++a)l+="."+n[a],i&&(i=i[n[a]]);i&&i!==o&&(e=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",l).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.bindEvent_=t.browserEvents.bind,t.unbindEvent_=t.browserEvents.unbind,t.bindEventWithChecks_=t.browserEvents.conditionalBind,t.ALIGN_LEFT=t.constants.ALIGN.LEFT,t.ALIGN_CENTRE=t.constants.ALIGN.CENTRE,t.ALIGN_RIGHT=t.constants.ALIGN.RIGHT,t.INPUT_VALUE=t.connectionTypes.INPUT_VALUE,t.OUTPUT_VALUE=t.connectionTypes.OUTPUT_VALUE,t.NEXT_STATEMENT=t.connectionTypes.NEXT_STATEMENT,t.PREVIOUS_STATEMENT=t.connectionTypes.PREVIOUS_STATEMENT,t.DUMMY_INPUT=t.inputTypes.DUMMY,t.TOOLBOX_AT_TOP=t.utils.toolbox.Position.TOP,t.TOOLBOX_AT_BOTTOM=t.utils.toolbox.Position.BOTTOM,t.TOOLBOX_AT_LEFT=t.utils.toolbox.Position.LEFT,t.TOOLBOX_AT_RIGHT=t.utils.toolbox.Position.RIGHT,t.Events.BubbleOpen=function(e,n,o){t.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=n,this.bubbleType=o},t.utils.object.inherits(t.Events.BubbleOpen,t.Events.UiBase),t.Events.BubbleOpen.prototype.type=t.Events.BUBBLE_OPEN,t.Events.BubbleOpen.prototype.toJson=function(){var e=t.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},t.Events.BubbleOpen.prototype.fromJson=function(e){t.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.BUBBLE_OPEN,t.Events.BubbleOpen),t.Icon=function(t){this.block_=t,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},t.Warning.prototype.createBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.getText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},t.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.browserEvents.conditionalBind(n,"wheel",this,function(t){t.stopPropagation()}),this.onChangeWrapper_=t.browserEvents.conditionalBind(n,"change",this,function(e){this.cachedText_!=this.model_.text&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=t.browserEvents.conditionalBind(n,"input",this,function(t){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,o=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(t.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},t.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),t.Flyout=function(e){e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.setMetricsManager(new t.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_PADDING=2,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new t.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap()},t.Flyout.prototype.dispose=function(){this.hide(),t.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},t.Flyout.prototype.positionAt_=function(e,n,o,l){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(e,n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+l+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+l+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(o,l),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,n=0;e=this.listeners_[n];n++)t.browserEvents.unbind(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var t,e=this.workspace_.getTopBlocks(!1),n=0;t=e[n];n++)t.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var l,i=this.horizontalLayout?this.GAP_X:this.GAP_Y,a=0;l=e[a];a++)switch(l.custom&&(l=this.getDynamicCategoryContents_(l.custom),l=t.utils.toolbox.convertFlyoutDefToJsonArray(l),e.splice.apply(e,[a,1].concat(l)),l=e[a]),l.kind.toUpperCase()){case"BLOCK":var s=l,r=this.getBlockXml_(s);l=this.createBlock_(r),r.getAttribute("hidden")&&(l.svgGroup_.style.display="none",l.hidden=!0),s=parseInt(s.gap||r.getAttribute("gap"),10),o.push(isNaN(s)?i:s),n.push({type:"block",block:l});break;case"SEP":this.addSeparatorGap_(l,o,i);break;case"LABEL":l=this.createButton_(l,!0),n.push({type:"button",button:l}),o.push(i);break;case"BUTTON":l=this.createButton_(l,!1),n.push({type:"button",button:l}),o.push(i)}return{contents:n,gaps:o}},t.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,o=e.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=t.Xml.textToDom(o),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(t,e,n){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(n)},t.Flyout.prototype.clearOldBlocks_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(o=0;o<this.mats_.length;o++)(n=this.mats_[o])&&(t.Tooltip.unbindMouseEvents(n),t.utils.dom.removeNode(n));for(o=this.mats_.length=0;n=this.buttons_[o];o++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,o){this.listeners_.push(t.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.bind(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(n){var o=e.targetWorkspace.getGesture(n);o&&(o.setStartBlock(t),o.handleFlyoutStart(n,e))}},t.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},t.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,o),t.Events.isEnabled()){for(t.Events.setGroup(!0),o=0;o<e.length;o++){var l=e[o];t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(l))}t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,o){var l=e.createDom();e.moveTo(n,o),e.show(),this.listeners_.push(t.browserEvents.conditionalBind(l,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,o,l,i){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:l.height,width:l.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[i]=n},t.Flyout.prototype.moveRectToBlock_=function(t,e){var n=e.getHeightWidth();t.setAttribute("width",n.width),t.setAttribute("height",n.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-n.width:e.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var l=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(e));e;)e.setEnabled(l),e=e.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var o=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(o=t.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var l=n.getOriginOffsetInPixels(),i=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(i,e),(l=t.utils.Coordinate.difference(e,l)).scale(1/n.scale),o.moveBy(l.x,l.y),o},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},t.HorizontalFlyout.prototype.getX=function(){return 0},t.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();var l=this.toolboxPosition_==t.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?l?e.height:o.height-this.height_:l?0:o.height:l?0:o.height+n.top-this.height_},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.utils.toolbox.Position.TOP,l=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(l.push("h",e+2*this.CORNER_RADIUS),l.push("v",n),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",-e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),l.push("h",e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",n),l.push("h",-e-2*this.CORNER_RADIUS)),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),l=o.getScrollMetrics();n=o.getViewMetrics().left-l.left+n,this.workspace_.scrollbar.setX(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(t=t.reverse());for(var l,i=0;l=t[i];i++)if("block"==l.type){for(var a,s=(l=l.block).getDescendants(!1),r=0;a=s[r];r++)a.isInFlyout=!0;l.render(),s=l.getSvgRoot(),r=l.getHeightWidth(),a=l.outputConnection?this.tabWidth_:0,a=this.RTL?o+r.width:o-a,l.moveBy(a,n),a=this.createRect_(l,a,n,r,i),o+=r.width+e[i],this.addBlockListeners_(s,l,a)}else"button"==l.type&&(this.initFlyoutButton_(l.button,o,n),o+=l.button.width+e[i])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,n=0,o=this.workspace_.getTopBlocks(!1),l=0;e=o[l];l++)n=Math.max(n,e.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.height_!=n){for(l=0;e=o[l];l++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(n.top+(n.height-o.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},t.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==t.utils.toolbox.Position.LEFT?e.width:o.width-this.width_:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},t.VerticalFlyout.prototype.getY=function(){return 0},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.utils.toolbox.Position.RIGHT,l=e+this.CORNER_RADIUS;(l=["M "+(o?l:0)+",0"]).push("h",o?-e:e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",Math.max(0,n)),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",o?e:-e),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var o=this.workspace_.getMetricsManager(),l=o.getScrollMetrics();n=o.getViewMetrics().top-l.top+n.y,this.workspace_.scrollbar.setY(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var n,o=this.MARGIN,l=this.RTL?o:o+this.tabWidth_,i=0;n=t[i];i++)if("block"==n.type){for(var a,s=n.block.hidden,r=(n=n.block).getDescendants(!1),c=0;a=r[c];c++)a.isInFlyout=!0;n.render(),r=n.getSvgRoot(),c=n.getHeightWidth(),a=n.outputConnection?l-this.tabWidth_:l,n.moveBy(a,o),a=this.createRect_(n,this.RTL?a-c.width:a,o,c,i),this.addBlockListeners_(r,n,a),s?(a.style.display="none",o+=0):o+=c.height+e[i]}else"button"==n.type&&(this.initFlyoutButton_(n.button,l,o),o+=n.button.height+e[i])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,n=0,o=this.workspace_.getTopBlocks(!1),l=0;e=o[l];l++){var i=e.getHeightWidth().width;e.outputConnection&&(i-=this.tabWidth_),n=Math.max(n,i)}for(l=0;e=this.buttons_[l];l++)n=Math.max(n,e.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.width_!=n){for(l=0;e=o[l];l++){if(this.RTL){i=e.getRelativeToSurfaceXY().x;var a=n/this.workspace_.scale-this.MARGIN;e.outputConnection||(a-=this.tabWidth_),e.moveBy(a-i,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(l=0;e=this.buttons_[l];l++)o=e.getPosition().y,e.moveTo(n/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,o);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,o,l){this.workspace_=e,this.targetWorkspace_=n,this.text_=o.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=l,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.buttonWidth_=Number(o.width)||null,this.buttonIcon_=o.icon||null,this.buttonIconSize_=Number(o.iconSize)||25,this.onMouseUpWrapper_=null,this.info=o},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),this.buttonIcon_&&((e=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.buttonIconSize_+"px",width:this.buttonIconSize_+"px",x:6},this.svgGroup_)).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.buttonIcon_),e.style.cursor="pointer"),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),l=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(l+="\u200f"),o.textContent=l,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var i=t.utils.style.getComputedStyle(o,"fontSize"),a=t.utils.style.getComputedStyle(o,"fontWeight"),s=t.utils.style.getComputedStyle(o,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(o,i,a,s),l=t.utils.dom.measureFontMetrics(l,i,a,s),this.height=l.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,this.width=this.buttonIcon_?this.width+this.buttonIconSize_+40:this.width,this.height=this.buttonIcon_?this.buttonIconSize_:this.height,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),this.buttonWidth_?e.setAttribute("width",this.buttonWidth_):e.setAttribute("width",this.width),e.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-l.height/2+l.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.NAME_TYPE="generated_function",t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.isInitialized=null,t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var o,l=0;o=e[l];l++){var i=this.blockToCode(o);Array.isArray(i)&&(i=i[0]),i&&(o.outputConnection&&(i=this.scrubNakedValue(i),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,o)+i),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,o))),n.push(i))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},t.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var n=0;n<t.length;n++){var o=t[n].getCommentText();o&&e.push(o)}return e.length&&e.push(""),e.join("\n")},t.Generator.prototype.blockToCode=function(t,e){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var n=this[t.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+t.type+'".');if(n=n.call(t,t),Array.isArray(n))return n;if("string"==typeof n)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,t)+n),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,n,e);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},t.Generator.prototype.valueToCode=function(t,e,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+t.type);var o=t.getInputTargetBlock(e);if(!o)return"";if(""===(e=this.blockToCode(o)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+o.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+o.type);if(!t)return 0===t?"0":"";o=!1;var l=Math.floor(n),i=Math.floor(e);if(l<=i&&(l!=i||0!=l&&99!=l))for(o=!0,l=0;l<this.ORDER_OVERRIDES.length;l++)if(this.ORDER_OVERRIDES[l][0]==n&&this.ORDER_OVERRIDES[l][1]==e){o=!1;break}return o&&(t="("+t+")"),t},t.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},t.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},t.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var o,l=this.variableDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=l,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,l);o!=n;)o=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(t){},t.Generator.prototype.scrub_=function(t,e,n){return e},t.Generator.prototype.finish=function(t){return t},t.Generator.prototype.scrubNakedValue=function(t){return t},t.ToolboxItem=function(e,n,o){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,o){t.ToolboxCategory.superClass_.constructor.call(this,e,n,o),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var n;n=e[t];t++)this.flyoutItems_.push(n)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},t.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(t){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){this.isHidden_=!1,t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxSeparator.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxSeparator.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxSeparator.prototype.show=function(){this.setVisible_(!0)},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,o=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var l;l=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,l.kind)||l.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(l),o=!0):(this.createToolboxItem_(l),o=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<e.length;o++){var l=e[o];l.init();var i=l.getDiv();n.appendChild(i),l.getClickTarget&&l.getClickTarget().setAttribute("id",l.getId())}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e,n=0;e=this.getChildToolboxItems()[n];n++)e.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Events.ToolboxItemSelect=function(e,n,o){t.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=e,this.newItem=n},t.utils.object.inherits(t.Events.ToolboxItemSelect,t.Events.UiBase),t.Events.ToolboxItemSelect.prototype.type=t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect.prototype.toJson=function(){var e=t.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},t.Events.ToolboxItemSelect.prototype.fromJson=function(e){t.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},t.registry.register(t.registry.Type.EVENT,t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect),t.Toolbox=function(t){this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_={},this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.Toolbox.prototype.onShortcut=function(t){return!1},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color")},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),(n=this.createSearchContainer_(n)).appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createSearchContainer_=function(e){function n(){if(""==i.value.trim())return!1;if("functions"===i.value.toLowerCase())return o.flyout_.show("PROCEDURE"),!1;if("variables"===i.value.toLowerCase())return o.flyout_.show("VARIABLE"),!1;var e,n=[];for(e in t.Blocks){var l=t.Blocks[e];l.attrs&&l.attrs.keyword.includes(i.value.toLowerCase()||i.value.toUpperCase())&&n.push(e)}""!==BlocklyEditor.toolbox_.selectedItem_&&BlocklyEditor.toolbox_.setSelectedItem(null),n.length?o.searchFlyout_(n):BlocklyEditor.getFlyout().setVisible(!1)}var o=this,l=document.createElement("div");l.className="searchBox";var i=document.createElement("input");i.className="inputBox",i.setAttribute("type","text"),i.setAttribute("autocomplete","off"),i.setAttribute("placeholder","search"),i.setAttribute("id","searchInput"),i.addEventListener("focus",n),i.addEventListener("keyup",n);var a=document.createElement("i");return a.className="searchIcon searchIconImg",a.setAttribute("id","searchIcon"),a.onclick=n,e.appendChild(l),l.appendChild(i),l.appendChild(a),e},t.Toolbox.prototype.searchFlyout_=function(e){function n(t){0<(t=t.filter(function(t){return-1<["BLOCK","block"].indexOf(t.kind)&&"true"!==t.isDemo})).length&&(i=i.concat(t))}var o=BlocklyEditor.toolbox_.getToolboxItems();o=o.filter(function(t){return!t.isHidden_&&t.flyoutItems_&&0<t.flyoutItems_.length});var l=this,i=[];o.forEach(function(e){"string"==typeof(e=e.getContents())?"PROCEDURE"!==e&&"VARIABLE"!==e&&(e=l.flyout_.getDynamicCategoryContents_(e),n(e=t.utils.toolbox.convertFlyoutDefToJsonArray(e))):n(e)}),o=[];for(var a=e.length-1;0<=a;a--)for(var s=i.length-1;0<=s;s--)if(i[s].type)i[s].type===e[a]&&o.push(i[s]);else if(i[s].blockxml){var r="";"string"==typeof i[s].blockxml?r=i[s].blockxml.match(/<block type=.*>/)[0].match(/".*"/)[0].replace(/"/,"").replace(/"/,""):i[s].blockxml.getAttribute("type")&&(r=i[s].blockxml.getAttribute("type")),r===e[a]&&o.push(i[s])}0<o.length&&this.flyout_.show(o)},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(!e.target.className.includes("inputBox")&&!e.target.className.includes("searchIcon")){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.target.getAttribute("id");n&&((n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e))),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()}},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)},t.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n&&n.dispose()}this.contents_=[],this.contentMap_={},this.renderContents_(t.contents),this.position()},t.Toolbox.prototype.renderContents_=function(t){for(var e,n=document.createDocumentFragment(),o=0;e=t[o];o++)this.createToolboxItem_(e,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var o=e.kind;"CATEGORY"==o.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(o=t.CollapsibleToolboxCategory.registrationName),(o=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),this.addToolboxItem_(e),e.init(),(o=e.getDiv())&&n.appendChild(o),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},t.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var e,n=0;e=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(e)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,o=n+e.height,l=e.left;return e=l+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,l,1e7)},t.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==t.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==t.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.utils.toolbox.Position.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.utils.toolbox.Position.TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(t){this.HtmlDiv.style.display=t?"block":"none"},t.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!=e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!=t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},t.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!=t&&(!t.isCollapsible()||t!=e)},t.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!=e&&e!=t},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&((t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t))},t.Toolbox.prototype.updateFlyout_=function(t,e){(t!=e||e.isCollapsible())&&e&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var o=e&&e.getName(),l=n&&n.getName();e==n&&(l=null),e=new(t.Events.get(t.Events.TOOLBOX_ITEM_SELECT))(o,l,this.workspace_.id),t.Events.fire(e)},t.Toolbox.prototype.selectParent_=function(){return!!this.selectedItem_&&(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):!(!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable())&&(this.setSelectedItem(this.selectedItem_.getParent()),!0))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Events.TrashcanOpen=function(e,n){t.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=e},t.utils.object.inherits(t.Events.TrashcanOpen,t.Events.UiBase),t.Events.TrashcanOpen.prototype.type=t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen.prototype.toJson=function(){var e=t.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},t.Events.TrashcanOpen.prototype.fromJson=function(e){t.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},t.registry.register(t.registry.Type.EVENT,t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen),t.IPlugin=function(){},t.IPositionable=function(){},t.Trashcan=function(e){this.workspace_=e,this.contents_=[],this.timer=this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_BOTTOM_=20,t.Trashcan.prototype.MARGIN_SIDE_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null),this.svgGroup_.style.cursor="pointer";var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return o.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),t.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),t.browserEvents.bind(o,"mouseover",this,this.mouseOver_),t.browserEvents.bind(o,"mouseout",this,this.mouseOut_),t.browserEvents.bind(o,"dblclick",this,this.dblClick_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(e){return 0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.setLidOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},t.Trashcan.prototype.dispose=function(){this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var e,n=[],o=0;e=this.contents_[o];o++)n[o]=t.Xml.textToDom(e);this.flyout.show(n),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(e,n){if(this.verticalSpacing_){this.left_=e.toolboxMetrics.position==t.utils.toolbox.Position.LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewMetrics.width+e.absoluteMetrics.left-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness;var o=this.BODY_HEIGHT_+this.LID_HEIGHT_,l=this.top_=e.absoluteMetrics.top+this.verticalSpacing_,i=e.absoluteMetrics.top+e.viewMetrics.height-o-this.verticalSpacing_;this.top_=(e=e.toolboxMetrics.position!==t.utils.toolbox.Position.BOTTOM)?i:l;for(var a,s=this.getBoundingRectangle(),r=0;a=n[r];r++)s.intersects(a)&&(this.top_=e?a.top-o-this.MARGIN_BOTTOM_:a.bottom+this.MARGIN_BOTTOM_,s=this.getBoundingRectangle(),r=-1);this.top_=t.utils.math.clamp(l,this.top_,i),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.Trashcan.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),n=t.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=n+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){if(this.hasContents_()){clearTimeout(this.timer);var t=this;this.timer=setTimeout(function(){t.openFlyout()},250)}},t.Trashcan.prototype.dblClick_=function(){clearTimeout(this.timer),BlocklyEditor.getAllBlocks().forEach(function(t){t.disabled&&BlocklyEditor.getBlockById(t.id)&&BlocklyEditor.getBlockById(t.id).dispose()})},t.Trashcan.prototype.fireUiEvent_=function(e){e=new(t.Events.get(t.Events.TRASHCAN_OPEN))(e,this.workspace_.id),t.Events.fire(e)},t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],o=document.createElement("button");return o.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var o=e[e.length-1],l=t.utils.xml.createElement("block");l.setAttribute("type","variables_set_dynamic"),l.setAttribute("gap",24),l.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(l)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),o=0;for(var i;i=e[o];o++)(l=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),l.setAttribute("gap",8),l.appendChild(t.Variables.generateVariableFieldDom(i)),n.push(l)}}return n},t.ZoomControls=function(t){this.workspace_=t,this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=110,t.ZoomControls.prototype.MARGIN_BOTTOM_=20,t.ZoomControls.prototype.MARGIN_SIDE_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(t){return this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.verticalSpacing_+this.HEIGHT_},t.ZoomControls.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.browserEvents.unbind(this.onZoomOutWrapper_)},t.ZoomControls.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.ZoomControls.prototype.position=function(e,n){if(this.verticalSpacing_){this.left_=e.toolboxMetrics.position==t.utils.toolbox.Position.LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewMetrics.width+e.absoluteMetrics.left-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness;var o=this.top_=e.absoluteMetrics.top+this.verticalSpacing_,l=e.absoluteMetrics.top+e.viewMetrics.height-this.HEIGHT_-this.verticalSpacing_;this.top_=(e=e.toolboxMetrics.position!==t.utils.toolbox.Position.BOTTOM)?l:o,e?(this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")):(this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)"));for(var i,a=this.getBoundingRectangle(),s=0;i=n[s];s++)a.intersects(i)&&(this.top_=e?i.top-this.HEIGHT_-this.MARGIN_BOTTOM_:i.bottom+this.MARGIN_BOTTOM_,a=this.getBoundingRectangle(),s=-1);this.top_=t.utils.math.clamp(o,this.top_,l),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(t.Events.get(t.Events.CLICK))(null,this.workspace_.id,"zoom_controls");t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.ShortcutItems={},t.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},t.ShortcutItems.registerEscape=function(){var e={name:t.ShortcutItems.names.ESCAPE,preconditionFn:function(t){return!t.options.readOnly},callback:function(){return t.hideChaff(),!0}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.ESC,e.name)},t.ShortcutItems.registerDelete=function(){var e={name:t.ShortcutItems.names.DELETE,preconditionFn:function(e){return!e.options.readOnly&&t.selected&&t.selected.isDeletable()},callback:function(e,n){return n.preventDefault(),!t.Gesture.inProgress()&&(t.deleteBlock(t.selected),!0)}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.DELETE,e.name),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.BACKSPACE,e.name)},t.ShortcutItems.registerCopy=function(){var e={name:t.ShortcutItems.names.COPY,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()},callback:function(){return t.hideChaff(),t.copy(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerCut=function(){var e={name:t.ShortcutItems.names.CUT,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&!t.selected.workspace.isFlyout},callback:function(){return t.copy(t.selected),t.deleteBlock(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerPaste=function(){var e={name:t.ShortcutItems.names.PASTE,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()},callback:function(){return t.paste()}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerUndo=function(){var e={name:t.ShortcutItems.names.UNDO,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()},callback:function(e){return t.hideChaff(),e.undo(!1),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerRedo=function(){var e={name:t.ShortcutItems.names.REDO,preconditionFn:function(e){return!t.Gesture.inProgress()&&!e.options.readOnly},callback:function(e){return t.hideChaff(),e.undo(!0),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Y,[t.utils.KeyCodes.CTRL]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerDefaultShortcuts=function(){t.ShortcutItems.registerEscape(),t.ShortcutItems.registerDelete(),t.ShortcutItems.registerCopy(),t.ShortcutItems.registerCut(),t.ShortcutItems.registerPaste(),t.ShortcutItems.registerUndo(),t.ShortcutItems.registerRedo()},t.ShortcutItems.registerDefaultShortcuts(),t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},t.ContextMenuItems.toggleOption_=function(t,e){for(var n=0,o=0;o<e.length;o++)for(var l=e[o];l;)setTimeout(l.setCollapsed.bind(l,t),n),l=l.getNextBlock(),n+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var o=e.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),o=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,o):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(e){e&&t.ContextMenuItems.deleteNext_(n,o)})}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.inputTypes.STATEMENT&&e.inputList[n].type!=t.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block.dispose(!0,!0),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuItems.registerDefaultOptions(),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(t){this.block_=t},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,n=t.utils.xml.createElement("xml"),o=0;e=this.quarkNames_[o];o++){var l=t.utils.xml.createElement("block");l.setAttribute("type",e),n.appendChild(l)}else n=null;return(o=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(e=!!n)&&(o.languageTree=t.utils.toolbox.convertToolboxDefToJson(n)),this.workspace_=new t.WorkspaceSvg(o),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),n=e?this.workspace_.addFlyout(t.utils.Svg.G):null,o=this.workspace_.createDom("blocklyMutatorBackground"),n&&o.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(o),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,l=n.height+3*e,i=this.workspace_.getFlyout();if(i){var a=i.getWorkspace().getMetricsManager().getScrollMetrics();l=Math.max(l,a.height+20),o+=i.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*e,(Math.abs(this.workspaceWidth_-o)>e||Math.abs(this.workspaceHeight_-l)>e)&&(this.workspaceWidth_=o,this.workspaceHeight_=l,this.bubble_.setBubbleSize(o+e,l+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var o,l=0;o=n[l];l++)o.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var i=this,a=this.block_;a.saveConnections(this.rootBlock_),this.sourceListener_=function(){a.saveConnections(i.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==t.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var n,o=0;n=e[o];o++){var l=n.getRelativeToSurfaceXY();if(20>l.y&&n.moveBy(0,20-l.y),n.RTL){var i=-20,a=this.workspace_.getFlyout();a&&(i-=a.getWidth()),l.x>i&&n.moveBy(i-l.x,0)}else 20>l.x&&n.moveBy(20-l.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(t.Events.setGroup(!0),e=(e=(n=this.block_).mutationToDom())&&t.Xml.domToText(e),o=n.rendered,n.rendered=!1,n.compose(this.rootBlock_),n.rendered=o,n.initSvg(),n.rendered&&n.render(),e!=(o=(o=n.mutationToDom())&&t.Xml.domToText(o))){t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"mutation",null,e,o));var s=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(s),n.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1)}}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),n=0;n<e.length;n++){var o=e[n];o.setStyle(o.getStyleName())}if(n=t.getFlyout())for(t=n.workspace_.getAllBlocks(!1),n=0;n<t.length;n++)(o=t[n]).setStyle(o.getStyleName())}},t.Mutator.reconnect=function(t,e,n){if(!t||!t.getSourceBlock().workspace)return!1;n=e.getInput(n).connection;var o=t.targetBlock();return!(o&&o!=e||n.targetConnection==t)&&(n.isConnected()&&n.disconnect(),n.connect(t),!0)},t.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var n=t.options.parentWorkspace;t.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n)}return e},t.FieldTextInput=function(e,n,o){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t,e=0,n=0,o=0;t=this.sourceBlock_.inputList[o];o++){for(var l=0;t.fieldRow[l];l++)e++;t.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},t.FieldTextInput.prototype.showInlineEditor_=function(e){var n=this.getSourceBlock();"text_password"===n.type&&n.isHide&&n.setDidplayState(!1),t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),l=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(e.style.fontSize=l,n.style.fontSize=l,l=t.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){l=((l=this.getScaledBBox()).bottom-l.top)/2+"px";var i=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+i,e.style.borderRadius=l,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=l,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,"text_password"===(e=this.getSourceBlock()).type&&e.setDidplayState(e.isHide),t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),"text_password"===(e=this.getSourceBlock()).type&&e.setDidplayState(!1),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},t.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,o){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),e=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(e),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var o=0;360>o;o+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(0==o%45?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);return this.clickWrapper_=t.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/o),isNaN(n)||(n=t.utils.math.toDegrees(n),0>o?n+=180:0<e&&(n+=360),n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n),this.displayMouseOrKeyboardValue_(n))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var o=t.FieldAngle.HALF,l=t.FieldAngle.HALF;if(!isNaN(n)){var i=Number(this.clockwise_),a=t.utils.math.toRadians(this.offset_),s=Math.cos(a)*t.FieldAngle.RADIUS,r=Math.sin(a)*-t.FieldAngle.RADIUS;i&&(n=2*a-n),o+=Math.cos(n)*t.FieldAngle.RADIUS,l-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-a)/Math.PI)%2),i&&(n=1-n),e.push(" l ",s,",",r," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",i," ",o,",",l," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",l)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},t.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldNumber=function(e,n,o,l,i,a){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,i,a),a||this.setConstraints(n,o,l)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(t,e,n){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(n),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(t){null==t?this.precision_=0:(t=Number(t),isNaN(t)||(this.precision_=t));var e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}),n=e.indexOf(".");this.decimalPlaces_=-1==n?t?0:null:e.length-n-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(t){if(null===t)return null;if(/^0[a-zA-Z]+/.test(t)){var e=t.match(/^0b|0B|0x|0X/);if(!e)return null;var n=t.replace(e[0],""),o=/^[a-fA-F0-9]+$/gi;if("0x"===e[0].toLowerCase()?o=/^[a-fA-F0-9]+$/gi:"0b"===e[0].toLowerCase()&&(o=/^[1|0]+$/gi),!n.match(o))return null}else{if(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))return null;t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_)))}return t},t.FieldNumber.prototype.render_=function(){if(/^0[a-zA-Z]+/.test(this.value_)){var e=this.value_.match(/^0b|0B|0x|0X/);if(e){var n=this.value_.replace(e[0],""),o=/^[a-fA-F0-9]+$/gi;"0x"===e[0].toLowerCase()?o=/^[a-fA-F0-9]+$/gi:"0b"===e[0].toLowerCase()&&(o=/^[1|0]+$/gi),n.match(o)?this.isTextValid_=!0:this.isTextValid_=!1}else this.isTextValid_=!1}t.FieldNumber.superClass_.render_.call(this)},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldSlider=function(e,n,o){this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.RANGE_THUMB_RADIUS=9,t.FieldSlider.superClass_.constructor.call(this,e||0,n,o),this.readout_=this.rangeThumbRect_=this.rangeThumb_=this.rangeRect_=this.picker_=null,this.min_=o.min||0,this.max_=o.max||100,this.step=o.step||1,this.precision_=this.decimalPlaces_=0,this.moveLeaveWrapper_=this.moveEnterWrapper_=this.moveWheelWrapper_=this.moveWrapper_=this.moveUpWrapper_=this.moveDownWrapper_=this.clickRangeWrapper_=null,this.dragging=!1},t.utils.object.inherits(t.FieldSlider,t.FieldNumber),t.FieldSlider.fromJson=function(e){return new t.FieldSlider(e.value,void 0,e)},t.FieldSlider.prototype.configure_=function(e){t.FieldSlider.superClass_.configure_.call(this,e)},t.FieldSlider.prototype.initView=function(){t.FieldSlider.superClass_.initView.call(this)},t.FieldSlider.prototype.render_=function(){t.FieldSlider.superClass_.render_.call(this),this.valueToRange_()},t.FieldSlider.prototype.showEditor_=function(e){t.FieldSlider.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),this.picker_=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),this.picker_.onblur=function(){this.dragging=!1},this.moveEnterWrapper_=t.bindEventWithChecks_(this.picker_,"mouseenter",this,this.onMouseEnter_,!0,!0),this.moveLeaveWrapper_=t.bindEventWithChecks_(this.picker_,"mouseleave",this,this.onMouseLeave_,!0,!0),this.moveWrapper_=t.bindEventWithChecks_(this.picker_,"mousemove",this,this.onMouseMoveEvent_,!0,!0),this.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.valueToRange_()},t.FieldSlider.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement("svg",{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:"60px",width:"220px",style:"touch-action: none",class:"blocklySlider"},null);return this.rangeRect_=t.utils.dom.createSvgElement("g",{class:"blocklySliderRange"},e),t.utils.dom.createSvgElement("rect",{x:12,y:32,rx:4,ry:4,width:190,height:10,class:"blocklySliderRail"},this.rangeRect_),t.utils.dom.createSvgElement("rect",{x:12,y:32,rx:4,ry:4,width:0,height:10,class:"blocklySliderTrack"},this.rangeRect_),this.rangeThumbRect_=t.utils.dom.createSvgElement("circle",{cx:12+this.RANGE_THUMB_RADIUS,cy:37,r:this.RANGE_THUMB_RADIUS+6,class:"blocklySliderThumbRect"},this.rangeRect_),this.rangeThumb_=t.utils.dom.createSvgElement("circle",{cx:12+this.RANGE_THUMB_RADIUS,cy:37,r:this.RANGE_THUMB_RADIUS,class:"blocklySliderThumb"},this.rangeRect_),this.readout_=t.utils.dom.createSvgElement("text",{x:12+this.RANGE_THUMB_RADIUS,y:17,class:"blocklySliderLabel"},e),this.readout_.textContent="0",this.clickRangeWrapper_=t.bindEventWithChecks_(this.rangeRect_,"click",this,this.onClick_,!0,!0),this.moveDownWrapper_=t.bindEventWithChecks_(this.rangeThumb_,"mousedown",this,this.onMouseDownEvent_,!0,!0),this.moveUpWrapper_=t.bindEventWithChecks_(this.rangeThumb_,"mouseup",this,this.onMouseUpEvent_,!0,!0),this.moveWheelWrapper_=t.bindEventWithChecks_(this.rangeRect_,"mousewheel",this,this.onMouseWheelEvent_,!0,!0),e},t.FieldSlider.prototype.dropdownDispose_=function(){this.clickRangeWrapper_&&(t.unbindEvent_(this.clickRangeWrapper_),this.clickRangeWrapper_=null),this.moveDownWrapper_&&(t.unbindEvent_(this.moveDownWrapper_),this.moveDownWrapper_=null),this.moveUpWrapper_&&(t.unbindEvent_(this.moveUpWrapper_),this.moveUpWrapper_=null),this.moveWrapper_&&(t.unbindEvent_(this.moveWrapper_),this.moveWrapper_=null),this.moveEnterWrapper_&&(t.unbindEvent_(this.moveEnterWrapper_),this.moveEnterWrapper_=null),this.moveLeaveWrapper_&&(t.unbindEvent_(this.moveLeaveWrapper_),this.moveLeaveWrapper_=null),this.picker_=this.readout_=this.rangeThumb_=this.rangeRect_=null},t.FieldSlider.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldSlider.prototype.onScroll_=function(t){var e=1*this.rangeRect_.children[0].getAttribute("x"),n=this.readout_.getBBox().width,o=e+this.RANGE_THUMB_RADIUS,l=1*this.rangeRect_.children[0].getAttribute("width")+e-this.RANGE_THUMB_RADIUS,i=t;t<=o?i=o:t>=l&&(i=l),this.rangeThumb_.setAttribute("cx",i),this.rangeThumbRect_.setAttribute("cx",i),this.rangeRect_.children[1].setAttribute("width",i-e),this.readout_.setAttribute("x",i-n/2)},t.FieldSlider.prototype.onMouseEnter_=function(){this.picker_.focus(),this.picker_.style.opacity=1},t.FieldSlider.prototype.onMouseLeave_=function(){this.dragging=!1,this.picker_.blur(),this.rangeThumbRect_.style.display="none",this.picker_.style.opacity=.8},t.FieldSlider.prototype.onMouseDownEvent_=function(t){this.dragging=!0,this.picker_.focus(),this.rangeThumbRect_.style.display="block",this.picker_.style.opacity=1,t.stopPropagation(),t.preventDefault()},t.FieldSlider.prototype.onMouseMoveEvent_=function(t){this.dragging&&(this.onScroll_(t.layerX),this.rangeToValue(t.layerX)),this.rangeThumbRect_.style.display="block",t.stopPropagation(),t.preventDefault()},t.FieldSlider.prototype.onMouseUpEvent_=function(t){this.dragging&&(this.onScroll_(t.layerX),this.rangeToValue(t.layerX),this.dragging=!1),this.picker_.blur(),this.rangeThumbRect_.style.display="none",this.picker_.style.opacity=.8,t.stopPropagation(),t.preventDefault()},t.FieldSlider.prototype.onClick_=function(t){var e=1*this.rangeThumb_.getAttribute("cx");if(t.layerX>e+this.RANGE_THUMB_RADIUS)e=!1;else{if(!(t.layerX<e-this.RANGE_THUMB_RADIUS))return;e=!0}var n=100<=this.max_-this.min_?10:1;this.eventSetValue(e?-this.step*n:+this.step*n),this.rangeThumbRect_.style.display="block",this.picker_.style.opacity=1,t.stopPropagation(),t.preventDefault()},t.FieldSlider.prototype.onMouseWheelEvent_=function(t){var e=!1;0<t.deltaY?e=!1:0>t.deltaY&&(e=!0),this.eventSetValue(e?1*this.step:-this.step),this.rangeThumbRect_.style.display="block",this.picker_.style.opacity=1},t.FieldSlider.prototype.valueToRange_=function(){if(this.rangeRect_&&this.rangeThumb_&&null!==this.value_&&!isNaN(this.value_)){var t=0,e=1*this.rangeRect_.children[0].getAttribute("width"),n=e-2*this.RANGE_THUMB_RADIUS,o=1*this.rangeRect_.children[0].getAttribute("x");this.value_<this.max_&&this.value_>this.min_?t=Math.floor((this.value_-this.min_)/(this.max_-this.min_)*n)+o+this.RANGE_THUMB_RADIUS:this.value_<=this.min_?t=o+this.RANGE_THUMB_RADIUS:this.value_>=this.max_&&(t=o+e-this.RANGE_THUMB_RADIUS),this.setReadoutValue(),this.onScroll_(t)}},t.FieldSlider.prototype.rangeToValue=function(t){if(this.rangeRect_&&this.rangeThumb_){var e=1*this.rangeRect_.children[0].getAttribute("width")-2*this.RANGE_THUMB_RADIUS,n=this.max_-this.min_,o=1*this.rangeRect_.children[0].getAttribute("x");t=Math.floor((t-o-this.RANGE_THUMB_RADIUS)/e*n+this.min_),t=this.checkValue(t),this.setEditorValue_(t),this.setReadoutValue()}},t.FieldSlider.prototype.setReadoutValue=function(){this.readout_.textContent=this.value_||"0"},t.FieldSlider.prototype.eventSetValue=function(t){this.value_=this.checkValue(t+this.value_),this.valueToRange_(),this.setEditorValue_(this.value_)},t.FieldSlider.prototype.checkValue=function(t){return t<this.min_?this.min_:t>this.max_?this.max_:t},t.Css.register(".blocklySlider {,opacity: 0.8;,},.blocklySlider:focus {,outline: none;,},.blocklySliderRange:focus {,outline: none;,},.blocklySliderRail {,stroke: #ddd;,stroke-width: 1;,fill: #ddd;,cursor: pointer;,},.blocklySliderTrack {,stroke: #ddd;,stroke-width: 1;,fill: #ddd;,cursor: pointer;,},.blocklySliderThumbRect {,display: none;,fill: #fff;,fill-opacity: .3;,cursor: pointer;,},.blocklySliderThumb {,fill: #fff;,stroke: #000;,stroke-width: 2;,stroke-opacity: .7;,cursor: pointer;,},.blocklySliderLabel {,fill: #000;,font-family: sans-serif;,font-size: 11pt;,font-weight: normal;,user-select: none;,}".split(",")),t.FieldSlider.prototype.setColour=function(t,e){this.rangeRect_.children[1].style.fill=t,this.rangeRect_.children[1].style.stroke=e,this.rangeRect_.children[0].style.stroke=e,this.rangeThumb_.style.stroke=t,this.rangeThumbRect_.style.fill=t},t.FieldSlider.prototype.setConfig=function(t,e){switch(t){case"min":this.min_=1*e;break;case"max":this.max_=1*e;break;case"step":this.step=1*e;break;case"decimalPlaces":this.decimalPlaces_=1*e}},t.FieldSlider.prototype.getConfig=function(t){switch(t){case"min":return this.min_;case"max":return this.max_;case"step":return this.step;case"decimalPlaces":return this.decimalPlaces_}},t.fieldRegistry.register("field_slider",t.FieldSlider),t.FieldCheckbox=function(e,n,o){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,o){t.FieldColour.superClass_.constructor.call(this,e,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},t.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},t.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&(null!==(n=n&&n.label)&&this.setValue(n)),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var o=this.colours_||t.FieldColour.COLOURS,l=this.columns_||t.FieldColour.COLUMNS,i=this.highlightedIndex_%l,a=Math.floor(this.highlightedIndex_/l);i+=e,a+=n,0>e?0>i&&0<a?(i=l-1,a--):0>i&&(i=0):0<e?i>l-1&&a<Math.floor(o.length/l)-1?(i=0,a++):i>l-1&&i--:0>n?0>a&&(a=0):0<n&&a>Math.floor(o.length/l)-1&&(a=Math.floor(o.length/l)-1),this.setHighlightedCell_(this.picker_.childNodes[a].childNodes[i],a*l+i)},t.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var o=this.getHighlighted_();o&&t.utils.dom.removeClass(o,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,o=this.titles_||t.FieldColour.TITLES,l=this.getValue(),i=document.createElement("table");i.className="blocklyColourTable",i.tabIndex=0,i.dir="ltr",t.utils.aria.setRole(i,t.utils.aria.Role.GRID),t.utils.aria.setState(i,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(i,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(i,t.utils.aria.State.COLCOUNT,e);for(var a,s=0;s<n.length;s++){0==s%e&&(a=document.createElement("tr"),t.utils.aria.setRole(a,t.utils.aria.Role.ROW),i.appendChild(a));var r=document.createElement("td");a.appendChild(r),r.label=n[s],r.title=o[s]||n[s],r.id=t.utils.IdGenerator.getNextUniqueId(),r.setAttribute("data-index",s),t.utils.aria.setRole(r,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(r,t.utils.aria.State.LABEL,n[s]),t.utils.aria.setState(r,t.utils.aria.State.SELECTED,n[s]==l),r.style.backgroundColor=n[s],n[s]==l&&(r.className="blocklyColourSelected",this.highlightedIndex_=s)}return this.onClickWrapper_=t.browserEvents.conditionalBind(i,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.browserEvents.conditionalBind(i,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.browserEvents.conditionalBind(i,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.browserEvents.conditionalBind(i,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.browserEvents.conditionalBind(i,"keydown",this,this.onKeyDown_),i},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,o){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX);var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var l=n[o][0],i=n[o][1];if("object"==typeof l){var a=new Image(l.width,l.height);a.src=l.src,a.alt=l.alt||"",l=a}(l=new t.MenuItem(l,i)).setRole(t.utils.aria.Role.OPTION),l.setRightToLeft(this.sourceBlock_.RTL),l.setCheckable(!0),e.addChild(l),l.setChecked(i==this.value_),i==this.value_&&(this.selectedMenuItem_=l),l.onAction(this.handleMenuActionEvent_,this)}return e},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,o=0;o<e.length;o++){var l=e[o][0];"string"==typeof l?e[o][0]=t.utils.replaceMessageReferences(l):(null!=l.alt&&(e[o][0].alt=t.utils.replaceMessageReferences(l.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],o=0;o<e.length;o++)n.push(e[o][0]);o=t.utils.string.shortestStringLength(n),l=t.utils.string.commonWordPrefix(n,o);var i=t.utils.string.commonWordSuffix(n,o);!l&&!i||o<=l+i||(l&&(this.prefixField=n[0].substring(0,l-1)),i&&(this.suffixField=n[0].substr(1-i)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,l,i))}}},t.FieldDropdown.applyTrim_=function(t,e,n){for(var o=[],l=0;l<t.length;l++){var i=t[l][0],a=t[l][1];i=i.substring(e,i.length-n),o[l]=[i,a]}return o},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(t){for(var e,n=this.getOptions(!0),o=0;(e=n[o])&&e[1]!=t;o++);return t},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var n,o=0;n=e[o];o++)n[1]==this.value_&&(this.selectedOption_=n)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var o=!!this.borderRect_,l=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var i=this.svgArrow_?this.positionSVGArrow_(e+o,l/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+i+2*o,this.size_.height=l;var a=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+i):(a=e+i,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",l/2-n/2),this.positionTextElement_(a+o,e+i)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var l=0;this.svgArrow_&&(l=this.positionSVGArrow_(o+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+l+2*e,this.size_.height=n,this.positionTextElement_(e,o)},t.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,l=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?n:t+o)+","+e+")"),l+o},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},t.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,n=0;n<t.length;++n){var o=t[n];Array.isArray(o)?"string"!=typeof o[1]?(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(e)throw TypeError("Found invalid FieldDropdown options.")},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,o){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,o,l,i,a,s){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),o=Number(t.utils.replaceMessageReferences(o)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,s),s||(this.flipRtl_=!!a,this.altText_=t.utils.replaceMessageReferences(l)||""),this.size_=new t.utils.Size(n,o+t.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof i&&(this.clickHandler_=i),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,o){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.prototype.configure_=function(e){t.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},t.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,l=0;l<o;l++){var i=n[l];i.length>this.maxDisplayLength?i=i.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&l===o-1&&(i=i.substring(0,i.length-3)+"..."),e+=i=i.replace(/\s/g,t.Field.NBSP),l!==o-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.doValueUpdate_=function(e){t.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,o=0;o<e.length;o++){var l=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[o])),n+=l}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?t.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):t.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,o=0,l=0;l<e.length;l++){var i=t.utils.dom.getTextWidth(e[l]);i>n&&(n=i),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<l?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),i=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var a=this.getConstants().FIELD_TEXT_FONTSIZE,s=this.getConstants().FIELD_TEXT_FONTWEIGHT,r=this.getConstants().FIELD_TEXT_FONTFAMILY;for(l=0;l<e.length;l++){e[l].length>this.maxDisplayLength&&(e[l]=e[l].substring(0,this.maxDisplayLength)),i.textContent=e[l];var c=t.utils.dom.getFastTextWidth(i,a,s,r);c>n&&(n=c)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},t.FieldMultilineInput.prototype.showEditor_=function(e,n){t.FieldMultilineInput.superClass_.showEditor_.call(this,e,n),this.forceRerender()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var l=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=l,o.style.fontSize=l,o.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",l=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var i=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=i+"px "+l+"px "+i+"px "+l+"px",l=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=l*n+"px",e.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},t.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},t.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldVariable=function(e,n,o,l,i){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new t.utils.Size(0,0),i&&this.configure_(i),n&&this.setValidator(n),i||this.setTypes_(o,l)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),o=e.textContent,l=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,l),null!=l&&l!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?(n=n.type,this.typeIsAllowed_(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},t.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<t.length;o++)t[o]==e&&(n=!0);if(!n)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),l=0;l<o.length;l++){var i=this.sourceBlock_.workspace.getVariablesOfType(o[l]);n=n.concat(i)}for(n.sort(t.VariableModel.compareByName),o=[],l=0;l<n.length;l++)o[l]=[n[l].name,n[l].getId()];return o.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&o.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),o},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.FieldColourMatrix=function(e,n,o){t.FieldColourMatrix.superClass_.constructor.call(this,e,n),this.fieldType="colourMatrix",this.size_=new t.utils.Size(185,180),this.matrix_=Array.from({length:5},function(t){return Array.from({length:5},function(t){return"#000000"})}),this.value_=this.matrix_.toString().replace(/#/g,"0x").replace(/0x000000/g,"0")},t.utils.object.inherits(t.FieldColourMatrix,t.Field),t.FieldColourMatrix.prototype.SERIALIZABLE=!0,t.FieldColourMatrix.prototype.CURSOR="pointer",t.FieldColourMatrix.prototype.MODE_ON="ON",t.FieldColourMatrix.prototype.MODE_OFF="OFF",t.FieldColourMatrix.prototype.DEFAULT_COLOR="#000000",t.FieldColourMatrix.prototype.fillColor_="#FFFFFF",t.FieldColourMatrix.prototype.isMouseDown_=!1,t.FieldColourMatrix.prototype.mode_=t.FieldColourMatrix.prototype.MODE_ON,t.FieldColourMatrix.prototype.mouseDownWrapper_=null,t.FieldColourMatrix.prototype.mouseMoveWrapper_=null,t.FieldColourMatrix.prototype.mouseUpWrapper_=null,t.FieldColourMatrix.fromJson=function(e){return e=t.utils.replaceMessageReferences(e.value),new t.FieldColourMatrix(e)},t.FieldColourMatrix.prototype.initView=function(){this.createView_()},t.FieldColourMatrix.prototype.getValue=function(){return this.matrix_.toString().replace(/#/g,"0x").replace(/0x000000/g,"0")||""},t.FieldColourMatrix.prototype.updateValue=function(t,e,n){this.matrix_[t][e]=n},t.FieldColourMatrix.prototype.dontHandleMouseEvent_=function(t){t.stopPropagation(),t.preventDefault()},t.FieldColourMatrix.prototype.clearHandleMouseEvent_=function(e){this.isMouseDown_=!1,this.mode_=this.MODE_ON;var n=this.sourceBlock_.getSvgRoot();n.removeEventListener("mousedown",this.dontHandleMouseEvent_),n.removeEventListener("mousemove",this.dontHandleMouseEvent_),this.mouseMoveWrapper_&&(t.unbindEvent_(this.mouseMoveWrapper_),this.mouseMoveWrapper_=null),this.mouseUpWrapper_&&(t.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.FieldColourMatrix.prototype.onMouseDown=function(e){t.hideChaff(),this.sourceBlock_.select(),t.DropDownDiv.owner_&&t.DropDownDiv.hideIfOwner(t.DropDownDiv.owner_);var n=this.sourceBlock_.getSvgRoot();n.addEventListener("mousedown",this.dontHandleMouseEvent_),n.addEventListener("mousemove",this.dontHandleMouseEvent_),this.isMouseDown_=!0,(n=e.target.getAttribute("fill"))===this.fillColor_&&n!==this.DEFAULT_COLOR?(this.setDefaultColor(e.target),this.mode_=this.MODE_OFF):this.updateColor(e.target),this.updateValue(e.target.getAttribute("data-x"),e.target.getAttribute("data-y"),e.target.getAttribute("fill")),this.mouseMoveWrapper_=t.bindEventWithChecks_(this.getClickTarget_(),"mousemove",this,this.onMouseMove),this.mouseUpWrapper_=t.bindEventWithChecks_(document,"mouseup",this,this.clearHandleMouseEvent_),e.stopPropagation(),e.preventDefault()},t.FieldColourMatrix.prototype.onMouseMove=function(t){this.isMouseDown_&&(this.mode_===this.MODE_OFF?this.setDefaultColor(t.target):t.target.getAttribute("fill")!==this.fillColor_&&this.updateColor(t.target),this.updateValue(t.target.getAttribute("data-x"),t.target.getAttribute("data-y"),t.target.getAttribute("fill")))},t.FieldColourMatrix.prototype.onMouseUp=function(e){this.isMouseDown_=!1,this.mode_=this.MODE_ON,this.mouseUpWrapper_&&(t.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null)},t.FieldColourMatrix.prototype.bindEvents_=function(){if(!this.sourceBlock_.isInFlyout){t.FieldColourMatrix.superClass_.bindEvents_.call(this);var e=this.getClickTarget_();this.mouseDownWrapper_=t.bindEventWithChecks_(e,"mousedown",this,this.onMouseDown)}},t.FieldColourMatrix.prototype.createView_=function(){this.movableGroup_=t.utils.dom.createSvgElement("g",{transform:"translate(0,5)"},this.fieldGroup_);var e=t.utils.dom.createSvgElement("g",{transform:"scale(1.5)"},this.movableGroup_);for(this.matrixGroup_=t.utils.dom.createSvgElement("g",{class:"colourMatrixBody"},e),e=0;5>e;e++)for(var n=0;5>n;n++)t.utils.dom.createSvgElement("rect",{class:"colourMatrixBody",x:8+22*n,y:22*e,width:20,height:20,fill:this.matrix_[e][n],"data-x":e,"data-y":n},this.matrixGroup_)},t.FieldColourMatrix.prototype.updateColor=function(t){t&&t.setAttribute("fill",this.fillColor_)},t.FieldColourMatrix.prototype.setDefaultColor=function(t){t&&t.setAttribute("fill",this.DEFAULT_COLOR)},t.FieldColourMatrix.prototype.setFillColor=function(t){this.fillColor_=t||"#000000"},t.FieldColourMatrix.prototype.getFillColor=function(){return this.fillColor_},t.FieldColourMatrix.prototype.toXml=function(t){return t.setAttribute("matrix",this.matrix_.toString()),t},t.FieldColourMatrix.prototype.fromXml=function(t){if(t=t.getAttribute("matrix")){for(var e=t.split(","),n=0;5>n;n++)for(var o=0;5>o;o++)this.matrix_[n][o]=e[5*n+o];this.setValue(t)}},t.fieldRegistry.register("field_colour_matrix",t.FieldColourMatrix),t.FieldColourPicker=function(e,n,o){t.FieldColourPicker.superClass_.constructor.call(this,e,n),this.fieldType="colourPicker",this.value_="#FFFFFF"},t.utils.object.inherits(t.FieldColourPicker,t.Field),t.FieldColourPicker.prototype.SERIALIZABLE=!0,t.FieldColourPicker.prototype.mouseDownWrapper_=null,t.FieldColourPicker.fromJson=function(e){return e=t.utils.replaceMessageReferences(e.value),new t.FieldColourPicker(e)},t.FieldColourPicker.prototype.initView=function(){this.createView_()},t.FieldColourPicker.prototype.getValue=function(){return this.value_},t.FieldColourPicker.prototype.createView_=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.constants_.FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColourPicker.prototype.onMouseDown=function(t){var e=this,n=document.createElement("input");n.type="color",n.onchange=function(t){e.setValue(t.target.value),n=null},n.click(),t.stopPropagation(),t.preventDefault()},t.FieldColourPicker.prototype.bindEvents_=function(){if(!this.sourceBlock_.isInFlyout){t.FieldColourPicker.superClass_.bindEvents_.call(this);var e=this.getClickTarget_();this.mouseDownWrapper_=t.bindEventWithChecks_(e,"mousedown",this,this.onMouseDown)}},t.FieldColourPicker.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColourPicker.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#FFFFFF"))},t.fieldRegistry.register("field_colour_picker",t.FieldColourPicker),t.utils.svgPaths={},t.utils.svgPaths.point=function(t,e){return" "+t+","+e+" "},t.utils.svgPaths.curve=function(t,e){return" "+t+e.join("")},t.utils.svgPaths.moveTo=function(t,e){return" M "+t+","+e+" "},t.utils.svgPaths.moveBy=function(t,e){return" m "+t+","+e+" "},t.utils.svgPaths.lineTo=function(t,e){return" l "+t+","+e+" "},t.utils.svgPaths.line=function(t){return" l"+t.join("")},t.utils.svgPaths.lineOnAxis=function(t,e){return" "+t+" "+e+" "},t.utils.svgPaths.arc=function(t,e,n,o){return t+" "+n+" "+n+" "+e+o},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles={};var e,n=t.blockStyles;for(e in n)this.blockStyles[e]=this.validatedBlockStyle_(n[e]);this.setDynamicProperties_(t)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var l=-(e=e?-1:1),i=o/2,a=i+2.5,s=i+.5,r=t.utils.svgPaths.point(-n,e*i);return i=t.utils.svgPaths.point(n,e*i),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,e*a),t.utils.svgPaths.point(-n,l*s),r])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*l),i])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,l=e(!0),i=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:i,pathUp:l}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.line([t.utils.svgPaths.point(e*l,o),t.utils.svgPaths.point(3*e,0),t.utils.svgPaths.point(e*l,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,l=(n-3)/2,i=e(1),a=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:i,pathRight:a}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),l=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:o,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:l,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,o){this.injectCSS_(n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var n=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=n:((e=document.createElement("style")).id=t,t=document.createTextNode(n),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,o){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=o},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isInput(e))return e;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,n=0;e=this.elements[n];n++)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,n=t.getPreviousBlock();return!!t.outputConnection||e||!!n&&n.getNextBlock()==t},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var e,n=0,o=0,l=0,i=0;e=this.elements[i];i++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isHat(e)?l=Math.max(l,e.ascenderHeight):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+l,this.capline=this.ascenderHeight=l,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var e,n=0,o=0,l=0,i=0;e=this.elements[i];i++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isNextConnection(e)?l=Math.max(l,e.height):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+l,this.descenderHeight=l,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,o){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,o)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,n=0,o=0;e=this.elements[o];o++)this.width+=e.width,t.blockRendering.Types.isInput(e)&&(t.blockRendering.Types.isStatementInput(e)?n+=e.connectedBlockWidth:t.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(n+=e.connectedBlockWidth-e.connectionWidth)),t.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();if(n.length)for(var o,l=0;o=n[l];l++){var i=new t.blockRendering.Icon(this.constants_,o);this.isCollapsed&&o.collapseHidden?this.hiddenIcons.push(i):e.elements.push(i)}for(o=null,l=0;n=this.block_.inputList[l];l++)if(n.isVisible()){for(this.shouldStartNewRow_(n,o)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),o=0;i=n.fieldRow[o];o++)e.elements.push(new t.blockRendering.Field(this.constants_,i,n));this.addInput_(n,e),o=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==t.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&!this.isInline)},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var l=0;l<o.length-1;l++){e.elements.push(o[l]);var i=this.getInRowSpacing_(o[l],o[l+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,i))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var t,e=0,n=0,o=0,l=0;t=this.rows[l];l++){if(t.measure(),n=Math.max(n,t.width),t.hasStatement){var i=t.getLastInput();e=Math.max(e,t.width-i.width)}o=Math.max(o,t.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,l=0;t=this.rows[l];l++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,n=0;e=this.rows[n];n++)if(e.hasStatement)this.alignStatementRow_(e);else{var o=e.width;0<(o=this.getDesiredRowWidth_(e)-o)&&this.addAlignmentPadding_(e,o),t.blockRendering.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var o=e.getFirstSpacer(),l=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.constants.ALIGN.LEFT?l.width+=n:e.align==t.constants.ALIGN.CENTRE?(o.width+=n/2,l.width+=n/2):e.align==t.constants.ALIGN.RIGHT?o.width+=n:l.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),n=t.width-e.width,o=this.statementEdge;0<(n=o-n)&&this.addAlignmentPadding_(t,n),n=t.width,o=this.getDesiredRowWidth_(t),e.width+=o-n,e.height=Math.max(e.height,t.height),t.width+=o-n,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var o=this.getSpacerRowHeight_(e,n),l=this.getSpacerRowWidth_(e,n);return o=new t.blockRendering.SpacerRow(this.constants_,o,l),e.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var n,o=e.xPos,l=0;n=e.elements[l];l++)t.blockRendering.Types.isSpacer(n)&&(n.height=e.height),n.xPos=o,n.centerline=this.getElemCenterline_(e,n),o+=n.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++)t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks),this.recordElemPositions_(t);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},t.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},t.blockRendering.Debug.prototype.clearElems=function(){for(var e,n=0;e=this.debugElements_[n];n++)t.utils.dom.removeNode(e);this.debugElements_=[]},t.blockRendering.Debug.prototype.drawSpacerRow=function(e,n,o){if(t.blockRendering.Debug.config.rowSpacers){var l=Math.abs(e.height),i=0>e.height;i&&(n-=l),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:l,stroke:i?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawSpacerElem=function(e,n,o){if(t.blockRendering.Debug.config.elemSpacers){n=Math.abs(e.width);var l=0>e.width,i=l?e.xPos-n:e.xPos;o&&(i=-(i+n)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:i,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:l?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedElem=function(e,n){if(t.blockRendering.Debug.config.elems){var o=e.xPos;n&&(o=-(o+e.width)),n=e.centerline-e.height/2,this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isField(e)&&e.field instanceof t.FieldLabel&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}t.blockRendering.Types.isInput(e)&&t.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},t.blockRendering.Debug.prototype.drawConnection=function(e){if(t.blockRendering.Debug.config.connections){if(e.type==t.connectionTypes.INPUT_VALUE)var n=4,o="magenta",l="none";else e.type==t.connectionTypes.OUTPUT_VALUE?(n=2,l=o="magenta"):e.type==t.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",l="none"):e.type==t.connectionTypes.PREVIOUS_STATEMENT&&(n=2,l=o="goldenrod");this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:n,fill:l,stroke:o},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedRow=function(e,n,o){t.blockRendering.Debug.config.rows&&(this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isTopOrBottomRow(e)||t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},t.blockRendering.Debug.prototype.drawRowWithElements=function(e,n,o){for(var l=0,i=e.elements.length;l<i;l++){var a=e.elements[l];a?t.blockRendering.Types.isSpacer(a)?this.drawSpacerElem(a,e.height,o):this.drawRenderedElem(a,o):console.warn("A row has an undefined or null element.",e,a)}this.drawRenderedRow(e,n,o)},t.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(t.blockRendering.Debug.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),t.blockRendering.Debug.config.connectedBlockBounds&&(n=e.RTL?-e.widthWithChildren:0,this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockRenderDebug",x:n,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}},t.blockRendering.Debug.prototype.drawDebug=function(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var o,l=0,i=0;o=n.rows[i];i++)t.blockRendering.Types.isBetweenRowSpacer(o)?this.drawSpacerRow(o,l,n.RTL):this.drawRowWithElements(o,l,n.RTL),l+=o.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)},t.blockRendering.Debug.prototype.drawRender=function(e){t.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))},t.blockRendering.Drawer=function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var t,e=0;t=this.info_.hiddenIcons[e];e++)t.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var o,l=0;o=n[l];l++)t.blockRendering.Types.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(o)?this.outlinePath_+=o.shape.pathLeft:t.blockRendering.Types.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(o)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var l=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+n+t.utils.svgPaths.lineOnAxis("v",l)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var o,l=0,i="",a=n.length-1;o=n[a];a--)t.blockRendering.Types.isNextConnection(o)?i+=o.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(o)?i+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(o)?i+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(o)?(i+=this.constants_.OUTSIDE_CORNERS.bottomRight,l=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(o)&&(i+=t.utils.svgPaths.lineOnAxis("h",-1*o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-l),this.outlinePath_+=i},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,n=0;e=this.info_.rows[n];n++)for(var o,l=0;o=e.elements[l];l++)t.blockRendering.Types.isInlineInput(o)?this.drawInlineInput_(o):(t.blockRendering.Types.isIcon(o)||t.blockRendering.Types.isField(o))&&this.layoutField_(o)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var o=e.centerline-e.height/2,l=e.xPos,i="";this.info_.RTL&&(l=-(l+e.width),e.flipRtl&&(l+=e.width,i="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+l+","+o+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+l+","+o+")"+i),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,o=e.height,l=e.connectionOffsetY,i=e.connectionHeight+l;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-o/2)+t.utils.svgPaths.lineOnAxis("v",l)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",o-i)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,t.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},t.Events.MarkerMove=function(e,n,o,l){var i=e?e.workspace.id:void 0;l&&l.getType()==t.ASTNode.types.WORKSPACE&&(i=l.getLocation().id),t.Events.MarkerMove.superClass_.constructor.call(this,i),this.blockId=e?e.id:null,this.oldNode=o,this.newNode=l,this.isCursor=n},t.utils.object.inherits(t.Events.MarkerMove,t.Events.UiBase),t.Events.MarkerMove.prototype.type=t.Events.MARKER_MOVE,t.Events.MarkerMove.prototype.toJson=function(){var e=t.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},t.Events.MarkerMove.prototype.fromJson=function(e){t.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},t.registry.register(t.registry.Type.EVENT,t.Events.MARKER_MOVE,t.Events.MarkerMove),t.blockRendering.MarkerSvg=function(t,e,n){this.workspace_=t,this.marker_=n,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||t},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},t.blockRendering.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||n,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation().type;e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n==t.connectionTypes.INPUT_VALUE?this.showWithInput_(e):n==t.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,o=e.height,l=o*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,i=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var a=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,i,l,a)}else e.outputConnection?(a=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,o,a)):this.positionBlock_(n,i,l);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,n=t.getSize().height;this.positionRect_(0,0,e,n),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var n=0;e=e.getOffsetInBlock().y;var o=t.getHeightWidth().width;this.workspace_.RTL&&(n=-o),this.positionLine_(n,e,o),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),n=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var o=-this.constants_.CURSOR_STACK_PADDING/2,l=-this.constants_.CURSOR_STACK_PADDING/2,i=o;this.workspace_.RTL&&(i=-(n+o)),this.positionRect_(i,l,n,e),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,o){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,o=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(t,e,n){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",n),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,o){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-o.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,o,l){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+l.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(t,e,n,o){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",n),this.markerSvgRect_.setAttribute("height",o),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var o=n.getSourceBlock();e=new(t.Events.get(t.Events.MARKER_MOVE))(o,this.isCursor(),e,n),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},t.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},t.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,e){},t.IRegistrable=function(){},t.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,o){return o==t.connectionTypes.OUTPUT_VALUE?(o=n.outputConnection,e=t.Connection.getConnectionForOrphanedOutput(e,n)):(o=n.previousConnection,e=e.lastConnectionInStack()),!!e&&o.getConnectionChecker().canConnect(e,o,!1)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.connectionTypes.OUTPUT_VALUE||n.type==t.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(o,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=e.elements[o];o++)t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(n)&&0!=n.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,t.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,o=e.xPos+e.connectionWidth,l=e.centerline-e.height/2,i=e.width-e.connectionWidth,a=l+n;this.RTL_?(l=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(o-n,a)+t.utils.svgPaths.lineOnAxis("v",l)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",i)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,a)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-i)+t.utils.svgPaths.moveTo(o,l+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var l=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,l[0]))),l.length){for(var i=0;i<l.length-1;i++){e.elements.push(l[i]);var a=this.getInRowSpacing_(l[i],l[i+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,a))}e.elements.push(l[l.length-1]),e.endsWithElemSpacer()&&(a=this.getInRowSpacing_(l[l.length-1],null),n&&e.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,a)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset+e}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset-this.constants_.CORNER_RADIUS+e}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(o+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=t.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+e.height/2,o},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,n=0,o=null,l=this.rows.length-1;e=this.rows[l];l--)e.nextRightEdge=n,t.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),o&&o.hasStatement&&e.width<o.width?e.nextRightEdge=o.width:n=e.width,o=e);for(l=n=0;e=this.rows[l];l++)e.hasStatement?n=this.getDesiredRowWidth_(e):t.blockRendering.Types.isSpacer(e)?e.width=Math.max(n,e.nextRightEdge):(0<(n=Math.max(n,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,n),n=e.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var l=n-this.topRow.ascenderHeight;t==this.bottomRow&&l<this.constants_.MIN_BLOCK_HEIGHT&&(l=this.constants_.MIN_BLOCK_HEIGHT-l,this.bottomRow.height+=l,n+=l),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(n,t.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e+n)-n,l=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-o-n,e-o)),i=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),a=t.utils.svgPaths.moveBy(o,-o)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-o,o+n));return{width:e+n,height:e,pathTop:function(t){return t?l:""},pathBottom:function(t){return t?i:a}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e-n)+n,l=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-o,-o+n)),i=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),a=-o,s=t.utils.svgPaths.moveBy(o,a)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-o+n,-a-e));return{height:e,topLeft:function(t){return t?l:i},bottomLeft:function(){return s}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),l=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),i=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),a=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(t){return t?o:i},pathDown:function(t){return t?l:a}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),o=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(t){return t?n:o}}},t.geras.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},t.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var l=e.elements;e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,l[0])));for(var i=0;i<l.length-1;i++){e.elements.push(l[i]);var a=this.getInRowSpacing_(l[i],l[i+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,a))}e.elements.push(l[l.length-1]),e.endsWithElemSpacer()&&(a=this.getInRowSpacing_(l[l.length-1],null),n&&e.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,a)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var l=n-this.topRow.ascenderHeight;t==this.bottomRow&&l<this.constants_.MIN_BLOCK_HEIGHT&&(l=this.constants_.MIN_BLOCK_HEIGHT-l,this.bottomRow.height+=l,n+=l),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(e,o,l){var i=e/2;return i=i>n?n:i,l=l?-1:1,e=(o?-1:1)*e/2,t.utils.svgPaths.lineTo(-l*i,e)+t.utils.svgPaths.lineTo(l*i,e)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(e,n,l){var i=e>o?e-o:0;return e=(e>o?o:e)/2,t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?-1:1)*e,(n?-1:1)*e))+t.utils.svgPaths.lineOnAxis("v",(l?1:-1)*i)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?1:-1)*e,(n?-1:1)*e))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(e,o,l){return e-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?-1:1)*n,(o?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(l?1:-1)*e)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?1:-1)*n,(o?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(t){return n},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/2,0),t.utils.svgPaths.point(e*i*3/4,s/2),t.utils.svgPaths.point(e*i,s)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*i,a)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/4,s/2),t.utils.svgPaths.point(e*i/2,s),t.utils.svgPaths.point(e*i,s)])+t.utils.svgPaths.lineOnAxis("h",e*l)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/2,0),t.utils.svgPaths.point(e*i*3/4,-s/2),t.utils.svgPaths.point(e*i,-s)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*i,-a)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*i/4,-s/2),t.utils.svgPaths.point(e*i/2,-s),t.utils.svgPaths.point(e*i,-s)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,l=n/3,i=l/3,a=o/2,s=a/2,r=e(1),c=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:r,pathRight:c}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,o){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},t.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,l=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return l||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),l&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var o=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.inputTypes.DUMMY&&n.hasDummyInput&&n.align==t.constants.ALIGN.LEFT&&e.align==t.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var o,l,i=0;(l=e.elements[i])&&(t.blockRendering.Types.isSpacer(l)&&(o=l),!t.blockRendering.Types.isField(l)||l.parentInput!=e.rightAlignedDummyInput);i++);if(o)return o.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,o=2;o<this.rows.length-1;o+=2){var l=this.rows[o-1],i=this.rows[o],a=this.rows[o+1];if(l=2==o?!!this.topRow.hasPreviousConnection:!!l.followsStatement,a=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,t.blockRendering.Types.isInputRow(i)&&i.hasStatement)i.measure(),n=i.width-i.getLastInput().width+e;else if(l&&(2==o||a)&&t.blockRendering.Types.isInputRow(i)&&!i.hasStatement){a=i.xPos,l=null;for(var s,r=0;s=i.elements[r];r++)t.blockRendering.Types.isSpacer(s)&&(l=s),!(l&&(t.blockRendering.Types.isField(s)||t.blockRendering.Types.isInput(s))&&a<n)||t.blockRendering.Types.isField(s)&&(s.field instanceof t.FieldLabel||s.field instanceof t.FieldImage)||(l.width+=n-a),a+=s.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t,e=0,n=0;t=this.rows[n];n++)t.yPos=e,e+=t.height;this.height=e,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=this.outputConnection.shape.height(n),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=n,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=n,this.width+=n+t,this.widthWithChildren+=n+t}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e,n=0,o=0;e=this.rows[o];o++)if(t.blockRendering.Types.isInputRow(e)){n=e.elements[e.elements.length-2];var l=this.getNegativeSpacing_(e.elements[1]),i=this.getNegativeSpacing_(n);n=l+i;var a=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-n<a&&(l=(n=this.width-a)/2,i=n/2),e.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-l)),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-i))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,o=0;e=this.rows[o];o++)t.blockRendering.Types.isTopOrBottomRow(e)&&(e.elements[1].width-=n,e.elements[1].widthWithConnectedBlocks-=n),e.width-=n,e.widthWithConnectedBlocks-=n}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,l=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case l.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n-(o=this.height/2>o?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(t.blockRendering.Types.isInlineInput(e)){var i=e.connectedBlock;return e=i?i.pathObject.outputShapeType:e.shape.type,i&&i.outputConnection&&(i.statementInputCount||i.nextConnection)||o==l.SHAPES.HEXAGONAL&&o!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return t.blockRendering.Types.isField(e)?o==l.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*l.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],o=this.rows[e],l=this.rows[e+1],i=2==e,a=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!l.precedesStatement;if(i?this.topRow.hasPreviousConnection:n.followsStatement){var s=3==o.elements.length&&(o.elements[1].field instanceof t.FieldLabel||o.elements[1].field instanceof t.FieldImage);if(!i&&s)n.height-=this.constants_.SMALL_PADDING,l.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(i||a){if(a){for(i=!1,a=0;s=o.elements[a];a++)if(t.blockRendering.Types.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){i=!0;break}i&&(n.height-=this.constants_.SMALL_PADDING,l.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;n=e.height-(e.precedesStatement?n:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<n?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var o=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",o)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-o)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,l=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,i=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+l+t.utils.svgPaths.lineOnAxis("v",i)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.MarkerSvg=function(e,n,o){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.PathObject=function(e,n,o){t.zelos.PathObject.superClass_.constructor.call(this,e,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),e=0;for(var n,o=Object.keys(this.outlines_);n=o[e];e++)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){t.zelos.PathObject.superClass_.flipRTL.call(this);for(var e,n=0,o=Object.keys(this.outlines_);e=o[n];n++)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var t,e=0,n=Object.keys(this.outlines_);t=n[e];e++)this.remainingOutlines_[t]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t,e=0,n=Object.keys(this.remainingOutlines_);t=n[e];e++)this.removeOutlinePath_(t);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.connectionTypes.INPUT_VALUE&&e.type!==t.connectionTypes.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.connectionTypes.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,o)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.M5Stack={},t.Themes.M5Stack.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"#2EC4B6"},logic_blocks:{colourPrimary:"#22559C"},loop_blocks:{colourPrimary:"#58C9B9"},math_blocks:{colourPrimary:"#30A9DE"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"#F17F42"},variable_blocks:{colourPrimary:"#791E94"},variable_dynamic_blocks:{colourPrimary:"#791E94"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.M5Stack.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"#2EC4B6"},logic_category:{colour:"#22559C"},loop_category:{colour:"#58C9B9"},math_category:{colour:"#30A9DE"},procedure_category:{colour:"290"},text_category:{colour:"#F17F42"},variable_category:{colour:"#791E94"},variable_dynamic_category:{colour:"#791E94"}},t.Themes.M5Stack=new t.Theme("m5stack",t.Themes.M5Stack.defaultBlockStyles,t.Themes.M5Stack.categoryStyles),t.requires={},t}),function(t,e){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],e):"object"==typeof exports?module.exports=e(require("./blockly_compressed.js")):t.Blockly.Blocks=e(t.Blockly)}(this,function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Blocks.lists={},t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}",keyword:["lists","list","empty","create"]},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}",keyword:["lists","list","repeat"]},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}",keyword:["lists","list","reverse"]},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}",keyword:["lists","list","empty"]},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}",keyword:["lists","list","length"]}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},attrs:{keyword:["lists","list","create"]},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("lists_create_with_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var l=t.newBlock("lists_create_with_item");l.initSvg(),n.connect(l.previousConnection),n=l.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n&&!n.isInsertionMarker();)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var e=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(e),"END"),this.setInputsInline(!0);var n=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},attrs:{keyword:["lists","list","index"]}},t.Blocks.lists_getIndex={init:function(){var e=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),e=new t.FieldDropdown(e,function(t){t="REMOVE"==t,this.getSourceBlock().updateStatement_(t)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var n=this;this.setTooltip(function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),l="";switch(e+" "+o){case"GET FROM_START":case"GET FROM_END":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":l=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(l+="  "+("FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),l})},attrs:{keyword:["lists","list","index"]},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);var n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){var e="true"==t.getAttribute("statement");this.updateStatement_(e),t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateStatement_:function(t){t!=!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}});this.getInput("AT").appendField(n,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var e=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var n=this;this.setTooltip(function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),l="";switch(e+" "+o){case"SET FROM_START":case"SET FROM_END":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":l=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(l+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),l})},attrs:{keyword:["lists","list","index"]},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},attrs:{keyword:["lists","list","sublist"]},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var l=this.getSourceBlock();return l.updateAt_(e,o),l.setFieldValue(t,"WHERE"+e),null}});this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var e=this,n=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(t){e.updateType_(t)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(n,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var n=e.getFieldValue("MODE");if("SPLIT"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+n)})},attrs:{keyword:["lists","list"]},updateType_:function(t){if(this.getFieldValue("MODE")!=t){var e=this.getInput("INPUT").connection;e.setShadowDom(null);var n=e.targetBlock();n&&(e.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}",keyword:["logic","boolean"]},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"],keyword:["logic","if"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"],keyword:["logic","if","else"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"],keyword:["logic","compare"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"],keyword:["logic","operation"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}",keyword:["logic","not"]},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}",keyword:["logic","null","negate"]},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"],keyword:["logic","test","ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=t.utils.xml.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(t){this.elseifCount_=parseInt(t.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(t.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(t){var e=t.newBlock("controls_if_if");e.initSvg();for(var n=e.nextConnection,o=1;o<=this.elseifCount_;o++){var l=t.newBlock("controls_if_elseif");l.initSvg(),n.connect(l.previousConnection),n=l.nextConnection}return this.elseCount_&&((t=t.newBlock("controls_if_else")).initSvg(),n.connect(t.previousConnection)),e},compose:function(t){t=t.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var e=[null],n=[null],o=null;t&&!t.isInsertionMarker();){switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),n.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=t.statementConnection_;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(e,n,o)},saveConnections:function(t){t=t.nextConnection.targetBlock();for(var e=1;t;){switch(t.type){case"controls_if_elseif":var n=this.getInput("IF"+e),o=this.getInput("DO"+e);t.valueConnection_=n&&n.connection.targetConnection,t.statementConnection_=o&&o.connection.targetConnection,e++;break;case"controls_if_else":o=this.getInput("ELSE"),t.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}},rebuildShape_:function(){var t=[null],e=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var l=this.getInput("IF"+o),i=this.getInput("DO"+o);t.push(l.connection.targetConnection),e.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(t,e,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,n,o){for(var l=1;l<=this.elseifCount_;l++)t.Mutator.reconnect(e[l],this,"IF"+l),t.Mutator.reconnect(n[l],this,"DO"+l);t.Mutator.reconnect(o,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A"),o=this.getInputTargetBlock("B");n&&o&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,o.outputConnection)&&(t.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(n=this.prevBlocks_[1])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var n=this.getInputTargetBlock("THEN"),o=this.getInputTargetBlock("ELSE"),l=this.outputConnection.targetConnection;if((n||o)&&l)for(var i=0;2>i;i++){var a=1==i?n:o;a&&!a.workspace.connectionChecker.doTypeChecks(a.outputConnection,l)&&(t.Events.setGroup(e.group),l===this.prevParentConnection_?(this.unplug(),l.getSourceBlock().bumpNeighbours()):(a.unplug(),a.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=l}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}",keyword:["loop","loops","repeat"]},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"],keyword:["loop","loops","while","repeat"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"],keyword:["loop","loops","for"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"],keyword:["loop","loops","forEach"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"],keyword:["loop","loops"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),o=n.name;if(!this.isCollapsed()&&null!=o){var l={enabled:!0};l.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o),n=t.Variables.generateVariableFieldDom(n),(o=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.appendChild(n),l.callback=t.ContextMenu.callbackFactory(this,o),e.push(l)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(e){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()&&e.type==t.Events.BLOCK_MOVE){var n=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(n?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var o=t.Events.getGroup();t.Events.setGroup(e.group),this.setEnabled(n),t.Events.setGroup(o)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"],keyword:["math","number"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"],["%","REMAINDER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"],keyword:["math","arithmetic"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"],keyword:["math"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"],keyword:["math","sin"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}",keyword:["math","PI"]},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator",keyword:["math","even"]},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}",keyword:["math","round"]},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"],keyword:["math","list"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}",keyword:["math"]},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}",keyword:["math","random","int"]},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}",keyword:["math","random","float"]},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"},{type:"math_slider",message0:"%1",args0:[{type:"field_slider",name:"NUM",value:10}],inputsInline:!0,output:"Number",style:"math_blocks"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",REMAINDER:"%{BKY_MATH_MODULO_TOOLTIP}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",n),e},domToMutation:function(t){t="true"==t.getAttribute("divisor_input"),this.updateShape_(t)},updateShape_:function(t){var e=this.getInput("DIVISOR");t?e||this.appendValueInput("DIVISOR").setCheck("Number"):e&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(t){t="DIVISIBLE_BY"==t,this.getSourceBlock().updateShape_(t)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(t){"MODE"==t?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(t){this.updateType_(t.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(t){this.updateType_(t)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var e=t.Procedures.findLegalName("",this);(e=new t.FieldTextInput(e,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){var e="";this.arguments_.length&&(e=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(e){var n=t.utils.xml.createElement("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(var o=0;o<this.argumentVarModels_.length;o++){var l=t.utils.xml.createElement("arg"),i=this.argumentVarModels_[o];l.setAttribute("name",i.name),l.setAttribute("varid",i.getId()),e&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[o]),n.appendChild(l)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(var n,o=0;n=e.childNodes[o];o++)if("arg"==n.nodeName.toLowerCase()){var l=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(l),null!=(n=t.Variables.getOrCreateVariablePackage(this.workspace,n,l,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+l+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var n=t.utils.xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var o=t.utils.xml.createElement("statement");o.setAttribute("name","STACK"),n.appendChild(o);for(var l=0;l<this.arguments_.length;l++){var i=t.utils.xml.createElement("block");i.setAttribute("type","procedures_mutatorarg");var a=t.utils.xml.createElement("field");a.setAttribute("name","NAME");var s=t.utils.xml.createTextNode(this.arguments_[l]);a.appendChild(s),i.appendChild(a),a=t.utils.xml.createElement("next"),i.appendChild(a),o.appendChild(i),o=a}return e=t.Xml.domToBlock(n,e),"procedures_defreturn"==this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var n=e.getInputTargetBlock("STACK");n&&!n.isInsertionMarker();){var o=n.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"==e,this.hasStatements_!=e)&&(e?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var o=this.workspace.getVariableById(e);if(""==o.type){o=o.name,n=this.workspace.getVariableById(n);for(var l=!1,i=0;i<this.argumentVarModels_.length;i++)this.argumentVarModels_[i].getId()==e&&(this.arguments_[i]=n.name,this.argumentVarModels_[i]=n,l=!0);l&&(this.displayRenamedVar_(o,n.name),t.Procedures.mutateCallers(this))}},updateVarName:function(e){for(var n=e.name,o=!1,l=0;l<this.argumentVarModels_.length;l++)if(this.argumentVarModels_[l].getId()==e.getId()){var i=this.arguments_[l];this.arguments_[l]=n,o=!0}o&&(this.displayRenamedVar_(i,n),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(e,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var o,l=this.mutator.workspace_.getAllBlocks(!1),i=0;o=l[i];i++)"procedures_mutatorarg"==o.type&&t.Names.equals(e,o.getFieldValue("NAME"))&&o.setFieldValue(n,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var n={enabled:!0},o=this.getFieldValue("NAME");n.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",o);var l=t.utils.xml.createElement("mutation");for(l.setAttribute("name",o),o=0;o<this.arguments_.length;o++){var i=t.utils.xml.createElement("arg");i.setAttribute("name",this.arguments_[o]),l.appendChild(i)}if((o=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),o.appendChild(l),n.callback=t.ContextMenu.callbackFactory(this,o),e.push(n),!this.isCollapsed())for(o=0;o<this.argumentVarModels_.length;o++)n={enabled:!0},l=this.argumentVarModels_[o],n.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",l.name),l=t.Variables.generateVariableFieldDom(l),(i=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.appendChild(l),n.callback=t.ContextMenu.callbackFactory(this,i),e.push(n)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var e=t.Procedures.findLegalName("",this);(e=new t.FieldTextInput(e,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var e=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var n=this.getSourceBlock(),o=t.Mutator.findParentWs(n.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var l=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),i=e.toLowerCase(),a=0;a<l.length;a++)if(l[a].id!=this.getSourceBlock().id){var s=l[a].getFieldValue("NAME");if(s&&s.toLowerCase()==i)return null}return n.isInFlyout||((n=o.getVariable(e,""))&&n.name!=e&&o.renameVariableById(n.getId(),e),n||(n=o.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n)),e},deleteIntermediateVars_:function(e){var n=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(var o=0;o<this.createdVariables_.length;o++){var l=this.createdVariables_[o];l.name!=e&&n.deleteVariableById(l.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var o=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),l=o&&o.mutator&&o.mutator.isVisible();if(l||(this.quarkConnections_={},this.quarkIds_=null),n)if(e.join("\n")==this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!=e.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),o=this.rendered,this.rendered=!1;for(var i=0;i<this.arguments_.length;i++){var a=this.getInput("ARG"+i);a&&(a=a.connection.targetConnection,this.quarkConnections_[this.quarkIds_[i]]=a,l&&a&&-1==n.indexOf(this.quarkIds_[i])&&(a.disconnect(),a.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],i=0;i<this.arguments_.length;i++)e=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[i],""),this.argumentVarModels_.push(e);if(this.updateShape_(),this.quarkIds_=n)for(i=0;i<this.arguments_.length;i++)(n=this.quarkIds_[i])in this.quarkConnections_&&(a=this.quarkConnections_[n],t.Mutator.reconnect(a,this,"ARG"+i)||delete this.quarkConnections_[n]);(this.rendered=o)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.Events.disable();try{n.setValue(this.arguments_[e])}finally{t.Events.enable()}}else n=new t.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(t.ALIGN_RIGHT).appendField(n,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var n=0;n<this.arguments_.length;n++){var o=t.utils.xml.createElement("arg");o.setAttribute("name",this.arguments_[n]),e.appendChild(o)}return e},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e),e=[];for(var n,o=[],l=0;n=t.childNodes[l];l++)"arg"==n.nodeName.toLowerCase()&&(e.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(e,o)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type==t.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=t.Procedures.getDefinition(n,this.workspace))||n.type==this.defType_&&JSON.stringify(n.getVars())==JSON.stringify(this.arguments_)||(n=null),!n){t.Events.setGroup(e.group),e=t.utils.xml.createElement("xml"),(n=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var o=this.getRelativeToSurfaceXY(),l=o.y+2*t.SNAP_RADIUS;n.setAttribute("x",o.x+t.SNAP_RADIUS*(this.RTL?-1:1)),n.setAttribute("y",l),o=this.mutationToDom(),n.appendChild(o),(o=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(l=this.getProcedureCall())||(l=t.Procedures.findLegalName("",this),this.renameProcedure("",l)),o.appendChild(t.utils.xml.createTextNode(l)),n.appendChild(o),e.appendChild(n),t.Xml.domToWorkspace(e,this.workspace),t.Events.setGroup(!1)}}else e.type==t.Events.BLOCK_DELETE?(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))||(t.Events.setGroup(e.group),this.dispose(!0),t.Events.setGroup(!1))):e.type==t.Events.CHANGE&&"disabled"==e.element&&(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))&&n.id==e.blockId&&((n=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n={enabled:!0};n.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var o=this.getProcedureCall(),l=this.workspace;n.callback=function(){var e=t.Procedures.getDefinition(o,l);e&&(l.centerOnBlock(e.id),e.select())},e.push(n)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()){e=!1;var n=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(n.type)){e=!0;break}n=n.getSurroundParent()}while(n);e?("procedures_defnoreturn"==n.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=n.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"],keyword:["text"]},{type:"text_unescaped",message0:"%1(unescaped)",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"],keyword:["text"]},{type:"text_password",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_password_btn","parent_tooltip_when_inline"],keyword:["text"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}",keyword:["text","length"]},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}",keyword:["text","empty"]},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator",keyword:["text"]},{type:"text_copy",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",keyword:["text"]}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2==e&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var l=this.getSourceBlock();return l.updateAt_(e,o),l.setFieldValue(t,"WHERE"+e),null}});this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var e=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)},attrs:{keyword:["text","uppercase"]}},t.Blocks.text_trim={init:function(){var e=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)},attrs:{keyword:["text","trim"]}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})},attrs:{keyword:["text","print"]}},t.Blocks.text_prompt_ext={init:function(){var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var n=this;e=new t.FieldDropdown(e,function(t){n.updateType_(t)}),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},attrs:{keyword:["text","prompt"]},updateType_:function(t){this.outputConnection.setCheck("NUMBER"==t?"Number":"String")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],n=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new t.FieldDropdown(e,function(t){n.updateType_(t)}),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},attrs:{keyword:["text","prompt"]},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})},attrs:{keyword:["text","count"]}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})},attrs:{keyword:["text","replace"]}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})},attrs:{keyword:["text","reverse"]}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,l=0;o=e.fieldRow[l];l++)if(t==o.name)return e.insertFieldAt(l,this.newQuote_(!0)),void e.insertFieldAt(l+2,this.newQuote_(!1));console.warn('field named "'+t+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new t.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"\u201c":"\u201d")}},t.Constants.Text.PASSWORD_BTN_MIXIN=Object.assign({},t.Constants.Text.QUOTE_IMAGE_MIXIN,{IMAGE_PWD_HIDE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAGDhJREFUeF7tnQuUHFWZx/9fdWa6GiGKx/XoCroqQd11UYKaBRSSdPVMVweVyMsHri74QgR8govukXVlNaKIPIygPFxlYRFN1pDunpnqJAiCDwRUwEcQ1ge+OKgJYFdn0vXtuZMZnIR5dN26t6er66tzOMkh9/vf7/vd/ndVddW9lyCHEBACsxIgYSMEhMDsBMQg8ukQAnMQEIPIx0MIiEHkMyAE9AjIGUSPm0RlhIAYJCMDLWXqERCD6HGTqIwQEINkZKClTD0CYhA9bhKVEQJikIwMtJSpR0AMosdNojJCQAySkYGWMvUIiEH0uElURgiIQTIy0FKmHgExiB43icoIATFIRgZaytQjIAbR4yZRGSEgBsnIQEuZegTEIHrcJCojBMQgGRloKVOPgBhEj5tEZYSAGCQjAy1l6hEQg+hxk6iMEBCDZGSgpUw9AmIQPW4SlRECYpCMDLSUqUdADKLHTaIyQkAMkpGBljL1CIhB9LhJVEYIiEEyMtBSph4BMYgeN4nKCAExSEYGWsrUIyAG0eMmURkhIAbJyEBLmXoExCB63CQqIwTEIBkZaClTj4AYRI+bRGWEgBgkIwMtZeoREIPocZOojBAQg2RkoKVMPQJiED1uEpURAmKQjAy0lKlHQAyix02iMkJADJKRgZYy9QiIQfS4SVRGCIhBMjLQUqYeATGIHjeJyggBMUhGBlrK1CMgBtHjJlEZISAGychAS5l6BMQgetwkKiMExCAZGWgpU4+AGESPm0RlhIAYJCMDLWXqERCD6HGTqIwQEINkZKClTD0CYhA9bhKVEQJikIwMtJSpR0AMosdNojJCQAySkYGWMvUIiEH0uElURgiIQTIy0FKmHgExiB43icoIATFIRgZaytQjIAbR4yZRGSEgBsnIQEuZegSMGGRjMV8iwvMIzoFEfACYfwo4tzoU3TE01tqql5pECYGZCVR9LHZ2uC+LCMvAtIzAD7FDPyHgPnKajfII/miKXWKD1D33Ywx8aNaEmC7xG813mUpYdLJNoFrKD4HpYgKWzESCgbuI6Vy/0bzWBCltg9SKhUNBfEsnSTBjEzNOWrUp/EUn7aWNEJiJwIiXPyUCfa4TOgRcWQ7CkzppO1cbfYN47qMA9uo4AcYmvxEWO24vDYXANAK1knsiGF+OA4UZ/1lphLNf3XQgpmWQWtG9BoTXdqC/WxMm+mBlrLkmbpy0zzaBkaG9n8rRzhsZeH5sEoy3+I3w8thxkwGxDTJayi9pM/1Mq0PGwzmnfcTQ2PidWvESlEkCtVLhs2A+Xat4wt3+WPhCrVgAsQ1S9wrHM/h/dDsE6HN+0DxVP14is0SgVhw8COTcDiCnXfdOPNvfEv6fTryGQfKfYdC7dTqbjAnbiJYeFez4cQINCc0IgWoxfwERnZGkXAKdUA6a1+loxDZIzXM3AqjodPbXGD7PD1pnJtOQ6H4nUF2Zfy45pM4ei5PUSkRnlcean9TR0DBI/pMAfUCns2kxD40DS18VhL9MqCPhfUygWnTPJcLZyUukY/yg+XUdnfgGKbpvA+FSnc72iDnHD8J/N6AjEn1IYOPyJzyNcu07iPC0xOVx9CK/seOHOjqxDVIvuh4TxnQ6mx5DwC8X8cBSr/HwQ0m1JL7/CNSL7tlMONdAZb97+NHwOcffiqaOVmyDqE5qnnszgMN1Otw9hs70g+Z5yXVEoZ8IqHetaNxV9x7PTVoXM3+y0midpaujZZB6MX8qE12s2+lUHAE/zu8Ml67YgjCplsT3D4F6KX8GM12QtCICxiOOXlxp7LhHV0vLIDetwr6PtNwfAXiGbsePxTGf6jdaHb1fk7gvEeh5Atcdh9w+fyrcDvBBiZMlXO6PhW9JoqNlENVh1cufR6D3J+lcxRLRD4hyQ8Ojj/whqZbEp59AvVR4HzN/ykQlxDii3AhvSqKVwCADBxNy6jox+cG4ym+E/5JcSBTSTKC60l1JDkYTPTWfBMDg9ZWgtTopD22DTJxFivmvEtGxSZOYiGc+w2+0LjSiJSKpI7B5OZ4ULnLVr6MvMZG8w9Hq4caO9Um1EhmkVhpcDXa0HsDMkLi6US/5Qah+IZMjYwSqnnsZAW81VPZNfhAeYUIrkUFUAjXP/S6AlxpJhnALUTg0PAo110SOjBCol/LvYKa1xspN+Ir79DwSG6RaLJxAxEamN+661JIpusY+KCkQ2jhUWOZErO47Er1vNa3UzX4QrjRVemKDTJ5F/gvAG00lBYPfAMZyEiHjBG47BAMP7jtx33GkKXECH1UOWuqFWiOHEYNUi4N/T+Soe4d9jWQFPMRolyrB+B2G9ESmBwlUvfxnKNnUid2qYuDKioF56EYvsabE6sXCmUxsbDotEcbKY+FQD46rpGSAQL3kvpEZ6srD1LGd2tFh5c077jYlqHSMnEGmEqp57jcBvMJggl/1g/B4g3oi1QME6sV8mYlqJlNhwkcqY+FHTWqaN0gpXwGTseu/yWLFJKZHfQH14iwX1Xma9EPHaR5m49dPo2cQVVDNK1wC8Ds7L66jlmKSjjD1dqPJe1Wjl0CqYgbeVAlCk5drj4E0bpBveO4zB4BNJl5V3mO4xSS9/fmfM7sNKwvPWOTwr42XwLzOb7ReY1x3UtC4QZRutTh4NJGzznTSDHy+EoSnmNYVPbsERobwhChyHzHdCwFbycHw8Gh4v2ntKT0rBtl1qeV+GMB/WEhcpupagGpLcnLy0zYr+sSv9sda37CibfMMMpVwzXPV+lnmf4UifMkfC99sE4xoJydQ8/LDANWTKz1egYEPV4LQxJTcOdOzdgZRvY4MFfZvRzxCwAtMQ2LGNx/5S1jWnWtsOh/R251AzXM/AuAcK1wI1/pj4eusaO8hatUgu0yS96OIqjaKUQs/MEev1F2xwkZOoqkm07lXEGBnfg/j7p1Mw6/c1HygG6ytG0QVofeUnXd7jqkSVf9n5kN/3aNuQM5KH+p+A+OFq9X7ULZqjpj9VY2Wlcu2mXLuikFUx7Wi+2UQTrQFLsnqebZyypJu1Rs42EFuLQPLbNXNoA9UgqaR6bid5tg1g/A5cOo35a8HUeJpkHMUN+o4WDM8GqrnMHJ0gUDVRx473LOIoJaSfYKtLomxptwIP2hLf9Zrk252qGA644Xr2eIpWNVD4AvaOxetWbXl0d91s76s9VUtFo4F8VlkaJrs7B9SurgcNE9bCL5dO4NMFbd5OfYOF7nXAxi2XPDPCVhTDsIvWO4nc/LqlRGQo4zxz7aLJ+CKchCebLufnjiDTCVxw8uxby7vXg+CsZlfswIk2pAD1gyNNb+1UJD7qd9qqXAWeOKsYWruz+x4uvhzbk8ZRCUzUsp/NmLS2zVI4xNHwNocorWlYIda8E6OmASqnqs2xDzF9uXU49IiOt4fa341ZrrGmnf9EktlXi3m1xDRQuwP0iLw2kWMtV6jpbeNnDH06RCqFt03gCaMYWAtZs2aF9AkXTdIzTOyv4gm6cfCthNj7QBjbVG2pp6R5cQNOPgU6sZlcCejuUAm6apB6sX8p5jofZ3w6FKbB5VRKIerbL4R2qVajHRTXZl/JYiUMXwjgiZFFsAkXTNIzcufD9B7TPIyqNViYH2OaV17sLm+UkPLoHbPS9WHB17E7dzRYF4Nohf1dMJdNklXDGJiI8YuDtp9IF4PpnX9vMrjhuX7PCW3aHw1AUcn33Oyi6OjuuqiSawbpOoVLiSwlYc8c7+fZWTQblZGWUTtWqkPduW97lAU9tk7v4KYjmZAvdHwFCOUFkKkSyaxapC6V7iIwe9aCH6m+2TwnQ6cm9vATTTQrFdq2G66Dxt6NwwNvpDadGSO6AgGVgD4Gxv9LIhmF0xizSCWFm9YkHF4XKeECIxvMSNwmOrlTU21PnFPHOoh7EC+UIzAHghFAAf0RGK2krBsEisGqXruWgLeYYtJr+ky0CTQViC6lxn3Og5tVX8ORrS1aGHewjmAs2xFfgkTDiRylgB8IIAlAA4EYb9e42M9H4smMW6QmueqLaLfZgmKWvXd2hujNnL+q3n4twRsY8Z2Am+LQNsdh7cxaBuYtoN4G8B5wHkiomgxyFkM8GIQLUbE6u9PnPg78KxUnhXU1uGMt9tgPKFpySRGDVIrul8AIdGecLMCJNxNO6MTOEdvhoGt36wNlAjvSWAERJf6Y811tVLhODBfZw2RBZMYM0it5H4RDDtvXRLu5ig6fmq30nrRfUVEfAaBjrEGW4STEvgNmNc4udbl01c8TJtJjBik7rlXsK05yHuYY/qo1b3CMQw+w/B6wEk/GJmPZ+AL1OZP+5tbP50JRppMktggtZJ7FRhvsvKpmMMc0/sb8fKnRCBllOdZyUNEOyLAhDEQX1QZbW2YLyAtJklkkJrnmt04ZzrVDs0xFTIytPdT2+2dp5KD08BdmKsw3ycgS/9O+C4zLom7Pm4aTKJtkKrnfoWAN1j5HMQ0x/QcNnqD/+iwcyrI4i8mVopOpehPwLz2O43WxecAkU4FvW4SLYPUPfdqBl6vA2TemATm2O3+pOh6ID6VQepdIznMEvgNgLVNHlj7msbDDyWV7mWTxDZIreReA8Zrk0KZMd6QOaa06yVXPe0+zEquGRcl4KRyEF5pCkOvmiSWQayttasoGzbHRq/wegd8takBFJ3HEdjiB6F6t8vY0Ysm6dggtWL+0yB6rzEa04UMm0NJ1zxXbfFVtpKviE4QINCx5aD5NZM4LJvkj44THTk8uuOuTnPuyCDVUn6ImEY6FY3VzoI56l5+FYNuiJWHNI5NgMD/Ww5axu/xrJok5kopHRmkXnJvZMYRsQnOF2DBHKrLuudey8AJ83Uv/56cQMQ8tKrRUnudGz1smiQCTlrV4f3TvAbZOFRY5kT8baPV7zo/7/b6iCn9mue+HMBNJvTUCo08sck9HWxCr1c0Jh7oRcgTGfnS+7IfhFYWkLNoko6385vXIFUvfxqBLjQ6uJbMoXKseu5lBLw1ab4M3FYJwpdO6exanNk5nAlHgunIlE082kKMTW2nvWHV2PidqqaNxXzJIRpNyknFRw7906rR5ndMaO2pYcUkjF/7jXD/TvKd1yA1z/0KTD4QtGiOWnHwICbnewQMdlL8XG2Yo9WVxo71s7VRmwNFwOEU4XAGHwLC/uAemItB+DUY9wLYAuBGPwjVnzMeNS9/u5GzI9MlfqNpbeaoDZNQjpeUR1qK05zH/AYpuleCYGa7M4vmUFXWvPx5Jl6FZ+C+ShA+dz54e/77xErnrfx+5ND+ExOXJgxD6ptqPyCa+nvSKa9/IMavQPwrhvMrAOq/n4Pb9z78lx1b4+y4VfMKrwE48a9QzHiYBvilfn3mlxPjcpypvWmTmDTIySB8MXGRls2xcaX7LMfB90xc+jBwciUIr0hc8x4CNc9dDmBzQt0Vc50V4mrXPFd9i8b+MnhcP4SP+2Ph2XH7j9PemElMXmKpa29C7vY4hcwAz8oN+fR+TO2qS8Dvy0H4tET1znpJ04MGKbpvAuGqpPUy8EBhZ+4lKyxvOWHIJOZu0nddurg3Q3dtVstnDpXf5uV4UrjIvc3EN6HNXYx68QwyOb6/B/DUpCYB8K9+EH7CgM6cEklNwowTK42wo7cs5r0HmQBYLBwK4ltiF94Fc+zKL386iD4bO7/HBzziB+E+BnRmlOhVgxj8pfKeJz4avuSwW9G0xXBKN4FJzvGD8N87za8jg+z6lim8B+DzOxW29Zxjz/4nVvjw8t8DaGnHuc3W0PJ1dK8aZBdD9xEAhaQMHfA7h4PW2qQ6ncRPmuRyAB1/qflB2PFnXuUQq/ENKwuH5RxW7zip1TVmPdSUS45w7qourJxeM3QNPfFzvhMunj5/upNBitOmVw2iaqgW3bOJcG6cemZp+20/CA81oNORxMhQYVkUsbqsUz+AzPWZHK0EYexdzWIZRPVeH97r6dxuXwyQeoj22MMWAv+Zme4hovNNv8A2V+E1z1W/Cs0JpxPSDFxWCUJ7y9LsupfruV+xpthM3sf9qRNW87Uh0BvKQfO/52tn6t83L8eiVi7/CSZS209Pn3a9A+C7wM7VfqPZ+dXPtMRiG2R6UfXhxU9u8/iSfJsf9BrhfaYK7lRnpDh4dETOuk7bz9VuHHjWq4Lwlya0ZtPoZYOonGue+3EAJnaSHfU1vq1NsJ9Yf3ivwSVtwvgDf9px79u/j/EkuokMkqRjE7E1L78eoFcb0LrGD0I7MySnJdfrBhnz3GfuBH5hgKfaafioctDaaEJrITVSa5DqSnclOWiYgBdR++Cpd5RM6KX1DLLrLFK4BOB3JuZAfL0/1jousc4CC6TWIHXP/RIb2IbY1pyGmca1188gKueJRS/g/NDQ5/IVad9jJZUGGRna65AoitSDwcQHOyhWRsNNiYU6EEiDQSbvRcws50S43B8L7SxF2wFvE01SaZCqV7iIzOw7EvhBWDIBshONtBikWiocTszq7Ymkx84I0dJVKd56O3UG2VDKLxlgup2BvZOOHjMdV2k0r0+q02l8Wgyi6ql7+XVGlkwiPt8fa/XSxq2dDtdEu9QZpO65H2PgQ7GqnKExEW4pj4Vd3fs7TQaprsz75FA1MWfgoRywtGT5J/Skec4WnyqDqOVFo2jnHQD+NimQiPDWVWNh8tf4YySSJoNM3osEwMQuVYkOJnykMhZ+NJHIAgWnyiD1YuFMJl6TmBXzD/xG68WJdWIKpM0gI8XCCRHxtTHLnKn5/YsQHlwKsM2AVlclUmMQNVvPGXfvYOAFiQkxn+E3Wmbn2XeQVNoMMnkWUfsvPjY3v4MyZ2xCxO8uj7VMvHGtm4JWXGoMUivl3w6mz2tVOS2IgK3lIFR7+nX9SKVBiu7boLZPS3gQ+M5y0Erd6jDpMYi5xSO6Mqlnps9TGg1y2yEYeHBfVz04fH5Cj1hd/SRpbrPFp8cgRfd+EP4uIYjfhDvDf1i9BX9OqKMVnkaDqEKrXuH9BD5Pq+hpQQw+vRK0Lkqq0834VBhkZMh9dhTBxNvCH/OD8N+6CXh6X2k1yIbl+zxl0aKJ9bSekZDd1X4QnphQo6vhqTDIDd7gC3Jw7klCRs1XIYeWDo+G9yfRSRKbVoNMnEVK7keJkejLhcFfqwStY5Mw7HZsKgxy6SEYeOa+E1NC9ReE64Enumk2yA1F9zkOcCdR59Nb9/wwE3BuOQg/3O0PeZL+UmEQVWDNy38/wbzz8bYTLT0qxrL3SaDOFptmg6ia6sX8BUwTm6VqHd2eaaiV5B5B6TFIsfBeEH9aq2jGpX4jfIdWrMGgtBtktDTw4jbn1JsMsQ8G7nJy4ZHlEfwxdvACBqTGIBPXwZ47QsBQLF6EuweiXNFrPKrWflrQY9d8/kjt76d9uIO5p6+oPvo7bYGEgdVSfg0xnRlbhul1fqNp4ql87K6TBKTKIBtXukc4Dm6MUzBHPFzZ1DKyinmcfmdrW/PcPyRYHvUBPwj3M5FHEo2a5/4kzp70BFxZDsKTkvS5ULGpMoiCpJYechy+lIAXzgNNncovjLNIWDcGoea5au8StYeJxsFf94PWMRqBRkN2venrfALgg+YVZj7fb8jr7vNyMtlg2tJD3sxrdNFFlIsu7GR5e5N5daJVGyq8FhFf00nbPdpsp5zz/PLIX36rEWs8RK0esnjvwmkR8+k0w/MRBn5EjIv9RniZ8c67KJi6M8h0Nurn3/2fXHgZRVgWOfwgiH6Wo4Gt5ZHtPX0jWCu5XwTj5Djj3I7o8KM2NeMv/xqnE422U8vsgHIHEOGAKGr/LJfLfX94tKm2ZUj9kWqDpJl+vDWo6L1+0PxMmutNa+5ikAUcucnFJ9SymepScabjW2D6gN9o3rqAaWa6azFIDwy/2iiVouhlBFoGnlgJ8Gam9u2VYFzrmUMPlNQ3KYhB+mYopRAbBMQgNqiKZt8QEIP0zVBKITYIiEFsUBXNviEgBumboZRCbBAQg9igKpp9Q0AM0jdDKYXYICAGsUFVNPuGgBikb4ZSCrFBQAxig6po9g0BMUjfDKUUYoOAGMQGVdHsGwJikL4ZSinEBgExiA2qotk3BMQgfTOUUogNAmIQG1RFs28IiEH6ZiilEBsExCA2qIpm3xAQg/TNUEohNgiIQWxQFc2+ISAG6ZuhlEJsEBCD2KAqmn1DQAzSN0MphdggIAaxQVU0+4aAGKRvhlIKsUFADGKDqmj2DQExSN8MpRRig4AYxAZV0ewbAmKQvhlKKcQGATGIDaqi2TcExCB9M5RSiA0CYhAbVEWzbwiIQfpmKKUQGwT+H0lv6zK8cI7XAAAAAElFTkSuQmCC",IMAGE_PWD_SHOW:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAHXZJREFUeF7tXXuUHFWZ/33Vk+nqmAcPZVEB5aygsBp2FzYgeDBJV8909YRnDhE5B0gAPawhgobDRjcHwfWswSXyjB6URyIrYLLhlcx0z3T1JGJQZIlIkHU3qOwCuyoIIUHS1ZPp+vbcnknIYx7dVfdWV03fe06f+WPu9/rd++vqe+ve7yPophHQCIyKAGlsNAIagdER0ATRs0MjMAYCmiB6emgENEH0HNAI+ENAP0H84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84aalWgQBTZAWGWgdpj8ENEH84daw1IYuHJqomCd58KYTjOkATydQ7S+DphMwHUMf0XYwsIPAOwDawXv/ejsMGDuqSfe5ud3Y3rATWqBhBDRBGoZsfIENVvsJBidmGOAZTHQSwDMAHD2+ZEM9XgFoKzE/54G2elTdOtcZ+HVDGnTncRHQBBkXorE7rDkR7VOOTKaJYIHoTACCDO0B1foVHwCwlYj7vSr1HrHD/ckpW7DbrzItB2iC+JgFvXNSp3sGzwHw6eHPJB9qwhAZAKhA5PUTJTZ39u3aEobRiWRDE6SO0VxzARLTtqfmMbMNqpHi2DrEothlGwGbAerdeWh53fy1qEbRySj5pAkyxmh0ZyafYsA7H4x5AI6P0sBJ8GUbCOs8GA93FXc9I0HfhFShCXLAsIrdprYBcx4PkSI7IUf94KAKRFg32O6u07tj+4OjCTKMR29H6lSviotBLIhxZIsQ48Aw/wCmdUYC93f2lX/eohjsF3bLE6Q7ncwkiBYwcJGeEO8iQMADVeZVXaVKsZVxaVmCdFupeQlgAYPntvIEGC92Am2oAqu6nPK68fpOxP+3HEHyGXMBe1hIBPHOQrc6EWDGE2TgPrvorqpTZEJ0axmC9FjmJURYBMbMCTFyzQqC8DQzVuYc9wfNciFMuxOeIL3p9nM9Mq4CkA4T2BawVTLYu7OzNPDoRI51whIknzHTAC8C03kTeQCbHhvxIwCttItuqem+KHBgwhFk/ZzUzEkGL2LgEgV4aZWjIEDAD3Z7tPKs/vLTEwmkCUWQvGV+DcANMRygNwG8ScAbwncGDgdw2PAnbuHcYDvujXFzejR/JwRB8pY5C4Agh/gbtfY6gG0MiHNQ2zzQizDwaoK8N4Dkm9nenYIco7ZC57TDgMphVTYOh4ejDPBxDBxPQ0dfxOd9UQsYwCYAN9qOK/7GusWeIJF7ajC2EPAYmHqTXnnb7E14S+UM2TgLh1SM1PE8dLpYvNM5Q6W9BnXH/mkSW4JE6Kmxi0H9BK/fMOjRzj73pQYnkdTuj3akjk5WuQOEDgJyDEyRaqBxZbF+msSSIBF4arwNQjc8dA8gUTyn9M4fG5836iXWz5r63rbE7iwMdIHRBWCqequjWojl0yRWBNkwe/LJbQnvG9ycU7aDAHcT0QYYRne2d9fvmzjZGjZd6Jz8fnheF7M4WkOCLG0NKwkoQEBhsGosm7sxPhe3YkOQ7nRyUYLwDQYdEnCcGhV/isEPJAza0OyfT406Plr/3g7z2KrHcwkkDmieJktvPXoI/FaVsayrVFlZT/9m94k8QR63zGPaIYiBi0MGqwCm1Xap/FDIdkM1l0+nLgTxpWHffSHg/gFg2dmO+3KoATdoLNIE6bZS8xNgQY7jGozLf3fCQ57Hq7tKlYJ/JfGT7E4ns4ZBl4JxYVjeE/BiFbSsyymvCctmo3YiS5B8xvxnML7SaEC++xPuYaa7c075Kd86JoBgj5U6jYivAOPysMIhxk3Zkrs0LHuN2IkcQXpsJGnQvAsM8dhX3xj9MHiFXaz0qDcWHwv5TDIHj5aAIN6vhNHWGoa7sLMP74RhrF4bkSKIWDwy4y5mZOoNIEC/l4h4RbYYj8VigDgDiRYyyUXMtCSUTC6MLZ5hXBmlJBKRIUjeMj8F4EcAPhBoROsQZuYVRltiRdy2ausITUkXsUXsDVaXENWIorptZ8biXMn9oWpD9eiPBEHEYtwAC3Iobvxw1TNWzO0v/1SxoQmpfsOc1OkJw1sC0PmqA2TG9bmS+0+q7Yynv+kE6bGS1xDolvEcDfZ/fpZg3Jx1yg8E06OlBQIFK3URw7sWoL9RighjlV1yFyq1MY7yphKkYJn3MqAMAAa/lQDd3D7orpi9CW4zgZ5otjfOgjnQZi6pgq8lhS9vxV34XMkV2Syb0ppCkN4OvKfqmU8R8HFVUYsLPAl4yzM647kqiGt6i1b7CVUYS5VeUGO8WjXdGc1Iahc6QfoyyeOqTNsUjloZzEvtUuV2hTa06gMQyKeTXwTRcgApZeAwnW6Xyj9Tpn8ExaESZPhYw4MKA9ycIFraUSw/qdCGVj0KAn2Z1BlVZkESsSOppBFwWdZx71OivJkEKaTNG5lwvarAiPm2ZLWyVK81VCFcn16xNqkkksuZ6Or6JBrvRYyvZ0uuuEGqvIXyBMlb5jcBqDpKsJ0IV2eL7v3K0dIG6kagkDEvZsZtAA6tW6ixjsttx1V+FEk5QfJW8tsAfamx2Ovu/QyDFsft/FSPjWm0O/lJgE4TNQpBNA2MaUDtUwXjNRC/Dhivw+PXkeDXyEg+Nd799bpRC6lj7VwX+A4Ap6gxybfYTuXLanQPaVVKkHw6dSeIFykKYI1htC3u7Pvza4r0S1Xb22Ge6Xl87hAp8El/yqmbmR802trzcSFLb8eUIzxvUJBkvr+Yx5FiWmmXyiIxoJKmjCAFy/weA59T5PU37aL7VSW6JSrdOAtT3HbzM/BqR8gtiapFLcK1zMhH5UjGeLGpPJ1NwPezjvv58Xzw838lBMlnzFWKTuOWwVhsl9x7/AQbpkxPOnUdEX8BwIcU290MotvtYnmtYjuB1efT5uUgiKeJ/K1gwmq76C4I7OQBCqQTJJ82HwQpuHTDeIGAxdmSu1E2CDL15TPJs8F0Xdjpdwj8KJhujzo+hbQ5m4E7QPgrmbjXdDEeskvuZ2XqlUqQvJVcp+YgGz3eBl6cifD1THGPxdhtfoeBy2QOUMO6GHe3kXttxsGOhmVDEiha5jGDoDsAPlu+SX7YdiqiSpiUJo0gBSu1XkUxGgbfmnMqqnbBpIBYS6/Ttns1gJwUhUGViHsV5C3scgaeD6pKpXyPlbyFQNfItiGK/mSd8lky9EohSE/a7COSf8mJwIuzTuVOGYGq0iEueXkexER8jyobPvXuIvD8rFPp9ikfiljBSl7FtaeJ3MaMYq7kdgTVGpgg+bRZUnAts8LsXZiLeO2JvJXsBCjSyR0Y/IWcU/lu0ImiUr5gpeYB/CADk2TaIcDJOm6g26mBCNJjJR8h0LkygwKwkz2cl+t3+yXrlaqu20pdZIAjcettvMAY/KWcU7l1vH7N/H+31X6OAUPc15ks0w8C7s06ru8EFL4JomIrl4DXyDBynX3RzrxXsMyFDNwrcyBV62KiT+UifoizliiCSRxmFScKZDbfaU99ESRvpW4HeLHMCAC8Qgmek+2t/EayXqnqhku6PSJVaVjKqvwxe2Plv8Iy58dOrV69x2LdJGqkSGt+TwE3TJC8ZYp7wsukeT6k6DeG0XZG1I+NrJ+T+mCbwQ6Aj0mOPxR1BP7l7sH2zFmb3v5TKAZ9Ghne+BB5A470qWJEMWa6MFcqN5T7oCGC5K3klwD6tkynwXiB292Tc3lUpOpVoKxgmauV3pxT4POBKgn8WNapyF43Svdc3Dr1PPPXAI6WqZw9PjvXX1lfr866CTJ8fFly6V/+he1UTq7X2Wb2G84PFekt57rxYV5klyrfqbt/EzvmLfN30nNyEax6i47WRZDhxZMo9yttG44IP80W3ShVQxp1GvTYU96H3YPPEvBBRXNFlGl7AaD/GNLPJwK1oxhqyqsxXhic7M48az12KYpHqtoey3xeZv4CAtxBj9L1pH8alyCFOamZbLAgx/tlRU2EJ7LF5mWqaDSOQiZ1HTPf1KjcOP3XAvQzj73urlJlxDv6w5km08y19J9yzxgRXZstlldIjkmZukLG/DEzzpRo4HceVed1FXf/ciydYxKkNCf1wQEDPQDPkOUYA8/nHFeaPll+jaZnzSeRmjrZfBaEj8qwRcCPPKI7Gt1y7cmkzjCYFzPwGRl+APjdJJ400yq9XausG4fWY5lbCfiEPF9pa7uHXLq//L+j6RyTIAoOH75iO+4x8gJUrymfTn4BRHKKvZB3vl0cCLRFnM+kLgCzlHIBxLg+G4HshY2MYt4yRT0RiQv3sQ83jkqQnnTyJqLasW1Z7c+24zazRp6vOPKWKdLMBK7CxB5/JNdf+a0vJw4Q6u5InWp4LKNMwzbbcaU8GWXEVa+OvGW+DYnFSZn5W7lS5R9Gsj8iQQoZ8wpmfL9eh+vpZzvuuOudevSE2UdWDi/DaPsL2e94hu61m4GPtBsG0p190T7WM9KY5y2TZc4FInwuW3TvPlDnQZNWlFdmoIck3voyB92pszfhzzIDCkNXvsO8HB4OAq0h28xXq0piJ+OwJBF/K1sc+duzoThD7ly7ztxWe5JIaQyURdls23FF2eq9bT+CqFiUGwYd09lXfkVKFCErKVjJRzjYYUzfZ4DqDTVoSWzxdj3rVNQmoa43mAb79XakjvY8lljj8OBF+34Ekb0o9+DNiPqlnbHGJMhjnID/Q8I4RXUNklp556r3DAeoqzKJ8ZdWyRUv5GLXuq32TxgwtspzfP9F+16CyF6Uex4+3dXvPiHP8XA19aTbTyQyXghgVfnTY49vQZ8iDP5izqlIv7QUALuGRLvnmGcaBn7ckNAYnfddtNcI0jPHnEMGSrIMgPlKu1S5S5q+JigKup0a5rdydzp5vEHk+5RuHK41jzcF8pn288DGw+P1q/f/7CEt7iTVCJK3THG8WMp9agbdmXPKso/C1xuXtH4Bv5V7bMftkuZMHYrylimyvcyqo+vBXQj/ahfdsOvQ+3J1LCHJu6+1MaThXEXBdmqGvRZvibOOG1qdbekI76Mwb5niZdwFvmw04Qk6XH5A5ML103ptx836EYyaTN4yRQ5okQs6eGNcQXnLFD+FZGSlC/1bMzgCo2vIW6a4j+AvRSgbM+3Srn9X6d+BuvPpyX8H8p72ZZOxxS65ivLn+vIokFAhnbxVRnZ5cV1XEMT/o/ndMH7y9qHu7PlrUQ0UWYSE8xnzV2Cfyc0Gcay9yf3vMMPJzzI/jDa85NPm/9iO+2GfspETuwEwZlrJNQQKmh/rSUEQkfw5wLFqfpYSmB/1q7KNjmI+bb4CwlGNyon+huFO6ezDO35k/coMXzDy+zJ2l+24UUtb5BeKmtzwOxLxMznIMaE/aYKMMgx5q3aMw1fygBgSpGI7rhloRkZMWCZB9E+sEQY3yEtCxO8n1uu24x4RsTnu2x3ZP7H0In0kggT4iYW4LdKB39qO+xHfMzJignIX6UMp6fU27wGDHGwXK/wXpcG2eeOTG2A8Lkrf5hUG9YvCg2EP9B4ECH3LO+Bu5CbbcWePN/mi/n8lLwpF0PqoyUgECVZbMU5HTQD+F9upyLwcFzqXlB41qZFE8g3CuB9WlFDTPT6HFZkuyJXK/xb6rJZkUPlhxT1+6uPu747Yw+mph6dot+8MhHE67t4GfCjKxYnG4lFox92FE/rC1P5DkbfMPIAgZ5SUP0UCHqoUZY5/lXVciZlCJD0W6lAT+oWp4QW7vnI7PDhS8mFF/MrtWAkL6pijTevSlCu3e6KVvBtQUxvHpA2BDgDuM3WinLSBPOPkbP+uXzRtpvs0HOhF7gg2607asEdW9qIdQEzT/qQek1FsMpJpf5gfsUuV833O0aaJNT3tj6pFu6gBErfEcQUrdRHLqiQVscRxfsoBNI0Vw4YjkzhO1aI9dqlHL0Bi6nbzV7JqgkQm9SjhabvontrsCd+I/cilHhXO6+TVtZMGXwNwQyODWUffpiavZuDSnONKLmdRR9Q+u0QyefXen1pDteNatvzB+rMwua2c3AyQqvxR4ZY/AEq241o+52roYpEuf7DPztbFzJD8jROfQ3L5jtSF8FgUmIx9M9g7rzPiJbbfXQfHoIDOPov2li7Blk+bD4IQ66QUxLwiW6pcG3WWx64E2z6Mbtkinvl0+wyQId6ufyDqE2wU/0I/ZewHp9gW8XyXJK1bBjpoQjk/E0aWzEDZnXbOk5CW8FmWX/vqiX0Z6HcX7uYqMC6VCRIBr5Fh5Dr7dm2RqVe2rkImeSUzfVe2XqX6mnDLsdF4hmthinWer1wAY9jzfSYuUM2OHiv5CAXLfj5STDvZw3ki7WOjAIfZv8cy/5GAb4Rp06+tOCzKu632cwwYDwCY7DfOkeREbqus417uV2cgggij+bRZAtWKTMpsFWbvwlzEd1ryc8wFMHCfzMCl62JcYZfce6TrlaiwYKXmAfwgS6yiLNwjwMk6biaIq4EJIoz3pM0+IgRyZGT28+KsU4l0bfKorkmYa2uNv8+V3B8GmSCqZQtW8ioGSc8sz4xiruR2BPVfCkGEEwUrtZ7Bc4M6dKB8HDKPD5PkOwDeKzt+n/pKgx599az+sr9UpD6NNirWYyVvIdA1jcqN159AG7JO+azx+tXzf2kEqf3cspLrAFJwOpQebwMvjvKtt/zs5EcpQdcxcFk9wCvrQ/imXXS/qky/BMVFyzxmsPbU4LMlqDtAxdhVaxu1J5UgNZKoepnGeIGAxdmSKxLdRbblM8mzwbXqwGeE7ORGEN9qFyuPh2y3IXOFtDmbgTtAPvMej2WN8ZBdcj/bkEPjdJZOkBpJMvK3gIfjKIOxOOqLzuEvCpEx//MgnCxzwEbQ9Z9gvjUOBYuGS22I9UZKOiaE1XbRXSBbrxKCCCcLlvk9Bj4n2+Gavhj8jNgTdz5tqiKKeJL+2B10bztvE95SgrNEpfmM+c9gfEWiyr2qCPh+1nFllPA4yD1lBBn6Fk3dCeJFKkABsMYw2hbLrj+uyFd0p5MZg5BhIEOgv27UDgMvE/HT8OgxrtKm3Kbyq43qaEb/3o4pR3jeoHhqzFdin2mlXSpfpUT30Fax2pa3giVgG8e7Zxi0OOeUn1IbhVztPXbqKBr0/hYejgLR0WDxV5RaoJ1g3gminQDvZPDLBHq+De7zGQci23ysWo+VOo3AghyKivPwLbZT+bJKUJQTpPYksUxREkuUxlLRthPh6mzRvV+Fcq3THwKFjCmuR4iScIf60zCu1HLbcZX8ZNvXcigEEQYLafNGJlw/btg+OxDzbclqZensTXB9qtBiEhDYOAtmJZFcLqME2mjuEOPr2ZIrbnkqb6ERpPYkSacuBCm9dLQ5QbS0o1h+Ujly2sBBCPRlUmdUmZcD+JQqeAi4LOu4oR3vCZUgArS+TPK4KtM2VQACKIN5qV2q3K7QhlZ9AALD5RcEOeRv4e6xxXS6XSr/LEzwQyeICE7cFqt65lMEfFxVsAT8IAFvecYZ+LUqG1ovULTaT6jCWMrAJcrwYLxaNd0Zc7uxXZmNURQ3hSB7fClY5r0MLFQVNIPfSoBubh90V+i1iVyUxVpjoM1cUgVfS6BD5Gp/VxsznsiV3E+r0j+e3qYSRDjXYyWvIdAt4zka7P/8LMG4OeuUxX0D3QIiMJRMz7tWYZaXIQ8Zq+ySq+wLtB4Ymk4Q4WS3lZpvgH9Uj8PB+vDDVc9YMbe//NNgelpTesOc1OkJw1ui5kDq/pgy4/pcyRX5D5raIkEQgUDeMsXOhyCJ8oQIzLzCaEusyPbu+n1T0Y+J8ULn5Pd7g9UlRLQkBJe3M2NxVO6xRIYgAniRzYIZdzHLv3w1wsC+RMQrssXKyhAGPbYmCpnkIuYaMY5VHgRji2cYV3YVdz2j3FadBiJFEOFzj40kDZp3yU4IMSoejH4YvMIuVnrqxKwlutUSKHi0RMF16tHwW2sY7sLOPrwTJYAjR5A94Kg8/TniABDuYaa743auS/Zkqp2fIr4CDN+JDhr1iRg3ZUuuqqNIjbqzX//IEkR4KRbvCfA3GDguUJSNCBMe8jxe3VWqFBoRi3vf7nQyaxh0KTi8zJEEvFgFLetyymuiil+kCSJAe9wyj2kHBEkuDhnEAphW26XyQyHbDdXc8PEfkd8sSC3Ghn0m4P4BYNnZjvtyw8IhCkSeIHuw6E4nFyVIEEXdS6lRcH+KwQ8kDNrQ2ee+FOLYKDMlNkOqHs8l0EUATlNmaATFBH6ryljWVYrH5khsCCKw3jB78sltCU88TUL9thse50GAu4loAwyjO25bxGKrFp7XxSwyz1AXgLYwiSFsEVAYrBrL5m6MdubMfXGJFUH2LuDVFLRpZL68DUI3PHQPIFE8p/TOHxsRDqvv+llT39uW2J2FgS4wBCmmhmV7BDu+03820Wf1NwpVBZe3zFkAxJ0A8beZbReD+glev2HQo83+GfZoR+roZJU7QOggIMfAlGaCA2ATgBttxxV/Y9di+QTZF2VF5dH8DyRjCwGPgak36ZW3zVacUGHjLBxSMVLHs8Ei/atI3Bd2uqGxsIrlUyP2P7EOHJEIPU1GmiyivNo2BrYRsM0DvQgDrybIewNIvpnt3fnmWDOs0DntMKByWJWNw8UddgN8HAPHE3A8hj7v889mZZKxfmpMOIJEaG3id8YJkrxJwBtCAQOHAzhs+ONXZ7PkYv/UmLAEEYGtn5OaOcngRUov8DRr6kXYrrigttujlVHPB9wohLFfg4wWcD5jpgFeBKbzGgVF928AAeJHAFppF91SA1Kx6TphCbJnBHrT7ed6ZIjEYunYjEo8HC0Z7N0Zl2q5fiGd8ATZA0yPZV5ChEVgzPQLlparve17mhkrc44ruSR4NNFtGYLsXchnzAXsYSERzozmkETTK3E3nAzcZxfdVdH0UI1XLUeQPTB2W6l5CWCBiqI/aoaqOVpFMZoqsKrLKa9rjgfNtdqyBNlLlHQykyBawIA4uKfbMAIEPFBlXtVVqhRbGZSWJ8jexXxH6lSviotBPA/AkS06Kf4ApnVGAvd39pV/3qIY7Be2JsgBs2BDFw5tGzDnMUMQpRmnhpsxLwtEWDfY7q5rRnK2ZgRcr01NkDGQ6s5MPsWAdz6GyCKOdUyktg2EdR6Mh6OUJCFqAGuC1DEiay5AYtr21DxmtkEQWf7UZ/iowy8fXcR5sM0A9e48tLxu/lpUfehoKRFNEB/D3Tsndbo3dHpWkEV8JvlQE4bIAEAFIq+fKLG5sy8+F5XCAKceG5og9aA0Rp81J6J9ypHJNBEsEIl3KzMAtAdU61d8AMBWIu73qtR7xA73J6dswW6/yrRcCCXYWhHkDVb7CQYnZhjgGUx0EsCCNEdLxuIVgLYS83MeaKtH1a1zdSZ7yRBrgkgHdDSFYncsUTFP8uBNJxjTAZ5OoNpfBk0nYDqGPqLtYGAHgXcAtIP3/vV2GDB2VJPuc3q3KZyh0z+xwsFZW4kpApogMR047XY4CGiChIOzthJTBDRBYjpw2u1wENAECQdnbSWmCGiCxHTgtNvhIKAJEg7O2kpMEdAEienAabfDQUATJByctZWYIqAJEtOB026Hg4AmSDg4aysxRUATJKYDp90OBwFNkHBw1lZiioAmSEwHTrsdDgKaIOHgrK3EFAFNkJgOnHY7HAQ0QcLBWVuJKQKaIDEdOO12OAhogoSDs7YSUwQ0QWI6cNrtcBDQBAkHZ20lpghogsR04LTb4SCgCRIOztpKTBHQBInpwGm3w0FAEyQcnLWVmCKgCRLTgdNuh4OAJkg4OGsrMUVAEySmA6fdDgcBTZBwcNZWYoqAJkhMB067HQ4CmiDh4KytxBQBTZCYDpx2OxwENEHCwVlbiSkC/w9N+oXVuuYlPAAAAABJRU5ErkJggg==",IMAGE_PWD_WIDTH:20,IMAGE_PWD_HEIGHT:20,isHide:!1,pwdField_:function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,l=0;o=e.fieldRow[l];l++)if(t==o.name)return t=this.newBtn_(),void e.insertFieldAt(l+2,t,"passwordEye");console.warn('field named "'+t+'" not found in '+this.toDevString())},newBtn_:function(){return new t.FieldImage(this.isHide?this.IMAGE_PWD_HIDE:this.IMAGE_PWD_SHOW,this.IMAGE_PWD_WIDTH,this.IMAGE_PWD_HEIGHT,"*",this.pwdBtnClick.bind(this))},pwdBtnClick:function(){this.setDidplayState(!this.isHide),this.isHide=!this.isHide},setDidplayState:function(t){t?(this.getField("passwordEye").doValueUpdate_(this.IMAGE_PWD_HIDE),this.getField("TEXT").fieldGroup_.getElementsByClassName("blocklyText")[0].innerHTML="********"):(this.getField("passwordEye").doValueUpdate_(this.IMAGE_PWD_SHOW),this.getField("TEXT").fieldGroup_.getElementsByClassName("blocklyText")[0].innerHTML=this.getField("TEXT").value_),this.getField("TEXT").forceRerender()}}),t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_PASSWORD_BTN_EXTENSION=function(){this.mixin(t.Constants.Text.PASSWORD_BTN_MIXIN),this.quoteField_("TEXT"),this.pwdField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("text_create_join_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var l=t.newBlock("text_create_join_item");l.initSvg(),n.connect(l.previousConnection),n=l.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n&&!n.isInsertionMarker();)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(t){(t="FROM_START"==t||"FROM_END"==t)!=this.isAt_&&this.getSourceBlock().updateAt_(t)}),this.updateAt_(!0);var e=this;this.setTooltip(function(){var n=e.getFieldValue("WHERE"),o=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==n||"FROM_END"==n)&&(n="FROM_START"==n?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(o+="  "+n.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),o})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Extensions.register("text_password_btn",t.Constants.Text.TEXT_PASSWORD_BTN_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},i=this.getField("VAR").getText(),l={text:t.Msg.DELETE_VARIABLE.replace("%1",i),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(l));else{if("variables_get"==this.type)var n="variables_set",o=t.Msg.VARIABLES_GET_CREATE_SET;else n="variables_get",o=t.Msg.VARIABLES_SET_CREATE_GET;var l={enabled:0<this.workspace.remainingCapacity()},i=this.getField("VAR").getText();l.text=o.replace("%1",i),(o=t.utils.xml.createElement("field")).setAttribute("name","VAR"),o.appendChild(t.utils.xml.createTextNode(i)),(i=t.utils.xml.createElement("block")).setAttribute("type",n),i.appendChild(o),l.callback=t.ContextMenu.callbackFactory(this,i),e.push(l)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},a=this.getField("VAR").getText(),i={text:t.Msg.DELETE_VARIABLE.replace("%1",a),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(i));else{var n=this.getFieldValue("VAR"),o=this.workspace.getVariableById(n).type;if("variables_get_dynamic"==this.type){n="variables_set_dynamic";var l=t.Msg.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",l=t.Msg.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},a=this.getField("VAR").getText();i.text=l.replace("%1",a),(l=t.utils.xml.createElement("field")).setAttribute("name","VAR"),l.setAttribute("variabletype",o),l.appendChild(t.utils.xml.createTextNode(a)),(a=t.utils.xml.createElement("block")).setAttribute("type",n),a.appendChild(l),i.callback=t.ContextMenu.callbackFactory(this,a),e.push(i)}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.Variables.getVariable(this.workspace,e),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}),function(t,e){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],e):"object"==typeof exports?module.exports=e(require("./blockly_compressed.js")):t.Blockly.Python=e(t.Blockly)}(this,function(t){"use strict";return t.Python=new t.Generator("Python"),t.Python.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),t.Python.ORDER_ATOMIC=0,t.Python.ORDER_COLLECTION=1,t.Python.ORDER_STRING_CONVERSION=1,t.Python.ORDER_MEMBER=2.1,t.Python.ORDER_FUNCTION_CALL=2.2,t.Python.ORDER_EXPONENTIATION=3,t.Python.ORDER_UNARY_SIGN=4,t.Python.ORDER_BITWISE_NOT=4,t.Python.ORDER_MULTIPLICATIVE=5,t.Python.ORDER_ADDITIVE=6,t.Python.ORDER_BITWISE_SHIFT=7,t.Python.ORDER_BITWISE_AND=8,t.Python.ORDER_BITWISE_XOR=9,t.Python.ORDER_BITWISE_OR=10,t.Python.ORDER_RELATIONAL=11,t.Python.ORDER_LOGICAL_NOT=12,t.Python.ORDER_LOGICAL_AND=13,t.Python.ORDER_LOGICAL_OR=14,t.Python.ORDER_CONDITIONAL=15,t.Python.ORDER_LAMBDA=16,t.Python.ORDER_NONE=99,t.Python.ORDER_OVERRIDES=[[t.Python.ORDER_FUNCTION_CALL,t.Python.ORDER_MEMBER],[t.Python.ORDER_FUNCTION_CALL,t.Python.ORDER_FUNCTION_CALL],[t.Python.ORDER_MEMBER,t.Python.ORDER_MEMBER],[t.Python.ORDER_MEMBER,t.Python.ORDER_FUNCTION_CALL],[t.Python.ORDER_LOGICAL_NOT,t.Python.ORDER_LOGICAL_NOT],[t.Python.ORDER_LOGICAL_AND,t.Python.ORDER_LOGICAL_AND],[t.Python.ORDER_LOGICAL_OR,t.Python.ORDER_LOGICAL_OR]],t.Python.isInitialized=!1,t.Python.init=function(e){t.Python.PASS=this.INDENT+"pass\n",t.Python.definitions_=Object.create(null),t.Python.functionNames_=Object.create(null),t.Python.variableDB_?t.Python.variableDB_.reset():t.Python.variableDB_=new t.Names(t.Python.RESERVED_WORDS_),t.Python.variableDB_.setVariableMap(e.getVariableMap());for(var n=[],o=t.Variables.allDeveloperVariables(e),l=0;l<o.length;l++)n.push(t.Python.variableDB_.getName(o[l],t.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(e=t.Variables.allUsedVarModels(e),l=0;l<e.length;l++)n.push(t.Python.variableDB_.getName(e[l].getId(),t.VARIABLE_CATEGORY_NAME)+" = None");t.Python.definitions_.variables=n.join("\n"),this.isInitialized=!0},t.Python.finish=function(e){var n,o=[],l=[];for(n in t.Python.definitions_){var i=t.Python.definitions_[n];i.match(/^(from\s+\S+\s+)?import\s+\S+/)?o.push(i):l.push(i)}return t.Python.variableDB_.reset(),(o.join("\n")+"\n\n"+l.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+e},t.Python.scrubNakedValue=function(t){return t+"\n"},t.Python.quote_=function(t){var e="'";return-1!==(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===t.indexOf('"')?e='"':t=t.replace(/'/g,"\\'")),e+t+e},t.Python.quote_unescaped_=function(t){var e="'";return-1!==t.indexOf("'")&&(-1===t.indexOf('"')?e='"':t=t.replace(/'/g,"\\'")),e+t+e},t.Python.multiline_quote_=function(e){return e.split(/\n/g).map(t.Python.quote_).join(" + '\\n' + \n")},t.Python.scrub_=function(e,n,o){var l="";if(!e.outputConnection||!e.outputConnection.targetConnection){var i=e.getCommentText();i&&(i=t.utils.string.wrap(i,t.Python.COMMENT_WRAP-3),l+=t.Python.prefixLines(i+"\n","# "));for(var a=0;a<e.inputList.length;a++)e.inputList[a].type==t.inputTypes.VALUE&&(i=e.inputList[a].connection.targetBlock())&&(i=t.Python.allNestedComments(i))&&(l+=t.Python.prefixLines(i,"# "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),l+n+(o=o?"":t.Python.blockToCode(e))},t.Python.getAdjustedInt=function(e,n,o,l){o=o||0,e.workspace.options.oneBasedIndex&&o--;var i=e.workspace.options.oneBasedIndex?"1":"0";return e=t.Python.valueToCode(e,n,o?t.Python.ORDER_ADDITIVE:t.Python.ORDER_NONE)||i,t.isNumber(e)?(e=parseInt(e,10)+o,l&&(e=-e)):(e=0<o?"int("+e+" + "+o+")":0>o?"int("+e+" - "+-o+")":"int("+e+")",l&&(e="-"+e)),e},t.Python.colour={},t.Python.colour_picker=function(e){return[t.Python.quote_(e.getFieldValue("COLOUR")),t.Python.ORDER_ATOMIC]},t.Python.colour_random=function(e){return t.Python.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",t.Python.ORDER_FUNCTION_CALL]},t.Python.colour_rgb=function(e){return[t.Python.provideFunction_("colour_rgb",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b):","  r = round(min(100, max(0, r)) * 2.55)","  g = round(min(100, max(0, g)) * 2.55)","  b = round(min(100, max(0, b)) * 2.55)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(t.Python.valueToCode(e,"RED",t.Python.ORDER_NONE)||0)+", "+(t.Python.valueToCode(e,"GREEN",t.Python.ORDER_NONE)||0)+", "+(e=t.Python.valueToCode(e,"BLUE",t.Python.ORDER_NONE)||0)+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.colour_blend=function(e){return[t.Python.provideFunction_("colour_blend",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(colour1, colour2, ratio):","  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)","  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)","  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)","  ratio = min(1, max(0, ratio))","  r = round(r1 * (1 - ratio) + r2 * ratio)","  g = round(g1 * (1 - ratio) + g2 * ratio)","  b = round(b1 * (1 - ratio) + b2 * ratio)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(t.Python.valueToCode(e,"COLOUR1",t.Python.ORDER_NONE)||"'#000000'")+", "+(t.Python.valueToCode(e,"COLOUR2",t.Python.ORDER_NONE)||"'#000000'")+", "+(e=t.Python.valueToCode(e,"RATIO",t.Python.ORDER_NONE)||0)+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.lists={},t.Python.lists_create_empty=function(e){return["[]",t.Python.ORDER_ATOMIC]},t.Python.lists_create_with=function(e){for(var n=Array(e.itemCount_),o=0;o<e.itemCount_;o++)n[o]=t.Python.valueToCode(e,"ADD"+o,t.Python.ORDER_NONE)||"None";return["["+n.join(", ")+"]",t.Python.ORDER_ATOMIC]},t.Python.lists_repeat=function(e){return["["+(t.Python.valueToCode(e,"ITEM",t.Python.ORDER_NONE)||"None")+"] * "+(e=t.Python.valueToCode(e,"NUM",t.Python.ORDER_MULTIPLICATIVE)||"0"),t.Python.ORDER_MULTIPLICATIVE]},t.Python.lists_length=function(e){return["len("+(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"[]")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.lists_isEmpty=function(e){return["not len("+(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"[]")+")",t.Python.ORDER_LOGICAL_NOT]},t.Python.lists_indexOf=function(e){var n=t.Python.valueToCode(e,"FIND",t.Python.ORDER_NONE)||"[]",o=t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"''";if(e.workspace.options.oneBasedIndex)var l=" 0",i=" + 1",a="";else l=" -1",i="",a=" - 1";return"FIRST"==e.getFieldValue("END")?[(e=t.Python.provideFunction_("first_index",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = my_list.index(elem)"+i,"  except: index ="+l,"  return index"]))+"("+o+", "+n+")",t.Python.ORDER_FUNCTION_CALL]:[(e=t.Python.provideFunction_("last_index",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = len(my_list) - my_list[::-1].index(elem)"+a,"  except: index ="+l,"  return index"]))+"("+o+", "+n+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.lists_getIndex=function(e){var n=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START",l=t.Python.valueToCode(e,"VALUE","RANDOM"==o?t.Python.ORDER_NONE:t.Python.ORDER_MEMBER)||"[]";switch(o){case"FIRST":if("GET"==n)return[l+"[0]",t.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[l+".pop(0)",t.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return l+".pop(0)\n";break;case"LAST":if("GET"==n)return[l+"[-1]",t.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[l+".pop()",t.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return l+".pop()\n";break;case"FROM_START":if(e=t.Python.getAdjustedInt(e,"AT"),"GET"==n)return[l+"["+e+"]",t.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[l+".pop("+e+")",t.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return l+".pop("+e+")\n";break;case"FROM_END":if(e=t.Python.getAdjustedInt(e,"AT",1,!0),"GET"==n)return[l+"["+e+"]",t.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[l+".pop("+e+")",t.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return l+".pop("+e+")\n";break;case"RANDOM":if(t.Python.definitions_.import_random="import random","GET"==n)return["random.choice("+l+")",t.Python.ORDER_FUNCTION_CALL];if(l=t.Python.provideFunction_("lists_remove_random_item",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  x = int(random.random() * len(myList))","  return myList.pop(x)"])+"("+l+")","GET_REMOVE"==n)return[l,t.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return l+"\n"}throw Error("Unhandled combination (lists_getIndex).")},t.Python.lists_setIndex=function(e){var n=t.Python.valueToCode(e,"LIST",t.Python.ORDER_MEMBER)||"[]",o=e.getFieldValue("MODE")||"GET",l=e.getFieldValue("WHERE")||"FROM_START",i=t.Python.valueToCode(e,"TO",t.Python.ORDER_NONE)||"None";switch(l){case"FIRST":if("SET"==o)return n+"[0] = "+i+"\n";if("INSERT"==o)return n+".insert(0, "+i+")\n";break;case"LAST":if("SET"==o)return n+"[-1] = "+i+"\n";if("INSERT"==o)return n+".append("+i+")\n";break;case"FROM_START":if(e=t.Python.getAdjustedInt(e,"AT"),"SET"==o)return n+"["+e+"] = "+i+"\n";if("INSERT"==o)return n+".insert("+e+", "+i+")\n";break;case"FROM_END":if(e=t.Python.getAdjustedInt(e,"AT",1,!0),"SET"==o)return n+"["+e+"] = "+i+"\n";if("INSERT"==o)return n+".insert("+e+", "+i+")\n";break;case"RANDOM":if(t.Python.definitions_.import_random="import random",n.match(/^\w+$/)?e="":(l=(e=t.Python.variableDB_.getDistinctName("tmp_list",t.VARIABLE_CATEGORY_NAME))+" = "+n+"\n",n=e,e=l),e+=(l=t.Python.variableDB_.getDistinctName("tmp_x",t.VARIABLE_CATEGORY_NAME))+" = int(random.random() * len("+n+"))\n","SET"==o)return e+(n+"[")+l+"] = "+i+"\n";if("INSERT"==o)return e+(n+".insert(")+l+", "+i+")\n"}throw Error("Unhandled combination (lists_setIndex).")},t.Python.lists_getSublist=function(e){var n=t.Python.valueToCode(e,"LIST",t.Python.ORDER_MEMBER)||"[]",o=e.getFieldValue("WHERE1"),l=e.getFieldValue("WHERE2");switch(o){case"FROM_START":"0"==(o=t.Python.getAdjustedInt(e,"AT1"))&&(o="");break;case"FROM_END":o=t.Python.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":o="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(l){case"FROM_START":e=t.Python.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=t.Python.getAdjustedInt(e,"AT2",0,!0),t.isNumber(String(e))?"0"==e&&(e=""):(t.Python.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[n+"["+o+" : "+e+"]",t.Python.ORDER_MEMBER]},t.Python.lists_sort=function(e){var n=t.Python.valueToCode(e,"LIST",t.Python.ORDER_NONE)||"[]",o=e.getFieldValue("TYPE");return e="1"===e.getFieldValue("DIRECTION")?"False":"True",[t.Python.provideFunction_("lists_sort",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, type, reverse):","  def try_float(s):","    try:","      return float(s)","    except:","      return 0","  key_funcs = {",'    "NUMERIC": try_float,','    "TEXT": str,','    "IGNORE_CASE": lambda s: str(s).lower()',"  }","  key_func = key_funcs[type]","  list_cpy = list(my_list)","  return sorted(list_cpy, key=key_func, reverse=reverse)"])+"("+n+', "'+o+'", '+e+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.lists_split=function(e){var n=e.getFieldValue("MODE");if("SPLIT"==n)e=(n=t.Python.valueToCode(e,"INPUT",t.Python.ORDER_MEMBER)||"''")+".split("+(e=t.Python.valueToCode(e,"DELIM",t.Python.ORDER_NONE))+")";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);n=t.Python.valueToCode(e,"INPUT",t.Python.ORDER_NONE)||"[]",e=(e=t.Python.valueToCode(e,"DELIM",t.Python.ORDER_MEMBER)||"''")+".join("+n+")"}return[e,t.Python.ORDER_FUNCTION_CALL]},t.Python.lists_reverse=function(e){return["list(reversed("+(t.Python.valueToCode(e,"LIST",t.Python.ORDER_NONE)||"[]")+"))",t.Python.ORDER_FUNCTION_CALL]},t.Python.logic={},t.Python.controls_if=function(e){var n=0,o="";t.Python.STATEMENT_PREFIX&&(o+=t.Python.injectId(t.Python.STATEMENT_PREFIX,e));do{var l=t.Python.valueToCode(e,"IF"+n,t.Python.ORDER_NONE)||"False",i=t.Python.statementToCode(e,"DO"+n)||t.Python.PASS;t.Python.STATEMENT_SUFFIX&&(i=t.Python.prefixLines(t.Python.injectId(t.Python.STATEMENT_SUFFIX,e),t.Python.INDENT)+i),o+=(0==n?"if ":"elif ")+l+":\n"+i,++n}while(e.getInput("IF"+n));return(e.getInput("ELSE")||t.Python.STATEMENT_SUFFIX)&&(i=t.Python.statementToCode(e,"ELSE")||t.Python.PASS,t.Python.STATEMENT_SUFFIX&&(i=t.Python.prefixLines(t.Python.injectId(t.Python.STATEMENT_SUFFIX,e),t.Python.INDENT)+i),o+="else:\n"+i),o},t.Python.controls_ifelse=t.Python.controls_if,t.Python.logic_compare=function(e){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],o=t.Python.ORDER_RELATIONAL;return[(t.Python.valueToCode(e,"A",o)||"0")+" "+n+" "+(e=t.Python.valueToCode(e,"B",o)||"0"),o]},t.Python.logic_operation=function(e){var n="AND"==e.getFieldValue("OP")?"and":"or",o="and"==n?t.Python.ORDER_LOGICAL_AND:t.Python.ORDER_LOGICAL_OR,l=t.Python.valueToCode(e,"A",o);if(e=t.Python.valueToCode(e,"B",o),l||e){var i="and"==n?"True":"False";l||(l=i),e||(e=i)}else e=l="False";return[l+" "+n+" "+e,o]},t.Python.logic_negate=function(e){return["not "+(t.Python.valueToCode(e,"BOOL",t.Python.ORDER_LOGICAL_NOT)||"True"),t.Python.ORDER_LOGICAL_NOT]},t.Python.logic_boolean=function(e){return["TRUE"==e.getFieldValue("BOOL")?"True":"False",t.Python.ORDER_ATOMIC]},t.Python.logic_null=function(e){return["None",t.Python.ORDER_ATOMIC]},t.Python.logic_ternary=function(e){var n=t.Python.valueToCode(e,"IF",t.Python.ORDER_CONDITIONAL)||"False";return[(t.Python.valueToCode(e,"THEN",t.Python.ORDER_CONDITIONAL)||"None")+" if "+n+" else "+(e=t.Python.valueToCode(e,"ELSE",t.Python.ORDER_CONDITIONAL)||"None"),t.Python.ORDER_CONDITIONAL]},t.Python.loops={},t.Python.controls_repeat_ext=function(e){var n=e.getField("TIMES")?String(parseInt(e.getFieldValue("TIMES"),10)):t.Python.valueToCode(e,"TIMES",t.Python.ORDER_NONE)||"0";n=t.isNumber(n)?parseInt(n,10):"int("+n+")";var o=t.Python.statementToCode(e,"DO");return o=t.Python.addLoopTrap(o,e)||t.Python.PASS,"for "+t.Python.variableDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME)+" in range("+n+"):\n"+o},t.Python.controls_repeat=t.Python.controls_repeat_ext,t.Python.controls_whileUntil=function(e){var n="UNTIL"==e.getFieldValue("MODE"),o=t.Python.valueToCode(e,"BOOL",n?t.Python.ORDER_LOGICAL_NOT:t.Python.ORDER_NONE)||"False",l=t.Python.statementToCode(e,"DO");return n&&(o="not "+o),"while "+o+":\n"+(l=t.Python.addLoopTrap(l,e)||t.Python.PASS)},t.Python.controls_for=function(e){var n=t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.Python.valueToCode(e,"FROM",t.Python.ORDER_NONE)||"0",l=t.Python.valueToCode(e,"TO",t.Python.ORDER_NONE)||"0",i=t.Python.valueToCode(e,"BY",t.Python.ORDER_NONE)||"1",a=t.Python.statementToCode(e,"DO");a=t.Python.addLoopTrap(a,e)||t.Python.PASS;var s="",r=function(){return t.Python.provideFunction_("upRange",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start <= stop:","    yield start","    start += abs(step)"])},c=function(){return t.Python.provideFunction_("downRange",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start >= stop:","    yield start","    start -= abs(step)"])};if(e=function(t,e,n){return"("+t+" <= "+e+") and "+r()+"("+t+", "+e+", "+n+") or "+c()+"("+t+", "+e+", "+n+")"},t.isNumber(o)&&t.isNumber(l)&&t.isNumber(i))o=Number(o),l=Number(l),i=Math.abs(Number(i)),0==o%1&&0==l%1&&0==i%1?(o<=l?(l++,e=0==o&&1==i?l:o+", "+l,1!=i&&(e+=", "+i)):e=o+", "+--l+", -"+i,e="range("+e+")"):(e=o<l?r():c(),e+="("+o+", "+l+", "+i+")");else{var u=function(e,o){return t.isNumber(e)?e=Number(e):e.match(/^\w+$/)?e="float("+e+")":(o=t.Python.variableDB_.getDistinctName(n+o,t.VARIABLE_CATEGORY_NAME),s+=o+" = float("+e+")\n",e=o),e};o=u(o,"_start"),l=u(l,"_end"),i=u(i,"_inc"),"number"==typeof o&&"number"==typeof l?(e=o<l?r():c(),e+="("+o+", "+l+", "+i+")"):e=e(o,l,i)}return s+="for "+n+" in "+e+":\n"+a},t.Python.controls_forEach=function(e){var n=t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.Python.valueToCode(e,"LIST",t.Python.ORDER_RELATIONAL)||"[]",l=t.Python.statementToCode(e,"DO");return"for "+n+" in "+o+":\n"+(l=t.Python.addLoopTrap(l,e)||t.Python.PASS)},t.Python.controls_flow_statements=function(e){var n="";if(t.Python.STATEMENT_PREFIX&&(n+=t.Python.injectId(t.Python.STATEMENT_PREFIX,e)),t.Python.STATEMENT_SUFFIX&&(n+=t.Python.injectId(t.Python.STATEMENT_SUFFIX,e)),t.Python.STATEMENT_PREFIX){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(e);o&&!o.suppressPrefixSuffix&&(n+=t.Python.injectId(t.Python.STATEMENT_PREFIX,o))}switch(e.getFieldValue("FLOW")){case"BREAK":return n+"break\n";case"CONTINUE":return n+"continue\n"}throw Error("Unknown flow statement.")},t.Python.math={},t.Python.addReservedWords("math,random,Number"),t.Python.math_number=function(e){if(e=e.getFieldValue("NUM"),1/0==(e=/^0b|0B|0x|0X/g.test(e)?e:Number(e))){e='float("inf")';var n=t.Python.ORDER_FUNCTION_CALL}else-1/0==e?(e='-float("inf")',n=t.Python.ORDER_UNARY_SIGN):n=0>e?t.Python.ORDER_UNARY_SIGN:t.Python.ORDER_ATOMIC;return[e,n]},t.Python.math_arithmetic=function(e){var n={ADD:[" + ",t.Python.ORDER_ADDITIVE],MINUS:[" - ",t.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",t.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",t.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",t.Python.ORDER_EXPONENTIATION],REMAINDER:[" % ",t.Python.ORDER_MULTIPLICATIVE]}[e.getFieldValue("OP")],o=n[0];return n=n[1],[(t.Python.valueToCode(e,"A",n)||"0")+o+(e=t.Python.valueToCode(e,"B",n)||"0"),n]},t.Python.math_single=function(e){var n=e.getFieldValue("OP");if("NEG"==n){var o=t.Python.valueToCode(e,"NUM",t.Python.ORDER_UNARY_SIGN)||"0";return["-"+o,t.Python.ORDER_UNARY_SIGN]}switch(t.Python.definitions_.import_math="import math",e="SIN"==n||"COS"==n||"TAN"==n?t.Python.valueToCode(e,"NUM",t.Python.ORDER_MULTIPLICATIVE)||"0":t.Python.valueToCode(e,"NUM",t.Python.ORDER_NONE)||"0",n){case"ABS":o="math.fabs("+e+")";break;case"ROOT":o="math.sqrt("+e+")";break;case"LN":o="math.log("+e+")";break;case"LOG10":o="math.log10("+e+")";break;case"EXP":o="math.exp("+e+")";break;case"POW10":o="math.pow(10,"+e+")";break;case"ROUND":o="round("+e+")";break;case"ROUNDUP":o="math.ceil("+e+")";break;case"ROUNDDOWN":o="math.floor("+e+")";break;case"SIN":o="math.sin("+e+" / 180.0 * math.pi)";break;case"COS":o="math.cos("+e+" / 180.0 * math.pi)";break;case"TAN":o="math.tan("+e+" / 180.0 * math.pi)"}if(o)return[o,t.Python.ORDER_FUNCTION_CALL];switch(n){case"ASIN":o="math.asin("+e+") / math.pi * 180";break;case"ACOS":o="math.acos("+e+") / math.pi * 180";break;case"ATAN":o="math.atan("+e+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+n)}return[o,t.Python.ORDER_MULTIPLICATIVE]},t.Python.math_constant=function(e){var n={PI:["math.pi",t.Python.ORDER_MEMBER],E:["math.e",t.Python.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",t.Python.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",t.Python.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",t.Python.ORDER_MEMBER],INFINITY:["float('inf')",t.Python.ORDER_ATOMIC]};return"INFINITY"!=(e=e.getFieldValue("CONSTANT"))&&(t.Python.definitions_.import_math="import math"),n[e]},t.Python.math_number_property=function(e){var n=t.Python.valueToCode(e,"NUMBER_TO_CHECK",t.Python.ORDER_MULTIPLICATIVE)||"0",o=e.getFieldValue("PROPERTY");if("PRIME"==o)return t.Python.definitions_.import_math="import math",t.Python.definitions_.from_numbers_import_Number="from numbers import Number",[t.Python.provideFunction_("math_isPrime",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(n):","  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  # If n is not a number but a string, try parsing it.","  if not isinstance(n, Number):","    try:","      n = float(n)","    except:","      return False","  if n == 2 or n == 3:","    return True","  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.","  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:","    return False","  # Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for x in range(6, int(math.sqrt(n)) + 2, 6):","    if n % (x - 1) == 0 or n % (x + 1) == 0:","      return False","  return True"])+"("+n+")",t.Python.ORDER_FUNCTION_CALL];switch(o){case"EVEN":var l=n+" % 2 == 0";break;case"ODD":l=n+" % 2 == 1";break;case"WHOLE":l=n+" % 1 == 0";break;case"POSITIVE":l=n+" > 0";break;case"NEGATIVE":l=n+" < 0";break;case"DIVISIBLE_BY":if(!(e=t.Python.valueToCode(e,"DIVISOR",t.Python.ORDER_MULTIPLICATIVE))||"0"==e)return["False",t.Python.ORDER_ATOMIC];l=n+" % "+e+" == 0"}return[l,t.Python.ORDER_RELATIONAL]},t.Python.math_change=function(e){t.Python.definitions_.from_numbers_import_Number="from numbers import Number";var n=t.Python.valueToCode(e,"DELTA",t.Python.ORDER_ADDITIVE)||"0";return(e=t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = ("+e+" if isinstance("+e+", Number) else 0) + "+n+"\n"},t.Python.math_round=t.Python.math_single,t.Python.math_trig=t.Python.math_single,t.Python.math_on_list=function(e){var n=e.getFieldValue("OP");switch(e=t.Python.valueToCode(e,"LIST",t.Python.ORDER_NONE)||"[]",n){case"SUM":n="sum("+e+")";break;case"MIN":n="min("+e+")";break;case"MAX":n="max("+e+")";break;case"AVERAGE":t.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=t.Python.provideFunction_("math_mean",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = [e for e in myList if isinstance(e, Number)]","  if not localList: return","  return float(sum(localList)) / len(localList)"]))+"("+e+")";break;case"MEDIAN":t.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=t.Python.provideFunction_("math_median",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = sorted([e for e in myList if isinstance(e, Number)])","  if not localList: return","  if len(localList) % 2 == 0:","    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0","  else:","    return localList[(len(localList) - 1) // 2]"]))+"("+e+")";break;case"MODE":n=(n=t.Python.provideFunction_("math_modes",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(some_list):","  modes = []","  # Using a lists of [item, count] to keep count rather than dict",'  # to avoid "unhashable" errors when the counted item is itself a list or dict.',"  counts = []","  maxCount = 1","  for item in some_list:","    found = False","    for count in counts:","      if count[0] == item:","        count[1] += 1","        maxCount = max(maxCount, count[1])","        found = True","    if not found:","      counts.append([item, 1])","  for counted_item, item_count in counts:","    if item_count == maxCount:","      modes.append(counted_item)","  return modes"]))+"("+e+")";break;case"STD_DEV":t.Python.definitions_.import_math="import math",n=(n=t.Python.provideFunction_("math_standard_deviation",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(numbers):","  n = len(numbers)","  if n == 0: return","  mean = float(sum(numbers)) / n","  variance = sum((x - mean) ** 2 for x in numbers) / n","  return math.sqrt(variance)"]))+"("+e+")";break;case"RANDOM":t.Python.definitions_.import_random="import random",n="random.choice("+e+")";break;default:throw Error("Unknown operator: "+n)}return[n,t.Python.ORDER_FUNCTION_CALL]},t.Python.math_modulo=function(e){return[(t.Python.valueToCode(e,"DIVIDEND",t.Python.ORDER_MULTIPLICATIVE)||"0")+" % "+(e=t.Python.valueToCode(e,"DIVISOR",t.Python.ORDER_MULTIPLICATIVE)||"0"),t.Python.ORDER_MULTIPLICATIVE]},t.Python.math_constrain=function(e){return["min(max("+(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"0")+", "+(t.Python.valueToCode(e,"LOW",t.Python.ORDER_NONE)||"0")+"), "+(e=t.Python.valueToCode(e,"HIGH",t.Python.ORDER_NONE)||"float('inf')")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.math_random_int=function(e){return t.Python.definitions_.import_random="import random",["random.randint("+(t.Python.valueToCode(e,"FROM",t.Python.ORDER_NONE)||"0")+", "+(e=t.Python.valueToCode(e,"TO",t.Python.ORDER_NONE)||"0")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.math_random_float=function(e){return t.Python.definitions_.import_random="import random",["random.random()",t.Python.ORDER_FUNCTION_CALL]},t.Python.math_atan2=function(e){t.Python.definitions_.import_math="import math";var n=t.Python.valueToCode(e,"X",t.Python.ORDER_NONE)||"0";return["math.atan2("+(t.Python.valueToCode(e,"Y",t.Python.ORDER_NONE)||"0")+", "+n+") / math.pi * 180",t.Python.ORDER_MULTIPLICATIVE]},t.Python.math_slider=function(e){if(1/0==(e=Number(e.getFieldValue("NUM")))){e='float("inf")';var n=t.Python.ORDER_FUNCTION_CALL}else-1/0==e?(e='-float("inf")',n=t.Python.ORDER_UNARY_SIGN):n=0>e?t.Python.ORDER_UNARY_SIGN:t.Python.ORDER_ATOMIC;return[e,n]},t.Python.procedures={},t.Python.procedures_defreturn=function(e){for(var n,o=[],l=e.workspace,i=t.Variables.allUsedVarModels(l)||[],a=0;n=i[a];a++)n=n.name,-1==e.getVars().indexOf(n)&&o.push(t.Python.variableDB_.getName(n,t.VARIABLE_CATEGORY_NAME));for(i=t.Variables.allDeveloperVariables(l),a=0;a<i.length;a++)o.push(t.Python.variableDB_.getName(i[a],t.Names.DEVELOPER_VARIABLE_TYPE));o=(o=o.concat(Array.from(new Set(t.Declare)))).length?t.Python.INDENT+"global "+o.join(", ")+"\n":"",l=t.Python.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),n="",t.Python.STATEMENT_PREFIX&&(n+=t.Python.injectId(t.Python.STATEMENT_PREFIX,e)),t.Python.STATEMENT_SUFFIX&&(n+=t.Python.injectId(t.Python.STATEMENT_SUFFIX,e)),n&&(n=t.Python.prefixLines(n,t.Python.INDENT));var s="";t.Python.INFINITE_LOOP_TRAP&&(s=t.Python.prefixLines(t.Python.injectId(t.Python.INFINITE_LOOP_TRAP,e),t.Python.INDENT));var r=t.Python.statementToCode(e,"STACK"),c=t.Python.valueToCode(e,"RETURN",t.Python.ORDER_NONE)||"",u="";r&&c&&(u=n),c?c=t.Python.INDENT+"return "+c+"\n":r||(r=t.Python.PASS);var _=[];for(i=e.getVars(),a=0;a<i.length;a++)_[a]=t.Python.variableDB_.getName(i[a],t.VARIABLE_CATEGORY_NAME);return o="def "+l+"("+_.join(", ")+"):\n"+o+n+s+r+u+c,o=t.Python.scrub_(e,o),t.Python.definitions_["%"+l]=o,null},t.Python.procedures_defnoreturn=t.Python.procedures_defreturn,t.Python.procedures_callreturn=function(e){for(var n=t.Python.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),o=[],l=e.getVars(),i=0;i<l.length;i++)o[i]=t.Python.valueToCode(e,"ARG"+i,t.Python.ORDER_NONE)||"None";return[n+"("+o.join(", ")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.procedures_callnoreturn=function(e){return t.Python.procedures_callreturn(e)[0]+"\n"},t.Python.procedures_ifreturn=function(e){var n="if "+(t.Python.valueToCode(e,"CONDITION",t.Python.ORDER_NONE)||"False")+":\n";return t.Python.STATEMENT_SUFFIX&&(n+=t.Python.prefixLines(t.Python.injectId(t.Python.STATEMENT_SUFFIX,e),t.Python.INDENT)),e.hasReturnValue_?(e=t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"None",n+=t.Python.INDENT+"return "+e+"\n"):n+=t.Python.INDENT+"return\n",n},t.Python.texts={},t.Python.text=function(e){return[t.Python.quote_(e.getFieldValue("TEXT")),t.Python.ORDER_ATOMIC]},t.Python.text_password=function(e){return[t.Python.quote_(e.getFieldValue("TEXT")),t.Python.ORDER_ATOMIC]},t.Python.text_unescaped=function(e){return[t.Python.quote_unescaped_(e.getFieldValue("TEXT")),t.Python.ORDER_ATOMIC]},t.Python.text_copy=function(e){return[e.getFieldValue("TEXT"),t.Python.ORDER_FUNCTION_CALL]},t.Python.text_multiline=function(e){var n=-1!=(e=t.Python.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?t.Python.ORDER_ADDITIVE:t.Python.ORDER_ATOMIC;return[e,n]},t.Python.text.forceString_=function(e){return t.Python.text.forceString_.strRegExp.test(e)?[e,t.Python.ORDER_ATOMIC]:["str("+e+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.Python.text_join=function(e){switch(e.itemCount_){case 0:return["''",t.Python.ORDER_ATOMIC];case 1:return e=t.Python.valueToCode(e,"ADD0",t.Python.ORDER_NONE)||"''",t.Python.text.forceString_(e);case 2:var n=t.Python.valueToCode(e,"ADD0",t.Python.ORDER_NONE)||"''";return e=t.Python.valueToCode(e,"ADD1",t.Python.ORDER_NONE)||"''",[e=t.Python.text.forceString_(n)[0]+" + "+t.Python.text.forceString_(e)[0],t.Python.ORDER_ADDITIVE];default:n=[];for(var o=0;o<e.itemCount_;o++)n[o]=t.Python.valueToCode(e,"ADD"+o,t.Python.ORDER_NONE)||"''";return[e="''.join([str("+(e=t.Python.variableDB_.getDistinctName("x",t.VARIABLE_CATEGORY_NAME))+") for "+e+" in ["+n.join(", ")+"]])",t.Python.ORDER_FUNCTION_CALL]}},t.Python.text_append=function(e){var n=t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return e=t.Python.valueToCode(e,"TEXT",t.Python.ORDER_NONE)||"''",n+" = str("+n+") + "+t.Python.text.forceString_(e)[0]+"\n"},t.Python.text_length=function(e){return["len("+(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"''")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.text_isEmpty=function(e){return["not len("+(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"''")+")",t.Python.ORDER_LOGICAL_NOT]},t.Python.text_indexOf=function(e){var n="FIRST"==e.getFieldValue("END")?"find":"rfind",o=t.Python.valueToCode(e,"FIND",t.Python.ORDER_NONE)||"''";return n=(t.Python.valueToCode(e,"VALUE",t.Python.ORDER_MEMBER)||"''")+"."+n+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.Python.ORDER_ADDITIVE]:[n,t.Python.ORDER_FUNCTION_CALL]},t.Python.text_charAt=function(e){var n=e.getFieldValue("WHERE")||"FROM_START",o=t.Python.valueToCode(e,"VALUE","RANDOM"==n?t.Python.ORDER_NONE:t.Python.ORDER_MEMBER)||"''";switch(n){case"FIRST":return[o+"[0]",t.Python.ORDER_MEMBER];case"LAST":return[o+"[-1]",t.Python.ORDER_MEMBER];case"FROM_START":return[o+"["+(e=t.Python.getAdjustedInt(e,"AT"))+"]",t.Python.ORDER_MEMBER];case"FROM_END":return[o+"["+(e=t.Python.getAdjustedInt(e,"AT",1,!0))+"]",t.Python.ORDER_MEMBER];case"RANDOM":return t.Python.definitions_.import_random="import random",[t.Python.provideFunction_("text_random_letter",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(text):","  x = int(random.random() * len(text))","  return text[x];"])+"("+o+")",t.Python.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.Python.text_getSubstring=function(e){var n=e.getFieldValue("WHERE1"),o=e.getFieldValue("WHERE2"),l=t.Python.valueToCode(e,"STRING",t.Python.ORDER_MEMBER)||"''";switch(n){case"FROM_START":"0"==(n=t.Python.getAdjustedInt(e,"AT1"))&&(n="");break;case"FROM_END":n=t.Python.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":n="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(o){case"FROM_START":e=t.Python.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=t.Python.getAdjustedInt(e,"AT2",0,!0),t.isNumber(String(e))?"0"==e&&(e=""):(t.Python.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[l+"["+n+" : "+e+"]",t.Python.ORDER_MEMBER]},t.Python.text_changeCase=function(e){var n={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[e.getFieldValue("CASE")];return[(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_MEMBER)||"''")+n,t.Python.ORDER_FUNCTION_CALL]},t.Python.text_trim=function(e){var n={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[e.getFieldValue("MODE")];return[(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_MEMBER)||"''")+n,t.Python.ORDER_FUNCTION_CALL]},t.Python.text_print=function(e){return"print("+(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_NONE)||"''")+")\n"},t.Python.text_prompt_ext=function(e){var n=t.Python.provideFunction_("text_prompt",["def "+t.Python.FUNCTION_NAME_PLACEHOLDER_+"(msg):","  try:","    return raw_input(msg)","  except NameError:","    return input(msg)"]);return n=n+"("+(e.getField("TEXT")?t.Python.quote_(e.getFieldValue("TEXT")):t.Python.valueToCode(e,"TEXT",t.Python.ORDER_NONE)||"''")+")","NUMBER"==e.getFieldValue("TYPE")&&(n="float("+n+")"),[n,t.Python.ORDER_FUNCTION_CALL]},t.Python.text_prompt=t.Python.text_prompt_ext,t.Python.text_count=function(e){return[(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_MEMBER)||"''")+".count("+(e=t.Python.valueToCode(e,"SUB",t.Python.ORDER_NONE)||"''")+")",t.Python.ORDER_FUNCTION_CALL]},t.Python.text_replace=function(e){return[(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_MEMBER)||"''")+".replace("+(t.Python.valueToCode(e,"FROM",t.Python.ORDER_NONE)||"''")+", "+(e=t.Python.valueToCode(e,"TO",t.Python.ORDER_NONE)||"''")+")",t.Python.ORDER_MEMBER]},t.Python.text_reverse=function(e){return[(t.Python.valueToCode(e,"TEXT",t.Python.ORDER_MEMBER)||"''")+"[::-1]",t.Python.ORDER_MEMBER]},t.Python.variables={},t.Python.variables_get=function(e){return[t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.Python.ORDER_ATOMIC]},t.Python.variables_set=function(e){var n=t.Python.valueToCode(e,"VALUE",t.Python.ORDER_NONE)||"0";return t.Python.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+n+"\n"},t.Python.variablesDynamic={},t.Python.variables_get_dynamic=t.Python.variables_get,t.Python.variables_set_dynamic=t.Python.variables_set,t.Python}),Blockly.Msg.ADD_COMMENT="Add Comment",Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",Blockly.Msg.CHANGE_VALUE_TITLE="Change value:",Blockly.Msg.CLEAN_UP="Clean up Blocks",Blockly.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",Blockly.Msg.COLLAPSE_ALL="Collapse Blocks",Blockly.Msg.COLLAPSE_BLOCK="Collapse Block",Blockly.Msg.COLOUR_BLEND_COLOUR1="colour 1",Blockly.Msg.COLOUR_BLEND_COLOUR2="colour 2",Blockly.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",Blockly.Msg.COLOUR_BLEND_RATIO="ratio",Blockly.Msg.COLOUR_BLEND_TITLE="blend",Blockly.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",Blockly.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",Blockly.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",Blockly.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",Blockly.Msg.COLOUR_RANDOM_TITLE="random colour",Blockly.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",Blockly.Msg.COLOUR_RGB_BLUE="blue",Blockly.Msg.COLOUR_RGB_GREEN="green",Blockly.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",Blockly.Msg.COLOUR_RGB_RED="red",Blockly.Msg.COLOUR_RGB_TITLE="colour with",Blockly.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",Blockly.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",Blockly.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",Blockly.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",Blockly.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",Blockly.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",Blockly.Msg.CONTROLS_IF_MSG_ELSE="else",Blockly.Msg.CONTROLS_IF_MSG_ELSEIF="else if",Blockly.Msg.CONTROLS_IF_MSG_IF="if",Blockly.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",Blockly.Msg.CONTROLS_REPEAT_INPUT_DO="do",Blockly.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",Blockly.Msg.DELETE_BLOCK="Delete Block",Blockly.Msg.DELETE_VARIABLE="Delete the '%1' variable",Blockly.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",Blockly.Msg.DISABLE_BLOCK="Disable Block",Blockly.Msg.DUPLICATE_BLOCK="Duplicate",Blockly.Msg.DUPLICATE_COMMENT="Duplicate Comment",Blockly.Msg.ENABLE_BLOCK="Enable Block",Blockly.Msg.EXPAND_ALL="Expand Blocks",Blockly.Msg.EXPAND_BLOCK="Expand Block",Blockly.Msg.EXTERNAL_INPUTS="External Inputs",Blockly.Msg.HELP="Help",Blockly.Msg.INLINE_INPUTS="Inline Inputs",Blockly.Msg.IOS_CANCEL="Cancel",Blockly.Msg.IOS_ERROR="Error",Blockly.Msg.IOS_OK="OK",Blockly.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",Blockly.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",Blockly.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",Blockly.Msg.IOS_PROCEDURES_INPUTS="INPUTS",Blockly.Msg.IOS_VARIABLES_ADD_BUTTON="Add",Blockly.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",Blockly.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",Blockly.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",Blockly.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",Blockly.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",Blockly.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",Blockly.Msg.LISTS_GET_INDEX_FIRST="first",Blockly.Msg.LISTS_GET_INDEX_FROM_END="# from end",Blockly.Msg.LISTS_GET_INDEX_FROM_START="#",Blockly.Msg.LISTS_GET_INDEX_GET="get",Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",Blockly.Msg.LISTS_GET_INDEX_LAST="last",Blockly.Msg.LISTS_GET_INDEX_RANDOM="random",Blockly.Msg.LISTS_GET_INDEX_REMOVE="remove",Blockly.Msg.LISTS_GET_INDEX_TAIL="",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",Blockly.Msg.LISTS_GET_SUBLIST_END_LAST="to last",Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",Blockly.Msg.LISTS_GET_SUBLIST_TAIL="",Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",Blockly.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",Blockly.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",Blockly.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",Blockly.Msg.LISTS_INLIST="in list",Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",Blockly.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",Blockly.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",Blockly.Msg.LISTS_LENGTH_TITLE="length of %1",Blockly.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",Blockly.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",Blockly.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",Blockly.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",Blockly.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",Blockly.Msg.LISTS_SET_INDEX_INPUT_TO="as",Blockly.Msg.LISTS_SET_INDEX_INSERT="insert at",Blockly.Msg.LISTS_SET_INDEX_SET="set",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",Blockly.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",Blockly.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",Blockly.Msg.LISTS_SORT_ORDER_DESCENDING="descending",Blockly.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",Blockly.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",Blockly.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",Blockly.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",Blockly.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",Blockly.Msg.LOGIC_BOOLEAN_FALSE="false",Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",Blockly.Msg.LOGIC_BOOLEAN_TRUE="true",Blockly.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",Blockly.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",Blockly.Msg.LOGIC_NEGATE_TITLE="not %1",Blockly.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",Blockly.Msg.LOGIC_NULL="null",Blockly.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",Blockly.Msg.LOGIC_NULL_TOOLTIP="Returns null.",Blockly.Msg.LOGIC_OPERATION_AND="and",Blockly.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",Blockly.Msg.LOGIC_OPERATION_OR="or",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",Blockly.Msg.LOGIC_TERNARY_CONDITION="test",Blockly.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",Blockly.Msg.LOGIC_TERNARY_IF_FALSE="if false",Blockly.Msg.LOGIC_TERNARY_IF_TRUE="if true",Blockly.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",Blockly.Msg.MATH_ADDITION_SYMBOL="+",Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",Blockly.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",Blockly.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",Blockly.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",Blockly.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",Blockly.Msg.MATH_CHANGE_TITLE="change %1 by %2",Blockly.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",Blockly.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",Blockly.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",Blockly.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",Blockly.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",Blockly.Msg.MATH_DIVISION_SYMBOL="\xf7",Blockly.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",Blockly.Msg.MATH_IS_EVEN="is even",Blockly.Msg.MATH_IS_NEGATIVE="is negative",Blockly.Msg.MATH_IS_ODD="is odd",Blockly.Msg.MATH_IS_POSITIVE="is positive",Blockly.Msg.MATH_IS_PRIME="is prime",Blockly.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",Blockly.Msg.MATH_IS_WHOLE="is whole",Blockly.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",Blockly.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",Blockly.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",Blockly.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",Blockly.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",Blockly.Msg.MATH_NUMBER_TOOLTIP="A number.",Blockly.Msg.MATH_ONLIST_HELPURL="",Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",Blockly.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",Blockly.Msg.MATH_POWER_SYMBOL="^",Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",Blockly.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",Blockly.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",Blockly.Msg.MATH_ROUND_OPERATOR_ROUND="round",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",Blockly.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",Blockly.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",Blockly.Msg.MATH_SINGLE_OP_ROOT="square root",Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",Blockly.Msg.MATH_SUBTRACTION_SYMBOL="-",Blockly.Msg.MATH_TRIG_ACOS="acos",Blockly.Msg.MATH_TRIG_ASIN="asin",Blockly.Msg.MATH_TRIG_ATAN="atan",Blockly.Msg.MATH_TRIG_COS="cos",Blockly.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",Blockly.Msg.MATH_TRIG_SIN="sin",Blockly.Msg.MATH_TRIG_TAN="tan",Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",Blockly.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",Blockly.Msg.NEW_NUMBER_VARIABLE="Create number variable...",Blockly.Msg.NEW_STRING_VARIABLE="Create string variable...",Blockly.Msg.NEW_VARIABLE="Create variable...",Blockly.Msg.NEW_VARIABLE_TITLE="New variable name:",Blockly.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",Blockly.Msg.ORDINAL_NUMBER_SUFFIX="",Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",Blockly.Msg.PROCEDURES_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CREATE_DO="Create '%1'",Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",Blockly.Msg.PROCEDURES_DEFNORETURN_DO="",Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE="to",Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFRETURN_RETURN="return",Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",Blockly.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",Blockly.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",Blockly.Msg.REDO="Redo",Blockly.Msg.REMOVE_COMMENT="Remove Comment",Blockly.Msg.RENAME_VARIABLE="Rename variable...",Blockly.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",Blockly.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_APPEND_TITLE="to %1 append text %2",Blockly.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",Blockly.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",Blockly.Msg.TEXT_CHARAT_FIRST="get first letter",Blockly.Msg.TEXT_CHARAT_FROM_END="get letter # from end",Blockly.Msg.TEXT_CHARAT_FROM_START="get letter #",Blockly.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",Blockly.Msg.TEXT_CHARAT_LAST="get last letter",Blockly.Msg.TEXT_CHARAT_RANDOM="get random letter",Blockly.Msg.TEXT_CHARAT_TAIL="",Blockly.Msg.TEXT_CHARAT_TITLE="in text %1 %2",Blockly.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",Blockly.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",Blockly.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",Blockly.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",Blockly.Msg.TEXT_GET_SUBSTRING_TAIL="",Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",Blockly.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",Blockly.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",Blockly.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",Blockly.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",Blockly.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",Blockly.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",Blockly.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_LENGTH_TITLE="length of %1",Blockly.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",Blockly.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",Blockly.Msg.TEXT_PRINT_TITLE="print %1",Blockly.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",Blockly.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",Blockly.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",Blockly.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",Blockly.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",Blockly.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",Blockly.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",Blockly.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",Blockly.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",Blockly.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",Blockly.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",Blockly.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",Blockly.Msg.TODAY="Today",Blockly.Msg.UNDO="Undo",Blockly.Msg.UNNAMED_KEY="unnamed",Blockly.Msg.VARIABLES_DEFAULT_NAME="item",Blockly.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",Blockly.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",Blockly.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",Blockly.Msg.VARIABLES_SET="set %1 to %2",Blockly.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",Blockly.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",Blockly.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",Blockly.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",Blockly.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF,Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE,Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF,Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL,Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT,Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE,Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.MATH_HUE="230",Blockly.Msg.LOOPS_HUE="120",Blockly.Msg.LISTS_HUE="260",Blockly.Msg.LOGIC_HUE="210",Blockly.Msg.VARIABLES_HUE="330",Blockly.Msg.TEXTS_HUE="160",Blockly.Msg.PROCEDURES_HUE="290",Blockly.Msg.COLOUR_HUE="20",Blockly.Msg.VARIABLES_DYNAMIC_HUE="310",function(t){var e={};function n(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)n.d(o,l,function(e){return t[e]}.bind(null,l));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=157)}([function(t,e,n){"use strict";n.r(e),n.d(e,"addImage",function(){return o}),n.d(e,"helpImg",function(){return l}),n.d(e,"alignData",function(){return i}),n.d(e,"coreTwofont",function(){return a}),n.d(e,"fontData",function(){return s}),n.d(e,"getAll",function(){return r}),n.d(e,"button_events",function(){return c}),n.d(e,"mode",function(){return u}),n.d(e,"hiddenMode",function(){return _}),n.d(e,"checkedOptions",function(){return d}),n.d(e,"checked_events",function(){return h}),n.d(e,"coreink_color",function(){return y}),n.d(e,"lora470ChannelOp",function(){return p}),n.d(e,"lora915ChannelOp",function(){return m}),n.d(e,"addFileFun",function(){return k}),n.d(e,"getResKeys",function(){return g}),n.d(e,"getResWavs",function(){return f}),n.d(e,"getBlynkEventOptions",function(){return b}),n.d(e,"findObj",function(){return v}),n.d(e,"getCbIdByEventId",function(){return T}),n.d(e,"createShadow",function(){return E}),n.d(e,"createChildBlock",function(){return B});var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANa0lEQVR4Xu2dX8hlZRXGn0V/EKKYKfpjaBT9w7GkwSANkhnIYgbGilCKaCqo1IswGudKYya0K8fQLrIsKA0K9MIYSckIxQvNaBiyZoJCijTMpIy86SJY8X6zp/lG53x7rX3efd61vvc58PFdnGe/e73PWr+93r3P2WcL+KIDdGChA0Jv6AAdWOwAAWF10IENHCAgLA86QEBYA3RgmgPsINN841adOEBAOkk0pznNAQIyzTdu1YkDBKSTRHOa0xwgINN841adOEBAOkk0pznNAQIyzTdu1YkDKQFR1ZcA2Alg67q/szrJmWeaxwEcE5Hyn68JDqQBRFULDJcC2AXgUwBeNmG+vW7yAID9IvJ4rwZMnXcKQFT1GgD7AJw7daLcDs8A+JKI3E0v7A6EBkRVLxvAuMQ+JSpHHLiCkNhrJCwgqnojgOvsU6HS4QAhMZoVEhBV/QmAjxjnQNk0BwiJwbdwgKjqHQD2GmKnZHkHCMmIh6EAUdWrANy2fN45gsMBQrKBWWEAUdVPAPixI7GU1nOAkCzwMgQgqroFwCMAzquXc47kdICQnMGwKIDwipWzmmeSE5IXGNscEFXdPnQPflVkpqp3DktI1hkWAZAbAFzvTCLl8zpASAZ/IwDyGwAXTMz3QQBHyp+IPD1xjBSbqeqDAHasMFhCAqApIKr6HgBHJyT9GICSwG6+pdoAkJKW7iFpDcgBAKULuF4i0jRuV7CVxBMAeahSx+kakqaFpqq3ACjf1PW8rhSR2z0bbAbtREC+BeCuCvPvFpLWgEz5WsnbROSJCklPNcQUQERkp6peTkimp7o1IIcB7HGE/1cROceh3zTSqYAUAwjJ9DJoDYj3ysxD5ag4fbp5t1wGEEIyPe8EZLp3K91yWUAIybR0EZBpvq18qxqAEBJ/2giI37MmW9QChJD40kdAfH41U9cEhJDY00hA7F41VdYGhJDY0klAbD41V80BCCEZTysBGfcohGIuQAjJxuklICHKfzyIOQEhJIv9JyDjtRlCMTcghOTMaSYgIcp/PIhVAEJIXpwHAjJemyEUqwKEkJyebgISovzHg1glIITkVD4IyHhthlCsGhBCciLtBCRE+Y8H0QIQQkJAxisziKIVIL1Dwg4SBICxMFoC0jMkBGSsMoO83xqQXiEhIEEAGAsjAiA9QkJAxiozyPtRAOkNEgISBICxMCIB0hMkBGSsMoO8Hw2QXiAhIEEAGAsjIiA9QEJAxiozyPtRAdnskBCQIACMhREZkM0MCQEZq8wg70cHZLNCQkCCADAWRgZANiMkBGSsMoO8nwWQypB8UER+0TIFBKSl+459ZwKkIiS/AlAged5hVVUpAalq53yDZQOkIiSfE5EfzOfsxiMTkFbOO/ebEZBKkHxTRLwPWXK6u1hOQKpZOe9AUwABUB7DFuXlftTeEHjTR14QkCjlMxKHqv4IwCeThFszTALicLOpWY44q0tV9RCAfdUHjj9g05yzg8QvkLUIVfWjAO5JEm7NMAmIw82mZjnirC5V1VcAeArAluqDxx6wac7ZQWIXx2nRqWp5rPPViUKuESoBcbjY1CxHnLNIVfWdAB4FsHWWHcQctGnO2UFiFsXCqFT1AICpl0yTzXYtXALiyFpTsxxxzipV1Z8C2D3rTuIM3jTn7CBxCsEViap+H8BnXRvlFBMQR96amuWIcyXSTpZbTXPODrKSUp5vJ6r6AQDlu0ofn28vTUcmIA77m5rliHPlUlW9GMAeADsAnA3gjQBevvJA6u+wac7ZQeonlCNu4MCUL12KyM5WphKQVs53ul8C4kh8NrMcU6N0gQPZcs4OwlJeqQMExGF3NrMcU6OUHWT5GiAgy3uYbYRsOecSK0CFqeqlAM4HcOEQzhEAx0Tk5wHCqxoCAXHYmc0sx9TMUlU9PHx+caZt7hWRy8yDJRBmyzk7SMOiUtXfDZ1joyhKJ3lXwzCr7pqAOOzMZpZjaqNSVb0KwG2jwhOCq0Xk20ZtaFm2nLODNConVX0cwLuNu/+tiFxg1IaWERBHerKZ5ZjahlJVLXcE/tM53qtF5DnnNuHk2XLODtKghFS1fKHwQeeud4pIpB+Cc4Z/Qk5AHLZlM8sxtbEOQkDsZvLbvHav2t6f7IiTgCxwINtBkUusWlXvGIdLrLV7VqwvdhCrU61/4cIRJzsIO8jy5ZKt3S4/4/+fqPIcxG4mO4jdK56DOLwKKc12UOQ5SIMy4jkIz0FMZZftaGKalEFEQAiIoUzyfWhkmpRBREAIiKFMCIjJpFMifpLuNKyGnOcgNVx0jsEOwg5iKhmeg5hsOiliB3HZVUfMDlLHR9co7CDsIKaCYQcx2cQOwl9WNBdK009VzVGOCNlB2EFMtcQOYrKJHYQdxFwo7CBmq2IKsx0UeZLeoI64xOISy1R22Y4mpkkZRASEgBjKhJ+km0ziJ+lNl9VcYjmrtIacHYQdxFRHXGKZbOJVLF7FMhdK03ZrjpKfgyx0INtBkUusWlXvGIdLLC6xTOUS6Wiiqq8dfkh6O4BXmSawnOigc3Ov3jn8mvzfAI4Oj154dsoAY9tEyvlYrOV9dpATv/b3HQBftBjWkeZ2Ebmy9nwJiMPRCGapqjpC7k4qIlUPohFy7kli1cl7dly0rc1S1WsB3OSNuzP9fhE5VGvOrXPunUe3gKjq6wH8zWtYp/o3iMgzNeZOQBwutjRLVT8E4GeOcHuWflhEHqhhQMucT4m/5w7C5ZW9YqotswiI3fSm5yCqejmAuxzh9iy9QkTurmEAAXG42NIsVd1Wrvc7wu1Zer6IHK9hQMucT4m/2yXWcBXt1+ueTT7Fvx62OSIi7601UQLicLK1Waq6C8B9jpB7lO4WkftrTbx1zr3z6LqDDF2E5yKLq6baucfJXRAQB6JRzBo+E9k/LLcuBPBKxzQ2k/R5AEeGv5tqffax3qAoObcmrfsOYjWqpo7f5uW3eU31lO1oYpqUQURACIihTNp/F8sU5AwiAkJATGXFDmKy6aSIP17tsquOmOcgdXx0jcIOwg5iKhh2EJNN7CD80QZzofBHG8xWxRRmOyhyidWgjrjE4hLLVHbZjiamSRlEBISAGMqEl3lNJp0S8SqW07Aaci6xarjoHIMdhB3EVDJcYpls4lUsXsUyFwqvYpmtiinMdlDkEqtBHXGJxSWWqeyyHU1MkzKICAgBMZQJr2KZTOJVrKbLai6xnFVaQ84Owg5iqiMusUw28SoWr2KZC6VpuzVHOSJkB2EHMdUSO4jJJnYQdhBzobCDmK2KKcx2UORJeoM64hKLSyxT2WU7mpgmZRAREAJiKBN+DmIyiZ+DNF1Wc4nlrNIacnYQdhBTHXW8xHo7gD+YTDoleoeI/NG5TTh5tpyzgzQqIVX9O4Dy6GnL61kReZ1FGF1DQBwZymaWY2qjUlU9DGDPqPCE4F4RucyoDS3LlnN2kEblpKrvA/BL4+4vEpHHjNrQMgLiSE82sxxTM0lV9QCAgyPigyLyNdOACUTZcs4O0rioVPWtw7PaLwHwmiGcfwB4GEB5eOYTjUOsunsC4rAzm1mOqU2Squp5ZUMR+f2kARJslC3n7CAJimozhUhAHNnMZpZjapQucCBbztlBWMordYCAOOzOZpZjapSygyxfAwRkeQ+zjZAt51xiZauw5PESEEcCs5nlmBqlXGItXwMEZHkPs42QLedcYmWrsOTxEhBHArOZ5ZgapVxiLV8DBGR5D7ONkC3nXGJlq7Dk8RIQRwKdNw2VkZ8UkTc5dkFpMAdU9S8AznWE1fRmsdYd5A4Aex1mFelbROTPzm0oD+CAqr4ZwJ+codwpIp9xblNN3hqQWwBc45xNuUfikHMbygM4oKrXDve+eKK5VUS+7NmgprY1IJY76l40XxFpGnfNBPQ0lqrqhPk2vaOyaaENNwgdn2BauT/7YyLy9IRtucmKHVDVswHcA6Dch+99bWt5A1lTQIpTqlp+uGCKcWXzcj93AexREXnK6zz18zmgqucAuBjANsN994sCeUxELpovyvGRIwByPYAbxkOlokMHvioiN7acdwRAtgN4BMBZLY3gvsM58B8A7xeRoy0jaw7IsMwqR4nrWhrBfYdz4OsiUlYXTV9RANkydJG1X/Xgq3sHyq+6lO7xr9ZOhABk6CKfBnBna0O4/xAO7BWRH0aIJAwgAyRTPjiM4CNjqOdA0w8GXziNUIAMkNwHYFc9vzlSIgfuF5HdkeINB8gAyc0AvhLJKMYyuwPfEJF9s+/FuYOQgAyQfB7Ad53zoTynA18Qke9FDD0sIAMk5ZkY5ahSftiZr83nQPmB7ptFpDwrJeQrNCAnHVPV8o3fAornPoKQhjOoNQeeHMC4NbofKQAZukl5NEDpKOWpTOXvpdHNZXynOfDf8qSs4e+wiJRHPIR/pQFkvZOqWuDYAWDruj9+VSVWuZWvijy37q88zrlAkuqVEpBUDjPY1A4QkNTpY/BzO0BA5naY46d2gICkTh+Dn9sBAjK3wxw/tQMEJHX6GPzcDhCQuR3m+KkdICCp08fg53aAgMztMMdP7QABSZ0+Bj+3AwRkboc5fmoHCEjq9DH4uR34HxpHn0HVAgJtAAAAAElFTkSuQmCC",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF9ElEQVR4Xu1bi5FVNwyVKkioIFBBoIKQChIqACoAKghUEKggUEGgAqCCQAWBCoAKlDmJnCh6si1/7mNndj2zszv77rWlo6OPZT+mSz74kutPVwBcMeAMCIjITSL6gYjw+7r5sat/ICL8vNPfb5kZfx86DnMBEfmJiO4R0W0i+nZSi89E9IaInjPzq8k5mq9tBUBEoOgDInq4oHRNYIDxlIieMTP+3jK2AHCw4l7RrUAsAyAiPxPRr+rXNat8USrDp0Hpz96/NU6AQXAZxAr8/qZhZsSLR8z8coUKSwCICBQH3aMBpSHc09lgpqBgfoBcAwPzP5oFYQoApfxrtZRfG4rDVyHYFl/V9QAEfiIgwKwfZ9YbBkCt8nuF8s+I6PGMIBkLKhCPNdD6VwDC/VG2DQGgysPyPq19BE1HF88oHT2jcsC9vnOfg3FgQrp+SAOg6P8RWB75+d5RVq+BpPI8JyLUG3YMucMIAFAe0dmOF8yMYic9NGvYqhDvlgrwzWjBIyIA4a4HgZlvZYRKASAiCGoocKaVFxGkNWQND6KXE2nyCTPjd2pUQEDBVMtQ/87bBUAthqBnxytmRmpKDRFB4Pol9fB/Dz1kZgTV1BARxATvDogHTSCbAFT8HgHvZtbnJ5UvSqPQAfu6Q2WF/9vACNe61ZK1B0BkOUyYirIV9kCZF1oklXngFmCU92U827ViQUezA2KVHXAn6BGOKgCK6J8u5aX8yggEC1iLoEi6XQNQFQBlbbHzLhvQsG4Qr5Aab9RY0ALAWx/CXx+gPrLDbw72Lns0WKLWsONOtuZXwwF4C2KVBS0APjnrN6nk+RVE5jR7gneH0m0Qd7D5uhb5QAhA4LtD1lcqwr+/N4t2rW9cBynTsgDdIfwvNSosCFlUA8CnlCELKABipWXmbsq1z4vI6vu+QAp1qAHg6Z+2nrEigk/xw4/MjF5gaogInkUALuMLMw+11YJYErrBCQBBKhleXBkAysIKGNgrjFR2PgAPuUDFCPj3iSEjAFA+omQtY6jqS5m48dBMLq9NF1SHJ4VVBID3naHovwJAZbs9VHm6OOKZdJKJIgBAVezWykhXYgcojynTNYBfP4gDJ64UAYDgYwPWcAAcBaLRaFliXwDAB2a+YeWLAFhKPxPKI7r7khvTDKfeaO1eOr0IAPiCaZvymo2aBv2qAOxotPQYd2EZEBQ70GV7yp0BwG9hDwmCgfWn012jDvB7ipOK9KulQRHx6XY63Q0AkEqDZymEPDWJ6Fq219Dze1MKTxVCZymFe76ZVbL13GwpjP6c7atVmwkrQp4JgO6utrYdtltZ6Lk9EB4NQFAFhrvawxoiPXaIiAV5asvdof9SQwQtansY0uys9pStlKi2aYpT3dI7mJnuf+9UOtr5lpiWkN4NljYmy1oNTBA0RasMG2mLb2fBgE7pRyvWn2qLY5fm++vp1nZa4s0PBhVms6N96NHYZt26082003oAgAXDB45dSf85wkKVVs4CcRHySea9RtkLWf0Fju7+oturrxxwvmTmO7MCV06Ml4KsiCBr+SP7bjuvC4BmhOiCBKx2fwYEVwOUKU7aVdm5RQRnkP6mSipepQBQEKLOzRQIFQCGDk/MhidS/j0z926i/D3FCADwMWxh7Xkf5sAxGgqZ9J3ASicoZTGjOOQB7f2Z4Xs9gk/JkwZAWQBU/fk9PkK6RKWVvTgB4REEC21RBabvFzbuKjbvH0QuNQSAAQECeybgY8QKBLMU+lkfd1bHXaPo8hMsjyO4lBHKnMMAKAg1d8DHW29zm/Va1/CHaG+BnwLAWCTKDuVjAIH4gP5++mDUCqdbWtQKSG+10+Gh2OFZtwSAWgfCAQh/bdWuVb75Ua7LEzO/dcqW4zh7Xb51JI4iZ+jUeUsMiCZJ3OYedffW81tvoy8zwFkRFmtda18BYqviS0Ewo4WW0OVLU61vfvSsjTiC0nvpmyG1RbYyoLaI5m34Nk6dy1fnfMyAT9uvzeHi9FBKyxhmexCcWfQivXMWBlwkha8Y4BC49Az4C25aD27/El7mAAAAAElFTkSuQmCC",i=function(){return[["center","ALIGN_CENTER"],["in_top_left","ALIGN_IN_TOP_LEFT"],["in_top_mid","ALIGN_IN_TOP_MID"],["in_top_right","ALIGN_IN_TOP_RIGHT"],["in_bottom_left","ALIGN_IN_BOTTOM_LEFT"],["in_bottom_mid","ALIGN_IN_BOTTOM_MID"],["in_bottom_right","ALIGN_IN_BOTTOM_RIGHT"],["in_left_mid","ALIGN_IN_LEFT_MID"],["in_right_mid","ALIGN_IN_RIGHT_MID"],["out_top_left","ALIGN_OUT_TOP_LEFT"],["out_top_mid","ALIGN_OUT_TOP_MID"],["out_top_right","ALIGN_OUT_TOP_RIGHT"],["out_bottom_left","ALIGN_OUT_BOTTOM_LEFT"],["out_bottom_mid","ALIGN_OUT_BOTTOM_MID"],["out_bottom_right","ALIGN_OUT_BOTTOM_RIGHT"],["out_left_top","ALIGN_OUT_LEFT_TOP"],["out_left_mid","ALIGN_OUT_LEFT_MID"],["out_left_bottom","ALIGN_OUT_LEFT_BOTTOM"],["out_right_top","ALIGN_OUT_RIGHT_TOP"],["out_right_mid","ALIGN_OUT_RIGHT_MID"],["out_right_bottom","ALIGN_OUT_RIGHT_BOTTOM"]]},a=function(){return[["Montserrat 12","FONT_MONT_12"],["Montserrat 14","FONT_MONT_14"],["Montserrat 16","FONT_MONT_16"],["Montserrat 18","FONT_MONT_18"],["Montserrat 20","FONT_MONT_20"],["Montserrat 22","FONT_MONT_22"],["Montserrat 24","FONT_MONT_24"],["Montserrat 26","FONT_MONT_26"],["Montserrat 28","FONT_MONT_28"],["Montserrat 30","FONT_MONT_30"],["Montserrat 32","FONT_MONT_32"],["Montserrat 34","FONT_MONT_34"],["Montserrat 36","FONT_MONT_36"],["Montserrat 38","FONT_MONT_38"],["Montserrat 40","FONT_MONT_40"],["Montserrat 42","FONT_MONT_42"],["Montserrat 44","FONT_MONT_44"],["Montserrat 46","FONT_MONT_46"],["Montserrat 48","FONT_MONT_48"],["Unicode 24","FONT_UNICODE_24"]]},s=function(){return[["FONT_Default","FONT_Default"],["FONT_DefaultSmall","FONT_DefaultSmall"],["FONT_DejaVu18","FONT_DejaVu18"],["FONT_DejaVu24","FONT_DejaVu24"],["FONT_DejaVu40","FONT_DejaVu40"],["FONT_DejaVu56","FONT_DejaVu56"],["FONT_DejaVu72","FONT_DejaVu72"],["FONT_Ubuntu","FONT_Ubuntu"],["FONT_Comic","FONT_Comic"]]},r=function(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"button"!==Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t},c=function(){return[["wasPressed","pressed"],["wasReleased","released"]]},u=function(){return[["hide","hide"],["show","show"]]},_=function(){return[["hide","True"],["show","False"]]},d=function(){return[["checked","True"],["unchecked","False"]]},h=function(){return[["checked","checked"],["unchecked","unchecked"]]},y=function(){return[["Black","Black"],["White","White"]]},p=function(){return[["0 ~ 7 (freqs 470.3 ~ 471.7)","0001"],["8 ~ 15 (freqs 471.9 ~ 473.3)","0002"],["16 ~ 23 (freqs 473.5 ~ 474.9)","0004"],["24 ~ 31 (freqs 475.1 ~ 476.5)","0008"],["32 ~ 39 (freqs 476.7 ~ 478.1)","0010"],["40 ~ 47 (freqs 478.3 ~ 479.7)","0020"],["48 ~ 55 (freqs 479.9 ~ 481.3)","0040"],["56 ~ 63 (freqs 481.5 ~ 482.9)","0080"],["64 ~ 71 (freqs 483.1 ~ 484.5)","0100"],["72 ~ 79 (freqs 484.7 ~ 486.1)","0200"],["80 ~ 87 (freqs 486.3 ~ 487.7)","0400"],["88 ~ 95 (freqs 487.9 ~ 489.3)","0800"]]},m=function(){return[["0 ~ 7 (freqs 915.2 ~ 916.6)","0001"],["8 ~ 15 (freqs 916.8 ~ 918.2)","0002"],["16 ~ 23 (freqs 918.4 ~ 919.8)","0004"],["24 ~ 31 (freqs 920.0 ~ 921.4)","0008"],["32 ~ 39 (freqs 921.6 ~ 923.0)","0010"],["40 ~ 47 (freqs 923.2 ~ 924.6)","0020"],["48 ~ 55 (freqs 924.8 ~ 926.2)","0040"],["56 ~ 63 (freqs 926.4 ~ 927.8)","0080"]]},k=function(t){if(!localStorage.getItem("mui_apikey"))return void Blockly.getTranslate_.get("KEY_ISNULL_ERROR").subscribe(t=>{Blockly.messagebox_().instance.error(t)});let e=50,n="FILE_SIZE_ERROR",o=/.pbm|.PBM|.jpg|.bmp|.JPG|.BMP|.png|.PNG/g,l=".bmp,.jpeg,.jpg,.png,.pbm";switch(t){case"bmp":o=/.bmp|.BMP/g,l=".bmp";break;case"key":o=/.crt|.key|.KEY|.CRT|.pem|.PEM/g,l=".key,.pem,.crt";break;case"wav":e=500,n="WAVFILE_SIZE_ERROR",o=/.wav|.WAV/g,l=".wav"}var i=document.createElement("input");i.hidden=!0,i.type="file",i.accept=l,document.body.appendChild(i),i.onchange=function(t){if(0===t.target.files.length)return t.target.value="",void Blockly.messagebox_().instance.error("");if(t.target.files[0].size>1e3*e)return t.target.value="",void Blockly.getTranslate_.get(n).subscribe(t=>{Blockly.messagebox_().instance.error(t)});const l=t.target.files[0].name.replace(o,"");return l.length>30?(t.target.value="",void Blockly.getTranslate_.get("FILE_NAME_EROR").subscribe(t=>{Blockly.messagebox_().instance.error(t)})):l.length>0&&/[^A-Za-z0-9_.@\$\^&\-\+\~()!\s]+/.test(l)?(t.target.value="",void Blockly.messagebox_().instance.error("Filename must be English or number or special characters (.@$^&()!_-+~).")):void Blockly.uploadFile_(t.target.files[0]).subscribe(t=>{200===t.status&&4===t.type&&Blockly.getDeviceInfo_().subscribe(t=>{})},e=>{Blockly.requestError_(0,e),t.target.value=""})},i.click()},g=function(){for(var t=[["Null","Null"]],e=0;e<Blockly.ResKeys.length;e++)t.push([Blockly.ResKeys[e],Blockly.ResKeys[e]]);return t},f=function(){for(var t=[["Null","Null"]],e=0;e<Blockly.ResWavs.length;e++)t.push([Blockly.ResWavs[e],Blockly.ResWavs[e]]);return t},b=function(){for(var t=[["v*","v*"]],e=1;e<32;e++)t.push(["v"+e,"v"+e]);return t},v=function(t){var e=null;if(null==t)return null;if(null!=t.sourceBlock_&&null!=t.sourceBlock_){if(null==t.sourceBlock_.nextConnection.targetConnection)return t.sourceBlock_;e=v(t.sourceBlock_.nextConnection.targetConnection)}else e=t.sourceBlock_;return e},T=function(t,e){let n="";return Blockly.eventCBIdList_.forEach(function(o){o.eventId===t&&o.type===e&&(n=o.cbId)}),n},E=function(t,e){let n=Blockly.utils.xml.createElement("shadow");n.setAttribute("type",t);let o=Blockly.utils.xml.createElement("field");if(e)for(var l in e)o.setAttribute(l,e[l]);return n.appendChild(o),n},B=function(t){let e=BlocklyEditor.newBlock(t);return e.initSvg(),e.render(),e}},function(t,e,n){"use strict";n.r(e),n.d(e,"_configAbpInit",function(){return l}),n.d(e,"_configOtaaInit",function(){return i}),n.d(e,"_checkJoinInit",function(){return a}),n.d(e,"_checkSentInit",function(){return s}),n.d(e,"_checkDownlinkInit",function(){return r}),n.d(e,"_rxWindowInit",function(){return c}),n.d(e,"_classmodeInit",function(){return u}),n.d(e,"_joinmodeInit",function(){return _});var o=n(0);Blockly.Blocks.base_lorawan470_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_init=function(t){return"dtu_lora470 = DTU_LoRaWAN()\n"};var l=function(){return{message0:Blockly.Msg.LORAWAN470_CONFIG_ABP,args0:[{type:"input_dummy"},{type:"input_value",name:"devaddr"},{type:"input_value",name:"appskey"},{type:"input_value",name:"nwkskey"}],previousStatement:null,nextStatement:null,tool:[]}};Blockly.Blocks.base_lorawan470_config_abp={init:function(){this.jsonInit(l()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_config_abp=function(t){return`dtu_lora470.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan470_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.GPS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_ABP_CONFIG,output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_get_abp_config=function(t){return["dtu_lora470.get_ABP_config()",Blockly.Python.ORDER_MEMBER]};var i=function(){return{message0:Blockly.Msg.LORAWAN470_CONFIG_OTAA,args0:[{type:"input_dummy"},{type:"input_value",name:"deveui"},{type:"input_value",name:"appkey"},{type:"input_value",name:"appeui"}],previousStatement:null,nextStatement:null,tool:[]}};Blockly.Blocks.base_lorawan470_config_otaa={init:function(){this.jsonInit(i()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_config_otaa=function(t){var e=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`dtu_lora470.config_OTAA(${e}, ${n}, ${o=o.replace(/\s*/g,"")})\n`},Blockly.Blocks.base_lorawan470_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.GPS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_OTAA_CONFIG,output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_get_otaa_config=function(t){return["dtu_lora470.get_OTAA_config()",Blockly.Python.ORDER_MEMBER]};var a=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_JOIN_STATUS,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.base_lorawan470_check_join_status={init:function(){this.jsonInit(a()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_check_join_status=function(t){return["dtu_lora470.check_join_status()",Blockly.Python.ORDER_MEMBER]};var s=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_SENT_STATUS,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.base_lorawan470_check_sent_status={init:function(){this.jsonInit(s()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_check_sent_status=function(t){return["dtu_lora470.check_uplink_status()",Blockly.Python.ORDER_MEMBER]};var r=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_DOWNLINK_DATA,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.base_lorawan470_check_downlink_data={init:function(){this.jsonInit(r()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_check_downlink_data=function(t){return["dtu_lora470.check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan470_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_frequency_band_mask=function(t){return`dtu_lora470.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`};var c=function(){return{message0:Blockly.Msg.LORAWAN470_SET_RX_WINDOW_PARAM,args0:[{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.base_lorawan470_set_rx_window_param={init:function(){this.jsonInit(c()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_set_rx_window_param=function(t){return`dtu_lora470.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`};var u=function(){return{message0:Blockly.Msg.LORAWAN470_SET_CLASS_MODE,args0:[{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.base_lorawan470_set_class_mode={init:function(){this.jsonInit(u()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_set_class_mode=function(t){return`dtu_lora470.set_class_mode(${t.getFieldValue("class_mode")})\n`};var _=function(){return{message0:Blockly.Msg.LORAWAN470_SET_JOIN_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OTAA","0"],["ABP","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.base_lorawan470_set_join_mode={init:function(){this.jsonInit(_()),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_set_join_mode=function(t){return`dtu_lora470.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan470_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SEND_DATA,args0:[{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.getInput("nbtrials").connection.targetConnection)){let t=o.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_send_data=function(t){var e=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`dtu_lora470.send_data(${e}, 1, ${n})\n`:`dtu_lora470.send_data(${e})\n`,o},Blockly.Blocks.base_lorawan470_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_set_uplink_app_port=function(t){return`dtu_lora470.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan470_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_JOIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_join=function(t){return`dtu_lora470.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan470_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_set_uplink_mode=function(t){return`dtu_lora470.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan470_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read=function(t){return["dtu_lora470.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read_characters=function(t){return[`dtu_lora470.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_readline=function(t){return["dtu_lora470.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:["Write data"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora470.write("+e+")\n":"dtu_lora470.write(str("+e+"))\n"},Blockly.Blocks.base_lorawan470_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_any=function(t){return["dtu_lora470.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora470.write("+e+'+"\\r\\n")\n':"dtu_lora470.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.base_lorawan470_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_raw_data=function(t){return`dtu_lora470.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.base_lorawan470_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read_coils=function(t){return[`dtu_lora470.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read_discrete_inputs=function(t){return[`dtu_lora470.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read_holding_registers=function(t){return[`dtu_lora470.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_read_input_registers=function(t){return[`dtu_lora470.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_single_coil=function(t){return[`dtu_lora470.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_single_register=function(t){return[`dtu_lora470.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_multiple_coils=function(t){return[`dtu_lora470.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan470_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_write_multiple_registers=function(t){return[`dtu_lora470.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const d=[["OTAA mode","OTAA"],["ABP mode","ABP"]];Blockly.Blocks.base_lorawan470_config_mode={init:function(){this.jsonInit(this._init()),this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(d,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},_init:function(){return{message0:"",args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=d[1],t.value_=this.mode}},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_config_mode=function(t){var e=t.getFieldValue("mode"),n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";l=l.replace(/\s*/g,"");var i=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let r;return r="OTAA"===e?`dtu_lora470.config_OTAA(${n}, ${o}, ${l})\n`:`dtu_lora470.config_ABP(${i}, ${a}, ${s})\n`,r},Blockly.Blocks.base_lorawan470_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_CONFIG,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_config=function(t){let e=`dtu_lora470.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`;return e+=`dtu_lora470.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,e+=`dtu_lora470.set_class_mode(${t.getFieldValue("class_mode")})\n`,e+=`dtu_lora470.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,e},Blockly.Blocks.base_lorawan470_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_join_stop=function(t){return"dtu_lora470.join(0)\n"},Blockly.Blocks.base_lorawan470_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_START,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.base_lorawan470_join_start=function(t){return`dtu_lora470.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`}},function(t,e,n){"use strict";n.r(e),n.d(e,"_configAbpInit",function(){return l}),n.d(e,"_configOtaaInit",function(){return i}),n.d(e,"_checkJoinInit",function(){return a}),n.d(e,"_checkSentInit",function(){return s}),n.d(e,"_checkDownlinkInit",function(){return r}),n.d(e,"_rxWindowInit",function(){return c}),n.d(e,"_classmodeInit",function(){return u}),n.d(e,"_joinmodeInit",function(){return _});var o=n(0);Blockly.Blocks.lorawan470_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_init=function(t){var e=Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||"";return Blockly.addDeclare("lora470"),`lora470 = LoRaWAN_470(tx=${e}, rx=${n})\n`};var l=function(){return{message0:Blockly.Msg.LORAWAN470_CONFIG_ABP,args0:[{type:"input_dummy"},{type:"input_value",name:"devaddr"},{type:"input_value",name:"appskey"},{type:"input_value",name:"nwkskey"}],previousStatement:null,nextStatement:null,tool:[]}};Blockly.Blocks.lorawan470_config_abp={init:function(){this.jsonInit(l()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_config_abp=function(t){return`lora470.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lorawan470_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.LISTS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_ABP_CONFIG,output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_get_abp_config=function(t){return["lora470.get_ABP_config()",Blockly.Python.ORDER_MEMBER]};var i=function(){return{message0:Blockly.Msg.LORAWAN470_CONFIG_OTAA,args0:[{type:"input_dummy"},{type:"input_value",name:"deveui"},{type:"input_value",name:"appkey"},{type:"input_value",name:"appeui"}],previousStatement:null,nextStatement:null,tool:[]}};Blockly.Blocks.lorawan470_config_otaa={init:function(){this.jsonInit(i()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_config_otaa=function(t){var e=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`lora470.config_OTAA(${e}, ${n}, ${o=o.replace(/\s*/g,"")})\n`},Blockly.Blocks.lorawan470_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.LISTS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_OTAA_CONFIG,output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_get_otaa_config=function(t){return["lora470.get_OTAA_config()",Blockly.Python.ORDER_MEMBER]};var a=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_JOIN_STATUS,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.lorawan470_check_join_status={init:function(){this.jsonInit(a()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_check_join_status=function(t){return["lora470.check_join_status()",Blockly.Python.ORDER_MEMBER]};var s=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_SENT_STATUS,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.lorawan470_check_sent_status={init:function(){this.jsonInit(s()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_check_sent_status=function(t){return["lora470.check_uplink_status()",Blockly.Python.ORDER_MEMBER]};var r=function(){return{message0:Blockly.Msg.LORAWAN470_CHECK_DOWNLINK_DATA,args0:[],output:null,inputsInline:!0,tool:[]}};Blockly.Blocks.lorawan470_check_downlink_data={init:function(){this.jsonInit(r()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_check_downlink_data=function(t){return["lora470.check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan470_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_frequency_band_mask=function(t){return`lora470.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`};var c=function(){return{message0:Blockly.Msg.LORAWAN470_SET_RX_WINDOW_PARAM,args0:[{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.lorawan470_set_rx_window_param={init:function(){this.jsonInit(c()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_set_rx_window_param=function(t){return`lora470.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`};var u=function(){return{message0:Blockly.Msg.LORAWAN470_SET_CLASS_MODE,args0:[{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.lorawan470_set_class_mode={init:function(){this.jsonInit(u()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_set_class_mode=function(t){return`lora470.set_class_mode(${t.getFieldValue("class_mode")})\n`};var _=function(){return{message0:Blockly.Msg.LORAWAN470_SET_JOIN_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OTAA","0"],["ABP","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}};Blockly.Blocks.lorawan470_set_join_mode={init:function(){this.jsonInit(_()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_set_join_mode=function(t){return`lora470.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.lorawan470_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SEND_DATA,args0:[{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=o.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_send_data=function(t){var e=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`lora470.send_data(${e}, 1, ${n})\n`:`lora470.send_data(${e})\n`,o},Blockly.Blocks.lorawan470_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_set_uplink_app_port=function(t){return`lora470.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.lorawan470_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_JOIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_join=function(t){return`lora470.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.lorawan470_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_set_uplink_mode=function(t){return`lora470.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`};const d=[["OTAA mode","OTAA"],["ABP mode","ABP"]];Blockly.Blocks.lorawan470_config_mode={init:function(){this.jsonInit(this._init()),this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(d,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},_init:function(){return{message0:"",args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=d[1],t.value_=this.mode}},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_config_mode=function(t){var e=t.getFieldValue("mode"),n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";l=l.replace(/\s*/g,"");var i=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let r;return r="OTAA"===e?`lora470.config_OTAA(${n}, ${o}, ${l})\n`:`lora470.config_ABP(${i}, ${a}, ${s})\n`,r},Blockly.Blocks.lorawan470_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_CONFIG,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_config=function(t){let e=`lora470.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`;return e+=`lora470.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,e+=`lora470.set_class_mode(${t.getFieldValue("class_mode")})\n`,e+=`lora470.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,e},Blockly.Blocks.lorawan470_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_join_stop=function(t){return"lora470.join(0)\n"},Blockly.Blocks.lorawan470_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_START,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.lorawan470_join_start=function(t){return`lora470.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`}},function(t,e,n){"use strict";n.r(e),n.d(e,"TouchBtnToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="button_set_pos">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="button_set_align">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="button_set_size">\n        <value name="w">\n          <shadow type="math_number">\n            <field name="NUM">70</field>\n          </shadow>\n        </value>\n        <value name="h">\n          <shadow type="math_number">\n            <field name="NUM">30</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"button_set_hidden"},{kind:"block",type:"button_set_bgcolor"},{kind:"block",blockxml:'<block type="button_set_bgcolor_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="button_set_text">\n        <value name="text">\n          <shadow type="text">\n            <field name="TEXT">Button</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"button_set_textcolor"},{kind:"block",blockxml:'<block type="button_set_textcolor_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"button_set_text_font"},{kind:"block",type:"button_delete"},{kind:"block",type:"button_set_cb"},{kind:"block",type:"button_get_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"SwitchToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="switch_set_pos">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="switch_set_align">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="switch_set_size">\n        <value name="w">\n          <shadow type="math_number">\n            <field name="NUM">70</field>\n          </shadow>\n        </value>\n        <value name="h">\n          <shadow type="math_number">\n            <field name="NUM">30</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"switch_set_hidden"},{kind:"block",type:"switch_set_bgcolor"},{kind:"block",blockxml:'<block type="switch_set_bgcolor_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"switch_set_color"},{kind:"block",blockxml:'<block type="switch_set_color_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"switch_set_on"},{kind:"block",type:"switch_set_off"},{kind:"block",type:"switch_set_toggle"},{kind:"block",type:"switch_delete"},{kind:"block",type:"switch_set_cb"},{kind:"block",type:"switch_get_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"SliderToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="slider_set_pos">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="slider_set_align">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="slider_set_size">\n        <value name="w">\n          <shadow type="math_number">\n            <field name="NUM">70</field>\n          </shadow>\n        </value>\n        <value name="h">\n          <shadow type="math_number">\n            <field name="NUM">12</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"slider_set_hidden"},{kind:"block",type:"slider_set_bgcolor"},{kind:"block",blockxml:'<block type="slider_set_bgcolor_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"slider_set_color"},{kind:"block",blockxml:'<block type="slider_set_color_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="slider_set_value">\n        <value name="value">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="slider_set_range">\n        <value name="MIN">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="MAX">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"slider_delete"},{kind:"block",type:"slider_set_cb"},{kind:"block",type:"slider_get_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BarToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="bar_set_pos">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="bar_set_align">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="bar_set_size">\n        <value name="w">\n          <shadow type="math_number">\n            <field name="NUM">70</field>\n          </shadow>\n        </value>\n        <value name="h">\n          <shadow type="math_number">\n            <field name="NUM">12</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"bar_set_hidden"},{kind:"block",type:"bar_set_bgcolor"},{kind:"block",blockxml:'<block type="bar_set_bgcolor_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"bar_set_color"},{kind:"block",blockxml:'<block type="bar_set_color_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="bar_set_value">\n        <value name="value">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="bar_set_range">\n        <value name="MIN">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="MAX">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"bar_delete"},{kind:"block",type:"bar_get_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"CheckboxToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="checkbox_set_pos">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="checkbox_set_align">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"checkbox_set_hidden"},{kind:"block",blockxml:'<block type="checkbox_set_text">\n      <value name="text">\n        <shadow type="text">\n          <field name="TEXT">Text</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"checkbox_set_text_font"},{kind:"block",type:"checkbox_set_color"},{kind:"block",blockxml:'<block type="checkbox_set_color_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"checkbox_set_selected_color"},{kind:"block",blockxml:'<block type="checkbox_set_selected_color_rgb">\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"checkbox_set_checked"},{kind:"block",type:"checkbox_delete"},{kind:"block",type:"checkbox_set_cb"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"EspnowToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_ESPNOW}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"espnow"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"ESP-NOW"},{kind:"button",text:"\u25b6 %{BKY_ESP_NOW_INIT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="text_print" hidden="true">\n<value name="TEXT">\n  <block type="espnow_get_mac_addr"></block>\n</value>\n<next>\n  <block type="espnow_add_peer2">\n    <value name="ID">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="9">1</field>\n      </shadow>\n    </value>\n    <value name="channel">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="13">0</field>\n      </shadow>\n    </value>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_ESP_NOW_RECEIVE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="espnow_recv_cb" hidden="true">\n<value name="MAC_ADDR">\n  <block type="variables_get">\n    <field name="VAR">addr</field>\n  </block>\n</value>\n<value name="DATA">\n  <block type="variables_get">\n    <field name="VAR">data</field>\n  </block>\n</value>\n<statement name="FUNC">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="variables_get">\n        <field name="VAR">addr</field>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="variables_get">\n            <field name="VAR">data</field>\n          </block>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_ESP_NOW_CHECK}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="espnow_send_cb" hidden="true">\n<value name="FLAG">\n  <block type="variables_get">\n    <field name="VAR">flags</field>\n  </block>\n</value>\n<statement name="FUNC">\n  <block type="controls_ifelse">\n    <value name="IF0">\n      <block type="variables_get">\n        <field name="VAR">flags</field>\n      </block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_ESP_NOW_BROADCAST}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="espnow_broadcast" hidden="true">\n<value name="DATA">\n  <shadow type="text">\n    <field name="TEXT">Hello</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_ESP_NOW_SEND}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="espnow_send" hidden="true">\n<field name="ID">1</field>\n<value name="DATA">\n  <shadow type="text">\n    <field name="TEXT">Hello</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"679","web-class":"blockly-divider-nowidth"},{kind:"block",type:"espnow_get_mac_addr"},{kind:"block",blockxml:'<block type="espnow_set_channel">\n    <value name="channel">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="13">6</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="espnow_add_peer2">\n    <value name="ID">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="9">1</field>\n      </shadow>\n    </value>\n    <value name="channel">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="13">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"espnow_set_pmk"},{kind:"block",blockxml:'<block type="espnow_broadcast">\n    <value name="DATA">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"espnow_recv_cb"},{kind:"block",type:"espnow_send_cb"},{kind:"block",blockxml:'<block type="espnow_send">\n    <value name="DATA">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HttpToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HTTP}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"http"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"http"},{kind:"button",text:"\u25b6 %{BKY_HTTP_CONVERT_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="loads_json" hidden="true">\n<value name="JSON_VAR">\n  <block type="get_data"></block>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_HTTP_CHECK_CODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="controls_if" hidden="true">\n<mutation elseif="2" else="1">\n</mutation>\n<value name="IF0">\n  <block type="logic_compare">\n    <field name="OP">EQ</field>\n    <value name="A">\n      <block type="get_status_code">\n      </block>\n    </value>\n    <value name="B">\n      <block type="math_number">\n        <field name="NUM">200</field>\n      </block>\n    </value>\n  </block>\n</value>\n<value name="IF1">\n  <block type="logic_compare">\n    <field name="OP">EQ</field>\n    <value name="A">\n      <block type="get_status_code"></block>\n    </value>\n    <value name="B">\n      <block type="math_number">\n        <field name="NUM">400</field>\n      </block>\n    </value>\n  </block>\n</value>\n<value name="IF2">\n  <block type="logic_compare">\n    <field name="OP">EQ</field>\n    <value name="A">\n      <block type="get_status_code"></block>\n    </value>\n    <value name="B">\n      <block type="math_number">\n        <field name="NUM">404</field>\n      </block>\n    </value>\n  </block>\n</value>\n</block>'},{kind:"button",width:"357","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="http_request">\n    <value name="url">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="headers">\n      <block type="map_on_loop">\n      </block>\n    </value>\n    <value name="data">\n      <block type="map_on_loop">\n      </block>\n    </value>\n  </block>'},{kind:"block",type:"get_status_code"},{kind:"block",type:"get_data"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UdpServerToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UDP_SERVER}","web-class":"blockly-title--style nounderline"},{kind:"button",text:"\u25b6 %{BKY_UDP_RECEIVE_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",blockxml:'<block type="socket_udp_server_start" hidden="true">\n<value name="ip">\n  <shadow type="text">\n    <field name="TEXT">0.0.0.0</field>\n  </shadow>\n</value>\n<value name="port">\n  <shadow type="math_number">\n    <field name="NUM">5000</field>\n  </shadow>\n</value>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="socket_udp_server_recv">\n            <value name="bufsize">\n              <shadow type="math_number">\n                <field name="NUM">1024</field>\n              </shadow>\n            </value>\n          </block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"466","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="socket_udp_server_start">\n    <value name="ip">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_server_sendto">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="ip">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_server_recv">\n    <value name="bufsize">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"socket_udp_server_read"},{kind:"block",type:"socket_udp_server_close"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UdpClientToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UDP_CLIENT}","web-class":"blockly-title--style nounderline"},{kind:"button",text:"\u25b6 %{BKY_UDP_RECEIVE_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="socket_udp_client_start" hidden="true">\n<value name="ip">\n  <shadow type="text">\n    <field name="TEXT"></field>\n  </shadow>\n</value>\n<value name="port">\n  <shadow type="math_number">\n    <field name="NUM"></field>\n  </shadow>\n</value>\n<next>\n  <block type="socket_udp_client_sendmsg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <next>\n      <block type="basic_on_loop">\n        <statement name="LOOP">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="socket_udp_client_recv">\n                <value name="bufsize">\n                  <shadow type="math_number">\n                    <field name="NUM">1024</field>\n                  </shadow>\n                </value>\n              </block>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"466","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="socket_udp_client_start">\n    <value name="ip">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_client_sendmsg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_client_sendto">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="ip">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_write">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="socket_udp_client_recv">\n    <value name="bufsize">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"socket_udp_client_read"},{kind:"block",type:"socket_udp_client_close"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"ModbusMasterToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_MODBUS_MASTER}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"modbus"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Master_Read_Holding_Register"},{kind:"button",text:"Init","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="modbus_master_u_init">\n    <value name="TX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="RX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="BAUD">\n      <shadow type="math_number">\n        <field name="NUM">9600</field>\n      </shadow>\n    </value>\n    <field name="data_bits">8</field>\n  </block>'},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="modbus_master_u_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="modbus_master_u_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_master_u_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"ModbusSlaveToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_MODBUS_SLAVE}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"modbus"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Slave_Read_Holding_Register"},{kind:"button",text:"Init","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="modbus_slave_rtu_init">\n    <value name="TX">\n      <shadow type="math_number">\n        <field name="NUM">17</field>\n      </shadow>\n    </value>\n    <value name="RX">\n      <shadow type="math_number">\n        <field name="NUM">16</field>\n      </shadow>\n    </value>\n    <value name="BAUD">\n      <shadow type="math_number">\n        <field name="NUM">9600</field>\n      </shadow>\n    </value>\n    <value name="ADDR">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_slave_rtu_init_func">\n    <value name="START_ADDR">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="quantity">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="modbus_slave_rtu_update_func">\n    <value name="START_ADDR">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="quantity">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="modbus_slave_rtu_send">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"modbus_slave_rtu_receive_adu"},{kind:"block",type:"modbus_slave_rtu_get_function"},{kind:"block",type:"modbus_slave_rtu_fun_status"},{kind:"block",type:"modbus_slave_rtu_get_address"},{kind:"block",type:"modbus_slave_rtu_get_quantity"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"CanToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_CAN}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"can"},{kind:"block",blockxml:'<block type="can_init">\n    <value name="bus">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="tx">\n      <shadow type="math_number">\n        <field name="NUM">17</field>\n      </shadow>\n    </value>\n    <value name="rx">\n      <shadow type="math_number">\n        <field name="NUM">16</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"can_state"},{kind:"block",type:"can_any"},{kind:"block",blockxml:'<block type="can_send">\n    <value name="id">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"can_recv"},{kind:"block",blockxml:'<block type="can_set_filter">\n    <value name="bank">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"can_clearfilter"},{kind:"block",type:"can_clear_tx_queue"},{kind:"block",type:"can_clear_rx_queue"},{kind:"block",type:"can_restart"},{kind:"block",type:"can_deinit"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BlynkToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BLYNK}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"ble"},{kind:"block",blockxml:'<block type="blynk_init">\n    <value name="NAME">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="TOKEN">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="blynk_virtual_write">\n    <value name="NUMBER">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="DATA">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="blynk_notify">\n    <value name="MSG">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="blynk_tweet">\n    <value name="MSG">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"blynk_event_write"},{kind:"block",type:"blynk_event_read"},{kind:"block",type:"blynk_on_event"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BleuartToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BLE_UART}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"ble"},{kind:"block",blockxml:'<block type="ble_uart_init">\n    <value name="NAME">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="ble_uart_write">\n    <value name="DATA">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"ble_uart_any"},{kind:"block",type:"ble_uart_read"},{kind:"block",blockxml:'<block type="ble_uart_read_number">\n    <value name="NUMBER">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"ble_uart_on_recv"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"PinServoToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PIN_SERVO}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"pin-servo"},{kind:"button",text:"\u25b6 %{BKY_PIN_SERVO_INIT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="servo_init" hidden="true">\n<value name="PIN">\n  <shadow type="math_number">\n    <field name="NUM">26</field>\n  </shadow>\n</value>\n<value name="FREQ">\n  <shadow type="math_number">\n    <field name="NUM">50</field>\n  </shadow>\n</value>\n<value name="MIN_US">\n  <shadow type="math_number">\n    <field name="NUM">500</field>\n  </shadow>\n</value>\n<value name="MAX_US">\n  <shadow type="math_number">\n    <field name="NUM">2500</field>\n  </shadow>\n</value>\n<value name="ANGLE">\n  <shadow type="math_number">\n    <field name="NUM">180</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_PIN_SERVO_SET_DEGREE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="servo_write_angle" hidden="true">\n<value name="ANGLE">\n  <shadow type="math_number">\n    <field name="NUM">90</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_PIN_SERVO_SET_DURATION}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="servo_write_us" hidden="true">\n<value name="TIME">\n  <shadow type="math_number">\n    <field name="NUM">1500</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"723","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="servo_init">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">26</field>\n      </shadow>\n    </value>\n    <value name="FREQ">\n      <shadow type="math_number">\n        <field name="NUM">50</field>\n      </shadow>\n    </value>\n    <value name="MIN_US">\n      <shadow type="math_number">\n        <field name="NUM">500</field>\n      </shadow>\n    </value>\n    <value name="MAX_US">\n      <shadow type="math_number">\n        <field name="NUM">2500</field>\n      </shadow>\n    </value>\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">180</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="servo_write_angle">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">90</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="servo_write_us">\n    <value name="TIME">\n      <shadow type="math_number">\n        <field name="NUM">1500</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"NtpToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_NTP}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"ntp"},{kind:"block",blockxml:'<block type="ntp_init">\n    <value name="host">\n      <shadow type="text">\n        <field name="TEXT">cn.pool.ntp.org</field>\n      </shadow>\n    </value>\n    <value name="timezone">\n      <shadow type="math_number">\n        <field name="NUM">8</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="ntp_init_dropdown">\n    <value name="timezone">\n      <shadow type="math_number">\n        <field name="NUM">8</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"ntp_get_timestamp"},{kind:"block",blockxml:'<block type="ntp_get_date_format">\n    <value name="format">\n      <shadow type="text">\n        <field name="TEXT">-</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="ntp_get_time_format">\n    <value name="format">\n      <shadow type="text">\n        <field name="TEXT">:</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="ntp_get_date_time_format">\n    <value name="date">\n      <shadow type="text">\n        <field name="TEXT">-</field>\n      </shadow>\n    </value>\n    <value name="time">\n      <shadow type="text">\n        <field name="TEXT">:</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"ntp_get_year"},{kind:"block",type:"ntp_get_month"},{kind:"block",type:"ntp_get_day"},{kind:"block",type:"ntp_get_weekday"},{kind:"block",type:"ntp_get_hour"},{kind:"block",type:"ntp_get_minute"},{kind:"block",type:"ntp_get_second"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"ImuToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_IMU}","web-class":"blockly-title--style",callbackKey:"hardwareDocs",url:"imu"},{kind:"block",type:"IMU_GET_X"},{kind:"block",type:"IMU_GET_Y"},{kind:"block",type:"IMU_GET_ACC_X"},{kind:"block",type:"IMU_GET_ACC_Y"},{kind:"block",type:"IMU_GET_ACC_Z"},{kind:"block",type:"IMU_GET_Gyr_X"},{kind:"block",type:"IMU_GET_Gyr_Y"},{kind:"block",type:"IMU_GET_Gyr_Z"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AxpToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_AXP}","web-class":"blockly-title--style",callbackKey:"hardwareDocs",url:"power"},{kind:"block",type:"axp_get_charge_state"},{kind:"block",type:"axp_get_bat_voltage"},{kind:"block",type:"axp_get_bat_voltage_percent"},{kind:"block",type:"axp_get_bat_current"},{kind:"block",type:"axp_get_vin_voltage"},{kind:"block",type:"axp_get_vin_current"},{kind:"block",type:"axp_get_vbus_voltage"},{kind:"block",type:"axp_get_vbus_current"},{kind:"block",type:"axp_get_axp192_temperature"},{kind:"block",type:"axp_power_off"},{kind:"block",type:"axp_set_charge_current"},{kind:"block",blockxml:'<block type="axp_set_ldo2_voltage">\n        <value name="ANGLEX">\n            <shadow type="math_slider">\n                <field name="NUM" min="0" max="100">50</field>\n            </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"WdtToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_WDT}","web-class":"blockly-title--style",callbackKey:"hardwareDocs",url:"wdt"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="wdt_init" hidden="true">\n<value name="timeout">\n  <shadow type="math_number">\n    <field name="NUM">2000</field>\n  </shadow>\n</value>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">3000</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="wdt_feed"></block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"325","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="wdt_init">\n        <value name="timeout">\n          <shadow type="math_number">\n            <field name="NUM">2000</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"wdt_feed"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"SdcardToolbox",function(){return o});let o=[{kind:"button",text:"SDCard","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"sdcard"},{kind:"button",text:"\u25b6 %{BKY_READ_FILE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="open_sdcard_file" hidden="true">\n<field name="mode">r</field>\n<value name="open">\n  <shadow type="text">\n    <field name="TEXT">FileName.*</field>\n  </shadow>\n</value>\n<statement name="do">\n  <block type="lcd_print">\n    <field name="COLOR">#ffffff</field>\n    <value name="TEXT">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n      <block type="file_read_all"></block>\n    </value>\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_WRITE_FILE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="open_sdcard_file" hidden="true">\n<field name="mode">w+</field>\n<value name="open">\n  <shadow type="text">\n    <field name="TEXT">test.txt</field>\n  </shadow>\n</value>\n<statement name="do">\n  <block type="file_write">\n    <value name="write">\n      <shadow type="text">\n        <field name="TEXT">Hello World</field>\n      </shadow>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"446","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="open_sdcard_file">\n    <value name="open">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"file_read_all"},{kind:"block",blockxml:'<block type="file_read">\n    <value name="bytes">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"file_read_line"},{kind:"block",blockxml:'<block type="file_write">\n    <value name="write">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="file_set_seek">\n    <value name="seek">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"file_get_seek"},{kind:"block",blockxml:'<block type="listdir">\n    <value name="listdirPath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mkdir">\n    <value name="mkdirPath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="remove">\n    <value name="removePath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="rmdir">\n    <value name="rmdirPath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="rename">\n    <value name="renamePath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="toPath">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="sdcard_isfile">\n    <value name="path">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="sdcard_isdirectory">\n    <value name="path">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="sdcard_isexist">\n    <value name="file">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="path">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"EasyToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_EASY}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"easy-io"},{kind:"block",type:"pins_analog_read"},{kind:"block",blockxml:'<block type="pins_analog_read_value">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">39</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pins_analog_write">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">26</field>\n      </shadow>\n    </value>\n    <value name="DUTY">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pins_digital_read">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pins_digital_write">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">26</field>\n      </shadow>\n    </value>\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pins_analog_toggle">\n    <value name="PIN">\n      <shadow type="math_number">\n        <field name="NUM">26</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pins_set_map">\n    <value name="MAP">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="FROM_LOW">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="FROM_HIGH">\n      <shadow type="math_number">\n        <field name="NUM">1023</field>\n      </shadow>\n    </value>\n    <value name="TO_LOW">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="TO_HIGH">\n      <shadow type="math_number">\n        <field name="NUM">4</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"PwmToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PWM}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"pwm"},{kind:"button",text:"\u25b6 %{BKY_PWM_SETUP}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="pwm" hidden="true">\n<field name="PWM">PWM0</field>\n<field name="TIME">0</field>\n<value name="pin">\n  <shadow type="math_number">\n    <field name="NUM">26</field>\n  </shadow>\n</value>\n<value name="freg">\n  <shadow type="math_number">\n    <field name="NUM">50</field>\n  </shadow>\n</value>\n<value name="duty">\n  <shadow type="math_number">\n    <field name="NUM">3</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_INCREMENTAL_PWM}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="controls_for" hidden="true">\n<field name="VAR">i</field>\n<value name="FROM">\n  <block type="math_number">\n    <field name="NUM">3</field>\n  </block>\n</value>\n<value name="TO">\n  <block type="math_number">\n    <field name="NUM">12</field>\n  </block>\n</value>\n<value name="BY">\n  <block type="math_number">\n    <field name="NUM">1</field>\n  </block>\n</value>\n<statement name="DO">\n  <block type="pwm_duty">\n    <field name="PWM">PWM0</field>\n    <value name="duty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n      <block type="variables_get">\n        <field name="VAR">i</field>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay_ms">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">50</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_PWM_CONTROL}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="pwm" hidden="true">\n<field name="PWM">PWM0</field>\n<field name="TIME">0</field>\n<value name="pin">\n  <shadow type="math_number">\n    <field name="NUM">26</field>\n  </shadow>\n</value>\n<value name="freg">\n  <shadow type="math_number">\n    <field name="NUM">50</field>\n  </shadow>\n</value>\n<value name="duty">\n  <shadow type="math_number">\n    <field name="NUM">2.5</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_PWM_CONTROL180}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="pwm" hidden="true">\n<field name="PWM">PWM0</field>\n<field name="TIME">0</field>\n<value name="pin">\n  <shadow type="math_number">\n    <field name="NUM">26</field>\n  </shadow>\n</value>\n<value name="freg">\n  <shadow type="math_number">\n    <field name="NUM">50</field>\n  </shadow>\n</value>\n<value name="duty">\n  <shadow type="math_number">\n    <field name="NUM">12.5</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"563","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="pwm">\n    <value name="pin">\n      <shadow type="math_number">\n        <field name="NUM">26</field>\n      </shadow>\n    </value>\n    <value name="freg">\n      <shadow type="math_number">\n        <field name="NUM">10000</field>\n      </shadow>\n    </value>\n    <value name="duty">\n      <shadow type="math_number">\n        <field name="NUM">50</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pwm_freq">\n    <value name="freg">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="pwm_duty">\n    <value name="duty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"pwm_pause"},{kind:"block",type:"pwm_resume"},{kind:"block",blockxml:'<block type="pwm_hold_us">\n    <value name="TIME">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AdcToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_ADC}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"adc_dac"},{kind:"button",text:"\u25b6 %{BKY_ADC_SET_PIN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="adc" hidden="true">\n<value name="pin">\n  <shadow type="math_slider">\n    <field name="NUM" min="32" max="39">36</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_ADC_SET_WIDTH}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="adc_width" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_ADC_SET_GAIN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="adc_atten" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_ADC_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="text_print" hidden="true">\n<value name="TEXT">\n  <block type="adc_read">\n    <field name="adc">adc0</field>\n  </block>\n</value>\n</block>'},{kind:"button",width:"325","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="adc">\n    <value name="pin">\n      <shadow type="math_slider">\n        <field name="NUM" min="32" max="39">36</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"adc_width"},{kind:"block",type:"adc_atten"},{kind:"block",type:"adc_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"DacToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_DAC}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"adc_dac"},{kind:"button",text:"\u25b6 %{BKY_DAC_SET_CHANNEL}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_DAC_WRITE_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac_write" hidden="true">\n<value name="PIN">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="255">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DAC_SET_FREQ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac_beep" hidden="true">\n<value name="freq">\n  <shadow type="math_slider">\n    <field name="NUM" min="16" max="32000">1800</field>\n  </shadow>\n</value>\n<value name="duration">\n  <shadow type="math_number">\n    <field name="NUM">200</field>\n  </shadow>\n</value>\n<value name="scale">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="3">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DAC_SET_OUTPUT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac_waveform" hidden="true">\n<value name="freq">\n  <shadow type="math_number">\n    <field name="NUM">1800</field>\n  </shadow>\n</value>\n<value name="duration">\n  <shadow type="math_number">\n    <field name="NUM">200</field>\n  </shadow>\n</value>\n<value name="scale">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n<value name="offset">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="255">0</field>\n  </shadow>\n</value>\n<value name="invert">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="3">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DAC_STOP_OUTPUT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac_stopwave" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_DAC_SET_FREQUENCY}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dac_freq" hidden="true">\n<value name="freq">\n  <shadow type="math_number">\n    <field name="NUM">1800</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"823","web-class":"blockly-divider-nowidth"},{kind:"block",type:"dac"},{kind:"block",blockxml:'<block type="dac_write">\n    <value name="PIN">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="dac_beep">\n    <value name="freq">\n      <shadow type="math_slider">\n        <field name="NUM" min="16" max="32000">1800</field>\n      </shadow>\n    </value>\n    <value name="duration">\n      <shadow type="math_number">\n        <field name="NUM">200</field>\n      </shadow>\n    </value>\n    <value name="scale">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="3">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="dac_waveform">\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">1800</field>\n      </shadow>\n    </value>\n    <value name="duration">\n      <shadow type="math_number">\n        <field name="NUM">200</field>\n      </shadow>\n    </value>\n    <value name="scale">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="offset">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n    <value name="invert">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="3">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"dac_stopwave"},{kind:"block",blockxml:'<block type="dac_freq">\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">1800</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UartToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UART}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"uart"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES} ( SIM800L )","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"SIM800L"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES} ( UART Pass Through )","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UART_Pass_Through"},{kind:"button",text:"\u25b6 %{BKY_UART_READ_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="uart" hidden="true">\n<field name="VAR">uart1</field>\n<field name="BAUD">115200</field>\n<field name="USE_TIMER">1</field>\n<value name="TX">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="34">1</field>\n  </shadow>\n</value>\n<value name="RX">\n  <shadow type="math_slider">\n    <field name="NUM" min="0" max="36">3</field>\n  </shadow>\n</value>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="uart_any">\n            <field name="VAR">uart1</field>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="lcd_print">\n            <field name="COLOR">#ffffff</field>\n            <value name="TEXT">\n              <shadow type="text">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="decode_str">\n                <value name="VALUE">\n                  <block type="uart_read">\n                    <field name="VAR">uart1</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"604","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Init","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="uart">\n    <value name="TX">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="34">17</field>\n      </shadow>\n    </value>\n    <value name="RX">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="36">16</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="uart_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="uart_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="uart_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"uart_read"},{kind:"block",blockxml:'<block type="uart_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"uart_readline"},{kind:"block",type:"uart_any"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"EepromToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_EEPROM}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"eeprom"},{kind:"button",text:"\u25b6 %{BKY_EEPROM_DEMO_CREATE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="eeprom_write_str" hidden="true">\n<value name="KEY">\n  <shadow type="text">\n    <field name="TEXT"></field>\n  </shadow>\n</value>\n<value name="VALUE">\n  <shadow type="text">\n    <field name="TEXT"></field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_EEPROM_DEMO_READ_STRING}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="eeprom_read_str" hidden="true">\n<value name="KEY">\n  <shadow type="text">\n    <field name="TEXT"></field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_EEPROM_DEMO_READ_INT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="eeprom_read_int" hidden="true">\n<value name="KEY">\n  <shadow type="text">\n    <field name="TEXT"></field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"500","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="eeprom_write_str">\n    <value name="KEY">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="eeprom_read_str">\n    <value name="KEY">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="eeprom_read_int">\n    <value name="KEY">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"PinToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PIN}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"pin"},{kind:"block",blockxml:'<block type="pin_pinout">\n    <value name="PIN">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="36">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"pin_on"},{kind:"block",type:"pin_off"},{kind:"block",type:"pin_get_value"},{kind:"block",blockxml:'<block type="pin_set_value">\n    <value name="PIN">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"MotionToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_MOTION}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_motion"},{kind:"block",type:"motion_init"},{kind:"block",blockxml:'<block type="motion_get_servo_angle">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="4">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motion_set_servo_angle">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="4">1</field>\n          </shadow>\n        </value>\n        <value name="angle">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="180">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motion_get_servo_pulse">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="4">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motion_set_servo_pulse">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="4">1</field>\n          </shadow>\n        </value>\n        <value name="pulse">\n          <shadow type="math_slider">\n            <field name="NUM" min="500" max="2500">500</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motion_get_motor_speed">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="2">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motion_set_motor_speed">\n        <value name="ch">\n          <shadow type="math_slider">\n            <field name="NUM" min="1" max="2">1</field>\n          </shadow>\n        </value>\n        <value name="speed">\n          <shadow type="math_slider">\n            <field name="NUM" min="-127" max="127">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GpsToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_GPS}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atomicgps"},{kind:"block",blockxml:'<block type="base_gps_init">\n        <value name="timezone">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="formatting">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"button",text:"%{BKY_GPS_TIME}","web-class":"blockly-subclass--style"},{kind:"block",type:"base_gps_timestamp"},{kind:"block",type:"base_gps_date"},{kind:"button",text:"%{BKY_GPS_POSITION}","web-class":"blockly-subclass--style"},{kind:"block",type:"base_gps_latitude"},{kind:"block",type:"base_gps_longitude"},{kind:"block",type:"base_gps_speed"},{kind:"block",type:"base_gps_course"},{kind:"block",type:"base_gps_altitude"},{kind:"block",type:"base_gps_geoid_height"},{kind:"button",text:"%{BKY_GPS_INFO}","web-class":"blockly-subclass--style"},{kind:"block",type:"base_gps_satellites_in_view"},{kind:"block",type:"base_gps_satellites_in_use"},{kind:"block",type:"base_gps_satellites_used"},{kind:"block",type:"base_gps_last_sv_sentence"},{kind:"block",type:"base_gps_total_sv_sentence"},{kind:"block",type:"base_gps_satellite_data"},{kind:"block",type:"base_gps_hdop"},{kind:"block",type:"base_gps_pdop"},{kind:"block",type:"base_gps_vdop"},{kind:"block",type:"base_gps_deinit"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"qrcodeToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_QRCODE}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atomic_qr"},{kind:"block",type:"base_qrcode_init"},{kind:"block",type:"base_qrcode_read"},{kind:"block",type:"base_qrcode_status"},{kind:"block",type:"base_qrcode_trigger"},{kind:"button",width:"295","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Please use QR Code to scan the QR","web-class":"blockly-subclass--style"},{kind:"sep",gap:"8"},{kind:"button",text:"code below to switch modes.","web-class":"blockly-subclass--style"},{kind:"sep",gap:"8"},{kind:"button",text:"Currently, it supports key trigger","web-class":"blockly-subclass--style"},{kind:"sep",gap:"8"},{kind:"button",text:"mode and continuous mode.","web-class":"blockly-subclass--style"},{kind:"sep",gap:"32"},{kind:"button",text:"Manual Trigger Mode","web-class":"blockly-subclass--style"},{kind:"block",type:"base_qrcode_manual_mode"},{kind:"button",text:"Continuous Mode","web-class":"blockly-subclass--style"},{kind:"block",type:"base_qrcode_continuous_mode"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"stepmotorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_STEP_MOTOR}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atomic_step_motor"},{kind:"block",type:"base_stepmotor_init"},{kind:"block",blockxml:'<block type="base_stepmotor_move_steps">\n        <value name="steps">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="clockwise">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_stepmotor_move_circles">\n        <value name="circle">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="clockwise">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"base_stepmotor_enable"},{kind:"block",type:"base_stepmotor_disbale"},{kind:"block",type:"base_stepmotor_reset"},{kind:"block",type:"base_stepmotor_get_voltage"},{kind:"block",type:"base_stepmotor_get_status"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"LidarbarToolbox",function(){return o});let o=[{kind:"block",type:"lidarcar_setrgb"},{kind:"block",blockxml:'<block type="lidarcar_setOnergb">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lidarcar_goahead">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lidarcar_setStepMotor">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="NUM1">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="NUM2">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="NUM3">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lidarcar_setServo">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lidarcar_control">\n    <value name="NUMX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="NUMY">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lidarcar_drawMap"},{kind:"block",blockxml:'<block type="lidarcar_getdistance">\n    <value name="NUY">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"LorawanToolbox",function(){return i});var o=n(36),l=n(37);let i=[{kind:"category",name:"P2P",colour:"%{BKY_TIMER_HUE}",contents:o.P2PToolbox},{kind:"category",name:"Network",colour:"%{BKY_LCD_HUE}",contents:l.NetworkToolbox}]},function(t,e,n){"use strict";n.r(e),n.d(e,"P2PToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_LORAWAN}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"lorawan"},{kind:"button",text:"\u25b6 %{BKY_LORAWAN_SET_FREQUENCY}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="lorawan_initp2p" hidden="true">\n<value name="VALUE">\n  <shadow type="math_number">\n    <field name="NUM">433</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_LORAWAN_SEND_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="lorawan_txt" hidden="true">\n<value name="VALUE">\n  <shadow type="text">\n    <field name="TEXT">Hello World</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_LORAWAN_RECEIVE_DATA}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="lorawan_initrx" hidden="true">\n<statement name="FUNC">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="lorawan_data"></block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"282","web-class":"blockly-divider-nowidth"},{kind:"block",type:"lorawan_initrx"},{kind:"block",blockxml:'<block type="lorawan_initp2p">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_txt">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_data"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"NetworkToolbox",function(){return o});let o=[{kind:"block",type:"lorawan_network_reset"},{kind:"block",type:"lorawan_network_reset_default"},{kind:"block",type:"lorawan_network_get_devaddr"},{kind:"block",blockxml:'<block type="lorawan_network_set_devaddr">\n    <value name="devaddr">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_deveui"},{kind:"block",blockxml:'<block type="lorawan_network_set_deveui">\n    <value name="deveui">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_appeui"},{kind:"block",blockxml:'<block type="lorawan_network_set_appeui">\n    <value name="appeui">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_appkey">\n    <value name="AppKey">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_appsessionkey">\n    <value name="AppSKey">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_nwkskey">\n    <value name="NWKSKEY">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_set_mode"},{kind:"block",type:"lorawan_network_get_band_plan"},{kind:"block",type:"lorawan_network_set_band_plan"},{kind:"block",type:"lorawan_network_get_datarate"},{kind:"block",blockxml:'<block type="lorawan_network_set_datarate">\n    <value name="datarate">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="15">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_set_default_datarate"},{kind:"block",blockxml:'<block type="lorawan_network_get_channel_frequency">\n    <value name="ch_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="95">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_channel_frequency">\n    <value name="ch_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="95">0</field>\n      </shadow>\n    </value>\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_del_channel_frequency">\n    <value name="ch_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="95">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_enable_channels"},{kind:"block",blockxml:'<block type="lorawan_network_enable_channels">\n    <value name="ch_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="95">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_adaptive_status"},{kind:"block",type:"lorawan_network_set_adaptive_status"},{kind:"block",type:"lorawan_network_get_class_mode"},{kind:"block",type:"lorawan_network_set_class_mode"},{kind:"block",blockxml:'<block type="lorawan_network_set_tx_power">\n    <value name="power">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_join"},{kind:"block",type:"lorawan_network_get_port"},{kind:"block",blockxml:'<block type="lorawan_network_set_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="233">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_send_confirm_msg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_send_unconfirm_msg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_send_confirm_hex_msg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_send_unconfirm_hex_msg">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_downlink_msg"},{kind:"block",type:"lorawan_network_get_downlink_status"},{kind:"block",blockxml:'<block type="lorawan_network_set_unconfirmed_repeat_time">\n    <value name="times">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="15">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_confirmed_repeat_time">\n    <value name="times">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="15">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_rxwin2_config"},{kind:"block",blockxml:'<block type="lorawan_network_set_rxwin2_daterate">\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan_network_set_rxwin2_spreadfactor">\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="sf">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="bw">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_get_rxwin1_config"},{kind:"block",blockxml:'<block type="lorawan_network_set_rxwin1_channel_frequency">\n    <value name="ch">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="95">0</field>\n      </shadow>\n    </value>\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan_network_go_to_sleep"},{kind:"block",type:"lorawan_network_wakeup"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"StepMotorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_STEP_MOTOR}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"stepmotor"},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_SET_ADDRESS}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_instance" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_SET_MOTOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_move_xyz" hidden="true">\n<value name="X">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n<value name="Y">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n<value name="Z">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n<value name="SPEED">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_RUN_CODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_g_code" hidden="true">\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_SET_MODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_set_mode" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_LOCK_MOTOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_lock" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_STEP_MOTOR_UNLOCK_MOTOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="motor_unlock" hidden="true"></block>'},{kind:"button",width:"756","web-class":"blockly-divider-nowidth"},{kind:"block",type:"motor_instance"},{kind:"block",blockxml:'<block type="motor_move_xyz">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Z">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="SPEED">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="motor_g_code">\n    <value name="TEXT">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"motor_set_mode"},{kind:"block",type:"motor_lock"},{kind:"block",type:"motor_unlock"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"ServoToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_SERVO}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"servo"},{kind:"button",text:"\u25b6 %{BKY_SERVO_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="variables_set">\n    <field name="VAR">i</field>\n    <value name="VALUE">\n      <block type="math_random_int">\n        <value name="FROM">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="TO">\n          <block type="math_number">\n            <field name="NUM">180</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="servo_angle">\n        <field name="INDEX">0</field>\n        <value name="ANGLE">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n          <block type="variables_get">\n            <field name="VAR">i</field>\n          </block>\n        </value>\n        <next>\n          <block type="servo_angle">\n            <field name="INDEX">1</field>\n            <value name="ANGLE">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n              <block type="variables_get">\n                <field name="VAR">i</field>\n              </block>\n            </value>\n            <next>\n              <block type="servo_angle">\n                <field name="INDEX">2</field>\n                <value name="ANGLE">\n                  <shadow type="math_number">\n                    <field name="NUM">0</field>\n                  </shadow>\n                  <block type="variables_get">\n                    <field name="VAR">i</field>\n                  </block>\n                </value>\n                <next>\n                  <block type="servo_angle">\n                    <field name="INDEX">3</field>\n                    <value name="ANGLE">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                      <block type="variables_get">\n                        <field name="VAR">i</field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="servo_angle">\n                        <field name="INDEX">4</field>\n                        <value name="ANGLE">\n                          <shadow type="math_number">\n                            <field name="NUM">0</field>\n                          </shadow>\n                          <block type="variables_get">\n                            <field name="VAR">i</field>\n                          </block>\n                        </value>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text_add">\n                                <value name="arg0">\n                                  <shadow type="text">\n                                    <field name="TEXT">Servo\'s Status</field>\n                                  </shadow>\n                                </value>\n                                <value name="arg1">\n                                  <block type="variables_get">\n                                    <field name="VAR">i</field>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="timer_delay">\n                                <value name="DELAY">\n                                  <shadow type="math_number">\n                                    <field name="NUM">0.5</field>\n                                  </shadow>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"444","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="servo_angle">\n        <value name="ANGLE">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="servo_write">\n        <value name="TIME">\n          <shadow type="math_number">\n            <field name="NUM">600</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"Servo2Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_SERVO2}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"servo2"},{kind:"button",text:"\u25b6 %{BKY_SERVO2_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="servo2_position">\n    <value name="INDEX">\n      <shadow type="math_slider">\n        <field name="NUM" max="15" step="1">0</field>\n      </shadow>\n    </value>\n    <value name="DEGREES">\n      <shadow type="math_slider">\n        <field name="NUM" max="180" step="1">0</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="timer_delay_ms">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">100</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="servo2_position">\n            <value name="INDEX">\n              <shadow type="math_slider">\n                <field name="NUM" max="15" step="1">0</field>\n              </shadow>\n            </value>\n            <value name="DEGREES">\n              <shadow type="math_slider">\n                <field name="NUM" max="180" step="1">90</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="timer_delay_ms">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">100</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"290","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="servo2_position">\n    <value name="INDEX">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="15">0</field>\n      </shadow>\n    </value>\n    <value name="DEGREES">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="180">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="servo2_release">\n    <value name="INDEX">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="15">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BalaToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BALA}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"bala"},{kind:"button",text:"\u25b6 %{BKY_BALA_SET_MOTOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_move" hidden="true">\n<value name="SPEED">\n  <shadow type="math_number">\n    <field name="NUM">50</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_BALA_SET_NUMBER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_turn" hidden="true">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">45</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"\u25b6 %{BKY_BALA_SET_DEGREE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_rotate" hidden="true">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">45</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"\u25b6 %{BKY_BALA_RETURN_ANGLE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_get_angle" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_BALA_SET_OFFSET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_set_offset" hidden="true">\n    <value name="ANGLEX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"\u25b6 %{BKY_BALA_AUTO_BALANCE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="m5bala_loop" hidden="true"></block>'},{kind:"button",width:"459","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="m5bala_move">\n    <value name="SPEED">\n      <shadow type="math_number">\n        <field name="NUM">50</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="m5bala_turn">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">45</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="m5bala_rotate">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">45</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"m5bala_get_angle"},{kind:"block",blockxml:'<block type="m5bala_set_offset">\n    <value name="ANGLEX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"m5bala_loop"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BalaMotorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BALA_MOTOR}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"bala-motor"},{kind:"button",text:"\u25b6 %{BKY_BALAMOTOR_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="nxt_run" hidden="true">\n<field name="VAR">M1</field>\n<field name="DIRECTION">forward</field>\n<value name="DISTANCE">\n  <shadow type="math_number">\n    <field name="NUM">500</field>\n  </shadow>\n</value>\n<value name="SPEED">\n  <shadow type="math_number">\n    <field name="NUM">255</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"418","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="nxt_set_pwm">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="nxt_run">\n    <value name="DISTANCE">\n      <shadow type="math_number">\n        <field name="NUM">500</field>\n      </shadow>\n    </value>\n    <value name="SPEED">\n      <shadow type="math_number">\n        <field name="NUM">255</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="nxt_run_goto">\n    <value name="DISTANCE">\n      <shadow type="math_number">\n        <field name="NUM">500</field>\n      </shadow>\n    </value>\n    <value name="SPEED">\n      <shadow type="math_number">\n        <field name="NUM">255</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"nxt_stop"},{kind:"block",type:"nxt_read_encoder"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"LegoToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_LEGO_MOTOR}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"lego"},{kind:"block",blockxml:'<block type="lego_set_pwm">\n    <value name="PWM">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lego_stop"},{kind:"block",type:"lego_clear"},{kind:"block",type:"lego_read_encoder"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"PM25Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PM_2_5}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"pm25"},{kind:"button",text:"\u25b6 %{BKY_PM25_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT"> Amount of PM2.5: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="get_num_above">\n            <field name="select">2_5</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"707","web-class":"blockly-divider-nowidth"},{kind:"block",type:"get_pm_factory"},{kind:"block",type:"get_num_above"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"CellularToolbox",function(){return o});let o=[{kind:"block",blockxml:'<block type="Cellular_writeAT">\n    <value name="cmd">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="Cellular_waitResponse">\n    <value name="timeout">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"Cellular_getResponse"},{kind:"block",type:"Cellular_testAT"},{kind:"block",type:"Cellular_restart"},{kind:"block",type:"Cellular_getSimState"},{kind:"block",type:"Cellular_init"},{kind:"block",blockxml:'<block type="Cellular_gprsConnect">\n    <value name="apn">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="user">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="pwd">\n      <shadow type="text_password">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="Cellular_connect">\n    <value name="host">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="Cellular_send">\n    <value name="data">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="Cellular_send_line">\n    <value name="data">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"Cellular_getAvailable"},{kind:"block",type:"Cellular_read"},{kind:"block",type:"Cellular_connected"},{kind:"block",type:"Cellular_getLocalIP"},{kind:"block",type:"Cellular_gprsDisconect"},{kind:"block",type:"Cellular_getNetworkState"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"BasexToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BASEX}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"basex"},{kind:"button",text:"\u25b6 %{BKY_BASEX_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Encoder</field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="basex_get_encoder">\n            <field name="POS">1</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="basex_set_position_pid_max_speed">\n        <field name="POS">1</field>\n        <value name="VALUE">\n          <shadow type="math_number">\n            <field name="NUM">50</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="basex_set_speed_point">\n            <field name="POS">1</field>\n            <value name="VALUE">\n              <shadow type="math_number">\n                <field name="NUM">1000</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"490","web-class":"blockly-divider-nowidth"},{kind:"block",type:"basex_set_mode"},{kind:"block",type:"basex_get_encoder"},{kind:"block",blockxml:'<block type="basex_set_encoder">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_set_motor_speed">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"basex_get_speed_20ms"},{kind:"block",blockxml:'<block type="basex_set_position_point">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_set_position_pid_max_speed">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_set_speed_point">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_run_ahead">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_set_servo_angle">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="basex_set_servo_pulse">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"PlusToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PLUS}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"plus"},{kind:"button",text:"\u25b6 %{BKY_PLUS_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Encoder</field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="plus_get_encode"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Button</field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="plus_get_press"></block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"388","web-class":"blockly-divider-nowidth"},{kind:"block",type:"plus_get_encode"},{kind:"block",type:"plus_clean_encode"},{kind:"block",type:"plus_get_press"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GoPlusToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_GO_PLUS}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"goplus"},{kind:"button",text:"\u25b6 %{BKY_GOPLUS_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="go_plus_set_motor_speed" hidden="true">\n<field name="POS">1</field>\n<value name="SPEED">\n  <shadow type="math_slider">\n    <field name="NUM" min="-127" max="127">0</field>\n  </shadow>\n</value>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="go_plus_digital_read">\n            <field name="PORT">go_plus.PB1</field>\n            <field name="POS">0</field>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="go_plus_analog_read">\n                <field name="PORT">go_plus.PB1</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"324","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="go_plus_set_servo">\n    <value name="ANGLE">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="180">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="go_plus_set_motor_speed">\n    <value name="SPEED">\n      <shadow type="math_slider">\n        <field name="NUM" min="-127" max="127">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"go_plus_digital_read"},{kind:"block",type:"go_plus_analog_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GoPlus2Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_GO_PLUS2}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"goplus2"},{kind:"block",blockxml:'<block type="go_plus2_set_servo_angle">\n    <value name="angle">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="180">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="go_plus2_set_servo_plus">\n    <value name="plus">\n      <shadow type="math_slider">\n        <field name="NUM" min="500" max="2500">500</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="go_plus2_set_motor_speed">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="-127" max="127">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"go_plus2_digital_read"},{kind:"block",type:"go_plus2_analog_read"},{kind:"block",type:"go_plus2_digital_write"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GrblToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_GRBL}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"grbl13.2"},{kind:"button",text:"\u25b6 %{BKY_GRBL_CONTROL_MOTOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="grbl_set_mode" hidden="true">\n<field name="mode">distance</field>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="grbl_turn">\n        <value name="x">\n          <shadow type="math_number">\n            <field name="NUM">10</field>\n          </shadow>\n        </value>\n        <value name="y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="z">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="speed">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">5</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="grbl_turn">\n                <value name="x">\n                  <shadow type="math_number">\n                    <field name="NUM">-10</field>\n                  </shadow>\n                </value>\n                <value name="y">\n                  <shadow type="math_number">\n                    <field name="NUM">0</field>\n                  </shadow>\n                </value>\n                <value name="z">\n                  <shadow type="math_number">\n                    <field name="NUM">0</field>\n                  </shadow>\n                </value>\n                <value name="speed">\n                  <shadow type="math_number">\n                    <field name="NUM">0</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="timer_delay">\n                    <value name="DELAY">\n                      <shadow type="math_number">\n                        <field name="NUM">5</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"432","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Init","web-class":"blockly-subclass--style"},{kind:"block",type:"grbl_set_mode"},{kind:"button",text:"Motor","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="grbl_turn">\n    <value name="x">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="z">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"grbl_read_idle"},{kind:"block",type:"grbl_wait_idle"},{kind:"block",type:"grbl_lock_motor"},{kind:"block",type:"grbl_unlock_motor"},{kind:"button",text:"G-code","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="grbl_g_code">\n    <value name="code">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"grbl_read_line"},{kind:"block",type:"grbl_read_clean"},{kind:"button",text:"Limit","web-class":"blockly-subclass--style"},{kind:"block",type:"grbl_unlock"},{kind:"block",type:"grbl_in_lock"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"ComxToolbox",function(){return s});var o=n(52),l=n(53),i=n(54),a=n(55);let s=[{kind:"category",name:"%{BKY_LORAWAN470}",colour:"%{BKY_LISTS_HUE}",contents:l.Lorawan470Toolbox,toolboxitemid:"comx_lorawan470"},{kind:"category",name:"%{BKY_LORAWAN915}",colour:"%{BKY_PINS_HUE}",contents:i.Lorawan915Toolbox,toolboxitemid:"comx_lorawan915"},{kind:"category",name:"%{BKY_COMLTE}",colour:"%{BKY_HAT_HUE}",contents:a.LTEToolbox,toolboxitemid:"comx_lte"},{kind:"category",name:"%{BKY_NBIOT}",colour:"%{BKY_PWM_HUE}",contents:o.NbiotToolbox,toolboxitemid:"comx_nbiot_cn"},{kind:"category",name:"%{BKY_CAT1}",colour:"%{BKY_CAT1_HUE}",custom:"COM_CAT1",toolboxitemid:"comx_cat1"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"NbiotToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_NBIOT}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"comx_nb-iot"},{kind:"button",text:"\u25b6 %{BKY_NBIOT_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'\n<block type="nbiot_init" hidden="true">\n<value name="tx">\n  <shadow type="math_number">\n    <field name="NUM">13</field>\n  </shadow>\n</value>\n<value name="rx">\n  <shadow type="math_number">\n    <field name="NUM">5</field>\n  </shadow>\n</value>\n<next>\n  <block type="nbiot_coap_connect">\n    <value name="ip">\n      <shadow type="text">\n        <field name="TEXT">120.77.157.90</field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM">5683</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="nbiot_coap_get">\n            <mutation isToken="false"></mutation>\n            <field name="tokenChoose">false</field>\n            <value name="url">\n              <shadow type="text">\n                <field name="TEXT">/m5stack-get</field>\n              </shadow>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="nbiot_coap_post">\n                <mutation isToken="false"></mutation>\n                <field name="format">0</field>\n                <field name="tokenChoose">false</field>\n                <value name="url">\n                  <shadow type="text">\n                    <field name="TEXT">/m5stack-post</field>\n                  </shadow>\n                </value>\n                <value name="payload">\n                  <shadow type="text">\n                    <field name="TEXT">post-test</field>\n                  </shadow>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="nbiot_coap_put">\n                    <mutation isToken="false"></mutation>\n                    <field name="format">0</field>\n                    <field name="tokenChoose">false</field>\n                    <value name="url">\n                      <shadow type="text">\n                        <field name="TEXT">/m5stack-put</field>\n                      </shadow>\n                    </value>\n                    <value name="payload">\n                      <shadow type="text">\n                        <field name="TEXT">put-test</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"952","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="nbiot_init">\n        <value name="tx">\n          <shadow type="math_number">\n            <field name="NUM">13</field>\n          </shadow>\n        </value>\n        <value name="rx">\n          <shadow type="math_number">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"nbiot_power_down_module"},{kind:"block",type:"nbiot_reset_module"},{kind:"block",type:"nbiot_set_echo_mode"},{kind:"block",type:"nbiot_check_status"},{kind:"block",type:"nbiot_check_single_quality"},{kind:"block",type:"nbiot_check_network_registration"},{kind:"block",type:"nbiot_check_gprs_network_registration"},{kind:"block",type:"nbiot_enable_pdp_context"},{kind:"button",text:"%{BKY_NBIOT_COAP_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="nbiot_coap_connect">\n        <value name="ip">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">5683</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="nbiot_coap_get">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="nbiot_coap_post">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="nbiot_coap_put">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"nbiot_coap_destroy"},{kind:"button",text:"%{BKY_NBIOT_MQTT_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="nbiot_mqtt_connect">\n        <value name="server">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">1883</field>\n          </shadow>\n        </value>\n        <value name="client_id">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="username">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="passwd">\n          <shadow type="text_password">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="keepalive">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"nbiot_mqtt_disconnect"},{kind:"block",blockxml:'<block type="nbiot_mqtt_sub">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="nbiot_mqtt_sub_cb">\n      <value name="topic">\n        <block type="variables_get">\n          <field name="VAR">nb_topic</field>\n        </block>\n      </value>\n      <value name="msg">\n        <block type="variables_get">\n          <field name="VAR">nb_msg</field>\n        </block>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="nbiot_mqtt_unsubscribe">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="nbiot_mqtt_publish">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"nbiot_mqtt_check_connection"},{kind:"block",blockxml:'<block type="nbiot_mqtt_poll">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"Lorawan470Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_LORAWAN470}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"comx_lorawan470"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="lorawan470_init" hidden="true">\n<value name="tx">\n  <shadow type="math_number">\n    <field name="NUM">17</field>\n  </shadow>\n</value>\n<value name="rx">\n  <shadow type="math_number">\n    <field name="NUM">16</field>\n  </shadow>\n</value>\n<next>\n  <block type="lorawan470_set_join_mode">\n    <field name="mode">0</field>\n    <next>\n      <block type="lorawan470_config_mode">\n        <mutation mode="OTAA"></mutation>\n        <field name="mode">OTAA</field>\n        <value name="deveui">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="appkey">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="appeui">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <next>\n          <block type="lorawan470_config">\n            <field name="channel">0400</field>\n            <field name="rx2_dr">0</field>\n            <field name="class_mode">2</field>\n            <field name="freqmode">1</field>\n            <value name="rx1_offset">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="rx2_freq">\n              <shadow type="math_number">\n                <field name="NUM">505300000</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="lorawan470_join_start">\n                <field name="para2">1</field>\n                <value name="para3">\n                  <shadow type="math_slider">\n                    <field name="NUM" min="7" max="255" step="1">8</field>\n                  </shadow>\n                </value>\n                <value name="para4">\n                  <shadow type="math_slider">\n                    <field name="NUM" min="1" max="256" step="1">8</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="variables_set">\n                    <field name="VAR">flag</field>\n                    <value name="VALUE">\n                      <block type="logic_boolean">\n                        <field name="BOOL">FALSE</field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="basic_on_loop">\n                        <statement name="LOOP">\n                          <block type="controls_if">\n                            <value name="IF0">\n                              <block type="logic_operation">\n                                <field name="OP">AND</field>\n                                <value name="A">\n                                  <block type="logic_negate">\n                                    <value name="BOOL">\n                                      <block type="variables_get">\n                                        <field name="VAR">flag</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                                <value name="B">\n                                  <block type="lorawan470_check_join_status"></block>\n                                </value>\n                              </block>\n                            </value>\n                            <statement name="DO0">\n                              <block type="variables_set">\n                                <field name="VAR">flag</field>\n                                <value name="VALUE">\n                                  <block type="logic_boolean">\n                                    <field name="BOOL">TRUE</field>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT">\n                                      <block type="text">\n                                        <field name="TEXT">Joined</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="controls_if">\n                                <value name="IF0">\n                                  <block type="variables_get">\n                                    <field name="VAR">flag</field>\n                                  </block>\n                                </value>\n                                <statement name="DO0">\n                                  <block type="lorawan470_send_data">\n                                    <mutation isconfirm="true"></mutation>\n                                    <field name="confirmOP">true</field>\n                                    <value name="payload">\n                                      <shadow type="text">\n                                        <field name="TEXT">M5STACK</field>\n                                      </shadow>\n                                    </value>\n                                    <value name="nbtrials">\n                                      <shadow type="math_slider">\n                                        <field name="NUM" min="1" max="15" step="1">5</field>\n                                      </shadow>\n                                    </value>\n                                    <next>\n                                      <block type="text_print">\n                                        <value name="TEXT">\n                                          <block type="lorawan470_check_downlink_data"></block>\n                                        </value>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </statement>\n                                <next>\n                                  <block type="timer_delay">\n                                    <value name="DELAY">\n                                      <shadow type="math_number">\n                                        <field name="NUM">10</field>\n                                      </shadow>\n                                    </value>\n                                  </block>\n                                </next>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"642","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="lorawan470_init">\n        <value name="tx">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="rx">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="lorawan470_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="lorawan470_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">505300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"lorawan470_get_abp_config"},{kind:"block",type:"lorawan470_get_otaa_config"},{kind:"block",type:"lorawan470_check_join_status"},{kind:"block",type:"lorawan470_set_join_mode"},{kind:"block",type:"lorawan470_join_stop"},{kind:"block",blockxml:'<block type="lorawan470_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan470_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan470_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan470_check_sent_status"},{kind:"block",type:"lorawan470_check_downlink_data"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"Lorawan915Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_LORAWAN915}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"comx_lorawan915"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="lorawan915_init" hidden="true">\n<value name="tx">\n  <shadow type="math_number">\n    <field name="NUM">17</field>\n  </shadow>\n</value>\n<value name="rx">\n  <shadow type="math_number">\n    <field name="NUM">16</field>\n  </shadow>\n</value>\n<next>\n  <block type="lorawan915_set_join_mode">\n    <field name="mode">0</field>\n    <next>\n      <block type="lorawan915_config_mode">\n        <mutation mode="OTAA"></mutation>\n        <field name="mode">OTAA</field>\n        <value name="deveui">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="appkey">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="appeui">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <next>\n          <block type="lorawan915_config">\n            <field name="channel">0002</field>\n            <field name="rx2_dr">0</field>\n            <field name="class_mode">2</field>\n            <field name="freqmode">2</field>\n            <value name="rx1_offset">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="rx2_freq">\n              <shadow type="math_number">\n                <field name="NUM">923300000</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="lorawan915_join_start">\n                <field name="para2">1</field>\n                <value name="para3">\n                  <shadow type="math_slider">\n                    <field name="NUM" min="7" max="255" step="1">8</field>\n                  </shadow>\n                </value>\n                <value name="para4">\n                  <shadow type="math_slider">\n                    <field name="NUM" min="1" max="256" step="1">8</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="variables_set">\n                    <field name="VAR">flag</field>\n                    <value name="VALUE">\n                      <block type="logic_boolean">\n                        <field name="BOOL">FALSE</field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="basic_on_loop">\n                        <statement name="LOOP">\n                          <block type="controls_if">\n                            <value name="IF0">\n                              <block type="logic_operation">\n                                <field name="OP">AND</field>\n                                <value name="A">\n                                  <block type="logic_negate">\n                                    <value name="BOOL">\n                                      <block type="variables_get">\n                                        <field name="VAR">flag</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                                <value name="B">\n                                  <block type="lorawan915_check_join_status"></block>\n                                </value>\n                              </block>\n                            </value>\n                            <statement name="DO0">\n                              <block type="variables_set">\n                                <field name="VAR">flag</field>\n                                <value name="VALUE">\n                                  <block type="logic_boolean">\n                                    <field name="BOOL">TRUE</field>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT">\n                                      <block type="text">\n                                        <field name="TEXT">Joined</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="controls_if">\n                                <value name="IF0">\n                                  <block type="variables_get">\n                                    <field name="VAR">flag</field>\n                                  </block>\n                                </value>\n                                <statement name="DO0">\n                                  <block type="lorawan915_send_data">\n                                    <mutation isconfirm="true"></mutation>\n                                    <field name="confirmOP">true</field>\n                                    <value name="payload">\n                                      <shadow type="text">\n                                        <field name="TEXT">M5STACK</field>\n                                      </shadow>\n                                    </value>\n                                    <value name="nbtrials">\n                                      <shadow type="math_slider">\n                                        <field name="NUM" min="1" max="15" step="1">5</field>\n                                      </shadow>\n                                    </value>\n                                    <next>\n                                      <block type="text_print">\n                                        <value name="TEXT">\n                                          <block type="lorawan915_check_downlink_data"></block>\n                                        </value>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </statement>\n                                <next>\n                                  <block type="timer_delay">\n                                    <value name="DELAY">\n                                      <shadow type="math_number">\n                                        <field name="NUM">10</field>\n                                      </shadow>\n                                    </value>\n                                  </block>\n                                </next>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"642","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="lorawan915_init">\n        <value name="tx">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="rx">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="lorawan915_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="lorawan915_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">923300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"lorawan915_get_abp_config"},{kind:"block",type:"lorawan915_get_otaa_config"},{kind:"block",type:"lorawan915_check_join_status"},{kind:"block",type:"lorawan915_set_join_mode"},{kind:"block",type:"lorawan915_join_stop"},{kind:"block",blockxml:'<block type="lorawan915_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan915_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="lorawan915_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"lorawan915_check_sent_status"},{kind:"block",type:"lorawan915_check_downlink_data"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"LTEToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_COMLTE}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"comx_lte"},{kind:"button",text:"\u25b6 %{BKY_COMLTE_SET_HTTP_GET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="comlte_init" hidden="true">\n<value name="tx">\n  <shadow type="math_number">\n    <field name="NUM">13</field>\n  </shadow>\n</value>\n<value name="rx">\n  <shadow type="math_number">\n    <field name="NUM">5</field>\n  </shadow>\n</value>\n<next>\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="comlte_check_status"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="comlte_check_single_quality"></block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="comlte_check_network_registration"></block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="comlte_check_gprs_network_registration"></block>\n                </value>\n                <next>\n                  <block type="basic_on_loop">\n                    <statement name="LOOP">\n                      <block type="controls_if">\n                        <value name="IF0">\n                          <block type="logic_compare">\n                            <field name="OP">EQ</field>\n                            <value name="A">\n                              <block type="convent_str">\n                                <value name="VALUE">\n                                  <block type="comlte_check_gprs_network_registration"></block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="B">\n                              <block type="text">\n                                <field name="TEXT">1</field>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="variables_set">\n                            <field name="VAR">resp</field>\n                            <value name="VALUE">\n                              <block type="comlte_http_get">\n                                <comment pinned="false" h="80" w="160">echo "test"</comment>\n                                <value name="url">\n                                  <shadow type="text">\n                                    <field name="TEXT">http://www.m2msupport.net/m2msupport/test.php</field>\n                                  </shadow>\n                                </value>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="controls_if">\n                                <value name="IF0">\n                                  <block type="variables_get">\n                                    <field name="VAR">resp</field>\n                                  </block>\n                                </value>\n                                <statement name="DO0">\n                                  <block type="text_print">\n                                    <value name="TEXT">\n                                      <block type="lists_getIndex">\n                                        <mutation statement="false" at="true"></mutation>\n                                        <field name="MODE">GET</field>\n                                        <field name="WHERE">FROM_START</field>\n                                        <value name="VALUE">\n                                          <block type="variables_get">\n                                            <field name="VAR">resp</field>\n                                          </block>\n                                        </value>\n                                        <value name="AT">\n                                          <block type="math_number">\n                                            <field name="NUM">2</field>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </statement>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                      </block>\n                    </statement>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_COMLTE_SET_HTTP_POST}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="comlte_init" hidden="true">\n<value name="tx">\n  <shadow type="math_number">\n    <field name="NUM">13</field>\n  </shadow>\n</value>\n<value name="rx">\n  <shadow type="math_number">\n    <field name="NUM">5</field>\n  </shadow>\n</value>\n<next>\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="comlte_check_status"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="comlte_check_single_quality"></block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="comlte_check_network_registration"></block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="comlte_check_gprs_network_registration"></block>\n                </value>\n                <next>\n                  <block type="basic_on_loop">\n                    <statement name="LOOP">\n                      <block type="controls_if">\n                        <value name="IF0">\n                          <block type="logic_compare">\n                            <field name="OP">EQ</field>\n                            <value name="A">\n                              <block type="convent_str">\n                                <value name="VALUE">\n                                  <block type="comlte_check_gprs_network_registration"></block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="B">\n                              <block type="text">\n                                <field name="TEXT">1</field>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="variables_set">\n                            <field name="VAR">post_data</field>\n                            <value name="VALUE">\n                              <block type="map_on_loop">\n                                <statement name="LOOP">\n                                  <block type="create_map_key">\n                                    <value name="key">\n                                      <block type="text">\n                                        <field name="TEXT">random1</field>\n                                      </block>\n                                    </value>\n                                    <value name="value">\n                                      <block type="math_random_int">\n                                        <value name="FROM">\n                                          <block type="math_number">\n                                            <field name="NUM">0</field>\n                                          </block>\n                                        </value>\n                                        <value name="TO">\n                                          <block type="math_number">\n                                            <field name="NUM">100</field>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </statement>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="variables_set">\n                                <field name="VAR">resp</field>\n                                <value name="VALUE">\n                                  <block type="comlte_http_post">\n                                    <field name="type">application/json</field>\n                                    <value name="url">\n                                      <shadow type="text">\n                                        <field name="TEXT">http://httpbin.org/post</field>\n                                      </shadow>\n                                    </value>\n                                    <value name="data">\n                                      <shadow type="text">\n                                        <field name="TEXT"></field>\n                                      </shadow>\n                                      <block type="convent_str">\n                                        <value name="VALUE">\n                                          <block type="dumps_json">\n                                            <value name="JSON_VAR">\n                                              <block type="variables_get">\n                                                <field name="VAR">post_data</field>\n                                              </block>\n                                            </value>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="controls_if">\n                                    <value name="IF0">\n                                      <block type="variables_get">\n                                        <field name="VAR">resp</field>\n                                      </block>\n                                    </value>\n                                    <statement name="DO0">\n                                      <block type="text_print">\n                                        <value name="TEXT">\n                                          <block type="get_map_key">\n                                            <value name="key">\n                                              <block type="text">\n                                                <field name="TEXT">data</field>\n                                              </block>\n                                            </value>\n                                            <value name="map">\n                                              <block type="loads_json">\n                                                <value name="JSON_VAR">\n                                                  <block type="lists_getIndex">\n                                                    <mutation statement="false" at="true"></mutation>\n                                                    <field name="MODE">GET</field>\n                                                    <field name="WHERE">FROM_START</field>\n                                                    <value name="VALUE">\n                                                      <block type="variables_get">\n                                                        <field name="VAR">resp</field>\n                                                      </block>\n                                                    </value>\n                                                    <value name="AT">\n                                                      <block type="math_number">\n                                                        <field name="NUM">2</field>\n                                                      </block>\n                                                    </value>\n                                                  </block>\n                                                </value>\n                                              </block>\n                                            </value>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </statement>\n                                  </block>\n                                </next>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                      </block>\n                    </statement>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"1131","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="comlte_init">\n    <value name="tx">\n      <shadow type="math_number">\n        <field name="NUM">13</field>\n      </shadow>\n    </value>\n    <value name="rx">\n      <shadow type="math_number">\n        <field name="NUM">5</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"comlte_power_down_module"},{kind:"block",type:"comlte_reset_module"},{kind:"block",type:"comlte_set_echo_mode"},{kind:"block",type:"comlte_check_status"},{kind:"block",type:"comlte_check_single_quality"},{kind:"block",type:"comlte_check_network_registration"},{kind:"block",type:"comlte_check_gprs_network_registration"},{kind:"block",type:"comlte_enable_pdp_context"},{kind:"button",text:"%{BKY_HTTP_METHODS}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="comlte_http_get">\n    <value name="url">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="comlte_http_post">\n    <value name="url">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="data">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"comlte_http_terminate"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"CalculatorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_CALCULATOR}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"calculator"},{kind:"button",text:"\u25b6 %{BKY_GET_KEYBOARD_CHARACTER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_readStr" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_GET_KEYBOARD_ASIIC}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_readKey" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_CLEAR_CHARACTERS}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_clearStr" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_DELETE_BYTE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_deleteStrLast" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_GET_BTN_STATUS}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_isNewKeyPress" hidden="true"></block>'},{kind:"button",width:"313","web-class":"blockly-divider-nowidth"},{kind:"block",type:"faces_readStr"},{kind:"block",type:"faces_readKey"},{kind:"block",type:"faces_clearStr"},{kind:"block",type:"faces_deleteStrLast"},{kind:"block",type:"faces_isNewKeyPress"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"EncodeToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_ENCODE}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"encoder"},{kind:"button",text:"\u25b6 %{BKY_SET_LED_COLOR}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_encode_setLed" hidden="true">\n      <value name="num">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"button",text:"\u25b6 %{BKY_RESET_ENCODER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_encode_clearValue" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_GET_ENCODER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_encode_getValue" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_GET_DIRECTION_ROTATION}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_encode_getDir" hidden="true"></block>'},{kind:"button",text:"\u25b6 %{BKY_RETURN_ENCODER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="faces_encode_getPress" hidden="true"></block>'},{kind:"button",width:"494","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="faces_encode_setLed">\n      <value name="num">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="faces_encode_setLed_rgb">\n      <value name="num">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n    </block>'},{kind:"block",type:"faces_encode_clearValue"},{kind:"block",type:"faces_encode_getValue"},{kind:"block",type:"faces_encode_getDir"},{kind:"block",type:"faces_encode_getPress"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"FingerToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_FINGER}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"finger"},{kind:"button",text:"\u25b6 %{BKY_FACES_FINGER_DEMO_GET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n      <statement name="LOOP">\n        <block type="text_print">\n          <value name="TEXT">\n            <block type="text_add">\n              <value name="arg0">\n                <shadow type="text">\n                  <field name="TEXT">State: </field>\n                </shadow>\n              </value>\n              <value name="arg1">\n                <block type="faces_finger_get_state"></block>\n              </value>\n            </block>\n          </value>\n        </block>\n      </statement>\n    </block>'},{kind:"button",width:"355","web-class":"blockly-divider-nowidth"},{kind:"block",type:"faces_finger_get_state"},{kind:"block",type:"faces_finger_get_access"},{kind:"block",type:"faces_finger_get_id"},{kind:"block",type:"faces_finger_removeAll"},{kind:"block",blockxml:'<block type="faces_finger_remove_user">\n    <value name="ID">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="faces_finger_add_user">\n    <value name="ID">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="ACCESS">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"faces_finger_read"},{kind:"block",type:"faces_finger_getUnknown"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GameboyToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_GAMEBOY}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"gameboy"},{kind:"button",text:"\u25b6 %{BKY_GAMEBOY_DEMO_GET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_if">\n    <mutation elseif="1"></mutation>\n    <value name="IF0">\n      <block type="faces_gameboy_getStatus">\n        <field name="key">0</field>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="rgb_set_all">\n        <field name="COLOR">#ff0000</field>\n      </block>\n    </statement>\n    <value name="IF1">\n      <block type="faces_gameboy_getStatus">\n        <field name="key">1</field>\n      </block>\n    </value>\n    <statement name="DO1">\n      <block type="rgb_set_all">\n        <field name="COLOR">#33ff33</field>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"261","web-class":"blockly-divider-nowidth"},{kind:"block",type:"faces_gameboy_getStatus"},{kind:"block",type:"faces_gameboy_getPressed"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"JoystickToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_JOYSTICK}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"joystick"},{kind:"button",text:"\u25b6 %{BKY_JOYSTICK_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">X: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="faces_joystick_x"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Y: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="faces_joystick_y"></block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"347","web-class":"blockly-divider-nowidth"},{kind:"block",type:"faces_joystick_x"},{kind:"block",type:"faces_joystick_y"},{kind:"block",type:"faces_joystick_press"},{kind:"block",type:"faces_joystick_invert_x"},{kind:"block",type:"faces_joystick_invert_y"},{kind:"block",blockxml:'<block type="faces_joystick_setLed">\n    <value name="num">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="3">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"KeyboardToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_KEYBOARD}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"keyboard"},{kind:"button",text:"\u25b6 %{BKY_KEYBOARD_DEMO_RETURN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_if">\n    <value name="IF0">\n      <block type="faces_keyboard_isNewKeyPress"></block>\n    </value>\n    <statement name="DO0">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="faces_keyboard_readStr"></block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"281","web-class":"blockly-divider-nowidth"},{kind:"block",type:"faces_keyboard_readStr"},{kind:"block",type:"faces_keyboard_clearStr"},{kind:"block",type:"faces_keyboard_deleteStrLast"},{kind:"block",type:"faces_keyboard_readKey"},{kind:"block",type:"faces_keyboard_isNewKeyPress"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"RfidToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_FACES_RFID}","web-class":"blockly-title--style",callbackKey:"facesDocs",url:"rfid"},{kind:"button",text:"\u25b6 %{BKY_RFID_DEMO_RETURN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_if">\n    <value name="IF0">\n      <block type="faces_rfid_cardOn"></block>\n    </value>\n    <statement name="DO0">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">CardID: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="faces_rfid_uid"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="controls_for">\n            <field name="VAR">i</field>\n            <value name="FROM">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n            <value name="TO">\n              <block type="math_number">\n                <field name="NUM">10</field>\n              </block>\n            </value>\n            <value name="BY">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n            <statement name="DO">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">String: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="faces_rfid_readStr">\n                        <value name="VALUE">\n                          <shadow type="math_number">\n                            <field name="NUM">1</field>\n                          </shadow>\n                          <block type="variables_get">\n                            <field name="VAR">i</field>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"588","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="faces_rfid_readStr">\n    <value name="VALUE">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="faces_write_block">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="VALUE1">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"faces_rfid_cardOn"},{kind:"block",type:"faces_rfid_uid"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitEnvToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_ENV}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"env"},{kind:"button",text:"%{BKY_ENV}II","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"envII"},{kind:"button",text:"%{BKY_ENV}III","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"envIII"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"WeatherStation"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ENV_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="dht12_pressure"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="dht12_get_temperature"></block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="dht12_get_humidity"></block>\n            </value>\n            <next>\n              <block type="timer_delay_ms">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">10</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"349","web-class":"blockly-divider-nowidth"},{kind:"block",type:"dht12_pressure"},{kind:"block",type:"dht12_get_temperature"},{kind:"block",type:"dht12_get_humidity"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitAngleToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_ANGLE}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"angle"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ANGLE_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="angle_read"></block>\n    </value>\n    <next>\n      <block type="timer_delay_ms">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">10</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"222","web-class":"blockly-divider-nowidth"},{kind:"block",type:"angle_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitPirToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_PIR}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"pir"},{kind:"button","web-class":"blockly-subclass--style",callbackKey:"unitsDocs",url:"pir",urlId:"null",icon:"/assets/images/flyout/unit_pir.jpg",iconSize:"200"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"PIR"},{kind:"button",text:"\u25b6 %{BKY_UNIT_PIR_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_ifelse">\n    <value name="IF0">\n      <block type="logic_compare">\n        <field name="OP">EQ</field>\n        <value name="A">\n          <block type="pir_read"></block>\n        </value>\n        <value name="B">\n          <block type="math_number">\n            <field name="NUM">1</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">PIR Status: Detected</field>\n          </block>\n        </value>\n      </block>\n    </statement>\n    <statement name="ELSE">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">PIR Status: Not detected</field>\n          </block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"383","web-class":"blockly-divider-nowidth"},{kind:"block",type:"pir_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitNeopixelToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_NEOPIXEL}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"neopixel"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Neopixel"},{kind:"button",text:"\u25b6 %{BKY_UNIT_NEOPIXEL_FLASH_LED}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="variables_set">\n    <field name="VAR">R</field>\n    <value name="VALUE">\n      <block type="math_random_int">\n        <value name="FROM">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="TO">\n          <block type="math_number">\n            <field name="NUM">255</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="variables_set">\n        <field name="VAR">G</field>\n        <value name="VALUE">\n          <block type="math_random_int">\n            <value name="FROM">\n              <block type="math_number">\n                <field name="NUM">0</field>\n              </block>\n            </value>\n            <value name="TO">\n              <block type="math_number">\n                <field name="NUM">255</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="variables_set">\n            <field name="VAR">B</field>\n            <value name="VALUE">\n              <block type="math_random_int">\n                <value name="FROM">\n                  <block type="math_number">\n                    <field name="NUM">0</field>\n                  </block>\n                </value>\n                <value name="TO">\n                  <block type="math_number">\n                    <field name="NUM">255</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="controls_for">\n                <field name="VAR">i</field>\n                <value name="FROM">\n                  <block type="math_number">\n                    <field name="NUM">1</field>\n                  </block>\n                </value>\n                <value name="TO">\n                  <block type="math_number">\n                    <field name="NUM">30</field>\n                  </block>\n                </value>\n                <value name="BY">\n                  <block type="math_number">\n                    <field name="NUM">1</field>\n                  </block>\n                </value>\n                <statement name="DO">\n                  <block type="rgb_multi_set_color_from_rgb">\n                    <value name="FROM">\n                      <shadow type="math_number">\n                        <field name="NUM">1</field>\n                      </shadow>\n                    </value>\n                    <value name="TO">\n                      <shadow type="math_number">\n                        <field name="NUM">30</field>\n                      </shadow>\n                      <block type="variables_get">\n                        <field name="VAR">i</field>\n                      </block>\n                    </value>\n                    <value name="R">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                      <block type="variables_get">\n                        <field name="VAR">R</field>\n                      </block>\n                    </value>\n                    <value name="G">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                      <block type="variables_get">\n                        <field name="VAR">G</field>\n                      </block>\n                    </value>\n                    <value name="B">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                      <block type="variables_get">\n                        <field name="VAR">B</field>\n                      </block>\n                    </value>\n                  </block>\n                </statement>\n                <next>\n                  <block type="timer_delay_ms">\n                    <value name="DELAY">\n                      <shadow type="math_number">\n                        <field name="NUM">500</field>\n                      </shadow>\n                    </value>\n                    <next>\n                      <block type="controls_for">\n                        <field name="VAR">i</field>\n                        <value name="FROM">\n                          <block type="math_number">\n                            <field name="NUM">1</field>\n                          </block>\n                        </value>\n                        <value name="TO">\n                          <block type="math_number">\n                            <field name="NUM">30</field>\n                          </block>\n                        </value>\n                        <value name="BY">\n                          <block type="math_number">\n                            <field name="NUM">1</field>\n                          </block>\n                        </value>\n                        <statement name="DO">\n                          <block type="rgb_multi_set_color_from">\n                            <field name="COLOR">#000000</field>\n                            <value name="FROM">\n                              <shadow type="math_number">\n                                <field name="NUM">1</field>\n                              </shadow>\n                            </value>\n                            <value name="TO">\n                              <shadow type="math_number">\n                                <field name="NUM">5</field>\n                              </shadow>\n                              <block type="variables_get">\n                                <field name="VAR">i</field>\n                              </block>\n                            </value>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="timer_delay_ms">\n                            <value name="DELAY">\n                              <shadow type="math_number">\n                                <field name="NUM">500</field>\n                              </shadow>\n                            </value>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"576","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="rgb_multi_set_color">\n        <value name="INDEX">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="rgb_multi_set_color_from">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="TO">\n          <shadow type="math_number">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="rgb_multi_set_color_from_rgb">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="TO">\n          <shadow type="math_number">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n        <value name="R">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"rgb_multi_set_color_all"},{kind:"block",blockxml:'<block type="rgb_multi_set_brightness">\n        <value name="BRIGHTNESS">\n          <shadow type="math_number">\n            <field name="NUM">20</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"rgb_multi_set_show_lock"},{kind:"block",type:"rgb_multi_show"},{kind:"block",type:"rgb_multi_set_hexagon_matrix"},{kind:"block",blockxml:'<block type="rgb_multi_set_hexagon_matrix_rgb">\n        <value name="R">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitJoysticklToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_JOYSTICK}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"joystick"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Joystick"},{kind:"button",text:"\u25b6 %{BKY_UNIT_JOYSTICK_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="joystick_x"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="joystick_y"></block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="joystick_press"></block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.2</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"417","web-class":"blockly-divider-nowidth"},{kind:"block",type:"joystick_x"},{kind:"block",type:"joystick_y"},{kind:"block",type:"joystick_press"},{kind:"block",type:"joystick_reversal_x"},{kind:"block",type:"joystick_reversal_y"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitLightToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_LIGHT}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"light"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Light"},{kind:"button",text:"\u25b6 %{BKY_UNIT_LIGHT_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="light_d_read"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="light_a_read"></block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.2</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"278","web-class":"blockly-divider-nowidth"},{kind:"block",type:"light_a_read"},{kind:"block",type:"light_d_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitEarthToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_EARTH}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"earth"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Earth"},{kind:"button",text:"\u25b6 %{BKY_UNIT_EARTH_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="earth_a_read"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="earth_d_read"></block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.2</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"278","web-class":"blockly-divider-nowidth"},{kind:"block",type:"earth_a_read"},{kind:"block",type:"earth_d_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitMakeyToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_MAKEY}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"makey"},{kind:"button",text:"\u25b6 %{BKY_UNIT_MAKEY_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="text_print" hidden="true">\n<value name="TEXT">\n  <block type="text">\n    <field name="TEXT">Value</field>\n  </block>\n</value>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="makey_value"></block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"222","web-class":"blockly-divider-nowidth"},{kind:"block",type:"makey_value"},{kind:"block",type:"makey_all_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitServoToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_SERVO}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"servo_kit"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"servoTester"},{kind:"button",text:"\u25b6 %{BKY_UNIT_SERVO_DEMO_CONTROL}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="servo_unit_write_angle" hidden="true">\n<value name="ANGLE">\n  <shadow type="math_number">\n    <field name="NUM">90</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"320","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="servo_unit_write_angle">\n        <value name="ANGLE">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="servo_unit_write_us">\n        <value name="TIME">\n          <shadow type="math_number">\n            <field name="NUM">600</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitWeightToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_WEIGHT}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"weight"},{kind:"button",text:"\u25b6 %{BKY_UNIT_WEIGHT_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="weigh_get_weight"></block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.1</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="controls_if">\n            <value name="IF0">\n              <block type="button_ispressed">\n                <field name="BUTTON">A</field>\n                <field name="EVENT">isPressed</field>\n              </block>\n            </value>\n            <statement name="DO0">\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.1</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="weigh_zero"></block>\n                </next>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"255","web-class":"blockly-divider-nowidth"},{kind:"block",type:"weigh_zero"},{kind:"block",type:"weigh_get_weight"},{kind:"block",type:"weigh_get_rawData"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitHeartToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HEART}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"heart"},{kind:"button",text:"\u25b6 %{BKY_UNIT_HEART_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="heart_set_led_current" hidden="true">\n<field name="VARNAME1">0x04</field>\n<field name="VARNAME2">0x01</field>\n<next>\n  <block type="heart_set_mode">\n    <field name="VARNAME">0x03</field>\n    <next>\n      <block type="basic_on_loop">\n        <statement name="LOOP">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="heart_get_heartrate"></block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="heart_get_spo2"></block>\n                </value>\n                <next>\n                  <block type="timer_delay">\n                    <value name="DELAY">\n                      <shadow type="math_number">\n                        <field name="NUM">0.3</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"332","web-class":"blockly-divider-nowidth"},{kind:"block",type:"heart_get_heartrate"},{kind:"block",type:"heart_get_spo2"},{kind:"block",type:"heart_set_mode"},{kind:"block",type:"heart_set_led_current"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitTrackToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_TRACK}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"trace"},{kind:"button",text:"\u25b6 %{BKY_UNIT_TRACE_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text">\n        <field name="TEXT">Sensor 0: </field>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="m5track_get_digital">\n            <field name="DIGITAL">1</field>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT"> Sensor 1: </field>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="m5track_get_digital">\n                    <field name="DIGITAL">2</field>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text">\n                        <field name="TEXT"> Sensor 2: </field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="text_print">\n                        <value name="TEXT">\n                          <block type="m5track_get_digital">\n                            <field name="DIGITAL">3</field>\n                          </block>\n                        </value>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text">\n                                <field name="TEXT"> Sensor 3: </field>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="m5track_get_digital">\n                                    <field name="DIGITAL">4</field>\n                                  </block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"339","web-class":"blockly-divider-nowidth"},{kind:"block",type:"m5track_get_analog"},{kind:"block",type:"m5track_get_digital"},{kind:"block",blockxml:'<block type="m5track_set_analog">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n    <value name="NUM1">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitButtonToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_BUTTON}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"button"},{kind:"button",text:"\u25b6 %{BKY_UNIT_BUTTON_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_ifelse">\n    <value name="IF0">\n      <block type="unit_button_state">\n        <field name="EVENT">wasPressed</field>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">Pressed</field>\n          </block>\n        </value>\n      </block>\n    </statement>\n    <statement name="ELSE">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">Released</field>\n          </block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"380","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_button_callback"},{kind:"block",type:"unit_button_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitDualbtnToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_DUAL_BUTTON}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"dual_button"},{kind:"button",text:"\u25b6 %{BKY_UNIT_DUAL_BUTTON_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_if">\n    <mutation elseif="1"></mutation>\n    <value name="IF0">\n      <block type="unit_dual_button_state">\n        <field name="BTN">btnBlue</field>\n        <field name="EVENT">wasPressed</field>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="rgb_set_all">\n        <field name="COLOR">#000099</field>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">Blue button pressed</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n    <value name="IF1">\n      <block type="unit_dual_button_state">\n        <field name="BTN">btnRed</field>\n        <field name="EVENT">wasPressed</field>\n      </block>\n    </value>\n    <statement name="DO1">\n      <block type="rgb_set_all">\n        <field name="COLOR">#cc0000</field>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">Red button pressed</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"473","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_dual_button_callback"},{kind:"block",type:"unit_dual_button_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitRgbToolbox",function(){return o});let o=[{kind:"button",text:"RGB","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"rgb"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"RGB"},{kind:"button",text:"\u25b6 %{BKY_UNIT_RGB_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="rgb_unit_set_color">\n    <field name="COLOR">#ff0000</field>\n    <value name="INDEX">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="rgb_unit_set_color">\n        <field name="COLOR">#33ff33</field>\n        <value name="INDEX">\n          <shadow type="math_number">\n            <field name="NUM">2</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="rgb_unit_set_color">\n            <field name="COLOR">#3366ff</field>\n            <value name="INDEX">\n              <shadow type="math_number">\n                <field name="NUM">3</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.1</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"356","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="rgb_unit_set_color">\n        <value name="INDEX">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="rgb_unit_set_color_from">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="TO">\n          <shadow type="math_number">\n            <field name="NUM">3</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"rgb_unit_set_color_all"},{kind:"block",blockxml:'<block type="rgb_unit_set_brightness">\n        <value name="BRIGHTNESS">\n          <shadow type="math_number">\n            <field name="NUM">20</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitRelayToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_RELAY}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"relay"},{kind:"button",text:"\u25b6 %{BKY_UNIT_RELAY_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="set_relay_on">\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">Relay ON</field>\n          </block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="set_relay_off">\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text">\n                        <field name="TEXT">Relay OFF</field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">1</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"246","web-class":"blockly-divider-nowidth"},{kind:"block",type:"set_relay_on"},{kind:"block",type:"set_relay_off"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitAdcToolbox",function(){return o});let o=[{kind:"button",text:"ADC","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"adc"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ADC_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="unit_adc_state">\n        <field name="ADC">adc0</field>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.1</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"243","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_adc_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitDacToolbox",function(){return o});let o=[{kind:"button",text:"DAC","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"dac"},{kind:"button",text:"\u25b6 %{BKY_UNIT_DAC_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_for">\n    <field name="VAR">i</field>\n    <value name="FROM">\n      <block type="math_number">\n        <field name="NUM">0</field>\n      </block>\n    </value>\n    <value name="TO">\n      <block type="math_number">\n        <field name="NUM">3</field>\n      </block>\n    </value>\n    <value name="BY">\n      <block type="math_number">\n        <field name="NUM">1</field>\n      </block>\n    </value>\n    <statement name="DO">\n      <block type="unit_dac_state">\n        <field name="DAC">dac0</field>\n        <field name="SAVE">True</field>\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n          <block type="variables_get">\n            <field name="VAR">i</field>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"></field>\n                  </shadow>\n                  <block type="convent_str">\n                    <value name="VALUE">\n                      <block type="variables_get">\n                        <field name="VAR">i</field>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <value name="arg1">\n                  <block type="text">\n                    <field name="TEXT">V</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">1</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"445","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="unit_dac_state">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_dac_writeData">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitTofToolbox",function(){return o});let o=[{kind:"button",text:"ToF","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"tof"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"ToF"},{kind:"button",text:"\u25b6 %{BKY_UNIT_TOF_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="unit_tof_state">\n        <field name="TOF">tof0</field>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.1</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"278","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_tof_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitNcirToolbox",function(){return o});let o=[{kind:"button",text:"NCIR","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"ncir"},{kind:"button",text:"\u25b6 %{BKY_UNIT_NCIR_DEMO_GET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="unit_ncir_read">\n        <field name="IR">ncir0</field>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.2</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"309","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_ncir_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitIrToolbox",function(){return o});let o=[{kind:"button",text:"IR","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"ir"},{kind:"button",text:"\u25b6 %{BKY_UNIT_IR_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="unit_ir_on">\n    <field name="IR">ir0</field>\n    <next>\n      <block type="controls_ifelse">\n        <value name="IF0">\n          <block type="logic_compare">\n            <field name="OP">EQ</field>\n            <value name="A">\n              <block type="unit_ir_state">\n                <field name="IR">ir0</field>\n              </block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">0</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">Detected</field>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.1</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </statement>\n        <statement name="ELSE">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">Not detected</field>\n              </block>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"433","web-class":"blockly-divider-nowidth"},{kind:"button",text:"%{BKY_IR_NEC_MODE}","web-class":"blockly-subclass--style"},{kind:"sep",gap:"8"},{kind:"button",text:"%{BKY_IR_NEC_MODE_TIPS}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_ir_nec_tx">\n        <value name="addr">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="data">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_ir_nec_cb"},{kind:"button",text:"%{BKY_IR_GPIO_MODE}","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_ir_state"},{kind:"block",type:"unit_ir_on"},{kind:"block",type:"unit_ir_off"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitExtioToolbox",function(){return o});let o=[{kind:"button",text:"EXT.IO","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"extio"},{kind:"button",text:"\u25b6 %{BKY_UNIT_EXTIO_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="extio_set_port" hidden="true">\n<field name="EXTIO">ext_io0</field>\n<field name="MODE">ALL_OUTPUT</field>\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="extio_set_digiWrite">\n        <field name="EXTIO">ext_io0</field>\n        <field name="PIN">1</field>\n        <field name="VALUE">0</field>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.2</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="extio_set_digiWrite">\n                <field name="EXTIO">ext_io0</field>\n                <field name="PIN">2</field>\n                <field name="VALUE">0</field>\n                <next>\n                  <block type="timer_delay">\n                    <value name="DELAY">\n                      <shadow type="math_number">\n                        <field name="NUM">0.2</field>\n                      </shadow>\n                    </value>\n                    <next>\n                      <block type="extio_set_digiWrite">\n                        <field name="EXTIO">ext_io0</field>\n                        <field name="PIN">3</field>\n                        <field name="VALUE">0</field>\n                        <next>\n                          <block type="timer_delay">\n                            <value name="DELAY">\n                              <shadow type="math_number">\n                                <field name="NUM">0.2</field>\n                              </shadow>\n                            </value>\n                            <next>\n                              <block type="extio_set_digiWrite">\n                                <field name="EXTIO">ext_io0</field>\n                                <field name="PIN">4</field>\n                                <field name="VALUE">0</field>\n                                <next>\n                                  <block type="timer_delay">\n                                    <value name="DELAY">\n                                      <shadow type="math_number">\n                                        <field name="NUM">0.2</field>\n                                      </shadow>\n                                    </value>\n                                    <next>\n                                      <block type="extio_set_digiWrite">\n                                        <field name="EXTIO">ext_io0</field>\n                                        <field name="PIN">1</field>\n                                        <field name="VALUE">1</field>\n                                        <next>\n                                          <block type="timer_delay">\n                                            <value name="DELAY">\n                                              <shadow type="math_number">\n                                                <field name="NUM">0.2</field>\n                                              </shadow>\n                                            </value>\n                                            <next>\n                                              <block type="extio_set_digiWrite">\n                                                <field name="EXTIO">ext_io0</field>\n                                                <field name="PIN">2</field>\n                                                <field name="VALUE">1</field>\n                                                <next>\n                                                  <block type="timer_delay">\n                                                    <value name="DELAY">\n                                                      <shadow type="math_number">\n                                                        <field name="NUM">0.2</field>\n                                                      </shadow>\n                                                    </value>\n                                                    <next>\n                                                      <block type="extio_set_digiWrite">\n                                                        <field name="EXTIO">ext_io0</field>\n                                                        <field name="PIN">3</field>\n                                                        <field name="VALUE">1</field>\n                                                        <next>\n                                                          <block type="timer_delay">\n                                                            <value name="DELAY">\n                                                              <shadow type="math_number">\n                                                                <field name="NUM">0.2</field>\n                                                              </shadow>\n                                                            </value>\n                                                            <next>\n                                                              <block type="extio_set_digiWrite">\n                                                                <field name="EXTIO">ext_io0</field>\n                                                                <field name="PIN">4</field>\n                                                                <field name="VALUE">1</field>\n                                                                <next>\n                                                                  <block type="timer_delay">\n                                                                    <value name="DELAY">\n                                                                      <shadow type="math_number">\n                                                                        <field name="NUM">0.2</field>\n                                                                      </shadow>\n                                                                    </value>\n                                                                  </block>\n                                                                </next>\n                                                              </block>\n                                                            </next>\n                                                          </block>\n                                                        </next>\n                                                      </block>\n                                                    </next>\n                                                  </block>\n                                                </next>\n                                              </block>\n                                            </next>\n                                          </block>\n                                        </next>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </next>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"287","web-class":"blockly-divider-nowidth"},{kind:"block",type:"extio_set_port"},{kind:"block",type:"extio_set_pin"},{kind:"block",blockxml:'<block type="extio_set_digiWritePort">\n        <value name="FROM">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"extio_set_digiWrite"},{kind:"block",type:"extio_set_digiRead"},{kind:"block",type:"extio_get_digiReadPort"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitColorToolbox",function(){return o});let o=[{kind:"button",text:"Color","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"color"},{kind:"button",text:"\u25b6 %{BKY_UNIT_COLOR_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">R:</field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="convent_str">\n            <value name="VALUE">\n              <block type="color_getR">\n                <field name="COLOR">color0</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">G:</field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="convent_str">\n                <value name="VALUE">\n                  <block type="color_getG">\n                    <field name="COLOR">color0</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">B:</field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="convent_str">\n                    <value name="VALUE">\n                      <block type="color_getB">\n                        <field name="COLOR">color0</field>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"489","web-class":"blockly-divider-nowidth"},{kind:"block",type:"color_getD"},{kind:"block",type:"color_getR"},{kind:"block",type:"color_getG"},{kind:"block",type:"color_getB"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitFingerToolbox",function(){return o});let o=[{kind:"button",text:"FINGER","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"finger"},{kind:"button",text:"\u25b6 %{BKY_UNIT_FINGER_DEMO_ENTER}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="finger_add_user" hidden="true">\n<field name="STATE">finger0</field>\n<field name="ACCESS">1</field>\n<value name="ID">\n  <shadow type="math_number">\n    <field name="NUM">1</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_UNIT_FINGER_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="finger_read" hidden="true">\n<statement name="FUNC">\n  <block type="controls_if">\n    <value name="IF0">\n      <block type="logic_operation">\n        <field name="OP">AND</field>\n        <value name="A">\n          <block type="logic_compare">\n            <field name="OP">EQ</field>\n            <value name="A">\n              <block type="finger_get_access"></block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <value name="B">\n          <block type="logic_compare">\n            <field name="OP">EQ</field>\n            <value name="A">\n              <block type="finger_get_id"></block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="rgb_set_all">\n        <field name="COLOR">#33ff33</field>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="rgb_set_all">\n                <field name="COLOR">#000000</field>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"582","web-class":"blockly-divider-nowidth"},{kind:"block",type:"finger_get_state"},{kind:"block",type:"finger_get_access"},{kind:"block",type:"finger_get_id"},{kind:"block",type:"finger_removeAll"},{kind:"block",blockxml:'<block type="finger_remove_user">\n        <value name="ID">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="finger_add_user">\n        <value name="ID">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="ACCESS">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"finger_read"},{kind:"block",type:"finger_getUnknown"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitRfidToolbox",function(){return o});let o=[{kind:"button",text:"RFID","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"rfid"},{kind:"button",text:"\u25b6 %{BKY_UNIT_RFID_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="rfid_cardOn"></block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="rfid_uid"></block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.5</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"334","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="rfid_readStr">\n        <value name="VALUE">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="write_block">\n        <value name="VALUE">\n          <shadow type="text">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <value name="VALUE1">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"rfid_cardOn"},{kind:"block",type:"rfid_uid"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitCardkbToolbox",function(){return o});let o=[{kind:"button",text:"CardKB","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"cardkb"},{kind:"button",text:"\u25b6 %{BKY_UNIT_CARKB_DEMO_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="cardkb_getkey">\n        <field name="KEY">cardkb0</field>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="cardkb_getstring">\n            <field name="STR">cardkb0</field>\n          </block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.1</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"331","web-class":"blockly-divider-nowidth"},{kind:"block",type:"cardkb_getkey"},{kind:"block",type:"cardkb_getstring"},{kind:"block",type:"cardkb_getpress"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitPbhubToolbox",function(){return o});let o=[{kind:"button",text:"PB HUB","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"pbhub"},{kind:"button",text:"\u25b6 %{BKY_UNIT_PBHUB_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="pbhub_setBrightness" hidden="true">\n<field name="digitalWriteNum">2</field>\n<value name="val">\n  <shadow type="math_number">\n    <field name="NUM">100</field>\n  </shadow>\n</value>\n<next>\n  <block type="pbhub_setColor">\n    <field name="digitalWriteNum">2</field>\n    <field name="COLOR">#ff0000</field>\n    <value name="begin">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="count">\n      <shadow type="math_number">\n        <field name="NUM">3</field>\n      </shadow>\n    </value>\n  </block>\n</next>\n</block>'},{kind:"button",width:"489","web-class":"blockly-divider-nowidth"},{kind:"block",type:"pbhub_digital_read"},{kind:"block",blockxml:'<block type="pbhub_digital_write">\n        <value name="val">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="pbhub_analogRead">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="pbhub_setRgbNum">\n        <value name="val">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"pbhub_setColorPos"},{kind:"block",blockxml:'<block type="pbhub_setColor">\n        <value name="begin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="count">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="pbhub_setBrightness">\n        <value name="val">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitPahubToolbox",function(){return o});let o=[{kind:"button",text:"PA HUB","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"pahub"},{kind:"button",text:"\u25b6 %{BKY_UNIT_PAHUB_DEMO_OPEN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="iic_set" hidden="true">\n<field name="i2c">i2c0</field>\n<field name="PORT">PORTA</field>\n<field name="ADDRESS">0x70</field>\n<field name="FREQ">400000</field>\n<next>\n  <block type="pahub_select">\n    <field name="pos">0</field>\n    <field name="res">0</field>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text">\n            <field name="TEXT">Close</field>\n          </block>\n        </value>\n        <next>\n          <block type="pahub_port">\n            <field name="res">0x01</field>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text">\n                    <field name="TEXT">Open</field>\n                  </block>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"431","web-class":"blockly-divider-nowidth"},{kind:"block",type:"pahub_select"},{kind:"block",type:"pahub_only_on"},{kind:"block",type:"pahub_port"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitThermalToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_THERMAL}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"thermal"},{kind:"block",type:"unit_thermal_get_temperature"},{kind:"block",type:"unit_thermal_get_max_temperature"},{kind:"block",type:"unit_thermal_get_min_temperature"},{kind:"block",type:"unit_thermal_get_center_temperature"},{kind:"block",blockxml:'<block type="unit_thermal_get_pixel_temperature">\n      <value name="x">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="y">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"unit_thermal_update_temperature"},{kind:"block",type:"unit_thermal_get_refresh_rate"},{kind:"block",type:"unit_thermal_set_refresh_rate"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitAcsocketToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_ACSOCKET}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"ac_socket"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ACSOCKET_DEMO_SET_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_acsocket_set_value" hidden="true">\n<value name="VALUE">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"237","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="unit_acsocket_set_value">\n        <value name="VALUE">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitVToolbox",function(){return h});var o=n(94),l=n(95),i=n(96),a=n(97),s=n(98),r=n(99),c=n(100),u=n(101),_=n(102),d=n(103);let h=[{kind:"category",name:"%{BKY_UNIT_V_MOTION_DETECT}",colour:"%{BKY_UNIT_V_HUE}",contents:o.vMotionToolbox},{kind:"category",name:"%{BKY_UNIT_V_TARGET_TRACK}",colour:"%{BKY_RGB_HUE}",contents:l.vTagetToolbox},{kind:"category",name:"%{BKY_UNIT_V_COLOR_TRACK}",colour:"%{BKY_EMOJI_HUE}",contents:i.vColorToolbox},{kind:"category",name:"%{BKY_UNIT_V_FACE_DETECT}",colour:"%{BKY_UNIT_V_FACE_HUE}",contents:a.vFaceToolbox},{kind:"category",name:"%{BKY_UNIT_V_QR_CODE}",colour:"%{BKY_TEXTS_HUE}",contents:s.vQrToolbox},{kind:"category",name:"%{BKY_UNIT_V_APRILTAG}",colour:"%{BKY_DAC_HUE}",contents:r.vApriltagnToolbox},{kind:"category",name:"%{BKY_UNIT_V_BAR_CODE}",colour:"%{BKY_TIMER_HUE}",contents:c.vBarToolbox},{kind:"category",name:"%{BKY_UNIT_V_DATAMATRIX_CODE}",colour:"%{BKY_PINS_HUE}",contents:u.vDmToolbox},{kind:"category",name:"%{BKY_UNIT_V_LINE_TRACKER}",colour:"%{BKY_MAP_HUE}",contents:_.vLineToolbox},{kind:"category",name:"%{BKY_UNIT_V_TAG_READER}",colour:"%{BKY_ECHO_STT_HUE}",contents:d.vTagToolbox}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vMotionToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_MOTION_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_motion_detect_init" hidden="true">\n<next>\n  <block type="v_set_detect_threshold">\n    <value name="THRESHOLD">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="v_set_detect_mode">\n        <field name="VARNAME">0</field>\n        <next>\n          <block type="basic_on_loop">\n            <statement name="LOOP">\n              <block type="controls_ifelse">\n                <value name="IF0">\n                  <block type="logic_compare">\n                    <field name="OP">GTE</field>\n                    <value name="A">\n                      <block type="v_get_max_difference"></block>\n                    </value>\n                    <value name="B">\n                      <block type="math_number">\n                        <field name="NUM">50</field>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <statement name="DO0">\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text">\n                        <field name="TEXT">Moved</field>\n                      </block>\n                    </value>\n                  </block>\n                </statement>\n                <statement name="ELSE">\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text">\n                        <field name="TEXT">Not Move</field>\n                      </block>\n                    </value>\n                  </block>\n                </statement>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"388","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_motion_detect_init"},{kind:"block",blockxml:'<block type="v_set_detect_threshold">\n        <value name="THRESHOLD">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"v_set_detect_mode"},{kind:"block",type:"v_get_rate_difference"},{kind:"block",type:"v_get_max_difference"},{kind:"block",blockxml:'<block type="v_motion_set_scan_interval">\n        <value name="x">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"v_motion_get_track_box_number"},{kind:"block",blockxml:'<block type="v_motion_get_track_box_detail">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vTagetToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_TRACK_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_target_track_init" hidden="true">\n<next>\n  <block type="v_set_track_coordinate">\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">50</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">50</field>\n      </shadow>\n    </value>\n    <value name="width">\n      <shadow type="math_number">\n        <field name="NUM">30</field>\n      </shadow>\n    </value>\n    <value name="height">\n      <shadow type="math_number">\n        <field name="NUM">30</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="basic_on_loop">\n        <statement name="LOOP">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">X :</field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT"></field>\n                      </shadow>\n                      <block type="lists_getIndex">\n                        <mutation statement="false" at="true"></mutation>\n                        <field name="MODE">GET</field>\n                        <field name="WHERE">FROM_START</field>\n                        <value name="VALUE">\n                          <block type="v_get_target_track_box_detail"></block>\n                        </value>\n                        <value name="AT">\n                          <block type="math_number">\n                            <field name="NUM">1</field>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                    <value name="arg1">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Y :</field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="lists_getIndex">\n                            <mutation statement="false" at="true"></mutation>\n                            <field name="MODE">GET</field>\n                            <field name="WHERE">FROM_START</field>\n                            <value name="VALUE">\n                              <block type="v_get_target_track_box_detail"></block>\n                            </value>\n                            <value name="AT">\n                              <block type="math_number">\n                                <field name="NUM">3</field>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">1</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"1220","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_target_track_init"},{kind:"block",blockxml:'<block type="v_set_track_coordinate">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="width">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="height">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"v_get_target_track_box_detail"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vColorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_COLOR_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_color_track_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="variables_set">\n        <field name="VAR">box_detail</field>\n        <value name="VALUE">\n          <block type="v_color_get_track_box_detail">\n            <value name="number">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">Box number: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_color_get_track_box_number"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">Box1 pixels changed: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="lists_getIndex">\n                        <mutation statement="false" at="true"></mutation>\n                        <field name="MODE">GET</field>\n                        <field name="WHERE">FROM_START</field>\n                        <value name="VALUE">\n                          <block type="variables_get">\n                            <field name="VAR">box_detail</field>\n                          </block>\n                        </value>\n                        <value name="AT">\n                          <block type="math_number">\n                            <field name="NUM">1</field>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Box1 x: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="lists_getIndex">\n                            <mutation statement="false" at="true"></mutation>\n                            <field name="MODE">GET</field>\n                            <field name="WHERE">FROM_START</field>\n                            <value name="VALUE">\n                              <block type="variables_get">\n                                <field name="VAR">box_detail</field>\n                              </block>\n                            </value>\n                            <value name="AT">\n                              <block type="math_number">\n                                <field name="NUM">2</field>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="text_print">\n                        <value name="TEXT">\n                          <block type="text_add">\n                            <value name="arg0">\n                              <shadow type="text">\n                                <field name="TEXT">Box1 y: </field>\n                              </shadow>\n                            </value>\n                            <value name="arg1">\n                              <block type="lists_getIndex">\n                                <mutation statement="false" at="true"></mutation>\n                                <field name="MODE">GET</field>\n                                <field name="WHERE">FROM_START</field>\n                                <value name="VALUE">\n                                  <block type="variables_get">\n                                    <field name="VAR">box_detail</field>\n                                  </block>\n                                </value>\n                                <value name="AT">\n                                  <block type="math_number">\n                                    <field name="NUM">3</field>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text_add">\n                                <value name="arg0">\n                                  <shadow type="text">\n                                    <field name="TEXT">Box1 w: </field>\n                                  </shadow>\n                                </value>\n                                <value name="arg1">\n                                  <block type="lists_getIndex">\n                                    <mutation statement="false" at="true"></mutation>\n                                    <field name="MODE">GET</field>\n                                    <field name="WHERE">FROM_START</field>\n                                    <value name="VALUE">\n                                      <block type="variables_get">\n                                        <field name="VAR">box_detail</field>\n                                      </block>\n                                    </value>\n                                    <value name="AT">\n                                      <block type="math_number">\n                                        <field name="NUM">4</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text_add">\n                                    <value name="arg0">\n                                      <shadow type="text">\n                                        <field name="TEXT">Box1 h: </field>\n                                      </shadow>\n                                    </value>\n                                    <value name="arg1">\n                                      <block type="lists_getIndex">\n                                        <mutation statement="false" at="true"></mutation>\n                                        <field name="MODE">GET</field>\n                                        <field name="WHERE">FROM_START</field>\n                                        <value name="VALUE">\n                                          <block type="variables_get">\n                                            <field name="VAR">box_detail</field>\n                                          </block>\n                                        </value>\n                                        <value name="AT">\n                                          <block type="math_number">\n                                            <field name="NUM">5</field>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"711","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_color_track_init"},{kind:"block",blockxml:'<block type="v_set_track_color">\n        <value name="Lmin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Lmax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Amin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Amax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Bmin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Bmax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_color_set_scan_interval">\n        <value name="x">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_set_merge_threshold">\n        <value name="n">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_set_threshold">\n        <value name="width">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="height">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"v_color_get_track_box_number"},{kind:"block",blockxml:'<block type="v_color_get_track_box_detail">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vFaceToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_FACE_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_face_detect_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">FaceNumber: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_face_number"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="variables_set">\n            <field name="VAR">data_detail</field>\n            <value name="VALUE">\n              <block type="v_get_face_detail">\n                <value name="number">\n                  <shadow type="math_number">\n                    <field name="NUM">1</field>\n                  </shadow>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">Face1 value: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT"></field>\n                          </shadow>\n                          <block type="text_math_split">\n                            <value name="arg0">\n                              <block type="math_arithmetic">\n                                <field name="OP">MULTIPLY</field>\n                                <value name="A">\n                                  <block type="lists_getIndex">\n                                    <mutation statement="false" at="true"></mutation>\n                                    <field name="MODE">GET</field>\n                                    <field name="WHERE">FROM_START</field>\n                                    <value name="VALUE">\n                                      <block type="variables_get">\n                                        <field name="VAR">data_detail</field>\n                                      </block>\n                                    </value>\n                                    <value name="AT">\n                                      <block type="math_number">\n                                        <field name="NUM">1</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                                <value name="B">\n                                  <block type="math_number">\n                                    <field name="NUM">100</field>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="arg1">\n                              <shadow type="math_number">\n                                <field name="NUM">2</field>\n                              </shadow>\n                            </value>\n                          </block>\n                        </value>\n                        <value name="arg1">\n                          <block type="text">\n                            <field name="TEXT">%</field>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Face1 X: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="lists_getIndex">\n                            <mutation statement="false" at="true"></mutation>\n                            <field name="MODE">GET</field>\n                            <field name="WHERE">FROM_START</field>\n                            <value name="VALUE">\n                              <block type="variables_get">\n                                <field name="VAR">data_detail</field>\n                              </block>\n                            </value>\n                            <value name="AT">\n                              <block type="math_number">\n                                <field name="NUM">2</field>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="text_print">\n                        <value name="TEXT">\n                          <block type="text_add">\n                            <value name="arg0">\n                              <shadow type="text">\n                                <field name="TEXT">Face1 Y: </field>\n                              </shadow>\n                            </value>\n                            <value name="arg1">\n                              <block type="lists_getIndex">\n                                <mutation statement="false" at="true"></mutation>\n                                <field name="MODE">GET</field>\n                                <field name="WHERE">FROM_START</field>\n                                <value name="VALUE">\n                                  <block type="variables_get">\n                                    <field name="VAR">data_detail</field>\n                                  </block>\n                                </value>\n                                <value name="AT">\n                                  <block type="math_number">\n                                    <field name="NUM">3</field>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                          </block>\n                        </value>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text_add">\n                                <value name="arg0">\n                                  <shadow type="text">\n                                    <field name="TEXT">Face1 W: </field>\n                                  </shadow>\n                                </value>\n                                <value name="arg1">\n                                  <block type="lists_getIndex">\n                                    <mutation statement="false" at="true"></mutation>\n                                    <field name="MODE">GET</field>\n                                    <field name="WHERE">FROM_START</field>\n                                    <value name="VALUE">\n                                      <block type="variables_get">\n                                        <field name="VAR">data_detail</field>\n                                      </block>\n                                    </value>\n                                    <value name="AT">\n                                      <block type="math_number">\n                                        <field name="NUM">4</field>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                              </block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text_add">\n                                    <value name="arg0">\n                                      <shadow type="text">\n                                        <field name="TEXT">Face1 H: </field>\n                                      </shadow>\n                                    </value>\n                                    <value name="arg1">\n                                      <block type="lists_getIndex">\n                                        <mutation statement="false" at="true"></mutation>\n                                        <field name="MODE">GET</field>\n                                        <field name="WHERE">FROM_START</field>\n                                        <value name="VALUE">\n                                          <block type="variables_get">\n                                            <field name="VAR">data_detail</field>\n                                          </block>\n                                        </value>\n                                        <value name="AT">\n                                          <block type="math_number">\n                                            <field name="NUM">5</field>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"691","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_face_detect_init"},{kind:"block",type:"v_get_face_number"},{kind:"block",blockxml:'<block type="v_get_face_detail">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vQrToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_QR_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_qr_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">QRcode version: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_qr_version"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">Code text: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_get_qr_text"></block>\n                </value>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"513","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_qr_init"},{kind:"block",type:"v_get_qr_text"},{kind:"block",type:"v_get_qr_version"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vApriltagnToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_APRILTAG_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_apriltag_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">AprilTag location: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_apriltag_location"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">AprilTag rotation: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_get_apriltag_rotation"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">AprilTag translation: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="v_get_apriltag_Translation"></block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"965","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_apriltag_init"},{kind:"block",type:"v_get_apriltag_rotation"},{kind:"block",type:"v_get_apriltag_location"},{kind:"block",type:"v_get_apriltag_Translation"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vBarToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_BAR_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_bar_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Code text: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_bar_text"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">Code type: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_get_bar_rotation"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">Code rotation: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="v_get_bar_type"></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Code location: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="v_get_bar_location"></block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"507","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_bar_init"},{kind:"block",type:"v_get_bar_text"},{kind:"block",type:"v_get_bar_rotation"},{kind:"block",type:"v_get_bar_type"},{kind:"block",type:"v_get_bar_location"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vDmToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_DM_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_datamatrix_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">DM code rotation: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_datamatrix_rotation"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">DM code location: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_get_datamatrix_location"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">DM code text: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="v_get_datamatrix_text"></block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"702","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_datamatrix_init"},{kind:"block",type:"v_get_datamatrix_text"},{kind:"block",type:"v_get_datamatrix_rotation"},{kind:"block",type:"v_get_datamatrix_location"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vLineToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_LINE_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_line_tracker_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Line angle</field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_angle"></block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"701","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_line_tracker_init"},{kind:"block",type:"v_get_angle"},{kind:"block",blockxml:'<block type="v_set_line_color">\n        <value name="Lmin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Lmax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Amin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Amax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Bmin">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Bmax">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_set_line_area_weight">\n        <value name="weight0">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="weight1">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="weight2">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"vTagToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"v_function"},{kind:"button",text:"\u25b6 %{BKY_UNIT_V_TAG_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v_tag_reader_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Total number: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="v_get_total_number"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">Tag location: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="v_get_tag_location">\n                    <value name="number">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">Code: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="v_get_code">\n                        <value name="number">\n                          <shadow type="math_number">\n                            <field name="NUM">0</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Binstr: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="v_get_binstr">\n                            <value name="number">\n                              <shadow type="math_number">\n                                <field name="NUM">0</field>\n                              </shadow>\n                            </value>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"503","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v_tag_reader_init"},{kind:"block",type:"v_get_total_number"},{kind:"block",blockxml:'<block type="v_get_binstr">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_get_code">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="v_get_tag_location">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitImuToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_IMU}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"imu"},{kind:"block",type:"unit_imu_get_acc_x"},{kind:"block",type:"unit_imu_get_acc_y"},{kind:"block",type:"unit_imu_get_acc_z"},{kind:"block",type:"unit_imu_get_gyr_x"},{kind:"block",type:"unit_imu_get_gyr_y"},{kind:"block",type:"unit_imu_get_gyr_z"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitBpsToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_BPS}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"bps"},{kind:"button",text:"\u25b6 %{BKY_UNIT_BPS_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Pressure: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="bps_get_pressure"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Temperature: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="bps_get_temperature"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.8</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"501","web-class":"blockly-divider-nowidth"},{kind:"block",type:"bps_get_temperature"},{kind:"block",type:"bps_get_pressure"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitTvocToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_TVOC}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"tvoc"},{kind:"button",text:"\u25b6 %{BKY_UNIT_TVOC_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">IAP baseline: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="tvoc_get_iaq_baseline"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">TVOC now</field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="tvoc_get_tvoc"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">eCO2 now</field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="tvoc_get_eco2"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">H2 now</field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="tvoc_get_h2"></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">Ethanol now</field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="tvoc_get_ethanol"></block>\n                        </value>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">0.5</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"492","web-class":"blockly-divider-nowidth"},{kind:"block",type:"tvoc_get_iaq_baseline"},{kind:"block",type:"tvoc_get_tvoc"},{kind:"block",type:"tvoc_baseline_tvoc"},{kind:"block",type:"tvoc_get_eco2"},{kind:"block",type:"tvoc_get_baseline_eco2"},{kind:"block",type:"tvoc_get_h2"},{kind:"block",type:"tvoc_get_ethanol"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitVMeterToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_VMETER}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"vmeter"},{kind:"button",text:"\u25b6 %{BKY_UNIT_VMETER_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Voltage: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text" disabled="true">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="vmeter_voltage"></block>\n            </value>\n            <value name="arg1">\n              <block type="text">\n                <field name="TEXT"> mV</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.3</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"645","web-class":"blockly-divider-nowidth"},{kind:"block",type:"vmeter_set_mode"},{kind:"block",type:"vmeter_set_rate"},{kind:"block",type:"vmeter_set_gain"},{kind:"block",type:"vmeter_voltage"},{kind:"block",type:"vmeter_raw"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitAMeterToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_AMETER}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"ameter"},{kind:"button",text:"\u25b6 %{BKY_UNIT_AMETER_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Current: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text" disabled="true">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="ameter_current"></block>\n            </value>\n            <value name="arg1">\n              <block type="text">\n                <field name="TEXT"> mA</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.3</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"264","web-class":"blockly-divider-nowidth"},{kind:"block",type:"ameter_set_mode"},{kind:"block",type:"ameter_set_rate"},{kind:"block",type:"ameter_set_gain"},{kind:"block",type:"ameter_current"},{kind:"block",type:"ameter_raw"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitOPToolbox",function(){return o});let o=[{kind:"button",text:"OP.90","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"op90"},{kind:"button",text:"OP.180","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"op180"},{kind:"button",text:"\u25b6 %{BKY_UNIT_OP_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="op_value"></block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button","web-class":"blockly-divider--style"},{kind:"block",type:"op_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitHallToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_HALL}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"hall"},{kind:"button",text:"\u25b6 %{BKY_UNIT_HALL_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">HALL Status: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hall_value"></block>\n        </value>\n      </block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"474","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hall_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitFanToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_FAN}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unit_fan"},{kind:"button",text:"\u25b6 %{BKY_UNIT_FAN_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="fan_on">\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"277","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="fan_on">\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"fan_off"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitVibratorToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_VIBRATOR}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"vibrator"},{kind:"button",text:"\u25b6 %{BKY_UNIT_VIBRATOR_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="vibrator_on">\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"310","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="vibrator_on">\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"vibrator_off"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitLasertxToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_LASERTX}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"laser-tx"},{kind:"button",text:"\u25b6 %{BKY_UNIT_LASERTX_DEMO_CONTROL}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_if">\n    <mutation elseif="1"></mutation>\n    <value name="IF0">\n      <block type="button_state">\n        <field name="BUTTON">A</field>\n        <field name="EVENT">wasPressed</field>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="lasertx_on"></block>\n    </statement>\n    <value name="IF1">\n      <block type="button_state">\n        <field name="BUTTON">B</field>\n        <field name="EVENT">wasPressed</field>\n      </block>\n    </value>\n    <statement name="DO1">\n      <block type="lasertx_off"></block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"377","web-class":"blockly-divider-nowidth"},{kind:"block",type:"lasertx_on"},{kind:"block",type:"lasertx_off"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitLaserrxToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_LASERRX}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"laser-rx"},{kind:"button",text:"\u25b6 %{BKY_UNIT_LASERRX_DEMO_RETURN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="laserrx_get_value"></block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"278","web-class":"blockly-divider-nowidth"},{kind:"block",type:"laserrx_get_value"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitUltrasonicToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_ULTRASONIC}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"sonic"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ULTRA_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Distance: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text" disabled="true">\n                <field name="TEXT">Distance: </field>\n              </shadow>\n              <block type="Ultrasonic_distance"></block>\n            </value>\n            <value name="arg1">\n              <block type="text">\n                <field name="TEXT"> mm</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.3</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"644","web-class":"blockly-divider-nowidth"},{kind:"block",type:"Ultrasonic_distance"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitWateringToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_WATERING}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"watering"},{kind:"button",text:"\u25b6 %{BKY_UNIT_WATERING_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Water: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="watering_get_adc_value"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="controls_ifelse">\n        <value name="IF0">\n          <block type="logic_compare">\n            <field name="OP">LT</field>\n            <value name="A">\n              <block type="watering_get_adc_value"></block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">1000</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="watering_set_pump_status">\n            <value name="status">\n              <shadow type="math_slider">\n                <field name="NUM" max="1" step="1">1</field>\n              </shadow>\n            </value>\n          </block>\n        </statement>\n        <statement name="ELSE">\n          <block type="watering_set_pump_status">\n            <value name="status">\n              <shadow type="math_slider">\n                <field name="NUM" max="1" step="1">0</field>\n              </shadow>\n            </value>\n          </block>\n        </statement>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">0.3</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"501","web-class":"blockly-divider-nowidth"},{kind:"block",type:"watering_get_adc_value"},{kind:"block",blockxml:'<block type="watering_set_pump_status">\n    <value name="status">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"watering_set_pump_status_dropdown"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitRelay4Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_RELAY4}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"4relay"},{kind:"block",type:"relay4_get_mode"},{kind:"block",type:"relay4_set_mode"},{kind:"block",blockxml:'<block type="relay4_get_led_status">\n    <value name="num">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="4">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="relay4_set_led_status">\n    <value name="num">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="4">1</field>\n      </shadow>\n    </value>\n    <value name="state">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="relay4_get_status">\n    <value name="num">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="4">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="relay4_set_status">\n    <value name="state">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">1</field>\n      </shadow>\n    </value>\n    <value name="num">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="4">1</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitDDSToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_DDS}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"dds"},{kind:"button",text:"\u25b6 %{BKY_SINE_SIGNAL}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dds_set_mode" hidden="true">\n<field name="mode">SINE</field>\n<next>\n  <block type="dds_output">\n    <value name="freqnum">\n      <shadow type="math_number">\n        <field name="NUM">100</field>\n      </shadow>\n    </value>\n    <value name="phasenum">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_UNIT_DDS_DEMO_OUTPUT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="dds_quick_output" hidden="true">\n<field name="mode">SINE</field>\n<value name="freq">\n  <shadow type="math_number">\n    <field name="NUM">500</field>\n  </shadow>\n</value>\n<value name="phase">\n  <shadow type="math_number">\n    <field name="NUM">0</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"491","web-class":"blockly-divider-nowidth"},{kind:"block",type:"dds_set_mode"},{kind:"block",blockxml:'<block type="dds_quick_output">\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="phase">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="dds_output">\n    <value name="freqnum">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="phasenum">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"dds_reset"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitUhfrfidToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_UHF_RFID}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"uhf_rfid"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT_UHF-RFID"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}(Program2)","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT_UHF-RFID-2"},{kind:"button",text:"\u25b6 %{BKY_GET_CARD_EPC}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="variables_set">\n    <field name="VAR">rfid_card0</field>\n    <value name="VALUE">\n      <block type="uhf_rfid_single_polling"></block>\n    </value>\n    <next>\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="logic_compare">\n            <field name="OP">NEQ</field>\n            <value name="A">\n              <block type="text_length">\n                <value name="VALUE">\n                  <block type="variables_get">\n                    <field name="VAR">rfid_card0</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">0</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="lists_getIndex">\n                <mutation statement="false" at="true"></mutation>\n                <field name="MODE">GET</field>\n                <field name="WHERE">FROM_START</field>\n                <value name="VALUE">\n                  <block type="lists_getIndex">\n                    <mutation statement="false" at="true"></mutation>\n                    <field name="MODE">GET</field>\n                    <field name="WHERE">FROM_START</field>\n                    <value name="VALUE">\n                      <block type="variables_get">\n                        <field name="VAR">rfid_card0</field>\n                      </block>\n                    </value>\n                    <value name="AT">\n                      <block type="math_number">\n                        <field name="NUM">1</field>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <value name="AT">\n                  <block type="math_number">\n                    <field name="NUM">3</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="uhf_rfid_set_region" hidden="true">\n  <field name="region_code">REGIN_CN_800MHZ</field>\n  <next>\n    <block type="uhf_rfid_automatic_freq_hopping">\n      <field name="mode">0x00</field>\n      <next>\n        <block type="text_print">\n          <value name="TEXT">\n            <block type="uhf_rfid_get_region"></block>\n          </value>\n          <next>\n            <block type="text_print">\n              <value name="TEXT">\n                <block type="uhf_rfid_get_channel_freq"></block>\n              </value>\n              <next>\n                <block type="variables_set">\n                  <field name="VAR">epc_no</field>\n                    <value name="VALUE">\n                      <block type="math_number">\n                        <field name="NUM">0</field>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="controls_whileUntil">\n                        <field name="MODE">WHILE</field>\n                        <value name="BOOL">\n                          <block type="logic_negate">\n                            <value name="BOOL">\n                              <block type="variables_get"><field name="VAR">epc_no</field></block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO">\n                          <block type="variables_set">\n                            <field name="VAR">epc_no</field>\n                            <value name="VALUE">\n                              <block type="uhf_rfid_single_polling"></block>\n                            </value>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT"><block type="variables_get"><field name="VAR">epc_no</field></block></value>\n                            <next>\n                              <block type="controls_whileUntil">\n                                <field name="MODE">WHILE</field>\n                                <value name="BOOL">\n                                  <block type="logic_negate">\n                                    <value name="BOOL">\n                                      <block type="uhf_rfid_set_select_tag">\n                                        <value name="epc">\n                                          <shadow type="text"><field name="TEXT">EPC</field></shadow>\n                                          <block type="variables_get">\n                                            <field name="VAR">epc_no</field>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </value>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT"><block type="uhf_rfid_get_select_tag_param"></block></value>\n                                    <next>\n                                      <block type="variables_set">\n                                        <field name="VAR">epc_no</field>\n                                        <value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value>\n                                        <next>\n                                          <block type="controls_whileUntil">\n                                            <field name="MODE">WHILE</field>\n                                            <value name="BOOL">\n                                              <block type="logic_negate">\n                                                <value name="BOOL">\n                                                  <block type="variables_get"><field name="VAR">epc_no</field></block>\n                                                </value>\n                                              </block>\n                                            </value>\n                                            <statement name="DO">\n                                              <block type="variables_set">\n                                                <field name="VAR">epc_no</field>\n                                                <value name="VALUE">\n                                                  <block type="uhf_rfid_read_memory">\n                                                    <field name="bank">0x00</field>\n                                                    <value name="address">\n                                                      <shadow type="math_number"><field name="NUM">2</field></shadow>\n                                                    </value>\n                                                    <value name="length"><shadow type="math_number"><field name="NUM">2</field></shadow></value>\n                                                    <value name="password"><shadow type="text_password"><field name="TEXT">FFFF3333</field></shadow></value>\n                                                  </block>\n                                                </value>\n                                              </block>\n                                            </statement>\n                                            <next>\n                                              <block type="text_print">\n                                                <value name="TEXT">\n                                                  <block type="lists_getIndex">\n                                                    <mutation statement="false" at="true"></mutation>\n                                                    <field name="MODE">GET</field>\n                                                    <field name="WHERE">FROM_START</field>\n                                                    <value name="VALUE">\n                                                      <block type="variables_get"><field name="VAR">epc_no</field></block>\n                                                    </value>\n                                                    <value name="AT"><block type="math_number"><field name="NUM">1</field></block></value>\n                                                  </block>\n                                                </value>\n                                                <next>\n                                                  <block type="text_print">\n                                                    <value name="TEXT">\n                                                      <block type="lists_getIndex">\n                                                        <mutation statement="false" at="true"></mutation>\n                                                        <field name="MODE">GET</field>\n                                                        <field name="WHERE">FROM_START</field>\n                                                        <value name="VALUE">\n                                                          <block type="variables_get"><field name="VAR" id="U)UaWOcm[BFb4?yo17kn">epc_no</field></block>\n                                                        </value>\n                                                        <value name="AT"><block type="math_number"><field name="NUM">2</field></block></value>\n                                                      </block>\n                                                    </value>\n                                                    <next>\n                                                      <block type="variables_set">\n                                                        <field name="VAR">epc_no</field>\n                                                        <value name="VALUE">\n                                                          <block type="math_number"><field name="NUM">0</field></block>\n                                                        </value>\n                                                        <next>\n                                                          <block type="controls_whileUntil"><field name="MODE">WHILE</field>\n                                                            <value name="BOOL">\n                                                              <block type="logic_negate"><value name="BOOL"><block type="variables_get"><field name="VAR">epc_no</field></block></value></block>\n                                                            </value>\n                                                            <statement name="DO">\n                                                              <block type="variables_set"><field name="VAR">epc_no</field>\n                                                                <value name="VALUE">\n                                                                  <block type="uhf_rfid_lock_data_store">\n                                                                    <field name="kill_en">0</field>\n                                                                    <field name="kill">0</field>\n                                                                    <field name="access_en">1</field>\n                                                                    <field name="access">2</field>\n                                                                    <field name="epc_en">1</field>\n                                                                    <field name="epc">2</field>\n                                                                    <field name="tid_en">0</field>\n                                                                    <field name="tid">0</field>\n                                                                    <field name="user_en">0</field>\n                                                                    <field name="user">0</field>\n                                                                    <value name="password"><shadow type="text_password"><field name="TEXT">FFFF3333</field></shadow></value>\n                                                                  </block>\n                                                                </value>\n                                                              </block>\n                                                            </statement>\n                                                          <next>\n                                                            <block type="text_print"><value name="TEXT"><block type="text"><field name="TEXT">Lock Success</field></block></value></block>\n                                                          </next>\n                                                        </block>\n                                                      </next>\n                                                    </block>\n                                                  </next>\n                                                </block>\n                                              </next>\n                                            </block>\n                                          </next>\n                                        </block>\n                                      </next>\n                                    </block>\n                                  </next>\n                                </block>\n                              </next>\n                            </block>\n                          </next>\n                        </block>\n                      </next>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  </next>\n</block>'},{kind:"button",width:"798","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"uhf_rfid_get_device_info"},{kind:"block",type:"uhf_rfid_get_region"},{kind:"block",type:"uhf_rfid_get_channel_freq"},{kind:"block",type:"uhf_rfid_get_tx_power"},{kind:"block",type:"uhf_rfid_single_polling"},{kind:"block",blockxml:'<block type="uhf_rfid_multi_reading_count">\n    <value name="count">\n     <shadow type="math_number">\n       <field name="NUM">100</field>\n     </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="uhf_rfid_set_select_tag">\n    <value name="epc">\n    <shadow type="text">\n    <field name="TEXT">EPC</field>\n    </shadow>\n    </value>\n  </block>'},{kind:"block",type:"uhf_rfid_get_select_tag_param"},{kind:"block",blockxml:'<block type="uhf_rfid_read_memory">\n    <value name="address">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="length">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="password">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="uhf_rfid_write_memory">\n        <value name="data">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="address">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n        <value name="password">\n          <shadow type="text_password">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="uhf_rfid_lock_data_store">\n    <value name="password">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="uhf_rfid_write_custom_command">\n    <value name="cmd_list">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",type:"uhf_rfid_set_region"},{kind:"block",blockxml:'<block type="uhf_rfid_set_channel_freq">\n    <value name="ch_freq">\n      <shadow type="math_number">\n        <field name="NUM">920.375</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"uhf_rfid_automatic_freq_hopping"},{kind:"block",blockxml:'<block type="uhf_rfid_set_tx_power">\n    <value name="tx_power">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"uhf_rfid_set_select_mode"},{kind:"block",type:"uhf_rfid_multiple_polling_stop"},{kind:"block",type:"uhf_rfid_sleep"},{kind:"block",type:"uhf_rfid_wakeup"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitUnitcamToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_CAM}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unit_cam"},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_CLOUD_MODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">A</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="unit_cam_set_wifi">\n    <value name="ssid">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="pwd">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <next>\n      <block type="unit_cam_set_upload_time">\n        <value name="time">\n          <shadow type="math_slider">\n            <field name="NUM" min="5" max="65536" step="1">5</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="unit_cam_set_mode">\n            <field name="mode">CLOUD_MODE</field>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_SHOW_QRCODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">B</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="variables_set">\n    <field name="VAR">unitcam_token</field>\n    <value name="VALUE">\n      <block type="unit_cam_get_token"></block>\n    </value>\n    <next>\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="variables_get">\n            <field name="VAR">unitcam_token</field>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="lcd_qrcode">\n            <value name="text">\n              <shadow type="text">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="unit_cam_get_qrcodeurl"></block>\n            </value>\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">72</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">32</field>\n              </shadow>\n            </value>\n            <value name="width">\n              <shadow type="math_number">\n                <field name="NUM">176</field>\n              </shadow>\n            </value>\n            <value name="version">\n              <shadow type="math_slider">\n                <field name="NUM" min="1" max="10" step="1">6</field>\n              </shadow>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_UART_MODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">C</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="unit_cam_set_show">\n    <field name="mode">True</field>\n    <next>\n      <block type="unit_cam_set_size">\n        <field name="size">SIZE_320_240</field>\n        <next>\n          <block type="unit_cam_set_mode">\n            <field name="mode">UART_MODE</field>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"509","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Cloud mode","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_cam_set_wifi">\n    <value name="ssid">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="pwd">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_cam_set_upload_time">\n    <value name="time">\n      <shadow type="math_slider">\n        <field name="NUM" min="5" max="65536">5</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_cam_get_token"},{kind:"block",type:"unit_cam_get_qrcodeurl"},{kind:"button",text:"UART mode","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_cam_set_show"},{kind:"block",blockxml:'<block type="unit_cam_set_size">\n    <field name="size">SIZE_320_240</field>\n  </block>'},{kind:"block",blockxml:'<block type="unit_cam_set_position">\n    <value name="x">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Command","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_cam_set_mode"},{kind:"block",blockxml:'<block type="unit_cam_set_brightness">\n    <value name="brightness">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1024">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"v2FaceToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_face_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="variables_set">\n        <field name="VAR">count</field>\n        <value name="VALUE">\n          <block type="v2_face_get_number"></block>\n        </value>\n        <next>\n          <block type="controls_if">\n            <value name="IF0">\n              <block type="variables_get"><field name="VAR">count</field></block>\n            </value>\n            <statement name="DO0">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_face_get_detail">\n                    <value name="number">\n                      <shadow type="math_number">\n                        <field name="NUM">1</field>\n                      </shadow>\n                      <block type="variables_get"><field name="VAR">count</field></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="math_change">\n                    <field name="VAR">count</field>\n                    <value name="DELTA"><shadow type="math_number"><field name="NUM">-1</field></shadow></value>\n                  </block>\n                </next>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"420","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_face_init"},{kind:"block",type:"v2_face_get_number"},{kind:"block",blockxml:'<block type="v2_face_get_detail">\n        <value name="number">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"v2ObjectToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_object_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="variables_set" >\n        <field name="VAR" >count</field>\n        <value name="VALUE">\n          <block type="v2_object_get_number"></block>\n        </value>\n        <next>\n          <block type="controls_if" >\n            <value name="IF0">\n              <block type="variables_get"><field name="VAR" >count</field></block>\n            </value>\n            <statement name="DO0">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_object_get_detail">\n                    <value name="number">\n                      <shadow type="math_number">\n                        <field name="NUM">1</field>\n                      </shadow>\n                      <block type="variables_get"><field name="VAR" >count</field></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="math_change">\n                    <field name="VAR" >count</field>\n                    <value name="DELTA">\n                      <shadow type="math_number">\n                        <field name="NUM">-1</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"435","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_object_init"},{kind:"block",type:"v2_object_get_number"},{kind:"block",blockxml:'<block type="v2_object_get_detail">\n      <value name="number">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"v2CodeToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_code_init" hidden="true">\n<next>\n  <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="variables_set">\n        <field name="VAR">count</field>\n        <value name="VALUE">\n          <block type="v2_code_get_number"></block>\n        </value>\n        <next>\n          <block type="controls_if">\n            <value name="IF0"><block type="variables_get"><field name="VAR">count</field></block></value>\n            <statement name="DO0">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_code_get_detail">\n                    <value name="number">\n                      <shadow type="math_number"><field name="NUM">1</field></shadow>\n                      <block type="variables_get"><field name="VAR">count</field></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="math_change">\n                    <field name="VAR">count</field>\n                    <value name="DELTA">\n                      <shadow type="math_number"><field name="NUM">-1</field></shadow>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"425","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_code_init"},{kind:"block",type:"v2_code_get_number"},{kind:"block",blockxml:'<block type="v2_code_get_detail">\n      <value name="number">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitOledToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_UNIT_OLED}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"oled"},{kind:"block",type:"oled_show"},{kind:"block",type:"oled_fill"},{kind:"block",blockxml:'<block type="oled_fill_rect">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="W">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="H">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_rect">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="W">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="H">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_pixel">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_hline">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="W">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_vline">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="H">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_line">\n        <value name="X1">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y1">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="X2">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y2">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_text">\n        <value name="text">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_scroll">\n        <value name="xstep">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="ystep">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="oled_image">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"oled_invert"},{kind:"block",type:"oled_poweron"},{kind:"block",type:"oled_poweroff"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitNBIoTToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_NBIOT}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"nbiot_global"},{kind:"button",text:"\u25b6 %{BKY_NBIOT_DEMO_SET}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_nbiot_coap_connect" hidden="true">\n  <value name="ip">\n    <shadow type="text">\n      <field name="TEXT">120.77.157.90</field>\n    </shadow>\n  </value>\n  <value name="port">\n    <shadow type="math_number">\n      <field name="NUM">5683</field>\n    </shadow>\n  </value>\n  <next>\n    <block type="text_print">\n      <value name="TEXT">\n        <block type="unit_nbiot_coap_get">\n          <mutation isToken="false"></mutation>\n          <field name="tokenChoose">false</field>\n          <value name="url">\n            <shadow type="text">\n              <field name="TEXT">/m5stack-get</field>\n            </shadow>\n          </value>\n        </block>\n      </value>\n      <next>\n        <block type="text_print">\n          <value name="TEXT">\n            <block type="unit_nbiot_coap_post">\n              <mutation isToken="false"></mutation>\n              <field name="format">0</field>\n              <field name="tokenChoose">false</field>\n              <value name="url">\n                <shadow type="text">\n                  <field name="TEXT">/m5stack-post</field>\n                </shadow>\n              </value>\n              <value name="payload">\n                <shadow type="text">\n                  <field name="TEXT">post-test</field>\n                </shadow>\n              </value>\n            </block>\n          </value>\n          <next>\n            <block type="text_print">\n              <value name="TEXT">\n                <block type="unit_nbiot_coap_put">\n                  <mutation isToken="false"></mutation>\n                  <field name="format">0</field>\n                  <field name="tokenChoose">false</field>\n                  <value name="url">\n                    <shadow type="text">\n                      <field name="TEXT">/m5stack-put</field>\n                    </shadow>\n                  </value>\n                  <value name="payload">\n                    <shadow type="text">\n                      <field name="TEXT">put-test</field>\n                    </shadow>\n                  </value>\n                </block>\n              </value>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  </next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_UNIT_NBIOT_MQTT_DEMO_PUBLISH}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_nbiot_mqtt_connect" hidden="true">\n    <value name="server">\n      <shadow type="text">\n        <field name="TEXT">broker.emqx.io</field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM">1883</field>\n      </shadow>\n    </value>\n    <value name="client_id">\n      <shadow type="text">\n        <field name="TEXT">m5stack-nbiot</field>\n      </shadow>\n    </value>\n    <value name="username">\n      <shadow type="text">\n        <field name="TEXT">username</field>\n      </shadow>\n    </value>\n    <value name="passwd">\n      <shadow type="text_password">\n        <field name="TEXT">password</field>\n      </shadow>\n    </value>\n    <value name="keepalive">\n      <shadow type="math_number">\n        <field name="NUM">300</field>\n      </shadow>\n    </value>\n  <next>\n    <block type="controls_whileUntil">\n      <field name="MODE">WHILE</field>\n      <value name="BOOL">\n        <block type="logic_negate">\n          <value name="BOOL">\n            <block type="unit_nbiot_mqtt_sub">\n              <value name="topic">\n                <shadow type="text">\n                  <field name="TEXT">SubTopic</field>\n                </shadow>\n              </value>\n              <value name="qos">\n                <shadow type="math_number">\n                  <field name="NUM">0</field>\n                </shadow>\n              </value>\n            </block>\n          </value>\n        </block>\n      </value>\n      <statement name="DO">\n        <block type="text_print">\n          <value name="TEXT">\n            <block type="text">\n              <field name="TEXT">Subscribe Fail!</field>\n            </block>\n          </value>\n        </block>\n      </statement>\n      <next>\n        <block type="basic_on_loop">\n          <statement name="LOOP">\n            <block type="unit_nbiot_mqtt_poll">\n              <next>\n                <block type="unit_nbiot_mqtt_publish">\n                  <value name="topic">\n                    <shadow type="text">\n                      <field name="TEXT">PubTopic</field>\n                    </shadow>\n                  </value>\n                  <value name="payload">\n                    <shadow type="text">\n                      <field name="TEXT">Hello</field>\n                    </shadow>\n                  </value>\n                  <value name="qos">\n                    <shadow type="math_number">\n                      <field name="NUM">0</field>\n                    </shadow>\n                  </value>\n                  <next>\n                    <block type="timer_delay">\n                      <value name="DELAY">\n                        <shadow type="math_number">\n                          <field name="NUM">1</field>\n                        </shadow>\n                      </value>\n                    </block>\n                  </next>\n                </block>\n              </next>\n            </block>\n          </statement>\n        </block>\n      </next>\n    </block>\n  </next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_UNIT_NBIOT_MQTT_DEMO_SUBSCRIBE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_nbiot_mqtt_sub_cb" hidden="true">\n  <value name="topic">\n    <block type="variables_get">\n      <field name="VAR">nb_topic</field>\n    </block>\n  </value>\n  <value name="msg">\n    <block type="variables_get">\n      <field name="VAR">nb_msg</field>\n    </block>\n  </value>\n  <statement name="FUNC">\n    <block type="text_print">\n      <value name="TEXT">\n        <block type="variables_get">\n          <field name="VAR">nb_topic</field>\n        </block>\n      </value>\n      <next>\n        <block type="text_print">\n          <value name="TEXT">\n            <block type="variables_get">\n              <field name="VAR">nb_msg</field>\n            </block>\n          </value>\n        </block>\n      </next>\n    </block>\n  </statement>\n</block>'},{kind:"button",width:"1030","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_nbiot_power_down_module"},{kind:"block",type:"unit_nbiot_reset_module"},{kind:"block",type:"unit_nbiot_set_echo_mode"},{kind:"block",type:"unit_nbiot_check_status"},{kind:"block",type:"unit_nbiot_check_single_quality"},{kind:"block",type:"unit_nbiot_check_network_registration"},{kind:"block",type:"unit_nbiot_check_gprs_network_registration"},{kind:"block",type:"unit_nbiot_enable_pdp_context"},{kind:"button",text:"%{BKY_NBIOT_COAP_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_nbiot_coap_connect">\n        <value name="ip">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">5683</field>\n          </shadow>\n        </value>\n      </block > '},{kind:"block",blockxml:'<block type="unit_nbiot_coap_get">\n      <value name="url">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_nbiot_coap_post">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_nbiot_coap_put">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_nbiot_coap_destroy"},{kind:"button",text:"%{BKY_NBIOT_MQTT_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_connect">\n        <value name="server">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">1883</field>\n          </shadow>\n        </value>\n        <value name="client_id">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="username">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="passwd">\n          <shadow type="text_password">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="keepalive">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_nbiot_mqtt_disconnect"},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_sub">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_sub_cb">\n      <value name="topic">\n        <block type="variables_get">\n          <field name="VAR">nb_topic</field>\n        </block>\n      </value>\n      <value name="msg">\n        <block type="variables_get">\n          <field name="VAR">nb_msg</field>\n        </block>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_unsubscribe">\n      <value name="topic">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_publish">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_nbiot_mqtt_check_connection"},{kind:"block",blockxml:'<block type="unit_nbiot_mqtt_poll">\n    <value name="topic">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatEnvToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_ENV}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"env"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_ENV"},{kind:"button",text:"\u25b6 %{BKY_HAT_ENV_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Temperature: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_env_get_temperature"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Humidity: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_env_get_humidity"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">Pressure: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_env_pressure"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"558","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_env_pressure"},{kind:"block",type:"hat_env_get_temperature"},{kind:"block",type:"hat_env_get_humidity"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatPirToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_PIR}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"pir"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_PIR"},{kind:"button",text:"\u25b6 %{BKY_HAT_PIR_RETURN_STATUS}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="controls_ifelse">\n    <value name="IF0">\n      <block type="hat_pir_read"></block>\n    </value>\n    <statement name="DO0">\n      <block type="m5ledon">\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">ON</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n    <statement name="ELSE">\n      <block type="m5ledoff">\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">OFF</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"304","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_pir_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatSpkToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_SPK}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"spk"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_SPK"},{kind:"button",text:"\u25b6 %{BKY_HAT_SPK_OUTPUT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="hat_speaker_sing" hidden="true">\n<field name="TONE">131</field>\n<field name="BEAT">1</field>\n<next>\n  <block type="hat_speaker_sing">\n    <field name="TONE">448</field>\n    <field name="BEAT">1</field>\n  </block>\n</next>\n</block>'},{kind:"button",width:"438","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_speaker_tone">\n    <value name="FREQ">\n      <shadow type="math_number">\n        <field name="NUM">1800</field>\n      </shadow>\n    </value>\n    <value name="TIMEOUT">\n      <shadow type="math_number">\n        <field name="NUM">200</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_speaker_vol">\n    <value name="VOLUME">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_speaker_sing"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatNcirToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_NCIR}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"ncir"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_NCIR"},{kind:"button",text:"\u25b6 %{BKY_HAT_NCIR_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text" disabled="true">\n            <field name="TEXT"></field>\n          </shadow>\n          <block type="hat_ncir_read">\n            <field name="IR">hat_ncir0</field>\n          </block>\n        </value>\n        <value name="arg1">\n          <block type="text">\n            <field name="TEXT">\u2103</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="controls_ifelse">\n        <value name="IF0">\n          <block type="logic_compare">\n            <field name="OP">GT</field>\n            <value name="A">\n              <block type="hat_ncir_read">\n                <field name="IR">hat_ncir0</field>\n              </block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">32</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="m5ledon"></block>\n        </statement>\n        <statement name="ELSE">\n          <block type="m5ledoff"></block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"363","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_ncir_read"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatAdcToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_ADC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"adc"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_ADC"},{kind:"button",text:"\u25b6 %{BKY_HAT_ADC_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Voltage: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text" disabled="true">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="hat_adc_state">\n                <field name="ADC">hat_adc0</field>\n              </block>\n            </value>\n            <value name="arg1">\n              <block type="text">\n                <field name="TEXT">V</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"577","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_adc_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatDacToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_DAC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"dac"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"STICKC_DAC"},{kind:"button",text:"\u25b6 %{BKY_HAT_DAC_OUTPUT}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="hat_dac_state" hidden="true">\n<field name="DAC">hat_dac0</field>\n<field name="SAVE">True</field>\n<value name="FROM">\n  <shadow type="math_number">\n    <field name="NUM">1</field>\n  </shadow>\n</value>\n</block>'},{kind:"button",width:"419","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_dac_state">\n    <value name="FROM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_dac_writeData">\n    <value name="FROM">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatYunToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_YUN}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"yun"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"YUN"},{kind:"button",text:"\u25b6 %{BKY_HAT_YUN_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT"> Temperature: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="get_hat_yun_temperature"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT"> Humidity: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="get_hat_yun_humidity"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"> Pressure: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="get_hat_yun_pressure"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT"> Brightness: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="get_hat_yun_brightness"></block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="timer_delay">\n                    <value name="DELAY">\n                      <shadow type="math_number">\n                        <field name="NUM">1</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"526","web-class":"blockly-divider-nowidth"},{kind:"block",type:"get_hat_yun_temperature"},{kind:"block",type:"get_hat_yun_humidity"},{kind:"block",type:"get_hat_yun_pressure"},{kind:"block",type:"get_hat_yun_brightness"},{kind:"block",blockxml:'<block type="yun_hat_set_color">\n    <value name="INDEX">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"yun_hat_set_color_all"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatServoToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_SERVO}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"servo"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Servo"},{kind:"button",text:"\u25b6 %{BKY_HAT_SERVO_RUN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="servo_hat_write">\n    <value name="TIME">\n      <shadow type="math_number">\n        <field name="NUM">2500</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="servo_hat_angle">\n        <value name="ANGLE">\n          <shadow type="math_number">\n            <field name="NUM">180</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="servo_hat_write">\n                <value name="TIME">\n                  <shadow type="math_number">\n                    <field name="NUM">500</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="servo_hat_angle">\n                    <value name="ANGLE">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">1</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"298","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="servo_hat_angle">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="servo_hat_write">\n    <value name="TIME">\n      <shadow type="math_number">\n        <field name="NUM">600</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatServosToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_SERVOS}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"8servos"},{kind:"block",blockxml:'<block type="hat_servos_angle">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_servos_write">\n    <value name="TIME">\n      <shadow type="math_number">\n        <field name="NUM">600</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"servos_set_all"},{kind:"block",blockxml:'<block type="servos_set_all_rgb">\n    <value name="R">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatPuppyCToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_PUPPY}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"puppyc"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"puppyc"},{kind:"button",text:"\u25b6 %{BKY_HAT_PUPPYC_MOVE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="hat_puppy_all_angle">\n    <value name="zero">\n      <shadow type="math_number">\n        <field name="NUM">60</field>\n      </shadow>\n    </value>\n    <value name="one">\n      <shadow type="math_number">\n        <field name="NUM">60</field>\n      </shadow>\n    </value>\n    <value name="two">\n      <shadow type="math_number">\n        <field name="NUM">130</field>\n      </shadow>\n    </value>\n    <value name="three">\n      <shadow type="math_number">\n        <field name="NUM">120</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">0.5</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="hat_puppy_all_angle">\n            <value name="zero">\n              <shadow type="math_number">\n                <field name="NUM">120</field>\n              </shadow>\n            </value>\n            <value name="one">\n              <shadow type="math_number">\n                <field name="NUM">130</field>\n              </shadow>\n            </value>\n            <value name="two">\n              <shadow type="math_number">\n                <field name="NUM">60</field>\n              </shadow>\n            </value>\n            <value name="three">\n              <shadow type="math_number">\n                <field name="NUM">60</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"483","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_puppy_angle">\n    <value name="ANGLE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_puppy_all_angle">\n    <value name="zero">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="one">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="two">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="three">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatJoystickToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_JOYSTICK}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"joystick"},{kind:"button",text:"\u25b6 %{BKY_HAT_JOYSTICK_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">X: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_joystick_x">\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Y: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_joystick_y">\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">P: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_joystick_press">\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">RX: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="hat_joystick_reversal_x">\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">RY: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="hat_joystick_reversal_y">\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"411","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_joystick_x"},{kind:"block",type:"hat_joystick_y"},{kind:"block",type:"hat_joystick_press"},{kind:"block",type:"hat_joystick_reversal_x"},{kind:"block",type:"hat_joystick_reversal_y"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatBugcToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_BUGC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"bugc"},{kind:"button",text:"\u25b6 %{BKY_HAT_BUGC_SETUP}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="hat_bugc_set_all_pulse">\n    <value name="num1">\n      <shadow type="math_number">\n        <field name="NUM">-100</field>\n      </shadow>\n    </value>\n    <value name="num2">\n      <shadow type="math_number">\n        <field name="NUM">100</field>\n      </shadow>\n    </value>\n    <value name="num3">\n      <shadow type="math_number">\n        <field name="NUM">-100</field>\n      </shadow>\n    </value>\n    <value name="num4">\n      <shadow type="math_number">\n        <field name="NUM">100</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="hat_bugc_rgb_set_all_rgb">\n        <value name="R">\n          <shadow type="math_number">\n            <field name="NUM">4</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="hat_bugc_set_all_pulse">\n                <value name="num1">\n                  <shadow type="math_number">\n                    <field name="NUM">100</field>\n                  </shadow>\n                </value>\n                <value name="num2">\n                  <shadow type="math_number">\n                    <field name="NUM">-100</field>\n                  </shadow>\n                </value>\n                <value name="num3">\n                  <shadow type="math_number">\n                    <field name="NUM">100</field>\n                  </shadow>\n                </value>\n                <value name="num4">\n                  <shadow type="math_number">\n                    <field name="NUM">-100</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="hat_bugc_rgb_set_all_rgb">\n                    <value name="R">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                    </value>\n                    <value name="G">\n                      <shadow type="math_number">\n                        <field name="NUM">0</field>\n                      </shadow>\n                    </value>\n                    <value name="B">\n                      <shadow type="math_number">\n                        <field name="NUM">4</field>\n                      </shadow>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">1</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"393","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_bugc_set_pulse">\n    <value name="num">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_bugc_set_all_pulse">\n    <value name="num1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="num2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="num3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="num4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_bugc_rgb_set_all"},{kind:"block",blockxml:'<block type="hat_bugc_rgb_set_all2">\n    <value name="R">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_bugc_rgb_set_all_rgb">\n    <value name="R">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatFingerToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_FINGER}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"finger"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Finger"},{kind:"button",text:"\u25b6 %{BKY_HAT_FINGER_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="hat_finger_read" hidden="true">\n<statement name="FUNC">\n  <block type="controls_if">\n    <value name="IF0">\n      <block type="logic_operation">\n        <field name="OP">AND</field>\n        <value name="A">\n          <block type="logic_compare">\n            <field name="OP">EQ</field>\n            <value name="A">\n              <block type="hat_finger_get_access"></block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <value name="B">\n          <block type="logic_compare">\n            <field name="OP">EQ</field>\n            <value name="A">\n              <block type="hat_finger_get_id"></block>\n            </value>\n            <value name="B">\n              <block type="math_number">\n                <field name="NUM">1</field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <statement name="DO0">\n      <block type="screen_set_bgcolor">\n        <field name="COLOR">#33ff33</field>\n        <next>\n          <block type="timer_delay">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="screen_set_bgcolor">\n                <field name="COLOR">#000000</field>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"582","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_finger_get_state"},{kind:"block",type:"hat_finger_get_access"},{kind:"block",type:"hat_finger_get_id"},{kind:"block",type:"hat_finger_removeAll"},{kind:"block",blockxml:'<block type="hat_finger_remove_user">\n    <value name="ID">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_finger_add_user">\n    <value name="ID">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n    <value name="ACCESS">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_finger_read"},{kind:"block",type:"hat_finger_getUnknown"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatBeetleCToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_BEETLEC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"beetlec"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"BeetleC"},{kind:"button",text:"\u25b6 %{BKY_HAT_BEETLEC_SETUP}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="set_beetleC_wheel_speed">\n    <field name="direction">0</field>\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">70</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="set_beetleC_wheel_speed">\n        <field name="direction">1</field>\n        <value name="speed">\n          <shadow type="math_number">\n            <field name="NUM">70</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="beetleC_hat_set_color_all">\n            <field name="COLOR">#ff0000</field>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"349","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="set_beetleC_wheel_speed">\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="beetleC_hat_set_color">\n    <value name="INDEX">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"beetleC_hat_set_color_all"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatJoycToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_JOYC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"joyc"},{kind:"button",text:"\u25b6 %{BKY_HAT_JOYC_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">L_Xv: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_joyc_get_x">\n            <field name="SIDE">0</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">L_Yv: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_joyc_get_y">\n                <field name="SIDE">0</field>\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT">L_Angle: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_joyc_get_angle">\n                    <field name="SIDE">0</field>\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT">L_Distance: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="hat_joyc_get_distance">\n                        <field name="SIDE">0</field>\n                      </block>\n                    </value>\n                  </block>\n                </value>\n                <next>\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text_add">\n                        <value name="arg0">\n                          <shadow type="text">\n                            <field name="TEXT">L_PressState: </field>\n                          </shadow>\n                        </value>\n                        <value name="arg1">\n                          <block type="hat_joyc_get_press">\n                            <field name="SIDE">0</field>\n                          </block>\n                        </value>\n                      </block>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">0.5</field>\n                          </shadow>\n                        </value>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"539","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_joyc_set_led_color">\n    <value name="R">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_joyc_get_x"},{kind:"block",type:"hat_joyc_get_y"},{kind:"block",type:"hat_joyc_get_angle"},{kind:"block",type:"hat_joyc_get_distance"},{kind:"block",type:"hat_joyc_get_press"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatRovercToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_ROVERC}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"roverc"},{kind:"button",text:"\u25b6 %{BKY_HAT_ROVERC_RUN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="hat_roverc_set_all_pulse">\n    <value name="PULSE0">\n      <shadow type="math_number">\n        <field name="NUM">20</field>\n      </shadow>\n    </value>\n    <value name="PULSE1">\n      <shadow type="math_number">\n        <field name="NUM">20</field>\n      </shadow>\n    </value>\n    <value name="PULSE2">\n      <shadow type="math_number">\n        <field name="NUM">20</field>\n      </shadow>\n    </value>\n    <value name="PULSE3">\n      <shadow type="math_number">\n        <field name="NUM">20</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="hat_roverc_set_speed">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">-20</field>\n              </shadow>\n            </value>\n            <value name="Z">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">1</field>\n                  </shadow>\n                </value>\n                <next>\n                  <block type="hat_roverc_set_all_pulse">\n                    <value name="PULSE0">\n                      <shadow type="math_number">\n                        <field name="NUM">20</field>\n                      </shadow>\n                    </value>\n                    <value name="PULSE1">\n                      <shadow type="math_number">\n                        <field name="NUM">-20</field>\n                      </shadow>\n                    </value>\n                    <value name="PULSE2">\n                      <shadow type="math_number">\n                        <field name="NUM">-20</field>\n                      </shadow>\n                    </value>\n                    <value name="PULSE3">\n                      <shadow type="math_number">\n                        <field name="NUM">20</field>\n                      </shadow>\n                    </value>\n                    <next>\n                      <block type="timer_delay">\n                        <value name="DELAY">\n                          <shadow type="math_number">\n                            <field name="NUM">1</field>\n                          </shadow>\n                        </value>\n                        <next>\n                          <block type="hat_roverc_set_speed">\n                            <value name="X">\n                              <shadow type="math_number">\n                                <field name="NUM">-20</field>\n                              </shadow>\n                            </value>\n                            <value name="Y">\n                              <shadow type="math_number">\n                                <field name="NUM">0</field>\n                              </shadow>\n                            </value>\n                            <value name="Z">\n                              <shadow type="math_number">\n                                <field name="NUM">0</field>\n                              </shadow>\n                            </value>\n                            <next>\n                              <block type="timer_delay">\n                                <value name="DELAY">\n                                  <shadow type="math_number">\n                                    <field name="NUM">1</field>\n                                  </shadow>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"702","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_roverc_set_pulse">\n    <value name="PULSE">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_roverc_set_all_pulse">\n    <value name="PULSE0">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="PULSE1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="PULSE2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="PULSE3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_roverc_set_speed">\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="Z">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_roverc_set_servo_angle">\n    <value name="pos">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="angle">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="180">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_roverc_set_servo_pulse">\n    <value name="pos">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="pulse">\n      <shadow type="math_slider">\n        <field name="NUM" min="500" max="2500">500</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatTofToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_TOF}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"tof"},{kind:"button",text:"\u25b6 %{BKY_HAT_TOF_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Distance: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text" disabled="true">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="hat_tof_get_distance"></block>\n            </value>\n            <value name="arg1">\n              <block type="text">\n                <field name="TEXT"> mm </field>\n              </block>\n            </value>\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"572","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_tof_get_distance"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatThermalToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_THERMAL}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"thermal"},{kind:"button",text:"\u25b6 %{BKY_HAT_THERMAL_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="hat_thermal_update">\n    <field name="SHOW">True</field>\n    <field name="SHOWCENTER">True</field>\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">45</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">25</field>\n      </shadow>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Center Temp: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_thermal_get_center_temperature"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"> Max Temp: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_thermal_get_max_temperature"></block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text_add">\n                    <value name="arg0">\n                      <shadow type="text">\n                        <field name="TEXT"> Min Temp: </field>\n                      </shadow>\n                    </value>\n                    <value name="arg1">\n                      <block type="hat_thermal_get_min_temperature"></block>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"526","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="hat_thermal_get_temperature">\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_thermal_get_center_temperature"},{kind:"block",type:"hat_thermal_get_max_temperature"},{kind:"block",type:"hat_thermal_get_min_temperature"},{kind:"block",blockxml:'<block type="hat_thermal_set_max_visible_temperature">\n    <value name="TEMP">\n      <shadow type="math_number">\n        <field name="NUM">35</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_thermal_set_min_visible_temperature">\n    <value name="TEMP">\n      <shadow type="math_number">\n        <field name="NUM">24</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_thermal_update">\n    <value name="X">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="Y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatCardkbToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_CARDKB}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"cardkb"},{kind:"button",text:"\u25b6 %{BKY_HAT_CARDKB_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT">Key: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_cardkb_get_key"></block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">String: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_cardkb_get_string"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="timer_delay_ms">\n            <value name="DELAY">\n              <shadow type="math_number">\n                <field name="NUM">200</field>\n              </shadow>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"369","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_cardkb_get_key"},{kind:"block",type:"hat_cardkb_get_string"},{kind:"block",type:"hat_cardkb_get_pressed"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"HatEnv2Toolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_HAT_ENV2}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"envII"},{kind:"button",text:"\u25b6 %{BKY_HAT_EVN2_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT"> Baro: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_env2_pressure">\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT"> Temp: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_env2_get_temperature">\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"> Hum: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_env2_get_humidity">\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"458","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_env2_pressure"},{kind:"block",type:"hat_env2_get_temperature"},{kind:"block",type:"hat_env2_get_humidity"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AzureToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_AZURE}","web-class":"blockly-title--style",callbackKey:"iotDocs",url:"azure"},{kind:"button",text:"IoT Hub","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="azure_init_iothub">\n    <value name="connection">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"IoT Central","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="azure_init_central">\n    <value name="scope_id">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="device_id">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="device_key">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Command","web-class":"blockly-subclass--style"},{kind:"block",type:"azure_start"},{kind:"block",blockxml:'<block type="azure_sub">\n    <value name="msg">\n      <block type="variables_get">\n        <field name="VAR">c2dmsg</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="azure_publish">\n    <value name="MSG">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="azure_sub_direct">\n    <value name="payload">\n      <block type="variables_get">\n        <field name="VAR">methodmsg</field>\n      </block>\n    </value>\n    <value name="status">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="content">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="azure_sub_twin_desired">\n    <value name="msg">\n      <block type="variables_get">\n        <field name="VAR">twinmsg</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",type:"azure_update_property"},{kind:"block",type:"azure_retrieve_twin_property"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AwsToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_AWS}","web-class":"blockly-title--style",callbackKey:"iotDocs",url:"aws"},{kind:"block",blockxml:'<block type="aws_init">\n    <value name="things_name">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="host">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="keepalive">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"aws_start"},{kind:"block",blockxml:'<block type="aws_sub">\n    <value name="FROM">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="aws_publish">\n    <value name="FROM">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="MSG">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"aws_get_topic_data"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"TencentToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_TENCENT}","web-class":"blockly-title--style",callbackKey:"iotDocs",url:"tencent"},{kind:"block",blockxml:'<block type="tencent_init">\n    <value name="productid">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="devicename">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="sceret">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="keepalive">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"tencent_start"},{kind:"block",blockxml:'<block type="tencent_sub">\n    <value name="FROM">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"tencent_get_topic_data"},{kind:"block",blockxml:'<block type="tencent_publish">\n    <value name="FROM">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="MSG">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="tencent_sub_msg">\n    <value name="FROM">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"tencent_get_property_topic_data"},{kind:"block",type:"tencent_publish_property_msg"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"IotblynkToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_IOT_BLYNK}","web-class":"blockly-title--style",callbackKey:"iotDocs",url:"blynk"},{kind:"block",blockxml:'<block type="iot_blynk_init">\n    <value name="token">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_init_customer">\n    <value name="server">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="token">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="heartbeat">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"iot_blynk_disconnect"},{kind:"block",blockxml:'<block type="iot_blynk_email">\n    <value name="to">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="subject">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="body">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_tweet">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_notify">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_set_property">\n    <value name="v_pin">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="property_name">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="val">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_virtual_write">\n    <value name="v_pin">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="val">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="iot_blynk_virtual_sync">\n    <value name="v_pin">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"iot_blynk_event_write"},{kind:"block",type:"iot_blynk_event_read"},{kind:"block",type:"iot_blynk_run"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AliiotToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_ALI_IOT}","web-class":"blockly-title--style",callbackKey:"iotDocs",url:"aliyun"},{kind:"block",blockxml:'<block type="aliiot_init">\n    <value name="product_key">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="device_name">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="deviceSecret">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="device_id">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"aliiot_start"},{kind:"block",blockxml:'<block type="aliiot_sub_user">\n    <value name="msg">\n      <block type="variables_get">\n        <field name="VAR">user_msg</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="aliiot_publish_user">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="aliiot_sub_raw">\n    <value name="msg">\n      <block type="variables_get">\n        <field name="VAR">raw_msg</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="aliiot_publish_raw">\n    <value name="msg">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="aliiot_sub_shadow">\n    <value name="msg">\n      <block type="variables_get">\n        <field name="VAR">shadow_msg</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",type:"aliiot_publish_shadow"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"MycobotToolbox",function(){return o});let o=[{kind:"button",text:"MyCobot","web-class":"blockly-title--style",callbackKey:"thirdPartyLink",url:"mycobot"},{kind:"block",type:"mycobot_init"},{kind:"button",text:"Overall status","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobot_power_on"},{kind:"block",type:"mycobot_power_off"},{kind:"block",type:"mycobot_get_status"},{kind:"block",type:"mycobot_set_free_mode"},{kind:"block",type:"mycobot_release_all_servos"},{kind:"button",text:"MDI mode and operation","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobot_get_angles"},{kind:"block",blockxml:'<block type="mycobot_send_angle">\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="degree">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_send_all_angles_degree">\n    <value name="degree1">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree2">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree3">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree4">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree5">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree6">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_get_radians"},{kind:"block",blockxml:'<block type="mycobot_send_radians_copy">\n    <value name="radians1">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians2">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians3">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians4">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians5">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians6">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_get_coords"},{kind:"block",blockxml:'<block type="mycobot_send_coord">\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="coord">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_send_coords_list">\n    <value name="coord1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n    <value name="mode">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_is_in_position">\n    <value name="data1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_ismoving"},{kind:"button",text:"JOG mode and operation","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobot_jog_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="direction">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_jog_coord">\n    <value name="coord_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="direction">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_jog_stop"},{kind:"block",type:"mycobot_pause"},{kind:"block",type:"mycobot_resume"},{kind:"block",type:"mycobot_stop"},{kind:"block",type:"mycobot_ispause"},{kind:"button",text:"Running status and Settings","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobot_get_speed"},{kind:"block",blockxml:'<block type="mycobot_set_speed">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_joint_min_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_joint_max_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_encoder_value">\n    <value name="id">\n       <shadow type="math_slider">\n         <field name="NUM" min="1" max="6">1</field>\n       </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_encoder_value">\n    <value name="id">\n       <shadow type="math_slider">\n         <field name="NUM" min="1" max="6">1</field>\n       </shadow>\n    </value>\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">100</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_encoders">\n    <value name="data1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_get_encoders"},{kind:"button",text:"Servo control","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobot_is_servo_enable">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_is_allservo_enable"},{kind:"block",blockxml:'<block type="mycobot_release_servo">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_focus_servo">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_servo_data">\n    <value name="servo">\n       <shadow type="math_slider">\n         <field name="NUM" min="1" max="6">1</field>\n       </shadow>\n    </value>\n    <value name="data">\n      <shadow type="math_number">\n        <field name="NUM">0x20</field>\n      </shadow>\n    </value>\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_servo_data">\n    <value name="servo">\n       <shadow type="math_slider">\n         <field name="NUM" min="1" max="6">1</field>\n       </shadow>\n    </value>\n    <value name="data">\n      <shadow type="math_number">\n        <field name="NUM">0x21</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_servo_calibration">\n    <value name="servo">\n       <shadow type="math_slider">\n         <field name="NUM" min="1" max="6">1</field>\n       </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Atom IO","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobot_set_atom_color">\n    <value name="R">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_pin_mode">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_digital_output">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="pin_signal">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_digital_input">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_pwm_output">\n    <value name="channel">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n    <value name="freq">\n      <shadow type="math_number">\n        <field name="NUM">100</field>\n      </shadow>\n    </value>\n    <value name="value">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="256">100</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_get_gripper_value"},{kind:"block",blockxml:'<block type="mycobot_set_gripper_value">\n    <value name="value">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="4096">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_set_gripper_state">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_set_gripper_ini"},{kind:"block",type:"mycobot_is_gripper_moving"},{kind:"block",blockxml:'<block type="mycobot_sync_send_angles">\n    <value name="data1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_sync_send_coords">\n    <value name="data1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="data6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobot_check_atom_connect"},{kind:"block",type:"mycobot_get_tof_distance"},{kind:"button",text:"Basic IO","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobot_set_basic_output">\n    <value name="pin">\n      <shadow type="math_number">\n        <field name="NUM">3</field>\n      </shadow>\n    </value>\n    <value name="value">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">1</field>\n      </shadow>\n  </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobot_get_basic_input">\n    <value name="pin">\n      <shadow type="math_number">\n        <field name="NUM">3</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"MycobotProToolbox",function(){return o});let o=[{kind:"button",text:"MyCobotPro","web-class":"blockly-title--style",callbackKey:"thirdPartyLink",url:"mycobotpro"},{kind:"block",type:"mycobotpro_init"},{kind:"button",text:"Overall status","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobotpro_power_on"},{kind:"block",type:"mycobotpro_power_off"},{kind:"block",type:"mycobotpro_get_status"},{kind:"block",type:"mycobotpro_set_free_mode"},{kind:"button",text:"MDI mode and operation","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobotpro_get_angles"},{kind:"block",blockxml:'<block type="mycobotpro_send_angle">\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="degree">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_send_all_angles">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_send_all_angles_degree">\n    <value name="degree1">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree2">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree3">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree4">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree5">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="degree6">\n      <shadow type="math_slider">\n        <field name="NUM" min="-180" max="180">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_get_radians"},{kind:"block",blockxml:'<block type="mycobotpro_send_radians">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_send_radians_copy">\n    <value name="radians1">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians2">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians3">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians4">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians5">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="radians6">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_get_coords"},{kind:"block",blockxml:'<block type="mycobotpro_send_coord">\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="coord">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_send_coords">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_send_coords_list">\n    <value name="coord1">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord2">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord3">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord4">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord5">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="coord6">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n    <value name="mode">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_pause"},{kind:"block",type:"mycobotpro_resume"},{kind:"block",type:"mycobotpro_stop"},{kind:"block",type:"mycobotpro_ispause"},{kind:"block",blockxml:'<block type="mycobotpro_is_in_position">\n    <value name="id">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_ismoving"},{kind:"button",text:"JOG mode and operation","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobotpro_jog_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="direction">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_jog_coord">\n    <value name="coord_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="direction">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_jog_stop"},{kind:"button",text:"Running status and Settings","web-class":"blockly-subclass--style"},{kind:"block",type:"mycobotpro_get_speed"},{kind:"block",blockxml:'<block type="mycobotpro_set_speed">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_get_joint_min_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_get_joint_max_angle">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Servo control","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobotpro_is_servo_enable">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_is_allservo_enable"},{kind:"block",blockxml:'<block type="mycobotpro_release_servo">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_focus_servo">\n    <value name="servo_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Atom IO","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobotpro_set_atom_color">\n    <value name="R">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n    <value name="G">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n    <value name="B">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_pin_mode">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_digital_output">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="pin_signal">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_get_digital_input">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_pwm_mode">\n    <value name="pin_no">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="channel">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_pwm_output">\n    <value name="channel">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="pin_val">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_get_gripper_value"},{kind:"block",blockxml:'<block type="mycobotpro_set_gripper_value">\n    <value name="value">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="4096">0</field>\n      </shadow>\n    </value>\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_gripper_state">\n    <value name="speed">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="100">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_set_gripper_ini"},{kind:"block",type:"mycobotpro_is_gripper_moving"},{kind:"button",text:"Collision check","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="mycobotpro_get_joint_current">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="mycobotpro_set_joint_current">\n    <value name="joint_id">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="6">1</field>\n      </shadow>\n    </value>\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"mycobotpro_set_current_state"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"TelloToolbox",function(){return o});let o=[{kind:"button",text:"Tello","web-class":"blockly-title--style nounderline"},{kind:"button",text:"Author: gperrella","web-class":"blockly-author--style",callbackKey:"thirdPartyLink",url:"tello"},{kind:"block",type:"__Tello_initDrone"},{kind:"block",type:"__Tello_connectDrone"},{kind:"block",type:"__Tello_takeoffDrone"},{kind:"block",type:"__Tello_landDrone"},{kind:"block",blockxml:'<block type="__Tello_rotateCW">\n    <value name="degree">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_rotateCCW">\n    <value name="degree">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"__Tello_flipRight"},{kind:"block",type:"__Tello_flipLeft"},{kind:"block",blockxml:'<block type="__Tello_moveUp">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_moveDown">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_moveForward">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_moveBackward">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_moveLeft">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="__Tello_moveRight">\n    <value name="cm">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){"use strict";n.r(e),n.d(e,"AudioToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_MIC_RECORD}","web-class":"blockly-subclass--style"},{kind:"block",type:"micrecord_second"},{kind:"block",blockxml:'<block type="micrecord_server">\n    <value name="second">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="token">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="micrecord_file">\n    <value name="second">\n      <shadow type="math_number">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n    <value name="filename">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"%{BKY_AUDIO_PLAY}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="audio_init">\n    <value name="token">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"audio_set_play"},{kind:"block",type:"audio_get_state"},{kind:"block",type:"audio_deinit"}]},function(t,e,n){"use strict";n.r(e),n.d(e,"UnitV2Toolbox",function(){return a});var o=n(121),l=n(122),i=n(123);let a=[{kind:"category",name:"%{BKY_UNIT_V2_FACE_DETECTOR}",colour:"%{BKY_TEXTS_HUE}",contents:o.v2FaceToolbox},{kind:"category",name:"%{BKY_UNIT_V2_OBJECT_RECOGNITION}",colour:"%{BKY_MOTOR_HUE}",contents:l.v2ObjectToolbox},{kind:"category",name:"%{BKY_UNIT_V2_CODE_DETECTOR}",colour:"%{BKY_DAC_HUE}",contents:i.v2CodeToolbox},{kind:"category",name:"%{BKY_UNIT_V2_COLOR_TRACKER}",colour:"%{BKY_V2_COLOR_HUE}",contents:[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_color_init" hidden="true">\n<next>\n  <block type="v2_color_config_lab_threshold">\n    <value name="l_min"><shadow type="math_number"><field name="NUM">23</field></shadow></value>\n    <value name="l_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <value name="a_min"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n    <value name="a_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <value name="b_min"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n    <value name="b_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <next>\n      <block type="v2_color_config_roi">\n        <value name="x"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n        <value name="y"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n        <value name="w"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n        <value name="h"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n        <next>\n          <block type="basic_on_loop">\n            <statement name="LOOP">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_color_get_detail"></block>\n                </value>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"848","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_color_init"},{kind:"block",blockxml:'<block type="v2_color_config_lab_threshold">\n      <value name="l_min">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="l_max">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="a_min">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="a_max">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="b_min">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="b_max">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="v2_color_config_roi">\n      <value name="x">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="y">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="w">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="h">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"v2_color_get_detail"}]},{kind:"category",name:"%{BKY_UNIT_V2_LANE_LINE_TRACKER}",colour:"%{BKY_V2_LANE_LINE_HUE}",contents:[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_lane_line_init" hidden="true">\n<next>\n  <block type="v2_lane_line_config_lab_threshold">\n    <value name="l_min"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n    <value name="l_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <value name="a_min"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n    <value name="a_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <value name="b_min"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n    <value name="b_max"><shadow type="math_number"><field name="NUM">200</field></shadow></value>\n    <next>\n      <block type="v2_lane_line_config_roi">\n        <value name="x"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n        <value name="y"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n        <value name="w"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n        <value name="h"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n        <next>\n          <block type="basic_on_loop">\n            <statement name="LOOP">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_lane_line_get_detail"></block>\n                </value>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"840","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_lane_line_init"},{kind:"block",blockxml:'<block type="v2_lane_line_config_lab_threshold">\n    <value name="l_min">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="l_max">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="a_min">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="a_max">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="b_min">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="b_max">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="v2_lane_line_config_roi">\n    <value name="x">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="w">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="h">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"v2_lane_line_get_detail"}]},{kind:"category",name:"%{BKY_UNIT_V2_TARGET_TRACKER}",colour:"%{BKY_V2_TARGET_HUE}",contents:[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_target_init" hidden="true">\n<next>\n  <block type="v2_target_config_roi">\n    <value name="x"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n    <value name="y"><shadow type="math_number"><field name="NUM">20</field></shadow></value>\n    <value name="w"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n    <value name="h"><shadow type="math_number"><field name="NUM">50</field></shadow></value>\n    <next>\n      <block type="basic_on_loop">\n        <statement name="LOOP">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="v2_target_get_detail"></block>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"403","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_target_init"},{kind:"block",blockxml:'<block type="v2_target_config_roi">\n    <value name="x">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="w">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="h">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"v2_target_get_detail"}]},{kind:"category",name:"%{BKY_UNIT_V2_MOTION_TRACKER}",colour:"%{BKY_V2_MOTION_HUE}",contents:[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_motion_init" hidden="true">\n<next>\n  <block type="timer_delay">\n    <value name="DELAY"><shadow type="math_number"><field name="NUM">1</field></shadow></value>\n    <next>\n      <block type="v2_motion_set_bg">\n        <next>\n          <block type="basic_on_loop">\n            <statement name="LOOP">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_motion_get_detail">\n                    <value name="number">\n                      <shadow type="math_number"><field name="NUM">1</field></shadow>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"354","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_motion_init"},{kind:"block",type:"v2_motion_set_bg"},{kind:"block",blockxml:'<block type="v2_motion_get_detail">\n      <value name="number">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>'}]},{kind:"category",name:"%{BKY_UNIT_V2_SHAPE_DETECTOR}",colour:"%{BKY_V2_SHAPE_HUE}",contents:[{kind:"button",text:"%{BKY_UNIT_V2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"unitv2"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="v2_shape_init" hidden="true">\n<next>\n  <block type="timer_delay">\n    <value name="DELAY"><shadow type="math_number"><field name="NUM">1</field></shadow></value>\n    <next>\n      <block type="v2_shape_set_bg">\n        <next>\n          <block type="basic_on_loop">\n            <statement name="LOOP">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="v2_shape_get_detail">\n                    <value name="number">\n                      <shadow type="math_number"><field name="NUM">1</field></shadow>\n                    </value>\n                  </block>\n                </value>\n              </block>\n            </statement>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"354","web-class":"blockly-divider-nowidth"},{kind:"block",type:"v2_shape_init"},{kind:"block",type:"v2_shape_set_bg"},{kind:"block",blockxml:'<block type="v2_shape_get_detail">\n      <value name="number">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>'}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"GpsToolbox",function(){return o});let o=[{kind:"button",text:"%{BKY_GPS}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"gps"},{kind:"button",text:"\u25b6 %{BKY_GPS_DEMO_READ}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="gps_set_custom"  hidden="true">\n  <value name="TX"><shadow type="math_number"><field name="NUM">17</field></shadow></value>\n  <value name="RX"><shadow type="math_number"><field name="NUM">16</field></shadow></value>\n  <next>\n    <block type="basic_on_loop">\n    <statement name="LOOP">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT">Latitude: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="gps_get_latitude"></block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"> Longitude: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="gps_get_longitude"></block>\n                </value>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </statement>\n  </block>\n</next>\n</block>'},{kind:"button",width:"430","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="gps_set_custom">\n    <value name="TX">\n      <shadow type="math_number">\n        <field name="NUM">17</field>\n      </shadow>\n    </value>\n    <value name="RX">\n      <shadow type="math_number">\n        <field name="NUM">16</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"gps_get_state"},{kind:"block",type:"gps_get_latitude"},{kind:"block",type:"gps_get_longitude"},{kind:"block",type:"gps_get_satellite_num"},{kind:"block",type:"gps_get_positioning_quality"},{kind:"block",type:"gps_get_speed"},{kind:"block",type:"gps_get_course"},{kind:"block",blockxml:'<block type="gps_set_time_zone">\n    <value name="ZONE">\n      <shadow type="math_slider">\n        <field name="NUM" min="-12" max="12">8</field>\n      </shadow>\n    </value>\n  </block>'}]},function(t,e,n){n(158),n(0),n(159),n(3),n(4),n(5),n(6),n(7),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(28),n(20),n(19),n(21),n(22),n(23),n(24),n(29),n(25),n(26),n(27),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(394),n(31),n(30),n(32),n(33),n(214),n(215),n(216),n(217),n(218),n(219),n(1),n(220),n(221),n(222),n(396),n(34),n(35),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(156),n(50),n(36),n(37),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(51),n(52),n(53),n(54),n(55),n(2),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(393),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(155),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(121),n(122),n(123),n(124),n(125),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(395),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(148),n(147),n(146),n(149),n(150),n(378),n(379),n(380),n(381),n(382),n(383),n(151),n(152),n(153),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(397),n(154),t.exports=n(392)},function(t,e){Blockly.M5Component=[],Blockly.Declare=[],Blockly.modules=[],Blockly.ButtonEvents=[],Blockly.Remotes=[],Blockly.RemotePlus=[],Blockly.TempRemotePlus=[],Blockly.Units=[],Blockly.Hats=[],Blockly.ResImages=[],Blockly.ResKeys=[],Blockly.ResWavs=[],Blockly.cbIdList_=[],Blockly.eventCBIdList_=[],Blockly.logicWhenNum=0,Blockly.isOpenM5Fing=!1,Blockly.uploadFile_,Blockly.messagebox_,Blockly.getDeviceInfo_,Blockly.getTranslate_,Blockly.addRemotePlus_,Blockly.getRemotePlusByBlockId_,Blockly.mqttSub=[],Blockly.awsSub=[],Blockly.tencentSub=[],Blockly.azureSub=[],Blockly.modbusMasterCb=[],Blockly.modbusSlaveCb=[],Blockly.echoSttCb=[],Blockly.bleUartCb=[],Blockly.blynkCb=[],Blockly.iotBlynkCb=[],Blockly.aliSub=[],Blockly.paperColors=[],Blockly.M5Toolbox=[],Blockly.Msg.MATH_HUE="#30A9DE",Blockly.Msg.TEXTS_HUE="#F17F42",Blockly.Msg.LOOPS_HUE="#58C9B9",Blockly.Msg.LOGIC_HUE="#22559C",Blockly.Msg.VARIABLES_HUE="#791E94",Blockly.Msg.LISTS_HUE="#2EC4B6",Blockly.Msg.LCD_HUE="#FFBC42",Blockly.Msg.BUTTON_HUE="#D81159",Blockly.Msg.SPEAKER_HUE="#4F86C6",Blockly.Msg.TIMER_HUE="#EE2560",Blockly.Msg.SDCARD_HUE="#75D701",Blockly.Msg.GPIO_HUE="#EF5285",Blockly.Msg.PWM_HUE="#F100E5",Blockly.Msg.ADC_HUE="#5C196B",Blockly.Msg.DAC_HUE="#0080FF",Blockly.Msg.UART_HUE="#3AC569",Blockly.Msg.FUNCTION_HUE="#995BA5",Blockly.Msg.COMPONENT_HUE="#75D701",Blockly.Msg.COMPONENT_LABEL_HUE="#EC6A5C",Blockly.Msg.COMPONENT_TITLE_HUE="#EE7785",Blockly.Msg.COMPONENT_RECT_HUE="#D1B6E1",Blockly.Msg.COMPONENT_CIRCLE_HUE="#4FB0C6",Blockly.Msg.COMPONENT_IMAGE_HUE="#AAABD3",Blockly.Msg.COMPONENT_TRIANGLE_HUE="#EE2560",Blockly.Msg.COMPONENT_LINE_HUE="#FFBC42",Blockly.Msg.COMPONENT_SCREEN_HUE="#009900",Blockly.Msg.M5STAND_HUE="#8CD790",Blockly.Msg.MOTOR_HUE="#75D701",Blockly.Msg.SERVO_HUE="#005874",Blockly.Msg.NXT_MOTOR_HUE="#80D4F6",Blockly.Msg.RGB_HUE="#68bcfe",Blockly.Msg.DHT_HUE="#fe4365",Blockly.Msg.PINS_HUE="#3ac569",Blockly.Msg.ADVANCED_HUE="#ff5f2e",Blockly.Msg.BASIC_HUE="#fdc23e",Blockly.Msg.REMOTE_HUE="#00b9f1",Blockly.Msg.REMOTE_PLUS_HUE="#0080FF",Blockly.Msg.EMOJI_HUE="#EE7785",Blockly.Msg.IIC_HUE="#EF5285",Blockly.Msg.TRACK_HUE="185",Blockly.Msg.LEGO_MOTOR_HUE="#445533",Blockly.Msg.BASEX_HUE="#492540",Blockly.Msg.PLUS_HUE="#D499B9",Blockly.Msg.GO_PLUS_HUE="#30A9DE",Blockly.Msg.GPS_HUE="#4F86C6",Blockly.Msg.AZURE_HUE="#0078D4",Blockly.Msg.AWS_HUE="#F8991D",Blockly.Msg.TENCENT_HUE="#00A3FF",Blockly.Msg.CUSTOM_HUE="#00A0C8",Blockly.Msg.GESTURE_HUE="#2b90d9",Blockly.Msg.UNIT_MQTT_HUE="#58C9B9",Blockly.Msg.UNIT_RTC_HUE="#EF5285",Blockly.Msg.UNIT_LCD_HUE="#F17F42",Blockly.Msg.UNIT_ROTARY_HUE="#68bcfe",Blockly.Msg.UNIT_ID_HUE="#EE7785",Blockly.Msg.UNIT_JOYSTICKLED_HUE="#ff5f2e",Blockly.Msg.UNIT_DLIGHT_HUE="#D499B9",Blockly.Msg.UNIT_PDM_HUE="#EF5285",Blockly.Msg.UNIT_ACCEL_HUE="#EF5285",Blockly.Msg.UNIT_SSR_HUE="#D499B9",Blockly.Msg.UNIT_RELAY2_HUE="#66cc00",Blockly.Msg.HAT_HUE="#0066FF",Blockly.Msg.HAT_SPEAKER_HUE="#4F86C6",Blockly.Msg.HAT_PIR_SERVO_HUE="#005874",Blockly.Msg.HAT_ENV_HUE="#fe4365",Blockly.Msg.HAT_NCIR_HUE="#66cc00",Blockly.Msg.HAT_ADC_HUE="#47b8e0",Blockly.Msg.HAT_DAC_HUE="#f9c00c",Blockly.Msg.HAT_YUN_HUE="#30A9DE",Blockly.Msg.HAT_SERVO_HUE="#AACD6E",Blockly.Msg.HAT_SERVOS_HUE="#DE6449",Blockly.Msg.HAT_PUPPY_HUE="#D499B9",Blockly.Msg.HAT_JOYSTICK_HUE="#58C9B9",Blockly.Msg.HAT_BUGC_HUE="#9DC8C8",Blockly.Msg.HAT_FINGER_HUE="#D1B6E1",Blockly.Msg.HAT_BEETLEC_HUE="#D09E88",Blockly.Msg.HAT_JOYC_HUE="#2b90d9",Blockly.Msg.HAT_ROVERC_HUE="#ff5f2e",Blockly.Msg.HAT_TOF_HUE="#fe4365",Blockly.Msg.HAT_THERMAL_HUE="#9A32CD",Blockly.Msg.HAT_CARDKB_HUE="#FF34B3",Blockly.Msg.HARDWARE_LED="#EE7785",Blockly.Msg.HARDWARE_AXP="#D56F2B",Blockly.Msg.HARDWARE_AXP_HUE="#D56F2B",Blockly.Msg.HARDWARE_RTC="#FFCC00",Blockly.Msg.HARDWARE_IMU_TOW="#FF9966",Blockly.Msg.SD_HUE="#DD9222",Blockly.Msg.THERMAL_HUE="#9A32CD",Blockly.Msg.PBHUB_HUE="#B23AEE",Blockly.Msg.PAHUB_HUE="#AB82FF",Blockly.Msg.FACES_HUE="#AB82FF",Blockly.Msg.FACES_CALCULATOR_HUE="#9A32CD",Blockly.Msg.FACES_ENCODE_HUE="#C71585",Blockly.Msg.FACES_FINGER_HUE="#CD9B1D",Blockly.Msg.FACES_GAMEBOY_HUE="#00cc33",Blockly.Msg.FACES_JOYSTICK_HUE="#33ccff",Blockly.Msg.FACES_KEYBOARD_HUE="#EE0000",Blockly.Msg.FACES_RFID_HUE="#FF34B3",Blockly.Msg.PW2_5_HUE="#6B8E23",Blockly.Msg.MAP_HUE="#E61AE6",Blockly.Msg.JSON_HUE="#44BB44",Blockly.Msg.CELLULAR_HUE="#AB82FF",Blockly.Msg.POWER_HUE="#F08080",Blockly.Msg.MODBUS_MASTER_HUE="#66CC00",Blockly.Msg.MODBUS_SLAVE_HUE="#AACD6E",Blockly.Msg.DTUNB_HUE="#2EC4B6",Blockly.Msg.EEPROM_HUE="#2b90d9",Blockly.Msg.BLYNK_HUE="#30A9DE",Blockly.Msg.BLE_UART_HUE="#D09E88",Blockly.Msg.ECHO_STT_HUE="#FF7766",Blockly.Msg.UNIT_ACSOCKET_HUE="#EF5285",Blockly.Msg.UNIT_V_HUE="#FFBC42",Blockly.Msg.UNIT_V_FACE_HUE="#58C9B9",Blockly.Msg.UNIT_IMU_HUE="#2EC4B6",Blockly.Msg.UNIT_BPS_HUE="#22559C",Blockly.Msg.IOT_BLYNK_HUE="#26d69b",Blockly.Msg.ALI_IOT_HUE="#ff791a",Blockly.Msg.SYSTEM_HUE="#22559C",Blockly.Msg.V2_COLOR_HUE="#EE2560",Blockly.Msg.V2_TARGET_HUE="#FFBC42",Blockly.Msg.V2_LANE_LINE_HUE="#3ac569",Blockly.Msg.V2_MOTION_HUE="#2b90d9",Blockly.Msg.V2_ONLINE_HUE="#30A9DE",Blockly.Msg.V2_SHAPE_HUE="#AB82FF",Blockly.Msg.V2_FACE_RE_HUE="#44BB44",Blockly.Msg.EZDATA_HUE="#F17F42",Blockly.Msg.LORA433_HUE="#FFBC42",Blockly.Msg.LORA868_HUE="#58C9B9",Blockly.Msg.UNIT_ENCODER_HUE="#AB82FF",Blockly.Msg.FADER8_HUE="#FFBC42",Blockly.Msg.LORABUS_HUE="#F17F42",Blockly.Msg.HAT_CBACK_HUE="#44affd",Blockly.Msg.MQTT_PRINTER_HUE="#2EC4B6",Blockly.Msg.IOTBASE_HUE="#30A9DE",Blockly.Msg.IOTBASE_CATM_HUE="#0080FF",Blockly.Msg.MIC_HUE="#44BB44",Blockly.Msg.CAT1_HUE="#50bde9",Blockly.Msg.DTU_CAT1_HUE="#FFBC42",Blockly.Msg.UNIT_POESP32_HUE="#AB82FF",Blockly.Msg.UNIT_KMETER_HUE="#44BB44",Blockly.Msg.UNIT_SONIC_IO_HUE="#EE2560",Blockly.Msg.UNIT_ANGLE8_HUE="#2EC4B6",Blockly.Msg.LAN_BASE_HUE="#FF7766",Blockly.Msg.SWAL_PRIMARY_HUE="#00a2e9",Blockly.Msg.SWAL_DANGER_HUE="#e64942",Blockly.Msg.SWAL_GRAY_HUE="#c5c5c5",Blockly.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=Blockly.getMainWorkspace());var e=[];this.init(t);for(var n,o=t.getTopBlocks(),l=0;n=o[l];l++){var i=this.blockToCode(n);Array.isArray(i)&&(i=i[0]),i&&(n.outputConnection&&(i=this.scrubNakedValue(i)),e.push(i))}return e=e.join("\n"),(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},Blockly.addModule=function(t){-1===Blockly.modules.indexOf(t)&&Blockly.modules.push(t)},Blockly.addDeclare=function(t){-1===Blockly.Declare.indexOf(t)&&Blockly.Declare.push(t)},Blockly.addButtonEvent=function(t){if(0===Blockly.ButtonEvents.length)return Blockly.ButtonEvents.push(t);for(var e=!1,n=0;n<Blockly.ButtonEvents.length;n++){if(Blockly.ButtonEvents[n].event===t.event){e=!0;break}if(Blockly.ButtonEvents[n].id===t.id){e=!0,Blockly.ButtonEvents[n].event=t.event;break}}e||Blockly.ButtonEvents.push(t)},Blockly.addRemote=function(t){if(0===Blockly.Remotes.length)return Blockly.Remotes.push(t);for(var e=0;e<Blockly.Remotes.length;e++){if("title"===Blockly.Remotes[e].type)return;if(Blockly.Remotes[e].id===t.id){Blockly.Remotes.splice(e,1);break}}Blockly.Remotes.push(t)},Blockly.defineGlobal=function(){for(var t=[],e=this.getMainWorkspace().getAllBlocks(),n=0;n<e.length;n++){if("variables_get"===e[n].type||"variables_set"===e[n].type||"math_change"===e[n].type){var o=this.getMainWorkspace().getVariableById(e[n].getVars()).name,l=Blockly.Python.variableDB_.getName(o,Blockly.VARIABLE_CATEGORY_NAME);if(t.indexOf(l)>-1)continue;t.push(l)}"uart_readinto"===e[n].type&&-1===t.indexOf("uart")&&t.push("uart"),"math_constant"===e[n].type&&-1===t.indexOf("math")&&t.push("math"),"math_random_float"===e[n].type&&-1===t.indexOf("random")&&t.push("random")}var i=[];for(n=0;n<Blockly.modules.length;n++)"machine"===Blockly.modules[n]||i.push(Blockly.modules[n]);let a=Array.from(new Set(Blockly.Declare));return[].concat(t,a)},Blockly.Blocks.remote_add_button={init:function(){this.setColour(Blockly.Msg.REMOTE_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.appendDummyInput().appendField("Add Remote Button ").appendField(new Blockly.FieldTextInput("ButtonName"),"NAME").appendField("to do "),this.appendStatementInput("FUNC")}},Blockly.Python.remote_add_button=function(t){var e=t.getFieldValue("NAME")||"ButtonName",n=t.getFieldValue("NAME")||"ButtonName";n="_remote_"+(n=n.replace(/ /g,"_"));var o=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",l="def "+n+"():\n"+o;return Blockly.defineGlobal().length>0&&(l="def "+n+"():\n  # global params \n"+o),l="def "+n+"():\n  # global params \n"+o,Blockly.addRemote({id:t.id,event:n,code:l,name:e,type:"button"}),""},Blockly.Blocks.basic_on_setup={init:function(){this.setColour(Blockly.Msg.BASIC_HUE),this.setNextStatement(!0),this.setDeletable(!1),this.appendDummyInput().appendField("Setup")}},Blockly.Python.basic_on_setup=function(t){return"# Define Event\n"}},function(t,e,n){"use strict";n.r(e);var o=n(3),l=n(4),i=n(5),a=n(6),s=n(7);Blockly.M5Toolbox.uiToolbox=[{kind:"category",name:"%{BKY_TITLE}",colour:"%{BKY_COMPONENT_TITLE_HUE}",custom:"TITLE",hidden:"true",toolboxitemid:"title"},{kind:"category",name:"%{BKY_LABEL}",colour:"%{BKY_COMPONENT_LABEL_HUE}",custom:"LABEL",hidden:"true",toolboxitemid:"label"},{kind:"category",name:"%{BKY_RECT}",colour:"%{BKY_COMPONENT_RECT_HUE}",custom:"RECT",hidden:"true",toolboxitemid:"rectangle"},{kind:"category",name:"%{BKY_CIRCLE}",colour:"%{BKY_COMPONENT_CIRCLE_HUE}",custom:"CIRCLE",hidden:"true",toolboxitemid:"circle"},{kind:"category",name:"%{BKY_IMAGE}",colour:"%{BKY_COMPONENT_IMAGE_HUE}",custom:"IMAGE",hidden:"true",toolboxitemid:"image"},{kind:"category",name:"%{BKY_TRIANGLE}",colour:"%{BKY_COMPONENT_TRIANGLE_HUE}",custom:"TRIANGLE",hidden:"true",toolboxitemid:"triangle"},{kind:"category",name:"%{BKY_LINE}",colour:"%{BKY_COMPONENT_LINE_HUE}",custom:"LINE",hidden:"true",toolboxitemid:"line"},{kind:"category",name:"%{BKY_TOUCH_BUTTON}",colour:"%{BKY_COMPONENT_CIRCLE_HUE}",hidden:"true",toolboxitemid:"touch_button",contents:o.TouchBtnToolbox},{kind:"category",name:"%{BKY_SWITCH}",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"switch",contents:l.SwitchToolbox},{kind:"category",name:"%{BKY_SLIDER}",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"slider",contents:i.SliderToolbox},{kind:"category",name:"%{BKY_BAR}",colour:"%{BKY_LISTS_HUE}",hidden:"true",toolboxitemid:"bar",contents:a.BarToolbox},{kind:"category",name:"%{BKY_CHECKBOX}",colour:"%{BKY_MAP_HUE}",hidden:"true",toolboxitemid:"checkbox",contents:s.CheckboxToolbox},{kind:"category",name:"%{BKY_SCREEN}",custom:"SCREEN",colour:"%{BKY_COMPONENT_SCREEN_HUE}",toolboxitemid:"screen"}]},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"title"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.title_set_text={init:function(){this.jsonInit(this._titleSetTextJson())},_titleSetTextJson:function(){return{message0:Blockly.Msg.TITLE_SET_TEXT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_text=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?e+".setTitle("+n+")\n":e+".setTitle(str("+n+"))\n"},Blockly.Blocks.title_show={init:function(){this.jsonInit(this._titleShow())},_titleShow:function(){return{message0:Blockly.Msg.TITLE_SHOW,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_show=function(t){return t.getFieldValue("COMPONENT")+".show()\n"},Blockly.Blocks.title_hide={init:function(){this.jsonInit(this._titleHide())},_titleHide:function(){return{message0:Blockly.Msg.TITLE_HIDE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_hide=function(t){return t.getFieldValue("COMPONENT")+".hide()\n"},Blockly.Blocks.title_set_color={init:function(){this.jsonInit(this._titleSetColor())},_titleSetColor:function(){return{message0:Blockly.Msg.TITLE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_color=function(t){return t.getFieldValue("COMPONENT")+".setFgColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.title_set_color_paper={init:function(){this.jsonInit(this._titleSetColor())},_titleSetColor:function(){return{message0:Blockly.Msg.TITLE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_color_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setFgColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.title_set_color_rgb={init:function(){this.jsonInit(this._titleSetColorRgb())},_titleSetColorRgb:function(){return{message0:Blockly.Msg.TITLE_SET_COLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setFgColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setFgColor(0x"+i+a+s+")\n"},Blockly.Blocks.title_set_bgcolor={init:function(){this.jsonInit(this._titleSetBgColor())},_titleSetBgColor:function(){return{message0:Blockly.Msg.TITLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.title_set_bgcolor_paper={init:function(){this.jsonInit(this._titleSetBgColor())},_titleSetBgColor:function(){return{message0:Blockly.Msg.TITLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_bgcolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBgColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.title_set_bgcolor_rgb={init:function(){this.jsonInit(this._titleSetBgColorRgb())},_titleSetBgColorRgb:function(){return{message0:Blockly.Msg.TITLE_SET_BGCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBgColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBgColor(0x"+i+a+s+")\n"},Blockly.Blocks.title_set_color_gray={init:function(){this.jsonInit(this._titleSetColor())},_titleSetColor:function(){return{message0:Blockly.Msg.TITLE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_color_gray=function(t){return t.getFieldValue("COMPONENT")+".setFgColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.title_set_bgcolor_gray={init:function(){this.jsonInit(this._titleSetBgColor())},_titleSetBgColor:function(){return{message0:Blockly.Msg.TITLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TITLE_HUE}},attrs:{keyword:["title"]}},Blockly.Python.title_set_bgcolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"label"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}function i(){return["core2","tough"].indexOf(localStorage.getItem("_type"))>-1?o.coreTwofont():o.fontData()}Blockly.Blocks.label_set_text={init:function(){this.jsonInit(this._labelSetTextJson())},_labelSetTextJson:function(){return{message0:Blockly.Msg.LABEL_SET_TEXT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_text=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_NONE)||"";let o=localStorage.getItem("_type"),l=["core2","tough"].indexOf(o)>-1;return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?l?`${e}.set_text(${n})\n`:e+".setText("+n+")\n":l?`${e}.set_text(str(${n}))\n`:e+".setText(str("+n+"))\n"},Blockly.Blocks.label_set_position={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.LABEL_SET_POSITION,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_position=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0";let l=localStorage.getItem("_type");return["core2","tough"].indexOf(l)>-1?`${e}.set_pos(${n}, ${o})\n`:e+".setPosition("+n+", "+o+")\n"},Blockly.Blocks.label_set_position_x={init:function(){this.jsonInit(this._labelSetPositionX())},_labelSetPositionX:function(){return{message0:Blockly.Msg.LABEL_SET_POSITION_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_position_x=function(t){return t.getFieldValue("COMPONENT")+".setPosition(x="+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.label_set_position_y={init:function(){this.jsonInit(this._labelSetPositionY())},_labelSetPositionY:function(){return{message0:Blockly.Msg.LABEL_SET_POSITION_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_position_y=function(t){return t.getFieldValue("COMPONENT")+".setPosition(y="+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.label_set_color={init:function(){this.jsonInit(this._labelSetColor())},_labelSetColor:function(){return{message0:Blockly.Msg.LABEL_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_color=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"#ff0000";let o=localStorage.getItem("_type");return["core2","tough"].indexOf(o)>-1?`${e}.set_text_color(${n.replace("#","0x")})\n`:e+".setColor("+n.replace("#","0x")+")\n"},Blockly.Blocks.label_set_color_paper={init:function(){this.jsonInit(this._labelSetColor())},_labelSetColor:function(){return{message0:Blockly.Msg.LABEL_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_color_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.label_set_color_rgb={init:function(){this.jsonInit(this._labelSetColorRgb())},_labelSetColorRgb:function(){return{message0:Blockly.Msg.LABEL_SET_COLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_color_rgb=function(t){let e=localStorage.getItem("_type"),n=["core2","tough"].indexOf(e)>-1;var o=t.getFieldValue("COMPONENT"),l=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",a=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a)))return n?`${o}.set_text_color((${l} << 16) | (${i} << 8) | ${a})\n`:o+`.setColor((${l} << 16) | (${i} << 8) | ${a})\n`;var s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16),c=Math.floor(Math.abs(parseInt(a))%256).toString(16);return s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),n?`${o}.set_text_color(0x${s}${r}${c})\n`:o+".setColor(0x"+s+r+c+")\n"},Blockly.Blocks.label_set_font={init:function(){this.jsonInit(this._labelSetColor())},_labelSetColor:function(){return{message0:Blockly.Msg.LABEL_SET_FONT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"FONT_FAMILY",options:i}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_font=function(t){let e=localStorage.getItem("_type"),n=["core2","tough"].indexOf(e)>-1;var o=n?"FONT_MONT_12":"FONT_Default",l=t.getFieldValue("COMPONENT"),i=t.getFieldValue("FONT_FAMILY")||o;return n?`${l}.set_text_font(${i})\n`:l+".setFont(lcd."+i+")\n"},Blockly.Blocks.label_set_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.LABEL_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_mode=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("MODE");let o="",l=localStorage.getItem("_type");return["core2","tough"].indexOf(l)>-1?(o="hide"===n||"True"===n?"True":"False",`${e}.set_hidden(${o})\n`):(o="hide"===n||"True"===n?"hide":"show",e+"."+o+"()\n")},Blockly.Blocks.label_set_rotate={init:function(){this.jsonInit(this._labelSetRotate())},_labelSetRotate:function(){return{message0:Blockly.Msg.LABEL_SET_ROTATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_rotate=function(t){return t.getFieldValue("COMPONENT")+".setRotate("+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.label_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.label_get_width={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_WIDTH,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE,tool:[]}},attrs:{keyword:["label"]}},Blockly.Python.label_get_width=function(t){return[t.getFieldValue("COMPONENT")+".get_width()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.label_set_color_gray={init:function(){this.jsonInit(this._labelSetColor())},_labelSetColor:function(){return{message0:Blockly.Msg.LABEL_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_color_gray=function(t){return t.getFieldValue("COMPONENT")+".setColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.label_set_width={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.LABEL_SET_WIDTH,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"w"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["label"]}},Blockly.Python.label_set_width=function(t){return`${t.getFieldValue("COMPONENT")}.set_size(w=${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.label_set_text_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.LABEL_SET_TEXT_MODE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"mode",options:[["LONG_EXPAND","0"],["LONG_BREAK","1"],["LONG_DOT","2"],["LONG_SROLL","3"],["LONG_SROLL_CIRC","4"],["LONG_CROP","5"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE,tool:["LONG_EXPAND: Expand the object size to the text size (Default)","LONG_BREAK: Keep the object width, break (wrap) the too long lines and expand the object height","LONG_DOT: Keep the object size, break the text and write dots in the last line","LONG_SROLL: Keep the size and scroll the label back and forth","LONG_SROLL_CIRC: Keep the size and scroll the label circularly","LONG_CROP: Keep the size and crop the text out of it"," ","Important Note: First set the new long mode and then set the size with set_width."]}},attrs:{keyword:["label"]}},Blockly.Python.label_set_text_mode=function(t){return`${t.getFieldValue("COMPONENT")}.set_long_mode(${t.getFieldValue("mode")})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"rectangle"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.rect_set_size={init:function(){this.jsonInit(this._rectSetSize())},_rectSetSize:function(){return{message0:Blockly.Msg.RECT_SET_SIZE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"WIDTH"},{type:"input_value",name:"HEIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_size=function(t){return t.getFieldValue("COMPONENT")+".setSize("+(Blockly.Python.valueToCode(t,"WIDTH",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+", "+(Blockly.Python.valueToCode(t,"HEIGHT",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_size_width={init:function(){this.jsonInit(this._rectSetSizeWidth())},_rectSetSizeWidth:function(){return{message0:Blockly.Msg.RECT_SET_SIZE_WIDTH,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"WIDTH"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_size_width=function(t){return t.getFieldValue("COMPONENT")+".setSize(width="+(Blockly.Python.valueToCode(t,"WIDTH",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_size_height={init:function(){this.jsonInit(this._rectSetSizeHeight())},_rectSetSizeHeight:function(){return{message0:Blockly.Msg.RECT_SET_SIZE_HEIGHT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"HEIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_size_height=function(t){return t.getFieldValue("COMPONENT")+".setSize(height="+(Blockly.Python.valueToCode(t,"HEIGHT",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_position={init:function(){this.jsonInit(this._rectSetPosition())},_rectSetPosition:function(){return{message0:Blockly.Msg.RECT_SET_POSITION,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_position=function(t){return t.getFieldValue("COMPONENT")+".setPosition("+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+", "+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_position_x={init:function(){this.jsonInit(this._rectSetPositionX())},_rectSetPositionX:function(){return{message0:Blockly.Msg.RECT_SET_POSITION_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_position_x=function(t){return t.getFieldValue("COMPONENT")+".setPosition(x="+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_position_y={init:function(){this.jsonInit(this._rectSetPositionY())},_rectSetPositionY:function(){return{message0:Blockly.Msg.RECT_SET_POSITION_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_position_y=function(t){return t.getFieldValue("COMPONENT")+".setPosition(y="+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.rect_set_bgcolor={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.RECT_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.rect_set_bgcolor_paper={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.RECT_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bgcolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBgColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.rect_set_bgcolor_rgb={init:function(){this.jsonInit(this._rectSetBgColorRgb())},_rectSetBgColorRgb:function(){return{message0:Blockly.Msg.RECT_SET_BGCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBgColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBgColor(0x"+i+a+s+")\n"},Blockly.Blocks.rect_set_bordercolor={init:function(){this.jsonInit(this._rectSetBorderColor())},_rectSetBorderColor:function(){return{message0:Blockly.Msg.RECT_SET_BORDER_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bordercolor=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.rect_set_bordercolor_paper={init:function(){this.jsonInit(this._rectSetBorderColor())},_rectSetBorderColor:function(){return{message0:Blockly.Msg.RECT_SET_BORDER_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bordercolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBorderColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.rect_set_bordercolor_rgb={init:function(){this.jsonInit(this._rectSetBorderColorRgb())},_rectSetBorderColorRgb:function(){return{message0:Blockly.Msg.RECT_SET_BORDERCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bordercolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBorderColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBorderColor(0x"+i+a+s+")\n"},Blockly.Blocks.rect_set_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.RECT_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:[["hide","hide"],["show","show"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_mode=function(t){return t.getFieldValue("COMPONENT")+"."+t.getFieldValue("MODE")+"()\n"},Blockly.Blocks.rect_set_bgcolor_gray={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.RECT_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bgcolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.rect_set_bordercolor_gray={init:function(){this.jsonInit(this._rectSetBorderColor())},_rectSetBorderColor:function(){return{message0:Blockly.Msg.RECT_SET_BORDER_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_RECT_HUE}},attrs:{keyword:["rect"]}},Blockly.Python.rect_set_bordercolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"circle"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.circle_set_size={init:function(){this.jsonInit(this._circleSetSize())},_circleSetSize:function(){return{message0:Blockly.Msg.CIRCLE_SET_SIZE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"RADIUS"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_size=function(t){return t.getFieldValue("COMPONENT")+".setSize("+(Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"20")+")\n"},Blockly.Blocks.circle_set_position={init:function(){this.jsonInit(this._circleSetPosition())},_circleSetPosition:function(){return{message0:Blockly.Msg.CIRCLE_SET_POSITION,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_position=function(t){return t.getFieldValue("COMPONENT")+".setPosition("+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+", "+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.circle_set_position_x={init:function(){this.jsonInit(this._circleSetPositionX())},_circleSetPositionX:function(){return{message0:Blockly.Msg.CIRCLE_SET_POSITION_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_position_x=function(t){return t.getFieldValue("COMPONENT")+".setPosition(x="+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.circle_set_position_y={init:function(){this.jsonInit(this._circleSetPositionY())},_circleSetPositionY:function(){return{message0:Blockly.Msg.CIRCLE_SET_POSITION_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_position_y=function(t){return t.getFieldValue("COMPONENT")+".setPosition(y="+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"30")+")\n"},Blockly.Blocks.circle_set_bgcolor={init:function(){this.jsonInit(this._circleSetBgColor())},_circleSetBgColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.circle_set_bgcolor_paper={init:function(){this.jsonInit(this._circleSetBgColor())},_circleSetBgColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bgcolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBgColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.circle_set_bgcolor_rgb={init:function(){this.jsonInit(this._circleSetBgColorRgb())},_circleSetBgColorRgb:function(){return{message0:Blockly.Msg.CIRCLE_SET_BGCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBgColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBgColor(0x"+i+a+s+")\n"},Blockly.Blocks.circle_set_bordercolor={init:function(){this.jsonInit(this._circleSetBorderColor())},_circleSetBorderColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bordercolor=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.circle_set_bordercolor_paper={init:function(){this.jsonInit(this._circleSetBorderColor())},_circleSetBorderColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bordercolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBorderColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.circle_set_bordercolor_rgb={init:function(){this.jsonInit(this._circleSetBorderColorRgb())},_circleSetBorderColorRgb:function(){return{message0:Blockly.Msg.CIRCLE_SET_BORDERCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bordercolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBorderColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBorderColor(0x"+i+a+s+")\n"},Blockly.Blocks.circle_set_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.CIRCLE_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:[["hide","hide"],["show","show"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_mode=function(t){return t.getFieldValue("COMPONENT")+"."+t.getFieldValue("MODE")+"()\n"},Blockly.Blocks.circle_set_bgcolor_gray={init:function(){this.jsonInit(this._circleSetBgColor())},_circleSetBgColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bgcolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.circle_set_bordercolor_gray={init:function(){this.jsonInit(this._circleSetBorderColor())},_circleSetBorderColor:function(){return{message0:Blockly.Msg.CIRCLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["circle"]}},Blockly.Python.circle_set_bordercolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"image"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}let i=[["default.jpg","default.jpg"]],a=[["default.png","default.png"]];function s(){for(var t=[],e=0;e<Blockly.ResImages.length;e++)t.push([Blockly.ResImages[e],Blockly.ResImages[e]]);let n=localStorage.getItem("_type"),o=["core2","tough"].indexOf(n)>-1;return 0===t.length?o?a:i:t}Blockly.Blocks.image_hide={init:function(){this.jsonInit(this._imageHide())},_imageHide:function(){return{message0:Blockly.Msg.IMAGE_HIDE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_hide=function(t){return t.getFieldValue("COMPONENT")+".hide()\n"},Blockly.Blocks.image_show={init:function(){this.jsonInit(this._imageShow())},_imageShow:function(){return{message0:Blockly.Msg.IMAGE_SHOW,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_show=function(t){return t.getFieldValue("COMPONENT")+".show()\n"},Blockly.Blocks.image_set_position_x={init:function(){this.jsonInit(this._imageSetPositionX())},_imageSetPositionX:function(){return{message0:Blockly.Msg.IMAGE_SET_POSITION_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_position_x=function(t){return t.getFieldValue("COMPONENT")+".setPosition(x="+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.image_set_position_y={init:function(){this.jsonInit(this._imgaeSetPositionY())},_imgaeSetPositionY:function(){return{message0:Blockly.Msg.IMAGE_SET_POSITION_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_position_y=function(t){return t.getFieldValue("COMPONENT")+".setPosition(y="+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.image_set_position={init:function(){this.jsonInit(this._imageSetPosition())},_imageSetPosition:function(){return{message0:Blockly.Msg.IMAGE_SET_POSITION,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_position=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0";let l=localStorage.getItem("_type");return["core2","tough"].indexOf(l)>-1?`${e}.set_pos(${n}, ${o})\n`:e+".setPosition("+n+", "+o+")\n"},Blockly.Blocks.image_set_image={init:function(){this.jsonInit(this._imageSetInage()),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,20,20,"*",this.addFile.bind(this,"img")))},_imageSetInage:function(){return{message0:Blockly.Msg.IMAGE_SET_IMAGE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"IMAGE",options:s}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},addFile:o.addFileFun,attrs:{keyword:["image"]}},Blockly.Python.image_set_image=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("IMAGE");let o=localStorage.getItem("_type");return["core2","tough"].indexOf(o)>-1?`${e}.set_img_src("res/${n}")\n`:e+'.changeImg("res/'+n+'")\n'},Blockly.Blocks.image_set_image_network={init:function(){this.jsonInit(this._imageSetInage())},_imageSetInage:function(){return{message0:Blockly.Msg.IMAGE_SET_IMAGE_NETWORK,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"url"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_image_network=function(t){return`${t.getFieldValue("COMPONENT")}.set_network_img_src(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.image_set_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.IMAGE_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:[["hide","hide"],["show","show"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LABEL_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_mode=function(t){return t.getFieldValue("COMPONENT")+"."+t.getFieldValue("MODE")+"()\n"},Blockly.Blocks.image_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.image_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.image_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_IMAGE_HUE}},attrs:{keyword:["image"]}},Blockly.Python.image_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.screen_set_bgcolor={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.SCREEN_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_bgcolor=function(t){var e=t.getFieldValue("COLOR")||"#ff0000";let n=localStorage.getItem("_type");return["core2","tough"].indexOf(n)>-1?`screen.set_screen_bg_color(${e.replace("#","0x")})\n`:"setScreenColor("+e.replace("#","0x")+")\n"},Blockly.Blocks.screen_set_bgcolor_rgb={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.SCREEN_SET_BGCOLOR_RGB,args0:[{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_bgcolor_rgb=function(t){let e=localStorage.getItem("_type"),n=["core2","tough"].indexOf(e)>-1;var o="",l=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",a=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a)))return o=`(${l} << 16) | (${i} << 8) | ${a}`,n?`screen.set_screen_bg_color(${o})\n`:`setScreenColor(${o})\n`;var s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16),c=Math.floor(Math.abs(parseInt(a))%256).toString(16);return s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),o=`0x${s}${r}${c}`,n?`screen.set_screen_bg_color(${o})\n`:`setScreenColor(${o})\n`},Blockly.Blocks.screen_set_bgcolor_paper={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.SCREEN_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[15],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_bgcolor_paper=function(t){var e=t.getFieldValue("COLOR")||"15";return`setScreenColor(${Blockly.paperColors.indexOf(e)}) \n`},Blockly.Blocks.screen_set_rotate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_SET_ROTATION,args0:[{type:"field_dropdown",name:"ROTATE",options:[["0","0"],["1","1"],["2","2"],["3","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},getSurroundLoop:function(t){if(t.getSurroundParent()){var e=t.getSurroundParent().getDescendants(),n=0;return e.forEach(t=>{"screen_set_rotate"===t.type&&(n+=1)}),!!n}return null},onchange:function(t){this.workspace.isDragging&&!this.workspace.isDragging()&&(this.getSurroundLoop(this)?(this.setWarningText("Warning: This block cannot be used within a callback."),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1)):(this.setWarningText(null),this.setEnabled(this.isEnabled())))},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_rotate=function(t){return""},Blockly.Blocks.screen_set_brightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_SET_BRIGHTNESS,args0:[{type:"input_value",name:"BRIGHTNESS"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_brightness=function(t){const e=localStorage.getItem("_type");var n=Blockly.Python.valueToCode(t,"BRIGHTNESS",Blockly.Python.ORDER_FUNCTION_CALL)||"30";return"core"==e||"fire"===e?`lcd.setBrightness(${n}) \n`:"stick-C"==e||"stick-C-plus"==e?`axp.setLcdBrightness(${n}) \n`:"core2"==e||"tough"===e?`screen.set_screen_brightness(${n}) \n`:""},Blockly.Blocks.screen_set_clean={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_CLEAN,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_clean=function(t){return"screen.clean_screen()\n"},Blockly.Blocks.screen_set_bgcolor_gray={init:function(){this.jsonInit(this._rectSetBgColor())},_rectSetBgColor:function(){return{message0:Blockly.Msg.SCREEN_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_bgcolor_gray=function(t){return"setScreenColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.screen_set_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_SET_SHOW,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_show=function(t){return"coreInk"===localStorage.getItem("_type")?"coreInkShow()\n":"lcd.show()\n"},Blockly.Blocks.screen_set_paritalshow={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_SET_PARITALSHOW,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_paritalshow=function(t){var e=Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"coreInk"===localStorage.getItem("_type")?`coreInkPartialShow(${e}, ${n}, ${o}, ${l}) \n`:`lcd.partial_show(${e}, ${n}, ${o}, ${l}) \n`},Blockly.Blocks.screen_set_sethv={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SCREEN_SET_SETHV,args0:[{type:"input_value",name:"HV"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_SCREEN_HUE,tool:["HV: 0 / 1"]}},attrs:{keyword:["screen"]}},Blockly.Python.screen_set_sethv=function(t){return`coreInkSetHV(${Blockly.Python.valueToCode(t,"HV",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}) \n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"triangle"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.triangle_set_size={init:function(){this.jsonInit(this._triangleSetPosition())},_triangleSetPosition:function(){return{message0:Blockly.Msg.TRIANGLE_SET_SIZE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"input_value",name:"X3"},{type:"input_value",name:"Y3"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_size=function(t){return`${t.getFieldValue("COMPONENT")}.setSize(${Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"X3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.triangle_set_bgcolor={init:function(){this.jsonInit(this._triangleSetBgColor())},_triangleSetBgColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.triangle_set_bgcolor_paper={init:function(){this.jsonInit(this._triangleSetBgColor())},_triangleSetBgColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bgcolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBgColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.triangle_set_bgcolor_rgb={init:function(){this.jsonInit(this._triangleSetBgColorRgb())},_triangleSetBgColorRgb:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BGCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBgColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBgColor(0x"+i+a+s+")\n"},Blockly.Blocks.triangle_set_bordercolor={init:function(){this.jsonInit(this._triangleSetBorderColor())},_triangleSetBorderColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bordercolor=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.triangle_set_bordercolor_paper={init:function(){this.jsonInit(this._triangleSetBorderColor())},_triangleSetBorderColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bordercolor_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setBorderColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.triangle_set_bordercolor_rgb={init:function(){this.jsonInit(this._triangleSetBorderColorRgb())},_triangleSetBorderColorRgb:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BORDERCOLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bordercolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.setBorderColor((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".setBorderColor(0x"+i+a+s+")\n"},Blockly.Blocks.triangle_set_mode={init:function(){this.jsonInit(this._labelSetPosition())},_labelSetPosition:function(){return{message0:Blockly.Msg.TRIANGLE_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:[["hide","hide"],["show","show"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_mode=function(t){return t.getFieldValue("COMPONENT")+"."+t.getFieldValue("MODE")+"()\n"},Blockly.Blocks.triangle_set_bgcolor_gray={init:function(){this.jsonInit(this._triangleSetBgColor())},_triangleSetBgColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BGCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bgcolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBgColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.triangle_set_bordercolor_gray={init:function(){this.jsonInit(this._triangleSetBorderColor())},_triangleSetBorderColor:function(){return{message0:Blockly.Msg.TRIANGLE_SET_BORDERCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_TRIANGLE_HUE}},attrs:{keyword:["triangle"]}},Blockly.Python.triangle_set_bordercolor_gray=function(t){return t.getFieldValue("COMPONENT")+".setBorderColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"line"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.line_set_position={init:function(){this.jsonInit(this._lineSetPosition())},_lineSetPosition:function(){return{message0:Blockly.Msg.LINE_SET_POSITION,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_position=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0";let a=localStorage.getItem("_type");return["core2","tough"].indexOf(a)>-1?`${e}.set_points(${n}, ${o}, ${l}, ${i})\n`:`${e}.setSize(${n}, ${o}, ${l}, ${i})\n`},Blockly.Blocks.line_set_color={init:function(){this.jsonInit(this._lineSetColor())},_lineSetColor:function(){return{message0:Blockly.Msg.LINE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_color=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"#ff0000";let o=localStorage.getItem("_type");return["core2","tough"].indexOf(o)>-1?`${e}.set_color(${n.replace("#","0x")})\n`:e+".setColor("+n.replace("#","0x")+")\n"},Blockly.Blocks.line_set_color_paper={init:function(){this.jsonInit(this._lineSetColor())},_lineSetColor:function(){return{message0:Blockly.Msg.LINE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_color_paper=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("COLOR")||"0";return e+".setColor("+Blockly.paperColors.indexOf(n)+")\n"},Blockly.Blocks.line_set_color_rgb={init:function(){this.jsonInit(this._lineSetColorRgb())},_lineSetColorRgb:function(){return{message0:Blockly.Msg.LINE_SET_COLOR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_color_rgb=function(t){let e=localStorage.getItem("_type"),n=["core2","tough"].indexOf(e)>-1;var o=t.getFieldValue("COMPONENT"),l=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",a=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a)))return n?`${o}.set_color((${l} << 16) | (${i} << 8) | ${a})\n`:o+`.setColor((${l} << 16) | (${i} << 8) | ${a})\n`;var s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16),c=Math.floor(Math.abs(parseInt(a))%256).toString(16);return s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),n?`${o}.set_color(0x${s}${r}${c})\n`:o+".setColor(0x"+s+r+c+")\n"},Blockly.Blocks.line_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LINE_SET_MODE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_mode=function(t){let e=localStorage.getItem("_type"),n=["core2","tough"].indexOf(e)>-1;var o=t.getFieldValue("COMPONENT"),l=t.getFieldValue("MODE");let i="";return n?(i="hide"===l||"True"===l?"True":"False",`${o}.set_hidden(${i})\n`):(i="hide"===l||"True"===l?"hide":"show",o+"."+i+"()\n")},Blockly.Blocks.line_set_opacity={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_OPACITY,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"opacity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["Set line opacity","opacity: 0 ~ 100"]}},attrs:{keyword:["line"]}},Blockly.Python.line_set_opacity=function(t){return`${t.getFieldValue("COMPONENT")}.set_opacity(${Blockly.Python.valueToCode(t,"opacity",Blockly.Python.ORDER_FUNCTION_CALL)||"100"})\n`},Blockly.Blocks.line_set_width={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LINE_SET_WIDTH,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"linewidth"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_width=function(t){return`${t.getFieldValue("COMPONENT")}.set_line_width(${Blockly.Python.valueToCode(t,"linewidth",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.line_set_color_gray={init:function(){this.jsonInit(this._lineSetColor())},_lineSetColor:function(){return{message0:Blockly.Msg.LINE_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["line"]}},Blockly.Python.line_set_color_gray=function(t){return t.getFieldValue("COMPONENT")+".setColor("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"touch_button"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.button_set_pos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_POS,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_pos=function(t){return`${t.getFieldValue("COMPONENT")}.set_pos(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.button_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.button_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_SIZE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_size=function(t){return`${t.getFieldValue("COMPONENT")}.set_size(${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"70"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"30"})\n`},Blockly.Blocks.button_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.button_set_bgcolor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".set_bg_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.button_set_bgcolor_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_bg_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_bg_color(0x"+i+a+s+")\n"},Blockly.Blocks.button_set_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXT,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"text"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_text=function(t){return t.getFieldValue("COMPONENT")+".set_btn_text("+(Blockly.Python.valueToCode(t,"text",Blockly.Python.ORDER_FUNCTION_CALL)||"Button")+")\n"},Blockly.Blocks.button_set_textcolor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXTCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_textcolor=function(t){return t.getFieldValue("COMPONENT")+".set_btn_text_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.button_set_textcolor_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXTCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_textcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_btn_text_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_btn_text_color(0x"+i+a+s+")\n"},Blockly.Blocks.button_set_text_font={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXT_FONT,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"font",options:o.coreTwofont}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_text_font=function(t){return`${t.getFieldValue("COMPONENT")}.set_btn_text_font(${t.getFieldValue("font")||"FONT_MONT_12"})\n`},Blockly.Blocks.button_set_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_CB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"EVENT",options:o.button_events}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_set_cb=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("EVENT")||"wasPressed";return`def ${e}_${n}():\n  # global params \n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`+`${e}.${n}(${e}_${n})\n`},Blockly.Blocks.button_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE}},attrs:{keyword:["button"]}},Blockly.Python.button_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"},Blockly.Blocks.button_get_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.GET_STATE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_CIRCLE_HUE,tool:[]}},attrs:{keyword:["button"]}},Blockly.Python.button_get_state=function(t){return[t.getFieldValue("COMPONENT")+".get_state()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"switch"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.switch_set_pos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_POS,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_pos=function(t){return`${t.getFieldValue("COMPONENT")}.set_pos(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.switch_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.switch_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_SIZE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_size=function(t){return`${t.getFieldValue("COMPONENT")}.set_size(${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"70"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"30"})\n`},Blockly.Blocks.switch_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.switch_set_bgcolor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_BGCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".set_bg_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.switch_set_bgcolor_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_BGCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_bg_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_bg_color(0x"+i+a+s+")\n"},Blockly.Blocks.switch_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_COLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_color=function(t){return t.getFieldValue("COMPONENT")+".set_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.switch_set_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_COLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_color(0x"+i+a+s+")\n"},Blockly.Blocks.switch_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"},Blockly.Blocks.switch_set_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_ON,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_on=function(t){return t.getFieldValue("COMPONENT")+".set_on()\n"},Blockly.Blocks.switch_set_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_OFF,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_off=function(t){return t.getFieldValue("COMPONENT")+".set_off()\n"},Blockly.Blocks.switch_set_toggle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_TOGGLE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_toggle=function(t){return t.getFieldValue("COMPONENT")+".set_toggle()\n"},Blockly.Blocks.switch_set_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_CB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"EVENT",options:[["on","on"],["off","off"]]}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["switch"]}},Blockly.Python.switch_set_cb=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("EVENT")||"on";return`def ${e}_${n}():\n  # global params \n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`+`${e}.${n}(${e}_${n})\n`},Blockly.Blocks.switch_get_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.GET_STATE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["switch"]}},Blockly.Python.switch_get_state=function(t){return[t.getFieldValue("COMPONENT")+".get_state()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"slider"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.slider_set_pos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_POS,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_pos=function(t){return`${t.getFieldValue("COMPONENT")}.set_pos(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.slider_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.slider_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_SIZE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_size=function(t){return`${t.getFieldValue("COMPONENT")}.set_size(${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"70"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"12"})\n`},Blockly.Blocks.slider_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.slider_set_bgcolor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".set_bg_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.slider_set_bgcolor_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_bg_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_bg_color(0x"+i+a+s+")\n"},Blockly.Blocks.slider_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_TRACK_COLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_color=function(t){return t.getFieldValue("COMPONENT")+".set_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.slider_set_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_TRACK_COLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_color(0x"+i+a+s+")\n"},Blockly.Blocks.slider_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"},Blockly.Blocks.slider_set_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_VALUE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_value=function(t){return`${t.getFieldValue("COMPONENT")}.set_value(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.slider_set_range={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_RANGE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"MIN"},{type:"input_value",name:"MAX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_range=function(t){return`${t.getFieldValue("COMPONENT")}.set_range(${Blockly.Python.valueToCode(t,"MIN",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"MAX",Blockly.Python.ORDER_FUNCTION_CALL)||"100"})\n`},Blockly.Blocks.slider_set_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SLIDER_SET_CB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_variable",name:"value",variable:"value"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["slider"]}},Blockly.Python.slider_set_cb=function(t){for(var e=Blockly.defineGlobal(),n=Blockly.Python.variableDB_.getName(t.getFieldValue("value"),Blockly.VARIABLE_CATEGORY_NAME),o=t.getFieldValue("COMPONENT"),l=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=`def ${o}_changed(${n}):\n`,a=0;a<e.length;a++)n===e[a]&&(e.splice(a,1),a--);return e.length>0?i+=`  global ${e.join(", ")} \n${l}  pass\n`:i+=l+"  pass\n",i+`${o}.changed(${o}_changed)\n`},Blockly.Blocks.slider_get_value={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.GET_VALUE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["slider"]}},Blockly.Python.slider_get_value=function(t){return[t.getFieldValue("COMPONENT")+".get_value()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"bar"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.bar_set_pos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_POS,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_pos=function(t){return`${t.getFieldValue("COMPONENT")}.set_pos(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.bar_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.bar_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_SIZE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_size=function(t){return`${t.getFieldValue("COMPONENT")}.set_size(${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"70"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"12"})\n`},Blockly.Blocks.bar_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.bar_set_bgcolor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_bgcolor=function(t){return t.getFieldValue("COMPONENT")+".set_bg_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.bar_set_bgcolor_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_BGCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_bgcolor_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_bg_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_bg_color(0x"+i+a+s+")\n"},Blockly.Blocks.bar_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_TRACK_COLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_color=function(t){return t.getFieldValue("COMPONENT")+".set_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.bar_set_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_TRACK_COLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_color(0x"+i+a+s+")\n"},Blockly.Blocks.bar_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"},Blockly.Blocks.bar_set_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_VALUE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_value=function(t){return`${t.getFieldValue("COMPONENT")}.set_value(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.bar_set_range={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_RANGE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"MIN"},{type:"input_value",name:"MAX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["bar"]}},Blockly.Python.bar_set_range=function(t){return`${t.getFieldValue("COMPONENT")}.set_range(${Blockly.Python.valueToCode(t,"MIN",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"MAX",Blockly.Python.ORDER_FUNCTION_CALL)||"100"})\n`},Blockly.Blocks.bar_get_value={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.GET_VALUE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["bar"]}},Blockly.Python.bar_get_value=function(t){return[t.getFieldValue("COMPONENT")+".get_value()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.M5Component.length;e++)"checkbox"===Blockly.M5Component[e].type&&t.push([Blockly.M5Component[e].name,Blockly.M5Component[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.checkbox_set_pos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_POS,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_pos=function(t){return`${t.getFieldValue("COMPONENT")}.set_pos(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.checkbox_set_align={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ALIGN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.alignData},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"REF",options:o.getAll}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_align=function(t){return`${t.getFieldValue("COMPONENT")}.set_align(${t.getFieldValue("MODE")||"ALIGN_CENTER"}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ref=${t.getFieldValue("REF")||"Screen"}.obj)\n`},Blockly.Blocks.checkbox_set_hidden={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"MODE",options:o.hiddenMode}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_hidden=function(t){return`${t.getFieldValue("COMPONENT")}.set_hidden(${t.getFieldValue("MODE")})\n`},Blockly.Blocks.checkbox_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXTCOLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_color=function(t){return t.getFieldValue("COMPONENT")+".set_text_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.checkbox_set_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXTCOLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_text_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_text_color(0x"+i+a+s+")\n"},Blockly.Blocks.checkbox_set_selected_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_COLOR,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_selected_color=function(t){return t.getFieldValue("COMPONENT")+".set_checked_color("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.checkbox_set_selected_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SWITCH_SET_COLOR_RGB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_selected_color_rgb=function(t){var e=t.getFieldValue("COMPONENT"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return e+`.set_checked_color((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),e+".set_checked_color(0x"+i+a+s+")\n"},Blockly.Blocks.checkbox_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_DELETE,args0:[{type:"field_dropdown",name:"COMPONENT",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_delete=function(t){return t.getFieldValue("COMPONENT")+".delete()\n"},Blockly.Blocks.checkbox_set_checked={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_HIDDEN,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"state",options:o.checkedOptions}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_checked=function(t){return`${t.getFieldValue("COMPONENT")}.set_checked(${t.getFieldValue("state")||"True"})\n`},Blockly.Blocks.checkbox_set_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXT,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"input_value",name:"text"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_text=function(t){return t.getFieldValue("COMPONENT")+".set_text("+(Blockly.Python.valueToCode(t,"text",Blockly.Python.ORDER_FUNCTION_CALL)||"Text")+")\n"},Blockly.Blocks.checkbox_set_text_font={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_TEXT_FONT,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"font",options:o.coreTwofont}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_text_font=function(t){return`${t.getFieldValue("COMPONENT")}.set_text_font(${t.getFieldValue("font")||"FONT_MONT_12"})\n`},Blockly.Blocks.checkbox_set_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_CB,args0:[{type:"field_dropdown",name:"COMPONENT",options:l},{type:"field_dropdown",name:"EVENT",options:o.checked_events}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["checkbox"]}},Blockly.Python.checkbox_set_cb=function(t){var e=t.getFieldValue("COMPONENT"),n=t.getFieldValue("EVENT")||"wasPressed";return`def ${e}_${n}():\n  # global params \n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`+`${e}.${n}(${e}_${n})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(8),l=n(9),i=n(10),a=n(11),s=n(12),r=n(13),c=n(14),u=n(15),_=n(16),d=n(17),h=n(18);Blockly.M5Toolbox.advancedToolbox=[{kind:"category",name:"%{BKY_EXECUTE}",colour:"#2b90d9",toolboxitemid:"execute",contents:[{kind:"button",text:"%{BKY_EXECUTE}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"execute"},{kind:"block",type:"execute"}]},{kind:"category",name:"%{BKY_ESPNOW}",colour:"%{BKY_ESPNOW_HUE}",toolboxitemid:"espnow",contents:o.EspnowToolbox},{kind:"category",name:"MQTT",colour:"%{BKY_RGB_HUE}",toolboxitemid:"mqtt",custom:"MQTT"},{kind:"category",name:"%{BKY_HTTP}",colour:"#7AC5CD",toolboxitemid:"http",contents:l.HttpToolbox},{kind:"category",name:"%{BKY_SOCKET}",colour:"%{BKY_DAC_HUE}",toolboxitemid:"socket",contents:[{kind:"category",name:"%{BKY_UDP_SERVER}",colour:"%{BKY_TEXTS_HUE}",contents:i.UdpServerToolbox},{kind:"category",name:"%{BKY_UDP_CLIENT}",colour:"%{BKY_LISTS_HUE}",contents:a.UdpClientToolbox}]},{kind:"category",name:"%{BKY_MODBUS_MASTER}",colour:"%{BKY_MODBUS_MASTER_HUE}",toolboxitemid:"modbus_master",contents:s.ModbusMasterToolbox},{kind:"category",name:"%{BKY_MODBUS_SLAVE}",colour:"%{BKY_MODBUS_SLAVE_HUE}",toolboxitemid:"modbus_slave",contents:r.ModbusSlaveToolbox},{kind:"category",name:"%{BKY_CAN}",colour:"%{BKY_TIMER_HUE}",toolboxitemid:"can",contents:c.CanToolbox},{kind:"category",name:"%{BKY_BLYNK}",colour:"%{BKY_BLYNK_HUE}",toolboxitemid:"blynk",contents:u.BlynkToolbox},{kind:"category",name:"%{BKY_BLE_UART}",colour:"%{BKY_BLE_UART_HUE}",toolboxitemid:"ble_uart",contents:_.BleuartToolbox},{kind:"category",name:"%{BKY_PIN_SERVO}",colour:"%{BKY_SERVO_HUE}",toolboxitemid:"pin_servo",contents:d.PinServoToolbox},{kind:"category",name:"%{BKY_NTP}",colour:"%{BKY_LCD_HUE}",toolboxitemid:"ntp",contents:h.NtpToolbox},{kind:"category",name:"%{BKY_LORABUS}",colour:"%{BKY_LORABUS_HUE}",toolboxitemid:"lorabus",custom:"LORABUS"}]},function(t,e){Blockly.Blocks.execute={init:function(){this.jsonInit(this._execute())},_execute:function(){return{message0:Blockly.Msg.EXECUTE_IN,args0:[{type:"input_dummy"},{type:"field_multilinetext",name:"CODE",text:" "}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:"#2b90d9",tool:["exec python code"]}},attrs:{keyword:["execute"]}},Blockly.Python.execute=function(t){var e=t.getFieldValue("CODE");return""===e?"":e+"\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[["Null","Null"]],e=0;e<Blockly.ResKeys.length;e++)t.push([Blockly.ResKeys[e],Blockly.ResKeys[e]]);return t}Blockly.Blocks.mqtt_set_client={init:function(){this.jsonInit(this._pinsSetMap()),this.isSSL="False",this.key="Null",this.cert="Null",this.appendDummyInput("SSL").appendField("SSL").appendField(new Blockly.FieldDropdown([["False","False"],["True","True"]],function(t){let e=this.getSourceBlock();t!=e.isSSL&&(e.updateOP(t),e.isSSL=t)})),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,25,25,"*",this.addFile.bind(this,"key")))},_pinsSetMap:function(){return{message0:Blockly.Msg.MQTT_SET_CLIENT,args0:[{type:"input_value",name:"ID"},{type:"input_value",name:"SERVER"},{type:"input_value",name:"PORT"},{type:"input_value",name:"USER"},{type:"input_value",name:"PASSWORD"},{type:"input_value",name:"KEEPALIVE"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.RGB_HUE,tool:["Init mqtt","id: string (can`t use same id connect same broker)","server: broker IP addr","port: broker port","user: broker user","password: broker password","Keepalive: 0 ~ 65536(s)"]}},addFile:o.addFileFun,mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("SSL",this.isSSL),"False"===this.isSSL?null:(t.setAttribute("key",this.key),t.setAttribute("cert",this.cert),t)},domToMutation:function(t){let e=t.getAttribute("SSL");if("True"===e){this.isSSL=e,this.key=t.getAttribute("key"),this.cert=t.getAttribute("cert"),this.updateOP(e);let n=this.getInput("SSL").fieldRow[1];n.selectedOption_=[e,e],n.value_=e}},updateOP:function(t){if("True"===t){this.getInput("key")&&this.removeInput("key"),this.getInput("cert")&&this.removeInput("cert");var e=this,n=new Blockly.FieldDropdown(l,function(t){e.key=t}),o=new Blockly.FieldDropdown(l,function(t){e.cert=t});if(this.getInput("image")&&this.removeInput("image"),!this.getInput("key")&&!this.getInput("cert")){this.appendDummyInput("key").appendField(Blockly.Msg.KEYFILE).appendField(n),this.appendDummyInput("cert").appendField(Blockly.Msg.CERTFILE).appendField(o),this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,25,25,"*",this.addFile.bind(this,"key")));let t=this.getInput("key").fieldRow[1].getValue();if(this.key!==t){let t=this.getInput("key").fieldRow[1];t.selectedOption_=[this.key,this.key],t.value_=this.key}let e=this.getInput("cert").fieldRow[1].getValue();if(this.cert!==e){let t=this.getInput("cert").fieldRow[1];t.selectedOption_=[this.cert,this.cert],t.value_=this.cert}}}else this.getInput("key")&&(this.removeInput("key"),this.key="Null"),this.getInput("cert")&&(this.removeInput("cert"),this.cert="Null")},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_set_client=function(t){var e=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"SERVER",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"PORT",Blockly.Python.ORDER_FUNCTION_CALL)||"1883",l=Blockly.Python.valueToCode(t,"USER",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.Python.valueToCode(t,"PASSWORD",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"KEEPALIVE",Blockly.Python.ORDER_FUNCTION_CALL)||"300";let s="";if("True"===this.isSSL){let t,r=this.key,c=this.cert;t="Null"===r||"Null"===c?"ssl = True":`ssl = True, ssl_params = {'key': "/flash/res/${r}", 'cert': "/flash/res/${c}"}`,s=`m5mqtt = M5mqtt(${e}, ${n}, ${o}, ${l}, ${i}, ${a}, ${t})\n`}else s="m5mqtt = M5mqtt("+e+", "+n+", "+o+", "+l+", "+i+", "+a+")\n";if(Blockly.mqttSub)for(var r=0;r<Blockly.mqttSub.length;r++)s+=Blockly.mqttSub[r].sub;return s},Blockly.Blocks.mqtt_sub={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.MQTT_SUB,args0:[{type:"input_value",name:"FROM"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.RGB_HUE,tool:["Mqtt subscribe topic","note: if received topic, will call fun with topic data"]}},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_sub=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=e.replace(/\W/gi,"_");let l=`def fun${o}(topic_data):\n  # global params\n${n}  pass\n`;Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let i="m5mqtt.subscribe(str("+e+"), fun"+o+")\n",a=Blockly.mqttSub.findIndex(function(e){return e.id===t.id});return-1===a?Blockly.mqttSub.push({id:t.id,sub:i}):Blockly.mqttSub[a].sub=i,l},Blockly.Blocks.mqtt_start={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.MQTT_START,previousStatement:null,nextStatement:null,colour:Blockly.Msg.RGB_HUE,tool:["Mqtt subscribe topic","note: if received topic, will call fun with topic data"]}},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_start=function(t){return"m5mqtt.start()\n"},Blockly.Blocks.mqtt_get_topic_data={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.MQTT_GET_TOPICDATA,output:null,colour:Blockly.Msg.RGB_HUE,tool:["Get topic data","return: topic data","note: only valid in mqtt subscribe fun"]}},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_get_topic_data=function(t){return["topic_data",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.mqtt_publish={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.MQTT_PUBLISH,args0:[{type:"input_value",name:"FROM"},{type:"input_value",name:"MSG"},{type:"input_value",name:"qos"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Mqtt publish msg to topic","topic: string","msg: string"]}},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_publish=function(t){return`m5mqtt.publish(str(${Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||""}), str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}), ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.mqtt_set_last_will={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MQTT_SET_LAST_WILL,args0:[{type:"input_value",name:"TOPIC"},{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.mqtt_set_last_will=function(t){return`m5mqtt.set_last_will(str(${Blockly.Python.valueToCode(t,"TOPIC",Blockly.Python.ORDER_FUNCTION_CALL)||""}),str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`}},function(t,e){Blockly.Blocks.sd_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SD_READ,args0:[{type:"input_value",name:"URL"},{type:"input_value",name:"NAME"},{type:"input_value",name:"SIZE"}],output:null,inputsInline:!0,colour:Blockly.Msg.SD_HUE,tool:["Read sd card file","URL: The file path to be manipulated","NAME: The name of the file to be manipulated","SIZE: Read file size"]}}},Blockly.Python.sd_read=function(t){return Blockly.Python.valueToCode(t,"URL",Blockly.Python.ORDER_FUNCTION_CALL),Blockly.Python.valueToCode(t,"NAME",Blockly.Python.ORDER_FUNCTION_CALL),Blockly.Python.valueToCode(t,"SIZE",Blockly.Python.ORDER_FUNCTION_CALL),"sd_read\n"},Blockly.Blocks.sd_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SD_WRITE,args0:[{type:"input_value",name:"name"},{type:"input_value",name:"data"},{type:"field_dropdown",name:"mode",options:[["a","a"],["w","w"],["w+","w+"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SD_HUE,tool:["Write to sd card file","name: The file to be manipulated(string)","data: Data to be written (string)","mode: a(Write only appended, not overridden),w(Covered writing),w+(read-write)"]}}},Blockly.Python.sd_write=function(t){return Blockly.Python.valueToCode(t,"NAME",Blockly.Python.ORDER_FUNCTION_CALL),Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL),t.getFieldValue("mode"),"sd_write\n"},Blockly.Blocks.sd_list={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SD_LIST,args0:[{type:"input_value",name:"URL"}],output:null,inputsInline:!0,colour:Blockly.Msg.SD_HUE,tool:["Returns a list of files in the specified directory","URL: The file path to be manipulated"]}}},Blockly.Python.sd_list=function(t){return Blockly.Python.valueToCode(t,"URL",Blockly.Python.ORDER_FUNCTION_CALL),"sd_list\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Msg.ESPNOW_HUE="#D09E88",Blockly.Blocks.espnow_get_mac_addr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_GET_MAC_ADDR,inputsInline:!0,output:null,colour:Blockly.Msg.ESPNOW_HUE,tool:["Get EspNow mac addr","return mac addr,type: bytes"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_get_mac_addr=function(t){return["espnow.get_mac_addr()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.espnow_set_channel={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_SET_CHANNEL,args0:[{type:"input_value",name:"channel"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["channel: 1 ~ 13"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_set_channel=function(t){return`wifiCfg.wlan_ap.config(channel=${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"6"})\n`},Blockly.Blocks.espnow_add_peer={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_ADD_PEER,args0:[{type:"field_input",name:"MAC",text:"ff:ff:ff:ff:ff:ff",spellcheck:!1},{type:"field_dropdown",name:"ID",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["peer: must be bytes, len: 6, slave mac addr","id: save peer, 0 ~ 9, default: -1"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_add_peer=function(t){return`espnow.add_peer('${t.getFieldValue("MAC")||"b'\\xff\\xff\\xff\\xff\\xff\\xff'"}', id=${t.getFieldValue("ID")||"10"})\n`},Blockly.Blocks.espnow_set_pmk={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_SET_PMK,args0:[{type:"field_input",name:"PMK",text:"",spellcheck:!1}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["Set pmk","pmk: type should be bytes or str, len must 16"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_set_pmk=function(t){return`espnow.set_pmk('${t.getFieldValue("PMK")||""}')\n`},Blockly.Blocks.espnow_broadcast={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_BROADCAST,args0:[{type:"input_value",name:"DATA"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["Broadcast message","cmd id: 0~65535, default 0","data: bytes or str, default: None"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_broadcast=function(t){return`espnow.broadcast(data=str(${Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.espnow_recv_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_RECV_CB,args0:[{type:"input_value",name:"MAC_ADDR"},{type:"input_value",name:"DATA"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["Receive Callback"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_recv_cb=function(t){var e="",n=Blockly.Python.valueToCode(t,"MAC_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"_",o=Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"_",l=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.defineGlobal();return e=`\ndef recv_cb(_):\n  # global params\n  ${n}, _, ${o} = espnow.recv_data(encoder='str')\n${l}\n  pass\nespnow.recv_cb(recv_cb)\n\n`,i.length>0&&(e=e.replace(/# global params/g,"global "+i.join(","))),e},Blockly.Blocks.espnow_send_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPNOW_SEND_CB,args0:[{type:"input_value",name:"FLAG"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["Send Callback"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_send_cb=function(t){var e="",n=Blockly.Python.valueToCode(t,"FLAG",Blockly.Python.ORDER_FUNCTION_CALL)||"_",o=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.defineGlobal();return e=`\ndef send_cb(flag):\n  # global params\n  ${n} = flag\n${o}\n  pass\nespnow.send_cb(send_cb)\n\n`,l.length>0&&(e=e.replace(/# global params/g,"global "+l.join(","))),e},Blockly.Blocks.espnow_send={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ESPOW_SEND,args0:[{type:"field_dropdown",name:"ID",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"]]},{type:"input_value",name:"DATA"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:["Send message"]}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_send=function(t){return`espnow.send(id=${t.getFieldValue("ID")||""}, data=str(${Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`};const l=[["False","False"],["True","True"]];Blockly.Blocks.espnow_add_peer2={init:function(){this.jsonInit(this._init()),this.isEncrypt="False",this.appendDummyInput("op").appendField("encrypt").appendField(new Blockly.FieldDropdown(l,function(t){let e=this.getSourceBlock();t!==e.isEncrypt&&(e.updateOP(t),e.isEncrypt=t)}))},_init:function(){return{message0:Blockly.Msg.ESPNOW_ADD_PEER2,args0:[{type:"field_input",name:"MAC",text:"ff:ff:ff:ff:ff:ff",spellcheck:!1},{type:"input_value",name:"ID"},{type:"input_value",name:"channel"},{type:"field_dropdown",name:"ifidx",options:[["ESP_IF_WIFI_STA","0"],["ESP_IF_WIFI_AP","1"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ESPNOW_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isEncrypt",this.isEncrypt),t},domToMutation:function(t){if(this.isEncrypt=t.getAttribute("isEncrypt"),this.updateOP(this.isEncrypt),"True"===this.isEncrypt){let t=this.getInput("op").fieldRow[1];t.selectedOption_=l[1],t.value_=this.isEncrypt}},updateOP:function(t){if("True"===t){this.getInput("lmk")&&this.removeInput("lmk"),this.appendValueInput("lmk").setCheck("String").appendField("lmk");let t=this.getInput("lmk").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("text",{name:"TEXT"});this.getInput("lmk").connection.setShadowDom(t)}}else if(this.getInput("lmk")){let e=this.getInput("lmk").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("lmk")}},attrs:{keyword:["espnow"]}},Blockly.Python.espnow_add_peer2=function(t){var e=t.getFieldValue("MAC")||"b'\\xff\\xff\\xff\\xff\\xff\\xff'",n=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"1",o=Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=t.getFieldValue("ifidx"),i=Blockly.Python.valueToCode(t,"lmk",Blockly.Python.ORDER_FUNCTION_CALL)||"";return"True"===this.isEncrypt?`espnow.add_peer('${e}', id=${n}, channel=${o}, ifidx=${l}, encrypt=True, lmk=${i})\n`:`espnow.add_peer('${e}', id=${n}, channel=${o}, ifidx=${l}, encrypt=False)\n`}},function(t,e){Blockly.Blocks.http_request={init:function(){this.jsonInit(this._httpRequest())},_httpRequest:function(){return{message0:Blockly.Msg.HTTP_REQUEST,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"method",options:[["GET","GET"],["POST","POST"],["DELETE","DELETE"],["PUT","PUT"],["PATCH","PATCH"]]},{type:"input_dummy"},{type:"input_value",name:"url"},{type:"input_value",name:"headers"},{type:"input_value",name:"data"}],message1:Blockly.Msg.HTTP_SUCCESS,args1:[{type:"input_statement",name:"success"}],message2:Blockly.Msg.HTTP_Fail,args2:[{type:"input_statement",name:"fail"}],previousStatement:!0,nextStatement:!0,inputsInline:null,colour:"#7AC5CD"}},attrs:{keyword:["http"]}},Blockly.Python.http_request=function(t){var e=t.getFieldValue("method")||"",n=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_NONE)||"";n=n.replace(/\\\\/g,"\\");var o=Blockly.Python.valueToCode(t,"headers",Blockly.Python.ORDER_NONE)||"";o=o.replace(/\\\\/g,"\\");var l=Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_NONE)||"";l=l.replace(/\\\\/g,"\\");var i=Blockly.Python.statementToCode(t,"success",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.statementToCode(t,"fail",Blockly.Python.ORDER_FUNCTION_CALL)||"";let s=`urequests.request(method='${e}', url=${n}`;return"GET"!==e&&(s+=",json="+l),o&&(s+=", headers="+o),s+=")",a?`try:\n  req = ${s}\n${i}except:\n${a}`:`try:\n  req = ${s}\n${i}except:\n${a}  pass\n`},Blockly.Blocks.get_status_code={init:function(){this.jsonInit(this._getStatusCode())},_getStatusCode:function(){return{message0:Blockly.Msg.HTTP_GET_STATUS_CODE,args0:[{type:"input_dummy"}],output:null,colour:"#7AC5CD"}},attrs:{keyword:["http"]}},Blockly.Python.get_status_code=function(t){return["req.status_code",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_data={init:function(){this.jsonInit(this._getData())},_getData:function(){return{message0:Blockly.Msg.HTTP_GET_DATA,args0:[{type:"input_dummy"}],output:null,colour:"#7AC5CD"}},attrs:{keyword:["http"]}},Blockly.Python.get_data=function(t){return["req.text",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.modbus_master_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_MASTER_INIT,args0:[{type:"input_value",name:"BAUD"},{type:"input_value",name:"TX"},{type:"input_value",name:"RX"},{type:"field_dropdown",name:"UART",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"CRC",options:[["BIG","Modbus.CRC_BIG"],["LITTLE","Modbus.CRC_LITTLE"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_init=function(t){var e=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL),n=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL),o=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL);let l=`modbus = Modbus(${t.getFieldValue("UART")}, ${e}, ${n}, ${o}, ${t.getFieldValue("CRC")})\n`;if(Blockly.modbusMasterCb)for(var i=0;i<Blockly.modbusMasterCb.length;i++)l+=Blockly.modbusMasterCb[i].cb;return l},Blockly.Blocks.modbus_master_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_MASTER_SEND,args0:[{type:"input_value",name:"ADDR"},{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_send=function(t){return`modbus.send(${Blockly.Python.valueToCode(t,"ADDR",Blockly.Python.ORDER_FUNCTION_CALL)}, ${Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)}, ${Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)})\n`},Blockly.Blocks.modbus_master_any={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_MASTER_ANY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_any=function(t){return["modbus.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_read={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_read=function(t){return["modbus.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_recv_cb={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_MASTER_RECV_CB,args0:[{type:"input_value",name:"ADDR"},{type:"input_value",name:"FUNC"},{type:"input_value",name:"DATA"},{type:"input_statement",name:"CB"}],inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_recv_cb=function(t){var e=Blockly.Python.valueToCode(t,"ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"_",n=Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"_",o=Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"_",l=Blockly.Python.statementToCode(t,"CB",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.defineGlobal(),a=`\ndef modbus_recv_cb(x):\n  # global params\n  ${e}, ${n}, ${o} = x.read()\n${l}\n  pass\n`;i.length>0&&(a=a.replace(/# global params/g,"global "+i.join(",")));let s="modbus.set_recv_cb(modbus_recv_cb)\n",r=Blockly.modbusMasterCb.findIndex(function(e){return e.id===t.id});return-1===r?Blockly.modbusMasterCb.push({id:t.id,cb:s}):Blockly.modbusMasterCb[r].cb=s,a};const l=[["None","False"],["Custom","True"]];Blockly.Blocks.modbus_master_u_init={init:function(){this.jsonInit(this._getinit()),this.isCtrlPin="False",this.appendDummyInput("op").appendField("ctrl pin").appendField(new Blockly.FieldDropdown(l,function(t){let e=this.getSourceBlock();t!==e.isCtrlPin&&(e.updateOP(t),e.isCtrlPin=t)}))},_getinit:function(){return{message0:Blockly.Msg.MODBUS_MASTER_U_INIT,args0:[{type:"field_dropdown",name:"UARTid",options:[["1","1"],["2","2"]]},{type:"input_value",name:"TX"},{type:"input_value",name:"RX"},{type:"input_value",name:"BAUD"},{type:"field_dropdown",name:"data_bits",options:[["7","7"],["8","8"],["9","9"]]},{type:"field_dropdown",name:"stop_bits",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"parity",options:[["None","None"],["Even","0"],["Odd","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isCtrlPin",this.isCtrlPin),t},domToMutation:function(t){if(this.isCtrlPin=t.getAttribute("isCtrlPin"),this.updateOP(this.isCtrlPin),"True"===this.isCtrlPin){let t=this.getInput("op").fieldRow[1];t.selectedOption_=l[1],t.value_=this.isCtrlPin}},updateOP:function(t){if("True"===t){this.getInput("ctrl_pin")&&this.removeInput("ctrl_pin"),this.appendValueInput("ctrl_pin").setCheck("Number");let t=this.getInput("ctrl_pin").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("math_number",{name:"NUM"});this.getInput("ctrl_pin").connection.setShadowDom(t)}}else if(this.getInput("ctrl_pin")){let e=this.getInput("ctrl_pin").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("ctrl_pin")}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_init=function(t){var e=t.getFieldValue("UARTid"),n=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL),o=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL),l=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL),i=t.getFieldValue("data_bits"),a=t.getFieldValue("stop_bits"),s=t.getFieldValue("parity"),r=Blockly.Python.valueToCode(t,"ctrl_pin",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""===r&&(r="None"),`modbus = uModBusSerial(${e}, tx=${n}, rx=${o}, baudrate=${l}, data_bits=${i}, stop_bits=${a}, parity=${s}, ctrl_pin=${r})\n`},Blockly.Blocks.modbus_master_u_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_read_coils=function(t){return[`modbus.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_read_discrete_inputs=function(t){return[`modbus.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_read_holding_registers=function(t){return[`modbus.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_read_input_registers=function(t){return[`modbus.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_write_single_coil=function(t){return[`modbus.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_write_single_register=function(t){return[`modbus.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_write_multiple_coils=function(t){return[`modbus.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_master_u_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.MODBUS_MASTER_HUE}},attrs:{keyword:["modbus","master"]}},Blockly.Python.modbus_master_u_write_multiple_registers=function(t){return[`modbus.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.modbus_slave_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_INIT,args0:[{type:"input_value",name:"ADDR"},{type:"input_value",name:"BAUD"},{type:"input_value",name:"TX"},{type:"input_value",name:"RX"},{type:"field_dropdown",name:"UART",options:[["1","1"],["2","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_init=function(t){var e=Blockly.Python.valueToCode(t,"ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL)||"9600",o=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL)||"16",l=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"17";let i=`modbus_s = ModbusSlave(${e}, ${t.getFieldValue("UART")||"1"}, ${n}, ${o}, ${l})\n`;if(Blockly.modbusSlaveCb)for(var a=0;a<Blockly.modbusSlaveCb.length;a++)i+=Blockly.modbusSlaveCb[a].cb;return i},Blockly.Blocks.modbus_slave_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_INIT_FUNC,args0:[{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"},{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"METHOD",options:[["WRITE","ModbusSlave.METHOD_WRITE"],["READ","ModbusSlave.METHOD_READ"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_init_func=function(t){return`modbus_s.init_function(${Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"100"}, ${t.getFieldValue("METHOD")})\n`},Blockly.Blocks.modbus_slave_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_UPDATE_FUNC,args0:[{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_update_func=function(t){return`modbus_s.update_function(${Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"100"})\n`},Blockly.Blocks.modbus_slave_read={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_read=function(t){return["modbus_s.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_write_cb={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_WRITE_CB,args0:[{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"},{type:"input_value",name:"VALUE"},{type:"input_statement",name:"CB"}],inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_write_cb=function(t){var e=Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"_",n=Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"_",o=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"_",l=Blockly.Python.statementToCode(t,"CB",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.defineGlobal(),a=`\ndef modbus_s_write_cb(x):\n  # global params\n  ${e}, ${n}, ${o} = x.read()\n${l}\n  pass\n`;i.length>0&&(a=a.replace(/# global params/g,"global "+i.join(",")));let s="modbus_s.set_write_cb(modbus_s_write_cb)\n",r=Blockly.modbusSlaveCb.findIndex(function(e){return e.id===t.id});return-1===r?Blockly.modbusSlaveCb.push({id:t.id,cb:s}):Blockly.modbusSlaveCb[r].cb=s,a},Blockly.Blocks.modbus_slave_get_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_GET_FUNC,args0:[{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"}],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_get_func=function(t){return[`modbus_s.get_value(${Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_SEND,args0:[{type:"input_value",name:"ADDR"},{type:"input_value",name:"FUNC"},{type:"input_value",name:"REG_ADDR"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_send=function(t){return`modbus_s.send(${Blockly.Python.valueToCode(t,"ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"REG_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.modbus_slave_rtu_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT,args0:[{type:"field_dropdown",name:"UARTid",options:[["1","1"],["2","2"]]},{type:"input_value",name:"TX"},{type:"input_value",name:"RX"},{type:"input_value",name:"BAUD"},{type:"field_dropdown",name:"data_bits",options:[["7","7"],["8","8"],["9","9"]]},{type:"field_dropdown",name:"stop_bits",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"parity",options:[["None","None"],["Even","0"],["Odd","1"]]},{type:"input_value",name:"ADDR"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_init=function(t){var e=Blockly.Python.valueToCode(t,"ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL)||"9600",o=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL)||"17",l=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"16";return`modbus_s = ModbusSlave(${t.getFieldValue("UARTid")||"1"}, tx=${o}, rx=${l}, baudrate=${n}, data_bits=${t.getFieldValue("data_bits")}, stop_bits=${t.getFieldValue("stop_bits")}, parity=${t.getFieldValue("parity")}, slaveID=${e})\n`};let n=[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"],["WRITE_SINGLE_COIL","5"],["WRITE_SINGLE_REGISTER","6"],["WRITE_MULTIPLE_COILS","15"],["WRITE_MULTIPLE_REGISTERS","16"]];Blockly.Blocks.modbus_slave_rtu_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:n},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_init_func=function(t){return`modbus_s.function_init(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.modbus_slave_rtu_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_UPDATE_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"]]},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_update_func=function(t){return`modbus_s.update_process(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.modbus_slave_rtu_receive_adu={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_RECEIVE_ADU,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_receive_adu=function(t){return["modbus_s.receive_req_create_pdu()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_rtu_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_SEND,args0:[{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_send=function(t){return`modbus_s.create_slave_response(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.modbus_slave_rtu_get_function={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_FUNCTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_get_function=function(t){return["modbus_s.find_function",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_rtu_fun_status={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_FUN_STATUS,args0:[{type:"field_dropdown",name:"FUNC",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_fun_status=function(t){return[""+t.getFieldValue("FUNC"),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_rtu_get_address={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_ADDRESS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_get_address=function(t){return["modbus_s.find_address",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.modbus_slave_rtu_get_quantity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_QUANTITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_SLAVE_HUE,tool:[]}},attrs:{keyword:["modbus","slave"]}},Blockly.Python.modbus_slave_rtu_get_quantity=function(t){return["modbus_s.find_quantity",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[["v*","v*"]],e=1;e<32;e++)t.push(["v"+e,"v"+e]);return t}Blockly.Blocks.blynk_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_INIT,args0:[{type:"input_value",name:"NAME"},{type:"input_value",name:"TOKEN"},{type:"field_dropdown",name:"TYPE",options:[["BLE","blynk.BLE"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_init=function(t){let e=`blynk.init(${Blockly.Python.valueToCode(t,"NAME",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"TOKEN",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("TYPE")||"BLE"})\n`;if(Blockly.blynkCb)for(var n=0;n<Blockly.blynkCb.length;n++)e+=Blockly.blynkCb[n].cb;return e},Blockly.Blocks.blynk_virtual_write={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_VIRTUAL_WRITE,args0:[{type:"input_value",name:"NUMBER"},{type:"input_value",name:"DATA"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_virtual_write=function(t){return`blynk.virtual_write(${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||""}, ${(Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_NONE)||"").toString().replace(/\\\\/g,"\\")})\n`},Blockly.Blocks.blynk_notify={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_NOTIFY,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_notify=function(t){return`blynk.notify(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.blynk_tweet={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_TWEET,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_tweet=function(t){return`blynk.tweet(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.blynk_event_write={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_EVENT_WRITE,args0:[{type:"field_dropdown",name:"SELECT",options:n},{type:"input_value",name:"NUMBER"},{type:"input_value",name:"MSG"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_event_write=function(t){var e=t.getFieldValue("SELECT")||"*";let n=""+e;"v*"===e&&(n="all");var o=`\ndef blynk_write_${n}(*args):\n  # global params\n  ${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||"_"}, ${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_NONE)||"_"} = args[0], args[1]\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass\n`;let l=`blynk.handle_event('write ${e}', blynk_write_${n})\n`,i=Blockly.blynkCb.findIndex(function(e){return e.id===t.id});return-1===i?Blockly.blynkCb.push({id:t.id,cb:l}):Blockly.blynkCb[i].cb=l,o+"\n"},Blockly.Blocks.blynk_event_read={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_EVENT_READ,args0:[{type:"field_dropdown",name:"SELECT",options:n},{type:"input_value",name:"NUMBER"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_event_read=function(t){var e=t.getFieldValue("SELECT")||"*";let n=""+e;"v*"===e&&(n="all");var o=`\ndef blynk_read_${n}(*args):\n  # global params\n  ${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||"_"} = args[0]\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass\n`;let l=`blynk.handle_event('read ${e}', blynk_read_${n})\n`,i=Blockly.blynkCb.findIndex(function(e){return e.id===t.id});return-1===i?Blockly.blynkCb.push({id:t.id,cb:l}):Blockly.blynkCb[i].cb=l,o+"\n"},Blockly.Blocks.blynk_on_event={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLYNK_ON_EVENT,args0:[{type:"field_dropdown",name:"SELECT",options:[["connected","connected"],["disconnected","disconnected"]]},{type:"input_dummy"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.blynk_on_event=function(t){var e=t.getFieldValue("SELECT")||"*",n=`\ndef blynk_${e}():\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass\n`;let o=`blynk.handle_event('${e}', blynk_${e})\n`,l=Blockly.blynkCb.findIndex(function(e){return e.id===t.id});return-1===l?Blockly.blynkCb.push({id:t.id,cb:o}):Blockly.blynkCb[l].cb=o,n+"\n"}},function(t,e){Blockly.Blocks.ble_uart_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_INIT,args0:[{type:"input_value",name:"NAME"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_init=function(t){let e=`uart_ble = ble_uart.init(${Blockly.Python.valueToCode(t,"NAME",Blockly.Python.ORDER_NONE)||""})\n`;if(Blockly.bleUartCb)for(var n=0;n<Blockly.bleUartCb.length;n++)e+=Blockly.bleUartCb[n].cb;return e},Blockly.Blocks.ble_uart_write={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_WRITE,args0:[{type:"input_value",name:"DATA"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_write=function(t){return`uart_ble.write(${(Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_NONE)||"").toString().replace(/\\\\/g,"\\")})\n`},Blockly.Blocks.ble_uart_any={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_ANY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_any=function(t){return["uart_ble.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ble_uart_read={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_read=function(t){return["uart_ble.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ble_uart_read_number={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_READ_NUMBER,args0:[{type:"input_value",name:"NUMBER"}],output:null,inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_read_number=function(t){return[`uart_ble.read(${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ble_uart_on_recv={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.BLE_UART_ON_RECV,args0:[{type:"input_dummy"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.BLE_UART_HUE,tool:[]}},attrs:{keyword:["ble","bleuart"]}},Blockly.Python.ble_uart_on_recv=function(t){var e=`\ndef on_recv():\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass`;let n=Blockly.bleUartCb.findIndex(function(e){return e.id===t.id});return-1===n?Blockly.bleUartCb.push({id:t.id,cb:"uart_ble.irq(on_recv)\n"}):Blockly.bleUartCb[n].cb="uart_ble.irq(on_recv)\n",e+"\n"}},function(t,e){const n=Array.from({length:8},(t,e)=>["servo"+e,"servo"+e]);Blockly.Blocks.servo_init={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SERVO_INIT_ADVANCE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"PIN"},{type:"input_value",name:"FREQ"},{type:"input_value",name:"MIN_US"},{type:"input_value",name:"MAX_US"},{type:"input_value",name:"ANGLE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:[]}},attrs:{keyword:["pinservo"]}},Blockly.Python.servo_init=function(t){return(t.getFieldValue("VARNAME")||n[0])+` = Servo(${Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26"},${Blockly.Python.valueToCode(t,"FREQ",Blockly.Python.ORDER_FUNCTION_CALL)||"50"},${Blockly.Python.valueToCode(t,"MIN_US",Blockly.Python.ORDER_FUNCTION_CALL)||"500"},${Blockly.Python.valueToCode(t,"MAX_US",Blockly.Python.ORDER_FUNCTION_CALL)||"2500"},${Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"180"})\n`},Blockly.Blocks.servo_write_angle={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SERVO_WRITE_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"ANGLE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:[]}},attrs:{keyword:["pinservo"]}},Blockly.Python.servo_write_angle=function(t){return t.getFieldValue("VARNAME")+`.write_angle(${Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"90"})\n`},Blockly.Blocks.servo_write_us={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.SERVO_WRITE_US,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"TIME"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:[]}},attrs:{keyword:["pinservo"]}},Blockly.Python.servo_write_us=function(t){return(t.getFieldValue("VARNAME")||n[0])+`.write_us(${Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"1500"})\n`}},function(t,e){Blockly.Blocks.ntp_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_INIT,args0:[{type:"input_value",name:"host"},{type:"input_value",name:"timezone"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_init=function(t){return`ntp = ntptime.client(host=${Blockly.Python.valueToCode(t,"host",Blockly.Python.ORDER_FUNCTION_CALL)||"cn.pool.ntp.org"}, timezone=${Blockly.Python.valueToCode(t,"timezone",Blockly.Python.ORDER_FUNCTION_CALL)||"8"})\n`};var n=function(){var t=["cn.pool.ntp.org","jp.pool.ntp.org","sg.pool.ntp.org","tw.pool.ntp.org","hk.pool.ntp.org","us.pool.ntp.org","de.pool.ntp.org"],e=[];for(let n=0;n<t.length;n++)e[n]=[t[n],t[n]];return e}();Blockly.Blocks.ntp_init_dropdown={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_INIT_DROPDOWN,args0:[{type:"field_dropdown",name:"host",options:n},{type:"input_value",name:"timezone"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_init_dropdown=function(t){return`ntp = ntptime.client(host='${t.getFieldValue("host")||"cn.pool.ntp.org"}', timezone=${Blockly.Python.valueToCode(t,"timezone",Blockly.Python.ORDER_FUNCTION_CALL)||"8"})\n`},Blockly.Blocks.ntp_get_timestamp={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_TIMESTAMP,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_timestamp=function(t){return["ntp.getTimestamp()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_date_format={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_DATE_FORMAT,args0:[{type:"input_value",name:"format"}],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_date_format=function(t){return[`ntp.formatDate(${Blockly.Python.valueToCode(t,"format",Blockly.Python.ORDER_FUNCTION_CALL)||"-"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_time_format={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_TIME_FORMAT,args0:[{type:"input_value",name:"format"}],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_time_format=function(t){return[`ntp.formatTime(${Blockly.Python.valueToCode(t,"format",Blockly.Python.ORDER_FUNCTION_CALL)||"-"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_date_time_format={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_DATE_TIME_FORMAT,args0:[{type:"input_value",name:"date"},{type:"input_value",name:"time"}],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_date_time_format=function(t){return[`ntp.formatDatetime(${Blockly.Python.valueToCode(t,"date",Blockly.Python.ORDER_FUNCTION_CALL)||"-"}, ${Blockly.Python.valueToCode(t,"time",Blockly.Python.ORDER_FUNCTION_CALL)||":"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_year={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_YEAR,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_year=function(t){return["ntp.year()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_month={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_MONTH,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_month=function(t){return["ntp.month()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_day={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_DAY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_day=function(t){return["ntp.day()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_weekday={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_WEEKDAY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:["return: 0 ~ 6","0 Sunday","1 Monday","2 Tuesday","3 Wednesday","4 Thursday","5 Friday","6 Saturday"]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_weekday=function(t){return["ntp.weekday()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_hour={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_HOUR,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_hour=function(t){return["ntp.hour()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_minute={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_MINUTE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_minute=function(t){return["ntp.minute()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ntp_get_second={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NTP_GET_SECOND,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["ntp"]}},Blockly.Python.ntp_get_second=function(t){return["ntp.second()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){return{message0:Blockly.Msg.SOCKET_CLOSE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,tool:[]}}function o(){return{message0:Blockly.Msg.SOCKET_SEND_MSG,args0:[{type:"input_value",name:"msg",check:"String"}],previousStatement:null,nextStatement:null,inputsInline:!0,tool:[]}}function l(){return{message0:Blockly.Msg.SOCKET_UDP_SENDTO,args0:[{type:"input_value",name:"msg",check:"String"},{type:"input_value",name:"ip",check:"String"},{type:"input_value",name:"port",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!0,tool:[]}}function i(){return{message0:Blockly.Msg.SOCKET_RECV,args0:[{type:"input_value",name:"bufsize",check:"Number"}],output:null,tool:["Receive data from the socket. ","return: bytes"]}}function a(){return{message0:Blockly.Msg.SOCKET_READ,args0:[{type:"input_value",name:"size",check:"Number"}],output:null,tool:["Read data from the socket. ","return: bytes"]}}Blockly.Blocks.socket_udp_server_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SOCKET_UDP_SERVER_START,args0:[{type:"input_dummy"},{type:"input_value",name:"ip",check:"String"},{type:"input_value",name:"port",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_start=function(t){return`\nudpsocket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nudpsocket.bind((${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.socket_udp_server_sendmsg={init:function(){this.jsonInit(o()),this.setColour(Blockly.Msg.TEXTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_sendmsg=function(t){return`udpsocket.send(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.socket_udp_server_sendto={init:function(){this.jsonInit(l()),this.setColour(Blockly.Msg.TEXTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_sendto=function(t){return`udpsocket.sendto(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||""}, (${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.socket_udp_server_close={init:function(){this.jsonInit(n()),this.setColour(Blockly.Msg.TEXTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_close=function(t){return"udpsocket.close()\n"},Blockly.Blocks.socket_udp_server_recv={init:function(){this.jsonInit(i()),this.setColour(Blockly.Msg.TEXTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_recv=function(t){return[`udpsocket.recv(${Blockly.Python.valueToCode(t,"bufsize",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.socket_udp_server_read={init:function(){this.jsonInit(a()),this.setColour(Blockly.Msg.TEXTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_server_read=function(t){return[`udpsocket.read(${Blockly.Python.valueToCode(t,"size",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.socket_udp_client_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SOCKET_UDP_CLIENT_START,args0:[{type:"input_dummy"},{type:"input_value",name:"ip",check:"String"},{type:"input_value",name:"port",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_start=function(t){return`\nudpsocket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nudpsocket.connect((${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.socket_udp_client_sendmsg={init:function(){this.jsonInit(o()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_sendmsg=Blockly.Python.socket_udp_server_sendmsg,Blockly.Blocks.socket_udp_client_sendto={init:function(){this.jsonInit(l()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_sendto=Blockly.Python.socket_udp_server_sendto,Blockly.Blocks.socket_udp_client_close={init:function(){this.jsonInit(n()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_close=function(t){return"udpsocket.close()\n"},Blockly.Blocks.socket_udp_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SOCKET_WRITE,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["socket"]}},Blockly.Python.socket_udp_write=function(t){return`udpsocket.write(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.socket_udp_client_recv={init:function(){this.jsonInit(i()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_recv=Blockly.Python.socket_udp_server_recv,Blockly.Blocks.socket_udp_client_read={init:function(){this.jsonInit(a()),this.setColour(Blockly.Msg.LISTS_HUE)},attrs:{keyword:["socket","udp"]}},Blockly.Python.socket_udp_client_read=Blockly.Python.socket_udp_server_read},function(t,e){Blockly.Blocks.can_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_INIT,args0:[{type:"input_value",name:"bus"},{type:"field_dropdown",name:"extframe",options:[["True","True"],["False","False"]]},{type:"field_dropdown",name:"mode",options:[["normal","CAN.NORMAL"],["loopback","CAN.LOOPBACK"],["silent","CAN.SILENT"],["silent_loopback","CAN.SILENT_LOOPBACK"],["listen_only","CAN.LISTEN_ONLY"]]},{type:"field_dropdown",name:"baudrate",options:[["25K","CAN.BAUDRATE_25K"],["50K","CAN.BAUDRATE_50K"],["100K","CAN.BAUDRATE_100K"],["125K","CAN.BAUDRATE_125K"],["250K","CAN.BAUDRATE_250K"],["500K","CAN.BAUDRATE_500K"],["800K","CAN.BAUDRATE_800K"],["1000K","CAN.BAUDRATE_1000K"]]},{type:"input_value",name:"tx"},{type:"input_value",name:"rx"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_init=function(t){return`can = CAN(${Blockly.Python.valueToCode(t,"bus",Blockly.Python.ORDER_FUNCTION_CALL)||""}, extframe=${t.getFieldValue("extframe")}, mode=${t.getFieldValue("mode")}, baudrate=${t.getFieldValue("baudrate")}, tx_io=${Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, rx_io=${Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, auto_restart=False)\n`},Blockly.Blocks.can_set_filter={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_SET_FILTER,args0:[{type:"input_value",name:"bank"},{type:"field_dropdown",name:"mode",options:[["filter_raw_single","CAN.FILTER_RAW_SINGLE"],["filter_raw_dual","CAN.FILTER_RAW_DUAL"],["filter_address","CAN.FILTER_ADDRESS"]]},{type:"input_value",name:"list"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_set_filter=function(t){return`can.setfilter(${Blockly.Python.valueToCode(t,"bank",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")}, ${Blockly.Python.valueToCode(t,"list",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"})\n`},Blockly.Blocks.can_send={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_SEND,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"id"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_send=function(t){return`can.send(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.can_recv={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_RECV,args0:[],output:null,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_recv=function(t){return["can.recv()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.can_restart={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_RESTART,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_restart=function(t){return"can.restart()\n"},Blockly.Blocks.can_clearfilter={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_CLEARFILTER,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_clearfilter=function(t){return"can.clearfilter()\n"},Blockly.Blocks.can_clear_tx_queue={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_CLEAR_TX_QUEUE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_clear_tx_queue=function(t){return"can.clear_tx_queue()\n"},Blockly.Blocks.can_clear_rx_queue={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_CLEAR_RX_QUEUE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_clear_rx_queue=function(t){return"can.clear_rx_queue()\n"},Blockly.Blocks.can_state={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_STATE,args0:[],output:null,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_state=function(t){return["can.state()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.can_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_ANY,args0:[],output:null,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_any=function(t){return["can.any()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.can_deinit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CAN_DEINIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["can"]}},Blockly.Python.can_deinit=function(t){return"can.deinit()\n"}},function(t,e){Blockly.Blocks.lorabus_master_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_MASTER_INIT,args0:[{type:"input_dummy"},{type:"input_value",name:"cs"},{type:"input_value",name:"reset"},{type:"input_value",name:"irq"},{type:"field_dropdown",name:"freq",options:[["433000000","433000000"],["868000000","868000000"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_master_init=function(t){return`bus.lorabus_init(cs=${Blockly.Python.valueToCode(t,"cs",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, rst=${Blockly.Python.valueToCode(t,"reset",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, irq=${Blockly.Python.valueToCode(t,"irq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\nbus.config_bus(freq=${t.getFieldValue("freq")})\n`},Blockly.Blocks.lorabus_master_write_register={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_MASTER_WRITE_REGISTER,args0:[{type:"input_dummy"},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"start_addr"},{type:"input_value",name:"list"}],output:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_master_write_register=function(t){return[`bus.master_write_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"start_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"list",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lorabus_master_write_message={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_MASTER_WRITE_MESSAGE,args0:[{type:"input_dummy"},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"start_addr"},{type:"input_value",name:"msg"}],output:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_master_write_message=function(t){return[`bus.master_write_message(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"start_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lorabus_master_read_register={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_MASTER_READ_REGISTER,args0:[{type:"input_dummy"},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"start_addr"},{type:"input_value",name:"quantity"}],output:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_master_read_register=function(t){return[`bus.master_read_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"start_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lorabus_slave_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_SLAVE_INIT,args0:[{type:"input_dummy"},{type:"input_value",name:"cs"},{type:"input_value",name:"reset"},{type:"input_value",name:"irq"},{type:"field_dropdown",name:"freq",options:[["433000000","433000000"],["868000000","868000000"]]},{type:"input_dummy"},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"write_size"},{type:"input_value",name:"read_size"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_slave_init=function(t){return`bus.lorabus_init(cs=${Blockly.Python.valueToCode(t,"cs",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, rst=${Blockly.Python.valueToCode(t,"reset",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, irq=${Blockly.Python.valueToCode(t,"irq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\nbus.config_bus(freq=${t.getFieldValue("freq")})\nbus.slave_bus_init(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"write_size",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"read_size",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lorabus_slave_set_readfifo={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_SLAVE_SET_READFIFO,args0:[{type:"input_dummy"},{type:"input_value",name:"addr"},{type:"input_value",name:"list"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_slave_set_readfifo=function(t){return`bus.slave_set_readfifo(${Blockly.Python.valueToCode(t,"addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"list",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lorabus_slave_receive={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_SLAVE_RECEIVE,args0:[],output:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_slave_receive=function(t){return["bus.slave_receive_req_create_pdu()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lorabus_slave_get_writefifo={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.LORABUS_SLAVE_GET_WRITEFIFO,args0:[{type:"input_dummy"},{type:"input_value",name:"addr"},{type:"input_value",name:"quantity"}],output:null,inputsInline:!1,colour:Blockly.Msg.LORABUS_HUE,tool:[]}},attrs:{keyword:["lorabus"]}},Blockly.Python.lorabus_slave_get_writefifo=function(t){return[`bus.slave_get_writefifo(${Blockly.Python.valueToCode(t,"addr",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(19),l=n(20),i=n(21),a=n(22),s=n(23),r=n(24),c=n(25),u=n(26),_=n(27),d=n(28),h=n(29);Blockly.M5Toolbox.hardwaresToolbox=[{kind:"category",name:"%{BKY_SPEAKER}",colour:"%{BKY_SPEAKER_HUE}",custom:"SPEAKER",toolboxitemid:"speaker"},{kind:"category",name:"%{BKY_MICROPHONE}",colour:"%{BKY_PINS_HUE}",toolboxitemid:"microphone",contents:[{kind:"button",text:"%{BKY_MICROPHONE}","web-class":"blockly-title--style",callbackKey:"hardwareDocs",url:"microphone"},{kind:"block",blockxml:'<block type="microphone_recordfile">\n                <value name="seconds">\n                  <shadow type="math_number">\n                    <field name="NUM">0</field>\n                  </shadow>\n                </value>\n                <value name="filename">\n                  <shadow type="text">\n                    <field name="TEXT"></field>\n                  </shadow>\n                </value>\n              </block>'}]},{kind:"category",name:"%{BKY_RGB}",colour:"%{BKY_RGB_HUE}",custom:"RGB",toolboxitemid:"rgb"},{kind:"category",name:"%{BKY_IMU}",colour:"%{BKY_TIMER_HUE}",toolboxitemid:"imu",contents:o.ImuToolbox},{kind:"category",name:"RTC",colour:"%{BKY_HARDWARE_RTC}",custom:"RTC",toolboxitemid:"rtc"},{kind:"category",name:"LED",colour:"%{BKY_HARDWARE_LED}",custom:"LED",toolboxitemid:"led",contents:[]},{kind:"category",name:"%{BKY_AXP}",colour:"%{BKY_HARDWARE_AXP_HUE}",toolboxitemid:"axp",contents:l.AxpToolbox},{kind:"category",name:"%{BKY_POWER}",colour:"%{BKY_POWER_HUE}",custom:"POWER",toolboxitemid:"power"},{kind:"category",name:"%{BKY_TOUCH}",colour:"%{BKY_LCD_HUE}",custom:"TOUCH",toolboxitemid:"touch"},{kind:"category",name:"%{BKY_VIBRATION}",colour:"%{BKY_LOOPS_HUE}",toolboxitemid:"vibration",contents:[{kind:"button",text:"%{BKY_VIBRATION}","web-class":"blockly-title--style",callbackKey:"hardwareDocs",url:"vibration"},{kind:"block",type:"power_set_vibration_motor_on"},{kind:"block",type:"power_set_vibration_motor_off"},{kind:"block",blockxml:'<block type="power_set_vibration_motor_time">\n                <value name="time">\n                  <shadow type="math_number">\n                    <field name="NUM">0.2</field>\n                  </shadow>\n                </value>\n              </block>'},{kind:"block",blockxml:'<block type="power_set_vibration_intensity">\n                <value name="intensity">\n                  <shadow type="math_number">\n                    <field name="NUM">50</field>\n                  </shadow>\n                </value>\n              </block>'}]},{kind:"category",name:"%{BKY_BATTERY}",colour:"%{BKY_DHT_HUE}",toolboxitemid:"battery",contents:[{kind:"block",type:"battery_voltage"}]},{kind:"category",name:"%{BKY_SHT30}",colour:"%{BKY_MATH_HUE}",toolboxitemid:"sht30",contents:[{kind:"block",type:"sht30_get_humidity"},{kind:"block",type:"sht30_get_temperature"}]},{kind:"category",name:"%{BKY_WDT}",colour:"%{BKY_MODBUS_MASTER_HUE}",toolboxitemid:"wdt",contents:i.WdtToolbox},{kind:"category",name:"IR",colour:"%{BKY_PLUS_HUE}",toolboxitemid:"ir",contents:[{kind:"block",blockxml:'<block type="ir_send_addr">\n                    <value name="addr">\n                        <shadow type="math_number">\n                            <field name="NUM">0</field>\n                        </shadow>\n                    </value>\n                    <value name="data">\n                        <shadow type="math_number">\n                            <field name="NUM">0</field>\n                        </shadow>\n                    </value>\n                </block>'}]},{kind:"category",name:"SDCard",colour:"#ff1199",toolboxitemid:"sdcard",contents:a.SdcardToolbox},{kind:"category",name:"%{BKY_EASY}",colour:"%{BKY_PINS_HUE}",toolboxitemid:"easyio",contents:s.EasyToolbox},{kind:"category",name:"%{BKY_PIN}",colour:"%{BKY_GPIO_HUE}",toolboxitemid:"pin",contents:h.PinToolbox},{kind:"category",name:"%{BKY_PWM}",colour:"%{BKY_PWM_HUE}",toolboxitemid:"pwm",contents:r.PwmToolbox},{kind:"category",name:"%{BKY_ADC}",colour:"%{BKY_ADC_HUE}",toolboxitemid:"adc",contents:c.AdcToolbox},{kind:"category",name:"%{BKY_DAC}",colour:"%{BKY_DAC_HUE}",toolboxitemid:"dac",contents:u.DacToolbox},{kind:"category",name:"%{BKY_UART}",colour:"%{BKY_UART_HUE}",toolboxitemid:"uart",contents:_.UartToolbox},{kind:"category",name:"%{BKY_IIC}",colour:"%{BKY_IIC_HUE}",toolboxitemid:"iic",custom:"IIC"},{kind:"category",name:"Network",colour:"%{BKY_PINS_HUE}",toolboxitemid:"network",custom:"NETWORK"},{kind:"category",name:"%{BKY_EEPROM}",colour:"%{BKY_EEPROM_HUE}",toolboxitemid:"eeprom",contents:d.EepromToolbox},{kind:"category",name:"%{BKY_SYSTEM}",colour:"%{BKY_SYSTEM_HUE}",toolboxitemid:"system",contents:[{kind:"block",type:"system_reset"}]}]},function(t,e){Blockly.Blocks.wifi_connect={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:"wifi connect",args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PINS_HUE,tool:["Connect to Wi-Fi"]}},attrs:{keyword:["network","wifi"]}},Blockly.Python.wifi_connect=function(t){return""},Blockly.Blocks.wifi_connect_log={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:"wifi connect with log in lcd",args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PINS_HUE,tool:["Connect to Wi-Fi"]}},attrs:{keyword:["network","wifi"]}},Blockly.Python.wifi_connect_log=function(t){return""},Blockly.Blocks.wifi_reconnect={init:function(){this.jsonInit(this._pinsAnalogWrite())},_pinsAnalogWrite:function(){return{message0:Blockly.Msg.WIFI_RECONNECT,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["network","wifi"]}},Blockly.Python.wifi_reconnect=function(t){return""},Blockly.Blocks.Net_p2p={init:function(){this.jsonInit(this._pinsAnalogWrite())},_pinsAnalogWrite:function(){return{message0:Blockly.Msg.NET_P2P,args0:[{type:"input_dummy"},{type:"input_value",name:"apiKey"},{type:"input_dummy"},{type:"input_value",name:"Msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Send msg to other device","apikey: device apikey","msg: string","note: Send interval must be greater than 200ms"]}},attrs:{keyword:["network"]}},Blockly.Python.Net_p2p=function(t){return"sendP2PData("+(Blockly.Python.valueToCode(t,"apiKey",Blockly.Python.ORDER_FUNCTION_CALL)||"26")+", "+(Blockly.Python.valueToCode(t,"Msg",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.Net_getp2p={init:function(){this.jsonInit(this._GETy())},_GETy:function(){return{message0:Blockly.Msg.NET_GETP2P,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Get other device msg","return: msg"]}},attrs:{keyword:["network"]}},Blockly.Python.Net_getp2p=function(){return["getP2PData()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wifi_doConnect={init:function(){this.jsonInit(this._pinsAnalogWrite())},_pinsAnalogWrite:function(){return{message0:Blockly.Msg.WIFI_doConnect,args0:[{type:"input_dummy"},{type:"input_value",name:"apiKey"},{type:"input_dummy"},{type:"input_value",name:"Msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Send msg to other device","apikey: device apikey","msg: string","note: Send interval must be greater than 200ms"]}},attrs:{keyword:["network"]}},Blockly.Python.wifi_doConnect=function(t){return""},Blockly.Blocks.wifi_isconnect={init:function(){this.jsonInit(this._GETy())},_GETy:function(){return{message0:Blockly.Msg.WIFI_ISCONNECT,inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Get other device msg","return: msg"]}},attrs:{keyword:["network","wifi"]}},Blockly.Python.wifi_isconnect=function(){return["wifiCfg.wlan_sta.isconnected()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.smartconfig_set_type={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_SET_TYPE,args0:[{type:"field_dropdown",name:"type",options:[["ESPTOUCH","smartconfig.ESPTOUCH"],["AIRKISS","smartconfig.AIRKISS"],["ESPTOUCH_AIRKISS","smartconfig.ESPTOUCH_AIRKISS"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_set_type=function(t){return`smartconfig.set_type(${t.getFieldValue("type")||""})\n`},Blockly.Blocks.smartconfig_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_START,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_start=function(t){return"smartconfig.start()\n"},Blockly.Blocks.smartconfig_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_stop=function(t){return"smartconfig.stop()\n"},Blockly.Blocks.smartconfig_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_GET_STATUS,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_get_status=function(){return["smartconfig.status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.smartconfig_get_ssid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_GET_SSID,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_get_ssid=function(){return["smartconfig.get_ssid()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.smartconfig_get_password={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_GET_PASSWORD,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_get_password=function(){return["smartconfig.get_password()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.smartconfig_get_phoneip={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_GET_PHONEIP,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_get_phoneip=function(){return["smartconfig.get_phoneip()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.smartconfig_state_define={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SMARTCONFIG_STATE_DEFINE,args0:[{type:"field_dropdown",name:"define",options:[["EVENT_SCAN_DONE","smartconfig.EVENT_SCAN_DONE"],["EVENT_FOUND_CHANNEL","smartconfig.EVENT_FOUND_CHANNEL"],["EVENT_GOT_SSID_PSWD","smartconfig.EVENT_GOT_SSID_PSWD"],["EVENT_SEND_ACK_DONE","smartconfig.EVENT_SEND_ACK_DONE"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["smartconfig","network"]}},Blockly.Python.smartconfig_state_define=function(t){return[""+(t.getFieldValue("define")||""),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_create_station={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_CREATE_STATION,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_create_station=function(t){return"wlan = network.WLAN(network.STA_IF)\n"},Blockly.Blocks.wlan_active={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_ACTIVE,args0:[{type:"field_dropdown",name:"active",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_active=function(t){return`wlan.active(${t.getFieldValue("active")||""})\n`},Blockly.Blocks.wlan_scan={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_SCAN,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_scan=function(){return["wlan.scan()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_isconnected={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_ISCONNECTED,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_isconnected=function(){return["wlan.isconnected()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_CONNECT,args0:[{type:"input_value",name:"essid"},{type:"input_value",name:"password"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_connect=function(t){return`wlan.connect(${Blockly.Python.valueToCode(t,"essid",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"password",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.wlan_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_CONFIG,args0:[{type:"field_dropdown",name:"type",options:[["mac","mac"],["essid","essid"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_config=function(t){return[`wlan.config('${t.getFieldValue("type")||""}')`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_ifconfig={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_IFCONFIG,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_ifconfig=function(){return["wlan.ifconfig()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_STATUS,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_status=function(){return["wlan.status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.wlan_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_disconnect=function(){return"wlan.disconnect()\n"},Blockly.Blocks.wlan_state_define={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WLAN_STATE_DEFINE,args0:[{type:"field_dropdown",name:"define",options:[["STAT_IDLE","1000"],["STAT_CONNECTING","1001"],["STAT_GOT_IP","1010"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["wlan","network"]}},Blockly.Python.wlan_state_define=function(t){return[""+(t.getFieldValue("define")||""),Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.eeprom_write_str={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EEPROM_WRITE_STR,args0:[{type:"input_value",name:"KEY"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:[]}},attrs:{keyword:["eeprom"]}},Blockly.Python.eeprom_write_str=function(t){return`nvs.write(str(${Blockly.Python.valueToCode(t,"KEY",Blockly.Python.ORDER_FUNCTION_CALL)||""}), ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.eeprom_read_str={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EEPROM_READ_STR,args0:[{type:"input_value",name:"KEY"}],output:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:[]}},attrs:{keyword:["eeprom"]}},Blockly.Python.eeprom_read_str=function(t){return[`nvs.read_str(${Blockly.Python.valueToCode(t,"KEY",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.eeprom_read_int={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EEPROM_READ_INT,args0:[{type:"input_value",name:"KEY"}],output:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:[]}},attrs:{keyword:["eeprom"]}},Blockly.Python.eeprom_read_int=function(t){return[`nvs.read_int(${Blockly.Python.valueToCode(t,"KEY",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.axp_get_charge_state={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_CHARGE_STATE,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_charge_state=function(t){return["axp.getChargeState()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_bat_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_VOLTAGE,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_bat_voltage=function(t){return["axp.getBatVoltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_bat_voltage_percent={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_VOLTAGE_PERCENT,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_bat_voltage_percent=function(t){return["map_value((axp.getBatVoltage()), 3.7, 4.1, 0, 100)",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_bat_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_CURRENT,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_bat_current=function(t){return["axp.getBatCurrent()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_vin_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_VIN_VOLTAGE,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_vin_voltage=function(t){return["axp.getVinVoltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_vin_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_VIN_CURRENT,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_vin_current=function(t){return["axp.getVinCurrent()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_vbus_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_VBUS_VOLTAGE,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_vbus_voltage=function(t){return["axp.getVBusVoltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_vbus_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_VBUS_CURRENT,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_vbus_current=function(t){return["axp.getVBusCurrent()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_get_axp192_temperature={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_TEMP_IN_AXP192,output:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_get_axp192_temperature=function(t){return["axp.getTempInAXP192()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.axp_power_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_POWER_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_power_off=function(t){return"axp.powerOff()\n"},Blockly.Blocks.axp_set_charge_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_SET_CHARGE_CURRENT,args0:[{type:"field_dropdown",name:"CURRENT",options:[["100mA","CURRENT_100MA"],["190mA","CURRENT_190MA"],["280mA","CURRENT_280MA"],["360mA","CURRENT_360MA"],["450mA","CURRENT_450MA"],["550mA","CURRENT_550MA"],["630mA","CURRENT_630MA"],["700mA","CURRENT_700MA"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_set_charge_current=function(t){return`axp.setChargeCurrent(axp.${t.getFieldValue("CURRENT")||"CURRENT_100MA"})\n`},Blockly.Blocks.axp_set_ldo2_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_SET_LD02_VOLTAGE,args0:[{type:"input_value",name:"ANGLEX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_AXP_HUE,tool:["Value must be 0 ~ 100"]}},attrs:{keyword:["power","axp"]}},Blockly.Python.axp_set_ldo2_voltage=function(t){return`axp.setLcdBrightness(${Blockly.Python.valueToCode(t,"ANGLEX",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.setlcdvol=Blockly.Blocks.axp_set_ldo2_voltage,Blockly.Python.setlcdvol=Blockly.Python.axp_set_ldo2_voltage,Blockly.Blocks.ischarge=Blockly.Blocks.axp_get_charge_state,Blockly.Python.ischarge=Blockly.Python.axp_get_charge_state,Blockly.Blocks.axp_getBatVolt=Blockly.Blocks.axp_get_bat_voltage,Blockly.Python.axp_getBatVolt=Blockly.Python.axp_get_bat_voltage,Blockly.Blocks.axp_getChargeI=Blockly.Blocks.axp_get_bat_current,Blockly.Python.axp_getChargeI=Blockly.Python.axp_get_bat_current,Blockly.Blocks.axp_getDischargeI=Blockly.Blocks.axp_get_bat_current,Blockly.Python.axp_getDischargeI=Blockly.Python.axp_get_bat_current},function(t,e){Blockly.Blocks.IMU_GET_X={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_X,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_X=function(){return Blockly.addModule("imu"),["imu0.ypr[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Y={init:function(){this.jsonInit(this._imuGETy())},_imuGETy:function(){return{message0:Blockly.Msg.IMU_GET_Y,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_Y=function(){return Blockly.addModule("imu"),["imu0.ypr[2]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Z={init:function(){this.jsonInit(this._imuGETz())},_imuGETz:function(){return{message0:Blockly.Msg.IMU_GET_Z,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_Z=function(){return Blockly.addModule("imu"),["imu0.ypr[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_IS_LEVEL={init:function(){this.jsonInit(this._imulevel())},_imulevel:function(){return{message0:Blockly.Msg.IMU_IS_LEVEL,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_IS_LEVEL=function(t){return Blockly.addModule("imu"),["imu.ypr[1] >= 0 and imu.ypr[1]<= 10",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_STAND={init:function(){this.jsonInit(this._imulevel())},_imulevel:function(){return{message0:Blockly.Msg.IMU_IS_STAND,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_IS_STAND=function(t){return Blockly.addModule("imu"),["imu.ypr[1] >= 80 and imu.ypr[1]<= 100",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_LEFT_TILT={init:function(){this.jsonInit(this._imulevel())},_imulevel:function(){return{message0:Blockly.Msg.IMU_IS_LEFT_TILT,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_IS_LEFT_TILT=function(t){return Blockly.addModule("imu"),["imu.ypr[2] <= -60",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_RIGHT_TILT={init:function(){this.jsonInit(this._imulevel())},_imulevel:function(){return{message0:Blockly.Msg.IMU_IS_RIGHT_TILT,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_IS_RIGHT_TILT=function(t){return Blockly.addModule("imu"),["imu.ypr[2] >= 60",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_OTHER_SIDE={init:function(){this.jsonInit(this._imulevel())},_imulevel:function(){return{message0:Blockly.Msg.IMU_IS_OTHER_SIDE,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_IS_OTHER_SIDE=function(t){return Blockly.addModule("imu"),["(imu.ypr[1] >= 160 and imu.ypr[1] <= 180)  or (imu.ypr[1] >= -180 and imu.ypr[1] <= -160)",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_GET_ACC_X={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_ACC_X,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_ACC_X=function(){return Blockly.addModule("imu"),["imu0.acceleration[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_ACC_Y={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_ACC_Y,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_ACC_Y=function(){return Blockly.addModule("imu"),["imu0.acceleration[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_ACC_Z={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_ACC_Z,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_ACC_Z=function(){return Blockly.addModule("imu"),["imu0.acceleration[2]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Gyr_X={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_GYR_X,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_Gyr_X=function(){return Blockly.addModule("imu"),["imu0.gyro[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Gyr_Y={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_GYR_Y,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_Gyr_Y=function(){return Blockly.addModule("imu"),["imu0.gyro[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Gyr_Z={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.IMU_GET_GYR_Z,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.IMU_GET_Gyr_Z=function(){return Blockly.addModule("imu"),["imu0.gyro[2]",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.IMU_GET_X_tow={init:function(){this.jsonInit(this._imuGETx_tow())},_imuGETx_tow:function(){return{message0:Blockly.Msg.IMU_GET_X_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_X_tow=function(){return Blockly.addModule("imu"),["imu.ypr[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Y_tow={init:function(){this.jsonInit(this._imuGETy_tow())},_imuGETy_tow:function(){return{message0:Blockly.Msg.IMU_GET_Y_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_Y_tow=function(){return Blockly.addModule("imu"),["imu.ypr[2]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_Z_tow={init:function(){this.jsonInit(this._imuGETz_tow())},_imuGETz_tow:function(){return{message0:Blockly.Msg.IMU_GET_Z_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_Z_tow=function(){return Blockly.addModule("imu"),["imu.ypr[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_IS_LEVEL_tow={init:function(){this.jsonInit(this._imulevel_tow())},_imulevel_tow:function(){return{message0:Blockly.Msg.IMU_IS_LEVEL_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_IS_LEVEL_tow=function(t){return Blockly.addModule("imu"),["imu.ypr[1] >= 0 and imu.ypr[1]<= 10",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_STAND_tow={init:function(){this.jsonInit(this._imulevel_tow())},_imulevel_tow:function(){return{message0:Blockly.Msg.IMU_IS_STAND_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_IS_STAND_tow=function(t){return Blockly.addModule("imu"),["imu.ypr[1] >= 80 and imu.ypr[1]<= 100",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_LEFT_TILT_tow={init:function(){this.jsonInit(this._imulevel_tow())},_imulevel_tow:function(){return{message0:Blockly.Msg.IMU_IS_LEFT_TILT_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_IS_LEFT_TILT_tow=function(t){return Blockly.addModule("imu"),["imu.ypr[2] <= -60",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_RIGHT_TILT_tow={init:function(){this.jsonInit(this._imulevel_tow())},_imulevel_tow:function(){return{message0:Blockly.Msg.IMU_IS_RIGHT_TILT_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_IS_RIGHT_TILT_tow=function(t){return Blockly.addModule("imu"),["imu.ypr[2] >= 60",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_IS_OTHER_SIDE_tow={init:function(){this.jsonInit(this._imulevel_tow())},_imulevel_tow:function(){return{message0:Blockly.Msg.IMU_IS_OTHER_SIDE_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_IS_OTHER_SIDE_tow=function(t){return Blockly.addModule("imu"),["(imu.ypr[1] >= 160 and imu.ypr[1] <= 180)  or (imu.ypr[1] >= -180 and imu.ypr[1] <= -160)",Blockly.Python.ORDER_NONE]},Blockly.Blocks.IMU_GET_ACC_X_tow={init:function(){this.jsonInit(this._imuGETx_tow())},_imuGETx_tow:function(){return{message0:Blockly.Msg.IMU_GET_ACC_X_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_ACC_X_tow=function(){return Blockly.addModule("imu"),["imu.acceleration[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_ACC_Y_tow={init:function(){this.jsonInit(this._imuGETx_tow())},_imuGETx_tow:function(){return{message0:Blockly.Msg.IMU_GET_ACC_Y_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_ACC_Y_tow=function(){return Blockly.addModule("imu"),["imu.acceleration[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.IMU_GET_ACC_Z_tow={init:function(){this.jsonInit(this._imuGETx_tow())},_imuGETx_tow:function(){return{message0:Blockly.Msg.IMU_GET_ACC_Z_tow,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_IMU_TOW}}},Blockly.Python.IMU_GET_ACC_Z_tow=function(){return Blockly.addModule("imu"),["imu.acceleration[2]",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.m5ledoff={init:function(){this.jsonInit(this._buttonPressedHandler_OFF())},_buttonPressedHandler_OFF:function(){return{message0:"LED OFF",previousStatement:null,nextStatement:null,colour:Blockly.Msg.HARDWARE_LED}},attrs:{keyword:["led"]}},Blockly.Python.m5ledoff=function(t){return"M5Led.off()\n"},Blockly.Blocks.m5ledon={init:function(){this.jsonInit(this._buttonPressedHandler_ON())},_buttonPressedHandler_ON:function(){return{message0:"LED ON",previousStatement:null,nextStatement:null,colour:Blockly.Msg.HARDWARE_LED}},attrs:{keyword:["led"]}},Blockly.Python.m5ledon=function(t){return"M5Led.on()\n"},Blockly.Blocks.m5led_get_value={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.M5_LED_VALUE,args0:[{type:"input_value",name:"value"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_LED,tool:["value: 0 / 1"]}},attrs:{keyword:["led"]}},Blockly.Python.m5led_get_value=function(t){return[`M5Led.value(${t.getFieldValue("value")||0})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.rgb_init={init:function(){this.jsonInit(this._rgbInit())},_rgbInit:function(){return{message0:Blockly.Msg.RGB_INIT,args0:[{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_init=function(t){return Blockly.addModule("rgb"),Blockly.addDeclare("rgb"),"global rgb\nrgb = RGB_Bar()\n"},Blockly.Blocks.rgb_set_all={init:function(){this.jsonInit(this._rgbSetAll())},_rgbSetAll:function(){return{message0:Blockly.Msg.RGB_SET_ALL,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set all rgb color"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_all=function(t){return Blockly.addModule("rgb"),"rgb.setColorAll("+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.rgb_set_all_rgb={init:function(){this.jsonInit(this._rgbSetAllRgb())},_rgbSetAllRgb:function(){return{message0:Blockly.Msg.RGB_SET_ALL_RGB,args0:[{type:"input_dummy"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set all rgb color","R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_all_rgb=function(t){Blockly.addModule("rgb");var e=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",n=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(e))||isNaN(parseInt(n))||isNaN(parseInt(o)))return`rgb.setColorAll((${e} << 16) | (${n} << 8) | ${o})\n`;var l=Math.floor(Math.abs(parseInt(e))%256).toString(16),i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16);return l.length<2&&(l="0"+l),i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),"rgb.setColorAll(0x"+l+i+a+")\n"},Blockly.Blocks.rgb_set_dir={init:function(){this.jsonInit(this._rgbSetDir())},_rgbSetDir:function(){return{message0:Blockly.Msg.RGB_SET_DIR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DIR",options:[[Blockly.Msg._OPTION_LEFT,"left"],[Blockly.Msg._OPTION_RIGHT,"right"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set side rgb color",'side: "left" or "right"']}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_dir=function(t){Blockly.addModule("rgb");var e=t.getFieldValue("DIR")||"left",n=t.getFieldValue("COLOR")||"#ff0000";return"left"!==e?"rgb.setColorFrom(1 , 5 ,"+n.replace("#","0x")+")\n":"rgb.setColorFrom(6 , 10 ,"+n.replace("#","0x")+")\n"},Blockly.Blocks.rgb_set_dir_rgb={init:function(){this.jsonInit(this._rgbSetDirRgb())},_rgbSetDirRgb:function(){return{message0:Blockly.Msg.RGB_SET_DIR_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DIR",options:[[Blockly.Msg._OPTION_LEFT,"left"],[Blockly.Msg._OPTION_RIGHT,"right"]]},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set side rgb color",'side: "left" or "right"',"R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_dir_rgb=function(t){Blockly.addModule("rgb");var e=t.getFieldValue("DIR")||"left",n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return"left"!==e?`rgb.setColorFrom(1 , 5 ,(${n} << 16) | (${o} << 8) | ${l})\n`:`rgb.setColorFrom(6 , 10 ,(${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),"left"!==e?"rgb.setColorFrom(1 , 5 ,0x"+i+a+s+")\n":"rgb.setColorFrom(6 , 10 ,0x"+i+a+s+")\n"},Blockly.Blocks.rgb_set={init:function(){this.jsonInit(this._rgbSet())},_rgbSet:function(){return{message0:Blockly.Msg.RGB_SET,args0:[{type:"input_dummy"},{type:"input_value",name:"INDEX"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set single rgb color","index: 1 ~ 10"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set=function(t){return Blockly.addModule("rgb"),"rgb.setColor("+(Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_NONE)||"1")+", "+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.rgb_set_rgb={init:function(){this.jsonInit(this._rgbSetRgb())},_rgbSetRgb:function(){return{message0:Blockly.Msg.RGB_SET_RGB,args0:[{type:"input_dummy"},{type:"input_value",name:"INDEX"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set single rgb color","index: 1 ~ 10","R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_rgb=function(t){Blockly.addModule("rgb");var e=Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_NONE)||"1",n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return`rgb.setColor(${e},(${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),"rgb.setColor("+e+", 0x"+i+a+s+")\n"},Blockly.Blocks.rgb_set_brightness={init:function(){this.jsonInit(this._rgbSetBrightness())},_rgbSetBrightness:function(){return{message0:Blockly.Msg.RGB_SET_BRIGHTNESS,args0:[{type:"input_dummy"},{type:"input_value",name:"BRIGHTNESS"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set rgb brightness","brightness: 0 ~ 100"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_brightness=function(t){return Blockly.addModule("rgb"),"rgb.setBrightness("+(Blockly.Python.valueToCode(t,"BRIGHTNESS",Blockly.Python.ORDER_FUNCTION_CALL)||"10")+")\n"},Blockly.Blocks.rgb_set_show_lock={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.RGB_SET_SHOW_LOCK,args0:[{type:"field_dropdown",name:"LOCK",options:[["true","True"],["false","False"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE,tool:[]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_show_lock=function(t){return`rgb.setShowLock(${t.getFieldValue("LOCK")||"True"})\n`},Blockly.Blocks.rgb_set_color_from_rgb={init:function(){this.jsonInit(this._rgbmulyisetfromrgb())},_rgbmulyisetfromrgb:function(){return{message0:Blockly.Msg.RGB_SET_COLOR_FROM_RGB,args0:[{type:"input_dummy"},{type:"input_value",name:"FROM"},{type:"input_value",name:"TO"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set multi neopixel color","input-1: 1 ~ neopixel number","input-2: input-1 ~ neopixel number","R: 0 ~ 255","G: 0 ~ 255","B: 0 ~ 255"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_color_from_rgb=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=Blockly.Python.valueToCode(t,"TO",Blockly.Python.ORDER_FUNCTION_CALL)||"5",o=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(o))||isNaN(parseInt(l))||isNaN(parseInt(i)))return varname+`.setColorFrom(${e},${n},(${o} << 16) | (${l} << 8) | ${i})\n`;var a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16);return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),"rgb.setColorFrom("+e+", "+n+", 0x"+a+s+r+")\n"},Blockly.Blocks.rgb_set_led_matrix={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.RGB_SET_LED_MATRIX,args0:[{type:"field_colour_picker",name:"COLOUR"}],message1:"%1",args1:[{type:"field_colour_matrix",name:"MATRIX"}],inputsInline:!1,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE,tool:[]}},onchange:function(t){"COLOUR"===t.name&&this.inputList[1].fieldRow[0].setFillColor(t.newValue)},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_set_led_matrix=function(t){return`rgb.set_screen([${t.getFieldValue("MATRIX")||""}])\n`}},function(t,e){function n(){var t=["cn.pool.ntp.org","jp.pool.ntp.org","sg.pool.ntp.org","tw.pool.ntp.org","hk.pool.ntp.org","us.pool.ntp.org","de.pool.ntp.org"],e=[];for(let n=0;n<t.length;n++)e[n]=[t[n],t[n]];return e}Blockly.Blocks.rtc_set_client={init:function(){this.jsonInit(this._pinsSetMap())},_pinsSetMap:function(){return{type:"block_type",message0:Blockly.Msg.RTC_SET_CLIENT,args0:[{type:"input_value",name:"YEAR"},{type:"input_value",name:"MONTH"},{type:"input_value",name:"DAY"},{type:"input_value",name:"HOUR"},{type:"input_value",name:"MINUTE"},{type:"input_value",name:"SECOND"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.HARDWARE_RTC,tool:["year: 0 ~ 99","month: 1 ~ 12","date: 1 ~ 31","hour: 0 ~ 23","minute: 0 ~59","second: 0 ~59"]}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client=function(t){return"rtc.setTime("+(Blockly.Python.valueToCode(t,"YEAR",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"MONTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"DAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"HOUR",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"MINUTE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"SECOND",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.rtc_set_client_year={init:function(){this.jsonInit(this._GETy())},_GETy:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_YEAR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_year=function(){let t=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(t)>-1?["rtc.datetime()[0]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_month={init:function(){this.jsonInit(this._GETmt())},_GETmt:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_MONTH,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_month=function(){let t=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(t)>-1?["rtc.datetime()[1]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_day={init:function(){this.jsonInit(this._GETd())},_GETd:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_DAY,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_day=function(){let t=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(t)>-1?["rtc.datetime()[2]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[2]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_hous={init:function(){this.jsonInit(this._GETh())},_GETh:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_HOUR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_hous=function(t){let e=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(e)>-1?["rtc.datetime()[4]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[3]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_minute={init:function(){this.jsonInit(this._GETm())},_GETm:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_MINUTE,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_minute=function(t){let e=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(e)>-1?["rtc.datetime()[5]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[4]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_second={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_SECOUD,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_second=function(t){let e=localStorage.getItem("_type");return["core2","coreInk","paper","tough"].indexOf(e)>-1?["rtc.datetime()[6]",Blockly.Python.ORDER_CONDITIONAL]:["rtc.now()[5]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_set_client_time={init:function(){this.jsonInit(this._GETt())},_GETt:function(){return{message0:Blockly.Msg.RTC_SET_CLIENT_TIME,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_set_client_time=function(t){return["rtc.now()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_datetime={init:function(){this.jsonInit(this._pinsSetMap())},_pinsSetMap:function(){return{type:"block_type",message0:Blockly.Msg.RTC_DATETIME,args0:[{type:"input_value",name:"YEAR"},{type:"input_value",name:"MONTH"},{type:"input_value",name:"DAY"},{type:"input_value",name:"WEEK"},{type:"input_value",name:"HOUR"},{type:"input_value",name:"MINUTE"},{type:"input_value",name:"SECOND"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.HARDWARE_RTC,tool:["year: 0 ~ 99","month: 1 ~ 12","date: 1 ~ 31","weekday: 0 ~ 6","0 Monday","1 Tuesday","2 Wednesday","3 Thursday","4 Friday","5 Saturday","6 Sunday","hour: 0 ~ 23","minute: 0 ~ 59","second: 0 ~ 59"]}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_datetime=function(t){var e=Blockly.Python.valueToCode(t,"YEAR",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"MONTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"DAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"WEEK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"HOUR",Blockly.Python.ORDER_FUNCTION_CALL)||"0",a=Blockly.Python.valueToCode(t,"MINUTE",Blockly.Python.ORDER_FUNCTION_CALL)||"0",s=Blockly.Python.valueToCode(t,"SECOND",Blockly.Python.ORDER_FUNCTION_CALL)||"0";let r=localStorage.getItem("_type");return"core2"===r?`rtc.datetime((${e}, ${n}, ${o}, ${l}, ${i}, ${a}, ${s}, 0))\n`:"coreInk"===r||"paper"===r?`rtc.set_datetime((${e}, ${n}, ${o}, ${l}, ${i}, ${a}, ${s}))\n`:""},Blockly.Blocks.rtc_settime={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RTC_SETTIME,args0:[{type:"field_dropdown",name:"host",options:n},{type:"input_value",name:"timezone"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_settime=function(t){return`rtc.settime('ntp', host='${t.getFieldValue("host")||"cn.pool.ntp.org"}', tzone=${Blockly.Python.valueToCode(t,"timezone",Blockly.Python.ORDER_FUNCTION_CALL)||"8"})\n`},Blockly.Blocks.rtc_get_time={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.RTC_GET_TIME,inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC,tool:["return: (year, month, day, week, hour, minute, second, 0)"]}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_get_time=function(t){return["rtc.datetime()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_get_week={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.RTC_GET_WEEK,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC,tool:["return weekday: 0 ~ 6","0 Monday","1 Tuesday","2 Wednesday","3 Thursday","4 Friday","5 Saturday","6 Sunday"]}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_get_week=function(t){return["rtc.datetime()[3]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rtc_get_printtime={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.RTC_GET_PRINTTIME,inputsInline:!0,output:null,colour:Blockly.Msg.HARDWARE_RTC}},attrs:{keyword:["rtc"]}},Blockly.Python.rtc_get_printtime=function(t){return["rtc.printRTCtime()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.speaker_tone={init:function(){this.jsonInit(this._speakerTone())},_speakerTone:function(){return{message0:Blockly.Msg.SPEAKER_TONE,args0:[{type:"input_dummy"},{type:"input_value",name:"FREQ"},{type:"input_value",name:"TIMEOUT"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_tone=function(t){return"speaker.tone("+(Blockly.Python.valueToCode(t,"FREQ",Blockly.Python.ORDER_FUNCTION_CALL)||"1600")+", "+(Blockly.Python.valueToCode(t,"TIMEOUT",Blockly.Python.ORDER_FUNCTION_CALL)||"200")+")\n"},Blockly.Blocks.speaker_vol={init:function(){this.jsonInit(this._speakerVol())},_speakerVol:function(){return{message0:Blockly.Msg.SPEAKER_VOL,args0:[{type:"input_value",name:"VOLUME"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_vol=function(t){return"speaker.setVolume("+(Blockly.Python.valueToCode(t,"VOLUME",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+")\n"},Blockly.Blocks.speaker_sing={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.SPEAKER_SING,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"TONE",options:[["Low A","220"],["Low B","247"],["Low C","131"],["Low D","147"],["Low E","165"],["Low F","175"],["Low G","196"],["Middle A","448"],["Middle B","494"],["Middle C","262"],["Middle D","294"],["Middle E","330"],["Middle F","349"],["Middle G","392"],["High A","889"],["High B","988"],["High C","523"],["High D","587"],["High E","659"],["High F","698"],["High G","784"],["Low A#","233"],["Low C#","139"],["Low D#","156"],["Low F#","185"],["Low G#","208"],["Middle A#","466"],["Middle C#","277"],["Middle D#","311"],["Middle F#","370"],["Middle G#","415"],["High A#","932"],["High C#","554"],["High D#","622"],["High F#","740"],["High  G#","831"]]},{type:"field_dropdown",name:"BEAT",options:[["1","1"],["1/2","1/2"],["1/4","1/4"],["2","2"],["4","4"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_sing=function(t){var e=t.getFieldValue("TONE")||"220",n=t.getFieldValue("BEAT")||"1";let o=localStorage.getItem("_type");return["core2","tough"].indexOf(o)>-1?"speaker.playTone("+e+", "+n+")\n":"speaker.sing("+e+", "+n+")\n"},Blockly.Blocks.speaker_play_wav={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SPEAKER_PLAY_WAV,args0:[{type:"input_value",name:"file"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_play_wav=function(t){return`speaker.playWAV(${Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.speaker_play_wav_sdcard={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SPEAKER_PLAY_WAV_SDCARD,args0:[{type:"input_value",name:"file"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_play_wav_sdcard=function(t){return`speaker.playWAV(${Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.speaker_play_wav_dropdown={init:function(){this.jsonInit(this._init()),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,20,20,"*",this.addFile.bind(this,"wav")))},_init:function(){return{message0:Blockly.Msg.SPEAKER_PLAY_WAV,args0:[{type:"field_dropdown",name:"file",options:o.getResWavs}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},addFile:o.addFileFun,attrs:{keyword:["speaker"]}},Blockly.Python.speaker_play_wav_dropdown=function(t){var e=t.getFieldValue("file")||"";return"Null"===e?"":`speaker.playWAV("res/${e}")\n`},Blockly.Blocks.speaker_play_wav_rate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SPEAKER_PLAY_WAV_RATE,args0:[{type:"input_value",name:"file"},{type:"input_value",name:"rate"},{type:"field_dropdown",name:"dataf",options:[["16Bit","F16B"],["24Bit","F24B"],["32Bit","F32B"]]},{type:"field_dropdown",name:"channel",options:[["left and right","CHN_LR"],["left","CHN_L"],["right","CHN_R"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_play_wav_rate=function(t){return`speaker.playWAV(${Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||""}, rate=${Blockly.Python.valueToCode(t,"rate",Blockly.Python.ORDER_FUNCTION_CALL)||"44100"}, dataf=speaker.${t.getFieldValue("dataf")||"F16B"}, channel=speaker.${t.getFieldValue("channel")||"CHN_LR"})\n`},Blockly.Blocks.speaker_play_cloud_wav={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SPEAKER_PLAY_CLOUD_WAV,args0:[{type:"input_value",name:"file"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["speaker"]}},Blockly.Python.speaker_play_cloud_wav=function(t){return`speaker.playCloudWAV(${Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){Blockly.Blocks.power_isCharging={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.power_isCharging,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE,tool:[]}},attrs:{keyword:["power"]}},Blockly.Python.power_isCharging=function(t){return["power.isCharging()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_isChargeFull={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.power_isChargeFull,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE,tool:[]}},attrs:{keyword:["power"]}},Blockly.Python.power_isChargeFull=function(t){return["power.isChargeFull()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_setCharge={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.power_setCharge,args0:[{type:"field_dropdown",name:"en",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE,tool:[]}},attrs:{keyword:["power"]}},Blockly.Python.power_setCharge=function(t){return`power.setCharge(${t.getFieldValue("en")||"en"})\n`},Blockly.Blocks.power_getBatteryLevel={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.power_getBatteryLevel,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE,tool:[]}},attrs:{keyword:["power"]}},Blockly.Python.power_getBatteryLevel=function(t){return["power.getBatteryLevel()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_charge_state={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_CHARGE_STATE,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_charge_state=function(t){return["power.getChargeState()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_bat_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_VOLTAGE,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_bat_voltage=function(t){return["power.getBatVoltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_bat_voltage_percent={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_VOLTAGE_PERCENT,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_bat_voltage_percent=function(t){return["map_value((power.getBatVoltage()), 3.7, 4.1, 0, 100)",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_bat_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_BAT_CURRENT,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_bat_current=function(t){return["power.getBatCurrent()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_vbus_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_VBUS_VOLTAGE,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_vbus_voltage=function(t){return["power.getVBusVoltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_get_temperature={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_GET_TEMP_IN_AXP192,output:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_get_temperature=function(t){return["power.getTempInAXP192()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.power_power_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_POWER_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_power_off=function(t){return"power.powerOff()\n"},Blockly.Blocks.power_set_charge_current={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_SET_CHARGE_CURRENT,args0:[{type:"field_dropdown",name:"CURRENT",options:[["100mA","CURRENT_100MA"],["190mA","CURRENT_190MA"],["280mA","CURRENT_280MA"],["360mA","CURRENT_360MA"],["450mA","CURRENT_450MA"],["550mA","CURRENT_550MA"],["630mA","CURRENT_630MA"],["700mA","CURRENT_700MA"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_charge_current=function(t){return`power.setChargeCurrent(power.${t.getFieldValue("CURRENT")||"CURRENT_100MA"})\n`},Blockly.Blocks.power_set_ldo2_voltage={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_LDO2_VOLTAGE,args0:[{type:"input_value",name:"ANGLEX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_ldo2_voltage=function(t){return`power.setLCDBacklightVoltage(${Blockly.Python.valueToCode(t,"ANGLEX",Blockly.Python.ORDER_FUNCTION_CALL)||2.8})\n`},Blockly.Blocks.power_set_screen_brightness={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.SCREEN_SET_BRIGHTNESS,args0:[{type:"input_value",name:"brightness"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_screen_brightness=function(t){return`screen.set_screen_brightness(${Blockly.Python.valueToCode(t,"brightness",Blockly.Python.ORDER_FUNCTION_CALL)||30})\n`},Blockly.Blocks.power_set_led={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_LED,args0:[{type:"field_dropdown",name:"state",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_led=function(t){return`power.setPowerLED(${t.getFieldValue("state")||"True"})\n`},Blockly.Blocks.power_set_vibration_enable={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_VIBRATION_ENABLE,args0:[{type:"field_dropdown",name:"state",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOOPS_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_vibration_enable=function(t){return`power.setVibrationEnable(${t.getFieldValue("state")||"True"})\n`},Blockly.Blocks.power_set_vibration_motor_on={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_VIBRATION_MOTOR_ON,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOOPS_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_vibration_motor_on=function(t){return"power.setVibrationEnable(True)\n"},Blockly.Blocks.power_set_vibration_motor_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_VIBRATION_MOTOR_OFF,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOOPS_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_vibration_motor_off=function(t){return"power.setVibrationEnable(False)\n"},Blockly.Blocks.power_set_vibration_motor_time={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_VIBRATION_MOTOR_TIME,args0:[{type:"input_value",name:"time"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOOPS_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_vibration_motor_time=function(t){return`power.setVibrationEnable(True)\nwait(${Blockly.Python.valueToCode(t,"time",Blockly.Python.ORDER_FUNCTION_CALL)})\npower.setVibrationEnable(False)\n`},Blockly.Blocks.power_set_vibration_intensity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_VIBRATION_INTENSITY,args0:[{type:"input_value",name:"intensity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOOPS_HUE,tool:["Value must be 0 ~ 100"]}},attrs:{keyword:["power"]}},Blockly.Python.power_set_vibration_intensity=function(t){return`power.setVibrationIntensity(${Blockly.Python.valueToCode(t,"intensity",Blockly.Python.ORDER_FUNCTION_CALL)||50})\n`},Blockly.Blocks.power_on={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_ON,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_on=function(t){return"power.on()\n"},Blockly.Blocks.power_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AXP_POWER_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_off=function(t){return"power.off()\n"},Blockly.Blocks.power_set_restart={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_RESTART,args0:[{type:"input_value",name:"second"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_set_restart=function(t){return`power.restart_after_seconds(${Blockly.Python.valueToCode(t,"second",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.power_restart_on={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.POWER_RESTART_ON,args0:[{type:"input_dummy"},{type:"input_value",name:"MINUTE"},{type:"input_value",name:"HOUR"},{type:"input_value",name:"DATE"},{type:"input_value",name:"WEEKDAY"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.POWER_HUE,tool:["minutes: 0 ~ 59","hour: 0 ~ 23","date: 1 ~ 31","weekday: 0 ~ 6","0 Monday","1 Tuesday","2 Wednesday","3 Thursday","4 Friday","5 Saturday","6 Sunday"]}},attrs:{keyword:["power"]}},Blockly.Python.power_restart_on=function(t){var e=Blockly.Python.valueToCode(t,"MINUTE",Blockly.Python.ORDER_FUNCTION_CALL),n=Blockly.Python.valueToCode(t,"HOUR",Blockly.Python.ORDER_FUNCTION_CALL),o=Blockly.Python.valueToCode(t,"DATE",Blockly.Python.ORDER_FUNCTION_CALL),l=Blockly.Python.valueToCode(t,"WEEKDAY",Blockly.Python.ORDER_FUNCTION_CALL);let i="";return e&&(i+=`minutes=${e}, `),n&&(i+=`hours=${n}, `),o&&(i+=`date=${o}, `),l&&(i+=`weekday=${l}, `),i=i.replace(/(, )$/,""),`power.restart_on(${i})\n`},Blockly.Blocks.power_set_bus_mode={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_SET_BUS_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["Disable M-Bus 5V output","1"],["Enable M-Bus 5V output","0"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE,tool:["mode:","1 : disable M-Bus 5V output","0 : enable M-Bus 5V output"]}},attrs:{keyword:["power"]}},Blockly.Python.power_set_bus_mode=function(t){return`power.setBusPowerMode(${t.getFieldValue("mode")||1})\n`},Blockly.Blocks.power_main_on={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_MAIN_ON,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_main_on=function(t){return"power.main_power_on()\n"},Blockly.Blocks.power_main_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_MAIN_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_main_off=function(t){return"power.main_power_off()\n"},Blockly.Blocks.power_epd_on={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_EPD_ON,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_epd_on=function(t){return"power.epd_power_on()\n"},Blockly.Blocks.power_epd_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_EPD_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_epd_off=function(t){return"power.epd_power_off()\n"},Blockly.Blocks.power_ext_on={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_EXT_ON,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_ext_on=function(t){return"power.ext_power_on()\n"},Blockly.Blocks.power_ext_off={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.POWER_EXT_OFF,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.POWER_HUE}},attrs:{keyword:["power"]}},Blockly.Python.power_ext_off=function(t){return"power.ext_power_off()\n"}},function(t,e){Blockly.Blocks.touch_read={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){let t=localStorage.getItem("_type");return{message0:Blockly.Msg.TOUCH_READ,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE,tool:[`return: (x, y${"paper"===t?", s, status":""})`]}},attrs:{keyword:["touch"]}},Blockly.Python.touch_read=function(){return Blockly.addModule("touch"),["touch.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.touch_read_x={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.TOUCH_READ_X,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["touch"]}},Blockly.Python.touch_read_x=function(){return Blockly.addModule("touch"),["touch.read()[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.touch_read_y={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.TOUCH_READ_Y,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["touch"]}},Blockly.Python.touch_read_y=function(){return Blockly.addModule("touch"),["touch.read()[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.touch_status={init:function(){this.jsonInit(this._imuGETx())},_imuGETx:function(){return{message0:Blockly.Msg.TOUCH_STATUS,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["touch"]}},Blockly.Python.touch_status=function(){return Blockly.addModule("touch"),["touch.status()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.battery_voltage={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.BATTERY_VOLTAGE,inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE}},attrs:{keyword:["battery"]}},Blockly.Python.battery_voltage=function(t){return["bat.voltage()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.sht30_get_humidity={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.SHT30_GET_HUMIDITY,inputsInline:!0,output:null,colour:Blockly.Msg.MATH_HUE}},attrs:{keyword:["sht30"]}},Blockly.Python.sht30_get_humidity=function(t){return["sht30.humidity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.sht30_get_temperature={init:function(){this.jsonInit(this._GETs())},_GETs:function(){return{message0:Blockly.Msg.SHT30_GET_TEMPERATURE,inputsInline:!0,output:null,colour:Blockly.Msg.MATH_HUE}},attrs:{keyword:["sht30"]}},Blockly.Python.sht30_get_temperature=function(t){return["sht30.temperature",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.wdt_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WDT_INIT,args0:[{type:"input_value",name:"timeout",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["wdt"]}},Blockly.Python.wdt_init=function(t){let e=`wdt = WDT(timeout=${Blockly.Python.valueToCode(t,"timeout",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;return Blockly.addDeclare("wdt"),e},Blockly.Blocks.wdt_feed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WDT_FEED,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MODBUS_MASTER_HUE,tool:[]}},attrs:{keyword:["wdt"]}},Blockly.Python.wdt_feed=function(t){return"wdt.feed()\n"}},function(t,e){Blockly.Blocks.microphone_recordfile={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MICROPHONE_RECORDFILE,args0:[{type:"input_value",name:"seconds"},{type:"input_value",name:"filename"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["microphone"]}},Blockly.Python.microphone_recordfile=function(t){return`mic.record2file(${Blockly.Python.valueToCode(t,"seconds",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"filename",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){Blockly.Blocks.ir_send_addr={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.IR_SEND_ADDR,args0:[{type:"input_value",name:"addr"},{type:"input_value",name:"data"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PLUS_HUE,tool:[]}},attrs:{keyword:["ir"]}},Blockly.Python.ir_send_addr=function(t){return`ir.tx(${Blockly.Python.valueToCode(t,"addr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){Blockly.Blocks.open_sdcard_file={init:function(){this.jsonInit(this._openSdcardFile())},_openSdcardFile:function(){return{message0:Blockly.Msg.OPEN_SDCARD_FILE,args0:[{type:"input_value",name:"open"},{type:"field_dropdown",name:"mode",options:[["a","a"],["r+","r+"],["w","w"],["w+","w+"],["r","r"]]}],message1:"%1",args1:[{type:"input_statement",name:"do"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.open_sdcard_file=function(t){var e=Blockly.Python.valueToCode(t,"open",Blockly.Python.ORDER_NONE)||"";e=e.replace(/\\\\/g,"\\"),e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`;var n=t.getFieldValue("mode")||"";n="'"+n+"'";var o=Blockly.Python.statementToCode(t,"do",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=`with open(${e}, ${n})\n  pass`;return o&&(l=`with open(${e}, ${n}) as fs:\n${o}`),l},Blockly.Blocks.file_read_all={init:function(){this.jsonInit(this._fileReadAll())},_fileReadAll:function(){return{message0:Blockly.Msg.FILE_READ_ALL,args0:[{type:"input_dummy"}],output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_read_all=function(t){return["fs.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.file_read={init:function(){this.jsonInit(this._fileRead())},_fileRead:function(){return{message0:Blockly.Msg.FILE_READ_BYTES,args0:[{type:"input_value",name:"bytes"},{type:"input_dummy"}],output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_read=function(t){return[`fs.read(${Blockly.Python.valueToCode(t,"bytes",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.file_read_line={init:function(){this.jsonInit(this._fileReadLine())},_fileReadLine:function(){return{message0:Blockly.Msg.FILE_READ_LINE,args0:[{type:"input_dummy"}],output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_read_line=function(t){return["fs.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.file_write={init:function(){this.jsonInit(this._fileWrite())},_fileWrite:function(){return{message0:Blockly.Msg.FILE_WRITE,args0:[{type:"input_value",name:"write"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_write=function(t){var e=Blockly.Python.valueToCode(t,"write",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"fs.write("+e+")\n":"fs.write(str("+e+"))\n"},Blockly.Blocks.file_set_seek={init:function(){this.jsonInit(this._fileSetSeek())},_fileSetSeek:function(){return{message0:Blockly.Msg.FILE_SET_SEEK,args0:[{type:"input_value",name:"seek"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_set_seek=function(t){return`fs.seek(${Blockly.Python.valueToCode(t,"seek",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.file_get_seek={init:function(){this.jsonInit(this._fileGetSeek())},_fileGetSeek:function(){return{message0:Blockly.Msg.FILE_GET_SEEK,args0:[{type:"input_dummy"}],output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.file_get_seek=function(t){return["fs.tell()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.listdir={init:function(){this.jsonInit(this._listdir())},_listdir:function(){return{message0:Blockly.Msg.SDCARD_LISTDIR,args0:[{type:"input_value",name:"listdirPath"}],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.listdir=function(t){var e=Blockly.Python.valueToCode(t,"listdirPath",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),[`os.listdir(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mkdir={init:function(){this.jsonInit(this._mkdir())},_mkdir:function(){return{message0:Blockly.Msg.SDCARD_MKDIR,args0:[{type:"input_value",name:"mkdirPath"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.mkdir=function(t){var e=Blockly.Python.valueToCode(t,"mkdirPath",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),`os.mkdir(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})\n`},Blockly.Blocks.remove={init:function(){this.jsonInit(this._remove())},_remove:function(){return{message0:Blockly.Msg.SDCARD_REMOVE,args0:[{type:"input_value",name:"removePath"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.remove=function(t){var e=Blockly.Python.valueToCode(t,"removePath",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),`os.remove(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})\n`},Blockly.Blocks.rmdir={init:function(){this.jsonInit(this._rmdir())},_rmdir:function(){return{message0:Blockly.Msg.SDCARD_RMDIR,args0:[{type:"input_value",name:"rmdirPath"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.rmdir=function(t){var e=Blockly.Python.valueToCode(t,"rmdirPath",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),`os.rmdir(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})\n`},Blockly.Blocks.rename={init:function(){this.jsonInit(this._rename())},_rename:function(){return{message0:Blockly.Msg.SDCARD_RENAME,args0:[{type:"input_value",name:"renamePath"},{type:"input_value",name:"toPath"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.rename=function(t){var e=Blockly.Python.valueToCode(t,"renamePath",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"toPath",Blockly.Python.ORDER_NONE)||"";return`os.rename(${e=`'/sd/' + str(${e})`}, ${n=`'/sd/' + str(${n})`})\n`},Blockly.Blocks.sdcard_isfile={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.SDCARD_ISFILE,args0:[{type:"input_value",name:"path"}],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.sdcard_isfile=function(t){var e=Blockly.Python.valueToCode(t,"path",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),[`os.stat(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})[0] == 0x8000`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.sdcard_isdirectory={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.SDCARD_ISDIRECTORY,args0:[{type:"input_value",name:"path"}],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.sdcard_isdirectory=function(t){var e=Blockly.Python.valueToCode(t,"path",Blockly.Python.ORDER_NONE)||"";return e=e.replace(/\\\\/g,"\\"),[`os.stat(${e=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(e=e.replace(/\'/g,""))+"'":`'/sd/' + str(${e})`})[0] == 0x4000`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.sdcard_isexist={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.SDCARD_ISEXIST,args0:[{type:"input_value",name:"file"},{type:"input_value",name:"path"}],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["sdcard"]}},Blockly.Python.sdcard_isexist=function(t){var e=Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"path",Blockly.Python.ORDER_NONE)||"";return n=n.replace(/\\\\/g,"\\"),[`${e} in os.listdir(${n=t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"'/sd/"+(n=n.replace(/\'/g,""))+"'":`'/sd/' + str(${n})`})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.pins_analog_read={init:function(){this.jsonInit(this._functionMainEvent())},_functionMainEvent:function(){return{message0:Blockly.Msg.PINS_ANALOG_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PIN",options:[["39","39"],["38","38"],["37","37"],["36","36"],["35","35"],["34","34"],["33","33"],["32","32"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Get analog value","return: 0 ~ 1024"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_analog_read=function(t){return["analogRead("+(t.getFieldValue("PIN")||"4")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pins_analog_read_value={init:function(){this.jsonInit(this._functionMainEvent())},_functionMainEvent:function(){return{message0:Blockly.Msg.PINS_ANALOG_READ,args0:[{type:"input_dummy"},{type:"input_value",name:"PIN"}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Get analog value","return: 0 ~ 1024"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_analog_read_value=function(t){return["analogRead("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"39")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pins_analog_write={init:function(){this.jsonInit(this._pinsAnalogWrite())},_pinsAnalogWrite:function(){return{message0:Blockly.Msg.PINS_ANALOG_WRITE,args0:[{type:"input_dummy"},{type:"input_value",name:"PIN"},{type:"input_dummy"},{type:"input_value",name:"DUTY"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Write 38KHZ PWM","Pin: 0 ~ 36","duty: 0.0 ~ 100.0(%)"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_analog_write=function(t){return"analogWrite("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26")+", "+(Blockly.Python.valueToCode(t,"DUTY",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.pins_digital_read={init:function(){this.jsonInit(this._pinnsDihitalRead())},_pinnsDihitalRead:function(){return{message0:Blockly.Msg.PINS_DIGITAL_READ,args0:[{type:"input_dummy"},{type:"input_value",name:"PIN"}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Read pin value","Note: pin in INOUT mode, Pull up","Pin: 0 ~ 36","return: 0 or 1"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_digital_read=function(t){return["digitalRead("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pins_digital_write={init:function(){this.jsonInit(this._pinnsDihitalRead())},_pinnsDihitalRead:function(){return{message0:Blockly.Msg.PINS_DIGITAL_WRITE,args0:[{type:"input_dummy"},{type:"input_value",name:"PIN"},{type:"input_dummy"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Write pin value","Note: pin in INOUT mode, Pull up","Pin: 0 ~ 36","value: 0 or 1"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_digital_write=function(t){return"digitalWrite("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26")+", "+(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.pins_set_map={init:function(){this.jsonInit(this._pinsSetMap())},_pinsSetMap:function(){return{message0:Blockly.Msg.PINS_SET_MAP,args0:[{type:"input_value",name:"MAP"},{type:"input_value",name:"FROM_LOW"},{type:"input_value",name:"FROM_HIGH"},{type:"input_value",name:"TO_LOW"},{type:"input_value",name:"TO_HIGH"}],output:null,colour:Blockly.Msg.PINS_HUE,tool:["Cover value","Note: pin in INOUT mode, Pull up","Pin: 0 ~ 36","value: 0 or 1"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_set_map=function(t){return["map_value("+(Blockly.Python.valueToCode(t,"MAP",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"FROM_LOW",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"FROM_HIGH",Blockly.Python.ORDER_FUNCTION_CALL)||"1023")+", "+(Blockly.Python.valueToCode(t,"TO_LOW",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"TO_HIGH",Blockly.Python.ORDER_FUNCTION_CALL)||"4")+")",Blockly.Python.ORDER_NONE]},Blockly.Blocks.pins_analog_toggle={init:function(){this.jsonInit(this._pinsAnalogWrite())},_pinsAnalogWrite:function(){return{message0:Blockly.Msg.PINS_ANALOG_TOGGLE,args0:[{type:"input_dummy"},{type:"input_value",name:"PIN"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Toggle digital value","Pin: 0 ~ 36"]}},attrs:{keyword:["easyio"]}},Blockly.Python.pins_analog_toggle=function(t){return"toggleIO("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26")+")\n"}},function(t,e){var n=[["PWM0","PWM0"],["PWM1","PWM1"],["PWM2","PWM2"],["PWM3","PWM3"],["PWM4","PWM4"]],o=[["0","0"],["3","3"]];Blockly.Blocks.pwm={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PWM_PIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PWM",options:n},{type:"input_value",name:"pin"},{type:"input_value",name:"freg"},{type:"input_value",name:"duty"},{type:"field_dropdown",name:"TIME",options:o}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Init PWM","Pin: 0 ~ 34","freq: 1 ~ 40000000(HZ)","duty: 0.0 ~ 100.0(%)","timer: 0 or 3","note0: same timer freq will be same","note1: servo unit use timer 1, 50HZ"]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm=function(t){Blockly.addModule("machine");var e=t.getFieldValue("PWM")||"IN",n=Blockly.Python.valueToCode(t,"pin",Blockly.Python.ORDER_FUNCTION_CALL)||"26",o=Blockly.Python.valueToCode(t,"freg",Blockly.Python.ORDER_FUNCTION_CALL)||"10000",l=Blockly.Python.valueToCode(t,"duty",Blockly.Python.ORDER_FUNCTION_CALL)||"50",i=t.getFieldValue("TIME")||"0";return Blockly.addDeclare(e),e+" = machine.PWM("+n+", freq="+o+", duty="+l+", timer="+i+")\n"},Blockly.Blocks.pwm_freq={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PWM_FREQ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PWM",options:n},{type:"input_value",name:"freg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Set PWM freq","freq: 1 ~ 20000000(HZ)"]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm_freq=function(t){return Blockly.addModule("machine"),(t.getFieldValue("PWM")||"IN")+".freq("+(Blockly.Python.valueToCode(t,"freg",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+")\n"},Blockly.Blocks.pwm_duty={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PWM_DUTY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PWM",options:n},{type:"input_value",name:"duty"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Set PWM duty","duty: 0.0 ~ 100.0(%)"]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm_duty=function(t){return Blockly.addModule("machine"),(t.getFieldValue("PWM")||"IN")+".duty("+(Blockly.Python.valueToCode(t,"duty",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+")\n"},Blockly.Blocks.pwm_pause={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PWM_PAUSE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PWM",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Pause PWM output"]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm_pause=function(t){return Blockly.addModule("machine"),(t.getFieldValue("PWM")||"IN")+".pause()\n"},Blockly.Blocks.pwm_resume={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PWM_RESUME,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PWM",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Resume PWM output"]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm_resume=function(t){return Blockly.addModule("machine"),(t.getFieldValue("PWM")||"IN")+".resume()\n"},Blockly.Blocks.pwm_hold_us={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.PWN_HOLD_US,args0:[{type:"field_dropdown",name:"PWM",options:n},{type:"input_value",name:"TIME"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["pwm"]}},Blockly.Python.pwm_hold_us=function(t){return Blockly.addModule("machine"),`${t.getFieldValue("PWM")||"PWM0"}.hold_us(${Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){var n=function(){var t=[["adc0","adc1"],["ATTN_0DB","ATTN_2_5DB","ATTN_6DB","ATTN_11DB"],["WIDTH_9BIT","WIDTH_10BIT","WIDTH_11BIT","WIDTH_12BIT"]];for(let n=0;n<t.length;n++){var e=[];for(let o=0;o<t[n].length;o++)e[e.length]=[t[n][o],t[n][o]];t[n]=e}return t}();Blockly.Blocks.adc={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.ADC_PIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"adc",options:n[0]},{type:"input_value",name:"pin"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ADC_HUE,tool:["Init ADC","pin: 32-39"]}},attrs:{keyword:["adc"]}},Blockly.Python.adc=function(t){Blockly.addModule("machine");var e=t.getFieldValue("adc")||"adc0";return Blockly.addDeclare(e),e+" = machine.ADC("+(Blockly.Python.valueToCode(t,"pin",Blockly.Python.ORDER_FUNCTION_CALL)||"32")+")\n"},Blockly.Blocks.adc_width={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.ADC_WIDTH,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"adc",options:n[0]},{type:"field_dropdown",name:"value",options:n[2]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.ADC_HUE,tool:["Set adc measurement accuracy","width: WIDTH 9 ~ 12 BIT"]}},attrs:{keyword:["adc"]}},Blockly.Python.adc_width=function(t){return Blockly.addModule("machine"),`${t.getFieldValue("adc")||n[0][0]}.width(machine.ADC.${t.getFieldValue("value")||n[2][0]})\n`},Blockly.Blocks.adc_atten={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.ADC_ATTEN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"adc",options:n[0]},{type:"field_dropdown",name:"value",options:n[1]}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:Blockly.Msg.ADC_HUE,tool:["Set the attenuation value","atten:0, 2.5, 6, 11(dB)","ATTN_0DB: range: 0 - 1.1 V","ATTN_2_5DB: range 0 - 1.5 V","ATTN_6DB: range: 0 - 2.5 V","ATTN_11DB: range: 0 - 3.9 V"]}},attrs:{keyword:["adc"]}},Blockly.Python.adc_atten=function(t){return Blockly.addModule("machine"),`${t.getFieldValue("adc")||"adc0"}.atten(machine.ADC.${t.getFieldValue("value")||"ATTN_0DB"})\n`},Blockly.Blocks.adc_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.ADC_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"adc",options:n[0]}],inputsInline:!0,output:null,colour:Blockly.Msg.ADC_HUE,tool:["Get the adc read value","return: depending on adc width"]}},attrs:{keyword:["adc"]}},Blockly.Python.adc_read=function(t){return Blockly.addModule("machine"),[(t.getFieldValue("adc")||n[0][0])+".read()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){var n=[["dac0","dac0"],["dac1","dac1"]];Blockly.Blocks.dac={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_PIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n},{type:"field_dropdown",name:"PIN",options:[["25","25"],["26","26"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DAC_HUE,tool:["Init dac","pin: 25 or 26"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac=function(t){Blockly.addModule("machine");var e=t.getFieldValue("DAC")||"dac0";return Blockly.addDeclare(e),e+" = machine.DAC("+(t.getFieldValue("PIN")||"25")+")\n"},Blockly.Blocks.dac_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_WIDTH,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n},{type:"input_value",name:"PIN"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["Set the DAC value","value: 0 ~ 255","note: 255 sets the voltage on dac pin to 3.3 V"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac_write=function(t){return(t.getFieldValue("DAC")||"dac0")+".write("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.dac_beep={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_BEEP,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n},{type:"input_value",name:"freq"},{type:"input_value",name:"duration"},{type:"input_value",name:"scale"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["Generate the sine wave beep on the dac output","freq: 16 ~ 32000(Hz)","duration: the duration of the beep in ms","scale: 0 ~ 3, scale the output voltage by 2^scale"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac_beep=function(t){return(t.getFieldValue("DAC")||"dac0")+`.beep(${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"1800"}, ${Blockly.Python.valueToCode(t,"duration",Blockly.Python.ORDER_FUNCTION_CALL)||"200"}, ${Blockly.Python.valueToCode(t,"scale",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.dac_waveform={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_WAVEFROM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n},{type:"input_value",name:"freq"},{type:"field_dropdown",name:"type",options:[["SINE","SINE"],["TRIANGLE","TRIANGLE"],["RAMP","RAMP"],["SAWTOOTH","SAWTOOTH"],["NOISE","NOISE"]]},{type:"input_value",name:"duration"},{type:"input_value",name:"scale"},{type:"input_value",name:"offset"},{type:"input_value",name:"invert"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["Generate the waveform on the dac output","type and freq:","- SINE: 16 ~ 32000(HZ)","- NOISE: 500 ~ 32000(HZ)","- TRIANGLE : 170 ~ 3600(HZ)","- RAMP SAWTOOTH: 170 ~ 7200(HZ)","duration: waits for duration ms,(0 forever)","scale: scale the output voltage by 2^scale","offset: 0 ~ 255","invert: 0 ~ 3, invert the half-cycle of the sine wave","note: scale, offset, invert only valid for sine"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac_waveform=function(t){var e=t.getFieldValue("DAC")||"dac0",n=t.getFieldValue("type")||"SINE";return e+`.waveform(${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"1800"}, ${e}.${n}, duration=${Blockly.Python.valueToCode(t,"duration",Blockly.Python.ORDER_FUNCTION_CALL)||"200"}, scale=${Blockly.Python.valueToCode(t,"scale",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, offset=${Blockly.Python.valueToCode(t,"offset",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, invert=${Blockly.Python.valueToCode(t,"invert",Blockly.Python.ORDER_FUNCTION_CALL)||"2"})\n`},Blockly.Blocks.dac_stopwave={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_STOPWAVE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["stop dac waveform out"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac_stopwave=function(t){return(t.getFieldValue("DAC")||"dac0")+".stopwave()\n"},Blockly.Blocks.dac_freq={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.DAC_FREQ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DAC",options:n},{type:"input_value",name:"freq"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["Change dac waveform out(by waveform) freq"]}},attrs:{keyword:["dac"]}},Blockly.Python.dac_freq=function(t){return(t.getFieldValue("DAC")||"dac0")+".freq("+(Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"1800")+")\n"}},function(t,e){function n(){return[["uart1","uart1"],["uart2","uart2"]]}Blockly.Blocks.uart={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_PIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_value",name:"TX"},{type:"input_value",name:"RX"},{type:"input_dummy"},{type:"field_dropdown",name:"BAUD",options:[["9600","9600"],["115200","115200"],["230400","230400"],["256000","256000"],["512000","512000"],["921600","921600"]]},{type:"field_dropdown",name:"USE_TIMER",options:[["1","1"],["2","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:["Init uart","tx: 0 ~ 34","rx: 0 ~ 36","baud: 9600, 115200, ......","use timer: 0 ~ 1"]}},attrs:{keyword:["uart"]}},Blockly.Python.uart=function(t){Blockly.addModule("machine");var e=t.getFieldValue("VAR")||"",n=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=t.getFieldValue("BAUD")||"",i=t.getFieldValue("USE_TIMER")||"1";return Blockly.addDeclare(e),e+" = machine.UART("+i+", tx="+n+", rx="+o+")\n"+e+".init("+l+", bits=8, parity=None, stop=1)\n"},Blockly.Blocks.uart_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:["Read uart data","return: bytes, empty will return None"]}},attrs:{keyword:["uart"]}},Blockly.Python.uart_read=function(t){return[(t.getFieldValue("VAR")||"")+".read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uart_read_characters={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_READ_CHARACTERS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE,tool:["Read number uart data","return: bytes, empty will return None"]}},attrs:{keyword:["uart"]}},Blockly.Python.uart_read_characters=function(t){return[`${t.getFieldValue("VAR")||""}.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uart_readline={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_READLINE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["uart"]}},Blockly.Python.uart_readline=function(t){return[(t.getFieldValue("VAR")||"")+".readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uart_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_WRITE,args0:[{type:"input_value",name:"VALUE"},{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE,tool:["Write data"]}},attrs:{keyword:["uart"]}},Blockly.Python.uart_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\"),n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+")\n":n+".write(str("+e+"))\n"},Blockly.Blocks.uart_any={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_READANY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["uart"]}},Blockly.Python.uart_any=function(t){return[(t.getFieldValue("VAR")||"")+".any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uart_write_number={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_WRITE_NUMBER,args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["uart"]}},Blockly.Python.uart_write_number=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${t.getFieldValue("VAR")||""}.write('${e.toString().replace(/\'/g,"").replace(/\\\\/g,"\\")}\\r\\n')\n`},Blockly.Blocks.uart_write_line={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["uart"]}},Blockly.Python.uart_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"",n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+'+"\\r\\n")\n':n+".write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.uart_write_raw_data={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.UART_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["uart"]}},Blockly.Python.uart_write_raw_data=function(t){var e=`bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""})`;return(t.getFieldValue("VAR")||"")+".write("+e+")\n"}},function(t,e){Blockly.Blocks.system_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SYSTEM_RESET,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SYSTEM_HUE,tool:[]}},attrs:{keyword:["system"]}},Blockly.Python.system_reset=function(t){return"machine.reset()\n"}},function(t,e,n){"use strict";n.r(e),n(0);var o=[["i2c0","i2c0"],["i2c1","i2c1"]],l=[["UINT8LE","UINT8LE"],["UINT16LE","UINT16LE"],["UINT32LE","UINT32LE"],["INT8LE","INT8LE"],["INT16LE","INT16LE"],["INT32LE","INT32LE"],["UINT8BE","UINT8BE"],["UINT16BE","UINT16BE"],["UINT32BE","UINT32BE"],["INT8BE","INT8BE"],["INT16BE","INT16BE"],["INT32BE","INT32BE"]];Blockly.Blocks.iic_set={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_SET,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"field_dropdown",name:"PORT",options:"core"==localStorage.getItem("_type")?[["portA","PORTA"],["portC","PORTC"]]:[["portA","PORTA"]]},{type:"field_input",name:"FREQ",text:"400000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:[]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_set=function(t){var e=t.getFieldValue("PORT")||"PORTA",n=t.getFieldValue("i2c")||"i2c0",o=t.getFieldValue("FREQ")||"400000";return Blockly.addDeclare(n),`${n} = i2c_bus.easyI2C(i2c_bus.${e}, 0x00, freq=${o})\n`},Blockly.Blocks.iic_set_C={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_SET_C,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"sda"},{type:"input_value",name:"scl"},{type:"field_input",name:"FREQ",text:"400000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:[]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_set_C=function(t){var e=t.getFieldValue("i2c")||"i2c0",n=Blockly.Python.valueToCode(t,"sda",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"scl",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=t.getFieldValue("FREQ")||"400000";return Blockly.addDeclare(e),`${e} = i2c_bus.easyI2C((${n}, ${o}), 0x00, freq=${l})\n`},Blockly.Blocks.iic_write_byte={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_WRITE_BYTE,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"req",text:"0x00"},{type:"input_value",name:"data",text:"0x00"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:["I2C write one byte to reg","reg: 0x00 ~ 0xff","byte: 0x00 ~ 0xff"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_write_byte=function(t){return`${t.getFieldValue("i2c")||"i2c0"}.write_u8(${Blockly.Python.valueToCode(t,"req",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"})\n`},Blockly.Blocks.iic_write_big={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_WRITE_BIG,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"req",text:"0x00"},{type:"input_value",name:"data",text:"0x0000"},{type:"field_dropdown",name:"encode",options:[["big","big"],["little","little"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:["I2C write one short to reg","reg: 0x00 ~ 0xff","short: 0x0000 ~ 0xffff","encode: 'big' or 'little'"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_write_big=function(t){var e=t.getFieldValue("i2c")||"i2c0",n=t.getFieldValue("encode")||"big";return`${e}.write_u16(${Blockly.Python.valueToCode(t,"req",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0x0000"}, byteorder="${n}")\n`},Blockly.Blocks.iic_read_req={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_READ_REQ,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"req",text:"0x00"}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["I2C read one byte from reg","reg: 0x00 ~ 0xff","return: 0 ~ 255"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_read_req=function(t){return[`${t.getFieldValue("i2c")||"i2c0"}.read_u8(${Blockly.Python.valueToCode(t,"req",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_read_res={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_READ_RES,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"res",text:"0x00"},{type:"field_dropdown",name:"dncode",options:[["big","big"],["little","little"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["I2C read one short from reg","reg: 0x00 ~ 0xff","return: 0 ~ 65536"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_read_res=function(t){var e=t.getFieldValue("i2c")||"i2c0",n=t.getFieldValue("dncode")||"big";return[`${e}.read_u16(${Blockly.Python.valueToCode(t,"res",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"}, byteorder="${n}")`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_read_reg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IIC_READ_REG,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"res",text:"0x00"},{type:"input_value",name:"num"}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["I2C read number byte from reg","reg: 0x00 ~ 0xff","num: 0 ~ 255","return: bytes"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_read_reg=function(t){return[`${t.getFieldValue("i2c")||"i2c0"}.read_reg(${Blockly.Python.valueToCode(t,"res",Blockly.Python.ORDER_FUNCTION_CALL)||"0x00"}, ${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_READ_READ,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"input_value",name:"num"}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["I2C read bytes from addr","number: 0 ~ 255","return: bytes(b'/x00/xff')"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_read=function(t){return[`${t.getFieldValue("i2c")||"i2c0"}.read(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_available={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_AVAILABLE,args0:[{type:"field_dropdown",name:"i2c",options:o}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["Determine if the device is connected","return: True or False"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_available=function(t){return[(t.getFieldValue("i2c")||"i2c0")+".available()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_scan={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_SCAN,args0:[{type:"field_dropdown",name:"i2c",options:o}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:["Scan for davailable devices","return:available devices addr in list"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_scan=function(t){return[(t.getFieldValue("i2c")||"i2c0")+".scan()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_write_mem_data={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_WRITE_MEM_DATA,args0:[{type:"field_dropdown",name:"IIC",options:o},{type:"input_value",name:"REG"},{type:"input_value",name:"DATA"},{type:"field_dropdown",name:"TYPE",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_write_mem_data=function(t){return`${t.getFieldValue("IIC")||"i2c0"}.write_mem_data(${Blockly.Python.valueToCode(t,"REG",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, i2c_bus.${t.getFieldValue("TYPE")||"UINT8LE"})\n`},Blockly.Blocks.iic_write_data={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_WRITE_DATA,args0:[{type:"field_dropdown",name:"IIC",options:o},{type:"input_value",name:"DATA"},{type:"field_dropdown",name:"TYPE",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_write_data=function(t){return`${t.getFieldValue("IIC")||"i2c0"}.write_data(${Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, i2c_bus.${t.getFieldValue("TYPE")||"UINT8LE"})\n`},Blockly.Blocks.iic_read_mem_data={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_READ_MEM_DATA,args0:[{type:"field_dropdown",name:"IIC",options:o},{type:"input_value",name:"REG"},{type:"input_value",name:"NUM"},{type:"field_dropdown",name:"TYPE",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_read_mem_data=function(t){return[`${t.getFieldValue("IIC")||"i2c0"}.read_mem_data(${Blockly.Python.valueToCode(t,"REG",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, i2c_bus.${t.getFieldValue("TYPE")||"UINT8LE"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_read_data={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_READ_DATA,args0:[{type:"field_dropdown",name:"IIC",options:o},{type:"input_value",name:"NUM"},{type:"field_dropdown",name:"TYPE",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_read_data=function(t){return[`${t.getFieldValue("IIC")||"i2c0"}.read_data(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, i2c_bus.${t.getFieldValue("TYPE")||"UINT8LE"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_get_data_in_list={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_GET_DATA_IN_LIST,args0:[{type:"input_value",name:"LIST"},{type:"input_value",name:"INDEX"}],inputsInline:!0,output:null,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_get_data_in_list=function(t){return[`${Blockly.Python.valueToCode(t,"LIST",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}[${Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iic_write_mem_list={init:function(){this.jsonInit(this._getJson())},_getJson:()=>({message0:Blockly.Msg.IIC_WRITE_MEM_LIST,args0:[{type:"field_dropdown",name:"IIC",options:o},{type:"input_value",name:"REG"},{type:"input_value",name:"DATA"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:[]}),attrs:{keyword:["i2c"]}},Blockly.Python.iic_write_mem_list=function(t){return`${t.getFieldValue("IIC")||"i2c0"}.write_mem_list(${Blockly.Python.valueToCode(t,"REG",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.iic_set_slave_addr={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IIC_SET_SLAVE_ADDR,args0:[{type:"field_dropdown",name:"i2c",options:o},{type:"field_input",name:"ADDRESS",text:"0x68"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IIC_HUE,tool:["addr: 0x08 ~ 0x77"]}},attrs:{keyword:["i2c"]}},Blockly.Python.iic_set_slave_addr=function(t){return`${t.getFieldValue("i2c")||"i2c0"}.addr=(${t.getFieldValue("ADDRESS")||"0x68"})\n`}},function(t,e){var n=function(){var t=[["pin0","pin1","pin2","pin3","pin4"],["IN","OUT","OUT_OD","INOUT","OPEN_DRAIN"],["PULL_UP","PULL_DOWN","PULL_HOLD","PULL_FLOAT"]];for(let n=0;n<t.length;n++){var e=[];for(let o=0;o<t[n].length;o++)e[e.length]=[t[n][o],t[n][o]];t[n]=e}return t}();let o=new Map([["IN","IN"],["OUT","OUT"],["OUT_OD","OUT | 0x04"],["INOUT","IN | machine.Pin.OUT"],["OPEN_DRAIN","OPEN_DRAIN"]]),l=new Map([["PULL_UP","machine.Pin.PULL_UP"],["PULL_DOWN","machine.Pin.PULL_DOWN"],["PULL_HOLD","machine.Pin.PULL_HOLD"],["PULL_FLOAT","0x00"]]);Blockly.Blocks.pin_pinout={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.GPIO_PINOUT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PINGS",options:n[0]},{type:"input_value",name:"PIN"},{type:"field_dropdown",name:"MODE",options:n[1]},{type:"field_dropdown",name:"PULL",options:n[2]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPIO_HUE,tool:["Init pin mode","Pin: 0 ~ 36","mode: IN, OUT, OUT_OD, INOUT, OPEN_DRAIN","pull: PULL_UP, PULL_DOWN, PULL_HOLD, PULL_FLOAT"]}},attrs:{keyword:["pin"]}},Blockly.Python.pin_pinout=function(t){Blockly.addModule("machine");var e=t.getFieldValue("PINGS")||"pin0",n=Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26",i=t.getFieldValue("MODE")||"IN",a=t.getFieldValue("PULL")||"UP";return Blockly.addDeclare(e),e+" = machine.Pin("+n+", mode=machine.Pin."+o.get(i)+", pull="+l.get(a)+")\n"},Blockly.Blocks.pin_on={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.GPIO_PININ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PINGS",options:n[0]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPIO_HUE,tool:["Set Pin to high value"]}},attrs:{keyword:["pin"]}},Blockly.Python.pin_on=function(t){return Blockly.addModule("machine"),(t.getFieldValue("PINGS")||"pin0")+".on()\n"},Blockly.Blocks.pin_off={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.GPIO_PINOUT_VALUE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PINGS",options:n[0]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPIO_HUE,tool:["Set pin to low value"]}},attrs:{keyword:["pin"]}},Blockly.Python.pin_off=function(t){return(t.getFieldValue("PINGS")||"pin0")+".off()\n"},Blockly.Blocks.pin_get_value={init:function(){this.jsonInit(this._pinnsDihitalRead())},_pinnsDihitalRead:function(){return{message0:Blockly.Msg.PINS_DIGITAL_GET,inputsInline:!0,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PINGS",options:n[0]}],output:null,colour:Blockly.Msg.GPIO_HUE,tool:["Get pin value","return: 0 or 1"]}},attrs:{keyword:["pin"]}},Blockly.Python.pin_get_value=function(t){return[(t.getFieldValue("PINGS")||"pin0")+".value()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pin_set_value={init:function(){this.jsonInit(this._pinnsDihitalRead())},_pinnsDihitalRead:function(){return{message0:Blockly.Msg.PINS_DIGITAL_SET,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"PINGS",options:n[0]},{type:"input_value",name:"PIN"}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:Blockly.Msg.GPIO_HUE,tool:["Set pin value","value: 0 or 1"]}},attrs:{keyword:["pin"]}},Blockly.Python.pin_set_value=function(t){return Blockly.addModule("pin"),(t.getFieldValue("PINGS")||"pin0")+".value("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"}},function(t,e){Blockly.Blocks.hdriver_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HDRIVER_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:[]}},attrs:{keyword:["driver","hdriver"]}},Blockly.Python.hdriver_init=function(t){return"hdriver = HDriver()\n"},Blockly.Blocks.hdriver_set_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HDRIVER_SET_SPEED,args0:[{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["speed: -100 ~ 100"]}},attrs:{keyword:["driver","hdriver"]}},Blockly.Python.hdriver_set_speed=function(t){return`hdriver.set_speed(${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.hdriver_get_voltage={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HDRIVER_GET_VOLTAGE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE,tool:[]}},attrs:{keyword:["driver","hdriver"]}},Blockly.Python.hdriver_get_voltage=function(){return["hdriver.get_voltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hdriver_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HDRIVER_GET_STATUS,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DHT_HUE,tool:[]}},attrs:{keyword:["driver","hdriver"]}},Blockly.Python.hdriver_get_status=function(){return["hdriver.get_status()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.motion_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_init=function(t){return"motion = Motion()\n"},Blockly.Blocks.motion_get_servo_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_GET_SERVO_ANGLE,args0:[{type:"input_value",name:"ch"}],inputsInline:!0,output:null,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 4","return: servo angle 0 ~ 180"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_get_servo_angle=function(t){return[`motion.get_servo_angle(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.motion_set_servo_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_SET_SERVO_ANGLE,args0:[{type:"input_value",name:"ch"},{type:"input_value",name:"angle"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 4","angle 0 ~ 180"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_set_servo_angle=function(t){return`motion.set_servo_angle(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"}, ${Blockly.Python.valueToCode(t,"angle",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.motion_get_servo_pulse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_GET_SERVO_PULSE,args0:[{type:"input_value",name:"ch"}],inputsInline:!0,output:null,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 4","return: servo pulse 500 ~ 2500"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_get_servo_pulse=function(t){return[`motion.get_servo_pulse(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.motion_set_servo_pulse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_SET_SERVO_PULSE,args0:[{type:"input_value",name:"ch"},{type:"input_value",name:"pulse"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 4","pulse 500 ~ 2500"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_set_servo_pulse=function(t){return`motion.set_servo_pulse(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"}, ${Blockly.Python.valueToCode(t,"pulse",Blockly.Python.ORDER_NONE)||"500"})\n`},Blockly.Blocks.motion_get_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_GET_MOTOR_SPEED,args0:[{type:"input_value",name:"ch"}],inputsInline:!0,output:null,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 2","return: motor speed -127 ~ 127"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_get_motor_speed=function(t){return[`motion.get_motor_speed(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.motion_set_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MOTION_SET_MOTOR_SPEED,args0:[{type:"input_value",name:"ch"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["ch: 1 ~ 2","speed -127 ~ 127"]}},attrs:{keyword:["motion"]}},Blockly.Python.motion_set_motor_speed=function(t){return`motion.set_motor_speed(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_NONE)||"1"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_NONE)||"0"})\n`}},function(t,e){Blockly.Blocks.base_gps_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_INIT,args0:[{type:"input_value",name:"timezone"},{type:"input_value",name:"formatting"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_init=function(t){return`gps = GPS(${Blockly.Python.valueToCode(t,"timezone",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"formatting",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_gps_timestamp={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_TIMESTAMP,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_timestamp=function(t){return["gps.timestamp",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_date={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_DATE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_date=function(t){return["gps.date",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_latitude={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_LATITUDE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_latitude=function(t){return["gps.latitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_longitude={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_LONGITUDE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_longitude=function(t){return["gps.longitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_SPEED,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_speed=function(t){return["gps.speed",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_course={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_COURSE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_course=function(t){return["gps.course",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_altitude={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_ALTITUDE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_altitude=function(t){return["gps.altitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_geoid_height={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_GEOID_HEIGHT,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_geoid_height=function(t){return["gps.geoid_height",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_satellites_in_view={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_SATELLITES_IN_VIEW,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_satellites_in_view=function(t){return["gps.satellites_in_view",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_satellites_in_use={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_SATELLITES_IN_USE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_satellites_in_use=function(t){return["gps.satellites_in_use",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_satellites_used={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_SATELLITES_USED,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_satellites_used=function(t){return["gps.satellites_used",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_last_sv_sentence={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_LAST_SV_SENTENCE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_last_sv_sentence=function(t){return["gps.last_sv_sentence",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_total_sv_sentence={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_TOTAL_SV_SENTENCE,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_total_sv_sentence=function(t){return["gps.total_sv_sentence",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_satellite_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_SATELLITE_DATA,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_satellite_data=function(t){return["gps.satellite_data",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_hdop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_HDOP,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_hdop=function(t){return["gps.hdop",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_pdop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_PDOP,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_pdop=function(t){return["gps.pdop",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_vdop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_VDOP,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_vdop=function(t){return["gps.vdop",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_gps_deinit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_GPS_DEINIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.base_gps_deinit=function(t){return"gps.deinit()\n"}},function(t,e){Blockly.Blocks.base_qrcode_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_QRCODE_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_init=function(t){return"qr = QRCode()\n"},Blockly.Blocks.base_qrcode_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_QRCODE_READ,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_read=function(t){return["qr.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_qrcode_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_QRCODE_STATUS,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_status=function(t){return["qr.status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_qrcode_manual_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_image",name:"img",src:"../assets/images/qrcode-manual.jpg",width:110,height:110}],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_manual_mode=function(t){return""},Blockly.Blocks.base_qrcode_continuous_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_image",name:"img",src:"../assets/images/qrcode-continuous.jpg",width:110,height:110}],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_continuous_mode=function(t){return""},Blockly.Blocks.base_qrcode_trigger={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_QRCODE_TRIGGER,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["qrcode"]}},Blockly.Python.base_qrcode_trigger=function(t){return"qr.trigger()\n"}},function(t,e){Blockly.Blocks.base_stepmotor_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_INIT,args0:[{type:"field_dropdown",name:"type",options:[["Full","Full"],["Half","Half"],["1/4","1/4"],["1/8","1/8"],["1/16","1/16"],["1/32","1/32"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_init=function(t){return`stepmotor = Stepmotor('${t.getFieldValue("type")||"Full"}')\n`},Blockly.Blocks.base_stepmotor_move_steps={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_MOVE_STEPS,args0:[{type:"input_value",name:"steps"},{type:"input_value",name:"clockwise"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_move_steps=function(t){return`stepmotor.move_steps(${Blockly.Python.valueToCode(t,"steps",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"clockwise",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.base_stepmotor_move_circles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_MOVE_CIRCLES,args0:[{type:"input_value",name:"circle"},{type:"input_value",name:"clockwise"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_move_circles=function(t){return`stepmotor.move_circles(${Blockly.Python.valueToCode(t,"circle",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"clockwise",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.base_stepmotor_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_ENABLE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_enable=function(t){return"stepmotor.enable()\n"},Blockly.Blocks.base_stepmotor_disbale={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_DISBALE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_disbale=function(t){return"stepmotor.disbale()\n"},Blockly.Blocks.base_stepmotor_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_RESET,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_reset=function(t){return"stepmotor.reset()\n"},Blockly.Blocks.base_stepmotor_get_voltage={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_GET_VOLTAGE,output:null,colour:Blockly.Msg.MATH_HUE}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_get_voltage=function(t){return["stepmotor.get_voltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_stepmotor_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_STEPMOTOR_GET_STATUS,output:null,colour:Blockly.Msg.MATH_HUE}},attrs:{keyword:["stepmotor"]}},Blockly.Python.base_stepmotor_get_status=function(t){return["stepmotor.get_status()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.base_dtunb_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_init=function(t){return"dtu_nb = DTU_NB()\n"},Blockly.Blocks.base_dtunb_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_power_down_module=function(t){return"dtu_nb.poweroff()\n"},Blockly.Blocks.base_dtunb_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_reset_module=function(t){return"dtu_nb.reset()\n"},Blockly.Blocks.base_dtunb_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_set_echo_mode=function(t){return[`dtu_nb.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_check_status=function(t){return["dtu_nb.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return:","0 -115 dBm or less","1 -111 dBm","2...30 -110... -54 dBm","31 -52 dBm or greater","99 not known or not detectable"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_check_single_quality=function(t){return["dtu_nb.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates NB-IoT)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates NB-IoT)']}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_check_network_registration=function(t){return["dtu_nb.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return:","0 Not registered, MT is not currently searching an operator to register to.","1 Registered, home network.","2 Not registered, but MT is currently trying to attach or searching an operator to register to.","3 Registration denied.","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates E-UTRAN)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates E-UTRAN)']}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_check_gprs_network_registration=function(t){return["dtu_nb.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_enable_pdp_context=function(t){return"dtu_nb.enable_PDP_context()\n"},Blockly.Blocks.base_dtunb_coap_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_CONNECT,args0:[{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.base_dtunb_coap_connect=function(t){return`dtu_nb.coap_connect(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_dtunb_coap_get={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return: True or False"]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");let e="true"===this.getFieldValue("tokenChoose");return t.setAttribute("isToken",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isToken");this.isToken=e,this.updateToken_(e)},updateToken_:function(t){if(this.getInput("token")){let e=this.getInput("token").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("token")}if(t&&(this.appendValueInput("token").setCheck("String"),!this.getInput("token").connection.targetConnection)){let t=o.createShadow("text_password",{name:"TEXT"});this.getInput("token").connection.setShadowDom(t)}},attrs:{keyword:["nb","coap"]}},Blockly.Python.base_dtunb_coap_get=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`dtu_nb.coap_get(${e}, ${n})`:`dtu_nb.coap_get(${e})`,[o,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_coap_post={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_POST,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.base_dtunb_coap_get.mutationToDom,domToMutation:Blockly.Blocks.base_dtunb_coap_get.domToMutation,updateToken_:Blockly.Blocks.base_dtunb_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.base_dtunb_coap_post=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`dtu_nb.coap_post(${e}, ${n}, content_format=${o}, ${l})`:`dtu_nb.coap_post(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_coap_put={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_PUT,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.base_dtunb_coap_get.mutationToDom,domToMutation:Blockly.Blocks.base_dtunb_coap_get.domToMutation,updateToken_:Blockly.Blocks.base_dtunb_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.base_dtunb_coap_put=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`dtu_nb.coap_put(${e}, ${n}, content_format=${o}, ${l})`:`dtu_nb.coap_put(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_coap_destroy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_DESTROY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Return: True or False"]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.base_dtunb_coap_destroy=function(t){return["dtu_nb.coap_destroy()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_connect=function(t){return`dtu_nb.mqtt_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_dtunb_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_disconnect=function(t){return"dtu_nb.mqtt_disconnect()\n"},Blockly.Blocks.base_dtunb_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_sub=function(t){return[`dtu_nb.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, nbiot_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def nbiot_mqtt_cb(nb_mq_topic, nb_mq_payload):\n  # global params\n  ${e} = nb_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = nb_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.base_dtunb_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_unsubscribe=function(t){return`dtu_nb.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.base_dtunb_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_publish=function(t){return`dtu_nb.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.base_dtunb_mqtt_check_connection={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_CHECK_CONNECTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["Check mqtt connection.","Return: 0/1 or False"]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_check_connection=function(t){return["dtu_nb.mqtt_check_connection()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.base_dtunb_mqtt_poll=function(t){return"dtu_nb.mqtt_poll()\n"},Blockly.Blocks.base_dtunb_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTUNB_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read=function(t){return["dtu_nb.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read_characters=function(t){return[`dtu_nb.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_readline=function(t){return["dtu_nb.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE,tool:["Write data"]}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_nb.write("+e+")\n":"dtu_nb.write(str("+e+"))\n"},Blockly.Blocks.base_dtunb_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_any=function(t){return["dtu_nb.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_nb.write("+e+'+"\\r\\n")\n':"dtu_nb.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.base_dtunb_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_raw_data=function(t){return`dtu_nb.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.base_dtunb_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read_coils=function(t){return[`dtu_nb.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read_discrete_inputs=function(t){return[`dtu_nb.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read_holding_registers=function(t){return[`dtu_nb.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_read_input_registers=function(t){return[`dtu_nb.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_single_coil=function(t){return[`dtu_nb.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_single_register=function(t){return[`dtu_nb.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_multiple_coils=function(t){return[`dtu_nb.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_dtunb_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTUNB_HUE}},attrs:{keyword:["dtu","nb"]}},Blockly.Python.base_dtunb_write_multiple_registers=function(t){return[`dtu_nb.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(1),l=n(0);Blockly.Blocks.base_lorawan868_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN868_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_init=function(t){return"dtu_lora868 = DTU_LoRaWAN()\n"},Blockly.Blocks.base_lorawan868_config_abp={init:function(){this.jsonInit(Object(o._configAbpInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_config_abp=function(t){return`dtu_lora868.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan868_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UART_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_ABP_CONFIG,output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_get_abp_config=function(t){return["dtu_lora868.get_ABP_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan868_config_otaa={init:function(){this.jsonInit(Object(o._configOtaaInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_config_otaa=function(t){var e=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`dtu_lora868.config_OTAA(${e}, ${n}, ${o=o.replace(/\s*/g,"")})\n`},Blockly.Blocks.base_lorawan868_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UART_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_OTAA_CONFIG,output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_get_otaa_config=function(t){return["dtu_lora868.get_OTAA_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan868_check_join_status={init:function(){this.jsonInit(Object(o._checkJoinInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_check_join_status=function(t){return["dtu_lora868.check_join_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan868_check_sent_status={init:function(){this.jsonInit(Object(o._checkSentInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_check_sent_status=function(t){return["dtu_lora868.check_uplink_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan868_check_downlink_data={init:function(){this.jsonInit(Object(o._checkDownlinkInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_check_downlink_data=function(t){return["dtu_lora868.check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan868_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"input_value",name:"channel"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_frequency_band_mask=function(t){return`dtu_lora868.set_frequency_band_mask(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan868_set_rx_window_param={init:function(){this.jsonInit(Object(o._rxWindowInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_set_rx_window_param=function(t){return`dtu_lora868.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan868_set_class_mode={init:function(){this.jsonInit(Object(o._classmodeInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_set_class_mode=function(t){return`dtu_lora868.set_class_mode(${t.getFieldValue("class_mode")})\n`},Blockly.Blocks.base_lorawan868_set_join_mode={init:function(){this.jsonInit(Object(o._joinmodeInit)()),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_set_join_mode=function(t){return`dtu_lora868.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan868_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SEND_DATA,args0:[{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=l.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_send_data=function(t){var e=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`dtu_lora868.send_data(${e}, 1, ${n})\n`:`dtu_lora868.send_data(${e})\n`,o},Blockly.Blocks.base_lorawan868_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_set_uplink_app_port=function(t){return`dtu_lora868.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan868_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_JOIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_join=function(t){return`dtu_lora868.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan868_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_set_uplink_mode=function(t){return`dtu_lora868.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan868_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read=function(t){return["dtu_lora868.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read_characters=function(t){return[`dtu_lora868.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_readline=function(t){return["dtu_lora868.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE,tool:["Write data"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora868.write("+e+")\n":"dtu_lora868.write(str("+e+"))\n"},Blockly.Blocks.base_lorawan868_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_any=function(t){return["dtu_lora868.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora868.write("+e+'+"\\r\\n")\n':"dtu_lora868.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.base_lorawan868_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_raw_data=function(t){return`dtu_lora868.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.base_lorawan868_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read_coils=function(t){return[`dtu_lora868.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read_discrete_inputs=function(t){return[`dtu_lora868.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read_holding_registers=function(t){return[`dtu_lora868.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_read_input_registers=function(t){return[`dtu_lora868.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_single_coil=function(t){return[`dtu_lora868.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_single_register=function(t){return[`dtu_lora868.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_multiple_coils=function(t){return[`dtu_lora868.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan868_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_write_multiple_registers=function(t){return[`dtu_lora868.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const i=[["OTAA mode","OTAA"],["ABP mode","ABP"]];Blockly.Blocks.base_lorawan868_config_mode={init:function(){this.jsonInit(this._init()),this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},_init:function(){return{message0:"",args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.mode}},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_config_mode=function(t){var e=t.getFieldValue("mode"),n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";l=l.replace(/\s*/g,"");var i=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let r;return r="OTAA"===e?`dtu_lora868.config_OTAA(${n}, ${o}, ${l})\n`:`dtu_lora868.config_ABP(${i}, ${a}, ${s})\n`,r},Blockly.Blocks.base_lorawan868_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN868_CONFIG,args0:[{type:"input_dummy"},{type:"input_value",name:"channel"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_config=function(t){let e=`dtu_lora868.set_frequency_band_mask(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;return e+=`dtu_lora868.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,e+=`dtu_lora868.set_class_mode(${t.getFieldValue("class_mode")})\n`,e+=`dtu_lora868.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,e},Blockly.Blocks.base_lorawan868_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_join_stop=function(t){return"dtu_lora868.join(0)\n"},Blockly.Blocks.base_lorawan868_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_START,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.base_lorawan868_join_start=function(t){return`dtu_lora868.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(1),l=n(0);Blockly.Blocks.base_lorawan915_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN915_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_init=function(t){return"dtu_lora915 = DTU_LoRaWAN()\n"},Blockly.Blocks.base_lorawan915_config_abp={init:function(){this.jsonInit(Object(o._configAbpInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_config_abp=function(t){return`dtu_lora915.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan915_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.TIMER_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_ABP_CONFIG,output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_get_abp_config=function(t){return["dtu_lora915.get_ABP_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan915_config_otaa={init:function(){this.jsonInit(Object(o._configOtaaInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_config_otaa=function(t){var e=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`dtu_lora915.config_OTAA(${e}, ${n}, ${o=o.replace(/\s*/g,"")})\n`},Blockly.Blocks.base_lorawan915_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.TIMER_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_OTAA_CONFIG,output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_get_otaa_config=function(t){return["dtu_lora915.get_OTAA_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan915_check_join_status={init:function(){this.jsonInit(Object(o._checkJoinInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_check_join_status=function(t){return["dtu_lora915.check_join_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan915_check_sent_status={init:function(){this.jsonInit(Object(o._checkSentInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_check_sent_status=function(t){return["dtu_lora915.check_uplink_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan915_check_downlink_data={init:function(){this.jsonInit(Object(o._checkDownlinkInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_check_downlink_data=function(t){return["dtu_lora915.check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.base_lorawan915_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"channel",options:l.lora915ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_frequency_band_mask=function(t){return`dtu_lora915.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`},Blockly.Blocks.base_lorawan915_set_rx_window_param={init:function(){this.jsonInit(Object(o._rxWindowInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_set_rx_window_param=function(t){return`dtu_lora915.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.base_lorawan915_set_class_mode={init:function(){this.jsonInit(Object(o._classmodeInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_set_class_mode=function(t){return`dtu_lora915.set_class_mode(${t.getFieldValue("class_mode")})\n`},Blockly.Blocks.base_lorawan915_set_join_mode={init:function(){this.jsonInit(Object(o._joinmodeInit)()),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_set_join_mode=function(t){return`dtu_lora915.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan915_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SEND_DATA,args0:[{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=l.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_send_data=function(t){var e=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`dtu_lora915.send_data(${e}, 1, ${n})\n`:`dtu_lora915.send_data(${e})\n`,o},Blockly.Blocks.base_lorawan915_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_set_uplink_app_port=function(t){return`dtu_lora915.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan915_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_JOIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_join=function(t){return`dtu_lora915.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.base_lorawan915_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_set_uplink_mode=function(t){return`dtu_lora915.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.base_lorawan915_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read=function(t){return["dtu_lora915.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE,tool:["return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read_characters=function(t){return[`dtu_lora915.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_readline=function(t){return["dtu_lora915.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TIMER_HUE,tool:["Write data"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora915.write("+e+")\n":"dtu_lora915.write(str("+e+"))\n"},Blockly.Blocks.base_lorawan915_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_any=function(t){return["dtu_lora915.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"dtu_lora915.write("+e+'+"\\r\\n")\n':"dtu_lora915.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.base_lorawan915_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_raw_data=function(t){return`dtu_lora915.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.base_lorawan915_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read_coils=function(t){return[`dtu_lora915.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read_discrete_inputs=function(t){return[`dtu_lora915.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read_holding_registers=function(t){return[`dtu_lora915.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_read_input_registers=function(t){return[`dtu_lora915.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_single_coil=function(t){return[`dtu_lora915.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_single_register=function(t){return[`dtu_lora915.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_multiple_coils=function(t){return[`dtu_lora915.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.base_lorawan915_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_write_multiple_registers=function(t){return[`dtu_lora915.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const i=[["OTAA mode","OTAA"],["ABP mode","ABP"]];Blockly.Blocks.base_lorawan915_config_mode={init:function(){this.jsonInit(this._init()),this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},_init:function(){return{message0:"",args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.mode}},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_config_mode=function(t){var e=t.getFieldValue("mode"),n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";l=l.replace(/\s*/g,"");var i=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let r;return r="OTAA"===e?`dtu_lora915.config_OTAA(${n}, ${o}, ${l})\n`:`dtu_lora915.config_ABP(${i}, ${a}, ${s})\n`,r},Blockly.Blocks.base_lorawan915_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_CONFIG,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:l.lora915ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_config=function(t){let e=`dtu_lora915.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`;return e+=`dtu_lora915.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,e+=`dtu_lora915.set_class_mode(${t.getFieldValue("class_mode")})\n`,e+=`dtu_lora915.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,e},Blockly.Blocks.base_lorawan915_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_join_stop=function(t){return"dtu_lora915.join(0)\n"},Blockly.Blocks.base_lorawan915_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_START,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.base_lorawan915_join_start=function(t){return`dtu_lora915.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.dtu_cat1_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DTU_CAT1_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_init=function(t){return"cat = DTU_CAT1()\n"},Blockly.Blocks.dtu_cat1_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_connect=function(t){return`cat.mqtt_to_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.dtu_cat1_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_disconnect=function(t){return"cat.mqtt_disconnect()\n"},Blockly.Blocks.dtu_cat1_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_sub=function(t){return[`cat.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, cat_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def cat_mqtt_cb(cat_mq_topic, cat_mq_payload):\n  # global params\n  ${e} = cat_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = cat_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.dtu_cat1_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_unsubscribe=function(t){return`cat.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.dtu_cat1_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_publish=function(t){return`cat.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.dtu_cat1_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_poll=function(t){return"cat.mqtt_poll()\n"},Blockly.Blocks.dtu_cat1_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_power_down_module=function(t){return"cat.poweroff()\n"},Blockly.Blocks.dtu_cat1_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_reset_module=function(t){return"cat.reset()\n"},Blockly.Blocks.dtu_cat1_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_set_echo_mode=function(t){return[`cat.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_check_status=function(t){return["cat.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Return:","0...7 As RXQUAL values in the table in GSM 05.08 [20]","subclause 7.2.4","99 Not known or not detectable"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_check_single_quality=function(t){return["cat.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_check_network_registration=function(t){return["cat.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Return:","0 not registered, ME is not currently searching an operator to register to","1 registered, home network","2 not registered, but ME is currently trying to attach or searching an operator to register to","3 registration denied","4 unknown","5 registered, roaming"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_check_gprs_network_registration=function(t){return["cat.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_enable_pdp_context=function(t){return"cat.enable_PDP_context()\n"},Blockly.Blocks.dtu_cat1_http_terminate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_TERMINATE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_http_terminate=function(t){return"cat.http_terminate()\n"},Blockly.Blocks.dtu_cat1_http_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Parameter:","url: Uniform Resource Locator","Return: ","False or (head, body)"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_http_get=function(t){return[`cat.http_get(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_http_post={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_POST,args0:[{type:"input_value",name:"url"},{type:"field_dropdown",name:"type",options:[["JSON","application/json"],["FORM","application/x-www-form-urlencoded"],["TEXT","text/plain"]]},{type:"input_value",name:"data"}],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Parameter:","url: Uniform Resource Locator","type: application/json, application/x-www-form-urlencoded, text/plain","data: string","Return: ","False or (head, body)"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_http_post=function(t){return[`cat.http_post(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, '${t.getFieldValue("type")}', ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_get_imei={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_IMEI,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_get_imei=function(t){return["cat.get_IMEI()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_get_ccid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_CCID,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_get_ccid=function(t){return["cat.get_CCID()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata","cat","dtu"]}},Blockly.Python.dtu_cat1_ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`cat.get_ezdata(ezdata_get_${this.cbId}cb, ${n}, ${e})\n`},Blockly.Blocks.dtu_cat1_ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value %2 callback with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null",align:"RIGHT"},{type:"input_statement",name:"success_fun"}],inputsInline:!1,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},mutationToDom:Blockly.Blocks.dtu_cat1_ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.dtu_cat1_ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata","cat","dtu"]}},Blockly.Python.dtu_cat1_ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def ezdata_get_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),""+l},Blockly.Blocks.dtu_cat1_ezdata_save={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_SAVE,args0:[{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"},{type:"field_dropdown",name:"mode",options:[["Single data","0"],["List data","1"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["ezdata","cat","dtu"]}},Blockly.Python.dtu_cat1_ezdata_save=function(t){var e=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`cat.set_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${n}, ${e}, ${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.dtu_cat1_ezdata_remove={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_REMOVE,args0:[{type:"input_value",name:"topic"},{type:"input_value",name:"token"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["ezdata","cat","dtu"]}},Blockly.Python.dtu_cat1_ezdata_remove=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`cat.remove_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})\n`},Blockly.Blocks.dtu_cat1_modbus_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DTU_CAT1_MODBUS_INIT,args0:[{type:"input_value",name:"bandrate"},{type:"field_dropdown",name:"mode",options:[["Master","1"],["Slave","2"]]},{type:"input_value",name:"slaveAddr"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_init=function(t){return`modbus = cat.modbus_init(23, 33, ${Blockly.Python.valueToCode(t,"bandrate",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")}, ${Blockly.Python.valueToCode(t,"slaveAddr",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.dtu_cat1_modbus_master_u_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_read_coils=function(t){return[`modbus.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_read_discrete_inputs=function(t){return[`modbus.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_read_holding_registers=function(t){return[`modbus.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_read_input_registers=function(t){return[`modbus.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_write_single_coil=function(t){return[`modbus.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_write_single_register=function(t){return[`modbus.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_write_multiple_coils=function(t){return[`modbus.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_master_u_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_master_u_write_multiple_registers=function(t){return[`modbus.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};let l=[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"],["WRITE_SINGLE_COIL","5"],["WRITE_SINGLE_REGISTER","6"],["WRITE_MULTIPLE_COILS","15"],["WRITE_MULTIPLE_REGISTERS","16"]];Blockly.Blocks.dtu_cat1_modbus_slave_rtu_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:l},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_init_func=function(t){return`modbus.function_init(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_UPDATE_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"]]},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_update_func=function(t){return`modbus.update_process(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_receive_adu={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_RECEIVE_ADU,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_receive_adu=function(t){return["modbus.receive_req_create_pdu()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_SEND,args0:[{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_send=function(t){return`modbus.create_slave_response(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_get_function={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_FUNCTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_get_function=function(t){return["modbus.find_function",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_fun_status={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_FUN_STATUS,args0:[{type:"field_dropdown",name:"FUNC",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_fun_status=function(t){return[""+t.getFieldValue("FUNC"),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_get_address={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_ADDRESS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_get_address=function(t){return["modbus.find_address",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_modbus_slave_rtu_get_quantity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_QUANTITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_modbus_slave_rtu_get_quantity=function(t){return["modbus.find_quantity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_uart_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Read uart data","return: bytes, empty will return None"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_read=function(t){return["modbus._mdbus_uart.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_uart_read_characters={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Read number uart data","return: bytes, empty will return None"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_read_characters=function(t){return[`modbus._mdbus_uart.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_uart_readline={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_readline=function(t){return["modbus._mdbus_uart.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_uart_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:["Write data"]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+")\n":"modbus._mdbus_uart.write(str("+e+"))\n"},Blockly.Blocks.dtu_cat1_uart_any={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_any=function(t){return["modbus._mdbus_uart.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dtu_cat1_uart_write_line={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+'+"\\r\\n")\n':"modbus._mdbus_uart.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.dtu_cat1_uart_write_raw_data={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DTU_CAT1_HUE}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_uart_write_raw_data=function(t){return`modbus._mdbus_uart.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.dtu_cat1_mqtt_check_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COM_CAT1_MQTT_CHECK_CONNECT,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DTU_CAT1_HUE,tool:[]}},attrs:{keyword:["dtu","cat"]}},Blockly.Python.dtu_cat1_mqtt_check_connect=function(t){return["cat.is_connect_mqtt()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.nxt_init={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.NXT_INIT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]},{type:"input_dummy"},{type:"input_dummy",name:"PORT"},{type:"field_dropdown",name:"PORT",options:[["1","1"],["2","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.NXT_MOTOR_HUE}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_init=function(t){var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("PORT")||"";return Blockly.addModule("lego"),Blockly.addDeclare(e),"bala_motor."+e+" = lego.NXT_Motor(port="+n+")\n"},Blockly.Blocks.nxt_set_pwm={init:function(){this.jsonInit(this._nxtsetpwm())},_nxtsetpwm:function(){return{message0:Blockly.Msg.NXT_SET_PWM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"ROTATE",options:[[Blockly.Msg._OPTION_TO_CLOCKWISE,"CW"],[Blockly.Msg._OPTION_TO_ANTICLOCKWISE,"CCW"]]},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["set motor speed","pwm: -255 ~ 255"]}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_set_pwm=function(t){Blockly.addModule("lego");var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("ROTATE")||"",o=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"CCW"==n&&0!=o&&(o="-"+o),"bala_motor."+e+".set_pwm("+o+")\n"},Blockly.Blocks.nxt_run={init:function(){this.jsonInit(this._nxtrun())},_nxtrun:function(){return{message0:Blockly.Msg.NXT_RUN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg._OPTION_TO_FORWARD,"forward"],[Blockly.Msg._OPTION_TO_BACKWARD,"backward"]]},{type:"input_value",name:"DISTANCE"},{type:"input_dummy"},{type:"input_value",name:"SPEED"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["Control motor movement dis distance","dis: -1024 ~ 1024","maxSpeed: 40 ~ 255"]}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_run=function(t){Blockly.addModule("lego");var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("DIRECTION")||"",o=Blockly.Python.valueToCode(t,"DISTANCE",Blockly.Python.ORDER_FUNCTION_CALL)||"500";return"bala_motor."+e+".run_distance("+(o="forward"==n?o:-o)+", "+(Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||"255")+")\n"},Blockly.Blocks.nxt_run_goto={init:function(){this.jsonInit(this._nxtrun())},_nxtrun:function(){return{message0:Blockly.Msg.NXT_RUN_GOTO,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]},{type:"input_value",name:"DISTANCE"},{type:"input_dummy"},{type:"input_value",name:"SPEED"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["Control motor go to position","dis: -4096 ~ 4096","maxSpeed: 40 ~ 255"]}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_run_goto=function(t){return Blockly.addModule("lego"),"bala_motor."+(t.getFieldValue("VAR")||"")+".run_to("+(Blockly.Python.valueToCode(t,"DISTANCE",Blockly.Python.ORDER_FUNCTION_CALL)||"500")+", "+(Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||"255")+")\n"},Blockly.Blocks.nxt_stop={init:function(){this.jsonInit(this._nextstop())},_nextstop:function(){return{message0:Blockly.Msg.NXT_STOP,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["Set motor speed to zero"]}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_stop=function(t){return Blockly.addModule("lego"),"bala_motor."+(t.getFieldValue("VAR")||"")+".stop()\n"},Blockly.Blocks.nxt_read_encoder={init:function(){this.jsonInit(this._nxtreadencoder())},_nxtreadencoder:function(){return{message0:Blockly.Msg.NXT_READ_ENCODER,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:[["M1","M1"],["M2","M2"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["Read motor encoder","return: now position"]}},attrs:{keyword:["bala","balamotor"]}},Blockly.Python.nxt_read_encoder=function(t){return Blockly.addModule("lego"),["bala_motor."+(t.getFieldValue("VAR")||"")+".read_encoder()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.m5bala_move={init:function(){this.jsonInit(this._m5balamove())},_m5balamove:function(){return{message0:Blockly.Msg.M5BALA_MOVE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg._OPTION_TO_FORWARD,"forward"],[Blockly.Msg._OPTION_TO_BACKWARD,"backward"]]},{type:"input_value",name:"SPEED"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:260,tool:["Control bala Forward or backward","speed: -50 ~ 50","note: speed > 0 go ahead"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_move=function(t){var e=t.getFieldValue("DIRECTION"),n=Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||"50";return"backward"===e&&(n=-n),Blockly.addModule("m5bala"),"m5bala.move("+n+")\n"},Blockly.Blocks.m5bala_turn={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5BALA_TURN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg._OPTION_TO_RIGHTWHEEL,"right"],[Blockly.Msg._OPTION_TO_LEFTWHEEL,"left"]]},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:260,tool:["Control bala direction","speed: -50 ~ 50","note: speed > 0 turn right"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_turn=function(t){var e=t.getFieldValue("DIRECTION"),n=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"45";return"left"===e&&(n=-n),Blockly.addModule("m5bala"),"m5bala.turn("+n+")\n"},Blockly.Blocks.m5bala_rotate={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5BALA_ROTATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg._OPTION_TO_RIGHT,"right"],[Blockly.Msg._OPTION_TO_LEFT,"left"]]},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:260,tool:["Control bala rotate","speed: -50 ~ 50","note: speed > 0 turn right"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_rotate=function(t){var e=t.getFieldValue("DIRECTION"),n=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"45";return"left"===e&&(n=-n),Blockly.addModule("m5bala"),"m5bala.rotate("+n+")\n"},Blockly.Blocks.m5bala_get_angle={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5BALA_GET_ANGLE,args0:[],inputsInline:!0,output:null,colour:260,tool:["Get bala now angle"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_get_angle=function(t){return Blockly.addModule("m5bala"),["m5bala.angleX",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.m5bala_set_offset={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5BALA_SET_OFFSET,args0:[{type:"input_value",name:"ANGLEX"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:260,tool:["Set bala angle offset"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_set_offset=function(t){var e=Blockly.Python.valueToCode(t,"ANGLEX",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return Blockly.addModule("m5bala"),`m5bala.angleX_offset=${e}\n`},Blockly.Blocks.m5bala_loop={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5BALA_LOOP,args0:[],inputsInline:!0,previousStatement:null,nextStatement:null,colour:260,tool:["Update bala status","Need use this fun in loop"]}},attrs:{keyword:["bala"]}},Blockly.Python.m5bala_loop=function(t){return Blockly.addModule("m5bala"),"m5bala.balance()\n"}},function(t,e){var n=function(){return[["DC Motor1","LegoM1"],["DC Motor2","LegoM2"],["DC Motor3","LegoM3"],["DC Motor4","LegoM4"]]};Blockly.Blocks.lego_register_motor={init:function(){this.jsonInit(this._legoregisiermotor())},_legoregisiermotor:function(){return{message0:Blockly.Msg.LEGO_REGISTER_MOTOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_dummy",name:"PORT"},{type:"field_dropdown",name:"PORT",options:[["1","1"],["2","2"],["3","3"],["4","4"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE}},attrs:{keyword:["lego"]}},Blockly.Python.lego_register_motor=function(t){var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("PORT")||"";return Blockly.addModule("lego_motor"),Blockly.addDeclare(e),e+" = NXT_Motor("+n+")\n"},Blockly.Blocks.lego_set_pwm={init:function(){this.jsonInit(this._logoregistermotor())},_logoregistermotor:function(){return{message0:Blockly.Msg.LEGO_SET_PWM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_dummy"},{type:"field_dropdown",name:"ROTATE",options:[[Blockly.Msg._OPTION_TO_CLOCKWISE,"CW"],[Blockly.Msg._OPTION_TO_ANTICLOCKWISE,"CCW"]]},{type:"input_value",name:"PWM"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE,tool:["Set motor speed","pwm: -255 ~ 255"]}},attrs:{keyword:["lego"]}},Blockly.Python.lego_set_pwm=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("ROTATE")||"",o=Blockly.Python.valueToCode(t,"PWM",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"CCW"==n&&0!=o&&(o="-"+o),"lego_motor.M"+(e=e.split("M")[1])+".set_pwm("+o+")\n"},Blockly.Blocks.lego_set_speed={init:function(){this.jsonInit(this._nxtrun())},_nxtrun:function(){return{message0:Blockly.Msg.LEGO_SET_SPEED,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_dummy"},{type:"field_dropdown",name:"ROTATE",options:[[Blockly.Msg._OPTION_TO_CLOCKWISE,"CW"],[Blockly.Msg._OPTION_TO_ANTICLOCKWISE,"CCW"]]},{type:"input_value",name:"SPEED"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE}},attrs:{keyword:["lego"]}},Blockly.Python.lego_set_speed=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("ROTATE")||"",o=Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"CCW"==n&&0!=o&&(o="-"+o),"lego_motor.M"+(e=e.split("M")[1])+".set_speed("+o+")\n"},Blockly.Blocks.lego_set_angle={init:function(){this.jsonInit(this._logosetangle())},_logosetangle:function(){return{message0:Blockly.Msg.LEGO_SET_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_dummy"},{type:"field_dropdown",name:"ROTATE",options:[[Blockly.Msg._OPTION_TO_CLOCKWISE,"CW"],[Blockly.Msg._OPTION_TO_ANTICLOCKWISE,"CCW"]]},{type:"input_value",name:"ANGLE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE}},attrs:{keyword:["lego"]}},Blockly.Python.lego_set_angle=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("ROTATE")||"",o=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"CCW"==n&&0!=o&&(o="-"+o),"lego_motor.M"+(e=e.split("M")[1])+".set_angle("+o+")\n"},Blockly.Blocks.lego_set_angle_zero={init:function(){this.jsonInit(this._logosetanglezero())},_logosetanglezero:function(){return{message0:Blockly.Msg.LEGO_SET_ANGLE_ZERO,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE}},attrs:{keyword:["lego"]}},Blockly.Python.lego_set_angle_zero=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"";return"lego_motor.M"+(e=e.split("M")[1])+".set_angle_zero()\n"},Blockly.Blocks.lego_stop={init:function(){this.jsonInit(this._logostep())},_logostep:function(){return{message0:Blockly.Msg.LEGO_STEP,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE,tool:["Set motor speed to zero"]}},attrs:{keyword:["lego"]}},Blockly.Python.lego_stop=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"";return"lego_motor.M"+(e=e.split("M")[1])+".stop()\n"},Blockly.Blocks.lego_brake={init:function(){this.jsonInit(this._logostep())},_logostep:function(){return{message0:Blockly.Msg.LEGO_BRAKE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE}},attrs:{keyword:["lego"]}},Blockly.Python.lego_brake=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"";return"lego_motor.M"+(e=e.split("M")[1])+".brake()\n"},Blockly.Blocks.lego_read_encoder={init:function(){this.jsonInit(this._nxtreadencoder())},_nxtreadencoder:function(){return{message0:Blockly.Msg.LEGO_READ_ENCODER,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LEGO_MOTOR_HUE,tool:["Read motor encoder","return: now position"]}},attrs:{keyword:["lego"]}},Blockly.Python.lego_read_encoder=function(t){Blockly.addModule("lego");var e=t.getFieldValue("VAR")||"";return["lego_motor.M"+(e=e.split("M")[1])+".encoder_read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lego_clear={init:function(){this.jsonInit(this._logostep())},_logostep:function(){return{message0:Blockly.Msg.LEGO_CLEAR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LEGO_MOTOR_HUE,tool:["Set motor encoder to zero"]}},attrs:{keyword:["lego"]}},Blockly.Python.lego_clear=function(t){Blockly.addModule("lego_motor");var e=t.getFieldValue("VAR")||"";return"lego_motor.M"+(e=e.split("M")[1])+".encode_clear()\n"}},function(t,e){function n(t){return t>7?7:t<-7?-7:t}Blockly.Blocks.lidarcar_setrgb={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_SETRGB,args0:[{type:"field_colour",name:"COLOR",colour:"#ff0000"},{type:"field_dropdown",name:"DIR",options:[["front","front"],["back","back"],["all","all"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}}},Blockly.Python.lidarcar_setrgb=function(t){var e=t.getFieldValue("COLOR")||"",n=t.getFieldValue("DIR")||"";return`lidarbot0.setRgb(${e.replace("#","0x")},'${n}')\n`},Blockly.Blocks.lidarcar_setOnergb={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_SETONERGB,args0:[{type:"field_colour",name:"COLOR",colour:"#ff0000"},{type:"input_value",name:"NUM"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"Parameter values range from 0 to 19"}}},Blockly.Python.lidarcar_setOnergb=function(t){var e=t.getFieldValue("COLOR")||"";return"lidarbot0.setOneRgb("+(Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+e.replace("#","0x")+")\n"},Blockly.Blocks.lidarcar_goahead={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_GOAHEAD,args0:[{type:"input_value",name:"NUM"},{type:"field_dropdown",name:"KEY",options:[["goAhead","goAhead"],["goback","goBack"],["turnleft","turnLeft"],["turnright","turnRight"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"Parameter values range from 0 to 7"}}},Blockly.Python.lidarcar_goahead=function(t){var e=Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`lidarbot0.${t.getFieldValue("KEY")||""}(${e=n(e)})\n`},Blockly.Blocks.lidarcar_goback={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_GOBACK,args0:[{type:"input_value",name:"NUM"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"Parameter values range from 0 to 7"}}},Blockly.Python.lidarcar_goback=function(t){var e=Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"lidarbot0.goBack("+(e=n(e))+")\n"},Blockly.Blocks.lidarcar_turnLeft={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_TURNLEFT,args0:[{type:"input_value",name:"NUM"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"Parameter values range from 0 to 7"}}},Blockly.Python.lidarcar_turnLeft=function(t){var e=Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"lidarbot0.turnLeft("+(e=n(e))+")\n"},Blockly.Blocks.lidarcar_turnRight={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_TURNRIGHT,args0:[{type:"input_value",name:"NUM"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"Parameter values range from 0 to 7"}}},Blockly.Python.lidarcar_turnRight=function(t){var e=Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return"lidarbot0.turnRight("+(e=n(e))+")\n"},Blockly.Blocks.lidarcar_setStepMotor={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_SETSTEPMOTOR,args0:[{type:"input_value",name:"NUM"},{type:"input_value",name:"NUM1"},{type:"input_value",name:"NUM2"},{type:"input_value",name:"NUM3"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"The values of the four parameters are -7~7"}}},Blockly.Python.lidarcar_setStepMotor=function(t){var e=Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"NUM1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"NUM2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"NUM3",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`lidarbot0.setStepMotor(${e=n(e)},${o=n(o)},${l=n(l)},${i=n(i)})\n`},Blockly.Blocks.lidarcar_setServo={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_SETSERVO,args0:[{type:"input_value",name:"NUM"},{type:"input_value",name:"ANGLE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}}},Blockly.Python.lidarcar_setServo=function(t){return"lidarbot0.setServo("+(Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.lidarcar_control={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_CONTROL,args0:[{type:"input_value",name:"NUMX"},{type:"input_value",name:"NUMY"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"The values of both parameters are -7~7"}}},Blockly.Python.lidarcar_control=function(t){return"lidarbot0.controlWheel("+(Blockly.Python.valueToCode(t,"NUMX",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"NUMY",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.lidarcar_drawMap={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_DRAWMAP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}}},Blockly.Python.lidarcar_drawMap=function(t){return"lidarbot0.lidar.draw_map()\n"},Blockly.Blocks.lidarcar_getdistance={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LIDARCAR_GETDISTANCE,args0:[{type:"input_value",name:"NUY"}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tooltib:"The parameters range from 0 to 365"}}},Blockly.Python.lidarcar_getdistance=function(t){return[`lidarbot0.lidar.get_distance(${Blockly.Python.valueToCode(t,"NUY",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.lorawan_initrx={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LORAWAN_INITTRX,args0:[],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:["If receive data will call this fun"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_initrx=function(t){let e=`def lorawan0_cb(data):\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),e+="lorawan0.initRxMode(lorawan0_cb)\n",e},Blockly.Blocks.lorawan_initp2p={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LORAWAN_INITP2P,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TIMER_HUE,tool:["Set LoRaWAN communication frq","Frq: 433~470, 868~915"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_initp2p=function(t){return`lorawan0.initP2PMode(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lorawan_data={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LORAWAN_DATA,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.TIMER_HUE,tool:["Get receive data","note: only useful in rx mode fun"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_data=function(t){return["data",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_txt={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.LORAWAN_TXT,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TIMER_HUE,tool:["LoRaWAN send data","note: data len < 15"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_txt=function(t){return`lorawan0.txStr(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){Blockly.Blocks.lorawan_network_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_RESET,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_reset=function(t){return["lorawan.reset()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_reset_default={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_RESET_DEFAULT,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_reset_default=function(t){return["lorawan.reset_module_to_default()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_devaddr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_DEVADDR,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return\uff1adevice address: xx:xx:xx:xx 4 bytes"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_devaddr=function(t){return["lorawan.get_DevAddr()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_devaddr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_DEVADDR,inputsInline:!0,output:null,args0:[{type:"input_value",name:"devaddr"}],colour:Blockly.Msg.LCD_HUE,tool:["device address: xx:xx:xx:xx","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_devaddr=function(t){return[`lorawan.set_DevAddr(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_deveui={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_DEVEUI,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return\uff1aeui: xx:xx:xx:xx:xx:xx:xx:xx 8 bytes"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_deveui=function(t){return["lorawan.get_DevEui()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_deveui={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_DEVEUI,inputsInline:!0,output:null,args0:[{type:"input_value",name:"deveui"}],colour:Blockly.Msg.LCD_HUE,tool:["device eui: xx:xx:xx:xx:xx:xx:xx:xx 8 bytes","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_deveui=function(t){return[`lorawan.set_DevEui(${Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_appeui={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_APPEUI,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return\uff1aeui: xx:xx:xx:xx:xx:xx:xx:xx 8 bytes"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_appeui=function(t){return["lorawan.get_AppEui()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_appeui={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_APPEUI,inputsInline:!0,output:null,args0:[{type:"input_value",name:"appeui"}],colour:Blockly.Msg.LCD_HUE,tool:["app eui: xx:xx:xx:xx:xx:xx:xx:xx 8 bytes","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_appeui=function(t){return[`lorawan.set_AppEui(${Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_appkey={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_APPKEY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"AppKey"}],colour:Blockly.Msg.LCD_HUE,tool:["key: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx 16 bytes","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_appkey=function(t){var e=Blockly.Python.valueToCode(t,"AppKey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return[`lorawan.set_AppKey(${e=e.replace(/\s*/g,"")})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_appsessionkey={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_APPSESSIONKEY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"AppSKey"}],colour:Blockly.Msg.LCD_HUE,tool:["key: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx 16 bytes","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_appsessionkey=function(t){return[`lorawan.set_APPSKEY(${Blockly.Python.valueToCode(t,"AppSKey",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_nwkskey={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_NWKSKEY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"NWKSKEY"}],colour:Blockly.Msg.LCD_HUE,tool:["key: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx 16 bytes","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_nwkskey=function(t){return[`lorawan.set_NWKSKEY(${Blockly.Python.valueToCode(t,"NWKSKEY",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_MODE,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"MODE",options:[["LWOTAA","LWOTAA"],["LWABP","LWABP"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_mode=function(t){return[`lorawan.set_LoRaWAN_mode("${t.getFieldValue("MODE")||"LWOTAA"}")`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_band_plan={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_BAND_PLAN,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_band_plan=function(t){return["lorawan.get_band_plan()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_band_plan={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_BAND_PLAN,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"band",options:[["EU868","EU868"],["US915","US915"],["CN779","CN779"],["EU433","EU433"],["AU915","AU915"],["CN470","CN470"],["AS923","AS923"],["KR920","KR920"],["IN865","IN865"],["STE920","STE920"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_band_plan=function(t){return[`lorawan.set_band_plan(lorawan.${t.getFieldValue("band")||"EU868"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_datarate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_DATARATE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_datarate=function(t){return["lorawan.get_datarate()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_datarate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_DATARATE,inputsInline:!0,output:null,args0:[{type:"input_value",name:"datarate"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_datarate=function(t){return[`lorawan.set_datarate(${Blockly.Python.valueToCode(t,"datarate",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_default_datarate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_DEFAULT_DATARATE,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"datarate",options:[["DR0","DR0"],["DR1","DR1"],["DR2","DR2"],["DR3","DR3"],["DR4","DR4"],["DR5","DR5"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_default_datarate=function(t){return[`lorawan.set_default_datarate(lorawan.${t.getFieldValue("datarate")||"DR0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_channel_frequency={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_CHANNEL_FREQUENCY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"ch_id"}],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_channel_frequency=function(t){return[`lorawan.get_channel_frequency(${Blockly.Python.valueToCode(t,"ch_id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_channel_frequency={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_CHANNEL_FREQUENCY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"ch_id"},{type:"input_value",name:"freq"},{type:"field_dropdown",name:"dr_min",options:[["DR0","DR0"],["DR1","DR1"],["DR2","DR2"],["DR3","DR3"],["DR4","DR4"],["DR5","DR5"]]},{type:"field_dropdown",name:"dr_max",options:[["DR0","DR0"],["DR1","DR1"],["DR2","DR2"],["DR3","DR3"],["DR4","DR4"],["DR5","DR5"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_channel_frequency=function(t){return[`lorawan.set_channel_frequency(${Blockly.Python.valueToCode(t,"ch_id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, lorawan.${t.getFieldValue("dr_min")||"DR0"}, lorawan.${t.getFieldValue("dr_max")||"DR0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_del_channel_frequency={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_DEL_CHANNEL_FREQUENCY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"ch_id"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_del_channel_frequency=function(t){return[`lorawan.delete_channel_frequency(${Blockly.Python.valueToCode(t,"ch_id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_enable_channels={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_ENABLE_CHANNELS,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_enable_channels=function(t){return["lorawan.get_enable_channels()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_enable_channels={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_ENABLE_CHANNELS,inputsInline:!0,output:null,args0:[{type:"input_value",name:"ch_id"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_enable_channels=function(t){return[`lorawan.enable_channels(${Blockly.Python.valueToCode(t,"ch_id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_adaptive_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_ADAPTIVE_STATUS,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_adaptive_status=function(t){return["lorawan.get_adaptive_datarate_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_adaptive_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_ADAPTIVE_STATUS,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"status",options:[["ON","ON"],["OFF","OFF"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_adaptive_status=function(t){return[`lorawan.set_adaptive_datarate("${t.getFieldValue("status")||"ON"}")`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_class_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_CLASS_MODE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: A or C"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_class_mode=function(t){return["lorawan.get_class_mode()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_class_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_CLASS_MODE,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"mode",options:[["A","A"],["C","C"]]}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_class_mode=function(t){return[`lorawan.set_class_mode("${t.getFieldValue("mode")||"A"}")`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_tx_power={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_TX_POWER,inputsInline:!0,output:null,args0:[{type:"input_value",name:"power"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_tx_power=function(t){return[`lorawan.set_tx_power(${Blockly.Python.valueToCode(t,"power",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_JOIN,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: 0: faild or 1: success or -1: busy"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_join=function(t){return["lorawan.join_LoRaWAN_network()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_PORT,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:['return: port num(string) like "8" or "1" ']}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_port=function(t){return["lorawan.get_port()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_PORT,inputsInline:!0,output:null,args0:[{type:"input_value",name:"port"}],colour:Blockly.Msg.LCD_HUE,tool:["port: 0 ~ 233","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_port=function(t){return[`lorawan.set_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_send_confirm_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SEND_CONFIRM_MSG,inputsInline:!0,output:null,args0:[{type:"input_value",name:"msg"}],colour:Blockly.Msg.LCD_HUE,tool:["return: 0 or 1"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_send_confirm_msg=function(t){return[`lorawan.send_confirm_msg(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_send_unconfirm_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SEND_UNCONFIRM_MSG,inputsInline:!0,output:null,args0:[{type:"input_value",name:"msg"}],colour:Blockly.Msg.LCD_HUE,tool:["return: 0 or 1"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_send_unconfirm_msg=function(t){return[`lorawan.send_unconfirm_msg(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_send_confirm_hex_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SEND_CONFIRM_HEX_MSG,inputsInline:!0,output:null,args0:[{type:"input_value",name:"msg"}],colour:Blockly.Msg.LCD_HUE,tool:["return: 0 or 1"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_send_confirm_hex_msg=function(t){return[`lorawan.send_confirm_hex_msg(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_send_unconfirm_hex_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SEND_UNCONFIRM_HEX_MSG,inputsInline:!0,output:null,args0:[{type:"input_value",name:"msg"}],colour:Blockly.Msg.LCD_HUE,tool:["return: 0 or 1"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_send_unconfirm_hex_msg=function(t){return[`lorawan.send_unconfirm_hex_msg(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_downlink_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_DOWNLINK_MSG,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_downlink_msg=function(t){return["lorawan.get_downlink_msg()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_downlink_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_DOWNLINK_STATUS,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_downlink_status=function(t){return["lorawan.get_downlink_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_unconfirmed_repeat_time={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_UNCONFIRMED_REPEAT_TIME,inputsInline:!0,output:null,args0:[{type:"input_value",name:"times"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_unconfirmed_repeat_time=function(t){return[`lorawan.set_unconfirmed_repeat_time(${Blockly.Python.valueToCode(t,"times",Blockly.Python.ORDER_FUNCTION_CALL)})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_confirmed_repeat_time={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_CONFIRMED_REPEAT_TIME,inputsInline:!0,output:null,args0:[{type:"input_value",name:"times"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_confirmed_repeat_time=function(t){return[`lorawan.set_confirmed_repeat_time(${Blockly.Python.valueToCode(t,"times",Blockly.Python.ORDER_FUNCTION_CALL)})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_rxwin2_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_RXWIN2_CONFIG,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_rxwin2_config=function(t){return["lorawan.get_RXWIN2_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_rxwin2_daterate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_RXWIN2_DATERATE,inputsInline:!0,output:null,args0:[{type:"input_value",name:"freq"},{type:"field_dropdown",name:"dr",options:[["DR0","DR0"],["DR1","DR1"],["DR2","DR2"],["DR3","DR3"],["DR4","DR4"],["DR5","DR5"]]}],colour:Blockly.Msg.LCD_HUE,tool:["freq: num like 433.3","return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_rxwin2_daterate=function(t){return[`lorawan.set_RXWIN2_freq_daterate(${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, lorawan.${t.getFieldValue("dr")||"DR0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_rxwin2_spreadfactor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_RXWIN2_SPREADFACTOR,inputsInline:!0,output:null,args0:[{type:"input_value",name:"freq"},{type:"input_value",name:"sf"},{type:"input_value",name:"bw"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_rxwin2_spreadfactor=function(t){return[`lorawan.set_RXWIN2_freq_SpreadFactor_bandwidth(${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"sf",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"bw",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_get_rxwin1_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GET_RXWIN1_CONFIG,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_get_rxwin1_config=function(t){return["lorawan.get_RXWIN1_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_set_rxwin1_channel_frequency={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_SET_RXWIN1_CHANNEL_FREQUENCY,inputsInline:!0,output:null,args0:[{type:"input_value",name:"ch"},{type:"input_value",name:"freq"}],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_set_rxwin1_channel_frequency=function(t){return[`lorawan.set_RXWIN1_channel_frequency(${Blockly.Python.valueToCode(t,"ch",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_go_to_sleep={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_GO_TO_SLEEP,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_go_to_sleep=function(t){return["lorawan.go_to_sleep()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan_network_wakeup={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN_NETWORK_WAKEUP,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LCD_HUE,tool:["return: True or False"]}},attrs:{keyword:["lorawan"]}},Blockly.Python.lorawan_network_wakeup=function(t){return["lorawan.wakeup()",Blockly.Python.ORDER_MEMBER]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"servo"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.servo_angle={init:function(){this.jsonInit(this._servoangle())},_servoangle:function(){return{message0:Blockly.Msg.SERVO_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"]]},{type:"input_dummy"},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:["num: 0 ~ 11","angle: 0 ~ 180, int"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_angle=function(t){return Blockly.addModule("servo"),"servo.write_angle("+(t.getFieldValue("INDEX")||"0")+", "+(Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.servo_write={init:function(){this.jsonInit(this._servowirte())},_servowirte:function(){return{message0:Blockly.Msg.SERVO_WRITE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"]]},{type:"input_dummy"},{type:"input_value",name:"TIME"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:["num: 0 ~ 11","us: 1000 ~ 2000"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_write=function(t){return Blockly.addModule("servo"),"servo.write_us("+(t.getFieldValue("INDEX")||"0")+", "+(Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"600")+")\n"},Blockly.Blocks.servo_unit_write_us={init:function(){this.jsonInit(this._servowirteus())},_servowirteus:function(){return{message0:Blockly.Msg.SERVO_UNIT_WRITE_US,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"TIME"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:["Set High duration time","time: 500 ~ 2500 (us)"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_unit_write_us=function(t){return t.getFieldValue("VARNAME")+".write_us("+(Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"600")+")\n"},Blockly.Blocks.servo_unit_write_angle={init:function(){this.jsonInit(this._servowirteangle())},_servowirteangle:function(){return{message0:Blockly.Msg.SERVO_UNIT_WRITE_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"ANGLE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.SERVO_HUE,tool:["Turn servo degree","degree: 0 ~ 180"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_unit_write_angle=function(t){return t.getFieldValue("VARNAME")+".write_angle("+(Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"}},function(t,e){Blockly.Blocks.servo2_position={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SERVO2_POSITION,args0:[{type:"input_value",name:"INDEX"},{type:"input_value",name:"DEGREES"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LISTS_HUE,tool:["index: 0 ~ 15","degrees: 0 ~ 180"]}},attrs:{keyword:["servo","servo2"]}},Blockly.Python.servo2_position=function(t){return Blockly.addModule("servo2"),`servo2.position(${Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"DEGREES",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.servo2_release={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SERVO2_RELEASE,args0:[{type:"input_value",name:"INDEX"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LISTS_HUE,tool:["index: 0 ~ 15"]}},attrs:{keyword:["servo","servo2"]}},Blockly.Python.servo2_release=function(t){return Blockly.addModule("servo2"),`servo2.release(${Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){Blockly.Blocks.motor_instance={init:function(){this.jsonInit(this._motorInstance())},_motorInstance:function(){return{message0:Blockly.Msg.MOTOR_INSTANCE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]},{type:"input_dummy"},{type:"field_input",name:"ADDRESS",text:"0x70"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_instance=function(t){return`${t.getFieldValue("X_VAR_MOTOR")||"stepmotor1"} = module.get(module.STEP_MOTOR, ${t.getFieldValue("ADDRESS")||"0x70"})\n`},Blockly.Blocks.motor_move_xyz={init:function(){this.jsonInit(this._motorMoveXyz())},_motorMoveXyz:function(){return{message0:Blockly.Msg.MOTOR_MOVE_XYZ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"Z"},{type:"input_value",name:"SPEED"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["Control setp motor","x: -100 ~ 100, 1.6 = 360\xb0","y: -100 ~ 100, 1.6 = 360\xb0","z: -100 ~ 100, 1.6 = 360\xb0","speed: 0 ~ 400"]}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_move_xyz=function(t){return(t.getFieldValue("X_VAR_MOTOR")||"stepmotor1")+".turn(x="+(Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+",  y="+(Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", z="+(Blockly.Python.valueToCode(t,"Z",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", speed="+(Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.motor_g_code={init:function(){this.jsonInit(this._motorInstance())},_motorInstance:function(){return{message0:Blockly.Msg.MOTOR_G_CODE,args0:[{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]},{type:"input_dummy"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["Send G-code to module"]}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_g_code=function(t){return(t.getFieldValue("X_VAR_MOTOR")||"stepmotor1")+".g_code("+(Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_NONE)||"")+")\n"},Blockly.Blocks.motor_set_mode={init:function(){this.jsonInit(this._motorInstance())},_motorInstance:function(){return{message0:Blockly.Msg.MOTOR_SET_MODE,args0:[{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]},{type:"input_dummy"},{type:"field_dropdown",name:"TEXT",options:[["distance","distance"],["absolute","absolute"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["mode: absolute, distance","absolute: Motion is absolute coordinates","distance: Movement is distance"]}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_set_mode=function(t){return(t.getFieldValue("X_VAR_MOTOR")||"stepmotor1")+`.set_mode("${t.getFieldValue("TEXT")||""}")\n`},Blockly.Blocks.motor_lock={init:function(){this.jsonInit(this._motorInstance())},_motorInstance:function(){return{message0:Blockly.Msg.MOTOR_LOCK,args0:[{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["When stop, step motor will lock"]}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_lock=function(t){return(t.getFieldValue("X_VAR_MOTOR")||"stepmotor1")+".lock_motor()\n"},Blockly.Blocks.motor_unlock={init:function(){this.jsonInit(this._motorInstance())},_motorInstance:function(){return{message0:Blockly.Msg.MOTOR_UNLOCK,args0:[{type:"field_dropdown",name:"X_VAR_MOTOR",options:[["stepmotor1","stepmotor1"],["stepmotor2","stepmotor2"],["stepmotor3","stepmotor3"],["stepmotor4","stepmotor4"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["When stop, step motor will unlock"]}},attrs:{keyword:["motor","step"]}},Blockly.Python.motor_unlock=function(t){return(t.getFieldValue("X_VAR_MOTOR")||"stepmotor1")+".unlock_motor()\n"}},function(t,e){var n=function(){var t=[["pm1_0","pm2_5","pm10"],["0_3","0_5","1","2_5","5","10"]];for(let o=0;o<t.length;o++){var e=[];for(let l=0;l<t[o].length;l++){var n=t[o][l].replace("_",".");e[e.length]=[n,t[o][l]]}t[o]=e}return t}();Blockly.Blocks.get_pm_factory={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PW2_5_get_pm_factory,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"select",options:n[0]},{type:"field_dropdown",name:"spm",options:[["SPM","factory"],["APM","air"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.PW2_5_HUE}},attrs:{keyword:["pm"]}},Blockly.Python.get_pm_factory=function(t){return[`pm0.get_${t.getFieldValue("select")||"pm1_0"}_${t.getFieldValue("spm")||"factory"}()`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_num_above={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PW2_5_get_num_above,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"select",options:n[1]}],inputsInline:!0,output:null,colour:Blockly.Msg.PW2_5_HUE}},attrs:{keyword:["pm"]}},Blockly.Python.get_num_above=function(t){return[`pm0.get_num_above_${t.getFieldValue("select")||"0_3"}()`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.Cellular_writeAT={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_writeAT,args0:[{type:"input_value",name:"cmd"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_writeAT=function(t){return`Cellular._writeAT(${Blockly.Python.valueToCode(t,"cmd",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.Cellular_waitResponse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_waitResponse,args0:[{type:"input_value",name:"timeout"}],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_waitResponse=function(t){return[`Cellular._waitResponse(${Blockly.Python.valueToCode(t,"timeout",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_getResponse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_getResponse,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_getResponse=function(t){return["Cellular._getResponse()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_testAT={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_testAT,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_testAT=function(t){return["Cellular.testAT()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_restart={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_restart,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_restart=function(t){return"Cellular.restart()\n"},Blockly.Blocks.Cellular_getSimState={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_getSimState,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_getSimState=function(t){return["Cellular.getSimState()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_init,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_init=function(t){return""},Blockly.Blocks.Cellular_gprsConnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_gprsConnect,args0:[{type:"input_value",name:"apn"},{type:"input_value",name:"user"},{type:"input_value",name:"pwd"}],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_gprsConnect=function(t){return[`Cellular.gprsConnect(${Blockly.Python.valueToCode(t,"apn",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, user=${Blockly.Python.valueToCode(t,"user",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, pwd=${Blockly.Python.valueToCode(t,"pwd",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_connect,args0:[{type:"input_value",name:"host"},{type:"input_value",name:"port"},{type:"field_dropdown",name:"SSL",options:[["False","False"],["True","True"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_connect=function(t){return[`Cellular.connect(${Blockly.Python.valueToCode(t,"host",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ssl=${t.getFieldValue("SSL")||"False"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_send={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_send,args0:[{type:"input_value",name:"data"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_send=function(t){return`Cellular.send(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.Cellular_send_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_send_line,args0:[{type:"input_value",name:"data"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_send_line=function(t){return`Cellular.sendline(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.Cellular_getAvailable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_getAvailable,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_getAvailable=function(t){return["Cellular.getAvailable()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_read,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_read=function(t){return["Cellular.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_connected={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_connected,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_connected=function(t){return["Cellular.connected()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_getLocalIP={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_getLocalIP,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_getLocalIP=function(t){return["Cellular.getLocalIP()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_gprsDisconect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_gprsDisconect,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_gprsDisconect=function(t){return["Cellular.gprsDisconect()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.Cellular_getNetworkState={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.Cellular_getNetworkState,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CELLULAR_HUE,tool:[]}},attrs:{keyword:["cellular"]}},Blockly.Python.Cellular_getNetworkState=function(t){return["Cellular.getNetworkState()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){var n=function(){return[["Normal Mode","base_x.NORMAL_MODE"],["Position Mode","base_x.POSITION_MODE"],["Speed Mode","base_x.SPEED_MODE"]]},o=function(){return[["M1","1"],["M2","2"],["M3","3"],["M4","4"]]},l=function(){return[["Servo1","1"],["Servo2","2"]]};Blockly.Blocks.basex_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_MODE,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"field_dropdown",name:"MODE",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_mode=function(t){return`base_x.set_mode(${t.getFieldValue("POS")||1}, ${t.getFieldValue("MODE")})\n`},Blockly.Blocks.basex_get_encoder={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_GET_ENCODER,args0:[{type:"field_dropdown",name:"POS",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_get_encoder=function(t){return[`base_x.get_encoder(${t.getFieldValue("POS")||1})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.basex_set_encoder={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_ENCODER,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_encoder=function(t){return`base_x.set_encoder(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_set_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_MOTOR_SPEED,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_motor_speed=function(t){return`base_x.set_motor_speed(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_get_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_GET_ENCODER,args0:[{type:"field_dropdown",name:"POS",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_get_motor_speed=function(t){return[`base_x.get_motor_speed(${t.getFieldValue("POS")||1})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.basex_get_speed_20ms={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_GET_SPEED_20MS,args0:[{type:"field_dropdown",name:"POS",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_get_speed_20ms=function(t){return[`base_x.get_speed_20ms(${t.getFieldValue("POS")||1})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.basex_set_position_point={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_POSITION_POINT,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_position_point=function(t){return`base_x.set_position_point(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_set_position_pid_max_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_POSITION_PID_MAX_SPEED,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_position_pid_max_speed=function(t){return`base_x.set_position_pid_max_speed(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_set_speed_point={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_SPEED_POINT,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_speed_point=function(t){return`base_x.set_speed_point(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_set_servo_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_SERVO_ANGLE,args0:[{type:"field_dropdown",name:"SERVO",options:l},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_servo_angle=function(t){return`base_x.set_servo_angle(${t.getFieldValue("SERVO")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_set_servo_pulse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_SET_SERVO_PULSE,args0:[{type:"field_dropdown",name:"SERVO",options:l},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_set_servo_pulse=function(t){return`base_x.set_servo_pulse(${t.getFieldValue("SERVO")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.basex_run_ahead={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASEX_RUN_AHEAD,args0:[{type:"field_dropdown",name:"POS",options:o},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASEX_HUE,tool:[]}},attrs:{keyword:["basex"]}},Blockly.Python.basex_run_ahead=function(t){return`base_x.run_ahead(${t.getFieldValue("POS")||1}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`}},function(t,e){Blockly.Blocks.plus_get_encode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PLUS_GET_ENCODE,output:null,inputsInline:!0,colour:Blockly.Msg.PLUS_HUE,tool:[]}},attrs:{keyword:["plus"]}},Blockly.Python.plus_get_encode=function(t){return["plus.get_encode()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.plus_clean_encode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PLUS_CLEAN_ENCODE,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PLUS_HUE,tool:[]}},attrs:{keyword:["plus"]}},Blockly.Python.plus_clean_encode=function(t){return"plus.clean_encode()\n"},Blockly.Blocks.plus_get_press={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PLUS_GET_PRESS,output:null,inputsInline:!0,colour:Blockly.Msg.PLUS_HUE,tool:[]}},attrs:{keyword:["plus"]}},Blockly.Python.plus_get_press=function(t){return["plus.get_press()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.go_plus_set_servo={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_SET_SERVO,args0:[{type:"field_dropdown",name:"POS",options:[["0","0"],["1","1"],["2","2"],["3","3"]]},{type:"input_value",name:"ANGLE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GO_PLUS_HUE,tool:["angle: 0 ~ 180"]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus_set_servo=function(t){return"go_plus.set_servo("+(t.getFieldValue("POS")||0)+", "+(Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||0)+")\n"},Blockly.Blocks.go_plus_set_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_SET_MOTOR_SPEED,args0:[{type:"field_dropdown",name:"POS",options:[["1","1"],["2","2"]]},{type:"input_value",name:"SPEED"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GO_PLUS_HUE,tool:["speed: -127 ~ 127"]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus_set_motor_speed=function(t){return"go_plus.set_motor_speed("+(t.getFieldValue("POS")||0)+", "+(Blockly.Python.valueToCode(t,"SPEED",Blockly.Python.ORDER_FUNCTION_CALL)||0)+")\n"},Blockly.Blocks.go_plus_digital_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_DIGITAL_READ,args0:[{type:"field_dropdown",name:"PORT",options:[["PB1","go_plus.PB1"],["PB2","go_plus.PB2"],["PB3","go_plus.PB3"]]},{type:"field_dropdown",name:"POS",options:[["0","0"],["1","1"],["2","2"],["3","3"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.GO_PLUS_HUE,tool:[]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus_digital_read=function(t){return["go_plus.digital_read("+t.getFieldValue("PORT")+", "+t.getFieldValue("POS")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.go_plus_analog_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_ANALOG_READ,args0:[{type:"field_dropdown",name:"PORT",options:[["PB1","go_plus.PB1"],["PB2","go_plus.PB2"],["PB3","go_plus.PB3"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.GO_PLUS_HUE,tool:[]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus_analog_read=function(t){return["go_plus.analog_read("+t.getFieldValue("PORT")+")",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.go_plus2_set_servo_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_SET_SERVO,args0:[{type:"field_dropdown",name:"list",options:[["S1","S1"],["S2","S2"],["S3","S3"],["S4","S4"]]},{type:"input_value",name:"angle"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:["angle: 0 ~ 180"]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_set_servo_angle=function(t){return`go_plus_2.set_servo_angle(go_plus_2.${t.getFieldValue("list")||"S1"}, ${Blockly.Python.valueToCode(t,"angle",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.go_plus2_set_servo_plus={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS2_SET_SERVO_PLUS,args0:[{type:"field_dropdown",name:"list",options:[["S1","S1"],["S2","S2"],["S3","S3"],["S4","S4"]]},{type:"input_value",name:"plus"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:["plus: 500 ~ 2500"]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_set_servo_plus=function(t){return`go_plus_2.set_servo_plus(go_plus_2.${t.getFieldValue("list")||"S1"}, ${Blockly.Python.valueToCode(t,"plus",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.go_plus2_set_motor_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_SET_MOTOR_SPEED,args0:[{type:"field_dropdown",name:"list",options:[["MA","MA"],["MB","MB"]]},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:["speed: -127 ~ 127"]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_set_motor_speed=function(t){return`go_plus_2.set_motor_speed(go_plus_2.${t.getFieldValue("list")||"S1"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.go_plus2_digital_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS2_DIGITAL_READ,args0:[{type:"field_dropdown",name:"list",options:[["PB1","PB1"],["PB2","PB2"],["PB3","PB3"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:[]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_digital_read=function(t){return[`go_plus_2.digital_read(go_plus_2.${t.getFieldValue("list")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.go_plus2_analog_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS_ANALOG_READ,args0:[{type:"field_dropdown",name:"list",options:[["PB1","PB1"],["PB2","PB2"],["PB3","PB3"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:[]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_analog_read=function(t){return[`go_plus_2.analog_read(go_plus_2.${t.getFieldValue("list")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.go_plus2_digital_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GO_PLUS2_DIGITAL_WRITE,args0:[{type:"field_dropdown",name:"list",options:[["PB1","PB1"],["PB2","PB2"],["PB3","PB3"]]},{type:"field_dropdown",name:"value",options:[["0","0"],["1","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LOGIC_HUE,tool:[]}},attrs:{keyword:["goplus"]}},Blockly.Python.go_plus2_digital_write=function(t){return[`go_plus_2.digital_write(go_plus_2.${t.getFieldValue("list")}, ${t.getFieldValue("value")})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.gps_get_state={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_STATE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS time"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_state=function(t){return["gps.gps_time",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_get_latitude={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_LATITUDE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS latitude"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_latitude=function(t){return["gps.latitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_get_longitude={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_LONGITUDE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS longitude"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_longitude=function(t){return["gps.longitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_get_satellite_num={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_SATELLITE_NUM,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return satellite num"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_satellite_num=function(t){return["gps.satellite_num",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_get_positioning_quality={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_POSTITIONING_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return positioning quality"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_positioning_quality=function(t){return["gps.pos_quality",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_set_time_zone={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_SET_TIME_ZONE,args0:[{type:"input_value",name:"ZONE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Time zone must be between -12 and 12"]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_set_time_zone=function(t){return`gps.set_time_zone(${Blockly.Python.valueToCode(t,"ZONE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.gps_get_speed={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_SPEED,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_speed=function(t){return["gps.speed",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_get_course={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_GET_COURSE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.gps_get_course=function(t){return["gps.course",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gps_set_custom={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.GPS_SET_CUSTOM,args0:[{type:"input_value",name:"TX"},{type:"input_value",name:"RX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["gps"]}},Blockly.Python.gps_set_custom=function(t){return Blockly.addDeclare("gps"),""}},function(t,e){Blockly.Blocks.grbl_turn={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_TURN,previousStatement:null,nextStatement:null,inputsInline:!0,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"z"},{type:"input_value",name:"speed"}],colour:Blockly.Msg.PINS_HUE,tool:["Rotate the X Y Z motor at 0 speed, and the action mode is determined by GRBL mode"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_turn=function(t){return`grbl.turn(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"z",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.grbl_g_code={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_G_CODE,previousStatement:null,nextStatement:null,inputsInline:!0,args0:[{type:"input_value",name:"code"}],colour:Blockly.Msg.PINS_HUE,tool:['G code, such as "G1 X5Y5Z5 F200"']}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_g_code=function(t){return`grbl.g_code(${Blockly.Python.valueToCode(t,"code",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.grbl_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_SET_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["Distance","distance"],["Absolute","absolute"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Distance: Turn X motor to move 0 steps","Absolute: Move the X motor to step 0"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_set_mode=function(t){return`grbl.set_mode("${t.getFieldValue("mode")||"distance"}")\n`},Blockly.Blocks.grbl_read_clean={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_READ_CLEAN,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_read_clean=function(t){return"grbl.read_clean()\n"},Blockly.Blocks.grbl_read_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_READ_LINE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.PINS_HUE,tool:["True for IDLE and False for BUSY"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_read_line=function(t){return["grbl.read_line()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.grbl_read_idle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_READ_IDLE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.PINS_HUE,tool:["True for IDLE and False for BUSY"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_read_idle=function(t){return["grbl.read_idle()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.grbl_in_lock={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_IN_LOCK,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_in_lock=function(t){return["grbl.in_lock()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.grbl_wait_idle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_WAIT_IDLE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Wait for GRBL to be in IDLE state"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_wait_idle=function(t){return"grbl.wait_idle()\n"},Blockly.Blocks.grbl_unlock={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_UNLOCK,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["When LIMIT is locked because of a low level you can use this to unlock"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_unlock=function(t){return"grbl.unlock()\n"},Blockly.Blocks.grbl_lock_motor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_LOCK_MOTOR,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["It takes effect after the Turn(Block) is executed"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_lock_motor=function(t){return"grbl.lock_motor()\n"},Blockly.Blocks.grbl_unlock_motor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GRBL_UNLOCK_MOTOR,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["It takes effect after the Turn(Block) is executed"]}},attrs:{keyword:["grbl"]}},Blockly.Python.grbl_unlock_motor=function(t){return"grbl.unlock_motor()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(2),l=n(0);Blockly.Blocks.lorawan915_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN915_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_init=function(t){var e=Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||"";return Blockly.addDeclare("lora915"),`lora915 = LoRaWAN_915(tx=${e}, rx=${n})\n`},Blockly.Blocks.lorawan915_config_abp={init:function(){this.jsonInit(Object(o._configAbpInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_config_abp=function(t){return`lora915.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lorawan915_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.PINS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_ABP_CONFIG,output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_get_abp_config=function(t){return["lora915.get_ABP_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan915_config_otaa={init:function(){this.jsonInit(Object(o._configOtaaInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_config_otaa=function(t){var e=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`lora915.config_OTAA(${e}, ${n}, ${o=o.replace(/\s*/g,"")})\n`},Blockly.Blocks.lorawan915_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.PINS_HUE)},_init:function(){return{message0:Blockly.Msg.LORAWAN470_GET_OTAA_CONFIG,output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_get_otaa_config=function(t){return["lora915.get_OTAA_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan915_check_join_status={init:function(){this.jsonInit(Object(o._checkJoinInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_check_join_status=function(t){return["lora915.check_join_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan915_check_sent_status={init:function(){this.jsonInit(Object(o._checkSentInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_check_sent_status=function(t){return["lora915.check_uplink_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan915_check_downlink_data={init:function(){this.jsonInit(Object(o._checkDownlinkInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_check_downlink_data=function(t){return["lora915.check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lorawan915_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"channel",options:l.lora915ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_frequency_band_mask=function(t){return`lora915.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`},Blockly.Blocks.lorawan915_set_rx_window_param={init:function(){this.jsonInit(Object(o._rxWindowInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_set_rx_window_param=function(t){return`lora915.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lorawan915_set_class_mode={init:function(){this.jsonInit(Object(o._classmodeInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_set_class_mode=function(t){return`lora915.set_class_mode(${t.getFieldValue("class_mode")})\n`},Blockly.Blocks.lorawan915_set_join_mode={init:function(){this.jsonInit(Object(o._joinmodeInit)()),this.setColour(Blockly.Msg.PINS_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_set_join_mode=function(t){return`lora915.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.lorawan915_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SEND_DATA,args0:[{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=l.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_send_data=function(t){var e=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`lora915.send_data(${e}, 1, ${n})\n`:`lora915.send_data(${e})\n`,o},Blockly.Blocks.lorawan915_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_set_uplink_app_port=function(t){return`lora915.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.lorawan915_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_JOIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_join=function(t){return`lora915.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.lorawan915_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_set_uplink_mode=function(t){return`lora915.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`};const i=[["OTAA mode","OTAA"],["ABP mode","ABP"]];Blockly.Blocks.lorawan915_config_mode={init:function(){this.jsonInit(this._init()),this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},_init:function(){return{message0:"",args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.mode}},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_config_mode=function(t){var e=t.getFieldValue("mode"),n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";l=l.replace(/\s*/g,"");var i=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let r;return r="OTAA"===e?`lora915.config_OTAA(${n}, ${o}, ${l})\n`:`lora915.config_ABP(${i}, ${a}, ${s})\n`,r},Blockly.Blocks.lorawan915_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_CONFIG,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:l.lora915ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_config=function(t){let e=`lora915.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`;return e+=`lora915.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,e+=`lora915.set_class_mode(${t.getFieldValue("class_mode")})\n`,e+=`lora915.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,e},Blockly.Blocks.lorawan915_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_join_stop=function(t){return"lora915.join(0)\n"},Blockly.Blocks.lorawan915_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_LORAWAN470_JOIN_START,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.PINS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.lorawan915_join_start=function(t){return`lora915.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`}},function(t,e){Blockly.Blocks.comlte_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_init=function(t){var e=Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||"";return Blockly.addDeclare("lte"),`lte = LTE(tx=${e}, rx=${n})\n`},Blockly.Blocks.comlte_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Test COM.LTE module.","Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_check_status=function(t){return["lte.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_power_down_module=function(t){return"lte.poweroff()\n"},Blockly.Blocks.comlte_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_reset_module=function(t){return"lte.reset()\n"},Blockly.Blocks.comlte_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_set_echo_mode=function(t){return[`lte.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Return:","0...7 As RXQUAL values in the table in GSM 05.08 [20]","subclause 7.2.4","99 Not known or not detectable"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_check_single_quality=function(t){return["lte.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_check_network_registration=function(t){return["lte.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Return:","0 not registered, ME is not currently searching an operator to register to","1 registered, home network","2 not registered, but ME is currently trying to attach or searching an operator to register to","3 registration denied","4 unknown","5 registered, roaming"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_check_gprs_network_registration=function(t){return["lte.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_enable_pdp_context=function(t){return"lte.enable_PDP_context()\n"},Blockly.Blocks.comlte_http_terminate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_TERMINATE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:[]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_http_terminate=function(t){return"lte.http_terminate()\n"},Blockly.Blocks.comlte_http_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Parameter:","url: Uniform Resource Locator","Return: ","False or (head, body)"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_http_get=function(t){return[`lte.http_get(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.comlte_http_post={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_POST,args0:[{type:"input_value",name:"url"},{type:"field_dropdown",name:"type",options:[["JSON","application/json"],["FORM","application/x-www-form-urlencoded"],["TEXT","text/plain"]]},{type:"input_value",name:"data"}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_HUE,tool:["Parameter:","url: Uniform Resource Locator","type: application/json, application/x-www-form-urlencoded, text/plain","data: string","Return: ","False or (head, body)"]}},attrs:{keyword:["lte"]}},Blockly.Python.comlte_http_post=function(t){return[`lte.http_post(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, '${t.getFieldValue("type")}', ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.nbiot_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_init=function(t){var e=Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||"";return Blockly.addDeclare("nb"),`nb = NBIoT(tx=${e}, rx=${n})\n`},Blockly.Blocks.nbiot_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_power_down_module=function(t){return"nb.poweroff()\n"},Blockly.Blocks.nbiot_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_reset_module=function(t){return"nb.reset()\n"},Blockly.Blocks.nbiot_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_set_echo_mode=function(t){return[`nb.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_check_status=function(t){return["nb.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return:","0 -115 dBm or less","1 -111 dBm","2...30 -110... -54 dBm","31 -52 dBm or greater","99 not known or not detectable"]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_check_single_quality=function(t){return["nb.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates NB-IoT)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates NB-IoT)']}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_check_network_registration=function(t){return["nb.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return:","0 Not registered, MT is not currently searching an operator to register to.","1 Registered, home network.","2 Not registered, but MT is currently trying to attach or searching an operator to register to.","3 Registration denied.","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates E-UTRAN)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates E-UTRAN)']}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_check_gprs_network_registration=function(t){return["nb.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.nbiot_enable_pdp_context=function(t){return"nb.enable_PDP_context()\n"},Blockly.Blocks.nbiot_coap_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_CONNECT,args0:[{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.nbiot_coap_connect=function(t){return`nb.coap_connect(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.nbiot_coap_get={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return: True or False"]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");let e="true"===this.getFieldValue("tokenChoose");return t.setAttribute("isToken",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isToken");this.isToken=e,this.updateToken_(e)},updateToken_:function(t){if(this.getInput("token")){let e=this.getInput("token").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("token")}if(t&&(this.appendValueInput("token").setCheck("String"),!this.getInput("token").connection.targetConnection)){let t=o.createShadow("text_password",{name:"TEXT"});this.getInput("token").connection.setShadowDom(t)}},attrs:{keyword:["nb","coap"]}},Blockly.Python.nbiot_coap_get=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`nb.coap_get(${e}, ${n})`:`nb.coap_get(${e})`,[o,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_coap_post={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_POST,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.nbiot_coap_get.mutationToDom,domToMutation:Blockly.Blocks.nbiot_coap_get.domToMutation,updateToken_:Blockly.Blocks.nbiot_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.nbiot_coap_post=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`nb.coap_post(${e}, ${n}, content_format=${o}, ${l})`:`nb.coap_post(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_coap_put={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_PUT,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.nbiot_coap_get.mutationToDom,domToMutation:Blockly.Blocks.nbiot_coap_get.domToMutation,updateToken_:Blockly.Blocks.nbiot_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.nbiot_coap_put=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`nb.coap_put(${e}, ${n}, content_format=${o}, ${l})`:`nb.coap_put(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_coap_destroy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_COAP_DESTROY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Return: True or False"]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.nbiot_coap_destroy=function(t){return["nb.coap_destroy()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_connect=function(t){return`nb.mqtt_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.nbiot_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_disconnect=function(t){return"nb.mqtt_disconnect()\n"},Blockly.Blocks.nbiot_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_sub=function(t){return[`nb.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, nbiot_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def nbiot_mqtt_cb(nb_mq_topic, nb_mq_payload):\n  # global params\n  ${e} = nb_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = nb_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.nbiot_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_unsubscribe=function(t){return`nb.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.nbiot_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_publish=function(t){return`nb.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.nbiot_mqtt_check_connection={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_CHECK_CONNECTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.PWM_HUE,tool:["Check mqtt connection.","Return: 0/1 or False"]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_check_connection=function(t){return["nb.mqtt_check_connection()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.nbiot_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.NBIOT_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.PWM_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.nbiot_mqtt_poll=function(t){return"nb.mqtt_poll()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.com_cat1_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.COM_CAT1_INIT,args0:[{type:"input_value",name:"TX"},{type:"input_value",name:"RX"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_init=function(t){var e=Blockly.Python.valueToCode(t,"TX",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"";return Blockly.addDeclare("cat"),`cat = CAT1(tx=${e}, rx=${n})\n`},Blockly.Blocks.com_cat1_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_connect=function(t){return`cat.mqtt_to_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.com_cat1_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_disconnect=function(t){return"cat.mqtt_disconnect()\n"},Blockly.Blocks.com_cat1_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_sub=function(t){return[`cat.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, cat_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def cat_mqtt_cb(cat_mq_topic, cat_mq_payload):\n  # global params\n  ${e} = cat_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = cat_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.com_cat1_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_unsubscribe=function(t){return`cat.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.com_cat1_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_publish=function(t){return`cat.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.com_cat1_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_poll=function(t){return"cat.mqtt_poll()\n"},Blockly.Blocks.com_cat1_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_power_down_module=function(t){return"cat.poweroff()\n"},Blockly.Blocks.com_cat1_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_reset_module=function(t){return"cat.reset()\n"},Blockly.Blocks.com_cat1_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BASE_DTUNB_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_set_echo_mode=function(t){return[`cat.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Test COM.LTE module.","Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_check_status=function(t){return["cat.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Return:","0...7 As RXQUAL values in the table in GSM 05.08 [20]","subclause 7.2.4","99 Not known or not detectable"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_check_single_quality=function(t){return["cat.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_check_network_registration=function(t){return["cat.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Return:","0 not registered, ME is not currently searching an operator to register to","1 registered, home network","2 not registered, but ME is currently trying to attach or searching an operator to register to","3 registration denied","4 unknown","5 registered, roaming"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_check_gprs_network_registration=function(t){return["cat.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_enable_pdp_context=function(t){return"cat.enable_PDP_context()\n"},Blockly.Blocks.com_cat1_http_terminate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_TERMINATE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_http_terminate=function(t){return"cat.http_terminate()\n"},Blockly.Blocks.com_cat1_http_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Parameter:","url: Uniform Resource Locator","Return: ","False or (head, body)"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_http_get=function(t){return[`cat.http_get(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_http_post={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_POST,args0:[{type:"input_value",name:"url"},{type:"field_dropdown",name:"type",options:[["JSON","application/json"],["FORM","application/x-www-form-urlencoded"],["TEXT","text/plain"]]},{type:"input_value",name:"data"}],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:["Parameter:","url: Uniform Resource Locator","type: application/json, application/x-www-form-urlencoded, text/plain","data: string","Return: ","False or (head, body)"]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_http_post=function(t){return[`cat.http_post(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, '${t.getFieldValue("type")}', ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_get_imei={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_IMEI,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_get_imei=function(t){return["cat.get_IMEI()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_get_ccid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_CCID,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_get_ccid=function(t){return["cat.get_CCID()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.com_cat1_ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.CAT1_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata","cat1"]}},Blockly.Python.com_cat1_ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`cat.get_ezdata(ezdata_get_${this.cbId}cb, ${n}, ${e})\n`},Blockly.Blocks.com_cat1_ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value %2 callback with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null",align:"RIGHT"},{type:"input_statement",name:"success_fun"}],inputsInline:!1,colour:Blockly.Msg.CAT1_HUE,tool:[]}},mutationToDom:Blockly.Blocks.com_cat1_ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.com_cat1_ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata","cat1"]}},Blockly.Python.com_cat1_ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def ezdata_get_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),""+l},Blockly.Blocks.com_cat1_ezdata_save={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_SAVE,args0:[{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"},{type:"field_dropdown",name:"mode",options:[["Single data","0"],["List data","1"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE}},attrs:{keyword:["ezdata","cat1"]}},Blockly.Python.com_cat1_ezdata_save=function(t){var e=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`cat.set_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${n}, ${e}, ${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.com_cat1_ezdata_remove={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_REMOVE,args0:[{type:"input_value",name:"topic"},{type:"input_value",name:"token"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.CAT1_HUE}},attrs:{keyword:["ezdata","cat1"]}},Blockly.Python.com_cat1_ezdata_remove=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`cat.remove_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})\n`},Blockly.Blocks.com_cat1_mqtt_check_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COM_CAT1_MQTT_CHECK_CONNECT,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.CAT1_HUE,tool:[]}},attrs:{keyword:["cat1"]}},Blockly.Python.com_cat1_mqtt_check_connect=function(t){return["cat.is_connect_mqtt()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.stepmotor_driver_set_step_pulse={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_SET_STEP_PULSE,args0:[{type:"input_value",name:"freq"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_set_step_pulse=function(t){return`stepmotor.setStepPulse(${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.stepmotor_driver_set_micro_stepselect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_SET_MICRO_STEPSELECT,args0:[{type:"field_dropdown",name:"steps",options:[["FULL STEP","0"],["1/2 STEP","4"],["1/4 STEP","2"],["1/8 STEP","6"],["1/16 STEP","1"],["1/32 STEP","7"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_set_micro_stepselect=function(t){return`stepmotor.setMicroStepSelect(${t.getFieldValue("steps")})\n`},Blockly.Blocks.stepmotor_driver_set_step_dir={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_SET_STEP_DIR,args0:[{type:"field_dropdown",name:"xyz",options:[["X","x"],["Y","y"],["Z","z"]]},{type:"field_dropdown",name:"dir",options:[["Reverse","0"],["Forward","1"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_set_step_dir=function(t){return`stepmotor.setStepDir('${t.getFieldValue("xyz")}', ${t.getFieldValue("dir")})\n`},Blockly.Blocks.stepmotor_driver_read_io_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_READ_IO_STATUS,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_read_io_status=function(t){return["stepmotor.readIOstatus()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.stepmotor_driver_read_pin_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_READ_PIN_STATUS,args0:[{type:"input_value",name:"pin"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_read_pin_status=function(t){return[`stepmotor.readPinStatus(${Blockly.Python.valueToCode(t,"pin",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.stepmotor_driver_enable_motor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_ENABLE_MOTOR,args0:[{type:"field_dropdown",name:"state",options:[["Disable","0"],["Enable","1"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_enable_motor=function(t){return`stepmotor.enableMotor(${t.getFieldValue("state")})\n`},Blockly.Blocks.stepmotor_driver_set_single_motor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.STEPMOTOR_DRIVER_SET_SINGLE_MOTOR,args0:[{type:"field_dropdown",name:"xyz",options:[["X","x"],["Y","y"],["Z","z"]]},{type:"field_dropdown",name:"state",options:[["Pause","0"],["Resume","1"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["stepmotor"]}},Blockly.Python.stepmotor_driver_set_single_motor=function(t){return`stepmotor.singleMotorCtrl('${t.getFieldValue("xyz")}', ${t.getFieldValue("state")})\n`}},function(t,e){Blockly.Blocks.lora433_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_INIT,args0:[{type:"input_dummy"},{type:"input_value",name:"cs"},{type:"input_value",name:"rst"},{type:"input_value",name:"irq"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_init=function(t){return`lora.lora_init(cs=${Blockly.Python.valueToCode(t,"cs",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, rst=${Blockly.Python.valueToCode(t,"rst",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, irq=${Blockly.Python.valueToCode(t,"irq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora433_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_CONFIG,args0:[{type:"input_dummy"},{type:"input_value",name:"freq"},{type:"input_value",name:"band"},{type:"input_value",name:"txpow"},{type:"input_value",name:"sync"},{type:"input_value",name:"spread"},{type:"input_value",name:"code_rate"},{type:"input_value",name:"preamble"},{type:"field_dropdown",name:"crc",options:[["False","False"],["True","True"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_config=function(t){return`lora.config_lora(freq=${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, band=${Blockly.Python.valueToCode(t,"band",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, TxPow=${Blockly.Python.valueToCode(t,"txpow",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, sync=${Blockly.Python.valueToCode(t,"sync",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, spreadfactor=${Blockly.Python.valueToCode(t,"spread",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, crate=${Blockly.Python.valueToCode(t,"code_rate",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, preamble=${Blockly.Python.valueToCode(t,"preamble",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, CRC=${t.getFieldValue("crc")||"False"})\n`},Blockly.Blocks.lora433_begin_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_BEGIN_PACKET,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_begin_packet=function(t){return"lora.begin_packet()\n"},Blockly.Blocks.lora433_end_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_END_PACKET,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_end_packet=function(t){return"lora.end_packet()\n"},Blockly.Blocks.lora433_print_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PRINT_MSG,inputsInline:!0,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_print_msg=function(t){return`lora.println(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora433_write_buffer={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_WRITE_BUFFER,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"input_value",name:"array"}],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_write_buffer=function(t){return`lora.write(${Blockly.Python.valueToCode(t,"array",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora433_received_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_RECEIVED_PACKET,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_received_packet=function(t){return["lora.received_packet()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora433_packet_rssi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PACKET_RSSI,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_packet_rssi=function(t){return["lora.packet_rssi()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora433_packet_snr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PACKET_SNR,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_packet_snr=function(t){return["lora.packet_snr()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora433_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_READ,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_read=function(t){return["lora.read()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora433_message={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_MESSAGE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_message=function(t){return["lora.read_message()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora433_stand_by_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_STAND_BY_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_stand_by_mode=function(t){return"lora.idle()\n"},Blockly.Blocks.lora433_sleep_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_SLEEP_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_sleep_mode=function(t){return"lora.sleep()\n"},Blockly.Blocks.lora433_receive_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_RECEIVE_CALLBACK,args0:[],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_receive_callback=function(t){return"lora.on_receive_callback(lora433_callback)\nlora.receive()\n"},Blockly.Blocks.lora433_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_CALLBACK,args0:[{type:"input_value",name:"size",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_callback=function(t){let e=`def lora433_callback(lora, size):\n  # global params\n  ${Blockly.Python.valueToCode(t,"size",Blockly.Python.ORDER_NONE)||"_"} = size\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),e},Blockly.Blocks.lora433_receive_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_RECEIVE_ENABLE,args0:[{type:"input_value",name:"num"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LORA433_HUE,tool:[]}},attrs:{keyword:["lora","433"]}},Blockly.Python.lora433_receive_enable=function(t){return`lora.receive(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){Blockly.Blocks.lora868_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_INIT,args0:[{type:"input_dummy"},{type:"input_value",name:"cs"},{type:"input_value",name:"rst"},{type:"input_value",name:"irq"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_init=function(t){return`lora.lora_init(cs=${Blockly.Python.valueToCode(t,"cs",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, rst=${Blockly.Python.valueToCode(t,"rst",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, irq=${Blockly.Python.valueToCode(t,"irq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora868_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA868_CONFIG,args0:[{type:"input_dummy"},{type:"input_value",name:"freq"},{type:"input_value",name:"band"},{type:"input_value",name:"txpow"},{type:"input_value",name:"sync"},{type:"input_value",name:"spread"},{type:"input_value",name:"code_rate"},{type:"input_value",name:"preamble"},{type:"field_dropdown",name:"crc",options:[["False","False"],["True","True"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_config=function(t){return`lora.config_lora(freq=${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, band=${Blockly.Python.valueToCode(t,"band",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, TxPow=${Blockly.Python.valueToCode(t,"txpow",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, sync=${Blockly.Python.valueToCode(t,"sync",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, spreadfactor=${Blockly.Python.valueToCode(t,"spread",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, crate=${Blockly.Python.valueToCode(t,"code_rate",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, preamble=${Blockly.Python.valueToCode(t,"preamble",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, CRC=${t.getFieldValue("crc")||"False"})\n`},Blockly.Blocks.lora868_begin_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_BEGIN_PACKET,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_begin_packet=function(t){return"lora.begin_packet()\n"},Blockly.Blocks.lora868_end_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_END_PACKET,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_end_packet=function(t){return"lora.end_packet()\n"},Blockly.Blocks.lora868_print_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PRINT_MSG,inputsInline:!0,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_print_msg=function(t){return`lora.println(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora868_write_buffer={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_WRITE_BUFFER,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"input_value",name:"array"}],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_write_buffer=function(t){return`lora.write(${Blockly.Python.valueToCode(t,"array",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lora868_received_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_RECEIVED_PACKET,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_received_packet=function(t){return["lora.received_packet()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora868_packet_rssi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PACKET_RSSI,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_packet_rssi=function(t){return["lora.packet_rssi()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora868_packet_snr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_PACKET_SNR,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_packet_snr=function(t){return["lora.packet_snr()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora868_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_READ,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_read=function(t){return["lora.read()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora868_message={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_MESSAGE,inputsInline:!0,output:null,args0:[],colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_message=function(t){return["lora.read_message()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.lora868_stand_by_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_STAND_BY_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_stand_by_mode=function(t){return"lora.idle()\n"},Blockly.Blocks.lora868_sleep_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_SLEEP_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_sleep_mode=function(t){return"lora.sleep()\n"},Blockly.Blocks.lora868_receive_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA433_RECEIVE_CALLBACK,args0:[],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_receive_callback=function(t){return"lora.on_receive_callback(lora868_callback)\nlora.receive()\n"},Blockly.Blocks.lora868_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LORA868_CALLBACK,args0:[{type:"input_value",name:"size",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.LORA868_HUE,tool:[]}},attrs:{keyword:["lora","868"]}},Blockly.Python.lora868_callback=function(t){let e=`def lora868_callback(lora, size):\n  # global params\n  ${Blockly.Python.valueToCode(t,"size",Blockly.Python.ORDER_NONE)||"_"} = size\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),e}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.iotbase_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_connect=function(t){return`nbiot.mqtt_to_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbase_coap_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_INIT,args0:[{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_coap_init=function(t){return`nbiot.coap_to_connect(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbase_modbus_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MODBUS_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"},{type:"input_value",name:"bandrate"},{type:"field_dropdown",name:"mode",options:[["Master","1"],["Slave","2"]]},{type:"input_value",name:"slaveAddr"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_init=function(t){return`modbus = nbiot.modbus_init(${Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"bandrate",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")}, ${Blockly.Python.valueToCode(t,"slaveAddr",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbase_modem_power={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MODEM_POWER,args0:[{type:"field_dropdown",name:"mode",options:[["ON","True"],["OFF","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modem_power=function(t){return`nbiot.modem_power(${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.iotbase_get_imei={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_IMEI,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_get_imei=function(t){return["nbiot.get_IMEI()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_get_ccid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_CCID,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_get_ccid=function(t){return["nbiot.get_CCID()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_power_down_module=function(t){return"nbiot.poweroff()\n"},Blockly.Blocks.iotbase_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_reset_module=function(t){return"nbiot.reset()\n"},Blockly.Blocks.iotbase_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_set_echo_mode=function(t){return[`nbiot.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_check_status=function(t){return["nbiot.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return:","0 -115 dBm or less","1 -111 dBm","2...30 -110... -54 dBm","31 -52 dBm or greater","99 not known or not detectable"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_check_single_quality=function(t){return["nbiot.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates NB-IoT)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates NB-IoT)']}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_check_network_registration=function(t){return["nbiot.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return:","0 Not registered, MT is not currently searching an operator to register to.","1 Registered, home network.","2 Not registered, but MT is currently trying to attach or searching an operator to register to.","3 Registration denied.","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates E-UTRAN)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates E-UTRAN)']}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_check_gprs_network_registration=function(t){return["nbiot.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_enable_pdp_context=function(t){return"nbiot.enable_PDP_context()\n"},Blockly.Blocks.iotbase_coap_get={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return: True or False"]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");let e="true"===this.getFieldValue("tokenChoose");return t.setAttribute("isToken",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isToken");this.isToken=e,this.updateToken_(e)},updateToken_:function(t){if(this.getInput("token")){let e=this.getInput("token").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("token")}if(t&&(this.appendValueInput("token").setCheck("String"),!this.getInput("token").connection.targetConnection)){let t=o.createShadow("text_password",{name:"TEXT"});this.getInput("token").connection.setShadowDom(t)}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_coap_get=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o;return o=n?`nbiot.coap_get(${e}, ${n})`:`nbiot.coap_get(${e})`,[o,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_coap_post={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_POST,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.iotbase_coap_get.mutationToDom,domToMutation:Blockly.Blocks.iotbase_coap_get.domToMutation,updateToken_:Blockly.Blocks.iotbase_coap_get.updateToken_,attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_coap_post=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`nbiot.coap_post(${e}, ${n}, content_format=${o}, ${l})`:`nbiot.coap_post(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_coap_put={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_PUT,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.iotbase_coap_get.mutationToDom,domToMutation:Blockly.Blocks.iotbase_coap_get.domToMutation,updateToken_:Blockly.Blocks.iotbase_coap_get.updateToken_,attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_coap_put=function(t){var e=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=t.getFieldValue("format")||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let i;return i=l?`nbiot.coap_put(${e}, ${n}, content_format=${o}, ${l})`:`nbiot.coap_put(${e}, ${n}, content_format=${o})`,[i,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_coap_destroy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_DESTROY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Return: True or False"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_coap_destroy=function(t){return["nbiot.coap_destroy()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_disconnect=function(t){return"nbiot.mqtt_disconnect()\n"},Blockly.Blocks.iotbase_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_sub=function(t){return[`nbiot.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, iotbase_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def iotbase_mqtt_cb(nb_mq_topic, nb_mq_payload):\n  # global params\n  ${e} = nb_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = nb_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.iotbase_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_unsubscribe=function(t){return`nbiot.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.iotbase_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_publish=function(t){return`nbiot.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.iotbase_mqtt_check_connection={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CHECK_CONNECTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Check mqtt connection.","Return: 0/1 or False"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_check_connection=function(t){return["nbiot.mqtt_check_connection()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_mqtt_poll=function(t){return"nbiot.mqtt_poll()\n"},Blockly.Blocks.iotbase_modbus_master_u_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_read_coils=function(t){return[`modbus.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_read_discrete_inputs=function(t){return[`modbus.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_read_holding_registers=function(t){return[`modbus.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_read_input_registers=function(t){return[`modbus.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_write_single_coil=function(t){return[`modbus.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_write_single_register=function(t){return[`modbus.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_write_multiple_coils=function(t){return[`modbus.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_master_u_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_master_u_write_multiple_registers=function(t){return[`modbus.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};let l=[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"],["WRITE_SINGLE_COIL","5"],["WRITE_SINGLE_REGISTER","6"],["WRITE_MULTIPLE_COILS","15"],["WRITE_MULTIPLE_REGISTERS","16"]];Blockly.Blocks.iotbase_modbus_slave_rtu_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:l},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_init_func=function(t){return`modbus.function_init(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.iotbase_modbus_slave_rtu_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_UPDATE_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"]]},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_update_func=function(t){return`modbus.update_process(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.iotbase_modbus_slave_rtu_receive_adu={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_RECEIVE_ADU,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_receive_adu=function(t){return["modbus.receive_req_create_pdu()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_slave_rtu_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_SEND,args0:[{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_send=function(t){return`modbus.create_slave_response(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.iotbase_modbus_slave_rtu_get_function={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_FUNCTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_get_function=function(t){return["modbus.find_function",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_slave_rtu_fun_status={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_FUN_STATUS,args0:[{type:"field_dropdown",name:"FUNC",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_fun_status=function(t){return[""+t.getFieldValue("FUNC"),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_slave_rtu_get_address={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_ADDRESS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_get_address=function(t){return["modbus.find_address",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_modbus_slave_rtu_get_quantity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_QUANTITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_modbus_slave_rtu_get_quantity=function(t){return["modbus.find_quantity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_uart_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_HUE,tool:["Read uart data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_read=function(t){return["modbus._mdbus_uart.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_uart_read_characters={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE,tool:["Read number uart data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_read_characters=function(t){return[`modbus._mdbus_uart.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_uart_readline={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_readline=function(t){return["modbus._mdbus_uart.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_uart_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE,tool:["Write data"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+")\n":"modbus._mdbus_uart.write(str("+e+"))\n"},Blockly.Blocks.iotbase_uart_any={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_any=function(t){return["modbus._mdbus_uart.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_uart_write_line={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+'+"\\r\\n")\n':"modbus._mdbus_uart.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.iotbase_uart_write_raw_data={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_uart_write_raw_data=function(t){return`modbus._mdbus_uart.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.iotbase_ezdata_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_GET,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"}],inputsInline:!1,output:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbase_ezdata_get=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return[`nbiot.get_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbase_ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbase_ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`nbiot.get_ezdata(ezdata_get_${this.cbId}cb, ${n}, ${e})\n`},Blockly.Blocks.iotbase_ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value %2 callback with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null",align:"RIGHT"},{type:"input_statement",name:"success_fun"}],inputsInline:!1,colour:Blockly.Msg.IOTBASE_HUE,tool:[]}},mutationToDom:Blockly.Blocks.iotbase_ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.iotbase_ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbase_ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def ezdata_get_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),""+l},Blockly.Blocks.iotbase_ezdata_save={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_SAVE,args0:[{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"},{type:"field_dropdown",name:"mode",options:[["Single data","0"],["List data","1"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbase_ezdata_save=function(t){var e=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`nbiot.set_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${n}, ${e}, ${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.iotbase_ezdata_remove={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_REMOVE,args0:[{type:"input_value",name:"topic"},{type:"input_value",name:"token"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_HUE}},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbase_ezdata_remove=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`nbiot.remove_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.iotbasecatm_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CONNECT,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_connect=function(t){return`catmiot.mqtt_to_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbasecatm_coap_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_COAP_INIT,args0:[{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_coap_init=function(t){return`catmiot.coap_to_connect(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbasecatm_modbus_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MODBUS_INIT,args0:[{type:"input_value",name:"tx"},{type:"input_value",name:"rx"},{type:"input_value",name:"bandrate"},{type:"field_dropdown",name:"mode",options:[["Master","1"],["Slave","2"]]},{type:"input_value",name:"slaveAddr"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_init=function(t){return`modbus = catmiot.modbus_init(${Blockly.Python.valueToCode(t,"tx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"rx",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"bandrate",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")}, ${Blockly.Python.valueToCode(t,"slaveAddr",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iotbasecatm_modem_power={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MODEM_POWER,args0:[{type:"field_dropdown",name:"mode",options:[["ON","True"],["OFF","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modem_power=function(t){return`catmiot.modem_power(${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.iotbasecatm_get_imei={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_IMEI,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_get_imei=function(t){return["catmiot.get_IMEI()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_get_ccid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_GET_CCID,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_get_ccid=function(t){return["catmiot.get_CCID()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_POWER_DOWN_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_power_down_module=function(t){return"catmiot.poweroff()\n"},Blockly.Blocks.iotbasecatm_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_RESET_MODULE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_reset_module=function(t){return"catmiot.reset()\n"},Blockly.Blocks.iotbasecatm_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_set_echo_mode=function(t){return[`catmiot.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_check_status=function(t){return["catmiot.check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_SINGLE_QUALITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Return:","0 -115 dBm or less","1 -111 dBm","2...30 -110... -54 dBm","31 -52 dBm or greater","99 not known or not detectable"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_check_single_quality=function(t){return["catmiot.get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_check_network_registration=function(t){return["catmiot.get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_CHECK_GPRS_NETWORK_REGISTRATION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Return:","0 Not registered, MT is not currently searching an operator to register to.","1 Registered, home network.","2 Not registered, but MT is currently trying to attach or searching an operator to register to.","3 Registration denied.","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates E-UTRAN)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates E-UTRAN)']}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_check_gprs_network_registration=function(t){return["catmiot.get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_ENABLE_PDP_CONTEXT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_enable_pdp_context=function(t){return"catmiot.enable_PDP_context()\n"},Blockly.Blocks.iotbasecatm_coap_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASECATM_COAP_GET,args0:[{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Return: True or False"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_coap_get=function(t){return[`catmiot.coap_request(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_coap_post={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASECATM_COAP_POST,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_coap_post=function(t){return[`catmiot.coap_request(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, 2, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_coap_put={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASECATM_COAP_PUT,args0:[{type:"input_value",name:"url"},{type:"input_value",name:"payload"}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_coap_put=function(t){return[`catmiot.coap_request(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, 3, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_coap_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASECATM_COAP_DELETE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_coap_delete=function(t){return["catmiot.delete_coap()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_disconnect=function(t){return"catmiot.mqtt_disconnect()\n"},Blockly.Blocks.iotbasecatm_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB,args0:[{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_sub=function(t){return[`catmiot.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, iotbasecatm_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def iotbasecatm_mqtt_cb(catm_mq_topic, catm_mq_payload):\n  # global params\n  ${e} = catm_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = catm_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.iotbasecatm_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_UNSUBSCRIBE,args0:[{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_unsubscribe=function(t){return`catmiot.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.iotbasecatm_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_PUBLISH,args0:[{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_publish=function(t){return`catmiot.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.iotbasecatm_mqtt_check_connection={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_CHECK_CONNECTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Check mqtt connection.","Return: 0/1 or False"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_check_connection=function(t){return["catmiot.mqtt_ischeck_connect()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.iotbasecatm_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOTBASE_MQTT_POLL,args0:[],previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_mqtt_poll=function(t){return"catmiot.mqtt_poll()\n"},Blockly.Blocks.iotbasecatm_modbus_master_u_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_read_coils=Blockly.Python.iotbase_modbus_master_u_read_coils,Blockly.Blocks.iotbasecatm_modbus_master_u_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_read_discrete_inputs=Blockly.Python.iotbase_modbus_master_u_read_discrete_inputs,Blockly.Blocks.iotbasecatm_modbus_master_u_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_read_holding_registers=Blockly.Python.iotbase_modbus_master_u_read_holding_registers,Blockly.Blocks.iotbasecatm_modbus_master_u_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_read_input_registers=Blockly.Python.iotbase_modbus_master_u_read_input_registers,Blockly.Blocks.iotbasecatm_modbus_master_u_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_write_single_coil=Blockly.Python.iotbase_modbus_master_u_write_single_coil,Blockly.Blocks.iotbasecatm_modbus_master_u_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_write_single_register=Blockly.Python.iotbase_modbus_master_u_write_single_register,Blockly.Blocks.iotbasecatm_modbus_master_u_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_write_multiple_coils=Blockly.Python.iotbase_modbus_master_u_write_multiple_coils,Blockly.Blocks.iotbasecatm_modbus_master_u_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_master_u_write_multiple_registers=Blockly.Python.iotbase_modbus_master_u_write_multiple_registers;let l=[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"],["WRITE_SINGLE_COIL","5"],["WRITE_SINGLE_REGISTER","6"],["WRITE_MULTIPLE_COILS","15"],["WRITE_MULTIPLE_REGISTERS","16"]];Blockly.Blocks.iotbasecatm_modbus_slave_rtu_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:l},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_init_func=Blockly.Python.iotbase_modbus_slave_rtu_init_func,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_UPDATE_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"]]},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_update_func=Blockly.Python.iotbase_modbus_slave_rtu_update_func,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_receive_adu={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_RECEIVE_ADU,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_receive_adu=Blockly.Python.iotbase_modbus_slave_rtu_receive_adu,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_SEND,args0:[{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_send=Blockly.Python.iotbase_modbus_slave_rtu_send,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_get_function={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_FUNCTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_get_function=Blockly.Python.iotbase_modbus_slave_rtu_get_function,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_fun_status={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_FUN_STATUS,args0:[{type:"field_dropdown",name:"FUNC",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_fun_status=Blockly.Python.iotbase_modbus_slave_rtu_fun_status,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_get_address={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_ADDRESS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_get_address=Blockly.Python.iotbase_modbus_slave_rtu_get_address,Blockly.Blocks.iotbasecatm_modbus_slave_rtu_get_quantity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_QUANTITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_modbus_slave_rtu_get_quantity=Blockly.Python.iotbase_modbus_slave_rtu_get_quantity,Blockly.Blocks.iotbasecatm_uart_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Read uart data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_read=Blockly.Python.iotbase_uart_read,Blockly.Blocks.iotbasecatm_uart_read_characters={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Read number uart data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_read_characters=Blockly.Python.iotbase_uart_read_characters,Blockly.Blocks.iotbasecatm_uart_readline={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_readline=Blockly.Python.iotbase_uart_readline,Blockly.Blocks.iotbasecatm_uart_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:["Write data"]}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_write=Blockly.Python.iotbase_uart_write,Blockly.Blocks.iotbasecatm_uart_any={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_any=Blockly.Python.iotbase_uart_any,Blockly.Blocks.iotbasecatm_uart_write_line={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_write_line=Blockly.Python.iotbase_uart_write_line,Blockly.Blocks.iotbasecatm_uart_write_raw_data={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["iotbase"]}},Blockly.Python.iotbasecatm_uart_write_raw_data=Blockly.Python.iotbase_uart_write_raw_data,Blockly.Blocks.iotbasecatm_ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbasecatm_ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`catmiot.get_ezdata(ezdata_get_${this.cbId}cb, ${n}, ${e})\n`},Blockly.Blocks.iotbasecatm_ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value %2 callback with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null",align:"RIGHT"},{type:"input_statement",name:"success_fun"}],inputsInline:!1,colour:Blockly.Msg.IOTBASE_CATM_HUE,tool:[]}},mutationToDom:Blockly.Blocks.iotbasecatm_ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.iotbasecatm_ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbasecatm_ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def ezdata_get_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),""+l},Blockly.Blocks.iotbasecatm_ezdata_save={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_SAVE,args0:[{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"},{type:"field_dropdown",name:"mode",options:[["Single data","0"],["List data","1"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbasecatm_ezdata_save=function(t){var e=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`catmiot.set_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${n}, ${e}, ${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.iotbasecatm_ezdata_remove={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_REMOVE,args0:[{type:"input_value",name:"topic"},{type:"input_value",name:"token"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.IOTBASE_CATM_HUE}},attrs:{keyword:["ezdata","iotbase"]}},Blockly.Python.iotbasecatm_ezdata_remove=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`catmiot.remove_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.lan_base_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_INIT,args0:[{type:"input_dummy"},{type:"input_value",name:"ip"},{type:"input_value",name:"port"},{type:"field_dropdown",name:"socket",options:[["TCP","1"],["UDP","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"machine",options:[["Server","1"],["Client","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_init=function(t){return`lan.tcp_udp_config(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("socket")}, ${t.getFieldValue("machine")})\n`},Blockly.Blocks.lan_base_tcp_send_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_TCP_SEND_PACKET,args0:[{type:"input_value",name:"packet"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_tcp_send_packet=function(t){return`lan.tcp_send_packet(${Blockly.Python.valueToCode(t,"packet",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lan_base_tcp_receive_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_TCP_RECEIVE_PACKET,args0:[{type:"input_value",name:"size"}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_tcp_receive_packet=function(t){return[`lan.tcp_receive_packet(${Blockly.Python.valueToCode(t,"size",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_udp_send_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_UDP_SEND_PACKET,args0:[{type:"input_value",name:"ip"},{type:"input_value",name:"port"},{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_udp_send_packet=function(t){return`lan.udp_send_packet(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lan_base_udp_receive_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_UDP_RECEIVE_PACKET,args0:[{type:"input_value",name:"size"}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_udp_receive_packet=function(t){return[`lan.udp_receive_packet(${Blockly.Python.valueToCode(t,"size",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_available_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_AVAILABLE_PACKET,args0:[{type:"field_dropdown",name:"socket",options:[["TCP","1"],["UDP","2"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_available_packet=function(t){return[`lan.is_available_packet(${t.getFieldValue("socket")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_local_ip={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_LOCAL_IP,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_local_ip=function(t){return["lan.local_ip()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_remote_ip={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_REMOTE_IP,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_remote_ip=function(t){return["lan.remote_ip()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_get_if_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_GET_IF_CONFIG,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_get_if_config=function(t){return["lan.get_if_config()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DTU_CAT1_MODBUS_INIT,args0:[{type:"input_value",name:"bandrate"},{type:"field_dropdown",name:"mode",options:[["Master","1"],["Slave","2"]]},{type:"input_value",name:"slaveAddr"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_init=function(t){return`modbus = lan.modbus_init(15, 5, ${Blockly.Python.valueToCode(t,"bandrate",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")}, ${Blockly.Python.valueToCode(t,"slaveAddr",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.lan_base_modbus_master_u_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_read_coils=function(t){return[`modbus.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_DISCRETE_INPUTS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_read_discrete_inputs=function(t){return[`modbus.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_HOLDING_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_read_holding_registers=function(t){return[`modbus.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_READ_INPUT_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_read_input_registers=function(t){return[`modbus.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_COIL,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_write_single_coil=function(t){return[`modbus.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_SINGLE_REGISTER,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_write_single_register=function(t){return[`modbus.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_COILS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_write_multiple_coils=function(t){return[`modbus.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_master_u_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MODBUS_MASTER_WRITE_MULTIPLE_REGISTERS,args0:[{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_master_u_write_multiple_registers=function(t){return[`modbus.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};let l=[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"],["WRITE_SINGLE_COIL","5"],["WRITE_SINGLE_REGISTER","6"],["WRITE_MULTIPLE_COILS","15"],["WRITE_MULTIPLE_REGISTERS","16"]];Blockly.Blocks.lan_base_modbus_slave_rtu_init_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_INIT_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:l},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_init_func=function(t){return`modbus.function_init(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lan_base_modbus_slave_rtu_update_func={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_UPDATE_FUNC,args0:[{type:"field_dropdown",name:"FUNC",options:[["READ_COILS_STATUS","1"],["READ_INPUT_STATUS","2"],["READ_HOLDING_REGISTERS","3"],["READ_INPUT_REGISTERS","4"]]},{type:"input_value",name:"START_ADDR"},{type:"input_value",name:"quantity"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_update_func=function(t){return`modbus.update_process(${t.getFieldValue("FUNC")}, ${Blockly.Python.valueToCode(t,"START_ADDR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"quantity",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.lan_base_modbus_slave_rtu_receive_adu={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_RECEIVE_ADU,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_receive_adu=function(t){return["modbus.receive_req_create_pdu()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_slave_rtu_send={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_SEND,args0:[{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_send=function(t){return`modbus.create_slave_response(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.lan_base_modbus_slave_rtu_get_function={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_FUNCTION,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_get_function=function(t){return["modbus.find_function",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_slave_rtu_fun_status={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_FUN_STATUS,args0:[{type:"field_dropdown",name:"FUNC",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_fun_status=function(t){return[""+t.getFieldValue("FUNC"),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_slave_rtu_get_address={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_ADDRESS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_get_address=function(t){return["modbus.find_address",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_modbus_slave_rtu_get_quantity={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.MODBUS_SLAVE_RTU_GET_QUANTITY,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_modbus_slave_rtu_get_quantity=function(t){return["modbus.find_quantity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_uart_read={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Read uart data","return: bytes, empty will return None"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_read=function(t){return["modbus._mdbus_uart.read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_uart_read_characters={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READ_CHARACTERS,args0:[{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Read number uart data","return: bytes, empty will return None"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_read_characters=function(t){return[`modbus._mdbus_uart.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_uart_readline={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_READLINE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_readline=function(t){return["modbus._mdbus_uart.readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_uart_write={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Write data"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\");return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+")\n":"modbus._mdbus_uart.write(str("+e+"))\n"},Blockly.Blocks.lan_base_uart_any={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_ANY,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_any=function(t){return["modbus._mdbus_uart.any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_uart_write_line={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_LINE,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?"modbus._mdbus_uart.write("+e+'+"\\r\\n")\n':"modbus._mdbus_uart.write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.lan_base_uart_write_raw_data={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_UART_WRITE_RAW_DATA,args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_uart_write_raw_data=function(t){return`modbus._mdbus_uart.write(bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""}))\n`},Blockly.Blocks.lan_base_ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata","lan","base"]}},Blockly.Python.lan_base_ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`lan.get_ezdata(ezdata_get_${this.cbId}cb, ${n}, ${e})\n`},Blockly.Blocks.lan_base_ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value %2 callback with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null",align:"RIGHT"},{type:"input_statement",name:"success_fun"}],inputsInline:!1,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},mutationToDom:Blockly.Blocks.lan_base_ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.lan_base_ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata","lan","base"]}},Blockly.Python.lan_base_ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def ezdata_get_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),""+l},Blockly.Blocks.lan_base_ezdata_save={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_SAVE,args0:[{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"token",align:"RIGHT"},{type:"field_dropdown",name:"mode",options:[["Single data","0"],["List data","1"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["ezdata","lan","base"]}},Blockly.Python.lan_base_ezdata_save=function(t){var e=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`lan.set_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${n}, ${e}, ${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.lan_base_ezdata_remove={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.IOTBASE_EZDATA_REMOVE,args0:[{type:"input_value",name:"topic"},{type:"input_value",name:"token"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.LAN_BASE_HUE}},attrs:{keyword:["ezdata","lan","base"]}},Blockly.Python.lan_base_ezdata_remove=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"";return`lan.remove_ezdata(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_NONE)||""}, ${e})\n`},Blockly.Blocks.lan_base_socket_close={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_SOCKET_CLOSE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:[]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_socket_close=function(t){return"lan.socket_close()\n"},Blockly.Blocks.lan_base_http_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LAN_BASE_HTTP_GET,args0:[{type:"input_value",name:"url"},{type:"field_dropdown",name:"mode",options:[["Full content","False"],["Data only","True"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Parameter:","url: Uniform Resource Locator","Return: ","False or (head, body)"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_http_get=function(t){return[`lan.http_get(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.lan_base_http_post={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.COMLTE_HTTP_POST,args0:[{type:"input_value",name:"url"},{type:"field_dropdown",name:"type",options:[["JSON","application/json"],["FORM","application/x-www-form-urlencoded"],["TEXT","text/plain"]]},{type:"input_value",name:"data"}],output:null,inputsInline:!0,colour:Blockly.Msg.LAN_BASE_HUE,tool:["Parameter:","url: Uniform Resource Locator","type: application/json, application/x-www-form-urlencoded, text/plain","data: string","Return: ","False or (head, body)"]}},attrs:{keyword:["lan","base"]}},Blockly.Python.lan_base_http_post=function(t){return[`lan.http_post(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, '${t.getFieldValue("type")}', ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"adc"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}!function(){var t=[["adc0","adc1"],["ATTN_0DB","ATTN_2_5DB","ATTN_6DB","ATTN_11DB"],["WIDTH_9BIT","WIDTH_10BIT","WIDTH_11BIT","WIDTH_12BIT"]];for(let n=0;n<t.length;n++){var e=[];for(let o=0;o<t[n].length;o++)e[e.length]=[t[n][o],t[n][o]];t[n]=e}}(),Blockly.Blocks.unit_adc_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.ADC_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"ADC",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Get voltage","return: 0~12 (V)"]}},attrs:{keyword:["adc"]}},Blockly.Python.unit_adc_state=function(t){return[(t.getFieldValue("ADC")||"")+".voltage",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"angle"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.angle_read={init:function(){this.jsonInit(this._angleRead())},_angleRead:function(){return{message0:Blockly.Msg.ANGLE_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["Get angle analog value","return: 0~1024"]}},attrs:{keyword:["angle"]}},Blockly.Python.angle_read=function(t){return[t.getFieldValue("VARNAME")+".read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.angle_readraw={init:function(){this.jsonInit(this._angleRead())},_angleRead:function(){return{message0:Blockly.Msg.ANGLE_READRAW,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tooltib:" get raw value, range 0 ~ 4095"}},attrs:{keyword:["angle"]}},Blockly.Python.angle_readraw=function(t){return[t.getFieldValue("VARNAME")+".readraw()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){return[["wasPressed","wasPressed"],["wasReleased","wasReleased"],["longPress","pressFor"],["wasDoublePress","wasDoublePress"]]}function o(){for(var t=[],e=0;e<Blockly.Units.length;e++)"dual_button"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"button"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_button_callback={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_BUTTON,args0:[{type:"field_dropdown",name:"BUTTON",options:l},{type:"field_dropdown",name:"EVENT",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.TRACK_HUE}},attrs:{keyword:["button"]}},Blockly.Python.unit_button_callback=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("EVENT")||"wasPressed",o=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",l="def"+e+"_"+n+"():\n"+o+"  pass";return l="def "+e+"_"+n+"_cb():\n  # global params\n"+o+"  pass\n",Blockly.defineGlobal().length>0&&(l=(l="def "+e+"_"+n+"_cb():\n  # global params\n"+o+"  pass\n").replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),l+("pressFor"==n?e+"."+n+"(0.8, "+e+"_"+n+"_cb)":e+"."+n+"("+e+"_"+n+"_cb)")},Blockly.Blocks.unit_button_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"BUTTON",options:l},{type:"field_dropdown",name:"EVENT",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.TRACK_HUE,tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button"]}},Blockly.Python.unit_button_state=function(t){return[(t.getFieldValue("BUTTON")||"A")+"."+(t.getFieldValue("EVENT")||"wasPressed")+"()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_dual_button_callback={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_DUAL_BUTTON,args0:[{type:"field_dropdown",name:"BUTTON",options:o},{type:"field_dropdown",name:"BTN",options:[["Red","btnRed"],["Blue","btnBlue"]]},{type:"field_dropdown",name:"EVENT",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.RGB_HUE,tooltib:"btnRed, btnRed method like button unit"}},attrs:{keyword:["button","dual"]}},Blockly.Python.unit_dual_button_callback=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("BTN")||"btnRed",o=t.getFieldValue("EVENT")||"wasPressed",l=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.defineGlobal(),a="def button"+e+"_"+o+"():\n"+l+"pass";a=`def ${n}${e.substring(e.length-1)}_${o}():\n  # global params\n${l}  pass\n`,i.length>0&&(a=(a=`def ${n}${e.substring(e.length-1)}_${o}():\n  # global params\n${l}  pass\n`).replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));var s=e.substring(e.length-1);return a+("pressFor"==o?"dual_button_"+s+"."+n+"."+o+"(0.8, "+n+s+"_"+o+")":"dual_button_"+s+"."+n+"."+o+"("+n+s+"_"+o+")")},Blockly.Blocks.unit_dual_button_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_DUAL_BUTTON_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"BUTTON",options:o},{type:"field_dropdown",name:"BTN",options:[["Red","btnRed"],["Blue","btnBlue"]]},{type:"field_dropdown",name:"EVENT",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE,tooltib:"btnRed, btnRed method like button unit"}},attrs:{keyword:["button","dual"]}},Blockly.Python.unit_dual_button_state=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("BTN")||"btnA";return Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL),[e+"."+n+"."+(t.getFieldValue("EVENT")||"wasPressed")+"()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"cardkb"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.cardkb_getpress={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CARDKB_GETPRESSED,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"KEY",options:n}],colour:Blockly.Msg.TIMER_HUE,tooltib:"isNewKeyPress() --\x3e if press key return True else False"}},attrs:{keyword:["cardkb"]}},Blockly.Python.cardkb_getpress=function(t){return[(t.getFieldValue("KEY")||"")+".isNewKeyPress()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.cardkb_getkey={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CARDKB_GETKEY,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"KEY",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get last press key","Return: last press key value at once"]}},attrs:{keyword:["cardkb"]}},Blockly.Python.cardkb_getkey=function(t){return[(t.getFieldValue("KEY")||"")+".keyData",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.cardkb_getstring={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CARDKB_GETSTR,inputsInline:!0,output:null,args0:[{type:"field_dropdown",name:"STR",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get press string","Return: press string, len < 50","note: press ESC clear string, press [X] delete string last one"]}},attrs:{keyword:["cardkb"]}},Blockly.Python.cardkb_getstring=function(t){return[(t.getFieldValue("STR")||"")+".keyString",Blockly.Python.ORDER_MEMBER]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"dac"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_dac_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.DAC_STATE,args0:[{type:"input_dummy"},{type:"input_value",name:"FROM"},{type:"field_dropdown",name:"DAC",options:n},{type:"field_dropdown",name:"SAVE",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Output voltage","voltage: 0~3.3 (V)","save: true->data write to eeprom"]}},attrs:{keyword:["dac"]}},Blockly.Python.unit_dac_state=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=t.getFieldValue("SAVE")||"false";return(t.getFieldValue("DAC")||"")+".setVoltage("+e+",save="+n+")\n"},Blockly.Blocks.unit_dac_writeData={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.DAC_SETDATA,args0:[{type:"input_dummy"},{type:"input_value",name:"FROM"},{type:"field_dropdown",name:"DAC",options:n},{type:"field_dropdown",name:"SAVE",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Output voltage","raw data: 0~4096","save: true->write data to ceprom","note: 2640 near 3.3V"]}},attrs:{keyword:["dac"]}},Blockly.Python.unit_dac_writeData=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=t.getFieldValue("SAVE")||"False";return(t.getFieldValue("DAC")||"")+".writeData("+e+",save="+n+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"earth"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.earth_a_read={init:function(){this.jsonInit(this._eartharead())},_eartharead:function(){return{message0:Blockly.Msg.EARTH_A_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPIO_HUE,tool:["Get analog value","return: 0~1024"]}},attrs:{keyword:["earth"]}},Blockly.Python.earth_a_read=function(t){return[t.getFieldValue("VARNAME")+".analogValue",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.earth_d_read={init:function(){this.jsonInit(this._earthtbread())},_earthtbread:function(){return{message0:Blockly.Msg.EARTH_D_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPIO_HUE,tool:["Get digital value","return: 0 or 1"]}},attrs:{keyword:["earth"]}},Blockly.Python.earth_d_read=function(t){return[t.getFieldValue("VARNAME")+".digitalValue",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"env"!==Blockly.Units[e].type&&"env2"!==Blockly.Units[e].type&&"env3"!==Blockly.Units[e].type||t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.dht12_pressure={init:function(){this.jsonInit(this._dhf12pressure())},_dhf12pressure:function(){return{message0:Blockly.Msg.DHT12_PRESSURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get env pressure","return: 30000 ~ 110000 (pa)"]}},attrs:{keyword:["env"]}},Blockly.Python.dht12_pressure=function(t){return[t.getFieldValue("VARNAME")+".pressure",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dht12_get_temperature={init:function(){this.jsonInit(this._dhf12gettemp())},_dhf12gettemp:function(){return{message0:Blockly.Msg.DHT12_GET_TEMPERATURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get env temperature","return: -20 ~ 60 (\u2103)"]}},attrs:{keyword:["env"]}},Blockly.Python.dht12_get_temperature=function(t){return[t.getFieldValue("VARNAME")+".temperature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.dht12_get_humidity={init:function(){this.jsonInit(this._dhf12gethunidity())},_dhf12gethunidity:function(){return{message0:Blockly.Msg.DHT12_GET_HUMIDITY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get env humidity","return: 20 ~ 95 (%)"]}},attrs:{keyword:["env"]}},Blockly.Python.dht12_get_humidity=function(t){return[t.getFieldValue("VARNAME")+".humidity",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ext_io"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.extio_set_port={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_SET_PORT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"EXTIO",options:n},{type:"field_dropdown",name:"MODE",options:[["ALL_INPUT","ALL_INPUT"],["ALL_OUTPUT","ALL_OUTPUT"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Set all extend I/O mode"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_set_port=function(t){var e=t.getFieldValue("EXTIO")||"";return e+".setPortMode("+e+"."+(t.getFieldValue("MODE")||"")+")\n"},Blockly.Blocks.extio_set_pin={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_SET_PIN,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"EXTIO",options:n},{type:"field_dropdown",name:"MODE",options:[["INPUT","INPUT"],["OUTPUT","OUTPUT"]]},{type:"field_dropdown",name:"PIN",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Set singer extend I/O mode","pin: 0~7","mode: INPUT or OUTPUT"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_set_pin=function(t){var e=t.getFieldValue("EXTIO")||"",n=t.getFieldValue("MODE")||"INPUT";return e+".setPinMode("+(t.getFieldValue("PIN")||"0")+", "+e+"."+n+")\n"},Blockly.Blocks.extio_set_digiWritePort={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_SET_DIGIWRITEPORT,args0:[{type:"input_dummy"},{type:"field_input",name:"FROM",text:"0xff"},{type:"field_dropdown",name:"EXTIO",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Set all extend I/O state","state: 0x00~0xff","note: 0x03 mean pin 1,2 High, other Low"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_set_digiWritePort=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"0x68";return(t.getFieldValue("EXTIO")||"")+".digitWritePort("+e+")\n"},Blockly.Blocks.extio_set_digiWrite={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_SET_DIGIWRITE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"EXTIO",options:n},{type:"field_dropdown",name:"PIN",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]},{type:"field_dropdown",name:"VALUE",options:[["low","0"],["high","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Set single extend I/O state","pin: 0~7","state: 0 or 1"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_set_digiWrite=function(t){return(t.getFieldValue("EXTIO")||"")+".digitWrite("+(t.getFieldValue("PIN")||"0")+","+(t.getFieldValue("VALUE")||"0")+")\n"},Blockly.Blocks.extio_set_digiRead={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_SET_DIGIREAD,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"EXTIO",options:n},{type:"field_dropdown",name:"PIN",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Read single extend I/O state","pin: 0~7","return: 0 or 1"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_set_digiRead=function(t){return[(t.getFieldValue("EXTIO")||"")+".digitRead("+(t.getFieldValue("PIN")||"")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.extio_get_digiReadPort={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.EXTIO_GET_DIGIREADPORT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"EXTIO",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Read all extend I/O state","pin: 0~7","return: 0x00 ~ 0xff"]}},attrs:{keyword:["extio"]}},Blockly.Python.extio_get_digiReadPort=function(t){return[(t.getFieldValue("EXTIO")||"")+".digitReadPort()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"finger"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.finger_read={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_READ,args0:[{type:"field_dropdown",name:"STATE",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Callback fun","access: finger access","user_id: finger user_id"]}},attrs:{keyword:["finger"]}},Blockly.Python.finger_read=function(t){var e=t.getFieldValue("STATE")||"";let n=`def ${e}_cb(user_id, access):\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+=`${e}.readFingerCb(callback=${e}_cb)\n`,n},Blockly.Blocks.finger_add_user={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_ADD_USER,args0:[{type:"field_dropdown",name:"STATE",options:n},{type:"input_value",name:"ID"},{type:"field_dropdown",name:"ACCESS",options:[["1","1"],["2","2"],["3","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Add user","user_id: 0~255",'finish: unit_finger.state -> "Add user finish"','fail: unit_finger.state -> "Add user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.finger_add_user=function(t){var e=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=t.getFieldValue("ACCESS")||"";return(t.getFieldValue("STATE")||"")+".addUser("+e+", "+n+")\n"},Blockly.Blocks.finger_get_id={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_GET_ID,output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.finger_get_id=function(t){return["user_id",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.finger_get_access={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_GET_ACCESS,output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.finger_get_access=function(t){return["access",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.finger_remove_user={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_REMOVE_USER,args0:[{type:"field_dropdown",name:"STATE",options:n},{type:"input_value",name:"ID"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Remove finger data","user_id: 0~255",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.finger_remove_user=function(t){var e=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"";return(t.getFieldValue("STATE")||"")+".removeUser("+e+")\n"},Blockly.Blocks.finger_removeAll={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_REMOVEALL,args0:[{type:"field_dropdown",name:"STATE",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Remove All finger data",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.finger_removeAll=function(t){return(t.getFieldValue("STATE")||"")+".removeAllUser()\n"},Blockly.Blocks.finger_get_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FINGER_GET_STATE,args0:[{type:"field_dropdown",name:"STATE",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return finger state"]}},attrs:{keyword:["finger"]}},Blockly.Python.finger_get_state=function(t){return[(t.getFieldValue("STATE")||"")+".state",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.finger_getUnknown={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FINGER_GET_UNKNOWN,args0:[{type:"field_dropdown",name:"STATE",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["finger"]}},Blockly.Python.finger_getUnknown=function(t){var e=t.getFieldValue("STATE")||"finger0",n="def "+e+"_unknownCb():\n  # global params\n"+(Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass\n";return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+(e+".getUnknownCb(")+e+"_unknownCb)"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ir"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_ir_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.IR_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"IR",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Get ir rx state","return: True if received level changes else False"]}},attrs:{keyword:["ir"]}},Blockly.Python.unit_ir_state=function(t){return[(t.getFieldValue("IR")||"")+".rxStatus()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_ir_on={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.IR_ON,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"IR",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["IR emit sigual baseon on 25hz carrier"]}},attrs:{keyword:["ir"]}},Blockly.Python.unit_ir_on=function(t){return(t.getFieldValue("IR")||"")+".txOn()\n"},Blockly.Blocks.unit_ir_off={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.IR_OFF,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"IR",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Set ir tx pin level Low"]}},attrs:{keyword:["ir"]}},Blockly.Python.unit_ir_off=function(t){return(t.getFieldValue("IR")||"")+".txOff()\n"},Blockly.Blocks.unit_ir_nec_tx={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_IR_NEC_TX,args0:[{type:"field_dropdown",name:"IR",options:n},{type:"input_value",name:"addr"},{type:"input_value",name:"data"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["ir"]}},Blockly.Python.unit_ir_nec_tx=function(t){return`${t.getFieldValue("IR")||""}.tx(${Blockly.Python.valueToCode(t,"addr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_ir_nec_cb={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_IR_NEC_CB,args0:[{type:"field_dropdown",name:"IR",options:n},{type:"input_value",name:"data"},{type:"input_value",name:"addr"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE}},attrs:{keyword:["ir"]}},Blockly.Python.unit_ir_nec_cb=function(t){var e=t.getFieldValue("IR")||"";let n=`\ndef ir_nec_rx_cb(_data, _addr, _ctrl):\n  # global params\n  ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = _data\n  ${Blockly.Python.valueToCode(t,"addr",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = _addr\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n${e}.rx_cb(ir_nec_rx_cb)\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"joystick"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.joystick_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.JOYSTICK_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get x direction value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystick_x=function(t){return[t.getFieldValue("VARNAME")+".X",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystick_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.JOYSTICK_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get y direction value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystick_y=function(t){return[t.getFieldValue("VARNAME")+".Y",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystick_press={init:function(){this.jsonInit(this._joystickpress())},_joystickpress:function(){return{message0:Blockly.Msg.JOYSTICK_PRESS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get joystick press state","return: 0 or 1"]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystick_press=function(t){return[t.getFieldValue("VARNAME")+".Press",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystick_reversal_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.JOYSTICK_REVERSAL_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get invert y value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystick_reversal_x=function(t){return[t.getFieldValue("VARNAME")+".InvertX",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystick_reversal_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.JOYSTICK_REVERSAL_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.DHT_HUE,tool:["Get invert y value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystick_reversal_y=function(t){return[t.getFieldValue("VARNAME")+".InvertY",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"light"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.light_a_read={init:function(){this.jsonInit(this._lightaread())},_lightaread:function(){return{message0:Blockly.Msg.LIGHT_A_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.SPEAKER_HUE,tool:["Get analog value","return: 0~1024"]}},attrs:{keyword:["light"]}},Blockly.Python.light_a_read=function(t){return[t.getFieldValue("VARNAME")+".analogValue",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.light_d_read={init:function(){this.jsonInit(this._lightbread())},_lightbread:function(){return{message0:Blockly.Msg.LIGHT_D_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.SPEAKER_HUE,tool:["Get digital value","return: 0 or 1"]}},attrs:{keyword:["light"]}},Blockly.Python.light_d_read=function(t){return[t.getFieldValue("VARNAME")+".digitalValue",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"makey"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.makey_value={init:function(){this.jsonInit(this._makevalue())},_makevalue:function(){return{message0:Blockly.Msg.MAKEY_VALUE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.NXT_MOTOR_HUE,tool:["Get makey PIN Number","return: 0 ~ 17"]}},attrs:{keyword:["makey"]}},Blockly.Python.makey_value=function(t){return[t.getFieldValue("VARNAME")+".value",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.makey_all_value={init:function(){this.jsonInit(this._makevalue())},_makevalue:function(){return{message0:Blockly.Msg.MAKEY_ALL_VALUE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.NXT_MOTOR_HUE}},attrs:{keyword:["makey"]}},Blockly.Python.makey_all_value=function(t){return[t.getFieldValue("VARNAME")+".valueAll",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.rgb_multi_set_color={init:function(){this.jsonInit(this._rgbmulyisetcolor())},_rgbmulyisetcolor:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"INDEX"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set neopixel color","index: 1 ~ neopixel number"]}},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_color=function(t){return t.getFieldValue("VARNAME")+".setColor("+(Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"10")+", "+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_multi_set_color_from={init:function(){this.jsonInit(this._rgbmultisetcolorfrom())},_rgbmultisetcolorfrom:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR_FROM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"FROM"},{type:"input_value",name:"TO"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set multi neopixel color","input-1: 1 ~ neopixel number","input-2: input-1 ~ neopixel number"]}},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_color_from=function(t){return t.getFieldValue("VARNAME")+".setColorFrom("+(Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+", "+(Blockly.Python.valueToCode(t,"TO",Blockly.Python.ORDER_FUNCTION_CALL)||"5")+", "+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_multi_set_color_all={init:function(){this.jsonInit(this._rgbmulyisetcolorall())},_rgbmulyisetcolorall:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR_ALL,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set all neopixel color"]}},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_color_all=function(t){return t.getFieldValue("VARNAME")+".setColorAll("+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_multi_set_color_from_rgb={init:function(){this.jsonInit(this._rgbmulyisetfromrgb())},_rgbmulyisetfromrgb:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR_FROM_RGB,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"FROM"},{type:"input_value",name:"TO"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set multi neopixel color","input-1: 1 ~ neopixel number","input-2: input-1 ~ neopixel number","R: 0 ~ 255","G: 0 ~ 255","B: 0 ~ 255"]}},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_color_from_rgb=function(t){var e=t.getFieldValue("VARNAME"),n=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",o=Blockly.Python.valueToCode(t,"TO",Blockly.Python.ORDER_FUNCTION_CALL)||"5",l=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",a=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a)))return e+`.setColorFrom(${n},${o},(${l} << 16) | (${i} << 8) | ${a})\n`;var s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16),c=Math.floor(Math.abs(parseInt(a))%256).toString(16);return s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),c.length<2&&(c="0"+c),e+".setColorFrom("+n+", "+o+", 0x"+s+r+c+")\n"},Blockly.Blocks.rgb_multi_set_brightness={init:function(){this.jsonInit(this._rgbmulyisetbrightness())},_rgbmulyisetbrightness:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_BRIGHTNESS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"BRIGHTNESS"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set neopixel brightness","brightness: 0 ~ 100"]}},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_brightness=function(t){return t.getFieldValue("VARNAME")+".setBrightness("+(Blockly.Python.valueToCode(t,"BRIGHTNESS",Blockly.Python.ORDER_FUNCTION_CALL)||"20")+")\n"},Blockly.Blocks.rgb_multi_set_matrix={init:function(){this.setColour(Blockly.Msg.PINS_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput().appendField("Set ").appendField(new Blockly.FieldDropdown(this.getAllS),"VARNAME").appendField("neopixel matrix in ").appendField(new Blockly.FieldColour("#FF0000"),"COLOR");for(var t=0;t<16;t++)for(var e=this.appendDummyInput(),n=0;n<16;n++)e.appendField(new Blockly.FieldCheckbox("FALSE"),"MAP_"+t+"_"+n)},blockly_config:function(){return{tool:[]}},getAllS:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t},attrs:{keyword:["rgbled","rgb","led"]}},Blockly.Python.rgb_multi_set_matrix=function(t){for(var e=t.getFieldValue("VARNAME"),n=t.getFieldValue("COLOR")||"#FF0000",o=[],l=[],i=0;i<16;i++)for(var a=0;a<16;a++)"FALSE"!==t.getFieldValue("MAP_"+i+"_"+a)&&(i%2!=0?l.push(16*i+(a+1)):l.push(16*i+(16-a)));l.sort(function(t,e){return t-e});var s=[];for(i=0;i<l.length;){for(s.push([l[i]]),a=i+1;a<l.length&&l[a]-l[a-1]==1;)s[s.length-1].push(l[a]),a++;i=a}for(i=0;i<s.length;i++)1===s[i].length?o.push(e+".setColor("+s[i][0]+", "+n.replace("#","0x")+")"):o.push(e+".setColorFrom("+s[i][0]+", "+s[i][s[i].length-1]+", "+n.replace("#","0x")+")");return o.join("\n")+"\n"},Blockly.Blocks.rgb_multi_set_matrix_rgb={init:function(){this.setColour(Blockly.Msg.PINS_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput().appendField("Set ").appendField(new Blockly.FieldDropdown(this.getAll),"VARNAME").appendField("neopixel matrix in "),this.appendValueInput("R").appendField("red"),this.appendValueInput("G").appendField("green"),this.appendValueInput("B").appendField("blue");for(var t=0;t<16;t++)for(var e=this.appendDummyInput(),n=0;n<16;n++)e.appendField(new Blockly.FieldCheckbox("FALSE"),"MAP_"+t+"_"+n)},attrs:{keyword:["rgbled","rgb","led"]},blockly_config:function(){return{tool:[]}},getAll:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}},Blockly.Python.rgb_multi_set_matrix_rgb=function(t){var e=t.getFieldValue("VARNAME"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0",i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s);for(var r=[],c=[],u=0;u<16;u++)for(var _=0;_<16;_++)"FALSE"!==t.getFieldValue("MAP_"+u+"_"+_)&&(u%2!=0?c.push(16*u+(_+1)):c.push(16*u+(16-_)));c.sort(function(t,e){return t-e});var d=[];for(u=0;u<c.length;){for(d.push([c[u]]),_=u+1;_<c.length&&c[_]-c[_-1]==1;)d[d.length-1].push(c[_]),_++;u=_}for(u=0;u<d.length;u++)1===d[u].length?isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l))?r.push(e+".setColor("+d[u][0]+", int('0x%02x%02x%02x' % (round(min(100, max(0, "+n+")) * 2.55), round(min(100, max(0, "+o+")) * 2.55), round(min(100, max(0, "+l+")) * 2.55))))\n"):r.push(e+".setColor("+d[u][0]+", 0x"+i+a+s+")"):isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l))?r.push(e+".setColor("+d[u][0]+", "+d[u][d[u].length-1]+", int('0x%02x%02x%02x' % (round(min(100, max(0, "+n+")) * 2.55), round(min(100, max(0, "+o+")) * 2.55), round(min(100, max(0, "+l+")) * 2.55))))\n"):r.push(e+".setColor("+d[u][0]+", "+d[u][d[u].length-1]+", 0x"+i+a+s+")");return r.join("\n")+"\n"},Blockly.Blocks.rgb_multi_set_hexagon_matrix={init:function(){this.setColour(Blockly.Msg.PINS_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput().appendField(Blockly.Msg.SET).appendField(new Blockly.FieldDropdown(this.getAll),"VARNAME").appendField(Blockly.Msg.RGB_MULTI_SET_HEXAGON_MATRIX).appendField(new Blockly.FieldColour("#FF0000"),"COLOR");for(var t=0;t<7;t++)for(var e=this.appendDummyInput(),n=0;n<7;n++)0==t&&4==n||0==t&&5==n||0==t&&6==n||1==t&&5==n||1==t&&6==n||2==t&&6==n||6==t&&4==n||5==t&&5==n||6==t&&5==n||4==t&&6==n||5==t&&6==n||6==t&&6==n||e.appendField(new Blockly.FieldCheckbox("FALSE"),"MAP_"+t+"_"+n);var o=this;setTimeout(function(){for(var t=o.inputList,e=1;e<t.length;e++)for(var n=0;n<t[e].fieldRow.length;n++)t[e].fieldRow[n].fieldGroup_.style.transform=e<5?`translate(${10+24*e}px, ${67.5+25*n-12.5*(e-1)}px)`:`translate(${10+24*e}px, ${67.5+25*n-12.5*(7-e)}px)`})},attrs:{keyword:["rgbled","rgb","led"]},blockly_config:function(){return{tool:[]}},getAll:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t},getIndexMap:function(t,e){},_indexMap:{"0-0":34,"0-1":35,"0-2":36,"0-3":37,"1-0":29,"1-1":30,"1-2":31,"1-3":32,"1-4":33,"2-0":23,"2-1":24,"2-2":25,"2-3":26,"2-4":27,"2-5":28,"3-0":16,"3-1":17,"3-2":18,"3-3":19,"3-4":20,"3-5":21,"3-6":22,"4-0":10,"4-1":11,"4-2":12,"4-3":13,"4-4":14,"4-5":15,"5-0":5,"5-1":6,"5-2":7,"5-3":8,"5-4":9,"6-0":1,"6-1":2,"6-2":3,"6-3":4}},Blockly.Python.rgb_multi_set_hexagon_matrix=function(t){for(var e=t.getFieldValue("VARNAME"),n=t.getFieldValue("COLOR")||"#FF0000",o=[],l=[],i=0;i<7;i++)for(var a=0;a<7;a++)"FALSE"!==t.getFieldValue("MAP_"+i+"_"+a)&&null!=t.getFieldValue("MAP_"+i+"_"+a)&&l.push(t._indexMap[i+"-"+a]);l.sort(function(t,e){return t-e});var s=[];for(i=0;i<l.length;){for(s.push([l[i]]),a=i+1;a<l.length&&l[a]-l[a-1]==1;)s[s.length-1].push(l[a]),a++;i=a}for(i=0;i<s.length;i++)1===s[i].length?o.push(e+".setColor("+s[i][0]+", "+n.replace("#","0x")+")"):o.push(e+".setColorFrom("+s[i][0]+", "+s[i][s[i].length-1]+", "+n.replace("#","0x")+")");return o.join("\n")+"\n"},Blockly.Blocks.rgb_multi_set_hexagon_matrix_rgb={init:function(){this.setColour(Blockly.Msg.PINS_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput().appendField(Blockly.Msg.SET).appendField(new Blockly.FieldDropdown(this.getAll),"VARNAME").appendField(Blockly.Msg.RGB_MULTI_SET_HEXAGON_MATRIX),this.appendValueInput("R").appendField(Blockly.Msg.RED),this.appendValueInput("G").appendField(Blockly.Msg.GREEN),this.appendValueInput("B").appendField(Blockly.Msg.BLUE);for(var t=0;t<7;t++)for(var e=this.appendDummyInput(),n=0;n<7;n++)0==t&&4==n||0==t&&5==n||0==t&&6==n||1==t&&5==n||1==t&&6==n||2==t&&6==n||6==t&&4==n||5==t&&5==n||6==t&&5==n||4==t&&6==n||5==t&&6==n||6==t&&6==n||e.appendField(new Blockly.FieldCheckbox("FALSE"),"MAP_"+t+"_"+n);var o=this;setTimeout(function(){for(var t=o.inputList,e=4;e<t.length;e++)for(var n=0;n<t[e].fieldRow.length;n++)t[e].fieldRow[n].fieldGroup_.style.transform=e<7?`translate(${24*e-34}px, ${67.5+25*n-12.5*(e-7)}px)`:`translate(${24*e-34}px, ${67.5+25*n-12.5*(7-e)}px)`})},attrs:{keyword:["rgbled","rgb","led"]},blockly_config:function(){return{tool:[]}},getAll:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t},getIndexMap:function(t,e){},_indexMap:{"0-0":34,"0-1":35,"0-2":36,"0-3":37,"1-0":29,"1-1":30,"1-2":31,"1-3":32,"1-4":33,"2-0":23,"2-1":24,"2-2":25,"2-3":26,"2-4":27,"2-5":28,"3-0":16,"3-1":17,"3-2":18,"3-3":19,"3-4":20,"3-5":21,"3-6":22,"4-0":10,"4-1":11,"4-2":12,"4-3":13,"4-4":14,"4-5":15,"5-0":5,"5-1":6,"5-2":7,"5-3":8,"5-4":9,"6-0":1,"6-1":2,"6-2":3,"6-3":4}},Blockly.Python.rgb_multi_set_hexagon_matrix_rgb=function(t){var e=t.getFieldValue("VARNAME"),n=[],o=[],l=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",a=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0",s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16),c=Math.floor(Math.abs(parseInt(a))%256).toString(16);s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),c.length<2&&(c="0"+c);for(var u=0;u<7;u++)for(var _=0;_<7;_++)"FALSE"!==t.getFieldValue("MAP_"+u+"_"+_)&&null!=t.getFieldValue("MAP_"+u+"_"+_)&&o.push(t._indexMap[u+"-"+_]);o.sort(function(t,e){return t-e});var d=[];for(u=0;u<o.length;){for(d.push([o[u]]),_=u+1;_<o.length&&o[_]-o[_-1]==1;)d[d.length-1].push(o[_]),_++;u=_}for(u=0;u<d.length;u++)1===d[u].length?isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a))?n.push(e+".setColor("+d[u][0]+", int('0x%02x%02x%02x' % (round(min(100, max(0, "+l+")) * 2.55), round(min(100, max(0, "+i+")) * 2.55), round(min(100, max(0, "+a+")) * 2.55))))\n"):n.push(e+".setColor("+d[u][0]+", 0x"+s+r+c+")"):isNaN(parseInt(l))||isNaN(parseInt(i))||isNaN(parseInt(a))?n.push(e+".setColorFrom("+d[u][0]+", "+d[u][d[u].length-1]+", int('0x%02x%02x%02x' % (round(min(100, max(0, "+l+")) * 2.55), round(min(100, max(0, "+i+")) * 2.55), round(min(100, max(0, "+a+")) * 2.55))))\n"):n.push(e+".setColorFrom("+d[u][0]+", "+d[u][d[u].length-1]+", 0x"+s+r+c+")");return n.join("\n")+"\n"},Blockly.Blocks.rgb_multi_set_show_lock={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_SHOW_LOCK,args0:[{type:"field_dropdown",name:"NAME",options:this.getAll},{type:"field_dropdown",name:"LOCK",options:[["true","True"],["false","False"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set show lock"]}},attrs:{keyword:["rgbled","rgb","led"]},getAll:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}},Blockly.Python.rgb_multi_set_show_lock=function(t){var e=t.getFieldValue("NAME"),n=t.getFieldValue("LOCK")||"True";return e?`${e}.setShowLock(${n})\n`:""},Blockly.Blocks.rgb_multi_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RGB_MULTI_SHOW,args0:[{type:"field_dropdown",name:"NAME",options:this.getAll}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.PINS_HUE,tool:["Show RGB LED"]}},attrs:{keyword:["rgbled","rgb","led"]},getAll:function(){for(var t=[],e=0;e<Blockly.Units.length;e++)"neopixel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}},Blockly.Python.rgb_multi_show=function(t){var e=t.getFieldValue("NAME");return e?e+".show()\n":""}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"pir"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.pir_read={init:function(){this.jsonInit(this._pirread())},_pirread:function(){return{message0:Blockly.Msg.PIR_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.SERVO_HUE,tool:["Get pir status","return: 0 or 1"]}},attrs:{keyword:["pir"]}},Blockly.Python.pir_read=function(t){return[t.getFieldValue("VARNAME")+".state",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"relay"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.set_relay_on={init:function(){this.jsonInit(this._rgbmulyisetcolor())},_rgbmulyisetcolor:function(){return{message0:Blockly.Msg.RELAY_SET_ON,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SERVO_HUE,tool:["Select com connect on"]}},attrs:{keyword:["relay"]}},Blockly.Python.set_relay_on=function(t){return t.getFieldValue("VARNAME")+".on()\n"},Blockly.Blocks.set_relay_off={init:function(){this.jsonInit(this._rgbmulyisetcolor())},_rgbmulyisetcolor:function(){return{message0:Blockly.Msg.RELAY_SET_OFF,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SERVO_HUE,tool:["Select com connect off"]}},attrs:{keyword:["relay"]}},Blockly.Python.set_relay_off=function(t){return t.getFieldValue("VARNAME")+".off()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"rfid"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.rfid_readStr={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.RFID_READSTR,output:null,args0:[{type:"field_dropdown",name:"RFID",options:n},{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TIMER_HUE,tool:["Read string from card","return: string"]}},attrs:{keyword:["rfid"]}},Blockly.Python.rfid_readStr=function(t){return[(t.getFieldValue("RFID")||"")+`.readBlockStr(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.write_block={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.RFID_WRITE,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"field_dropdown",name:"RFID",options:n},{type:"input_value",name:"VALUE"},{type:"input_value",name:"VALUE1"}],colour:Blockly.Msg.TIMER_HUE,tool:["Write string to card","block: must (block + 1) % 4 != 0","string: int, float, will convert to string"]}},attrs:{keyword:["rfid"]}},Blockly.Python.write_block=function(t){var e=t.getFieldValue("RFID")||"",n=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return e+`.writeBlock(${Blockly.Python.valueToCode(t,"VALUE1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"},${n})\n`},Blockly.Blocks.rfid_cardOn={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.RFID_CARDON,output:null,args0:[{type:"field_dropdown",name:"RFID",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get card near","return: if card near return True, else return False"]}},attrs:{keyword:["rfid"]}},Blockly.Python.rfid_cardOn=function(t){return[(t.getFieldValue("RFID")||"")+".isCardOn()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.rfid_uid={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.RFID_UID,output:null,args0:[{type:"field_dropdown",name:"RFID",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get card uid",'return: string, like "73f66c1bf2"']}},attrs:{keyword:["rfid"]}},Blockly.Python.rfid_uid=function(t){return[(t.getFieldValue("RFID")||"")+".readUid()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"rgb"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.rgb_unit_set_color={init:function(){this.jsonInit(this._rgbmulyisetcolor())},_rgbmulyisetcolor:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"INDEX"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set singer rgb brightness","index: 0 ~ number"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_unit_set_color=function(t){return t.getFieldValue("VARNAME")+".setColor("+(Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"10")+", "+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_unit_set_color_from={init:function(){this.jsonInit(this._rgbmultisetcolorfrom())},_rgbmultisetcolorfrom:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR_FROM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"FROM"},{type:"input_value",name:"TO"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set multi rgb color","input-1: 1 ~ rgb number","input-2: input-1 ~ rgb number"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_unit_set_color_from=function(t){return t.getFieldValue("VARNAME")+".setColorFrom("+(Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+", "+(Blockly.Python.valueToCode(t,"TO",Blockly.Python.ORDER_FUNCTION_CALL)||"3")+", "+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_unit_set_color_all={init:function(){this.jsonInit(this._rgbmulyisetcolorall())},_rgbmulyisetcolorall:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_COLOR_ALL,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set all rgb color"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_unit_set_color_all=function(t){return t.getFieldValue("VARNAME")+".setColorAll("+t.getFieldValue("COLOR").replace("#","0x")+")\n"},Blockly.Blocks.rgb_unit_set_brightness={init:function(){this.jsonInit(this._rgbmulyisetbrightness())},_rgbmulyisetbrightness:function(){return{message0:Blockly.Msg.RGB_MULTI_SET_BRIGHTNESS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"BRIGHTNESS"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PINS_HUE,tool:["Set rgb brightness","brightness: 0 ~ 100"]}},attrs:{keyword:["rgb"]}},Blockly.Python.rgb_unit_set_brightness=function(t){return t.getFieldValue("VARNAME")+".setBrightness("+(Blockly.Python.valueToCode(t,"BRIGHTNESS",Blockly.Python.ORDER_FUNCTION_CALL)||"100")+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"tof"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_tof_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.TOF_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"TOF",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Get distance","return: 30 ~ 2000(mm), other is invalid"]}},attrs:{keyword:["tof"]}},Blockly.Python.unit_tof_state=function(t){return[(t.getFieldValue("TOF")||"")+".distance",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"track"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.m5track_get_analog={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5TRACK_GET_ANALOG,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"ANALOG",options:[["1","1"],["2","2"],["3","3"],["4","4"]]}],inputsInline:!0,output:null,colour:185,tool:["Get tracker analog read value","return: 0 ~ 1023"]}},attrs:{keyword:["track","trace"]}},Blockly.Python.m5track_get_analog=function(t){return[`${t.getFieldValue("VARNAME")}.getAnalogValue(${t.getFieldValue("ANALOG")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.m5track_get_digital={init:function(){this.jsonInit(this._speakerSing())},_speakerSing:function(){return{message0:Blockly.Msg.M5TRACK_GET_DIGITAL,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"DIGITAL",options:[["1","1"],["2","2"],["3","3"],["4","4"]]}],inputsInline:!0,output:null,colour:185,tool:["Get tracker digital read value","return: 0 or 1"]}},attrs:{keyword:["track","trace"]}},Blockly.Python.m5track_get_digital=function(t){var e=t.getFieldValue("DIGITAL");return[`${t.getFieldValue("VARNAME")}.getDigitalValue(${e})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.m5track_set_analog={init:function(){this.jsonInit(this._m5balamove())},_m5balamove:function(){return{message0:Blockly.Msg.M5TRACK_SET_ANALOG,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"DIGITAL",options:[["1","1"],["2","2"],["3","3"],["4","4"]]},{type:"input_value",name:"NUM1"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:185,tool:["Set tracker analog to digital limit value","limit value: 0 ~ 1023"]}},attrs:{keyword:["track","trace"]}},Blockly.Python.m5track_set_analog=function(t){return`${t.getFieldValue("VARNAME")}.setAnalogValue(${t.getFieldValue("DIGITAL")},${Blockly.Python.valueToCode(t,"NUM1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"weigh"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.weigh_zero={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.WEIGH_ZERO,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.DAC_HUE,tool:["Set now wight as zero value"]}},attrs:{keyword:["weigh"]}},Blockly.Python.weigh_zero=function(t){return t.getFieldValue("VARNAME")+".zero()\n"},Blockly.Blocks.weigh_get_weight={init:function(){this.jsonInit(this._weighgetweight())},_weighgetweight:function(){return{message0:Blockly.Msg.WEIGH_GET_WEIGHT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.DAC_HUE,tool:["Get weight"]}},attrs:{keyword:["weigh"]}},Blockly.Python.weigh_get_weight=function(t){return[t.getFieldValue("VARNAME")+".weight",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.weigh_get_rawData={init:function(){this.jsonInit(this._weighgetweight())},_weighgetweight:function(){return{message0:Blockly.Msg.WEIGH_GET_RAWDATA,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.DAC_HUE,tool:["Get weight unit raw data","return: 0 ~ 16777216 (24bit)"]}},attrs:{keyword:["weigh"]}},Blockly.Python.weigh_get_rawData=function(t){return[t.getFieldValue("VARNAME")+".rawData",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"color"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.color_getD={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.COLOR_GETD,output:null,args0:[{type:"field_dropdown",name:"COLOR",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get raw Data","return: tuple, (clear, red, green, blue)"]}},attrs:{keyword:["color"]}},Blockly.Python.color_getD=function(t){return[(t.getFieldValue("COLOR")||"")+".rawData",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.color_getR={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.COLOR_GETR,output:null,args0:[{type:"field_dropdown",name:"COLOR",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get red value","return: 0~255"]}},attrs:{keyword:["color"]}},Blockly.Python.color_getR=function(t){return[(t.getFieldValue("COLOR")||"")+".red",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.color_getG={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.COLOR_GETG,output:null,args0:[{type:"field_dropdown",name:"COLOR",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get green value","return: 0~255"]}},attrs:{keyword:["color"]}},Blockly.Python.color_getG=function(t){return[(t.getFieldValue("COLOR")||"")+".green",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.color_getB={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.COLOR_GETB,output:null,args0:[{type:"field_dropdown",name:"COLOR",options:n}],colour:Blockly.Msg.TIMER_HUE,tool:["Get blue value","return: 0~255"]}},attrs:{keyword:["color"]}},Blockly.Python.color_getB=function(t){return[(t.getFieldValue("COLOR")||"")+".blue",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"pbhub"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.pbhub_digital_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PBHUB_DIGITAL_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalWriteNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"field_dropdown",name:"digitalWritePos",options:[["0","0"],["1","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["num: 0 ~ 5","pos: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_digital_read=function(t){return[t.getFieldValue("VARNAME")+".digitalRead("+(t.getFieldValue("digitalWriteNum")||"0")+", "+(t.getFieldValue("digitalWritePos")||"0")+")",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pbhub_digital_write={init:function(){this.jsonInit(this._pinnsDihitalRead())},_pinnsDihitalRead:function(){return{message0:Blockly.Msg.PBHUB_DIGITAL_WRITE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalReadNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"field_dropdown",name:"digitalReadPos",options:[["0","0"],["1","1"]]},{type:"input_value",name:"val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["Write pin value","Note: pin in INOUT mode, Pull up","Pin: 0 ~ 36","value: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_digital_write=function(t){return t.getFieldValue("VARNAME")+".digitalWrite("+(t.getFieldValue("digitalReadNum")||"0")+", "+(t.getFieldValue("digitalReadPos")||"0")+", "+(Blockly.Python.valueToCode(t,"val",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.pbhub_analogRead={init:function(){this.jsonInit(this._nxttext())},_nxttext:function(){return{message0:Blockly.Msg.PBHUB_ANALOGREAD,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"}],inputsInline:!0,output:null,colour:Blockly.Msg.PBHUB_HUE,tool:["num:0~5"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_analogRead=function(t){return[`${t.getFieldValue("VARNAME")}.analogRead(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.pbhub_setRgbNum={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PBHUB_SETRGBNUM,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalReadNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"input_value",name:"val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["num: 0 ~ 5","pos: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_setRgbNum=function(t){return t.getFieldValue("VARNAME")+".setRgbNum("+(t.getFieldValue("digitalReadNum")||"0")+", "+(Blockly.Python.valueToCode(t,"val",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.pbhub_setColorPos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PBHUB_SETCOLORPOS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalWriteNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"field_dropdown",name:"digitalWritePos",options:[["0","0"],["1","1"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["num: 0 ~ 5","pos: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_setColorPos=function(t){return t.getFieldValue("VARNAME")+".setColorPos("+(t.getFieldValue("digitalWriteNum")||"0")+", "+(t.getFieldValue("digitalWritePos")||"0")+", "+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.pbhub_setColor={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PBHUB_SETCOLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalWriteNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"input_value",name:"begin"},{type:"input_value",name:"count"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["num: 0 ~ 5","pos: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_setColor=function(t){return t.getFieldValue("VARNAME")+".setColor("+(t.getFieldValue("digitalWriteNum")||"0")+", "+(Blockly.Python.valueToCode(t,"begin",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+", "+(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")+")\n"},Blockly.Blocks.pbhub_setBrightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PBHUB_SETBRIGHTNESS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"digitalWriteNum",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]},{type:"input_value",name:"val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PBHUB_HUE,tool:["num: 0 ~ 5","pos: 0 or 1"]}},attrs:{keyword:["pbhub"]}},Blockly.Python.pbhub_setBrightness=function(t){return t.getFieldValue("VARNAME")+".setBrightness("+(t.getFieldValue("digitalWriteNum")||"0")+", "+(Blockly.Python.valueToCode(t,"val",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"pahub"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}var o=[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]];Blockly.Blocks.pahub_select={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PAHUB_SELECT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"pahub",options:n},{type:"field_dropdown",name:"pos",options:o},{type:"field_dropdown",name:"res",options:[["open","1"],["close","0"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PAHUB_HUE,tool:["Note: Set single pos open or close","Pos: 0~5","State: 0~1"]}},attrs:{keyword:["pahub"]}},Blockly.Python.pahub_select=function(t){return(t.getFieldValue("pahub")||"pahub0")+".select("+(t.getFieldValue("pos")||"0")+", "+(t.getFieldValue("res")||"1")+")\n"},Blockly.Blocks.pahub_only_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PAHUB_ONLY_ON,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"pahub",options:n},{type:"field_dropdown",name:"pos",options:o}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PAHUB_HUE,tool:["Note: Set single pos open and close other","Pos: 0~5"]}},attrs:{keyword:["pahub"]}},Blockly.Python.pahub_only_on=function(t){return(t.getFieldValue("pahub")||"pahub0")+".select_only_on("+(t.getFieldValue("pos")||"0")+")\n"},Blockly.Blocks.pahub_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.PAHUB_PORT,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"pahub",options:n},{type:"field_input",name:"res",text:"0x00"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.PAHUB_HUE,tool:["Set port state","Value: 0x00 ~ 0x3f"]}},attrs:{keyword:["pahub"]}},Blockly.Python.pahub_port=function(t){return(t.getFieldValue("pahub")||"pahub0")+".select_port("+(t.getFieldValue("res")||"0x00")+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ncir"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_ncir_read={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.NCIR_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"IR",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Get ncir read temperature","return: -70\xb0C ~ 382.2\xb0C"]}},attrs:{keyword:["ncir"]}},Blockly.Python.unit_ncir_read=function(t){return[(t.getFieldValue("IR")||"")+".temperature",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"thermal"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_thermal_get_max_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_MAX_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_max_temperature=function(t){return[(t.getFieldValue("thermal")||"")+".get_max_temperature()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_get_min_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_MIN_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_min_temperature=function(t){return[(t.getFieldValue("thermal")||"")+".get_min_temperature()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_get_center_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_CENTER_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_center_temperature=function(t){return[(t.getFieldValue("thermal")||"")+".get_center_temperature()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_get_pixel_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_PIXEL_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n},{type:"input_value",name:"x"},{type:"input_value",name:"y"}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_pixel_temperature=function(t){return[(t.getFieldValue("thermal")||"")+`.get_pixel_temperature(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} , ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_temperature=function(t){return[(t.getFieldValue("thermal")||"")+".get_temperature()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_get_refresh_rate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_GET_REFRESH_RATE,args0:[{type:"field_dropdown",name:"thermal",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_get_refresh_rate=function(t){return[(t.getFieldValue("thermal")||"")+".get_refresh_rate()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_thermal_update_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_UPDATE_TEMPERATURE,args0:[{type:"field_dropdown",name:"thermal",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_update_temperature=function(t){return(t.getFieldValue("thermal")||"")+".update_temperature()\n"},Blockly.Blocks.unit_thermal_set_refresh_rate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_THERMAL_SET_REFRESH_RATE,args0:[{type:"field_dropdown",name:"thermal",options:n},{type:"field_dropdown",name:"rate",options:[["0.5Hz","0b000"],["1Hz","0b001"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.unit_thermal_set_refresh_rate=function(t){return(t.getFieldValue("thermal")||"")+`.set_refresh_rate(${t.getFieldValue("rate")||""})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"gps"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_gps_get_state={init:function(){this.jsonInit(this._unit_gps_get_state())},_unit_gps_get_state:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_STATE,args0:[{type:"field_dropdown",name:"gps",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS time"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_state=function(t){return[(t.getFieldValue("gps")||"")+".gps_time",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_get_latitude={init:function(){this.jsonInit(this._unit_gps_get_latitude())},_unit_gps_get_latitude:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_LATITUDE,args0:[{type:"field_dropdown",name:"latitude",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS latitude"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_latitude=function(t){return[(t.getFieldValue("latitude")||"")+".latitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_get_longitude={init:function(){this.jsonInit(this._unit_gps_get_longitude())},_unit_gps_get_longitude:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_LONGITUDE,args0:[{type:"field_dropdown",name:"longitude",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return GPS longitude"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_longitude=function(t){return[(t.getFieldValue("longitude")||"")+".longitude",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_get_satellite_num={init:function(){this.jsonInit(this._unit_gps_get_satellite_num())},_unit_gps_get_satellite_num:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_SATELLITE_NUM,args0:[{type:"field_dropdown",name:"satellite",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return satellite num"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_satellite_num=function(t){return[(t.getFieldValue("satellite")||"")+".satellite_num",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_get_positioning_quality={init:function(){this.jsonInit(this._unit_gps_get_positioning_quality())},_unit_gps_get_positioning_quality:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_POSITIONING_QUALITY,args0:[{type:"field_dropdown",name:"positioning",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Return positioning quality"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_positioning_quality=function(t){return[(t.getFieldValue("positioning")||"")+".pos_quality",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_set_time_zone={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_GPS_SET_TIME_ZONE,args0:[{type:"field_dropdown",name:"gps",options:n},{type:"input_value",name:"ZONE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:["Time zone must be between -11 and 11"]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_set_time_zone=function(t){return`${t.getFieldValue("gps")||""}.set_time_zone(${Blockly.Python.valueToCode(t,"ZONE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_gps_get_speed={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_SPEED,args0:[{type:"field_dropdown",name:"gps",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_speed=function(t){return[(t.getFieldValue("gps")||"")+".speed",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_gps_get_course={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_GPS_GET_COURSE,args0:[{type:"field_dropdown",name:"gps",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.SPEAKER_HUE,tool:[]}},attrs:{keyword:["gps"]}},Blockly.Python.unit_gps_get_course=function(t){return[(t.getFieldValue("gps")||"")+".course",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"accel"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_accel_get_x_acc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ACCEL_GET_X_ACC,args0:[{type:"field_dropdown",name:"POS",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["accel"]}},Blockly.Python.unit_accel_get_x_acc=function(t){return[t.getFieldValue("POS")+".acceleration[0]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_accel_get_y_acc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ACCEL_GET_Y_ACC,args0:[{type:"field_dropdown",name:"POS",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["accel"]}},Blockly.Python.unit_accel_get_y_acc=function(t){return[t.getFieldValue("POS")+".acceleration[1]",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_accel_get_z_acc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ACCEL_GET_Z_ACC,args0:[{type:"field_dropdown",name:"POS",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["accel"]}},Blockly.Python.unit_accel_get_z_acc=function(t){return[t.getFieldValue("POS")+".acceleration[2]",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"acsocket"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_acsocket_set_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ACSOCKET_SET_VALUE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACSOCKET_HUE,tool:[]}},attrs:{keyword:["acsocket"]}},Blockly.Python.unit_acsocket_set_value=function(t){return(t.getFieldValue("VARNAME")||"")+`.set_value(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"heart"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.heart_get_heartrate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HEART_GET_HEARTRATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["heart"]}},Blockly.Python.heart_get_heartrate=function(t){return[t.getFieldValue("VARNAME")+".getHeartRate()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.heart_get_spo2={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HEART_GET_SPO2,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["heart"]}},Blockly.Python.heart_get_spo2=function(t){return[t.getFieldValue("VARNAME")+".getSpO2()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.heart_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HEART_SET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"VARNAME",options:[["Heart Rate","0x02"],["Heart Rate with SpO2","0x03"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["heart"]}},Blockly.Python.heart_set_mode=function(t){return(t.getFieldValue("NAME")||"")+`.setMode(${t.getFieldValue("VARNAME")||""})\n`};var o=[["0ma","0x00"],["4.4ma","0x01"],["7.6ma","0x02"],["11ma","0x03"],["14.2ma","0x04"],["17.4ma","0x05"],["20.8ma","0x06"],["24ma","0x07"],["27.1ma","0x08"],["30.6ma","0x09"],["33.8ma","0x0A"],["37ma","0x0B"],["40.2ma","0x0C"],["43.6ma","0x0D"],["46.8ma","0x0E"],["50ma","0x0F"]];Blockly.Blocks.heart_set_led_current={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HEART_SET_LED_CURRENT,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"VARNAME1",options:o},{type:"field_dropdown",name:"VARNAME2",options:o}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["heart"]}},Blockly.Python.heart_set_led_current=function(t){return(t.getFieldValue("NAME")||"")+`.setLedCurrent(${t.getFieldValue("VARNAME1")||""}, ${t.getFieldValue("VARNAME2")||""})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"V"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.v_motion_detect_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UNIT_V_HUE}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_motion_detect_init=function(t){var e=t.getFieldValue("NAME")||"";return`motion = ${e}.init(${e}.MOTION)\n`},Blockly.Blocks.v_set_detect_threshold={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_DETECT_THRESHOLD,args0:[{type:"input_value",name:"THRESHOLD"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UNIT_V_HUE,tool:["Set detect threshold","threshold: 0 ~ 100"]}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_set_detect_threshold=function(t){return`motion.setMotionDetectThreshold(${Blockly.Python.valueToCode(t,"THRESHOLD",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_set_detect_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_DETECT_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:[["dynamic","0"],["static","1"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UNIT_V_HUE}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_set_detect_mode=function(t){return`motion.setDetectMode(${t.getFieldValue("VARNAME")||""})\n`},Blockly.Blocks.v_get_rate_difference={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_RATE_DIFFERENCE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_V_HUE}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_get_rate_difference=function(t){return["motion.getRateOfDiff()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_max_difference={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_MAX_DIFFERENCE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_V_HUE}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_get_max_difference=function(t){return["motion.getMaxDiff()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_motion_set_scan_interval={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UNIT_V_HUE)},_init:function(){return{message0:Blockly.Msg.V_SET_SCAN_INTERVAL,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,tool:[]}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_motion_set_scan_interval=function(t){return`motion.setScanInterval(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_motion_get_track_box_number={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UNIT_V_HUE)},_init:function(){return{message0:Blockly.Msg.V_GET_TRACK_BOX_NUMBER,args0:[],inputsInline:!0,output:null}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_motion_get_track_box_number=function(t){return["motion.getBoxNumber()",Blockly.Python.ORDER_CONDITIONAL]};const o=["Number: 1~6","return:","list[0] number of pixels changed","list[1] x","list[2] y","list[3] width","list[4] height"];Blockly.Blocks.v_motion_get_track_box_detail={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UNIT_V_HUE)},_init:function(){return{message0:Blockly.Msg.V_GET_TRACK_BOX_DETAIL,args0:[{type:"input_value",name:"number"}],inputsInline:!0,output:null,tool:o}},attrs:{keyword:["v","motion"]}},Blockly.Python.v_motion_get_track_box_detail=function(t){return[`motion.getBoxDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_target_track_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["v","target"]}},Blockly.Python.v_target_track_init=function(t){var e=t.getFieldValue("NAME")||"";return`target = ${e}.init(${e}.TARGET_TRACK)\n`},Blockly.Blocks.v_set_track_coordinate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_TRACK_COORDINATE,args0:[{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"width"},{type:"input_value",name:"height"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.RGB_HUE,tool:["Set target coordinate","x: 0 ~ 100","y: 0 ~ 100","width: 0 ~ 100","height: 0 ~ 100"]}},attrs:{keyword:["v","target"]}},Blockly.Python.v_set_track_coordinate=function(t){return`target.setTrackAreaCoordinate(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"width",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"height",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_get_target_track_box_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_TARGET_TRACK_BOX_DETAIL,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.RGB_HUE,tool:["return:","list[0] x","list[1] y","list[2] width","list[3] height"]}},attrs:{keyword:["v","target"]}},Blockly.Python.v_get_target_track_box_detail=function(t){return["target.getBoxDetail()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_color_track_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["v","color"]}},Blockly.Python.v_color_track_init=function(t){var e=t.getFieldValue("NAME")||"";return`color_track = ${e}.init(${e}.COLOR_TRACK)\n`},Blockly.Blocks.v_set_track_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_TRACK_COLOR,args0:[{type:"input_value",name:"Lmin"},{type:"input_value",name:"Lmax"},{type:"input_value",name:"Amin"},{type:"input_value",name:"Amax"},{type:"input_value",name:"Bmin"},{type:"input_value",name:"Bmax"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE,tool:["Set track color","L min: 0 ~ 100","L max: 0 ~ 100","A min: -127 ~ 128","A max: -127 ~ 128","B min: -127 ~ 128","B max: -127 ~ 128"]}},attrs:{keyword:["v","color"]}},Blockly.Python.v_set_track_color=function(t){return`color_track.setTrackColorByLAB(${Blockly.Python.valueToCode(t,"Lmin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Lmax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Amin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Amax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Bmin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Bmax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_color_set_scan_interval={init:function(){this.jsonInit(Blockly.Blocks.v_motion_set_scan_interval._init()),this.setColour(Blockly.Msg.EMOJI_HUE)},attrs:{keyword:["v","color"]}},Blockly.Python.v_color_set_scan_interval=function(t){return`color_track.setScanInterval(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_set_merge_threshold={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_MERGE_THRESHOLD,args0:[{type:"input_value",name:"n"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["v","color"]}},Blockly.Python.v_set_merge_threshold=function(t){return`color_track.setBoxMergeThreshold(${Blockly.Python.valueToCode(t,"n",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_set_threshold={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_THRESHOLD,args0:[{type:"input_value",name:"width"},{type:"input_value",name:"height"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["v","color"]}},Blockly.Python.v_set_threshold=function(t){return`color_track.setBoxWidthThreshold(${Blockly.Python.valueToCode(t,"width",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"height",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_color_get_track_box_number={init:function(){this.jsonInit(Blockly.Blocks.v_motion_get_track_box_number._init()),this.setColour(Blockly.Msg.EMOJI_HUE)},attrs:{keyword:["v","color"]}},Blockly.Python.v_color_get_track_box_number=function(t){return["color_track.getBoxNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_color_get_track_box_detail={init:function(){this.jsonInit(Blockly.Blocks.v_motion_get_track_box_detail._init()),this.setColour(Blockly.Msg.EMOJI_HUE)},_init:function(){return{tool:o}},attrs:{keyword:["v","color"]}},Blockly.Python.v_color_get_track_box_detail=function(t){return[`color_track.getBoxDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_face_detect_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UNIT_V_FACE_HUE}},attrs:{keyword:["v","face"]}},Blockly.Python.v_face_detect_init=function(t){var e=t.getFieldValue("NAME")||"";return`face = ${e}.init(${e}.FACE_DETECT)\n`},Blockly.Blocks.v_get_face_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_FACE_NUMBER,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_V_FACE_HUE}},attrs:{keyword:["v","face"]}},Blockly.Python.v_get_face_number=function(t){return["face.getFaceNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_face_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_FACE_DETAIL,args0:[{type:"input_value",name:"number"}],inputsInline:!0,output:null,tool:["Number: 1~6","return:","list[0] face probability","list[1] x","list[2] y","list[3] width","list[4] height"],colour:Blockly.Msg.UNIT_V_FACE_HUE}},attrs:{keyword:["v","face"]}},Blockly.Python.v_get_face_detail=function(t){return[`face.getFaceDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_qr_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["v","qr","code"]}},Blockly.Python.v_qr_init=function(t){var e=t.getFieldValue("NAME")||"";return`qr = ${e}.init(${e}.QR_CODE)\n`},Blockly.Blocks.v_get_qr_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_QR_TEXT,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["v","qr","code"]}},Blockly.Python.v_get_qr_text=function(t){return["qr.getQRtext()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_qr_version={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_QR_VERSION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["v","qr","code"]}},Blockly.Python.v_get_qr_version=function(t){return["qr.getQRversion()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_apriltag_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.DAC_HUE}},attrs:{keyword:["v","apriltag","code"]}},Blockly.Python.v_apriltag_init=function(t){var e=t.getFieldValue("NAME")||"";return`tag = ${e}.init(${e}.APRILTAG)\n`},Blockly.Blocks.v_get_apriltag_rotation={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_APRILTAG_ROTATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DAC_HUE,tool:["return:","list[0] overall rotation angle","list[1] X-axis rotation angle","list[2] Y-axis rotation angle","list[3] Z-axis rotation angle"]}},attrs:{keyword:["v","apriltag","code"]}},Blockly.Python.v_get_apriltag_rotation=function(t){return["tag.getAprilTagcodeRotation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_apriltag_location={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_APRILTAG_LOCATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DAC_HUE,tool:["return:","list[0] x","list[1] y","list[2] width","list[3] height","list[4] center x","list[5] center y"]}},attrs:{keyword:["v","apriltag","code"]}},Blockly.Python.v_get_apriltag_location=function(t){return["tag.getAprilTagcodeLocation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_apriltag_Translation={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_APRILTAG_TRANSLATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.DAC_HUE,tool:["return:","list[0] x_translation","list[1] y_translation","list[2] z_translation"]}},attrs:{keyword:["v","apriltag","code"]}},Blockly.Python.v_get_apriltag_Translation=function(t){return["tag.getAprilTagcodeTranslation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_bar_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["v","bar","code"]}},Blockly.Python.v_bar_init=function(t){var e=t.getFieldValue("NAME")||"";return`bar = ${e}.init(${e}.BARCODE)\n`},Blockly.Blocks.v_get_bar_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_BAR_TEXT,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["v","bar","code"]}},Blockly.Python.v_get_bar_text=function(t){return["bar.getBARcodeText()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_bar_rotation={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_BAR_ROTATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["v","bar","code"]}},Blockly.Python.v_get_bar_rotation=function(t){return["bar.getBARcodeRotation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_bar_type={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_BAR_TYPE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["v","bar","code"]}},Blockly.Python.v_get_bar_type=function(t){return["bar.getBARcodeType()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_bar_location={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_BAR_LOCATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE,tool:["return:","list[0] x","list[1] y","list[2] width","list[3] height"]}},attrs:{keyword:["v","bar","code"]}},Blockly.Python.v_get_bar_location=function(t){return["bar.getBARcodeLocation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_datamatrix_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["v","datamatrix","code"]}},Blockly.Python.v_datamatrix_init=function(t){var e=t.getFieldValue("NAME")||"";return`dm = ${e}.init(${e}.DATAMATRIX)\n`},Blockly.Blocks.v_get_datamatrix_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_DATAMATRIX_TEXT,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["v","datamatrix","code"]}},Blockly.Python.v_get_datamatrix_text=function(t){return["dm.getDMcodeText()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_datamatrix_rotation={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_DATAMATRIX_ROTATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE}},attrs:{keyword:["v","datamatrix","code"]}},Blockly.Python.v_get_datamatrix_rotation=function(t){return["dm.getDMcodeRotation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_datamatrix_location={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_DATAMATRIX_LOCATION,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.PINS_HUE,tool:["return:","list[0] x","list[1] y","list[2] width","list[3] height"]}},attrs:{keyword:["v","datamatrix","code"]}},Blockly.Python.v_get_datamatrix_location=function(t){return["dm.getDMcodeLocation()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_line_tracker_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["v","line","tracker"]}},Blockly.Python.v_line_tracker_init=function(t){var e=t.getFieldValue("NAME")||"";return`line_tracker = ${e}.init(${e}.LINE_TRACKER)\n`},Blockly.Blocks.v_get_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_ANGLE,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.MAP_HUE}},attrs:{keyword:["v","line","tracker"]}},Blockly.Python.v_get_angle=function(t){return["line_tracker.getAngle()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_set_line_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_TRACK_COLOR,args0:[{type:"input_value",name:"Lmin"},{type:"input_value",name:"Lmax"},{type:"input_value",name:"Amin"},{type:"input_value",name:"Amax"},{type:"input_value",name:"Bmin"},{type:"input_value",name:"Bmax"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.MAP_HUE,tool:["Set track color","L min: 0 ~ 100","L max: 0 ~ 100","A min: -127 ~ 128","A max: -127 ~ 128","B min: -127 ~ 128","B max: -127 ~ 128"]}},attrs:{keyword:["v","line","tracker"]}},Blockly.Python.v_set_line_color=function(t){return`line_tracker.setLineColorByLAB(${Blockly.Python.valueToCode(t,"Lmin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Lmax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Amin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Amax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Bmin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Bmax",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_set_line_area_weight={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_SET_LINE_AREA_WEIGHT,args0:[{type:"input_value",name:"weight0"},{type:"input_value",name:"weight1"},{type:"input_value",name:"weight2"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.MAP_HUE,tool:["Value must be 0 ~ 1"]}},attrs:{keyword:["v","line","tracker"]}},Blockly.Python.v_set_line_area_weight=function(t){return`line_tracker.setLineAreaWeight(${Blockly.Python.valueToCode(t,"weight0",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"weight1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"weight2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v_tag_reader_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["v","tag","reader"]}},Blockly.Python.v_tag_reader_init=function(t){var e=t.getFieldValue("NAME")||"";return`tag_reader = ${e}.init(${e}.TAG_READER)\n`},Blockly.Blocks.v_get_total_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_TOTAL_NUMBER,args0:[],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["v","tag","reader"]}},Blockly.Python.v_get_total_number=function(t){return["tag_reader.getTotalNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_binstr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_BINSTR,args0:[{type:"input_value",name:"number"}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["v","tag","reader"]}},Blockly.Python.v_get_binstr=function(t){return[`tag_reader.getBinstr(number=${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_code={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_CODE,args0:[{type:"input_value",name:"number"}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["v","tag","reader"]}},Blockly.Python.v_get_code=function(t){return[`tag_reader.getCode(number=${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v_get_tag_location={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V_GET_TAG_LOCATION,args0:[{type:"input_value",name:"number"}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["v","tag","reader"]}},Blockly.Python.v_get_tag_location=function(t){return[`tag_reader.getTagLocation(number=${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)if("unit_imu"===Blockly.Units[e].type){let n=Blockly.Units[e].name.replace(/^.*_/g,"");t.push([n,n])}return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_imu_get_acc_x={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_ACC_X,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_acc_x=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.acceleration[0]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_imu_get_acc_y={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_ACC_Y,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_acc_y=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.acceleration[1]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_imu_get_acc_z={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_ACC_Z,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_acc_z=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.acceleration[2]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_imu_get_gyr_x={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_GYR_X,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_gyr_x=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.gyro[0]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_imu_get_gyr_y={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_GYR_Y,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_gyr_y=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.gyro[1]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_imu_get_gyr_z={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_IMU_GET_GYR_Z,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_IMU_HUE}},attrs:{keyword:["imu"]}},Blockly.Python.unit_imu_get_gyr_z=function(t){return[`unit_${t.getFieldValue("VARNAME")||""}.gyro[2]`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"bps"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.bps_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BPS_GET_TEMPERATURE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_BPS_HUE}},attrs:{keyword:["bps"]}},Blockly.Python.bps_get_temperature=function(t){return[(t.getFieldValue("VARNAME")||"")+".temperature()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.bps_get_pressure={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.BPS_GET_PRESSURE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_BPS_HUE}},attrs:{keyword:["bps"]}},Blockly.Python.bps_get_pressure=function(t){return[(t.getFieldValue("VARNAME")||"")+".pressure()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"tvoc"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.tvoc_set_iaq_baseline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_SET_IAQ_BASELINE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"eco2"},{type:"input_value",name:"tvoc"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_set_iaq_baseline=function(t){return`${t.getFieldValue("NAME")||""}.set_iaq_baseline(${Blockly.Python.valueToCode(t,"eco2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"tvoc",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.tvoc_get_iaq_baseline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_IAQ_BASELINE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_iaq_baseline=function(t){return[(t.getFieldValue("NAME")||"")+".get_iaq_baseline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_get_tvoc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_TVOC,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_tvoc=function(t){return[(t.getFieldValue("NAME")||"")+".TVOC",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_baseline_tvoc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_BASELINE_TVOC,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_baseline_tvoc=function(t){return[(t.getFieldValue("NAME")||"")+".baseline_TVOC",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_get_eco2={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_ECO2,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_eco2=function(t){return[(t.getFieldValue("NAME")||"")+".eCO2",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_get_baseline_eco2={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_BASELINE_ECO2,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_baseline_eco2=function(t){return[(t.getFieldValue("NAME")||"")+".baseline_eCO2",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_get_h2={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_H2,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_h2=function(t){return[(t.getFieldValue("NAME")||"")+".H2",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.tvoc_get_ethanol={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TVOC_GET_ETHANOL,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["tvoc"]}},Blockly.Python.tvoc_get_ethanol=function(t){return[(t.getFieldValue("NAME")||"")+".Ethanol",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"VMeter"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.vmeter_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"mode",options:[["continuous","CONTINUOUS"],["singleshot","SINGLESHOT"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["vmeter"]}},Blockly.Python.vmeter_set_mode=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setMode(${e}.MODE_${t.getFieldValue("mode")})\n`},Blockly.Blocks.vmeter_set_rate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_RATE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"rate",options:[["8","8"],["16","16"],["32","32"],["64","64"],["128","128"],["250","250"],["475","475"],["860","860"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["vmeter"]}},Blockly.Python.vmeter_set_rate=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setRate(${e}.RATE_${t.getFieldValue("rate")})\n`},Blockly.Blocks.vmeter_set_gain={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_GAIN,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"GAIN",options:[["6144","6144"],["4096","4096"],["2048","2048"],["1024","1024"],["512","512"],["256","256"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["vmeter"]}},Blockly.Python.vmeter_set_gain=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setGain(${e}.PGA_${t.getFieldValue("GAIN")})\n`},Blockly.Blocks.vmeter_voltage={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_VOLTAGE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["vmeter"]}},Blockly.Python.vmeter_voltage=function(t){return[(t.getFieldValue("NAME")||"")+".voltage()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.vmeter_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_RAW,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.EMOJI_HUE}},attrs:{keyword:["vmeter"]}},Blockly.Python.vmeter_raw=function(t){return[(t.getFieldValue("NAME")||"")+".raw()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"AMeter"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.ameter_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"mode",options:[["continuous","CONTINUOUS"],["singleshot","SINGLESHOT"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["ameter"]}},Blockly.Python.ameter_set_mode=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setMode(${e}.MODE_${t.getFieldValue("mode")})\n`},Blockly.Blocks.ameter_set_rate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_RATE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"rate",options:[["8","8"],["16","16"],["32","32"],["64","64"],["128","128"],["250","250"],["475","475"],["860","860"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["ameter"]}},Blockly.Python.ameter_set_rate=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setRate(${e}.RATE_${t.getFieldValue("rate")})\n`},Blockly.Blocks.ameter_set_gain={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_SET_GAIN,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"GAIN",options:[["6144","6144"],["4096","4096"],["2048","2048"],["1024","1024"],["512","512"],["256","256"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["ameter"]}},Blockly.Python.ameter_set_gain=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.setGain(${e}.PGA_${t.getFieldValue("GAIN")})\n`},Blockly.Blocks.ameter_current={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AMETER_CURRENT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["ameter"]}},Blockly.Python.ameter_current=function(t){return[(t.getFieldValue("NAME")||"")+".current()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ameter_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.VMETER_RAW,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["ameter"]}},Blockly.Python.ameter_raw=function(t){return[(t.getFieldValue("NAME")||"")+".raw()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"OP90"!==Blockly.Units[e].type&&"OP180"!==Blockly.Units[e].type||t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.op_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_VALUE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.MATH_HUE}},attrs:{keyword:["op"]}},Blockly.Python.op_value=function(t){return[(t.getFieldValue("NAME")||"")+".value()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"hall"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hall_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_VALUE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.LOGIC_HUE}},attrs:{keyword:["hall"]}},Blockly.Python.hall_value=function(t){return[(t.getFieldValue("NAME")||"")+".value()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"fan"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.fan_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ON_DUTY,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"value"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UART_HUE,tool:["duty: 10 ~ 20"]}},attrs:{keyword:["fan"]}},Blockly.Python.fan_on=function(t){return`${t.getFieldValue("NAME")||""}.on(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"10"})\n`},Blockly.Blocks.fan_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_OFF,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["fan"]}},Blockly.Python.fan_off=function(t){return(t.getFieldValue("NAME")||"")+".off()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"vibrator"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.vibrator_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ON_DUTY,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"value"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.SERVO_HUE,tool:["duty: 10 ~ 20"]}},attrs:{keyword:["vibrator"]}},Blockly.Python.vibrator_on=function(t){return`${t.getFieldValue("NAME")||""}.on(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"10"})\n`},Blockly.Blocks.vibrator_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_OFF,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.SERVO_HUE}},attrs:{keyword:["vibrator"]}},Blockly.Python.vibrator_off=function(t){return(t.getFieldValue("NAME")||"")+".off()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"laser_tx"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.lasertx_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_ON,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["laser","lasertx"]}},Blockly.Python.lasertx_on=function(t){return(t.getFieldValue("NAME")||"")+".on()\n"},Blockly.Blocks.lasertx_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_OFF,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.LCD_HUE}},attrs:{keyword:["laser","lasertx"]}},Blockly.Python.lasertx_off=function(t){return(t.getFieldValue("NAME")||"")+".off()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"laser_rx"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.laserrx_get_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_VALUE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["laser","laserrx"]}},Blockly.Python.laserrx_get_value=function(t){return[(t.getFieldValue("NAME")||"")+".value()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"Ultrasonic"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.Ultrasonic_distance={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ULTRASONIC_DISTANCE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.FUNCTION_HUE}},attrs:{keyword:["Ultrasonic"]}},Blockly.Python.Ultrasonic_distance=function(t){return[(t.getFieldValue("NAME")||"")+".distance",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"Watering"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.watering_get_adc_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WATERING_GET_ADC_VALUE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["watering"]}},Blockly.Python.watering_get_adc_value=function(t){return[(t.getFieldValue("NAME")||"")+".get_adc_value()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.watering_set_pump_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WATERING_SET_PUMP_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"status"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:["status: ","0 : close ","1 : open"]}},attrs:{keyword:["watering"]}},Blockly.Python.watering_set_pump_status=function(t){return`${t.getFieldValue("NAME")||""}.set_pump_status(${Blockly.Python.valueToCode(t,"status",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.watering_set_pump_status_dropdown={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.WATERING_SET_PUMP_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"status",options:[["OFF","0"],["ON","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["watering"]}},Blockly.Python.watering_set_pump_status_dropdown=function(t){return`${t.getFieldValue("NAME")||""}.set_pump_status(${t.getFieldValue("status")||""})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"relay4"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.relay4_get_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_GET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_get_mode=function(t){return[(t.getFieldValue("NAME")||"")+".get_mode()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.relay4_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_SET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"MODE",options:[["Synchronize","1"],["Asynchronous","0"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_set_mode=function(t){return`${t.getFieldValue("NAME")||""}.set_mode(${t.getFieldValue("MODE")||""})\n`},Blockly.Blocks.relay4_get_led_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_GET_LED_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"num"}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_get_led_status=function(t){return[`${t.getFieldValue("NAME")||""}.get_led_status(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_NONE)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.relay4_set_led_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_SET_LED_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"num"},{type:"input_value",name:"state"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_set_led_status=function(t){return`${t.getFieldValue("NAME")||""}.set_led_status(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_NONE)||"1"}, ${Blockly.Python.valueToCode(t,"state",Blockly.Python.ORDER_NONE)||"1"})\n`},Blockly.Blocks.relay4_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_GET_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"num"}],inputsInline:!0,output:null,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_get_status=function(t){return[`${t.getFieldValue("NAME")||""}.get_relay_status(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_NONE)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.relay4_set_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.RELAY4_SET_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"num"},{type:"input_value",name:"state"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE}},attrs:{keyword:["relay4"]}},Blockly.Python.relay4_set_status=function(t){return`${t.getFieldValue("NAME")||""}.set_relay_status(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_NONE)||"1"}, ${Blockly.Python.valueToCode(t,"state",Blockly.Python.ORDER_NONE)||"1"})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"dds"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}var o=function(){return[["SINE","SINE"],["TRIANGLE","TRIANGLE"],["SQUARE","SQUARE"],["SAWTOOTH","SAWTOOTH"],["DC","DC"]]};Blockly.Blocks.dds_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DDS_SET_MODE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"mode",options:o}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE}},attrs:{keyword:["dds"]}},Blockly.Python.dds_set_mode=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.set_mode(${e}.${t.getFieldValue("mode")||"SINE"})\n`},Blockly.Blocks.dds_quick_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DDS_QUICK_OUTPUT,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"mode",options:o},{type:"input_value",name:"freq"},{type:"input_value",name:"phase"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE}},attrs:{keyword:["dds"]}},Blockly.Python.dds_quick_output=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.quick_output(${e}.${t.getFieldValue("mode")||"SINE"}, ${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"phase",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.dds_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DDS_OUTPUT,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"freqnum"},{type:"input_value",name:"phasenum"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE}},attrs:{keyword:["dds"]}},Blockly.Python.dds_output=function(t){return`${t.getFieldValue("NAME")||""}.output(${Blockly.Python.valueToCode(t,"freqnum",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"phasenum",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.dds_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DDS_RESET,args0:[{type:"field_dropdown",name:"NAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE}},attrs:{keyword:["dds"]}},Blockly.Python.dds_reset=function(t){return(t.getFieldValue("NAME")||"")+".reset()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"uhf_rfid"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.uhf_rfid_hardware_version={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_HARDWARE_VERSION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return hardware version string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_hardware_version=function(t){return[(t.getFieldValue("NAME")||"")+".hardware_version()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_software_version={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SOFTWARE_VERSION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return software version string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_software_version=function(t){return[(t.getFieldValue("NAME")||"")+".software_version()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_manufacturer={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_MANUFACTURER,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return manufacturer name string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_manufacturer=function(t){return[(t.getFieldValue("NAME")||"")+".manufacturer()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_single_polling={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SINGLE_POLLING,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return [(RSSI, PC, EPC_ID), ...]","RSSI: int","PC: HEX format string","EPC_ID: HEX format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_single_polling=function(t){return[(t.getFieldValue("NAME")||"")+".single_polling()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_multiple_polling_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_MULTIPLE_POLLING_START,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"counts"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["param:","counts  0 ~ 65535"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_multiple_polling_start=function(t){return`${t.getFieldValue("NAME")||""}.multiple_polling_start(${Blockly.Python.valueToCode(t,"counts",Blockly.Python.ORDER_NONE)||0})\n`},Blockly.Blocks.uhf_rfid_multiple_polling_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_MULTIPLE_POLLING_READ,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return [(RSSI, PC, EPC_ID), ...]","RSSI: int","PC: HEX format string","EPC_ID: HEX format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_multiple_polling_read=function(t){return[(t.getFieldValue("NAME")||"")+".multiple_polling_read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_multiple_polling_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_MULTIPLE_POLLING_STOP,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_multiple_polling_stop=function(t){return(t.getFieldValue("NAME")||"")+".multiple_polling_stop()\n"},Blockly.Blocks.uhf_rfid_select_tag_param={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SELECT_TAG_PARAM,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"target_bit",options:[["0b000 Inventoried (S0)","0b000"],["0b001 Inventoried (S1)","0b001"],["0b010 Inventoried (S2)","0b010"],["0b011 Inventoried (S3)","0b011"],["0b100 SL","0b100"],["0b101 RFU","0b101"],["0b110 RFU","0b110"],["0b111 RFU","0b111"]]},{type:"input_dummy"},{type:"field_dropdown",name:"action_bit",options:[["0b000","0b000"],["0b001","0b001"],["0b010","0b010"],["0b011","0b011"],["0b100","0b100"],["0b101","0b101"],["0b110","0b110"],["0b111","0b111"]]},{type:"input_dummy"},{type:"field_dropdown",name:"membank_bit",options:[["RFU","0b00"],["EPC","0b01"],["TID","0b10"],["User","0b11"]]},{type:"input_dummy"},{type:"input_value",name:"pointer"},{type:"input_value",name:"epc",check:"String"},{type:"field_dropdown",name:"truncate",options:[["Disable truncation","0x00"],["Enable truncation","0x80"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:["Action bit: "],toolImg:"uhf_rfid_action.png"}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_select_tag_param=function(t){return`${t.getFieldValue("NAME")||""}.select_tag_param(${t.getFieldValue("target_bit")||""}, ${t.getFieldValue("action_bit")||""}, ${t.getFieldValue("membank_bit")||""}, ${Blockly.Python.valueToCode(t,"pointer",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"epc",Blockly.Python.ORDER_NONE)||"0"}, ${t.getFieldValue("truncate")||""})\n`},Blockly.Blocks.uhf_rfid_get_select_tag_param={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_GET_SELECT_TAG_PARAM,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return (target, action, membank, pointer, truncate, epc)","target: int","action: int","membank: int","pointer: HEX format string","truncate: int","epc: HEX format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_get_select_tag_param=function(t){return[(t.getFieldValue("NAME")||"")+".get_select_tag_param()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_set_select_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SET_SELECT_MODE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"mode",options:[["0x00","0x00"],["0x01","0x01"],["0x02","0x02"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_set_select_mode=function(t){return`${t.getFieldValue("NAME")||""}.set_select_mode(${t.getFieldValue("mode")||""})\n`},Blockly.Blocks.uhf_rfid_read_memory_bank={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_READ_MEMORY_BANK,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"sa"},{type:"input_value",name:"data_len"},{type:"input_value",name:"mem_bank"},{type:"input_value",name:"access_password"}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return (pc, epc, user_data)","pc: HEX format string","epc: HEX format string","user_data: HEX format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_read_memory_bank=function(t){return[(t.getFieldValue("NAME")||"")+`.read_memory_bank(${Blockly.Python.valueToCode(t,"sa",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"data_len",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"mem_bank",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"access_password",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_write_memory_bank={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_WRITE_MEMORY_BANK,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"data"},{type:"input_value",name:"sa"},{type:"input_value",name:"mem_bank"},{type:"input_value",name:"access_password"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["select_tag_param should use frist.","data: list or hex format string","sa: int","mem_bank: int","access_password: hex format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_write_memory_bank=function(t){return`${t.getFieldValue("NAME")||""}.write_memory_bank(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"sa",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"mem_bank",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"access_password",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.uhf_rfid_inactivated_tag={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_INACTIVATED_TAG,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"kill_password"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["kill_password: list or hex format string"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_inactivated_tag=function(t){return`${t.getFieldValue("NAME")||""}.inactivated_tag(${Blockly.Python.valueToCode(t,"kill_password",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.uhf_rfid_set_region={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SET_REGION,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"region_code",options:[["REGIN_CN_900MHZ","REGIN_CN_900MHZ"],["REGIN_CN_800MHZ","REGIN_CN_800MHZ"],["REGIN_US","REGIN_US"],["REGIN_EU","REGIN_EU"],["REGIN_KR","REGIN_KR"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_set_region=function(t){var e=t.getFieldValue("NAME")||"";return`${e}.set_region(${e}.${t.getFieldValue("region_code")||""})\n`},Blockly.Blocks.uhf_rfid_get_region={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_GET_REGION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return region code","0x01 CN_900MHZ ","0x04 CN_800MHZ ","0x02 US ","0x03 EU ","0x06 KR "]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_get_region=function(t){return[(t.getFieldValue("NAME")||"")+".get_region()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_set_channel_freq={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SET_CHANNEL_FREQ,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"ch_freq"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["ch_freq: int Mhz"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_set_channel_freq=function(t){return`${t.getFieldValue("NAME")||""}.set_channel_freq(${Blockly.Python.valueToCode(t,"ch_freq",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.uhf_rfid_get_channel_freq={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_GET_CHANNEL_FREQ,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return ch_freq in Mhz"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_get_channel_freq=function(t){return[(t.getFieldValue("NAME")||"")+".get_channel_freq()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_enable_automatic_freq_hopping={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_ENABLE_AUTOMATIC_FREQ_HOPPING,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_enable_automatic_freq_hopping=function(t){return(t.getFieldValue("NAME")||"")+".enable_automatic_freq_hopping()\n"},Blockly.Blocks.uhf_rfid_disabel_automatic_freq_hopping={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_DISABEL_AUTOMATIC_FREQ_HOPPING,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_disabel_automatic_freq_hopping=function(t){return(t.getFieldValue("NAME")||"")+".disabel_automatic_freq_hopping()\n"},Blockly.Blocks.uhf_rfid_get_tx_power={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_GET_TX_POWER,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["return int (2000 = 20dBm)"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_get_tx_power=function(t){return[(t.getFieldValue("NAME")||"")+".get_tx_power()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_set_tx_power={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SET_TX_POWER,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"tx_power"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["tx_power: int"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_set_tx_power=function(t){return`${t.getFieldValue("NAME")||""}.set_tx_power(${Blockly.Python.valueToCode(t,"tx_power",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.uhf_rfid_enable_continuous_carrier={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_ENABLE_CONTINUOUS_CARRIER,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_enable_continuous_carrier=function(t){return(t.getFieldValue("NAME")||"")+".enable_continuous_carrier()\n"},Blockly.Blocks.uhf_rfid_disable_continuous_carrier={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_DISABLE_CONTINUOUS_CARRIER,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_disable_continuous_carrier=function(t){return(t.getFieldValue("NAME")||"")+".disable_continuous_carrier()\n"},Blockly.Blocks.uhf_rfid_sleep={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SLEEP,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_sleep=function(t){return(t.getFieldValue("NAME")||"")+".sleep()\n"},Blockly.Blocks.uhf_rfid_wakeup={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_WAKEUP,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_wakeup=function(t){return(t.getFieldValue("NAME")||"")+".wakeup()\n"},Blockly.Blocks.uhf_rfid_write_custom_command={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_WRITE_CUSTOM_COMMAND,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"cmd_list"},{type:"field_dropdown",name:"reply",options:[["True","True"],["False","False"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:["cmd_list: full command list according to the protocol","reply: ","True  read the reply and return","False  won't return the reply"]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_write_custom_command=function(t){return[(t.getFieldValue("NAME")||"")+`.write_customer_command(${Blockly.Python.valueToCode(t,"cmd_list",Blockly.Python.ORDER_NONE)||"0"}, ${t.getFieldValue("reply")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_get_device_info={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_GET_DEVICE_INFO,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"op",options:[["Hardware","0x00"],["Software","0x01"],["Manufactures","0x02"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_get_device_info=function(t){return[(t.getFieldValue("NAME")||"")+`.get_device_info(${t.getFieldValue("op")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_multi_reading_count={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:Blockly.Msg.UHF_RFID_MULTI_READING_COUNT,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"count"}],output:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_multi_reading_count=function(t){var e=t.getFieldValue("NAME")||"",n=Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_NONE)||"0";return[e+`.multiple_polling_read(uhf_rfid_${this.cbId}cb, ${n})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_CALLBACK,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"value",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},mutationToDom:Blockly.Blocks.uhf_rfid_multi_reading_count.mutationToDom,domToMutation:Blockly.Blocks.uhf_rfid_multi_reading_count.domToMutation,attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_callback=function(t){var e=t.getFieldValue("id")||"";let n=`def uhf_rfid_${o.getCbIdByEventId(e,"uhf_rfid_multi_reading_count")}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"_"} = value\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n},Blockly.Blocks.uhf_rfid_set_select_tag={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_SET_SELECT_TAG,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_dummy"},{type:"input_value",name:"epc",align:"RIGHT"}],output:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_set_select_tag=function(t){return[(t.getFieldValue("NAME")||"")+`.select_tag_param(${Blockly.Python.valueToCode(t,"epc",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_read_memory={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_READ_MEMORY,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_dummy"},{type:"input_value",name:"address",align:"RIGHT"},{type:"input_value",name:"length",align:"RIGHT"},{type:"input_value",name:"password",align:"RIGHT"},{type:"field_dropdown",name:"bank",options:[["RFU","0x00"],["EPC","0x01"],["TID","0x02"],["USER","0x03"]],align:"RIGHT"}],output:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_read_memory=function(t){var e=t.getFieldValue("NAME")||"",n=Blockly.Python.valueToCode(t,"address",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"length",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"password",Blockly.Python.ORDER_NONE)||"0";return[e+`.read_memory_bank(${n}, ${o}, ${t.getFieldValue("bank")||""}, ${l})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_write_memory={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_WRITE_MEMORY,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_dummy"},{type:"input_value",name:"data",align:"RIGHT"},{type:"input_value",name:"address",align:"RIGHT"},{type:"input_value",name:"password",align:"RIGHT"},{type:"field_dropdown",name:"bank",options:[["RFU","0x00"],["EPC","0x01"],["TID","0x02"],["USER","0x03"]],align:"RIGHT"}],output:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_write_memory=function(t){var e=t.getFieldValue("NAME")||"",n=Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"address",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"password",Blockly.Python.ORDER_NONE)||"0";return[`${e}.write_memory_bank(${n}, ${o}, ${t.getFieldValue("bank")||""}, ${l})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.uhf_rfid_automatic_freq_hopping={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_AUTOMATIC_FREQ_HOPPING,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"mode",options:[["enable","0xFF"],["disable","0x00"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_automatic_freq_hopping=function(t){return`${t.getFieldValue("NAME")||""}.automatic_freq_hopping(${t.getFieldValue("mode")||""})\n`};const i=[["Disable","0"],["Enable","1"]],a=[["Open","0"],["Perma-open","1"],["Lock","2"],["Perma-lock","3"]];Blockly.Blocks.uhf_rfid_lock_data_store={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UHF_RFID_LOCK_DATA_STORE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"kill_en",options:i},{type:"field_dropdown",name:"kill",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"access_en",options:i},{type:"field_dropdown",name:"access",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"epc_en",options:i},{type:"field_dropdown",name:"epc",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"tid_en",options:i},{type:"field_dropdown",name:"tid",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"user_en",options:i},{type:"field_dropdown",name:"user",options:a},{type:"input_dummy"},{type:"input_value",name:"password"}],output:null,inputsInline:!1,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["uhf","rfid"]}},Blockly.Python.uhf_rfid_lock_data_store=function(t){var e=t.getFieldValue("NAME")||"",n=t.getFieldValue("kill_en")||"",o=t.getFieldValue("kill")||"",l=t.getFieldValue("access_en")||"",i=t.getFieldValue("access")||"",a=t.getFieldValue("epc_en")||"",s=t.getFieldValue("epc")||"",r=t.getFieldValue("tid_en")||"",c=t.getFieldValue("tid")||"",u=t.getFieldValue("user_en")||"";return[`${e}.lock_data_store(${o}, ${i}, ${s}, ${c}, ${t.getFieldValue("user")||""}, ${n}, ${l}, ${a}, ${r}, ${u}, ${Blockly.Python.valueToCode(t,"password",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++){let n=Blockly.Units[e].type;"unitcam"!==n&&"timercam"!==n||t.push([Blockly.Units[e].name,Blockly.Units[e].name])}return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_cam_set_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_SHOW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["show","True"],["hide","False"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_show=function(t){return t.getFieldValue("VARNAME")+`.set_show(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_cam_set_position={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_POSITION,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"x"},{type:"input_value",name:"y"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_position=function(t){return t.getFieldValue("VARNAME")+`.set_position(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_cam_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_SIZE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"size",options:[["800*600","SIZE_800_600"],["640*480","SIZE_640_480"],["320*240","SIZE_320_240"],["240*240","SIZE_240_240"],["160*120","SIZE_160_120"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_size=function(t){var e=t.getFieldValue("VARNAME");return e+`.set_image_size(${e}.${t.getFieldValue("size")})\n`},Blockly.Blocks.unit_cam_set_brightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_BRIGHTNESS,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"brightness"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:["brightness:  0 ~ 1024"]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_brightness=function(t){return t.getFieldValue("VARNAME")+`.set_led_brightness(${Blockly.Python.valueToCode(t,"brightness",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_cam_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["UART","UART_MODE"],["CLOUD","CLOUD_MODE"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_mode=function(t){var e=t.getFieldValue("VARNAME");return e+`.set_mode(${e}.${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_cam_set_wifi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_WIFI,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"ssid"},{type:"input_value",name:"pwd"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_wifi=function(t){return t.getFieldValue("VARNAME")+`.set_wifi(${Blockly.Python.valueToCode(t,"ssid",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"pwd",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_cam_set_upload_time={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_UPLOAD_TIME,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"time"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:["upload interval: 5 ~ 65536"]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_set_upload_time=function(t){return t.getFieldValue("VARNAME")+`.set_upload_time(${Blockly.Python.valueToCode(t,"time",Blockly.Python.ORDER_FUNCTION_CALL)||"5"})\n`},Blockly.Blocks.unit_cam_get_token={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_GET_TOKEN,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_get_token=function(t){return[t.getFieldValue("VARNAME")+".get_token()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_cam_get_qrcodeurl={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_GET_QRCODEURL,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_cam_get_qrcodeurl=function(t){return["'camera.m5stack.com/timer-cam/image?tok=' + "+t.getFieldValue("VARNAME")+".get_token()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"timercam"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_timercam_set_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_SHOW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["show","True"],["hide","False"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_show=function(t){return t.getFieldValue("VARNAME")+`.set_show(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_timercam_set_position={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_POSITION,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"x"},{type:"input_value",name:"y"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_position=function(t){return t.getFieldValue("VARNAME")+`.set_position(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_timercam_set_size={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_SIZE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"size",options:[["800*600","SIZE_800_600"],["640*480","SIZE_640_480"],["320*240","SIZE_320_240"],["240*240","SIZE_240_240"],["160*120","SIZE_160_120"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_size=function(t){var e=t.getFieldValue("VARNAME");return e+`.set_image_size(${e}.${t.getFieldValue("size")})\n`},Blockly.Blocks.unit_timercam_set_brightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_BRIGHTNESS,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"brightness"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:["brightness:  0 ~ 1024"]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_brightness=function(t){return t.getFieldValue("VARNAME")+`.set_led_brightness(${Blockly.Python.valueToCode(t,"brightness",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_timercam_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["UART","UART_MODE"],["CLOUD","CLOUD_MODE"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_mode=function(t){var e=t.getFieldValue("VARNAME");return e+`.set_mode(${e}.${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_timercam_set_wifi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_WIFI,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"ssid"},{type:"input_value",name:"pwd"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_wifi=function(t){return t.getFieldValue("VARNAME")+`.set_wifi(${Blockly.Python.valueToCode(t,"ssid",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"pwd",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_timercam_set_upload_time={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_SET_UPLOAD_TIME,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"time"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:["upload interval: 5 ~ 65536"]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_set_upload_time=function(t){return t.getFieldValue("VARNAME")+`.set_upload_time(${Blockly.Python.valueToCode(t,"time",Blockly.Python.ORDER_FUNCTION_CALL)||"5"})\n`},Blockly.Blocks.unit_timercam_get_token={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_GET_TOKEN,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_get_token=function(t){return[t.getFieldValue("VARNAME")+".get_token()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_timercam_get_qrcodeurl={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_CAM_GET_QRCODEURL,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["cam","unitcam"]}},Blockly.Python.unit_timercam_get_qrcodeurl=function(t){return["'camera.m5stack.com/timer-cam/image?tok=' + "+t.getFieldValue("VARNAME")+".get_token()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"V2"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.v2_face_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Initialize the V2 face detector"]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_init=function(t){var e=t.getFieldValue("NAME")||"";return`face = ${e}.init(${e}.V2_FACE_DETECTOR)\n`},Blockly.Blocks.v2_face_get_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_GET_NUMBER,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Get the number of faces"]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_get_number=function(t){return["face.GetFaceNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_face_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Number:1-3","Return:","list[0]: prob // Confidence\xa0rate","list[1]: x","list[2]: y","list[3]: width","list[4]: height  // Bounding\xa0box\xa0of\xa0face","list[5]: mark    // landmarks","[   ","{'x':0, 'y':0}","{'x':0, 'y':0}","{'x':0, 'y':0}","{'x':0, 'y':0}","{'x':0, 'y':0}"," ]"]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_get_detail=function(t){return[`face.GetFaceDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_object_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_OBJECT_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["Initialize the V2 object recognition"]}},attrs:{keyword:["v2","object"]}},Blockly.Python.v2_object_init=function(t){var e=t.getFieldValue("NAME")||"";return`obj = ${e}.init(${e}.V2_OBJECT_RECOGNITION)\n`},Blockly.Blocks.v2_object_get_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_OBJECT_GET_NUMBER,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["Get the number of object"]}},attrs:{keyword:["v2","object"]}},Blockly.Python.v2_object_get_number=function(t){return["obj.GetObjNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_object_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_OBJECT_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.MOTOR_HUE,tool:["Number:1-3","Return:","list[0]: prob // Confidence\xa0rate","list[1]: x","list[2]: y","list[3]: width","list[4]: height  // Bounding\xa0box\xa0of\xa0obj","list[5]: type"]}},attrs:{keyword:["v2","object"]}},Blockly.Python.v2_object_get_detail=function(t){return[`obj.GetObjDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_code_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_CODE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.DAC_HUE,tool:["Initialize the V2 code detector"]}},attrs:{keyword:["v2","code"]}},Blockly.Python.v2_code_init=function(t){var e=t.getFieldValue("NAME")||"";return`code = ${e}.init(${e}.V2_CODE_DETECTOR)\n`},Blockly.Blocks.v2_code_get_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_CODE_GET_NUMBER,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.DAC_HUE,tool:["Get the number of code"]}},attrs:{keyword:["v2","code"]}},Blockly.Python.v2_code_get_number=function(t){return["code.GetCodeNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_code_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_CODE_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.DAC_HUE,tool:["Number:1-3","Return:","list[0]: prob // Confidence\xa0rate","list[1]: x    // 0 ~ 640","list[2]: y    // 0 ~ 480","list[3]: width","list[4]: height  // Bounding\xa0box\xa0of\xa0code",'list[5]: type    // include\xa0"Background",\xa0"QR/DM/Maxi","SmallProgramCode",\xa0"PDF-417",\xa0"EAN",\xa0"Unknown"',"list[6]: content"]}},attrs:{keyword:["v2","code"]}},Blockly.Python.v2_code_get_detail=function(t){return[`code.GetCodeDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_color_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_COLOR_HUE,tool:["Initialize the V2 color tracker"]}},attrs:{keyword:["v2","color"]}},Blockly.Python.v2_color_init=function(t){var e=t.getFieldValue("NAME")||"";return`color = ${e}.init(${e}.V2_COLOR_TRACKER)\n`},Blockly.Blocks.v2_color_config_lab_threshold={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_CONFIG_LAB_THRESHOLD,args0:[{type:"input_value",name:"l_min"},{type:"input_value",name:"l_max"},{type:"input_value",name:"a_min"},{type:"input_value",name:"a_max"},{type:"input_value",name:"b_min"},{type:"input_value",name:"b_max"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_COLOR_HUE,tool:[]}},attrs:{keyword:["v2","color"]}},Blockly.Python.v2_color_config_lab_threshold=function(t){return`color.ConfigLABThreshold(${Blockly.Python.valueToCode(t,"l_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"l_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"a_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"a_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"b_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"b_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_color_config_roi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_CONFIG_ROI,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_COLOR_HUE,tool:[]}},attrs:{keyword:["v2","color"]}},Blockly.Python.v2_color_config_roi=function(t){return`color.ConfigROI(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_color_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_GET_DETAIL,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_COLOR_HUE,tool:[]}},attrs:{keyword:["v2","color"]}},Blockly.Python.v2_color_get_detail=function(t){return["color.getColorTrackerDetail()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_face_re_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:["Initialize the V2 face recognition"]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_init=function(t){var e=t.getFieldValue("NAME")||"";return`face_recognition = ${e}.init(${e}.V2_FACE_RECOGNITION)\n`},Blockly.Blocks.v2_face_re_train={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_TRAIN,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"name"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_train=function(t){return`face_recognition.FaceTrain(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"name",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.v2_face_re_stop_train={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_STOP_TRAIN,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_stop_train=function(t){return"face_recognition.StopFaceTrain()\n"},Blockly.Blocks.v2_face_re_Save_run={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_SAVE_RUN,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_Save_run=function(t){return"face_recognition.FaceSaveAndRun()\n"},Blockly.Blocks.v2_face_re_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_RESET,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_reset=function(t){return"face_recognition.FaceReset()\n"},Blockly.Blocks.v2_face_re_get_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_GET_NUMBER,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_get_number=function(t){return["face_recognition.GetFaceNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_face_re_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_get_detail=function(t){return[`face_recognition.GetFaceDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_face_re_get_training_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_FACE_RE_GET_TRAINING_DETAIL,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_FACE_RE_HUE,tool:[]}},attrs:{keyword:["v2","face"]}},Blockly.Python.v2_face_re_get_training_detail=function(t){return["face_recognition.GetTrainingDetail()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_lane_line_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_LANE_LINE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_LANE_LINE_HUE,tool:["Initialize the V2 lane line tracker"]}},attrs:{keyword:["v2","line"]}},Blockly.Python.v2_lane_line_init=function(t){var e=t.getFieldValue("NAME")||"";return`lane_line = ${e}.init(${e}.V2_LANE_LINE_TRACKER)\n`},Blockly.Blocks.v2_lane_line_config_lab_threshold={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_CONFIG_LAB_THRESHOLD,args0:[{type:"input_value",name:"l_min"},{type:"input_value",name:"l_max"},{type:"input_value",name:"a_min"},{type:"input_value",name:"a_max"},{type:"input_value",name:"b_min"},{type:"input_value",name:"b_max"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_LANE_LINE_HUE,tool:[]}},attrs:{keyword:["v2","line"]}},Blockly.Python.v2_lane_line_config_lab_threshold=function(t){return`lane_line.ConfigLABThreshold(${Blockly.Python.valueToCode(t,"l_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"l_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"a_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"a_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"b_min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"b_max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_lane_line_config_roi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_CONFIG_ROI,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_LANE_LINE_HUE,tool:[]}},attrs:{keyword:["v2","line"]}},Blockly.Python.v2_lane_line_config_roi=function(t){return`lane_line.ConfigROI(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_lane_line_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_LANE_LINE_GET_DETAIL,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_LANE_LINE_HUE,tool:[]}},attrs:{keyword:["v2","line"]}},Blockly.Python.v2_lane_line_get_detail=function(t){return["lane_line.GetLaneLineTrackerDetail()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_motion_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_MOTION_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_MOTION_HUE,tool:["Initialize the V2 motion tracker"]}},attrs:{keyword:["v2","motion"]}},Blockly.Python.v2_motion_init=function(t){var e=t.getFieldValue("NAME")||"";return`motion = ${e}.init(${e}.V2_MOTION_TRACKER)\n`},Blockly.Blocks.v2_motion_set_bg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_MOTION_SET_BG,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_MOTION_HUE,tool:[]}},attrs:{keyword:["v2","motion"]}},Blockly.Python.v2_motion_set_bg=function(t){return"motion.SetAsBackground()\n"},Blockly.Blocks.v2_motion_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_MOTION_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.V2_MOTION_HUE,tool:[]}},attrs:{keyword:["v2","motion"]}},Blockly.Python.v2_motion_get_detail=function(t){return[`motion.GetMotionDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_online_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:["Initialize the V2 online classifier"]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_init=function(t){var e=t.getFieldValue("NAME")||"";return`classifier = ${e}.init(${e}.V2_ONLINE_CLASSIFIER)\n`},Blockly.Blocks.v2_online_train={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_TRAIN,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"objclass"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_train=function(t){return`classifier.ObjTrain(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"objclass",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_online_save_run={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_SAVE_RUN,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_save_run=function(t){return"classifier.ObjSaveAndRun()\n"},Blockly.Blocks.v2_online_reset={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_RESET,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_reset=function(t){return"classifier.ObjReset()\n"},Blockly.Blocks.v2_online_get_match={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_GET_MATCH,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_get_match=function(t){return["classifier.GetBestMatch()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_online_get_score={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_GET_SCORE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_get_score=function(t){return["classifier.GetBestScore()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_online_get_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_GET_NUMBER,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_get_number=function(t){return["classifier.GetClassNumber()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_online_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_ONLINE_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.V2_ONLINE_HUE,tool:[]}},attrs:{keyword:["v2","online"]}},Blockly.Python.v2_online_get_detail=function(t){return[`classifier.GetClassDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_shape_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_SHAPE_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_SHAPE_HUE,tool:["Initialize the V2 shape detector"]}},attrs:{keyword:["v2","shape"]}},Blockly.Python.v2_shape_init=function(t){var e=t.getFieldValue("NAME")||"";return`detector = ${e}.init(${e}.V2_SHAPE_DETECTOR)\n`},Blockly.Blocks.v2_shape_set_bg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_SHAPE_SET_BG,args0:[],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_SHAPE_HUE,tool:[]}},attrs:{keyword:["v2","shape"]}},Blockly.Python.v2_shape_set_bg=function(t){return"detector.SetAsBackground()\n"},Blockly.Blocks.v2_shape_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_SHAPE_GET_DETAIL,args0:[{type:"input_value",name:"number"}],output:null,inputsInline:!0,colour:Blockly.Msg.V2_SHAPE_HUE,tool:[]}},attrs:{keyword:["v2","shape"]}},Blockly.Python.v2_shape_get_detail=function(t){return[`detector.GetMotionDetail(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.v2_target_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_TARGET_INIT,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_TARGET_HUE,tool:["Initialize the V2 target tracker"]}},attrs:{keyword:["v2","target"]}},Blockly.Python.v2_target_init=function(t){var e=t.getFieldValue("NAME")||"";return`target = ${e}.init(${e}.V2_TARGET_TRACKER)\n`},Blockly.Blocks.v2_target_config_roi={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_COLOR_CONFIG_ROI,args0:[{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"w"},{type:"input_value",name:"h"}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.V2_TARGET_HUE,tool:[]}},attrs:{keyword:["v2","target"]}},Blockly.Python.v2_target_config_roi=function(t){return`target.ConfigTargetROI(${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"w",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"h",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.v2_target_get_detail={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.V2_TARGET_GET_DETAIL,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.V2_TARGET_HUE,tool:[]}},attrs:{keyword:["v2","target"]}},Blockly.Python.v2_target_get_detail=function(t){return["target.GetTargetDetail()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0),l=function(){return[["White","#ffffff"],["Black","#000000"]]};function i(){for(var t=[],e=0;e<Blockly.Units.length;e++)"oled"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}var a=["m5stack.pbm","m5stack.pbm"];function s(){var t=[];t.push(a);for(var e=0;e<Blockly.ResImages.length;e++)/.pbm/g.test(Blockly.ResImages[e])&&t.push([Blockly.ResImages[e],Blockly.ResImages[e]]);return t}Blockly.Blocks.oled_fill={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_FILL,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_fill=function(t){return`${t.getFieldValue("NAME")||""}.fill(${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_fill_rect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_FILL_RECT,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"input_value",name:"H"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_fill_rect=function(t){return`${t.getFieldValue("NAME")||""}.fill_rect(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_rect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_RECT,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"input_value",name:"H"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_rect=function(t){return`${t.getFieldValue("NAME")||""}.rect(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_hline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_HLINE,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_hline=function(t){return`${t.getFieldValue("NAME")||""}.hline(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_vline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_VLINE,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"H"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_vline=function(t){return`${t.getFieldValue("NAME")||""}.vline(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_LINE,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_line=function(t){return`${t.getFieldValue("NAME")||""}.line(${Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_TEXT,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"text"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_text=function(t){return`${t.getFieldValue("NAME")||""}.text(${Blockly.Python.valueToCode(t,"text",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_pixel={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_PIXEL,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"COLOR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_pixel=function(t){return`${t.getFieldValue("NAME")||""}.pixel(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"").replace("#","0x")})\n`},Blockly.Blocks.oled_scroll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_SCROLL,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"input_value",name:"xstep"},{type:"input_value",name:"ystep"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_scroll=function(t){return`${t.getFieldValue("NAME")||""}.scroll(${Blockly.Python.valueToCode(t,"xstep",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"ystep",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.oled_poweron={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_POWERON,args0:[{type:"field_dropdown",name:"NAME",options:i}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_poweron=function(t){return(t.getFieldValue("NAME")||"")+".poweron()\n"},Blockly.Blocks.oled_poweroff={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_POWEROFF,args0:[{type:"field_dropdown",name:"NAME",options:i}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_poweroff=function(t){return(t.getFieldValue("NAME")||"")+".poweroff()\n"},Blockly.Blocks.oled_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_SHOW,args0:[{type:"field_dropdown",name:"NAME",options:i}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_show=function(t){return(t.getFieldValue("NAME")||"")+".show()\n"},Blockly.Blocks.oled_invert={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.OLED_INVERT,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"field_dropdown",name:"invert",options:[["True","1"],["False","0"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},attrs:{keyword:["oled"]}},Blockly.Python.oled_invert=function(t){return`${t.getFieldValue("NAME")||""}.invert(${t.getFieldValue("invert")})\n`},Blockly.Blocks.oled_image={init:function(){this.jsonInit(this._init()),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,20,20,"*",this.addFile.bind(this,"img")))},_init:function(){return{message0:Blockly.Msg.OLED_IMAGE,args0:[{type:"field_dropdown",name:"NAME",options:i},{type:"field_dropdown",name:"IMAGE",options:s},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LISTS_HUE,tool:[]}},addFile:o.addFileFun,attrs:{keyword:["oled"]}},Blockly.Python.oled_image=function(t){var e=t.getFieldValue("NAME")||"",n=t.getFieldValue("IMAGE");return`${e}.image(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, "/flash/img/${n}")\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"NBIoT"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_nbiot_power_down_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_POWER_DOWN_MODULE,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_power_down_module=function(t){return t.getFieldValue("NAME")+".poweroff()\n"},Blockly.Blocks.unit_nbiot_reset_module={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_RESET_MODULE,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_reset_module=function(t){return t.getFieldValue("NAME")+".reset()\n"},Blockly.Blocks.unit_nbiot_set_echo_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_SET_ECHO_MODE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"mode",options:[["OFF","0"],["ON","1"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_set_echo_mode=function(t){return[`${t.getFieldValue("NAME")}.set_command_echo_mode(${t.getFieldValue("mode")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_check_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_CHECK_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return:","True   OK","False  Can't Communication"]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_check_status=function(t){return[t.getFieldValue("NAME")+".check_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_check_single_quality={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_CHECK_SINGLE_QUALITY,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return:","0 -115 dBm or less","1 -111 dBm","2...30 -110... -54 dBm","31 -52 dBm or greater","99 not known or not detectable"]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_check_single_quality=function(t){return[t.getFieldValue("NAME")+".get_single_quality()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_check_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_CHECK_NETWORK_REGISTRATION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return:","0 Not registered, MT is not currently searching a new operator to register to","1 Registered, home network","2 Not registered, but MT is currently searching a new operator to register to","3 Registration denied","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates NB-IoT)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates NB-IoT)']}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_check_network_registration=function(t){return[t.getFieldValue("NAME")+".get_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_check_gprs_network_registration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_CHECK_GPRS_NETWORK_REGISTRATION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return:","0 Not registered, MT is not currently searching an operator to register to.","1 Registered, home network.","2 Not registered, but MT is currently trying to attach or searching an operator to register to.","3 Registration denied.","4 Unknown","5 Registered, roaming",'6 Registered for "SMS only", home network (applicable only when <Act> indicates E-UTRAN)','7 Registered for "SMS only", roaming (applicable only when <Act> indicates E-UTRAN)']}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_check_gprs_network_registration=function(t){return[t.getFieldValue("NAME")+".get_gprs_network_registration()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_enable_pdp_context={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_ENABLE_PDP_CONTEXT,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb"]}},Blockly.Python.unit_nbiot_enable_pdp_context=function(t){return t.getFieldValue("NAME")+".enable_PDP_context()\n"},Blockly.Blocks.unit_nbiot_coap_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_COAP_CONNECT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.unit_nbiot_coap_connect=function(t){return`${t.getFieldValue("NAME")}.coap_connect(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_nbiot_coap_get={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){let e="true"===t,n=this.getSourceBlock();n.isToken!==e&&(n.isToken=e,n.updateToken_(e))});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_COAP_GET,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"url"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return: True or False"]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");let e="true"===this.getFieldValue("tokenChoose");return t.setAttribute("isToken",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isToken");this.isToken=e,this.updateToken_(e)},updateToken_:function(t){if(this.getInput("token")){let e=this.getInput("token").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("token")}if(t&&(this.appendValueInput("token").setCheck("String"),!this.getInput("token").connection.targetConnection)){let t=o.createShadow("text_password",{name:"TEXT"});this.getInput("token").connection.setShadowDom(t)}},attrs:{keyword:["nb","coap"]}},Blockly.Python.unit_nbiot_coap_get=function(t){var e=t.getFieldValue("NAME"),n=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let l;return l=o?`${e}.coap_get(${n}, ${o})`:`${e}.coap_get(${n})`,[l,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_coap_post={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_COAP_POST,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.unit_nbiot_coap_get.mutationToDom,domToMutation:Blockly.Blocks.unit_nbiot_coap_get.domToMutation,updateToken_:Blockly.Blocks.unit_nbiot_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.unit_nbiot_coap_post=function(t){var e=t.getFieldValue("NAME"),n=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=t.getFieldValue("format")||"",i=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let a;return a=i?`${e}.coap_post(${n}, ${o}, content_format=${l}, ${i})`:`${e}.coap_post(${n}, ${o}, content_format=${l})`,[a,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_coap_put={init:function(){this.jsonInit(this._init()),this.isToken=!1;var t=new Blockly.FieldDropdown([["None","false"],["Token","true"]],function(t){var e="true"===t;this.getSourceBlock().updateToken_(e)});this.appendDummyInput("tokenChoose").appendField(t,"tokenChoose")},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_COAP_PUT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"url"},{type:"input_value",name:"payload"},{type:"field_dropdown",name:"format",options:[["TEXT_PLAIN","0"],["APPLICATION_LINK_FORMAT","40"],["APPLICATION_XML","41"],["APPLICATION_OCTET_STREAM","42"],["APPLICATION_EXI","47"],["APPLICATION_JSON","50"],["APPLICATION_CBOR","60"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return: True or False"]}},mutationToDom:Blockly.Blocks.unit_nbiot_coap_get.mutationToDom,domToMutation:Blockly.Blocks.unit_nbiot_coap_get.domToMutation,updateToken_:Blockly.Blocks.unit_nbiot_coap_get.updateToken_,attrs:{keyword:["nb","coap"]}},Blockly.Python.unit_nbiot_coap_put=function(t){var e=t.getFieldValue("NAME"),n=Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=t.getFieldValue("format")||"",i=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"";let a;return a=i?`${e}.coap_put(${n}, ${o}, content_format=${l}, ${i})`:`${e}.coap_put(${n}, ${o}, content_format=${l})`,[a,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_coap_destroy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_COAP_DESTROY,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Return: True or False"]}},attrs:{keyword:["nb","coap"]}},Blockly.Python.unit_nbiot_coap_destroy=function(t){return[t.getFieldValue("NAME")+".coap_destroy()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_mqtt_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_CONNECT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"server"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_connect=function(t){return`${t.getFieldValue("NAME")}.mqtt_connect(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_nbiot_mqtt_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_DISCONNECT,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_disconnect=function(t){return t.getFieldValue("NAME")+".mqtt_disconnect()\n"},Blockly.Blocks.unit_nbiot_mqtt_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_SUB,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"topic",check:"String"},{type:"input_value",name:"qos",check:"Number"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_sub=function(t){return[`${t.getFieldValue("NAME")}.mqtt_subscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_"}, unit_nbiot_mqtt_cb, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def unit_nbiot_mqtt_cb(nb_mq_topic, nb_mq_payload):\n  # global params\n  ${e} = nb_mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = nb_mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.unit_nbiot_mqtt_unsubscribe={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_UNSUBSCRIBE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"topic"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_unsubscribe=function(t){return`${t.getFieldValue("NAME")}.mqtt_unsubscribe(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.unit_nbiot_mqtt_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_PUBLISH,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"topic",align:"RIGHT"},{type:"input_value",name:"payload",align:"RIGHT"},{type:"input_value",name:"qos",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_publish=function(t){return`${t.getFieldValue("NAME")}.mqtt_publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_NONE)||""})\n`},Blockly.Blocks.unit_nbiot_mqtt_check_connection={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_CHECK_CONNECTION,args0:[{type:"field_dropdown",name:"NAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:["Check mqtt connection.","Return: 0/1 or False"]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_check_connection=function(t){return[t.getFieldValue("NAME")+".mqtt_check_connection()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_nbiot_mqtt_poll={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_NBIOT_MQTT_POLL,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ACCEL_HUE,tool:[]}},attrs:{keyword:["nb","mqtt"]}},Blockly.Python.unit_nbiot_mqtt_poll=function(t){return t.getFieldValue("NAME")+".mqtt_poll()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"RS485"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_rs485_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Read RS485 data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read=function(t){return[(t.getFieldValue("VAR")||"")+".read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ_CHARACTERS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:["Read number RS485 data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read_characters=function(t){return[`${t.getFieldValue("VAR")||""}.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READLINE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_readline=function(t){return[(t.getFieldValue("VAR")||"")+".readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:["Write data"]}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\"),n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+")\n":n+".write(str("+e+"))\n"},Blockly.Blocks.unit_rs485_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READANY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_any=function(t){return[(t.getFieldValue("VAR")||"")+".any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_LINE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"",n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+'+"\\r\\n")\n':n+".write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.unit_rs485_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_RAW_DATA,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_raw_data=function(t){var e=`bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""})`;return(t.getFieldValue("VAR")||"")+".write("+e+")\n"},Blockly.Blocks.unit_rs485_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_DISCRETE_INPUTS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read_discrete_inputs=function(t){return[(t.getFieldValue("VAR")||"")+`.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_HOLDING_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read_holding_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_INPUT_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_read_input_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_COIL,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_single_coil=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_REGISTER,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_single_register=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_multiple_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rs485_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.unit_rs485_write_multiple_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const i=[["None","False"],["Custom","True"]];Blockly.Blocks.unit_rs485_init={init:function(){this.jsonInit(this._getinit()),this.isCtrlPin="False",this.appendDummyInput("op").appendField("ctrl pin").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.isCtrlPin&&(e.updateOP(t),e.isCtrlPin=t)}))},_getinit:function(){return{message0:Blockly.Msg.UNIT_RS485_INIT,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"field_dropdown",name:"UARTid",options:[["1","1"],["2","2"]]},{type:"input_value",name:"BAUD"},{type:"field_dropdown",name:"data_bits",options:[["7","7"],["8","8"],["9","9"]]},{type:"field_dropdown",name:"stop_bits",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"parity",options:[["None","None"],["Even","0"],["Odd","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isCtrlPin",this.isCtrlPin),t},domToMutation:function(t){if(this.isCtrlPin=t.getAttribute("isCtrlPin"),this.updateOP(this.isCtrlPin),"True"===this.isCtrlPin){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.isCtrlPin}},updateOP:function(t){if("True"===t){this.getInput("ctrl_pin")&&this.removeInput("ctrl_pin"),this.appendValueInput("ctrl_pin").setCheck("Number");let t=this.getInput("ctrl_pin").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("math_number",{name:"NUM"});this.getInput("ctrl_pin").connection.setShadowDom(t)}}else if(this.getInput("ctrl_pin")){let e=this.getInput("ctrl_pin").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("ctrl_pin")}},attrs:{keyword:["modbus","master"]}},Blockly.Python.unit_rs485_init=function(t){var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("UARTid"),o=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL),l=t.getFieldValue("data_bits"),i=t.getFieldValue("stop_bits"),a=t.getFieldValue("parity"),s=Blockly.Python.valueToCode(t,"ctrl_pin",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""===s&&(s="None"),`${e}.init(${n}, baudrate=${o}, data_bits=${l}, stop_bits=${i}, parity=${a}, ctrl_pin=${s})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ISO485"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_iso485_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:["Read ISO485 data","return: bytes, empty will return None"]}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read=function(t){return[(t.getFieldValue("VAR")||"")+".read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ_CHARACTERS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE,tool:["Read number ISO485 data","return: bytes, empty will return None"]}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read_characters=function(t){return[`${t.getFieldValue("VAR")||""}.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READLINE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_readline=function(t){return[(t.getFieldValue("VAR")||"")+".readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.EEPROM_HUE,tool:["Write data"]}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\"),n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+")\n":n+".write(str("+e+"))\n"},Blockly.Blocks.unit_iso485_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READANY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_any=function(t){return[(t.getFieldValue("VAR")||"")+".any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_LINE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"",n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+'+"\\r\\n")\n':n+".write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.unit_iso485_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_RAW_DATA,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_raw_data=function(t){var e=`bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""})`;return(t.getFieldValue("VAR")||"")+".write("+e+")\n"},Blockly.Blocks.unit_iso485_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_DISCRETE_INPUTS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read_discrete_inputs=function(t){return[(t.getFieldValue("VAR")||"")+`.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_HOLDING_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read_holding_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_INPUT_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_read_input_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_COIL,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_single_coil=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_REGISTER,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_single_register=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_multiple_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_iso485_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.EEPROM_HUE}},attrs:{keyword:["iso485"]}},Blockly.Python.unit_iso485_write_multiple_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const i=[["None","False"],["Custom","True"]];Blockly.Blocks.unit_iso485_init={init:function(){this.jsonInit(this._getinit()),this.isCtrlPin="False",this.appendDummyInput("op").appendField("ctrl pin").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.isCtrlPin&&(e.updateOP(t),e.isCtrlPin=t)}))},_getinit:function(){return{message0:Blockly.Msg.UNIT_RS485_INIT,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"field_dropdown",name:"UARTid",options:[["1","1"],["2","2"]]},{type:"input_value",name:"BAUD"},{type:"field_dropdown",name:"data_bits",options:[["7","7"],["8","8"],["9","9"]]},{type:"field_dropdown",name:"stop_bits",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"parity",options:[["None","None"],["Even","0"],["Odd","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EEPROM_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isCtrlPin",this.isCtrlPin),t},domToMutation:function(t){if(this.isCtrlPin=t.getAttribute("isCtrlPin"),this.updateOP(this.isCtrlPin),"True"===this.isCtrlPin){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.isCtrlPin}},updateOP:function(t){if("True"===t){this.getInput("ctrl_pin")&&this.removeInput("ctrl_pin"),this.appendValueInput("ctrl_pin").setCheck("Number");let t=this.getInput("ctrl_pin").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("math_number",{name:"NUM"});this.getInput("ctrl_pin").connection.setShadowDom(t)}}else if(this.getInput("ctrl_pin")){let e=this.getInput("ctrl_pin").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("ctrl_pin")}},attrs:{keyword:["modbus","master"]}},Blockly.Python.unit_iso485_init=function(t){var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("UARTid"),o=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL),l=t.getFieldValue("data_bits"),i=t.getFieldValue("stop_bits"),a=t.getFieldValue("parity"),s=Blockly.Python.valueToCode(t,"ctrl_pin",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""===s&&(s="None"),`${e}.init(${n}, baudrate=${o}, data_bits=${l}, stop_bits=${i}, parity=${a}, ctrl_pin=${s})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"LoRaWAN470"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}function i(){for(var t=[],e=0;e<Blockly.Units.length;e++)"LoRaWAN868"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}function a(){for(var t=[],e=0;e<Blockly.Units.length;e++)"LoRaWAN915"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}function s(t){switch(t){case"LoRaWAN470":return l;case"LoRaWAN868":return i;case"LoRaWAN915":return a}}function r(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_CONFIG_ABP,args0:[{type:"field_dropdown",name:"VAR",options:e},{type:"input_dummy"},{type:"input_value",name:"devaddr"},{type:"input_value",name:"appskey"},{type:"input_value",name:"nwkskey"}],previousStatement:null,nextStatement:null,tool:[]}}function c(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_CONFIG_OTAA,args0:[{type:"field_dropdown",name:"VAR",options:e},{type:"input_dummy"},{type:"input_value",name:"deveui"},{type:"input_value",name:"appkey"},{type:"input_value",name:"appeui"}],previousStatement:null,nextStatement:null,tool:[]}}function u(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_CHECK_JOIN_STATUS,args0:[{type:"field_dropdown",name:"VAR",options:e}],output:null,inputsInline:!0,tool:[]}}function _(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_CHECK_SENT_STATUS,args0:[{type:"field_dropdown",name:"VAR",options:e}],output:null,inputsInline:!0,tool:[]}}function d(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_CHECK_DOWNLINK_DATA,args0:[{type:"field_dropdown",name:"VAR",options:e}],output:null,inputsInline:!0,tool:[]}}function h(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_RX_WINDOW_PARAM,args0:[{type:"field_dropdown",name:"VAR",options:e},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}}function y(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_CLASS_MODE,args0:[{type:"field_dropdown",name:"VAR",options:e},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}}function p(t){let e=s(t);return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_JOIN_MODE,args0:[{type:"field_dropdown",name:"VAR",options:e},{type:"field_dropdown",name:"mode",options:[["OTAA","0"],["ABP","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}}Blockly.Blocks.unit_lorawan470_config_abp={init:function(){this.jsonInit(r("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_config_abp=function(t){return`${t.getFieldValue("VAR")||""}.config_ABP(${Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_lorawan470_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.GPS_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_ABP_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:l}],output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_get_abp_config=function(t){return[(t.getFieldValue("VAR")||"")+".get_ABP_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.unit_lorawan470_config_otaa={init:function(){this.jsonInit(c("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_config_otaa=function(t){var e=t.getFieldValue("VAR")||"",n=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`${e}.config_OTAA(${n}, ${o}, ${l=l.replace(/\s*/g,"")})\n`},Blockly.Blocks.unit_lorawan470_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.GPS_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_OTAA_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:l}],output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_get_otaa_config=function(t){return[(t.getFieldValue("VAR")||"")+".get_OTAA_config()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.unit_lorawan470_check_join_status={init:function(){this.jsonInit(u("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_check_join_status=function(t){return[(t.getFieldValue("VAR")||"")+".check_join_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.unit_lorawan470_check_sent_status={init:function(){this.jsonInit(_("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_check_sent_status=function(t){return[(t.getFieldValue("VAR")||"")+".check_uplink_status()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.unit_lorawan470_check_downlink_data={init:function(){this.jsonInit(d("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_check_downlink_data=function(t){return[(t.getFieldValue("VAR")||"")+".check_downlink_data()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.unit_lorawan470_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_frequency_band_mask=function(t){return`${t.getFieldValue("VAR")||""}.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`},Blockly.Blocks.unit_lorawan470_set_rx_window_param={init:function(){this.jsonInit(h("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_set_rx_window_param=function(t){return`${t.getFieldValue("VAR")||""}.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_lorawan470_set_class_mode={init:function(){this.jsonInit(y("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_set_class_mode=function(t){return`${t.getFieldValue("VAR")||""}.set_class_mode(${t.getFieldValue("class_mode")})\n`},Blockly.Blocks.unit_lorawan470_set_join_mode={init:function(){this.jsonInit(p("LoRaWAN470")),this.setColour(Blockly.Msg.GPS_HUE)},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_set_join_mode=function(t){return`${t.getFieldValue("VAR")||""}.set_join_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_lorawan470_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SEND_DATA,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.GPS_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=o.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_send_data=function(t){var e=t.getFieldValue("VAR")||"",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"nbtrials",Blockly.Python.ORDER_FUNCTION_CALL)||"";let l;return l=o?`${e}.send_data(${n}, 1, ${o})\n`:`${e}.send_data(${n})\n`,l},Blockly.Blocks.unit_lorawan470_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_set_uplink_app_port=function(t){return`${t.getFieldValue("VAR")||""}.set_uplink_app_port(${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.unit_lorawan470_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_join=function(t){return`${t.getFieldValue("VAR")||""}.join(${t.getFieldValue("para1")}, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.unit_lorawan470_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_set_uplink_mode=function(t){return`${t.getFieldValue("VAR")||""}.set_uplink_downlink_mode(${t.getFieldValue("mode")})\n`};const m=[["OTAA mode","OTAA"],["ABP mode","ABP"]];function k(t){return{message0:"%1",args0:[{type:"field_dropdown",name:"VAR",options:s(t)}],previousStatement:null,nextStatement:null,inputsInline:!1,tool:[]}}Blockly.Blocks.unit_lorawan470_config_mode={init:function(){this.jsonInit(k("LoRaWAN470")),this._initDropdowm(),this.setColour(Blockly.Msg.GPS_HUE)},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.mode),t},domToMutation:function(t){if(this.mode=t.getAttribute("mode"),this.updateConfig(this.mode),"OTAA"!==this.mode){let t=this.getInput("op").fieldRow[1];t.selectedOption_=m[1],t.value_=this.mode}},_initDropdowm:function(){this.mode="OTAA",this.appendDummyInput("op").appendField("Config").appendField(new Blockly.FieldDropdown(m,function(t){let e=this.getSourceBlock();t!==e.mode&&(e.updateConfig(t),e.mode=t)}),"mode"),this.updateConfig(this.mode)},updateConfig:function(t){let e=["deveui","appkey","appeui"],n=["devaddr","appskey","nwkskey"],o="OTAA"===t?e:n,l="OTAA"===t?["device eui *","app key *","app eui"]:["device address","app session key","network session key"];e.concat(n).forEach(t=>{if(this.getInput(t)){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput(t)}}),o.forEach((t,e)=>{this.appendValueInput(t).appendField(l[e]).setCheck("String");let n=this.getInput(t).connection;if(!this.isInFlyout&&n&&!n.targetConnection){let e=Blockly.utils.xml.createElement("shadow");e.setAttribute("type","text");let n=Blockly.utils.xml.createElement("field");n.setAttribute("name","TEXT"),e.appendChild(n),this.getInput(t).connection.setShadowDom(e)}})},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_config_mode=function(t){var e=t.getFieldValue("VAR"),n=t.getFieldValue("mode"),o=Blockly.Python.valueToCode(t,"deveui",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"appeui",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.Python.valueToCode(t,"appkey",Blockly.Python.ORDER_FUNCTION_CALL)||"";i=i.replace(/\s*/g,"");var a=Blockly.Python.valueToCode(t,"devaddr",Blockly.Python.ORDER_FUNCTION_CALL)||"",s=Blockly.Python.valueToCode(t,"appskey",Blockly.Python.ORDER_FUNCTION_CALL)||"",r=Blockly.Python.valueToCode(t,"nwkskey",Blockly.Python.ORDER_FUNCTION_CALL)||"";let c;return c="OTAA"===n?`${e}.config_OTAA(${o}, ${l}, ${i})\n`:`${e}.config_ABP(${a}, ${s}, ${r})\n`,c},Blockly.Blocks.unit_lorawan470_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:o.lora470ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_config=function(t){var e=t.getFieldValue("VAR")||"";let n=`${e}.set_frequency_band_mask('${t.getFieldValue("channel")}')\n`;return n+=`${e}.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,n+=`${e}.set_class_mode(${t.getFieldValue("class_mode")})\n`,n+=`${e}.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,n},Blockly.Blocks.unit_lorawan470_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_STOP,args0:[{type:"field_dropdown",name:"VAR",options:l}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:[]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_join_stop=function(t){return(t.getFieldValue("VAR")||"")+".join(0)\n"},Blockly.Blocks.unit_lorawan470_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_START,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.GPS_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","470"]}},Blockly.Python.unit_lorawan470_join_start=function(t){return`${t.getFieldValue("VAR")||""}.join(1, ${t.getFieldValue("para2")}, ${Blockly.Python.valueToCode(t,"para3",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"para4",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.unit_lorawan915_config_abp={init:function(){this.jsonInit(r("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_config_abp=Blockly.Python.unit_lorawan470_config_abp,Blockly.Blocks.unit_lorawan915_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.TIMER_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_ABP_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:a}],output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_get_abp_config=Blockly.Python.unit_lorawan470_get_abp_config,Blockly.Blocks.unit_lorawan915_config_otaa={init:function(){this.jsonInit(c("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_config_otaa=Blockly.Python.unit_lorawan470_config_otaa,Blockly.Blocks.unit_lorawan915_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.TIMER_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_OTAA_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:a}],output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_get_otaa_config=Blockly.Python.unit_lorawan470_get_otaa_config,Blockly.Blocks.unit_lorawan915_check_join_status={init:function(){this.jsonInit(u("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_check_join_status=Blockly.Python.unit_lorawan470_check_join_status,Blockly.Blocks.unit_lorawan915_check_sent_status={init:function(){this.jsonInit(_("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_check_sent_status=Blockly.Python.unit_lorawan470_check_sent_status,Blockly.Blocks.unit_lorawan915_check_downlink_data={init:function(){this.jsonInit(d("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_check_downlink_data=Blockly.Python.unit_lorawan470_check_downlink_data,Blockly.Blocks.unit_lorawan915_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"field_dropdown",name:"channel",options:o.lora915ChannelOp}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_frequency_band_mask=Blockly.Python.unit_lorawan470_frequency_band_mask,Blockly.Blocks.unit_lorawan915_set_rx_window_param={init:function(){this.jsonInit(h("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_set_rx_window_param=Blockly.Python.unit_lorawan470_set_rx_window_param,Blockly.Blocks.unit_lorawan915_set_class_mode={init:function(){this.jsonInit(y("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_set_class_mode=Blockly.Python.unit_lorawan470_set_class_mode,Blockly.Blocks.unit_lorawan915_set_join_mode={init:function(){this.jsonInit(p("LoRaWAN915")),this.setColour(Blockly.Msg.TIMER_HUE)},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_set_join_mode=Blockly.Python.unit_lorawan470_set_join_mode,Blockly.Blocks.unit_lorawan915_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SEND_DATA,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=o.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_send_data=Blockly.Python.unit_lorawan470_send_data,Blockly.Blocks.unit_lorawan915_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_set_uplink_app_port=Blockly.Python.unit_lorawan470_set_uplink_app_port,Blockly.Blocks.unit_lorawan915_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_join=Blockly.Python.unit_lorawan470_join,Blockly.Blocks.unit_lorawan915_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_set_uplink_mode=Blockly.Python.unit_lorawan470_set_uplink_mode,Blockly.Blocks.unit_lorawan915_config_mode={init:function(){this.jsonInit(k("LoRaWAN915")),this._initDropdowm(),this.setColour(Blockly.Msg.TIMER_HUE)},mutationToDom:Blockly.Blocks.unit_lorawan470_config_mode.mutationToDom,domToMutation:Blockly.Blocks.unit_lorawan470_config_mode.domToMutation,_initDropdowm:Blockly.Blocks.unit_lorawan470_config_mode._initDropdowm,updateConfig:Blockly.Blocks.unit_lorawan470_config_mode.updateConfig,attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_config_mode=Blockly.Python.unit_lorawan470_config_mode,Blockly.Blocks.unit_lorawan915_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:o.lora915ChannelOp},{type:"input_dummy"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_config=Blockly.Python.unit_lorawan470_config,Blockly.Blocks.unit_lorawan915_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_STOP,args0:[{type:"field_dropdown",name:"VAR",options:a}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_join_stop=Blockly.Python.unit_lorawan470_join_stop,Blockly.Blocks.unit_lorawan915_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_START,args0:[{type:"field_dropdown",name:"VAR",options:a},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.TIMER_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan915_join_start=Blockly.Python.unit_lorawan470_join_start,Blockly.Blocks.unit_lorawan868_config_abp={init:function(){this.jsonInit(r("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_config_abp=Blockly.Python.unit_lorawan470_config_abp,Blockly.Blocks.unit_lorawan868_get_abp_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UART_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_ABP_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:i}],output:null,tool:["return:  (device address, app session key, network session key)"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_get_abp_config=Blockly.Python.unit_lorawan470_get_abp_config,Blockly.Blocks.unit_lorawan868_config_otaa={init:function(){this.jsonInit(c("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_config_otaa=Blockly.Python.unit_lorawan470_config_otaa,Blockly.Blocks.unit_lorawan868_get_otaa_config={init:function(){this.jsonInit(this._init()),this.setColour(Blockly.Msg.UART_HUE)},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_GET_OTAA_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:i}],output:null,tool:["return:  (device eui, app eui, app key)"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_get_otaa_config=Blockly.Python.unit_lorawan470_get_otaa_config,Blockly.Blocks.unit_lorawan868_check_join_status={init:function(){this.jsonInit(u("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_check_join_status=Blockly.Python.unit_lorawan470_check_join_status,Blockly.Blocks.unit_lorawan868_check_sent_status={init:function(){this.jsonInit(_("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_check_sent_status=Blockly.Python.unit_lorawan470_check_sent_status,Blockly.Blocks.unit_lorawan868_check_downlink_data={init:function(){this.jsonInit(d("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_check_downlink_data=Blockly.Python.unit_lorawan470_check_downlink_data,Blockly.Blocks.unit_lorawan868_frequency_band_mask={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_FREQUENCY_BAND_MASK,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_value",name:"channel"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","915"]}},Blockly.Python.unit_lorawan868_frequency_band_mask=function(t){return`${t.getFieldValue("VAR")||""}.set_frequency_band_mask(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_lorawan868_set_rx_window_param={init:function(){this.jsonInit(h("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_set_rx_window_param=Blockly.Python.unit_lorawan470_set_rx_window_param,Blockly.Blocks.unit_lorawan868_set_class_mode={init:function(){this.jsonInit(y("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_set_class_mode=Blockly.Python.unit_lorawan470_set_class_mode,Blockly.Blocks.unit_lorawan868_set_join_mode={init:function(){this.jsonInit(p("LoRaWAN868")),this.setColour(Blockly.Msg.UART_HUE)},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_set_join_mode=Blockly.Python.unit_lorawan470_set_join_mode,Blockly.Blocks.unit_lorawan868_send_data={init:function(){this.jsonInit(this._init());var t=new Blockly.FieldDropdown([["unconfirm","false"],["confirm","true"]],function(t){var e="true"===t;this.getSourceBlock().updateConfirm_(e)});this.appendDummyInput().appendField(t,"confirmOP")},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SEND_DATA,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_value",name:"payload"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e="true"===this.getFieldValue("confirmOP");return t.setAttribute("isconfirm",e),t},domToMutation:function(t){let e="true"===t.getAttribute("isconfirm");this.updateConfirm_(e)},updateConfirm_:function(t){if(this.getInput("nbtrials")){let e=this.getInput("nbtrials").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("nbtrials"),this.removeInput("limit")}if(t&&(this.appendValueInput("nbtrials").setCheck("Number").appendField("try times"),this.appendDummyInput("limit").appendField("(1 ~ 15)"),!this.isInFlyout)&&!this.getInput("nbtrials").connection.targetConnection){let t=o.createShadow("math_slider",{name:"NUM",min:"1",max:"15"});t.childNodes[0].innerHTML=1,this.getInput("nbtrials").connection.setShadowDom(t)}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_send_data=Blockly.Python.unit_lorawan470_send_data,Blockly.Blocks.unit_lorawan868_set_uplink_app_port={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_APP_PORT,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_value",name:"port"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_set_uplink_app_port=Blockly.Python.unit_lorawan470_set_uplink_app_port,Blockly.Blocks.unit_lorawan868_join={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_dummy"},{type:"field_dropdown",name:"para1",options:[["start join","1"],["stop join","0"]]},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_join=Blockly.Python.unit_lorawan470_join,Blockly.Blocks.unit_lorawan868_set_uplink_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_SET_UPLINK_MODE,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"field_dropdown",name:"mode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_set_uplink_mode=Blockly.Python.unit_lorawan470_set_uplink_mode,Blockly.Blocks.unit_lorawan868_config_mode={init:function(){this.jsonInit(k("LoRaWAN868")),this._initDropdowm(),this.setColour(Blockly.Msg.UART_HUE)},mutationToDom:Blockly.Blocks.unit_lorawan470_config_mode.mutationToDom,domToMutation:Blockly.Blocks.unit_lorawan470_config_mode.domToMutation,_initDropdowm:Blockly.Blocks.unit_lorawan470_config_mode._initDropdowm,updateConfig:Blockly.Blocks.unit_lorawan470_config_mode.updateConfig,attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_config_mode=Blockly.Python.unit_lorawan470_config_mode,Blockly.Blocks.unit_lorawan868_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN868_CONFIG,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_dummy"},{type:"input_value",name:"channel"},{type:"input_dummy"},{type:"input_value",name:"rx1_offset"},{type:"field_dropdown",name:"rx2_dr",options:[["SF12 BW125","0"],["SF11 BW125","1"],["SF10 BW125","2"],["SF9 BW125","3"],["SF8 BW125","4"],["SF7 BW125","5"]]},{type:"input_dummy"},{type:"input_value",name:"rx2_freq"},{type:"field_dropdown",name:"class_mode",options:[["classA","0"],["classB","1"],["classC","2"]]},{type:"input_dummy"},{type:"field_dropdown",name:"freqmode",options:[["same frequency mode","1"],["inter-frequency mode","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_config=function(t){var e=t.getFieldValue("VAR")||"";let n=`${e}.set_frequency_band_mask(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;return n+=`${e}.set_rx_window_param(${Blockly.Python.valueToCode(t,"rx1_offset",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("rx2_dr")}, ${Blockly.Python.valueToCode(t,"rx2_freq",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`,n+=`${e}.set_class_mode(${t.getFieldValue("class_mode")})\n`,n+=`${e}.set_uplink_downlink_mode(${t.getFieldValue("freqmode")})\n`,n},Blockly.Blocks.unit_lorawan868_join_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_STOP,args0:[{type:"field_dropdown",name:"VAR",options:i}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:[]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_join_stop=Blockly.Python.unit_lorawan470_join_stop,Blockly.Blocks.unit_lorawan868_join_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LORAWAN470_JOIN_START,args0:[{type:"field_dropdown",name:"VAR",options:i},{type:"input_dummy"},{type:"field_dropdown",name:"para2",options:[["open auto join","1"],["close auto join","0"]]},{type:"input_dummy"},{type:"input_value",name:"para3",check:"Number"},{type:"input_value",name:"para4",check:"Number"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UART_HUE,tool:["period: 7 ~ 255","maximum number of attempts: 1 ~ 256"]}},attrs:{keyword:["lorawan","868"]}},Blockly.Python.unit_lorawan868_join_start=Blockly.Python.unit_lorawan470_join_start},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"fader"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.fader_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_SET_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"},{type:"input_value",name:"color_in"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_set_color=function(t){return t.getFieldValue("VARNAME")+`.setColor(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"color_in",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.fader_set_color_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_SET_COLOR_RGB,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_set_color_rgb=function(t){var e=t.getFieldValue("VARNAME"),n=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"1",o=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(o))||isNaN(parseInt(l))||isNaN(parseInt(i)))return e+`.setColor(${n}, (${o} << 16) | (${l} << 8) | ${i})\n`;var a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16);return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),e+`.setColor(${n}, 0x${a}${s}${r})\n`},Blockly.Blocks.fader_set_brightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_SET_BRIGHTNESS,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"brightness"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_set_brightness=function(t){return t.getFieldValue("VARNAME")+`.setBrightness(${Blockly.Python.valueToCode(t,"brightness",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.fader_readraw12={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_READRAW12,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_readraw12=function(t){return[t.getFieldValue("VARNAME")+".readraw12()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.fader_readraw16={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_READRAW16,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_readraw16=function(t){return[t.getFieldValue("VARNAME")+".readraw16()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.fader_set_color_pot={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_SET_COLOR_POT,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"lednum"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_set_color_pot=function(t){return t.getFieldValue("VARNAME")+`.setColorPOT(${Blockly.Python.valueToCode(t,"lednum",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.fader_set_bright_pot={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER_SET_BRIGHT_POT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader_set_bright_pot=function(t){return t.getFieldValue("VARNAME")+".setBrightPOT()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"gesture"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.gesture_begin={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GESTURE_BEGIN,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.GESTURE_HUE}},attrs:{keyword:["gesture"]}},Blockly.Python.gesture_begin=function(t){return(t.getFieldValue("NAME")||"")+".begin()\n"},Blockly.Blocks.gesture_get={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GESTURE_GET,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.GESTURE_HUE}},attrs:{keyword:["gesture"]}},Blockly.Python.gesture_get=function(t){return[(t.getFieldValue("NAME")||"")+".get_gesture()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gesture_get_desc={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GESTURE_GET_DESC,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"input_value",name:"value"}],inputsInline:!0,output:null,colour:Blockly.Msg.GESTURE_HUE}},attrs:{keyword:["gesture"]}},Blockly.Python.gesture_get_desc=function(t){return[`${t.getFieldValue("NAME")||""}.gesture_description(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.gesture_set_highrate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GESTURE_SET_HIGHRATE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"highrate",options:[["True","True"],["False","False"]]}],inputsInline:!0,previousStatement:!0,nextStatement:!0,colour:Blockly.Msg.GESTURE_HUE}},attrs:{keyword:["gesture"]}},Blockly.Python.gesture_set_highrate=function(t){return`${t.getFieldValue("NAME")||""}.set_gesture_highrate(${t.getFieldValue("highrate")})\n`};let o=[["None","GestureNone"],["Right","GestureRight"],["Left","GestureLeft"],["Up","GestureUp"],["Down","GestureDown"],["Forward","GestureForward"],["Backward","GestureBackward"],["Clockwise","GestureClockwise"],["AntiClockwise","GestureAntiClockwise"],["Wave","GestureWave"],["WaveSlowlyDisorder","GestureWaveSlowlyDisorder"],["WaveSlowlyLeftRight","GestureWaveSlowlyLeftRight"],["WaveSlowlyUpDown","GestureWaveSlowlyUpDown"],["WaveSlowlyForwardBackward","GestureWaveSlowlyForwardBackward"]];Blockly.Blocks.gesture_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GESTURE_STATUS,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"status",options:o}],inputsInline:!0,output:null,colour:Blockly.Msg.GESTURE_HUE}},attrs:{keyword:["gesture"]}},Blockly.Python.gesture_status=function(t){return[`${t.getFieldValue("NAME")||""}.${t.getFieldValue("status")}`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"mqtt"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_mqtt_start={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_START,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_start=function(t){return t.getFieldValue("VARNAME")+".MqttStart()\n"},Blockly.Blocks.unit_mqtt_stop={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_STOP,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_stop=function(t){return t.getFieldValue("VARNAME")+".MqttStop()\n"},Blockly.Blocks.unit_mqtt_is_lan_connect={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_IS_LAN_CONNECT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_is_lan_connect=function(t){return[t.getFieldValue("VARNAME")+".isConnectLAN()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mqtt_save_param={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_SAVE_PARAM,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_save_param=function(t){return[t.getFieldValue("VARNAME")+".saveParam()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mqtt_config={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_CONFIG,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"server",align:"RIGHT"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"user",align:"RIGHT"},{type:"input_value",name:"password",align:"RIGHT"},{type:"input_value",name:"keepalive",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_config=function(t){return t.getFieldValue("VARNAME")+`.configMQTT(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"user",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"password",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||"0"},)\n`},Blockly.Blocks.unit_mqtt_is_mqtt_connect={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_IS_MQTT_CONNECT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_is_mqtt_connect=function(t){return[t.getFieldValue("VARNAME")+".isConnectMQTT()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mqtt_subscribe={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_SUBSCRIBE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"number"},{type:"input_value",name:"topic"},{type:"input_value",name:"quality"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_subscribe=function(t){return[t.getFieldValue("VARNAME")+`.subscribe(${Blockly.Python.valueToCode(t,"number",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_FUNCTION_CALL)||""}, unit_mqtt_cb, ${Blockly.Python.valueToCode(t,"quality",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mqtt_publish={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_PUBLISH,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"topic"},{type:"input_value",name:"message"},{type:"input_value",name:"quality"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_publish=function(t){return t.getFieldValue("VARNAME")+`.publish(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"message",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"quality",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_mqtt_sub_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_MQTT_SUB_CB,args0:[{type:"input_value",name:"topic",check:"null"},{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_sub_cb=function(t){var e=Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_NONE)||"_",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"";let o=`def unit_mqtt_cb(mq_topic, mq_payload):\n  # global params\n  ${e} = mq_topic\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = mq_payload\n${n}  pass\n`;return Blockly.defineGlobal().length>0&&(o=o.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),o},Blockly.Blocks.unit_mqtt_receive={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_RECEIVE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"timeout"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_receive=function(t){return[t.getFieldValue("VARNAME")+`.receive_mqtt_message(${Blockly.Python.valueToCode(t,"timeout",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mqtt_cb_loop={init:function(){this.jsonInit(this._weighzero())},_weighzero:function(){return{message0:Blockly.Msg.UNIT_MQTT_CB_LOOP,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_MQTT_HUE,tool:[]}},attrs:{keyword:["mqtt"]}},Blockly.Python.unit_mqtt_cb_loop=function(t){return t.getFieldValue("VARNAME")+".Mqtt_cb_Loop()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"rtc"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_rtc_set_date_time={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.UNIT_RTC_SET_DATE_TIME,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"YEAR",align:"RIGHT"},{type:"input_value",name:"MONTH",align:"RIGHT"},{type:"input_value",name:"DAY",align:"RIGHT"},{type:"input_value",name:"WEEKDAY",align:"RIGHT"},{type:"input_value",name:"HOUR",align:"RIGHT"},{type:"input_value",name:"MINUTE",align:"RIGHT"},{type:"input_value",name:"SECOND",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_RTC_HUE,tool:["year: 0 ~ 99","month: 1 ~ 12","date: 1 ~ 31","weekday: 1 ~ 7","hour: 0 ~ 23","minute: 0 ~59","second: 0 ~59"]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_set_date_time=function(t){return`${t.getFieldValue("VARNAME")}.set_date_time(${Blockly.Python.valueToCode(t,"YEAR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"MONTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"DAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"WEEKDAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"HOUR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"MINUTE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"SECOND",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_rtc_get_date_time={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RTC_GET_DATE_TIME,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_get_date_time=function(t){return[t.getFieldValue("VARNAME")+".get_date_time()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rtc_set_alarm={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_SET_ALARM,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"date"},{type:"input_value",name:"hours"},{type:"input_value",name:"minutes"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_set_alarm=function(t){return`${t.getFieldValue("VARNAME")}.set_alarm_clock(${Blockly.Python.valueToCode(t,"date",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"hours",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"minutes",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_rtc_check_alarm_flag={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RTC_CHECK_ALARM_FLAG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_check_alarm_flag=function(t){return[t.getFieldValue("VARNAME")+".check_alarm_flag()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rtc_clear_alarm={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_CLEAR_ALARM,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_clear_alarm=function(t){return t.getFieldValue("VARNAME")+".clear_alarm_flag()\n"},Blockly.Blocks.unit_rtc_disable_alarm={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_DISABLE_ALARM,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_disable_alarm=function(t){return t.getFieldValue("VARNAME")+".disable_alarm()\n"},Blockly.Blocks.unit_rtc_set_timer_mode={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_SET_TIMER_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"value"},{type:"field_dropdown",name:"mode",options:[["seconds","0"],["minutes","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_set_timer_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_timer_mode(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_rtc_get_timer_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RTC_GET_TIMER_VALUE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_get_timer_value=function(t){return[t.getFieldValue("VARNAME")+".get_timer_value()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rtc_check_timer_flag={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RTC_CHECK_TIMER_FLAG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_check_timer_flag=function(t){return[t.getFieldValue("VARNAME")+".check_timer_flag()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rtc_disable_timer={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_DISABLE_TIMER,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_disable_timer=function(t){return t.getFieldValue("VARNAME")+".disable_timer()\n"},Blockly.Blocks.unit_rtc_pause_timer={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_PAUSE_TIMER,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_pause_timer=function(t){return t.getFieldValue("VARNAME")+".pause_timer()\n"},Blockly.Blocks.unit_rtc_resume_timer={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_RESUME_TIMER,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_resume_timer=function(t){return t.getFieldValue("VARNAME")+".resume_timer()\n"},Blockly.Blocks.unit_rtc_clear_timer_flag={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.UNIT_RTC_CLEAR_TIMER_FLAG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_RTC_HUE,tool:[]}},attrs:{keyword:["rtc"]}},Blockly.Python.unit_rtc_clear_timer_flag=function(t){return t.getFieldValue("VARNAME")+".clear_timer_flag()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"lcd"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}var i=["uiflow_logo16bitTB.bmp","uiflow_logo16bitTB.bmp"];function a(){var t=[];t.push(i);for(var e=0;e<Blockly.ResImages.length;e++)/.pbm/g.test(Blockly.ResImages[e])&&t.push([Blockly.ResImages[e],Blockly.ResImages[e]]);return t}Blockly.Blocks.unit_lcd_init_display={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_INIT_DISPLAY,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"width"},{type:"input_value",name:"height"},{type:"input_value",name:"stride"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_init_display=function(t){return`${t.getFieldValue("NAME")||""}.init_display(${Blockly.Python.valueToCode(t,"width",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"height",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"stride",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_lcd_image={init:function(){this.jsonInit(this._init()),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,20,20,"*",this.addFile.bind(this,"bmp")))},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_IMAGE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"IMAGE",options:a},{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},addFile:o.addFileFun,attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_image=function(t){var e=t.getFieldValue("NAME")||"",n=t.getFieldValue("IMAGE");return`${e}.image(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, "/flash/img/${n}")\n`},Blockly.Blocks.unit_lcd_text={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_TEXT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"text"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_text=function(t){return`${t.getFieldValue("NAME")||""}.text(${Blockly.Python.valueToCode(t,"text",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_fill={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_FILL,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_fill=function(t){return`${t.getFieldValue("NAME")||""}.fill(${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_pixel={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_PIXEL,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_pixel=function(t){return`${t.getFieldValue("NAME")||""}.pixel(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_hline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_HLINE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_hline=function(t){return`${t.getFieldValue("NAME")||""}.hline(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_vline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_VLINE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"H"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_vline=function(t){return`${t.getFieldValue("NAME")||""}.vline(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_LINE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_line=function(t){return`${t.getFieldValue("NAME")||""}.line(${Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_fill_rect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_FILL_RECT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"input_value",name:"H"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_fill_rect=function(t){return`${t.getFieldValue("NAME")||""}.fill_rect(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_rect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_RECT,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"W"},{type:"input_value",name:"H"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_rect=function(t){return`${t.getFieldValue("NAME")||""}.rect(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"W",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"H",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_lcd_rotate={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_ROTATE,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"dir",options:[["0","0"],["90","1"],["180","2"],["270","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_rotate=function(t){return`${t.getFieldValue("NAME")||""}.rotate(${t.getFieldValue("dir")||""})\n`},Blockly.Blocks.unit_lcd_flip={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_FLIP,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"field_dropdown",name:"dir",options:[["FLIP1","4"],["FLIP2","5"],["FLIP3","6"],["FLIP4","7"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_flip=function(t){return`${t.getFieldValue("NAME")||""}.rotate(${t.getFieldValue("dir")||""})\n`},Blockly.Blocks.unit_lcd_brightness={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_BRIGHTNESS,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"bright"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_brightness=function(t){return`${t.getFieldValue("NAME")||""}.brightness(${Blockly.Python.valueToCode(t,"bright",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_lcd_sleep={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_SLEEP,args0:[{type:"field_dropdown",name:"NAME",options:l},{type:"input_value",name:"sleep"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_sleep=function(t){return`${t.getFieldValue("NAME")||""}.sleep(${Blockly.Python.valueToCode(t,"sleep",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_lcd_show_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_LCD_SHOW_ON,args0:[{type:"field_dropdown",name:"NAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_LCD_HUE,tool:[]}},attrs:{keyword:["lcd"]}},Blockly.Python.unit_lcd_show_on=function(t){return(t.getFieldValue("NAME")||"")+".show_on()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"rotary"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_rotary_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.UNIT_ROTARY_SET_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["AB mode","1"],["Pulse mode","2"]]}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ROTARY_HUE,tool:[]}},attrs:{keyword:["rotary"]}},Blockly.Python.unit_rotary_set_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_Count_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_rotary_get_ab_count={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ROTARY_GET_AB_COUNT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ROTARY_HUE,tool:[]}},attrs:{keyword:["rotary"]}},Blockly.Python.unit_rotary_get_ab_count=function(t){return[t.getFieldValue("VARNAME")+".get_AB_count()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rotary_get_pulse_count={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ROTARY_GET_PULSE_COUNT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ROTARY_HUE,tool:[]}},attrs:{keyword:["rotary"]}},Blockly.Python.unit_rotary_get_pulse_count=function(t){return[t.getFieldValue("VARNAME")+".get_Pulse_count()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rotary_get_btn_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ROTARY_GET_BTN_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ROTARY_HUE,tool:[]}},attrs:{keyword:["rotary"]}},Blockly.Python.unit_rotary_get_btn_status=function(t){return[t.getFieldValue("VARNAME")+".get_Button_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_rotary_set_rgb_color={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.UNIT_ROTARY_SET_RGB_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ROTARY_HUE,tool:[]}},attrs:{keyword:["rotary"]}},Blockly.Python.unit_rotary_set_rgb_color=function(t){return`${t.getFieldValue("VARNAME")}.set_LED_RGB(${t.getFieldValue("COLOR").replace("#","0x")})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ID"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_id_wakeup={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_WAKEUP,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_wakeup=function(t){return[t.getFieldValue("VARNAME")+".wakeup()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_get_info={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_GET_INFO,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_get_info=function(t){return[t.getFieldValue("VARNAME")+".get_info()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_read_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_READ_CONFIG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_read_config=function(t){return[t.getFieldValue("VARNAME")+".readConfigZone()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_serial_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_SERIAL_NUMBER,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_serial_number=function(t){return[t.getFieldValue("VARNAME")+".serialNumber",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_revision_number={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_REVISION_NUMBER,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_revision_number=function(t){return[t.getFieldValue("VARNAME")+".revisionNumber",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_config_lock_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_CONFIG_LOCK_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_config_lock_status=function(t){return[t.getFieldValue("VARNAME")+".configLockStatus",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_data_otp_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_DATA_OTP_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_data_otp_status=function(t){return[t.getFieldValue("VARNAME")+".dataOTPLockStatus",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_slot_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_SLOT_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_slot_status=function(t){return[t.getFieldValue("VARNAME")+".slot0LockStatus",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_generate_public_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_GENERATE_PUBLIC_KEY,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"slot"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_generate_public_key=function(t){return[t.getFieldValue("VARNAME")+`.generatePublicKey(${Blockly.Python.valueToCode(t,"slot",Blockly.Python.ORDER_FUNCTION_CALL)||"0x0000"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_write_config_zone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_WRITE_CONFIG_ZONE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_write_config_zone=function(t){return[t.getFieldValue("VARNAME")+".writeConfigZone()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_lock_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_LOCK_CONFIG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_lock_config=function(t){return[t.getFieldValue("VARNAME")+".lock_config()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_create_keypair={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_CREATE_KEYPAIR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"slot"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_create_keypair=function(t){return[t.getFieldValue("VARNAME")+`.createNewKeyPair(${Blockly.Python.valueToCode(t,"slot",Blockly.Python.ORDER_FUNCTION_CALL)||"0x0000"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_lock_data_otp={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_LOCK_DATA_OTP,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_lock_data_otp=function(t){return[t.getFieldValue("VARNAME")+".lockDataAndOTP()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_lock_data_slot={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_LOCK_DATA_SLOT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_lock_data_slot=function(t){return[t.getFieldValue("VARNAME")+".lockDataSlot0()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_create_signature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_CREATE_SIGNATURE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"data"},{type:"input_value",name:"slot"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_create_signature=function(t){return[t.getFieldValue("VARNAME")+`.createSignature(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"slot",Blockly.Python.ORDER_FUNCTION_CALL)||"0x0000"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_verify_signature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_VERIFY_SIGNATURE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"message"},{type:"input_value",name:"signature"},{type:"input_value",name:"publicKey"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_verify_signature=function(t){return[t.getFieldValue("VARNAME")+`.verifySignature(${Blockly.Python.valueToCode(t,"message",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"signature",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"publicKey",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_public_Key_64Bytes={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_PUBLIC_KEY_64BYTES,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_public_Key_64Bytes=function(t){return[t.getFieldValue("VARNAME")+".publicKey64Bytes",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_update_random_32bytes={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_UPDATE_RANDOM_32BYTES,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_update_random_32bytes=function(t){return[t.getFieldValue("VARNAME")+".updateRandom32Bytes()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_config_zone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_CONFIG_ZONE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_config_zone=function(t){return[t.getFieldValue("VARNAME")+".configZone",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_key_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_KEY_CONFIG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_key_config=function(t){return[t.getFieldValue("VARNAME")+".KeyConfig",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_slot_config={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_SLOT_CONFIG,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_slot_config=function(t){return[t.getFieldValue("VARNAME")+".SlotConfig",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_signature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_SIGNATURE,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_signature=function(t){return[t.getFieldValue("VARNAME")+".signature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_sha256={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_SHA256,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"message"},{type:"input_value",name:"length"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_sha256=function(t){return[t.getFieldValue("VARNAME")+`.sha256(${Blockly.Python.valueToCode(t,"message",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"length",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_id_random_min_max={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ID_RANDOM_MIN_MAX,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"min"},{type:"input_value",name:"max"}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ID_HUE,tool:[]}},attrs:{keyword:["id"]}},Blockly.Python.unit_id_random_min_max=function(t){return[t.getFieldValue("VARNAME")+`.random_min_max(${Blockly.Python.valueToCode(t,"min",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"max",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"joystick_led"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.joystickled_x_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_X_RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_x_raw=function(t){return[t.getFieldValue("VARNAME")+".get_x_raw()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystickled_y_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_Y_RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_y_raw=function(t){return[t.getFieldValue("VARNAME")+".get_y_raw()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystickled_x={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_X,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_x=function(t){return[t.getFieldValue("VARNAME")+".get_x()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystickled_y={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_Y,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_y=function(t){return[t.getFieldValue("VARNAME")+".get_y()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystickled_btn_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_BTN_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_btn_status=function(t){return[t.getFieldValue("VARNAME")+".get_Button_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.joystickled_led_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_LED_COLOR,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_led_color=function(t){return`${t.getFieldValue("NAME")||""}.set_LED_RGB(${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.joystickled_calibration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.JOYSTICKLED_CALIBRATION,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"data",options:[["Normal","0"],["Findmid","1"],["Findmax","2"],["Write flash","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_JOYSTICKLED_HUE,tool:[]}},attrs:{keyword:["joystick"]}},Blockly.Python.joystickled_calibration=function(t){return`${t.getFieldValue("NAME")||""}.set_calibration(${t.getFieldValue("data")||""})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"encoder"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_encoder_count={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_COUNT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_count=function(t){return[t.getFieldValue("VARNAME")+".get_encoder_count()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_encoder_btn_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_BTN_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_btn_status=function(t){return[t.getFieldValue("VARNAME")+".get_button_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_encoder_set_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_SET_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_set_color=function(t){return`${t.getFieldValue("VARNAME")}.set_LED_RGB(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${(t.getFieldValue("COLOR")||"#ff0000").replace("#","0x")})\n`},Blockly.Blocks.unit_encoder_set_rgb={init:function(){this.jsonInit(this._rgbSetAllRgb())},_rgbSetAllRgb:function(){return{message0:Blockly.Msg.UNIT_ENCODER_SET_RGB,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:["R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_set_rgb=function(t){var e=t.getFieldValue("VARNAME"),n=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",i=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(o))||isNaN(parseInt(l))||isNaN(parseInt(i)))return`${e}.set_LED_RGB(${n}, (${o} << 16) | (${l} << 8) | ${i})\n`;var a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16),r=Math.floor(Math.abs(parseInt(i))%256).toString(16);return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),`${e}.set_LED_RGB(${n}, 0x${a}${s}${r})\n`},Blockly.Blocks.unit_encoder_set_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_SET_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["AB","0"],["Pulse","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_set_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_encoder_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_encoder_set_count={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_SET_COUNT,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"count"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_set_count=function(t){return`${t.getFieldValue("VARNAME")}.set_encoder_count(${Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_encoder_reset_count={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_ENCODER_RESET_COUNT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_ENCODER_HUE,tool:[]}},attrs:{keyword:["encoder"]}},Blockly.Python.unit_encoder_reset_count=function(t){return t.getFieldValue("VARNAME")+".reset_count()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"fader8"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.fader8_adc_16raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_ADC_16RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x00"],["Channel2","0x02"],["Channel3","0x04"],["Channel4","0x06"],["Channel5","0x08"],["Channel6","0x0A"],["Channel7","0x0C"],["Channel8","0x0E"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.FADER8_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader8_adc_16raw=function(t){return[t.getFieldValue("VARNAME")+`.get_adc16_raw(${t.getFieldValue("channel")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.fader8_adc_8raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_ADC_8RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x10"],["Channel2","0x11"],["Channel3","0x12"],["Channel4","0x13"],["Channel5","0x14"],["Channel6","0x15"],["Channel7","0x16"],["Channel8","0x17"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.FADER8_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader8_adc_8raw=function(t){return[t.getFieldValue("VARNAME")+`.get_adc8_raw(${t.getFieldValue("channel")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.fader8_switch_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_SWITCH_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.FADER8_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader8_switch_status=function(t){return[t.getFieldValue("VARNAME")+".get_button_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.fader8_led_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_LED_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x30"],["Channel2","0x34"],["Channel3","0x38"],["Channel4","0x3C"],["Channel5","0x40"],["Channel6","0x44"],["Channel7","0x48"],["Channel8","0x4C"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.FADER8_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader8_led_color=function(t){return t.getFieldValue("VARNAME")+`.set_LED_RGB32(${t.getFieldValue("channel")}, ${t.getFieldValue("COLOR").replace("#","0x")})\n`},Blockly.Blocks.fader8_single_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_SINGLE_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"RGB",options:[["R","0"],["G","1"],["B","2"]]},{type:"field_dropdown",name:"channel",options:[["Channel1","0x30"],["Channel2","0x34"],["Channel3","0x38"],["Channel4","0x3C"],["Channel5","0x40"],["Channel6","0x44"],["Channel7","0x48"],["Channel8","0x4C"]]},{type:"input_value",name:"color"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.FADER8_HUE,tool:[]}},attrs:{keyword:["fader"]}},Blockly.Python.fader8_single_color=function(t){return t.getFieldValue("VARNAME")+`.set_LED_RGB8(${t.getFieldValue("channel")}, ${t.getFieldValue("RGB")}, ${Blockly.Python.valueToCode(t,"color",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"mic"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_mic_get_analog={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_MIC_GET_ANALOG,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.MIC_HUE}},attrs:{keyword:["mic"]}},Blockly.Python.unit_mic_get_analog=function(t){return[(t.getFieldValue("NAME")||"")+".analogValue()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_mic_get_digital={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_MIC_GET_DIGITAL,args0:[{type:"field_dropdown",name:"NAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.MIC_HUE}},attrs:{keyword:["mic"]}},Blockly.Python.unit_mic_get_digital=function(t){return[(t.getFieldValue("NAME")||"")+".digitalValue()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"dlight"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_dlight_get_lux={init:function(){this.jsonInit(this._eartharead())},_eartharead:function(){return{message0:Blockly.Msg.UNIT_DLIGHT_GET_LUX,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_DLIGHT_HUE,tool:[]}},attrs:{keyword:["dlight"]}},Blockly.Python.unit_dlight_get_lux=function(t){return[t.getFieldValue("VARNAME")+".get_lux()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_dlight_set_state_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_DLIGHT_SET_STATE_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["Power Down","0x00"],["Power Up","0x01"],["Reset","0x07"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_DLIGHT_HUE,tool:[]}},attrs:{keyword:["dlight"]}},Blockly.Python.unit_dlight_set_state_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_dlight_set_continous_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_DLIGHT_SET_CONTINOUS_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["H-Res1","0x10"],["H-Res2","0x11"],["L-Res","0x13"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_DLIGHT_HUE,tool:[]}},attrs:{keyword:["dlight"]}},Blockly.Python.unit_dlight_set_continous_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_mode(${t.getFieldValue("mode")})\n`},Blockly.Blocks.unit_dlight_set_one_shot_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_DLIGHT_SET_ONE_SHOT_MODE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"mode",options:[["H-Res1","0x20"],["H-Res2","0x21"],["L-Res","0x23"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_DLIGHT_HUE,tool:[]}},attrs:{keyword:["dlight"]}},Blockly.Python.unit_dlight_set_one_shot_mode=function(t){return`${t.getFieldValue("VARNAME")}.set_mode(${t.getFieldValue("mode")})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"pdm"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_pdm_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_PDM_INIT,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"field_dropdown",name:"sample",options:[["32Bit","SAMPLE_32BIT"],["24Bit","SAMPLE_24BIT"],["16Bit","SAMPLE_16BIT"]]},{type:"input_dummy"},{type:"field_dropdown",name:"channel",options:[["Only Left","ONLY_LEFT"],["Only Right","ONLY_RIGHT"],["All Left","ALL_LEFT"],["All Right","ALL_RIGHT"],["Right Left","RIGHT_LEFT"]]},{type:"input_dummy"},{type:"input_value",name:"rate"},{type:"input_value",name:"count"},{type:"input_value",name:"length"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UNIT_PDM_HUE,tool:[]}},attrs:{keyword:["dpm"]}},Blockly.Python.unit_pdm_init=function(t){var e=t.getFieldValue("VARNAME");return`${e}.mic_setup(${e}.${t.getFieldValue("sample")}, ${e}.${t.getFieldValue("channel")}, ${Blockly.Python.valueToCode(t,"rate",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"length",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.unit_pdm_record_to_file={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_PDM_RECORD_TO_FILE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"seconds"},{type:"input_value",name:"file"},{type:"field_dropdown",name:"format",options:[["Mono","MONO"],["Stereo","STEREO"]]}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UNIT_PDM_HUE,tool:[]}},attrs:{keyword:["dpm"]}},Blockly.Python.unit_pdm_record_to_file=function(t){var e=t.getFieldValue("VARNAME"),n=t.getFieldValue("format");return`${e}.record2file(${Blockly.Python.valueToCode(t,"seconds",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"file",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${e}.${n})\n`},Blockly.Blocks.unit_pdm_deinit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_PDM_DEINIT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.UNIT_PDM_HUE,tool:[]}},attrs:{keyword:["dpm"]}},Blockly.Python.unit_pdm_deinit=function(t){return t.getFieldValue("VARNAME")+".deinit()\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"ssr"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_ssr_control={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.UNIT_SSR_CONTROL,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"control",options:[["ON","1"],["OFF","0"]]}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_SSR_HUE,tool:[]}},attrs:{keyword:["ssr"]}},Blockly.Python.unit_ssr_control=function(t){return`${t.getFieldValue("VARNAME")}.ssr_control(${t.getFieldValue("control")})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"relay2"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_relay2_control={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"block_type",message0:Blockly.Msg.UNIT_RELAY2_CONTROL,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"field_dropdown",name:"relay",options:[["One","1"],["Two","2"],["All","3"]]},{type:"input_dummy"},{type:"field_dropdown",name:"control",options:[["ON","1"],["OFF","0"]]}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_RELAY2_HUE,tool:[]}},attrs:{keyword:["relay","relay2"]}},Blockly.Python.unit_relay2_control=function(t){return`${t.getFieldValue("VARNAME")}.set_value(${t.getFieldValue("relay")}, ${t.getFieldValue("control")})\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Units.length;e++)"poesp32"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.unit_poesp32_check_uart={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_CHECK_UART,args0:[{type:"field_dropdown",name:"VARNAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_check_uart=function(t){return[(t.getFieldValue("VARNAME")||"")+".check_uart()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_check_eth={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_CHECK_ETH,args0:[{type:"field_dropdown",name:"VARNAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_check_eth=function(t){return[(t.getFieldValue("VARNAME")||"")+".isConnect_ETH()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_create_tcp={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_CREATE_TCP,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"ip"},{type:"input_value",name:"port"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_create_tcp=function(t){return[(t.getFieldValue("VARNAME")||"")+`.create_tcp_client(${Blockly.Python.valueToCode(t,"ip",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_send_tcp_packet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_SEND_TCP_PACKET,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"packet"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_send_tcp_packet=function(t){return[(t.getFieldValue("VARNAME")||"")+`.send_tcp_packet(${Blockly.Python.valueToCode(t,"packet",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_receive_tcp_packet={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_RECEIVE_TCP_PACKET,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"field_dropdown",name:"VARNAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_receive_tcp_packet=function(t){return(t.getFieldValue("VARNAME")||"")+`.receive_tcp_packet(poesp32_${this.cbId}cb)\n`},Blockly.Blocks.unit_poesp32_receive_tcp_packet_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_RECEIVE_TCP_PACKET_CB,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"value",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},mutationToDom:Blockly.Blocks.unit_poesp32_receive_tcp_packet.mutationToDom,domToMutation:Blockly.Blocks.unit_poesp32_receive_tcp_packet.domToMutation,attrs:{keyword:["poesp32","tcp"]}},Blockly.Python.unit_poesp32_receive_tcp_packet_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def poesp32_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"_"} = value\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),l},Blockly.Blocks.unit_poesp32_mqtt_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_INIT,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_dummy"},{type:"input_value",name:"server",align:"RIGHT"},{type:"input_value",name:"port",align:"RIGHT"},{type:"input_value",name:"client_id",align:"RIGHT"},{type:"input_value",name:"username",align:"RIGHT"},{type:"input_value",name:"passwd",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_init=function(t){return`${t.getFieldValue("VARNAME")||""}.create_mqtt_client(${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"client_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"username",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"passwd",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.unit_poesp32_mqtt_publish={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_PUBLISH,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"topic"},{type:"input_value",name:"msg"},{type:"input_value",name:"qos"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:["Mqtt publish msg to topic","topic: string","msg: string"]}},attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_publish=function(t){return[(t.getFieldValue("VARNAME")||"")+`.publish_mqtt_msg(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_mqtt_subscribe={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_SUBSCRIBE,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"topic"},{type:"input_value",name:"qos"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_subscribe=function(t){return[(t.getFieldValue("VARNAME")||"")+`.subscribe_mqtt(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"qos",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_mqtt_unsubscribe={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_UNSUBSCRIBE,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"topic"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_unsubscribe=function(t){return[(t.getFieldValue("VARNAME")||"")+`.unsubscribe_mqtt(${Blockly.Python.valueToCode(t,"topic",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.unit_poesp32_mqtt_receive={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_RECEIVE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"field_dropdown",name:"VARNAME",options:l}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_receive=function(t){return`${t.getFieldValue("VARNAME")||""}.receive_mqtt_msg(poesp32_${this.cbId}cb)\n`},Blockly.Blocks.unit_poesp32_mqtt_receive_cb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_POESP32_MQTT_RECEIVE_CB,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"value",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},mutationToDom:Blockly.Blocks.unit_poesp32_mqtt_receive.mutationToDom,domToMutation:Blockly.Blocks.unit_poesp32_mqtt_receive.domToMutation,attrs:{keyword:["poesp32","mqtt"]}},Blockly.Python.unit_poesp32_mqtt_receive_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,"");let l=`def poesp32_${o.getCbIdByEventId(e,n)}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_NONE)||"_"} = value\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),l},Blockly.Blocks.unit_poesp32_http_client={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.UNIT_POESP32_HTTP_CLIENT,args0:[{type:"field_dropdown",name:"VARNAME",options:l},{type:"input_value",name:"url"},{type:"field_dropdown",name:"method",options:[["HEAD","1"],["GET","2"],["POST","3"],["PUT","4"],["DELETE","5"]]},{type:"field_dropdown",name:"type",options:[["JSON","1"],["FORM","2"],["TEXT","3"]]},{type:"input_value",name:"payload"}],output:null,inputsInline:!0,colour:Blockly.Msg.UNIT_POESP32_HUE,tool:[]}},attrs:{keyword:["poesp32","http"]}},Blockly.Python.unit_poesp32_http_client=function(t){return[(t.getFieldValue("VARNAME")||"")+`.create_http_client(${Blockly.Python.valueToCode(t,"url",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("method")||""}, ${t.getFieldValue("type")||""}, ${Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_FUNCTION_CALL)||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"KMeter"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.kmeter_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.KMETER_GET_TEMPERATURE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"type",options:[["Thermocouple","1"],["Internal Temp","2"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_KMETER_HUE}},attrs:{keyword:["kmeter"]}},Blockly.Python.kmeter_get_temperature=function(t){return[`${t.getFieldValue("NAME")||""}.get_kmeter(${t.getFieldValue("type")||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"sonic_io"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.sonic_io_get_distance={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SONIC_IO_GET_DISTANCE,args0:[{type:"field_dropdown",name:"NAME",options:n},{type:"field_dropdown",name:"type",options:[["mm","1"],["cm","2"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_SONIC_IO_HUE}},attrs:{keyword:["sonic"]}},Blockly.Python.sonic_io_get_distance=function(t){return[`${t.getFieldValue("NAME")||""}.get_distance(${t.getFieldValue("type")||""})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Units.length;e++)"angle8"===Blockly.Units[e].type&&t.push([Blockly.Units[e].name,Blockly.Units[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.angle8_adc_16raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_ADC_16RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x00"],["Channel2","0x02"],["Channel3","0x04"],["Channel4","0x06"],["Channel5","0x08"],["Channel6","0x0A"],["Channel7","0x0C"],["Channel8","0x0E"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ANGLE8_HUE,tool:[]}},attrs:{keyword:["angle"]}},Blockly.Python.angle8_adc_16raw=function(t){return[t.getFieldValue("VARNAME")+`.get_adc16_raw(${t.getFieldValue("channel")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.angle8_adc_8raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_ADC_8RAW,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x10"],["Channel2","0x11"],["Channel3","0x12"],["Channel4","0x13"],["Channel5","0x14"],["Channel6","0x15"],["Channel7","0x16"],["Channel8","0x17"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ANGLE8_HUE,tool:[]}},attrs:{keyword:["angle"]}},Blockly.Python.angle8_adc_8raw=function(t){return[t.getFieldValue("VARNAME")+`.get_adc8_raw(${t.getFieldValue("channel")})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.angle8_switch_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_SWITCH_STATUS,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.UNIT_ANGLE8_HUE,tool:[]}},attrs:{keyword:["angle"]}},Blockly.Python.angle8_switch_status=function(t){return[t.getFieldValue("VARNAME")+".get_button_status()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.angle8_led_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_LED_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x30"],["Channel2","0x34"],["Channel3","0x38"],["Channel4","0x3C"],["Channel5","0x40"],["Channel6","0x44"],["Channel7","0x48"],["Channel8","0x4C"],["Channel9","0x50"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ANGLE8_HUE,tool:[]}},attrs:{keyword:["angle"]}},Blockly.Python.angle8_led_color=function(t){return t.getFieldValue("VARNAME")+`.set_LED_RGB32(${t.getFieldValue("channel")}, ${t.getFieldValue("COLOR").replace("#","0x")})\n`},Blockly.Blocks.angle8_single_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FADER8_SINGLE_COLOR,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"RGB",options:[["R","0"],["G","1"],["B","2"]]},{type:"field_dropdown",name:"channel",options:[["Channel1","0x30"],["Channel2","0x34"],["Channel3","0x38"],["Channel4","0x3C"],["Channel5","0x40"],["Channel6","0x44"],["Channel7","0x48"],["Channel8","0x4C"],["Channel9","0x50"]]},{type:"input_value",name:"color"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.UNIT_ANGLE8_HUE,tool:[]}},attrs:{keyword:["angle"]}},Blockly.Python.angle8_single_color=function(t){return t.getFieldValue("VARNAME")+`.set_LED_RGB8(${t.getFieldValue("channel")}, ${t.getFieldValue("RGB")}, ${Blockly.Python.valueToCode(t,"color",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){Blockly.Blocks.faces_readStr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_CALC_READSTR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_CALCULATOR_HUE,tool:["press key will be save to str, return str"]}},attrs:{keyword:["calculator"]}},Blockly.Python.faces_readStr=function(){return["faces_calc.readStr()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_readKey={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_CALC_READKEY,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_CALCULATOR_HUE,tool:["return press key ascii int value"]}},attrs:{keyword:["calculator"]}},Blockly.Python.faces_readKey=function(){return["faces_calc.readKey()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_clearStr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_CALC_CLEARSTR,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_CALCULATOR_HUE,tool:["clear read str to ''"]}},attrs:{keyword:["calculator"]}},Blockly.Python.faces_clearStr=function(t){return"faces_calc.clearStr()\n"},Blockly.Blocks.faces_deleteStrLast={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_CALC_DELETESTRLAST,previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_CALCULATOR_HUE,tool:["delete str last byte"]}},attrs:{keyword:["calculator"]}},Blockly.Python.faces_deleteStrLast=function(t){return"faces_calc.deleteStrLast()\n"},Blockly.Blocks.faces_isNewKeyPress={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_CALC_ISNEWKEYPRESS,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_CALCULATOR_HUE,tool:["if key press turn True"]}},attrs:{keyword:["calculator"]}},Blockly.Python.faces_isNewKeyPress=function(){return["faces_calc.isNewKeyPress()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.faces_encode_setLed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_SETLED,args0:[{type:"input_value",name:"num"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["pos: 0 ~ 11","color: 0x000000 ~ 0xffffff (rgb888)"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_setLed=function(t){var e=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=t.getFieldValue("COLOR")||"#ff0000";return`faces_encode.setLed(${e}, ${n=n.replace("#","0x")})\n`},Blockly.Blocks.faces_encode_setLed_rgb={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_SETLED_RGB,args0:[{type:"input_value",name:"num"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["pos: 0 ~ 11","R: 0 ~ 255","G: 0 ~ 255","B: 0 ~ 255"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_setLed_rgb=function(t){var e=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return`faces_encode.setLed(${e}, (${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),`faces_encode.setLed(${e}, 0x${i}${a}${s})\n`},Blockly.Blocks.faces_encode_clearValue={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_CLEARVALUE,args0:[{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["set encode value to zero"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_clearValue=function(){return"faces_encode.clearValue()\n"},Blockly.Blocks.faces_encode_getValue={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_GETVALUE,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["return encode value"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_getValue=function(){return["faces_encode.getValue()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_encode_getDir={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_GETDIR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["get encoder dir","return: 0->Clockwise, 1->Counterclockwise"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_getDir=function(){return["faces_encode.getDir()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_encode_getPress={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_ENCODE_GETPRESS,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_ENCODE_HUE,tool:["get encode press status","return: 1->not press. 0->press"]}},attrs:{keyword:["encoder"]}},Blockly.Python.faces_encode_getPress=function(){return["faces_encode.getPress()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.faces_finger_read={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_READ,args0:[{type:"input_dummy"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Callback fun","access: finger access","user_id: finger user_id"]}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_read=function(t){var e="faces_finger";let n=`def ${e}_cb(user_id, access):\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+=`${e}.readFingerCb(callback=${e}_cb)\n`,n},Blockly.Blocks.faces_finger_add_user={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_ADD_USER,args0:[{type:"input_value",name:"ID"},{type:"field_dropdown",name:"ACCESS",options:[["1","1"],["2","2"],["3","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Add user","user_id: 0~255",'finish: unit_finger.state -> "Add user finish"','fail: unit_finger.state -> "Add user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_add_user=function(t){return"faces_finger.addUser("+(Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"")+", "+(t.getFieldValue("ACCESS")||"")+")\n"},Blockly.Blocks.faces_finger_get_id={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_GET_ID,output:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_get_id=function(t){return["user_id",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_finger_get_access={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_GET_ACCESS,output:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_get_access=function(t){return["access",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_finger_remove_user={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_REMOVE_USER,args0:[{type:"input_value",name:"ID"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Remove finger data","user_id: 0~255",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_remove_user=function(t){return"faces_finger.removeUser("+(Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"")+")\n"},Blockly.Blocks.faces_finger_removeAll={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_REMOVEALL,args0:[{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Remove All finger data",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_removeAll=function(t){return"faces_finger.removeAllUser()\n"},Blockly.Blocks.faces_finger_get_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.FACES_FINGER_GET_STATE,args0:[{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_FINGER_HUE,tool:["Return finger state"]}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_get_state=function(t){return["faces_finger.state",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_finger_getUnknown={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_FINGER_GET_UNKNOWN,args0:[{type:"input_dummy"}],inputsInline:!0,message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.FACES_FINGER_HUE}},attrs:{keyword:["finger"]}},Blockly.Python.faces_finger_getUnknown=function(t){var e="faces_finger",n="def "+e+"_unknownCb():\n\t# global params\n"+(Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass\n";return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+(e+".getUnknownCb(")+e+"_unknownCb)"}},function(t,e){var n=[[["\u2191","0"],["\u2193","1"],["\u2190","2"],["\u2192","3"],["A","4"],["B","5"],["SELECT","6"],["START","7"]],[["pressed","Pressed"],["released","Released"]]];Blockly.Blocks.faces_gameboy_getStatus={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_GAMEBOY_GETSTATUS,args0:[{type:"field_dropdown",name:"key",options:n[0]}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_GAMEBOY_HUE,tool:["note: \u2191->0, \u2193->1, \u2190->2,  \u2192->3, A->4, B->5, SELECT->6, START->7","num: 0~7","if press return False else return True"]}},attrs:{keyword:["gameboy"]}},Blockly.Python.faces_gameboy_getStatus=function(t){return[`faces_boy.getStatus(${t.getFieldValue("key")||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_gameboy_getPressed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_GAMEBOY_GETPRESSED,args0:[{type:"field_dropdown",name:"key",options:n[0]},{type:"field_dropdown",name:"func",options:n[1]}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_GAMEBOY_HUE,tool:["if pressed return True else return False"]}},attrs:{keyword:["gameboy"]}},Blockly.Python.faces_gameboy_getPressed=function(t){var e=t.getFieldValue("key")||"0";return[`faces_boy.get${t.getFieldValue("func")||"0"}(${e})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){var n="faces_joystick";Blockly.Blocks.faces_joystick_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_X,args0:[{type:"input_dummy"},{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["direction value, 0 ~ 1024"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_x=function(t){return[n+".X",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_joystick_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_Y,args0:[{type:"input_dummy"},{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["invert direction value, 0 ~ 1024"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_y=function(t){return[n+".Y",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_joystick_press={init:function(){this.jsonInit(this._joystickpress())},_joystickpress:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_PRESS,args0:[{type:"input_dummy"},{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["num: 0 ~ 3, color: 0x000000 ~ 0xffffff(rgb888)"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_press=function(t){return[n+".Press",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_joystick_invert_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_INVERT_X,args0:[{type:"input_dummy"},{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["direction value, 0 ~ 1024"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_invert_x=function(t){return[n+".InvertX",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_joystick_invert_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_INVERT_Y,args0:[{type:"input_dummy"},{type:"input_dummy"}],output:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["if press, return 1, else 0"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_invert_y=function(t){return[n+".InvertY",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_joystick_setLed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_JOYSTICK_SETLED,args0:[{type:"input_value",name:"num"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.FACES_JOYSTICK_HUE,tool:["num: 0 ~ 3","color: 0x000000 ~ 0xffffff (rgb888)"]}},attrs:{keyword:["joystick"]}},Blockly.Python.faces_joystick_setLed=function(t){var e=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=t.getFieldValue("COLOR")||"#ff0000";return o=o.replace("#","0x"),`${n}.setLed(${e}, ${o})\n`}},function(t,e){var n="faces_keyboard";Blockly.Blocks.faces_keyboard_readStr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_KEYBOARD_READSTR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_KEYBOARD_HUE,tool:["press key will be save to str, return str"]}},attrs:{keyword:["keyboard"]}},Blockly.Python.faces_keyboard_readStr=function(){return[n+".readStr()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_keyboard_clearStr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_KEYBOARD_CLEARSTR,args0:[{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.FACES_KEYBOARD_HUE,tool:["clear read str to ''"]}},attrs:{keyword:["keyboard"]}},Blockly.Python.faces_keyboard_clearStr=function(){return n+".clearStr()\n"},Blockly.Blocks.faces_keyboard_deleteStrLast={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_KEYBOARD_DELETESTRLAST,args0:[{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.FACES_KEYBOARD_HUE,tool:["delete str last byte"]}},attrs:{keyword:["keyboard"]}},Blockly.Python.faces_keyboard_deleteStrLast=function(){return n+".deleteStrLast()\n"},Blockly.Blocks.faces_keyboard_readKey={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_KEYBOARD_GETDIR,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_KEYBOARD_HUE,tool:["return press key ascii int value"]}},attrs:{keyword:["keyboard"]}},Blockly.Python.faces_keyboard_readKey=function(){return[n+".readKey()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_keyboard_isNewKeyPress={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_KEYBOARD_GETPRESS,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.FACES_KEYBOARD_HUE,tool:["if key press turn True"]}},attrs:{keyword:["keyboard"]}},Blockly.Python.faces_keyboard_isNewKeyPress=function(){return[n+".isNewKeyPress()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.faces_rfid_readStr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_RFID_READSTR,output:null,inputsInline:!0,args0:[{type:"input_dummy"},{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.FACES_RFID_HUE,tool:["Read string from card","return: string"]}},attrs:{keyword:["rfid"]}},Blockly.Python.faces_rfid_readStr=function(t){return[`faces_rfid.readBlockStr(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_write_block={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_RFID_WRITE,inputsInline:!0,previousStatement:null,nextStatement:null,args0:[{type:"input_dummy"},{type:"input_value",name:"VALUE"},{type:"input_value",name:"VALUE1"}],colour:Blockly.Msg.FACES_RFID_HUE,tool:["Write string to card","block: must (block + 1) % 4 != 0","string: int, float, will convert to string"]}},attrs:{keyword:["rfid"]}},Blockly.Python.faces_write_block=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`faces_rfid.writeBlock(${Blockly.Python.valueToCode(t,"VALUE1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"},${e})\n`},Blockly.Blocks.faces_rfid_cardOn={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_RFID_CARDON,output:null,inputsInline:!0,args0:[{type:"input_dummy"}],colour:Blockly.Msg.FACES_RFID_HUE,tool:["Get card near","return: if card near return True, else return False"]}},attrs:{keyword:["rfid"]}},Blockly.Python.faces_rfid_cardOn=function(t){return["faces_rfid.isCardOn()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.faces_rfid_uid={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.FACES_RFID_UID,output:null,inputsInline:!0,args0:[{type:"input_dummy"}],colour:Blockly.Msg.FACES_RFID_HUE,tool:["Get card uid",'return: string, like "73f66c1bf2"']}},attrs:{keyword:["rfid"]}},Blockly.Python.faces_rfid_uid=function(t){return["faces_rfid.readUid()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_env"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}function o(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_env2"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}function l(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_env3"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_env_pressure={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_PRESSURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ENV_HUE,tool:["Get env pressure","return: 30000 ~ 110000 (pa)"],return:[/(\.)(pressure)(\(\))/i,"dht12_pressure"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env_pressure=function(t){return[t.getFieldValue("VARNAME")+".pressure",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_TEMPERATURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ENV_HUE,tool:["Get env temperature","return: -20 ~ 60 (\u2103)"],return:[/(\.)(temperature)/i,"dht12_get_temperature"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env_get_temperature=function(t){return[t.getFieldValue("VARNAME")+".temperature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env_get_humidity={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_HUMIDITY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ENV_HUE,tool:["Get env humidity","return: 20 ~ 95 (%)"],return:[/(\.)(humidity)/i,"dht12_get_humidity"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env_get_humidity=function(t){return[t.getFieldValue("VARNAME")+".humidity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env2_pressure={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_PRESSURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env pressure","return: 30000 ~ 110000 (pa)"],return:[/(\.)(pressure)(\(\))/i,"dht12_pressure"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env2_pressure=function(t){return[t.getFieldValue("VARNAME")+".pressure",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env2_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_TEMPERATURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env temperature","return: -20 ~ 60 (\u2103)"],return:[/(\.)(temperature)/i,"dht12_get_temperature"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env2_get_temperature=function(t){return[t.getFieldValue("VARNAME")+".temperature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env2_get_humidity={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_HUMIDITY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:o}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env humidity","return: 20 ~ 95 (%)"],return:[/(\.)(humidity)/i,"dht12_get_humidity"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env2_get_humidity=function(t){return[t.getFieldValue("VARNAME")+".humidity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env3_pressure={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_PRESSURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env pressure","return: 30000 ~ 110000 (pa)"],return:[/(\.)(pressure)(\(\))/i,"dht12_pressure"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env3_pressure=function(t){return[t.getFieldValue("VARNAME")+".pressure",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env3_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_TEMPERATURE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env temperature","return: -20 ~ 60 (\u2103)"],return:[/(\.)(temperature)/i,"dht12_get_temperature"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env3_get_temperature=function(t){return[t.getFieldValue("VARNAME")+".temperature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_env3_get_humidity={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_ENV_GET_HUMIDITY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get env humidity","return: 20 ~ 95 (%)"],return:[/(\.)(humidity)/i,"dht12_get_humidity"]}},attrs:{keyword:["env"]}},Blockly.Python.hat_env3_get_humidity=function(t){return[t.getFieldValue("VARNAME")+".humidity",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_pir"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_pir_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_PIR_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_PIR_SERVO_HUE,tool:["Get pir status","return: 0 or 1"],return:[/.*?(state)/i,"pir_read"]}},attrs:{keyword:["pir"]}},Blockly.Python.hat_pir_read=function(t){return[t.getFieldValue("VARNAME")+".state",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_spk"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_speaker_tone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_SPEAKER_TONE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"FREQ"},{type:"input_value",name:"TIMEOUT"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_SPEAKER_HUE,tool:[],return:[/(speaker\.tone)(\()/i,"speaker_tone",[{type:"input_value",name:"FREQ"},{type:"field_dropdown",name:"TIMEOUT"}]]}},attrs:{keyword:["speaker"]}},Blockly.Python.hat_speaker_tone=function(t){return t.getFieldValue("VARNAME")+".tone("+(Blockly.Python.valueToCode(t,"FREQ",Blockly.Python.ORDER_FUNCTION_CALL)||"1600")+", "+(Blockly.Python.valueToCode(t,"TIMEOUT",Blockly.Python.ORDER_FUNCTION_CALL)||"200")+")\n"},Blockly.Blocks.hat_speaker_vol={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_SPEAKER_VOL,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"VOLUME"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_SPEAKER_HUE,tool:[],return:[/(speaker\.setVolume)(\()/i,"speaker_vol",[{type:"input_value",name:"VOLUME"}]]}},attrs:{keyword:["speaker"]}},Blockly.Python.hat_speaker_vol=function(t){return t.getFieldValue("VARNAME")+".setVolume("+(Blockly.Python.valueToCode(t,"VOLUME",Blockly.Python.ORDER_FUNCTION_CALL)||"1")+")\n"},Blockly.Blocks.hat_speaker_sing={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_SPEAKER_SING,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"TONE",options:[["Low A","220"],["Low B","247"],["Low C","131"],["Low D","147"],["Low E","165"],["Low F","175"],["Low G","196"],["Middle A","448"],["Middle B","494"],["Middle C","262"],["Middle D","294"],["Middle E","330"],["Middle F","349"],["Middle G","392"],["High A","889"],["High B","988"],["High C","523"],["High D","587"],["High E","659"],["High F","698"],["High G","784"],["Low A#","233"],["Low C#","139"],["Low D#","156"],["Low F#","185"],["Low G#","208"],["Middle A#","466"],["Middle C#","277"],["Middle D#","311"],["Middle F#","370"],["Middle G#","415"],["High A#","932"],["High C#","554"],["High D#","622"],["High F#","740"],["High  G#","831"]]},{type:"field_dropdown",name:"BEAT",options:[["1","1"],["1/2","1/2"],["1/4","1/4"],["1/8","1/8"],["1/16","1/16"],["2","2"],["4","4"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_SPEAKER_HUE,tool:[],return:[/(speaker\.sing)(\()/i,"speaker_sing",[{type:"field_dropdown",name:"TONE"},{type:"field_dropdown",name:"BEAT"}]]}},attrs:{keyword:["speaker"]}},Blockly.Python.hat_speaker_sing=function(t){return t.getFieldValue("VARNAME")+".sing("+(t.getFieldValue("TONE")||"220")+", "+(t.getFieldValue("BEAT")||"1")+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_ncir"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_ncir_read={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.HAT_NCIR_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"IR",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_NCIR_HUE,tool:["Get ncir read temperature","return: -70\xb0C ~ 382.2\xb0C"]}},attrs:{keyword:["ncir"]}},Blockly.Python.hat_ncir_read=function(t){return[(t.getFieldValue("IR")||"")+".temperature",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_adc"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}!function(){var t=[["adc0","adc1"],["ATTN_0DB","ATTN_2_5DB","ATTN_6DB","ATTN_11DB"],["WIDTH_9BIT","WIDTH_10BIT","WIDTH_11BIT","WIDTH_12BIT"]];for(let n=0;n<t.length;n++){var e=[];for(let o=0;o<t[n].length;o++)e[e.length]=[t[n][o],t[n][o]];t[n]=e}}(),Blockly.Blocks.hat_adc_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.HAT_ADC_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"ADC",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ADC_HUE,tool:["Get voltage","return: 0~12 (V)"]}},attrs:{keyword:["adc"]}},Blockly.Python.hat_adc_state=function(t){return[(t.getFieldValue("ADC")||"")+".voltage",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_dac"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_dac_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.HAT_DAC_STATE,args0:[{type:"input_dummy"},{type:"input_value",name:"FROM"},{type:"field_dropdown",name:"DAC",options:n},{type:"field_dropdown",name:"SAVE",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_DAC_HUE,tool:["Output voltage","voltage: 0~3.3 (V)","save: true->data write to eeprom"]}},attrs:{keyword:["dac"]}},Blockly.Python.hat_dac_state=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=t.getFieldValue("SAVE")||"false";return(t.getFieldValue("DAC")||"")+".setVoltage("+e+",save="+n+")\n"},Blockly.Blocks.hat_dac_writeData={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.HAT_DAC_SETDATA,args0:[{type:"input_dummy"},{type:"input_value",name:"FROM"},{type:"field_dropdown",name:"DAC",options:n},{type:"field_dropdown",name:"SAVE",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_DAC_HUE,tool:["Output voltage","raw data: 0~4096","save: true->write data to ceprom","note: 2640 near 3.3V"]}},attrs:{keyword:["dac"]}},Blockly.Python.hat_dac_writeData=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"1",n=t.getFieldValue("SAVE")||"False";return(t.getFieldValue("DAC")||"")+".writeData("+e+",save="+n+")\n"}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_servo"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.servo_hat_angle={init:function(){this.jsonInit(this._servowirteangle())},_servowirteangle:function(){return{message0:Blockly.Msg.HAT_SERVO_SET_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"ANGLE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_SERVO_HUE,tool:["Turn servo degree","degree: 0 ~ 180"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_hat_angle=function(t){return t.getFieldValue("VARNAME")+".write_angle("+(Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.servo_hat_write={init:function(){this.jsonInit(this._servowirteus())},_servowirteus:function(){return{message0:Blockly.Msg.HAT_SERVO_WRITE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_dummy"},{type:"input_value",name:"TIME"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_SERVO_HUE,tool:["Set High duration time","time: 500 ~ 2500 (us)"]}},attrs:{keyword:["servo"]}},Blockly.Python.servo_hat_write=function(t){return t.getFieldValue("VARNAME")+".write_us("+(Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"600")+")\n"}},function(t,e){Blockly.Blocks.hat_servos_angle={init:function(){this.jsonInit(this._servoangle())},_servoangle:function(){return{message0:Blockly.Msg.HAT_SERVOS_SET_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]]},{type:"input_dummy"},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_SERVOS_HUE,tool:["num: 1 ~ 8","angle: 0 ~ 180, int"]}},attrs:{keyword:["servos"]}},Blockly.Python.hat_servos_angle=function(t){Blockly.addModule("servo");var e=t.getFieldValue("INDEX")||"0",n=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${Blockly.Hats[0].name}.SetAngle(${e}, ${n})\n`},Blockly.Blocks.hat_servos_write={init:function(){this.jsonInit(this._servowirte())},_servowirte:function(){return{message0:Blockly.Msg.HAT_SERVOS_WRITE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]]},{type:"input_dummy"},{type:"input_value",name:"TIME"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_SERVOS_HUE,tool:["num: 1 ~ 8","us: 1000 ~ 2000"]}},attrs:{keyword:["servos"]}},Blockly.Python.hat_servos_write=function(t){Blockly.addModule("servo");var e=t.getFieldValue("INDEX")||"0",n=Blockly.Python.valueToCode(t,"TIME",Blockly.Python.ORDER_FUNCTION_CALL)||"600";return`${Blockly.Hats[0].name}.SetPulse(${e}, ${n})\n`},Blockly.Blocks.servos_set_all={init:function(){this.jsonInit(this._rgbSetAll())},_rgbSetAll:function(){return{message0:Blockly.Msg.HAT_SERVOS_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_SERVOS_HUE,tool:["Set all rgb color"]}},attrs:{keyword:["servos"]}},Blockly.Python.servos_set_all=function(t){Blockly.addModule("rgb");var e=t.getFieldValue("COLOR")||"#ff0000";return e=e.replace("#","0x"),`${Blockly.Hats[0].name}.SetRGB(${e})\n`},Blockly.Blocks.servos_set_all_rgb={init:function(){this.jsonInit(this._rgbSetAllRgb())},_rgbSetAllRgb:function(){return{message0:Blockly.Msg.HAT_SERVOS_SET_RGB_COLOR,args0:[{type:"input_dummy"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_SERVOS_HUE,tool:["Set all rgb color","R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["servos"]}},Blockly.Python.servos_set_all_rgb=function(t){Blockly.addModule("rgb");var e=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",n=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(e))||isNaN(parseInt(n))||isNaN(parseInt(o)))return`rgb.setColorAll((${e} << 16) | (${n} << 8) | ${o})\n`;var l=Math.floor(Math.abs(parseInt(e))%256).toString(16),i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16);return l.length<2&&(l="0"+l),i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),`${Blockly.Hats[0].name}.SetRGB(0x${l+i+a})\n`}},function(t,e){Blockly.Blocks.hat_puppy_angle={init:function(){this.jsonInit(this._hat_puppy_angle())},_hat_puppy_angle:function(){return{message0:Blockly.Msg.HAT_PUPPY_SET_ANGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["0","0"],["1","1"],["2","2"],["3","3"]]},{type:"input_dummy"},{type:"input_value",name:"ANGLE"},{type:"input_dummy"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_PUPPY_HUE,tool:["num: 1 ~ 8","angle: 0 ~ 180, int"]}},attrs:{keyword:["puppy"]}},Blockly.Python.hat_puppy_angle=function(t){Blockly.addModule("servo");var e=t.getFieldValue("INDEX")||"0",n=Blockly.Python.valueToCode(t,"ANGLE",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${Blockly.Hats[0].name}.SetAngle(${e}, ${n})\n`},Blockly.Blocks.hat_puppy_all_angle={init:function(){this.jsonInit(this._hat_puppy_all_angle())},_hat_puppy_all_angle:function(){return{message0:Blockly.Msg.HAT_PUPPY_SET_ALL_ANGLE,args0:[{type:"input_value",name:"zero"},{type:"input_value",name:"one"},{type:"input_value",name:"two"},{type:"input_value",name:"three"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.HAT_PUPPY_HUE}},attrs:{keyword:["puppy"]}},Blockly.Python.hat_puppy_all_angle=function(t){var e=Blockly.Python.valueToCode(t,"zero",Blockly.Python.ORDER_NONE)||"",n=Blockly.Python.valueToCode(t,"one",Blockly.Python.ORDER_NONE)||"",o=Blockly.Python.valueToCode(t,"two",Blockly.Python.ORDER_NONE)||"",l=Blockly.Python.valueToCode(t,"three",Blockly.Python.ORDER_NONE)||"";return`${Blockly.Hats[0].name}.SetAllAngle(${e}, ${n}, ${o}, ${l})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_Joystick"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_joystick_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.HAT_JOYSTICK_GET_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYSTICK_HUE,tool:["Get x direction value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.hat_joystick_x=function(t){return[t.getFieldValue("VARNAME")+".X",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joystick_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.HAT_JOYSTICK_GET_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYSTICK_HUE,tool:["Get y direction value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.hat_joystick_y=function(t){return[t.getFieldValue("VARNAME")+".Y",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joystick_press={init:function(){this.jsonInit(this._joystickpress())},_joystickpress:function(){return{message0:Blockly.Msg.HAT_JOYSTICK_GET_PRESSED,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYSTICK_HUE,tool:["Get joystick press state","return: 0 or 1"]}},attrs:{keyword:["joystick"]}},Blockly.Python.hat_joystick_press=function(t){return[t.getFieldValue("VARNAME")+".Press",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joystick_reversal_x={init:function(){this.jsonInit(this._joystickx())},_joystickx:function(){return{message0:Blockly.Msg.HAT_JOYSTICK_GET_REVERSE_X,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYSTICK_HUE,tool:["Get invert y value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.hat_joystick_reversal_x=function(t){return[t.getFieldValue("VARNAME")+".InvertX",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joystick_reversal_y={init:function(){this.jsonInit(this._joysticky())},_joysticky:function(){return{message0:Blockly.Msg.HAT_JOYSTICK_GET_REVERSE_Y,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYSTICK_HUE,tool:["Get invert y value","return: 0 ~ 255"]}},attrs:{keyword:["joystick"]}},Blockly.Python.hat_joystick_reversal_y=function(t){return[t.getFieldValue("VARNAME")+".InvertY",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.hat_bugc_set_pulse={init:function(){this.jsonInit(this._hat_bugc_set_pulse())},_hat_bugc_set_pulse:function(){return{message0:Blockly.Msg.HAT_BUGC_SET_PULSE,args0:[{type:"field_dropdown",name:"pulse",options:[["0","0"],["1","1"],["2","2"],["3","3"]]},{type:"input_value",name:"num"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.HAT_BUGC_HUE}},attrs:{keyword:["bugc"]}},Blockly.Python.hat_bugc_set_pulse=function(t){var e=t.getFieldValue("pulse"),n=Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_NONE)||"0";return`${Blockly.Hats[0].name}.SetPulse(${e}, ${n})\n`},Blockly.Blocks.hat_bugc_set_all_pulse={init:function(){this.jsonInit(this._hat_bugc_set_all_pulse())},_hat_bugc_set_all_pulse:function(){return{message0:Blockly.Msg.HAT_BUGC_SET_ALL_PULSE,args0:[{type:"input_value",name:"num1"},{type:"input_value",name:"num2"},{type:"input_value",name:"num3"},{type:"input_value",name:"num4"}],previousStatement:!0,nextStatement:!0,inputsInline:!0,colour:Blockly.Msg.HAT_BUGC_HUE}},attrs:{keyword:["bugc"]}},Blockly.Python.hat_bugc_set_all_pulse=function(t){var e=Blockly.Python.valueToCode(t,"num1",Blockly.Python.ORDER_NONE)||"0",n=Blockly.Python.valueToCode(t,"num2",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"num3",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"num4",Blockly.Python.ORDER_NONE)||"0";return`${Blockly.Hats[0].name}.SetAllPulse(${e}, ${n}, ${o}, ${l})\n`},Blockly.Blocks.hat_bugc_rgb_set_all={init:function(){this.jsonInit(this._hat_bugc_rgb_set_all())},_hat_bugc_rgb_set_all:function(){return{message0:Blockly.Msg.HAT_BUGC_SET_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"num",options:[["0","0"],["1","1"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BUGC_HUE,tool:["Set all rgb color"]}},attrs:{keyword:["bugc"]}},Blockly.Python.hat_bugc_rgb_set_all=function(t){Blockly.addModule("rgb");var e=t.getFieldValue("num"),n=t.getFieldValue("COLOR")||"#ff0000";return n=n.replace("#","0x"),`${Blockly.Hats[0].name}.SetRGB(${e}, ${n})\n`},Blockly.Blocks.hat_bugc_rgb_set_all2={init:function(){this.jsonInit(this._hat_bugc_rgb_set_all2())},_hat_bugc_rgb_set_all2:function(){return{message0:Blockly.Msg.HAT_BUGC_SET_RGB_COLOR,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"num",options:[["0","0"],["1","1"]]},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BUGC_HUE,tool:["Set all rgb color"]}},attrs:{keyword:["bugc"]}},Blockly.Python.hat_bugc_rgb_set_all2=function(t){Blockly.addModule("rgb");var e=t.getFieldValue("num"),n=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(n))||isNaN(parseInt(o))||isNaN(parseInt(l)))return`${Blockly.Hats[0].name}.SetRGB((${n} << 16) | (${o} << 8) | ${l})\n`;var i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16),s=Math.floor(Math.abs(parseInt(l))%256).toString(16);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),`${Blockly.Hats[0].name}.SetRGB(${e}, 0x${i}${a}${s})\n`},Blockly.Blocks.hat_bugc_rgb_set_all_rgb={init:function(){this.jsonInit(this._hat_bugc_rgb_set_all_rgb())},_hat_bugc_rgb_set_all_rgb:function(){return{message0:Blockly.Msg.HAT_BUGC_SET_ALL_RGB_COLOR,args0:[{type:"input_dummy"},{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BUGC_HUE,tool:["Set all rgb color","R: 0~255","G: 0~255","B: 0~255"]}},attrs:{keyword:["bugc"]}},Blockly.Python.hat_bugc_rgb_set_all_rgb=function(t){Blockly.addModule("rgb");var e=Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0",n=Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0",o=Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0";if(isNaN(parseInt(e))||isNaN(parseInt(n))||isNaN(parseInt(o)))return`${Blockly.Hats[0].name}.SetAllRGB((${e} << 16) | (${n} << 8) | ${o})\n`;var l=Math.floor(Math.abs(parseInt(e))%256).toString(16),i=Math.floor(Math.abs(parseInt(n))%256).toString(16),a=Math.floor(Math.abs(parseInt(o))%256).toString(16);return l.length<2&&(l="0"+l),i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),`${Blockly.Hats[0].name}.SetAllRGB(0x${l}${i}${a})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_Finger"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_finger_get_state={init:function(){this.jsonInit(this._finger_get_state())},_finger_get_state:function(){return{message0:Blockly.Msg.HAT_FINGER_GET_STATE,args0:[{type:"field_dropdown",name:"STATE",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Return finger state"]}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_get_state=function(t){return[(t.getFieldValue("STATE")||"")+".state",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_finger_get_access={init:function(){this.jsonInit(this._finger_get_access())},_finger_get_access:function(){return{message0:Blockly.Msg.HAT_FINGER_GET_ACCESS,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_get_access=function(t){return["access",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_finger_get_id={init:function(){this.jsonInit(this._finger_get_id())},_finger_get_id:function(){return{message0:Blockly.Msg.HAT_FINGER_GET_ID,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Can be only used at func"]}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_get_id=function(t){return["user_id",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_finger_removeAll={init:function(){this.jsonInit(this._finger_removeAll())},_finger_removeAll:function(){return{message0:Blockly.Msg.HAT_FINGER_REMOVE_ALL,args0:[{type:"field_dropdown",name:"STATE",options:n}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Remove All finger data",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_removeAll=function(t){return(t.getFieldValue("STATE")||"")+".removeAllUser()\n"},Blockly.Blocks.hat_finger_remove_user={init:function(){this.jsonInit(this._finger_remove_user())},_finger_remove_user:function(){return{message0:Blockly.Msg.HAT_FINGER_REMOVE_USER,args0:[{type:"field_dropdown",name:"STATE",options:n},{type:"input_value",name:"ID"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Remove finger data","user_id: 0~255",'finish: unit_finger.state -> "Delete user finish"','fail: unit_finger.state -> "Delete user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_remove_user=function(t){var e=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"";return(t.getFieldValue("STATE")||"")+".removeUser("+e+")\n"},Blockly.Blocks.hat_finger_add_user={init:function(){this.jsonInit(this._finger_add_user())},_finger_add_user:function(){return{message0:Blockly.Msg.HAT_FINGER_ADD_USER,args0:[{type:"field_dropdown",name:"STATE",options:n},{type:"input_value",name:"ID"},{type:"field_dropdown",name:"ACCESS",options:[["1","1"],["2","2"],["3","3"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Add user","user_id: 0~255",'finish: unit_finger.state -> "Add user finish"','fail: unit_finger.state -> "Add user fail"']}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_add_user=function(t){var e=Blockly.Python.valueToCode(t,"ID",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=t.getFieldValue("ACCESS")||"";return(t.getFieldValue("STATE")||"")+".addUser("+e+", "+n+")\n"},Blockly.Blocks.hat_finger_read={init:function(){this.jsonInit(this._finger_read())},_finger_read:function(){return{message0:Blockly.Msg.HAT_FINGER_READ,args0:[{type:"field_dropdown",name:"STATE",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.HAT_FINGER_HUE,tool:["Callback fun","access: finger access","user_id: finger user_id"]}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_read=function(t){var e=t.getFieldValue("STATE")||"";let n=`def ${e}_cb(user_id, access):\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+=`${e}.readFingerCb(callback=${e}_cb)\n`,n},Blockly.Blocks.hat_finger_getUnknown={init:function(){this.jsonInit(this._finger_getUnknown())},_finger_getUnknown:function(){return{message0:Blockly.Msg.HAT_FINGER_GET_UNKNOWN,args0:[{type:"field_dropdown",name:"STATE",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.HAT_FINGER_HUE}},attrs:{keyword:["finger"]}},Blockly.Python.hat_finger_getUnknown=function(t){var e=t.getFieldValue("STATE")||"finger0",n="def "+e+"_unknownCb():\n  # global params\n"+(Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass\n";return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n+(e+".getUnknownCb(")+e+"_unknownCb)"}},function(t,e){Blockly.Blocks.set_beetleC_wheel_speed={init:function(){this.jsonInit(this._set_beetleC_wheel_speed())},_set_beetleC_wheel_speed:function(){return{message0:Blockly.Msg.HAT_BEETLEC_SET_WHEEL_SPEED,args0:[{type:"field_dropdown",name:"direction",options:[["left","0"],["right","1"]]},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BEETLEC_HUE}},attrs:{keyword:["beetlec"]}},Blockly.Python.set_beetleC_wheel_speed=function(t){var e=t.getFieldValue("direction")||"",n=Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_NONE)||"";return`${Blockly.Hats[0].name}.SetPulse(${e}, ${n})\n`},Blockly.Blocks.beetleC_hat_set_color={init:function(){this.jsonInit(this._beetleCHatSetColor())},_beetleCHatSetColor:function(){return{message0:Blockly.Msg.HAT_BEETLEC_SET_COLOR,args0:[{type:"input_dummy"},{type:"input_value",name:"INDEX"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BEETLEC_HUE}},attrs:{keyword:["beetlec"]}},Blockly.Python.beetleC_hat_set_color=function(t){var e=Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"10",n=t.getFieldValue("COLOR");return n=n.replace("#","0x"),`${Blockly.Hats[0].name}.SetRGB(${e}, ${n})\n`},Blockly.Blocks.beetleC_hat_set_color_all={init:function(){this.jsonInit(this._beetleC_hat_set_color_all())},_beetleC_hat_set_color_all:function(){return{message0:Blockly.Msg.HAT_BEETLEC_SET_ALL_COLOR,args0:[{type:"input_dummy"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_BEETLEC_HUE}},attrs:{keyword:["beetlec"]}},Blockly.Python.beetleC_hat_set_color_all=function(t){var e=t.getFieldValue("COLOR");return e=e.replace("#","0x"),`${Blockly.Hats[0].name}.SetAllRGB(${e})\n`}},function(t,e){Blockly.Blocks.get_hat_yun_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_YUN_GET_TEMPERATURE,output:null,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.get_hat_yun_temperature=function(t){return[Blockly.Hats[0].name+".temperature",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_hat_yun_humidity={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_YUN_GET_HUMIDITY,output:null,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.get_hat_yun_humidity=function(t){return[Blockly.Hats[0].name+".humidity",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_hat_yun_pressure={init:function(){this.jsonInit(this._getHatYunPressure())},_getHatYunPressure:function(){return{message0:Blockly.Msg.HAT_YUN_GET_PRESURE,args0:[{type:"input_dummy"}],output:null,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.get_hat_yun_pressure=function(t){return[Blockly.Hats[0].name+".pressure",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_hat_yun_brightness={init:function(){this.jsonInit(this._getHatYunBrightness())},_getHatYunBrightness:function(){return{message0:Blockly.Msg.HAT_YUN_GET_BRIGHTNESS,args0:[{type:"input_dummy"}],output:null,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.get_hat_yun_brightness=function(t){return[Blockly.Hats[0].name+".getLight()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.yun_hat_set_color={init:function(){this.jsonInit(this._yunHatSetColor())},_yunHatSetColor:function(){return{message0:Blockly.Msg.HAT_YUN_SET_COLOR,args0:[{type:"input_dummy"},{type:"input_value",name:"INDEX"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.yun_hat_set_color=function(t){var e=Blockly.Python.valueToCode(t,"INDEX",Blockly.Python.ORDER_FUNCTION_CALL)||"10",n=t.getFieldValue("COLOR");return n=n.replace("#","0x"),`${Blockly.Hats[0].name}.SetRGB(${e}, ${n})\n`},Blockly.Blocks.yun_hat_set_color_all={init:function(){this.jsonInit(this._yunHatSetColorAll())},_yunHatSetColorAll:function(){return{message0:Blockly.Msg.HAT_YUN_SET_ALL_COLOR,args0:[{type:"input_dummy"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_YUN_HUE}},attrs:{keyword:["yun"]}},Blockly.Python.yun_hat_set_color_all=function(t){var e=t.getFieldValue("COLOR");return e=e.replace("#","0x"),`${Blockly.Hats[0].name}.SetRGBAll(${e})\n`}},function(t,e){Blockly.Blocks.hat_joyc_set_led_color={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_SET_LED_COLOR,args0:[{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_set_led_color=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetLedColor(0x${((Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_FUNCTION_CALL)||0)<<16|(Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_FUNCTION_CALL)||0)<<8|(Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_FUNCTION_CALL)||0)).toString(16)})\n`},Blockly.Blocks.hat_joyc_get_x={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_GET_X,args0:[{type:"field_dropdown",name:"SIDE",options:[["left","0"],["right","1"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_get_x=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.GetX(${t.getFieldValue("SIDE")||0})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joyc_get_y={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_GET_Y,args0:[{type:"field_dropdown",name:"SIDE",options:[["left","0"],["right","1"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_get_y=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.GetY(${t.getFieldValue("SIDE")||0})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joyc_get_angle={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_GET_ANGLE,args0:[{type:"field_dropdown",name:"SIDE",options:[["left","0"],["right","1"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_get_angle=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.GetAngle(${t.getFieldValue("SIDE")||0})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joyc_get_distance={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_GET_DISTANCE,args0:[{type:"field_dropdown",name:"SIDE",options:[["left","0"],["right","1"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_get_distance=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.GetDistance(${t.getFieldValue("SIDE")||0})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_joyc_get_press={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_JOYC_GET_PRESS,args0:[{type:"field_dropdown",name:"SIDE",options:[["left","0"],["right","1"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_JOYC_HUE}},attrs:{keyword:["joyc"]}},Blockly.Python.hat_joyc_get_press=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.GetPress(${t.getFieldValue("SIDE")||0})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.hat_roverc_set_pulse={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_ROVERC_SET_PULSE,args0:[{type:"field_dropdown",name:"WHEEL",options:[["front-left","0"],["front-right","1"],["rear-left","2"],["rear-right","3"]]},{type:"input_value",name:"PULSE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["roverc"]}},Blockly.Python.hat_roverc_set_pulse=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetPulse(${t.getFieldValue("WHEEL")||1}, ${Blockly.Python.valueToCode(t,"PULSE",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.hat_roverc_set_all_pulse={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_ROVERC_SET_ALL_PULSE,args0:[{type:"input_value",name:"PULSE0"},{type:"input_value",name:"PULSE1"},{type:"input_value",name:"PULSE2"},{type:"input_value",name:"PULSE3"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["roverc"]}},Blockly.Python.hat_roverc_set_all_pulse=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetAllPulse(${Blockly.Python.valueToCode(t,"PULSE0",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"PULSE1",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"PULSE2",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"PULSE3",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.hat_roverc_set_speed={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_ROVERC_SET_SPEED,args0:[{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"Z"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["roverc"]}},Blockly.Python.hat_roverc_set_speed=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetSpeed(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"Z",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.hat_roverc_set_servo_angle={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_ROVERC_SET_SERVO_ANGLE,args0:[{type:"input_value",name:"pos"},{type:"input_value",name:"angle"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["pos: 0 ~ 1","angle: 0 ~ 180"]}},attrs:{keyword:["roverc"]}},Blockly.Python.hat_roverc_set_servo_angle=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetServoAngle(${Blockly.Python.valueToCode(t,"pos",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"angle",Blockly.Python.ORDER_FUNCTION_CALL)||0})\n`},Blockly.Blocks.hat_roverc_set_servo_pulse={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_ROVERC_SET_SERVO_PULSE,args0:[{type:"input_value",name:"pos"},{type:"input_value",name:"pulse"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["pos: 0 ~ 1","pulse: 500 ~ 2500"]}},attrs:{keyword:["roverc"]}},Blockly.Python.hat_roverc_set_servo_pulse=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.SetServoPulse(${Blockly.Python.valueToCode(t,"pos",Blockly.Python.ORDER_FUNCTION_CALL)||0}, ${Blockly.Python.valueToCode(t,"pulse",Blockly.Python.ORDER_FUNCTION_CALL)||500})\n`}},function(t,e){Blockly.Blocks.hat_tof_get_distance={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_TOF_GET_DISTANCE,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_TOF_HUE}},attrs:{keyword:["tof"]}},Blockly.Python.hat_tof_get_distance=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".GetDistance()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.hat_thermal_get_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_GET_TEMP,args0:[{type:"input_value",name:"X"},{type:"input_value",name:"Y"}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_get_temperature=function(t){return[`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.getTmp(${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_thermal_get_center_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_GET_CENTER_TEMP,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_get_center_temperature=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".getCenterTmp()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_thermal_get_max_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_GET_MAX_TEMP,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_get_max_temperature=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".getMaxTmp()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_thermal_get_min_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_GET_MIN_TEMP,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_get_min_temperature=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".getMinTmp()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_thermal_set_max_visible_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_SET_COLOR_MAX_TEMP,args0:[{type:"input_value",name:"TEMP"}],nextStatement:null,previousStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_set_max_visible_temperature=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.setColorMaxTmp(${Blockly.Python.valueToCode(t,"TEMP",Blockly.Python.ORDER_FUNCTION_CALL)||"35"})\n`},Blockly.Blocks.hat_thermal_set_min_visible_temperature={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_SET_COLOR_MIN_TEMP,args0:[{type:"input_value",name:"TEMP"}],nextStatement:null,previousStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_set_min_visible_temperature=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.setColorMinTmp(${Blockly.Python.valueToCode(t,"TEMP",Blockly.Python.ORDER_FUNCTION_CALL)||"24"})\n`},Blockly.Blocks.hat_thermal_update={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_THERMAL_UPDATE,args0:[{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"field_dropdown",name:"SHOW",options:[["True","True"],["False","False"]]},{type:"field_dropdown",name:"SHOWCENTER",options:[["True","True"],["False","False"]]}],nextStatement:null,previousStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_THERMAL_HUE,tool:[]}},attrs:{keyword:["thermal"]}},Blockly.Python.hat_thermal_update=function(t){return`${Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat"}.update(x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, show=${t.getFieldValue("SHOW")||"True"}, showCenter=${t.getFieldValue("SHOWCENTER")||"True"})\n`}},function(t,e){Blockly.Blocks.hat_cardkb_get_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_CARDKB_GET_KEY,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_CARDKB_HUE,tool:[]}},attrs:{keyword:["cardkb"]}},Blockly.Python.hat_cardkb_get_key=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".keyData",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_cardkb_get_string={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_CARDKB_GET_STRING,output:null,inputsInline:!0,colour:Blockly.Msg.HAT_CARDKB_HUE,tool:[]}},attrs:{keyword:["cardkb"]}},Blockly.Python.hat_cardkb_get_string=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".keyString",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_cardkb_get_pressed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.HAT_CARDKB_GET_PRESSED,output:null,inputsInline:!0,type:"",colour:Blockly.Msg.HAT_CARDKB_HUE,tool:[]}},attrs:{keyword:["cardkb"]}},Blockly.Python.hat_cardkb_get_pressed=function(t){return[(Blockly.Hats.length>0?Blockly.Hats[0].name:"unknown_hat")+".isNewKeyPress()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_rs485"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_rs485_read={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],output:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["Read RS485 data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read=function(t){return[(t.getFieldValue("VAR")||"")+".read()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_read_characters={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READ_CHARACTERS,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["Read number RS485 data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read_characters=function(t){return[`${t.getFieldValue("VAR")||""}.read(${Blockly.Python.valueToCode(t,"NUM",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_readline={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READLINE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["Read a line data","return: bytes, empty will return None"]}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_readline=function(t){return[(t.getFieldValue("VAR")||"")+".readline()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:["Write data"]}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write=function(t){var e=(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"0").toString().replace(/\\\\/g,"\\"),n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+")\n":n+".write(str("+e+"))\n"},Blockly.Blocks.hat_rs485_any={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UART_READANY,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VAR",options:l}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_any=function(t){return[(t.getFieldValue("VAR")||"")+".any()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write_line={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_LINE,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_line=function(t){var e=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||"",n=t.getFieldValue("VAR")||"";return t.childBlocks_.length>0&&("text"===t.childBlocks_[0].type||"text_unescaped"===t.childBlocks_[0].type)?n+".write("+e+'+"\\r\\n")\n':n+".write(str("+e+')+"\\r\\n")\n'},Blockly.Blocks.hat_rs485_write_raw_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_RAW_DATA,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"VALUE"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_raw_data=function(t){var e=`bytes(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_NONE)||""})`;return(t.getFieldValue("VAR")||"")+".write("+e+")\n"},Blockly.Blocks.hat_rs485_read_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"coil_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.read_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"coil_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_read_discrete_inputs={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_DISCRETE_INPUTS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"input_qty"}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read_discrete_inputs=function(t){return[(t.getFieldValue("VAR")||"")+`.read_discrete_inputs(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"input_qty",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_read_holding_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_HOLDING_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read_holding_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_holding_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_read_input_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_READ_INPUT_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_qty"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_read_input_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.read_input_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_qty",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write_single_coil={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_COIL,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"output_address"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_single_coil=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_coil(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write_single_register={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_SINGLE_REGISTER,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"register_address"},{type:"input_value",name:"register_value"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_single_register=function(t){return[(t.getFieldValue("VAR")||"")+`.write_single_register(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_address",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_value",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write_multiple_coils={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_COILS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"output_value"}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_multiple_coils=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_coils(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"output_value",Blockly.Python.ORDER_NONE)||""})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_rs485_write_multiple_registers={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.UNIT_RS485_WRITE_MULTIPLE_REGISTERS,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"input_value",name:"slave_addr"},{type:"input_value",name:"starting_addr"},{type:"input_value",name:"register_values"},{type:"field_dropdown",name:"signed",options:[["True","True"],["False","False"]]}],inputsInline:!0,output:null,colour:Blockly.Msg.HAT_ROVERC_HUE}},attrs:{keyword:["rs485"]}},Blockly.Python.hat_rs485_write_multiple_registers=function(t){return[(t.getFieldValue("VAR")||"")+`.write_multiple_registers(${Blockly.Python.valueToCode(t,"slave_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"starting_addr",Blockly.Python.ORDER_NONE)||""}, ${Blockly.Python.valueToCode(t,"register_values",Blockly.Python.ORDER_NONE)||""}, ${t.getFieldValue("signed")||""})`,Blockly.Python.ORDER_CONDITIONAL]};const i=[["None","False"],["Custom","True"]];Blockly.Blocks.hat_rs485_init={init:function(){this.jsonInit(this._getinit()),this.isCtrlPin="False",this.appendDummyInput("op").appendField("ctrl pin").appendField(new Blockly.FieldDropdown(i,function(t){let e=this.getSourceBlock();t!==e.isCtrlPin&&(e.updateOP(t),e.isCtrlPin=t)}))},_getinit:function(){return{message0:Blockly.Msg.UNIT_RS485_INIT,args0:[{type:"field_dropdown",name:"VAR",options:l},{type:"field_dropdown",name:"UARTid",options:[["1","1"],["2","2"]]},{type:"input_value",name:"BAUD"},{type:"field_dropdown",name:"data_bits",options:[["7","7"],["8","8"],["9","9"]]},{type:"field_dropdown",name:"stop_bits",options:[["1","1"],["2","2"]]},{type:"field_dropdown",name:"parity",options:[["None","None"],["Even","0"],["Odd","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_ROVERC_HUE,tool:[]}},mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isCtrlPin",this.isCtrlPin),t},domToMutation:function(t){if(this.isCtrlPin=t.getAttribute("isCtrlPin"),this.updateOP(this.isCtrlPin),"True"===this.isCtrlPin){let t=this.getInput("op").fieldRow[1];t.selectedOption_=i[1],t.value_=this.isCtrlPin}},updateOP:function(t){if("True"===t){this.getInput("ctrl_pin")&&this.removeInput("ctrl_pin"),this.appendValueInput("ctrl_pin").setCheck("Number");let t=this.getInput("ctrl_pin").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("math_number",{name:"NUM"});this.getInput("ctrl_pin").connection.setShadowDom(t)}}else if(this.getInput("ctrl_pin")){let e=this.getInput("ctrl_pin").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("ctrl_pin")}},attrs:{keyword:["modbus","master"]}},Blockly.Python.hat_rs485_init=function(t){var e=t.getFieldValue("VAR")||"",n=t.getFieldValue("UARTid"),o=Blockly.Python.valueToCode(t,"BAUD",Blockly.Python.ORDER_FUNCTION_CALL),l=t.getFieldValue("data_bits"),i=t.getFieldValue("stop_bits"),a=t.getFieldValue("parity"),s=Blockly.Python.valueToCode(t,"ctrl_pin",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""===s&&(s="None"),`${e}.init(${n}, baudrate=${o}, data_bits=${l}, stop_bits=${i}, parity=${a}, ctrl_pin=${s})\n`}},function(t,e){function n(){for(var t=[],e=0;e<Blockly.Hats.length;e++)"hat_cback"===Blockly.Hats[e].type&&t.push([Blockly.Hats[e].name,Blockly.Hats[e].name]);return 0===t.length?[["",""]]:t}Blockly.Blocks.hat_cback_raw_adc={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_CBACK_RAW_ADC,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,colour:Blockly.Msg.HAT_CBACK_HUE,tool:[]}},attrs:{keyword:["cback"]}},Blockly.Python.hat_cback_raw_adc=function(t){return[t.getFieldValue("VARNAME")+".get_adc16_raw()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_cback_get_input={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_CBACK_GET_INPUT,args0:[{type:"field_dropdown",name:"VARNAME",options:n}],output:null,colour:Blockly.Msg.HAT_CBACK_HUE,tool:[]}},attrs:{keyword:["cback"]}},Blockly.Python.hat_cback_get_input=function(t){return[t.getFieldValue("VARNAME")+".get_input()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.hat_set_servo_angle={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_SET_SERVO_ANGLE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x00"],["Channel2","0x01"],["Channel3","0x02"],["Channel4","0x03"]]},{type:"input_value",name:"angle"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_CBACK_HUE,tool:[]}},attrs:{keyword:["cback"]}},Blockly.Python.hat_set_servo_angle=function(t){return`${t.getFieldValue("VARNAME")}.set_servo_angle(${t.getFieldValue("channel")}, ${Blockly.Python.valueToCode(t,"angle",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.hat_set_servo_pulse={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_SET_SERVO_PULSE,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"field_dropdown",name:"channel",options:[["Channel1","0x10"],["Channel2","0x12"],["Channel3","0x14"],["Channel4","0x16"]]},{type:"input_value",name:"pulse"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_CBACK_HUE,tool:[]}},attrs:{keyword:["cback"]}},Blockly.Python.hat_set_servo_pulse=function(t){return`${t.getFieldValue("VARNAME")}.set_servo_pulse(${t.getFieldValue("channel")}, ${Blockly.Python.valueToCode(t,"pulse",Blockly.Python.ORDER_FUNCTION_CALL)||"500"})\n`},Blockly.Blocks.hat_set_output={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.HAT_SET_OUTPUT,args0:[{type:"field_dropdown",name:"VARNAME",options:n},{type:"input_value",name:"num"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.HAT_CBACK_HUE,tool:[]}},attrs:{keyword:["cback"]}},Blockly.Python.hat_set_output=function(t){return`${t.getFieldValue("VARNAME")}.set_output(${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){Blockly.M5Toolbox.customToolbox=[{kind:"button",text:"%{BKY_CUSTOM}","web-class":"blockly-title--style",callbackKey:"logicDocs",url:"blockly_custom"},{kind:"button",text:"%{BKY_CUSTOM_CREATE}","web-class":"blockly-btn--style",callbackKey:"goToBlockMakerHandler"},{kind:"button",text:"%{BKY_CUSTOM_OPEN}","web-class":"blockly-btn--style",callbackKey:"addThirdPartyBlockHandler"},{kind:"button",text:"%{BKY_CUSTOM_USER}","web-class":"blockly-btn--style",callbackKey:"goToBlockUserManual"}]},function(t,e){Blockly.M5Toolbox.remoteToolbox=[{kind:"button",text:"%{BKY_REMOTE}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"remote"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Remote"},{kind:"block",blockxml:'<block type="remote_set_title">\n        <value name="title">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="remote_set_qrcode">\n        <value name="X">\n          <shadow type="math_number">\n            <field name="NUM">72</field>\n          </shadow>\n        </value>\n        <value name="Y">\n          <shadow type="math_number">\n            <field name="NUM">32</field>\n          </shadow>\n        </value>\n        <value name="SIZE">\n          <shadow type="math_number">\n            <field name="NUM">176</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"remote_add_switch"},{kind:"block",type:"remote_add_button"},{kind:"block",type:"remote_add_slider"},{kind:"block",type:"remote_add_input"},{kind:"block",type:"remote_add_label"}]},function(t,e){Blockly.M5Toolbox.logicToolbox=[{kind:"button",text:"%{BKY_LOGIC}","web-class":"blockly-title--style",callbackKey:"logicDocs",url:"logic"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_ifelse"},{kind:"block",type:"logic_try_except"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_ternary"},{kind:"block",type:"logic_switch"},{kind:"block",type:"logic_when"}]},function(t,e){},function(t,e){Blockly.M5Toolbox.timerToolbox=[{kind:"block",blockxml:'<block type="timer_delay">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="timer_delay_ms">\n        <value name="DELAY">\n          <shadow type="math_number">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"timer_get_ms"}]},function(t,e){Blockly.M5Toolbox.loopToolbox=[{kind:"button",text:"%{BKY_LOOPS}","web-class":"blockly-title--style",callbackKey:"logicDocs",url:"loop"},{kind:"block",type:"controls_repeat"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_forEach"},{kind:"block",type:"controls_for"},{kind:"block",type:"controls_flow_statements"}]},function(t,e){Blockly.M5Toolbox.jsonToolbox=[{kind:"button",text:"%{BKY_JSON}","web-class":"blockly-title--style",callbackKey:"dataStructureDocs",url:"json"},{kind:"block",type:"dumps_json"},{kind:"block",type:"loads_json"}]},function(t,e){Blockly.M5Toolbox.listToolbox=[{kind:"button",text:"%{BKY_LISTS}","web-class":"blockly-title--style",callbackKey:"dataStructureDocs",url:"array"},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_indexOf"},{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_getIndex"},{kind:"block",type:"lists_getSublist"},{kind:"block",type:"lists_repeat"},{kind:"block",type:"lists_reverse"},{kind:"block",type:"lists_setIndex"},{kind:"block",type:"lists_split"}]},function(t,e){Blockly.M5Toolbox.mapToolbox=[{kind:"button",text:"%{BKY_MAP}","web-class":"blockly-title--style",callbackKey:"dataStructureDocs",url:"map"},{kind:"block",type:"map_on_loop"},{kind:"block",type:"map_clear"},{kind:"block",type:"get_map_in"},{kind:"block",type:"get_map_key"},{kind:"block",type:"add_map_key"},{kind:"block",type:"set_map_key"},{kind:"block",type:"delete_map_key"}]},function(t,e){Blockly.M5Toolbox.mathToolbox=[{kind:"button",text:"%{BKY_MATH}","web-class":"blockly-title--style",callbackKey:"dataStructureDocs",url:"operation"},{kind:"block",type:"math_number"},{kind:"block",type:"math_arithmetic"},{kind:"block",type:"math_arithmetic_arr"},{kind:"block",type:"math_bit_operation"},{kind:"block",type:"math_constant"},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_number_property"},{kind:"block",type:"math_on_list"},{kind:"block",type:"math_random_float"},{kind:"block",type:"math_random_int"},{kind:"block",type:"math_round"},{kind:"block",type:"math_single"},{kind:"block",type:"math_trig"},{kind:"block",type:"convent_int"},{kind:"block",type:"convent_float"},{kind:"block",blockxml:'<block type="math_get_bit">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="math_set_bit">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="math_clear_bit">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="math_reverse_bit">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"math_int_from_bytes"}]},function(t,e){Blockly.M5Toolbox.textToolbox=[{kind:"button",text:"%{BKY_TEXT}","web-class":"blockly-title--style",callbackKey:"dataStructureDocs",url:"text"},{kind:"block",type:"text"},{kind:"block",type:"text_unescaped"},{kind:"block",type:"text_changeCase"},{kind:"block",type:"text_charAt"},{kind:"block",type:"text_count"},{kind:"block",type:"text_isEmpty"},{kind:"block",type:"text_length"},{kind:"block",type:"text_print"},{kind:"block",type:"text_replace"},{kind:"block",type:"text_trim"},{kind:"block",blockxml:'<block type="text_trim_string">\n        <value name="string">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="TEXT">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"text_prompt"},{kind:"block",type:"text_prompt_ext"},{kind:"block",type:"convent_str"},{kind:"block",blockxml:'<block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"decode_str"},{kind:"block",type:"encode_str"},{kind:"block",blockxml:'<block type="text_math_split">\n        <value name="arg1">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'}]},function(t,e){Blockly.Blocks.convent_int={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CONVENT_INT,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.MATH_HUE,output:"Number",tool:[]}},attrs:{keyword:["math","int"]}},Blockly.Python.convent_int=function(t){return[`int(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.convent_float={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CONVENT_FLOAT,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.MATH_HUE,tool:[],output:"Number"}},attrs:{keyword:["math","float"]}},Blockly.Python.convent_float=function(t){return[`float(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.convent_str={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.CONVENT_STR,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TEXTS_HUE,tool:[],output:"String"}},attrs:{keyword:["text","convent"]}},Blockly.Python.convent_str=function(t){return[`str(${Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.text_add={init:function(){this.jsonInit(this._GETy())},_GETy:function(){return{message0:Blockly.Msg.TEXT_ADD,args0:[{type:"input_value",name:"arg0"},{type:"input_value",name:"arg1"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE,tool:["String concatenation"]}},attrs:{keyword:["text","add"]}},Blockly.Python.text_add=function(t){return[`(str(${Blockly.Python.valueToCode(t,"arg0",Blockly.Python.ORDER_FUNCTION_CALL)||"''"}) + str(${Blockly.Python.valueToCode(t,"arg1",Blockly.Python.ORDER_FUNCTION_CALL)||"''"}))`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.decode_str={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.DECODE_STR,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TEXTS_HUE,tool:[],output:"String"}},attrs:{keyword:["text","decode"]}},Blockly.Python.decode_str=function(t){return[(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+".decode()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.encode_str={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.ENCODE_STR,args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Msg.TEXTS_HUE,tool:[],output:"String"}},attrs:{keyword:["text","encode"]}},Blockly.Python.encode_str=function(t){return[(Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+".encode()",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.text_math_split={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.text_math_split,args0:[{type:"input_value",name:"arg0"},{type:"input_value",name:"arg1"}],inputsInline:!0,output:null,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["text","reduce"]}},Blockly.Python.text_math_split=function(t){var e=Blockly.Python.valueToCode(t,"arg0",Blockly.Python.ORDER_FUNCTION_CALL)||0,n=Blockly.Python.valueToCode(t,"arg1",Blockly.Python.ORDER_FUNCTION_CALL)||"";return t.childBlocks_.length<2||"math_number"===t.childBlocks_[1].type?[`"%.${n}f"%(${e})`,Blockly.Python.ORDER_CONDITIONAL]:[`"%.${n}f"%float(${e})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_hex_number={init:function(){this.appendDummyInput().appendField(Blockly.Msg.MATH_HEX_NUMBER).appendField(new Blockly.FieldVariable("0",function(t){var e="";t=t.toLowerCase();for(var n=0;n<t.length;n++)-1!=="0123456789abcdef".indexOf(t[n])&&(e+=t[n]);return""===e?"0":e}),"NUM"),this.setColour(Blockly.Msg.MATH_HUE),this.setOutput(!0,"Number"),this.tool=[]}},Blockly.Python.math_hex_number=function(t){return["0x"+(t.getFieldValue("NUM")||"0"),Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.text_trim_string={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TEXT_TRIM_STRING,args0:[{type:"input_value",name:"string"},{type:"field_dropdown",name:"MODE",options:[["both sides","BOTH"],["left side","LEFT"],["right side","RIGHT"]]},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["text"]}},Blockly.Python.text_trim_string=function(t){var e=Blockly.Python.valueToCode(t,"string",Blockly.Python.ORDER_FUNCTION_CALL)||"",n={LEFT:`.lstrip(${e})`,RIGHT:`.rstrip(${e})`,BOTH:`.strip(${e})`}[t.getFieldValue("MODE")];return[(Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_MEMBER)||"''")+n,Blockly.Python.ORDER_FUNCTION_CALL]}},function(t,e,n){"use strict";n.r(e),n(0),Blockly.Blocks.emoji_show={init:function(){this.setColour(Blockly.Msg.EMOJI_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput().appendField(Blockly.Msg.EMOJI_SHOW).appendField(new Blockly.FieldColour("#FF0000"),"COLOR");for(let e=0;e<7;e++){var t=this.appendDummyInput();for(let n=0;n<7;n++)t.appendField(new Blockly.FieldCheckbox("FALSE"),"MAP_"+e+"_"+n)}},attrs:{keyword:["emoji"]}},Blockly.Python.emoji_show=function(t){for(var e=t.getFieldValue("COLOR")||"#FF0000",n=[],o=0;o<7;o++){for(var l=[],i=0;i<7;i++)l.push(t.getFieldValue("MAP_"+o+"_"+i));n.push(l)}return JSON.stringify(n).replace(/TRUE/g,1).replace(/FALSE/g,0).replace(/"/g,""),e.replace("#","0x"),"emoji0.show_map("+JSON.stringify(n).replace(/TRUE/g,1).replace(/FALSE/g,0).replace(/"/g,"")+", "+e.replace("#","0x")+")\n"},Blockly.Blocks.emoji_set_single={init:function(){this.jsonInit(this._angleRead())},_angleRead:function(){return{message0:Blockly.Msg.EMOJI_SET_SINGLE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"LINE",options:[["1","0"],["2","1"],["3","2"],["4","3"],["5","4"],["6","5"],["7","6"]]},{type:"field_dropdown",name:"ROW",options:[["1","0"],["2","1"],["3","2"],["4","3"],["5","4"],["6","5"],["7","6"]]},{type:"field_colour",name:"COLOR",colour:"#ff0000"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.EMOJI_HUE,tool:[]}},attrs:{keyword:["emoji"]}},Blockly.Python.emoji_set_single=function(t){Blockly.addModule("emoji");var e=t.getFieldValue("COLOR")||"#FF0000",n=t.getFieldValue("LINE")||"1";return"emoji0.draw_square("+(t.getFieldValue("ROW")||"1")+", "+n+", "+e.replace("#","0x")+")\n"},Blockly.Blocks.emoji_change={init:function(){this.jsonInit(this._angleRead())},_angleRead:function(){return{message0:Blockly.Msg.EMOJI_CHANGE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"INDEX",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.EMOJI_HUE,tool:[]}},attrs:{keyword:["emoji"]}},Blockly.Python.emoji_change=function(t){return Blockly.addModule("emoji"),"emoji0.show_normal("+(t.getFieldValue("INDEX")||"0")+")\n"}},function(t,e){function n(){return[["wasPressed","wasPressed"],["wasReleased","wasReleased"],["longPress","pressFor"],["wasDoublePress","wasDoublePress"]]}function o(){return"core"==localStorage.getItem("_type")||"fire"==localStorage.getItem("_type")||"core2"==localStorage.getItem("_type")?[["A","A"],["B","B"],["C","C"]]:"atom"==localStorage.getItem("_type")||"atom-matrix"==localStorage.getItem("_type")||"PICO"==localStorage.getItem("_type")||"atom-u"==localStorage.getItem("_type")?[["A","A"]]:"stickc"==localStorage.getItem("_type")?[["A","A"],["B","B"]]:"coreInk"==localStorage.getItem("_type")?[["UP","UP"],["MID","MID"],["DOWN","DOWN"],["EXT","EXT"],["PWR","PWR"]]:"paper"==localStorage.getItem("_type")?[["UP","UP"],["MID","MID"],["DOWN","DOWN"]]:[["A","A"],["B","B"]]}function l(){var t=o();if(null==this.sourceBlock_)return[["A","A"]];for(var e=this.sourceBlock_.getFieldValue("EVENT"),n=0;n<t.length;n++)if(t[n][1]==e)return t.splice(n,1),t;return t}function i(){var t=o();if(null==this.sourceBlock_)return[["B","B"]];for(var e=this.sourceBlock_.getFieldValue("BUTTON"),n=0;n<t.length;n++)if(t[n][1]==e)return t.splice(n,1),t;return t}function a(){if(Blockly.isOpenM5Fing)return[["Please create the timer first",""]];let t=BlocklyEditor.getAllBlocks(),e=[];for(let n=0;n<t.length;n++){const o=t[n];if("timer_callback"==o.type){let t=o.inputList[0].fieldRow[1].getValue(),n=[];n.push(""+t),n.push(""+t),e.push(n)}}return e.length<1?[["Please create the timer first",""]]:e}Blockly.Blocks.buttonA_pressed_handler={init:function(){this.setDeletable(!1),this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONA_PRESSED_HANDLER,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[],tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button","event"]}},Blockly.Python.buttonA_pressed_handler=function(t){return["def buttonA_pressed():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.buttonB_pressed_handler={init:function(){this.setDeletable(!1),this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONB_PRESSED_HANDLER,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[],tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button","event"]}},Blockly.Python.buttonB_pressed_handler=function(t){return["def btnB_pressed():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.buttonC_pressed_handler={init:function(){this.setDeletable(!1),this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_PRESSED_HANDLER,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[],tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button","event"]}},Blockly.Python.buttonC_pressed_handler=function(t){return["def buttonC_pressed():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.button_callback={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_CALLBACK,args0:[{type:"field_dropdown",name:"BUTTON",options:o},{type:"field_dropdown",name:"EVENT",options:n}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.BASIC_HUE,tool:[],tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button","event"]}},Blockly.Python.button_callback=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("EVENT")||"wasPressed",o=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",l="def button"+e+"_"+n+"():\n  # global params \n"+o+"  pass\n";return Blockly.defineGlobal().length>0&&(l=(l="def button"+e+"_"+n+"():\n  # global params \n"+o+"  pass\n").replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),l+("pressFor"==n?"btn"+e+"."+n+"(0.8, button"+e+"_"+n+")\n":"btn"+e+"."+n+"(button"+e+"_"+n+")\n")},Blockly.Blocks.button_multiBtnCb={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_MULITBTNCB,args0:[{type:"field_dropdown",name:"BUTTON",options:l},{type:"field_dropdown",name:"EVENT",options:i}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.BASIC_HUE,tool:[],tooltib:"if set the callback param, it will interrupt callback function , or if not set param it will return result(True or False) at once"}},attrs:{keyword:["button","event"]}},Blockly.Python.button_multiBtnCb=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("EVENT")||"B",o=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",l="def multiBtnCb_"+e+n+"():\n  # global params\n"+o+"  pass \n";return Blockly.defineGlobal().length>0&&(l=(l="def multiBtnCb_"+e+n+"():\n  # global params\n"+o+"  pass \n").replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),l+"btn.multiBtnCb(btn"+e+",btn"+n+",multiBtnCb_"+e+n+")\n"},Blockly.Blocks.button_state={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_STATE,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"BUTTON",options:o()},{type:"field_dropdown",name:"EVENT",options:n}],output:null,inputsInline:!0,colour:Blockly.Msg.BASIC_HUE,tool:[]}},attrs:{keyword:["button","event"]}},Blockly.Python.button_state=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("EVENT")||"wasPressed";if("pressFor"==n)var o="btn"+e+"."+n+"(0.8)";else o="btn"+e+"."+n+"()";return[o,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.basic_on_loop={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BASIC_ON_LOOP,args0:[],message1:"%1",args1:[{type:"input_statement",name:"LOOP"}],previousStatement:null,colour:Blockly.Msg.BASIC_HUE,tool:[]}},attrs:{keyword:["event"]}},Blockly.Python.basic_on_loop=function(t){return"while True:\n"+(Blockly.Python.statementToCode(t,"LOOP")||"")+"  wait_ms(2)\n"},Blockly.Blocks.button_ispressed={init:function(){this.jsonInit(this._buttonPressedHandler())},_buttonPressedHandler:function(){return{message0:Blockly.Msg.BUTTONC_ISPRESSED,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"BUTTON",options:o()},{type:"field_dropdown",name:"EVENT",options:[["pressed","isPressed"],["released","isReleased"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.BASIC_HUE,tool:[]}},attrs:{keyword:["button","event"]}},Blockly.Python.button_ispressed=function(t){var e=t.getFieldValue("BUTTON")||"A",n=t.getFieldValue("EVENT")||"isPressed";if("longPress"==n)var o="btn"+e+"."+n+"()";else o="btn"+e+"."+n+"()";return[o,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.function_in_event={init:function(){this.setDeletable(!1),this.jsonInit(this._functionInEvent())},_functionInEvent:function(){return{message0:Blockly.Msg.FUNCTION_IN_EVENT,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[]}},attrs:{keyword:["event"]}},Blockly.Python.function_in_event=function(t){return["def setup():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.function_out_event={init:function(){this.setDeletable(!1),this.jsonInit(this._functionOutEvent())},_functionOutEvent:function(){return{message0:Blockly.Msg.FUNCTION_OUT_EVENT,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[]}},attrs:{keyword:["event"]}},Blockly.Python.function_out_event=function(t){return["def out_event():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.function_main_event={init:function(){this.setDeletable(!1),this.jsonInit(this._functionMainEvent())},_functionMainEvent:function(){return{message0:Blockly.Msg.FUNCTION_MAIN_EVENT,args0:[{type:"input_dummy"},{type:"input_statement",name:"EVENT"}],colour:Blockly.Msg.BUTTON_HUE,tool:[]}},attrs:{keyword:["event"]}},Blockly.Python.function_main_event=function(t){return["def loop():\n"+(Blockly.Python.statementToCode(t,"EVENT",Blockly.Python.ORDER_FUNCTION_CALL)||"")+"\n  pass",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.timer_callback={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.timer_callback,args0:[{type:"field_input",name:"name",text:"timer1"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.BASIC_HUE,tool:["This is a timer, please set the timer name, note that the name cannot be repeated"]}},attrs:{keyword:["timer","event"]}},Blockly.Python.timer_callback=function(t){var e=t.getFieldValue("name")||"timer1",n=`@timerSch.event('${e}')\ndef t${e}():\n  # global params \n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;return Blockly.defineGlobal().length>0&&(n=n.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),n},Blockly.Blocks.timer_setTimerAttr={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.timer_setTimerAttr,args0:[{type:"field_dropdown",name:"start_name",options:a},{type:"input_value",name:"period"},{type:"field_dropdown",name:"mode",options:[["PERIODIC","0x00"],["ONE_SHOT","0x01"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASIC_HUE,tool:["Set timer properties"]}},attrs:{keyword:["timer","event"]}},Blockly.Python.timer_setTimerAttr=function(t){return`timerSch.setTimer('${t.getFieldValue("start_name")||""}', ${Blockly.Python.valueToCode(t,"period",Blockly.Python.ORDER_FUNCTION_CALL)||"100"}, ${t.getFieldValue("mode")||"0x00"})\n`},Blockly.Blocks.timer_setStart={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.timer_setStart,args0:[{type:"field_dropdown",name:"start_name",options:a},{type:"input_value",name:"period"},{type:"field_dropdown",name:"mode",options:[["PERIODIC","0x00"],["ONE_SHOT","0x01"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASIC_HUE,tool:["Start timer"]}},attrs:{keyword:["timer","event"]}},Blockly.Python.timer_setStart=function(t){return`timerSch.run('${t.getFieldValue("start_name")||""}', ${Blockly.Python.valueToCode(t,"period",Blockly.Python.ORDER_FUNCTION_CALL)||"100"}, ${t.getFieldValue("mode")||"0x00"})\n`},Blockly.Blocks.timer_setStop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.timer_setStop,args0:[{type:"field_dropdown",name:"start_name",options:a}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.BASIC_HUE,tool:["Stop timer"]}},attrs:{keyword:["timer","event"]}},Blockly.Python.timer_setStop=function(t){return`timerSch.stop('${t.getFieldValue("start_name")||""}')\n`}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.lcd_clear={init:function(){this.jsonInit(this._lcdclear())},_lcdclear:function(){return{message0:Blockly.Msg.LCD_CLEAR,args0:[{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_clear=function(t){return"lcd.clear()\n"},Blockly.Blocks.lcd_fill={init:function(){this.jsonInit(this._lcdfill())},_lcdfill:function(){return{message0:Blockly.Msg.LCD_FILL,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#000000"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_fill=function(t){return"lcd.fill("+(t.getFieldValue("COLOR")||"").replace("#","0x")+")\n"},Blockly.Blocks.lcd_fill_gray={init:function(){this.jsonInit(this._lcdfill())},_lcdfill:function(){return{message0:Blockly.Msg.LCD_FILL,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_fill_gray=function(t){return"lcd.fill("+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")+")\n"},Blockly.Blocks.lcd_print={init:function(){this.jsonInit(this._lcdprint())},_lcdprint:function(){return{message0:Blockly.Msg.LCD_PRINT,args0:[{type:"input_value",name:"TEXT"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_print=function(t){return"lcd.print("+[Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_FUNCTION_CALL)||"''",Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_print_gray={init:function(){this.jsonInit(this._lcdprint())},_lcdprint:function(){return{message0:Blockly.Msg.LCD_PRINT,args0:[{type:"input_value",name:"TEXT"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_print_gray=function(t){return"lcd.print("+[Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_FUNCTION_CALL)||"''",Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0","White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK"].join(", ")+")\n"};let l=[["FONT_Default","FONT_Default"],["FONT_DefaultSmall","FONT_DefaultSmall"],["FONT_DejaVu18","FONT_DejaVu18"],["FONT_DejaVu24","FONT_DejaVu24"],["FONT_DejaVu40","FONT_DejaVu40"],["FONT_DejaVu56","FONT_DejaVu56"],["FONT_DejaVu72","FONT_DejaVu72"],["FONT_Ubuntu","FONT_Ubuntu"],["FONT_Comic","FONT_Comic"],["FONT_UNICODE","FONT_UNICODE"]],i=[["FONT_Default","FONT_Default"]];function a(){return["core2","tough"].indexOf(localStorage.getItem("_type"))>-1?i:l}Blockly.Blocks.lcd_setFont={init:function(){this.jsonInit(this._lcdspetfont())},_lcdspetfont:function(){return{message0:Blockly.Msg.LCD_SETFONT,args0:[{type:"input_dummy",name:"font"},{type:"field_dropdown",name:"FONT_FAMILY",options:a}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_setFont=function(t){return"lcd.font(lcd."+t.getFieldValue("FONT_FAMILY")+")\n"},Blockly.Blocks.lcd_pixel={init:function(){this.jsonInit(this._lcdpixel())},_lcdpixel:function(){return{message0:Blockly.Msg.LCD_PIXEL,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_pixel=function(t){return"lcd.pixel("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_pixel_gray={init:function(){this.jsonInit(this._lcdpixel())},_lcdpixel:function(){return{message0:Blockly.Msg.LCD_PIXEL,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_pixel_gray=function(t){return"lcd.pixel("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0","White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK"].join(", ")+")\n"},Blockly.Blocks.lcd_line={init:function(){this.jsonInit(this._lcdline())},_lcdline:function(){return{message0:Blockly.Msg.LCD_LINE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_line=function(t){return"lcd.line("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_line_gray={init:function(){this.jsonInit(this._lcdline())},_lcdline:function(){return{message0:Blockly.Msg.LCD_LINE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_line_gray=function(t){return"lcd.line("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0","White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK"].join(", ")+")\n"},Blockly.Blocks.lcd_rect={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_RECT,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"WIDTH"},{type:"input_value",name:"HEIGHT"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_rect=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"WIDTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"HEIGHT",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=t.getFieldValue("COLOR");return"lcd.rect("+[e,n,o,l,t.getFieldValue("COLOR_TYPE")+"="+i.replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_rect_gray={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_RECT,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"WIDTH"},{type:"input_value",name:"HEIGHT"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_rect_gray=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"WIDTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"HEIGHT",Blockly.Python.ORDER_FUNCTION_CALL)||"0";let i="White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK";return"lcd.rect("+[e,n,o,l,t.getFieldValue("COLOR_TYPE")+"="+i].join(", ")+")\n"},Blockly.Blocks.lcd_triangle={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_TRIANGLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_triangle=function(t){return"lcd.triangle("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_triangle_gray={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_TRIANGLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_triangle_gray=function(t){return"lcd.triangle("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")].join(", ")+")\n"},Blockly.Blocks.lcd_circle={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_CIRCLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_circle=function(t){return"lcd.circle("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_circle_gray={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_CIRCLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_circle_gray=function(t){return"lcd.circle("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")].join(", ")+")\n"},Blockly.Blocks.lcd_ellipse={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_ELLIPSE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RX"},{type:"input_value",name:"RY"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_ellipse=function(t){return"lcd.ellipse("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RY",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_ellipse_gray={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_ELLIPSE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RX"},{type:"input_value",name:"RY"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_ellipse_gray=function(t){return"lcd.ellipse("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RY",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")].join(", ")+")\n"},Blockly.Blocks.lcd_arc={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_ARC,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"THICK"},{type:"input_value",name:"START"},{type:"input_value",name:"END"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_arc=function(t){return"lcd.arc("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"START",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"END",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+t.getFieldValue("COLOR").replace("#","0x")].join(", ")+")\n"},Blockly.Blocks.lcd_arc_gray={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_ARC,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"THICK"},{type:"input_value",name:"START"},{type:"input_value",name:"END"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_arc_gray=function(t){return"lcd.arc("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"START",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"END",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK")].join(", ")+")\n"},Blockly.Blocks.lcd_polygon={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_POLYGON,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"SIDES"},{type:"input_value",name:"THICK"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:"#ffffff"},{type:"input_dummy"},{type:"field_angle",name:"ROTATE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_polygon=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"SIDES",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",a=t.getFieldValue("COLOR_TYPE"),s=t.getFieldValue("COLOR"),r=t.getFieldValue("ROTATE");return"lcd.polygon("+[e,n,o,l,i,a+"="+s.replace("#","0x"),"rotate="+r].join(", ")+")\n"},Blockly.Blocks.lcd_polygon_gray={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_POLYGON,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"SIDES"},{type:"input_value",name:"THICK"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_dropdown",name:"COLOR",options:o.coreink_color},{type:"input_dummy"},{type:"field_angle",name:"ROTATE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_polygon_gray=function(t){return"lcd.polygon("+[Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"SIDES",Blockly.Python.ORDER_FUNCTION_CALL)||"0",Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",t.getFieldValue("COLOR_TYPE")+"="+("White"===t.getFieldValue("COLOR")?"lcd.WHITE":"lcd.BLACK"),"rotate="+t.getFieldValue("ROTATE")].join(", ")+")\n"},Blockly.Blocks.lcd_fill_paper={init:function(){this.jsonInit(this._lcdfill())},_lcdfill:function(){return{message0:Blockly.Msg.LCD_FILL,args0:[{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_fill_paper=function(t){var e=t.getFieldValue("COLOR")||"0";return"lcd.fill("+Blockly.paperColors.indexOf(e)+")\n"},Blockly.Blocks.lcd_print_paper={init:function(){this.jsonInit(this._lcdprint())},_lcdprint:function(){return{message0:Blockly.Msg.LCD_PRINT,args0:[{type:"input_value",name:"TEXT"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_print_paper=function(t){var e=Blockly.Python.valueToCode(t,"TEXT",Blockly.Python.ORDER_FUNCTION_CALL)||"''",n=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=t.getFieldValue("COLOR")||"0";return"lcd.print("+[e,n,o,Blockly.paperColors.indexOf(l)].join(", ")+")\n"},Blockly.Blocks.lcd_pixel_paper={init:function(){this.jsonInit(this._lcdpixel())},_lcdpixel:function(){return{message0:Blockly.Msg.LCD_PIXEL,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_pixel_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=t.getFieldValue("COLOR")||"0";return"lcd.pixel("+[e,n,Blockly.paperColors.indexOf(o)].join(", ")+")\n"},Blockly.Blocks.lcd_line_paper={init:function(){this.jsonInit(this._lcdline())},_lcdline:function(){return{message0:Blockly.Msg.LCD_LINE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_dummy"},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_line_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=t.getFieldValue("COLOR")||"0";return"lcd.line("+[e,n,o,l,Blockly.paperColors.indexOf(i)].join(", ")+")\n"},Blockly.Blocks.lcd_rect_paper={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_RECT,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"WIDTH"},{type:"input_value",name:"HEIGHT"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_rect_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"WIDTH",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"HEIGHT",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=t.getFieldValue("COLOR")||"0";let a=Blockly.paperColors.indexOf(i);return"lcd.rect("+[e,n,o,l,t.getFieldValue("COLOR_TYPE")+"="+a].join(", ")+")\n"},Blockly.Blocks.lcd_triangle_paper={init:function(){this.jsonInit(this._lcdrect())},_lcdrect:function(){return{message0:Blockly.Msg.LCD_TRIANGLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"X1"},{type:"input_value",name:"Y1"},{type:"input_value",name:"X2"},{type:"input_value",name:"Y2"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_triangle_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"X1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"Y1",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"X2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",a=Blockly.Python.valueToCode(t,"Y2",Blockly.Python.ORDER_FUNCTION_CALL)||"0",s=t.getFieldValue("COLOR_TYPE"),r=t.getFieldValue("COLOR")||"0";return"lcd.triangle("+[e,n,o,l,i,a,s+"="+Blockly.paperColors.indexOf(r)].join(", ")+")\n"},Blockly.Blocks.lcd_circle_paper={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_CIRCLE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_circle_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=t.getFieldValue("COLOR_TYPE"),i=t.getFieldValue("COLOR")||"0";return"lcd.circle("+[e,n,o,l+"="+Blockly.paperColors.indexOf(i)].join(", ")+")\n"},Blockly.Blocks.lcd_ellipse_paper={init:function(){this.jsonInit(this._lcdcircle())},_lcdcircle:function(){return{message0:Blockly.Msg.LCD_ELLIPSE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RX"},{type:"input_value",name:"RY"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_ellipse_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RX",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"RY",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=t.getFieldValue("COLOR_TYPE"),a=t.getFieldValue("COLOR")||"0";return"lcd.ellipse("+[e,n,o,l,i+"="+Blockly.paperColors.indexOf(a)].join(", ")+")\n"},Blockly.Blocks.lcd_arc_paper={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_ARC,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"THICK"},{type:"input_value",name:"START"},{type:"input_value",name:"END"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_arc_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"START",Blockly.Python.ORDER_FUNCTION_CALL)||"0",a=Blockly.Python.valueToCode(t,"END",Blockly.Python.ORDER_FUNCTION_CALL)||"0",s=t.getFieldValue("COLOR_TYPE"),r=t.getFieldValue("COLOR")||"0";return"lcd.arc("+[e,n,o,l,i,a,s+"="+Blockly.paperColors.indexOf(r)].join(", ")+")\n"},Blockly.Blocks.lcd_polygon_paper={init:function(){this.jsonInit(this._lcdarc())},_lcdarc:function(){return{message0:Blockly.Msg.LCD_POLYGON,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"RADIUS"},{type:"input_value",name:"SIDES"},{type:"input_value",name:"THICK"},{type:"input_dummy"},{type:"field_dropdown",name:"COLOR_TYPE",options:[[Blockly.Msg._OPTION_TO_BORDERCOLOR,"color"],[Blockly.Msg._OPTION_TO_FILLCOLOR,"fillcolor"]]},{type:"field_colour",name:"COLOR",colour:Blockly.paperColors[0],columns:"8",colourOptions:Blockly.paperColors},{type:"input_dummy"},{type:"field_angle",name:"ROTATE"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:[]}},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_polygon_paper=function(t){var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0",o=Blockly.Python.valueToCode(t,"RADIUS",Blockly.Python.ORDER_FUNCTION_CALL)||"0",l=Blockly.Python.valueToCode(t,"SIDES",Blockly.Python.ORDER_FUNCTION_CALL)||"0",i=Blockly.Python.valueToCode(t,"THICK",Blockly.Python.ORDER_FUNCTION_CALL)||"0",a=t.getFieldValue("COLOR_TYPE"),s=t.getFieldValue("COLOR")||"0";return"lcd.polygon("+[e,n,o,l,i,a+"="+Blockly.paperColors.indexOf(s),"rotate="+t.getFieldValue("ROTATE")].join(", ")+")\n"},Blockly.Blocks.lcd_qrcode={init:function(){this.jsonInit(this._lcdarc()),this.helpImg=o.helpImg,this.appendDummyInput("help").appendField(new Blockly.FieldImage(this.helpImg,25,25,"*",this.helpLink.bind(this)))},_lcdarc:function(){return{message0:Blockly.Msg.LCD_QRCODE,args0:[{type:"input_value",name:"text"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"width"},{type:"input_value",name:"version"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.LCD_HUE,tool:["version: 1 ~ 10"]}},helpLink:function(){window.open("https://en.wikipedia.org/wiki/QR_code#Storage")},attrs:{keyword:["lcd","graphic"]}},Blockly.Python.lcd_qrcode=function(t){return`lcd.qrcode(${Blockly.Python.valueToCode(t,"text",Blockly.Python.ORDER_FUNCTION_CALL)||""}, x=${Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, y=${Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, width=${Blockly.Python.valueToCode(t,"width",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, version=${Blockly.Python.valueToCode(t,"version",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`}},function(t,e){var n=function(){var t=[["line","bar","pie"]];for(let n=0;n<t.length;n++){var e=[];for(let o=0;o<t[n].length;o++)e[e.length]=[t[n][o],t[n][o]];t[n]=e}return t}();Blockly.Blocks.remote_set_qrcode={init:function(){this.jsonInit(this._functionInEvent())},_functionInEvent:function(){return{message0:Blockly.Msg.REMOTE_SET_QRCODE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"SIZE"}],inputsInline:!0,previousStatement:null,nextStatement:null,tool:["Generate access address qr code"],colour:Blockly.Msg.REMOTE_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remote_set_qrcode=function(t){Blockly.addModule("remote");for(var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"72",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"32",o=Blockly.Python.valueToCode(t,"SIZE",Blockly.Python.ORDER_FUNCTION_CALL)||"176",l=[],i=0;i<Blockly.Remotes.length;i++)l.push({name:Blockly.Remotes[i].name,event:Blockly.Remotes[i].event,type:Blockly.Remotes[i].type});return JSON.stringify({id:localStorage.getItem("mui_apikey"),data:l}),"lcd.qrcode('"+window.remoteURL+"?remote="+Blockly.REMOTE_KEY+"', "+e+", "+n+", "+o+")\n"},Blockly.Blocks.remote_set_title={init:function(){this.jsonInit(this._remoteSetTitle())},_remoteSetTitle:function(){return{message0:Blockly.Msg.REMOTE_SET_TITLE,args0:[{type:"input_value",name:"title"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Msg.REMOTE_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remote_set_title=function(t){Blockly.addModule("remote");var e=Blockly.Python.valueToCode(t,"title",Blockly.Python.ORDER_FUNCTION_CALL)||"";return(e=e.replace(/\'/g,""))||(e="M5Remote"),t.svgGroup_.getAttribute("visibility")||Blockly.addRemote({id:t.id,title:e,type:"title"}),""},Blockly.Blocks.remote_add_switch={init:function(){this.appendDummyInput().appendField(Blockly.Msg.REMOTE_ADD_SWITCH).appendField(new Blockly.FieldTextInput("SwitchName"),"NAME").appendField("","PARAMS").appendField("index").appendField(new Blockly.FieldTextInput("0"),"index"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},_functionInEvent:()=>({message0:Blockly.Msg.REMOTE_ADD_SWITCH,args0:[{type:"input_dummy"},{type:"input_value",name:"NAME",text:"SwitchName"}],inputsInline:!0,previousStatement:null,nextStatement:null,tool:["Set switches to perform different logic"],colour:Blockly.Msg.REMOTE_HUE}),setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"remote_add_switch"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Set switches to perform different logic"]}}},Blockly.Python.remote_add_switch=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"SwitchName",n=t.getFieldValue("NAME")||"SwitchName",o=t.getFieldValue("index"),l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);var _;return _=r.length>0?"def "+n+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+n+"("+l+"):\n"+i,Blockly.addRemote({id:t.id,event:n,code:_,name:e,type:"switch",index:o}),""},Blockly.Blocks.remote_add_button={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_BUTTON).appendField(new Blockly.FieldTextInput("ButtonName"),"NAME").appendField("","PARAMS").appendField("index").appendField(new Blockly.FieldTextInput("0"),"index"),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"remote_add_button"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Set click logic"]}}},Blockly.Python.remote_add_button=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"ButtonName",n=t.getFieldValue("NAME")||"ButtonName",o=t.getFieldValue("index"),l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);var _;return _=r.length>0?"def "+n+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+n+"("+l+"):\n"+i,Blockly.addRemote({id:t.id,event:n,code:_,name:e,type:"button",index:o}),""},Blockly.Blocks.remote_add_slider={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_SLIDER).appendField(new Blockly.FieldTextInput("SliderName"),"NAME").appendField("","PARAMS").appendField("index").appendField(new Blockly.FieldTextInput("0"),"index"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"remote_add_slider"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Setting operations such as lighting levels"]}}},Blockly.Python.remote_add_slider=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"SliderName",n=t.getFieldValue("NAME")||"SliderName",o=t.getFieldValue("index"),l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);var _;return _=r.length>0?"def "+n+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+n+"("+l+"):\n"+i,Blockly.addRemote({id:t.id,event:n,code:_,name:e,type:"slider",index:o}),""},Blockly.Blocks.remote_add_label={init:function(){window.__aaa=this,this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_LABEL.ADD).appendField(new Blockly.FieldDropdown([["Others","Others"],["Temperature","Temperature"],["Humidity","Humidity"],["Pressure","Pressure"],["PIR Status","PIR Status"],["Angle","Angle"],["Weight","Weight"]]),"TYPE").appendField(Blockly.Msg.ADD_REMOTE_LABEL.LABEL).appendField(new Blockly.FieldTextInput("LabelName"),"NAME").appendField("","PARAMS").appendField("index").appendField(new Blockly.FieldTextInput("0"),"index").appendField("interval").appendField(new Blockly.FieldTextInput("3000"),"interval"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defreturn.domToMutation,decompose:Blockly.Blocks.procedures_defreturn.decompose,compose:Blockly.Blocks.procedures_defreturn.compose,getProcedureDef:function(){return"remote_add_label"==this.type?[this.getFieldValue("NAME"),this.arguments_,!0,!1]:[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defreturn.getVars,getVarModels:Blockly.Blocks.procedures_defreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defreturn.customContextMenu,blockly_config:function(){return{tool:["Returns the current air temperature"]}}},Blockly.Python.remote_add_label=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"LabelName",n=t.getFieldValue("NAME")||"LabelName",o=t.getFieldValue("index"),l=t.getFieldValue("interval"),i=Number(l);(isNaN(i)||l<3e3)&&(l=3e3);var a=t.getFieldValue("PARAMS").replace(/with: /g,"")||"",s=t.getFieldValue("TYPE")||"Others";n="_remote_"+(n=n.replace(/ /g,"_"));for(var r=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"",c=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",u=Blockly.Units.map(t=>t.name),_=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),d=Blockly.defineGlobal().concat(u).concat(_),h=a.split(", "),y=0;y<d.length;y++)h.indexOf(d[y])>-1&&(d.splice(y,1),y--);var p,m;return m=""!==c?"  return "+c:"  pass",p=d.length>0?"def "+n+"("+a+"):\n  global "+d.join(", ")+" \n"+r+m:"def "+n+"("+a+"):\n"+r+m,Blockly.addRemote({id:t.id,event:n,code:p,name:e,type:"label",icon:s,index:o,interval:l}),""},Blockly.Blocks.remote_add_graph={init:function(){this.jsonInit(this._rgbmulyisetcolor())},_rgbmulyisetcolor:function(){return{message0:Blockly.Msg.REMOTE_ADD_GRAPH,args0:[{type:"input_dummy"},{type:"field_dropdown",name:"VARNAME",options:n[0]},{type:"input_value",name:"PIN"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.REMOTE_HUE,tool:["Select com connect off"]}},attrs:{keyword:["remote"]}},Blockly.Python.remote_add_graph=function(t){return t.getFieldValue("VARNAME")+".graph("+(Blockly.Python.valueToCode(t,"PIN",Blockly.Python.ORDER_FUNCTION_CALL)||"26")+")\n"},Blockly.Blocks.remote_add_statistics={init:function(){window.__aaa=this,this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_STATISTICS.ADD).appendField(new Blockly.FieldDropdown(n[0]),"TYPE").appendField(Blockly.Msg.ADD_REMOTE_STATISTICS.LABEL).appendField(new Blockly.FieldTextInput("Chart-name"),"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defreturn.domToMutation,decompose:Blockly.Blocks.procedures_defreturn.decompose,compose:Blockly.Blocks.procedures_defreturn.compose,getVars:Blockly.Blocks.procedures_defreturn.getVars,getVarModels:Blockly.Blocks.procedures_defreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defreturn.customContextMenu,blockly_config:function(){return{tool:["Returns the current air temperature"]}}},Blockly.Python.remote_add_statistics=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"Chart-name",n=t.getFieldValue("NAME")||"Chart-name",o=t.getFieldValue("PARAMS").replace(/with: /g,"")||"",l=t.getFieldValue("TYPE")||"Others";n="_remote_"+(n=n.replace(/ /g,"_"));for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",s=Blockly.Units.map(t=>t.name),r=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),c=Blockly.defineGlobal().concat(s).concat(r),u=o.split(", "),_=0;_<c.length;_++)u.indexOf(c[_])>-1&&(c.splice(_,1),_--);var d,h;return h=""!==a?"  return "+a:"  pass",d=c.length>0?"def "+n+"("+o+"):\n  global "+c.join(", ")+" \n"+i+h:"def "+n+"("+o+"):\n"+i+h,Blockly.addRemote({id:t.id,event:n,code:d,name:e,type:"charts",icon:l}),""},Blockly.Blocks.remote_add_time={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_TIMER).appendField("","PARAMS"),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Set click logic"]}}},Blockly.Python.remote_add_time=function(t){Blockly.addModule("remote");for(var e=t.getFieldValue("PARAMS").replace(/with: /g,"")||"",n=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",o=Blockly.Units.map(t=>t.name),l=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),i=Blockly.defineGlobal().concat(o).concat(l),a=e.split(", "),s=0;s<i.length;s++)a.indexOf(i[s])>-1&&(i.splice(s,1),s--);var r;return r=i.length>0?"def ("+e+"):\n  global "+i.join(", ")+" \n"+n:"def ("+e+"):\n"+n,Blockly.addRemote({id:t.id,code:r,name:"time",type:"timer"}),""},Blockly.Blocks.remote_add_input={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_INPUT).appendField(new Blockly.FieldTextInput("InputName"),"NAME").appendField("","PARAMS").appendField("index").appendField(new Blockly.FieldTextInput("0"),"index"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"remote_add_input"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Setting operations such as lighting levels"]}}},Blockly.Python.remote_add_input=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"InputName",n=t.getFieldValue("NAME")||"InputName",o=t.getFieldValue("index"),l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);var _;return _=r.length>0?"def "+n+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+n+"("+l+"):\n"+i,Blockly.addRemote({id:t.id,event:n,code:_,name:e,type:"input",index:o}),""}},function(t,e){Blockly.RemoteV2=[],Blockly.TimerCount=0,Blockly.addRemoteV2=function(t){if(0===Blockly.RemoteV2.length)return Blockly.RemoteV2.push(t);for(var e=0;e<Blockly.RemoteV2.length;e++)if(Blockly.RemoteV2[e].id==t.id){Blockly.RemoteV2.splice(e,1);break}Blockly.RemoteV2.push(t)},Blockly.Blocks.create_remote_chart={init:function(){this.setColour(Blockly.Msg.REMOTE_HUE),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setInputsInline(!1),this.appendDummyInput().appendField("Create chart"),this.appendDummyInput().appendField("Name        ").appendField(new Blockly.FieldTextInput("Chart"),"NAME"),this.appendDummyInput().appendField("ChartType").appendField(new Blockly.FieldDropdown([["Line","1"],["Bar","2"]]),"TYPE"),this.appendDummyInput().appendField("DataType ").appendField(new Blockly.FieldDropdown([["Number","2"],["String","1"]]),"DATATYPE"),this.appendDummyInput().appendField("Key           ").appendField(new Blockly.FieldTextInput("datapoint"),"KEY"),this.appendValueInput("VALUE").appendField("Value"),this.appendValueInput("INTERVAL").appendField("Interval(ms)")}},Blockly.Python.create_remote_chart=function(t){var e=t.getFieldValue("NAME")||"Chart",n=t.getFieldValue("TYPE")||1,o=t.getFieldValue("DATATYPE")||1,l=t.getFieldValue("KEY")||"datapoint",i=Blockly.Python.valueToCode(t,"VALUE",Blockly.Python.ORDER_FUNCTION_CALL)||null,a=Blockly.Python.valueToCode(t,"INTERVAL",Blockly.Python.ORDER_FUNCTION_CALL)||3e3,s="";return null==i?s:(s=`\n@timerSch.event('__chartTimer${t.id}')\ndef tcharttimer():\n  urequests.post("http://remote.api.m5stack.com/api/datapoint/${localStorage.getItem("mui_apikey")}", data='{"key": "${l}", "value": "' + str(${i}) + '", "type": "${o}"}', headers={"Content-Type": "application/json"})\n  pass\ntimerSch.run('__chartTimer${t.id}', ${a}, 0x00)\n  `,Blockly.addRemoteV2({name:e,type:n,dataType:o,bindingKey:l,code:s,id:t.id}),"")},Blockly.Blocks.create_remote_button={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_BUTTON).appendField(new Blockly.FieldTextInput("ButtonName"),"NAME").appendField("","PARAMS"),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"create_remote_button"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Set click logic"]}}},Blockly.Python.create_remote_button=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"ButtonName",n=t.getFieldValue("NAME")||"ButtonName",o=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var l=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r=o.split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=s.length>0?"def "+n+"("+o+"):\n  global "+s.join(", ")+" \n"+l:"def "+n+"("+o+"):\n"+l,Blockly.addRemoteV2({name:e,type:"3",dataType:"3",bindingKey:e,code:u,id:t.id}),""},Blockly.Blocks.create_remote_slider={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ADD_REMOTE_SLIDER).appendField(new Blockly.FieldTextInput("SliderName"),"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"create_remote_slider"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Setting operations such as lighting levels"]}}},Blockly.Python.create_remote_slider=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"SliderName",n=t.getFieldValue("NAME")||"SliderName",o=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var l=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r=o.split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=s.length>0?"def "+n+"("+o+"):\n  global "+s.join(", ")+" \n"+l:"def "+n+"("+o+"):\n"+l,Blockly.addRemoteV2({name:e,type:"4",dataType:"3",bindingKey:e,code:u,id:t.id}),""},Blockly.Blocks.create_remote_switch={init:function(){this.appendDummyInput().appendField(Blockly.Msg.REMOTE_ADD_SWITCH).appendField(new Blockly.FieldTextInput("SwitchName"),"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.REMOTE_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},_functionInEvent:()=>({message0:Blockly.Msg.REMOTE_ADD_SWITCH,args0:[{type:"input_dummy"},{type:"input_value",name:"NAME",text:"SwitchName"}],inputsInline:!0,previousStatement:null,nextStatement:null,tool:["Set switches to perform different logic"],colour:Blockly.Msg.REMOTE_HUE}),setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return"create_remote_switch"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,blockly_config:function(){return{tool:["Set switches to perform different logic"]}}},Blockly.Python.create_remote_switch=function(t){Blockly.addModule("remote");var e=t.getFieldValue("NAME")||"SwitchName",n=t.getFieldValue("NAME")||"SwitchName",o=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";n="_remote_"+(n=n.replace(/ /g,"_"));for(var l=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r=o.split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=s.length>0?"def "+n+"("+o+"):\n  global "+s.join(", ")+" \n"+l:"def "+n+"("+o+"):\n"+l,Blockly.addRemoteV2({name:e,type:"5",dataType:"3",bindingKey:e,code:u,id:t.id}),""}},function(t,e){function n(t,e,n,o,l){let i=function(t){let e=-1;return Blockly.RemotePlus.forEach(function(n,o){n.blockId===t.id&&(e=o,t.getField("NAME").setValue(n.name),["label","image","gauge"].indexOf(n.type)>-1&&t.getField("interval").setValue(n.interval))}),e}(t),a=t.id;if(i<0){let t=function(t){let e;return Blockly.TempRemotePlus.forEach(function(n,o){n.blockId?n.blockId===t&&(e=n):n.id===t&&(e={...n,blockId:n.id})}),e}(a),i={blockId:a,name:e,event:n,code:o,type:l};"title"===l&&(i.dataSource="uiflow");let s=t||i;Blockly.addRemotePlus_(s)}else{let t=Blockly.getRemotePlusByBlockId_(a);t.setProp("event",n),t.setProp("code",o)}}Blockly.Blocks.remoteplus_set_qrcode={init:function(){this.jsonInit(this._functionInEvent())},_functionInEvent:function(){return{message0:Blockly.Msg.REMOTE_SET_QRCODE,args0:[{type:"input_dummy"},{type:"input_value",name:"X"},{type:"input_value",name:"Y"},{type:"input_value",name:"SIZE"}],inputsInline:!0,previousStatement:null,nextStatement:null,tool:["Generate access address qr code"],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_set_qrcode=function(t){Blockly.addModule("remotePlus");for(var e=Blockly.Python.valueToCode(t,"X",Blockly.Python.ORDER_FUNCTION_CALL)||"72",n=Blockly.Python.valueToCode(t,"Y",Blockly.Python.ORDER_FUNCTION_CALL)||"32",o=Blockly.Python.valueToCode(t,"SIZE",Blockly.Python.ORDER_FUNCTION_CALL)||"176",l=[],i=0;i<Blockly.RemotePlus.length;i++)l.push({name:Blockly.RemotePlus[i].name,event:Blockly.RemotePlus[i].event,type:Blockly.RemotePlus[i].type});return"lcd.qrcode('"+window.remotePlusURL+"/remote?id="+Blockly.REMOTE_PLUS_KEY+"', "+e+", "+n+", "+o+")\n"},Blockly.Blocks.remoteplus_add_button={init:function(){this.appendDummyInput().appendField("Button").appendField("remotename","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_button"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_button=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"ButtonName",o=t.getFieldValue("NAME")||"ButtonName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="button_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"button"),""},Blockly.Blocks.remoteplus_add_switch={init:function(){this.appendDummyInput().appendField("Switch").appendField("1","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.arguments_.push("switch_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("switch_value",null,null)),this.updateParams_(),this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_switch"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_switch=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"SwitchName",o=t.getFieldValue("NAME")||"SwitchName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="switch_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"switch"),""},Blockly.Blocks.remoteplus_add_slider={init:function(){this.appendDummyInput().appendField("Slider").appendField("remotename","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.arguments_.push("slider_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("slider_value",null,null)),this.updateParams_(),this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_slider"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_slider=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"SliderName",o=t.getFieldValue("NAME")||"SliderName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="slider_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"slider"),""},Blockly.Blocks.remoteplus_add_label={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"Label %1 Event  interval(ms): %2",args0:[{type:"field_label",name:"NAME",text:"remotename"},{type:"field_label",name:"interval",text:"3000"}],message1:"Set data %1",args1:[{type:"input_value",name:"RETURN",align:"RIGHT"}],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_add_label=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"ImageName",o=t.getFieldValue("NAME")||"ImageName";o="label_"+(o=o.replace(/ /g,"_"))+"_callback";for(var l=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r="".split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=""!==l?"  return "+l:"  pass",n(t,e,o,s.length>0?"def "+o+"():\n  global "+s.join(", ")+" \n"+u:"def "+o+"():\n"+u,"label"),""},Blockly.Blocks.remoteplus_add_input={init:function(){this.appendDummyInput().appendField("Input").appendField("remotename","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.arguments_.push("input_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("input_value",null,null)),this.updateParams_(),this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_input"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_input=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"InputName",o=t.getFieldValue("NAME")||"InputName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="input_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"input"),""},Blockly.Blocks.remoteplus_add_image={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"Image %1 Event  interval(ms): %2",args0:[{type:"field_label",name:"NAME",text:"remotename"},{type:"field_label",name:"interval",text:"3000"}],message1:"Set image url %1",args1:[{type:"input_value",name:"RETURN",align:"RIGHT"}],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_add_image=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"ImageName",o=t.getFieldValue("NAME")||"ImageName";o="image_"+(o=o.replace(/ /g,"_"))+"_callback";for(var l=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r="".split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=""!==l?"  return "+l:"  pass",n(t,e,o,s.length>0?"def "+o+"():\n  global "+s.join(", ")+" \n"+u:"def "+o+"():\n"+u,"image"),""},Blockly.Blocks.remoteplus_add_stepper={init:function(){this.appendDummyInput().appendField("Stepper").appendField("remotename","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.arguments_.push("stepper_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("stepper_value",null,null)),this.updateParams_(),this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_stepper"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_stepper=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"StepperName",o=t.getFieldValue("NAME")||"StepperName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="stepper_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"stepper"),""},Blockly.Blocks.remoteplus_add_chart={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"Chart %1 Event  interval(ms): %2",args0:[{type:"field_label",name:"NAME",text:"remotename"},{type:"field_label",name:"interval",text:"3000"}],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_add_chart=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"ImageName",o=t.getFieldValue("NAME")||"ImageName";o="chart_"+(o=o.replace(/ /g,"_"))+"_callback";for(var l=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r="".split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=""!==l?"  return "+l:"  pass",n(t,e,o,s.length>0?"def "+o+"():\n  global "+s.join(", ")+" \n"+u:"def "+o+"():\n"+u,"chart"),""},Blockly.Blocks.remoteplus_add_joystick={init:function(){this.appendDummyInput().appendField("Joystick").appendField("remotename","NAME").appendField("Callback").appendField("","PARAMS"),this.setColour(Blockly.Msg.REMOTE_PLUS_HUE),this.arguments_=[],this.argumentVarModels_=[],this.arguments_.push("joystick_x_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("joystick_x_value",null,null)),this.arguments_.push("joystick_y_value"),this.argumentVarModels_.push(BlocklyEditor.createVariable("joystick_y_value",null,null)),this.updateParams_(),this.setStatements_(!0),this.statementConnection_=null},attrs:{keyword:["remote"]},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return"remoteplus_add_joystick"==this.type?[this.getFieldValue("NAME"),this.arguments_,!1,!1]:[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu},Blockly.Python.remoteplus_add_joystick=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"JoystickName",o=t.getFieldValue("NAME")||"JoystickName",l=t.getFieldValue("PARAMS").replace(/with: /g,"")||"";o="joystick_"+(o=o.replace(/ /g,"_"))+"_callback";for(var i=Blockly.Python.statementToCode(t,"STACK",Blockly.Python.ORDER_FUNCTION_CALL)||"  pass",a=Blockly.Units.map(t=>t.name),s=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),r=Blockly.defineGlobal().concat(a).concat(s),c=l.split(", "),u=0;u<r.length;u++)c.indexOf(r[u])>-1&&(r.splice(u,1),u--);return n(t,e,o,r.length>0?"def "+o+"("+l+"):\n  global "+r.join(", ")+" \n"+i:"def "+o+"("+l+"):\n"+i,"joystick"),""},Blockly.Blocks.remoteplus_add_gauge={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"Gauge %1 Event  interval(ms): %2",args0:[{type:"field_label",name:"NAME",text:"remotename"},{type:"field_label",name:"interval",text:"3000"}],message1:"Set data %1",args1:[{type:"input_value",name:"RETURN",align:"RIGHT"}],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_add_gauge=function(t){Blockly.addModule("remoteplus");var e=t.getFieldValue("NAME")||"GaugeName",o=t.getFieldValue("NAME")||"GaugeName";o="gauge_"+(o=o.replace(/ /g,"_"))+"_callback";for(var l=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r="".split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=""!==l?"  return "+l:"  pass",n(t,e,o,s.length>0?"def "+o+"():\n  global "+s.join(", ")+" \n"+u:"def "+o+"():\n"+u,"gauge"),""},Blockly.Blocks.remoteplus_add_title={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"Title %1 Event  interval(ms): %2",args0:[{type:"field_label",name:"NAME",text:"remotename"},{type:"field_label",name:"interval",text:"3000"}],message1:"Set data %1",args1:[{type:"input_value",name:"RETURN",align:"RIGHT"}],colour:Blockly.Msg.REMOTE_PLUS_HUE}},attrs:{keyword:["remote"]}},Blockly.Python.remoteplus_add_title=function(t){Blockly.addModule("remotePlus");var e=t.getFieldValue("NAME")||"TitleName",o=t.getFieldValue("NAME")||"TitleName";o="title_"+(o=o.replace(/ /g,"_"))+"_callback";for(var l=Blockly.Python.valueToCode(t,"RETURN",Blockly.Python.ORDER_NONE)||"",i=Blockly.Units.map(t=>t.name),a=window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[0].concat(window.Blockly.Procedures.allProcedures(window.BlocklyEditor)[1]).filter(t=>0!=t[3]).map(t=>t[0]),s=Blockly.defineGlobal().concat(i).concat(a),r="".split(", "),c=0;c<s.length;c++)r.indexOf(s[c])>-1&&(s.splice(c,1),c--);var u;return u=""!==l?"  return "+l:"  pass",n(t,e,o,s.length>0?"def "+o+"():\n  global "+s.join(", ")+" \n"+u:"def "+o+"():\n"+u,"title"),""}},function(t,e){Blockly.Blocks.timer_delay={init:function(){this.jsonInit(this._timerDelay())},_timerDelay:function(){return{message0:Blockly.Msg.TIMER_DELAY,args0:[{type:"input_value",name:"DELAY"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["timer","delay"]}},Blockly.Python.timer_delay=function(t){return"wait("+(Blockly.Python.valueToCode(t,"DELAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.timer_delay_ms={init:function(){this.jsonInit(this._timerDelay())},_timerDelay:function(){return{message0:Blockly.Msg.TIMER_DELAY_MS,args0:[{type:"input_value",name:"DELAY"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TIMER_HUE,tool:[]}},attrs:{keyword:["timer","delay"]}},Blockly.Python.timer_delay_ms=function(t){return"wait_ms("+(Blockly.Python.valueToCode(t,"DELAY",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+")\n"},Blockly.Blocks.timer_get_ms={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMER_GET_MS,args0:[{type:"input_dummy"}],inputsInline:!0,output:null,colour:Blockly.Msg.TIMER_HUE}},attrs:{keyword:["timer","delay"]}},Blockly.Python.timer_get_ms=function(){return Blockly.addModule("imu"),["time.ticks_ms()",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.logic_try_except={init:function(){this.jsonInit(this._init())},_init:function(){return{type:"controls_ifelse",message0:Blockly.Msg.LOGIC_TRY,args0:[{type:"input_statement",name:"try"}],message1:Blockly.Msg.LOGIC_EXCEPT,args1:[{type:"input_statement",name:"except"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOGIC_HUE}"}},attrs:{keyword:["logic","try"]}},Blockly.Python.logic_try_except=function(t){var e=0,n="";do{n+=(0==e?"try ":"except ")+":\n"+(Blockly.Python.statementToCode(t,"try",Blockly.Python.ORDER_FUNCTION_CALL)||"")+(Blockly.Python.statementToCode(t,"except"+e)||Blockly.Python.PASS),++e}while(t.getInput("try"+e));return t.getInput("try")&&(n+="except:\n"+(Blockly.Python.statementToCode(t,"except")||Blockly.Python.PASS)),n},Blockly.Blocks.logic_switch={init:function(){this.jsonInit(this._init()),this.itemCount_=0,this.appendValueInput("CASE"+this.itemCount_).appendField(Blockly.Msg.LOGIC_CASE),this.appendStatementInput("DO"+this.itemCount_),this.appendStatementInput("DEFAULT").appendField(Blockly.Msg.LOGIC_DEFAULT),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.img_map_delete="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAfElEQVRYR+3TwQmAMBBE0T8VaAkpRUuxMkvREizBErSCFQ+CSAKCAS+zl1zC7ORBxM+jn/fjAhawgAUsYIGsQES0wAicZ41ZJQ25oFKBDphqbL5l9JLmZ2apQAIWoKlUYgeSpO1VgetSRJwSnyf38ivUv8ACFrCABSxggQNdwBQhXjlruAAAAABJRU5ErkJggg==",this.appendDummyInput("image").appendField("            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this)))},_init:function(){return{message0:Blockly.Msg.LOGIC_SWITCH,args0:[{type:"input_value",name:"SWITCH"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_LOGIC_HUE}"}},attrs:{keyword:["logic","switch"]},create_map:function(){this.itemCount_++;var t=null;this.getInput("DEFAULT")&&(t=this.getInput("DEFAULT").connection.targetConnection),this.removeInput("DEFAULT"),this.removeInput("image"),this.appendValueInput("CASE"+this.itemCount_).appendField(Blockly.Msg.LOGIC_CASE),this.appendStatementInput("DO"+this.itemCount_),this.appendStatementInput("DEFAULT").appendField(Blockly.Msg.LOGIC_DEFAULT),this.appendDummyInput("image").appendField("            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this))),Blockly.Mutator.reconnect(t,this,"DEFAULT")},delete_map:function(){var t=this.itemCount_;t>0&&(this.removeInput("CASE"+t),this.removeInput("DO"+t),this.itemCount_--)},mutationToDom:function(){if(!this.itemCount_)return null;var t=Blockly.utils.xml.createElement("mutation");return this.itemCount_&&t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10)||0,this.rebuildShape_()},rebuildShape_:function(){var t=[null],e=[null],n=null;this.getInput("DEFAULT")&&(n=this.getInput("DEFAULT").connection.targetConnection);for(var o=1;this.getInput("CASE"+o);){var l=this.getInput("CASE"+o),i=this.getInput("DO"+o);t.push(l.connection.targetConnection),e.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(t,e,n)},updateShape_:function(){this.getInput("DEFAULT")&&this.removeInput("DEFAULT"),this.getInput("image")&&this.removeInput("image");for(var t=1;this.getInput("CASE"+t);)this.removeInput("CASE"+t),this.removeInput("DO"+t),t++;for(t=1;t<=this.itemCount_;t++)this.appendValueInput("CASE"+t).appendField(Blockly.Msg.LOGIC_CASE),this.appendStatementInput("DO"+t);this.appendStatementInput("DEFAULT").appendField(Blockly.Msg.LOGIC_DEFAULT),this.appendDummyInput("image").appendField("            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this)))},reconnectChildBlocks_:function(t,e,n){for(var o=1;o<=this.itemCount_;o++)Blockly.Mutator.reconnect(t[o],this,"CASE"+o),Blockly.Mutator.reconnect(e[o],this,"DO"+o);Blockly.Mutator.reconnect(n,this,"DEFAULT")}},Blockly.Python.logic_switch=function(t){var e,n,o,l,i=0,a="";Blockly.Python.STATEMENT_PREFIX&&(a+=Blockly.Python.injectId(Blockly.Python.STATEMENT_PREFIX,t)),o=Blockly.Python.valueToCode(t,"SWITCH",Blockly.Python.ORDER_NONE);do{l=Blockly.Python.valueToCode(t,"CASE"+i,Blockly.Python.ORDER_NONE),n=o||l?o+"=="+l:"False",e=Blockly.Python.statementToCode(t,"DO"+i)||Blockly.Python.PASS,Blockly.Python.STATEMENT_SUFFIX&&(e=Blockly.Python.prefixLines(Blockly.Python.injectId(Blockly.Python.STATEMENT_SUFFIX,t),Blockly.Python.INDENT)+e),a+=(0==i?"if ":"elif ")+n+":\n"+e,++i}while(t.getInput("CASE"+i));return(t.getInput("DEFAULT")||Blockly.Python.STATEMENT_SUFFIX)&&(e=Blockly.Python.statementToCode(t,"DEFAULT")||Blockly.Python.PASS,Blockly.Python.STATEMENT_SUFFIX&&(e=Blockly.Python.prefixLines(Blockly.Python.injectId(Blockly.Python.STATEMENT_SUFFIX,t),Blockly.Python.INDENT)+e),a+="else:\n"+e),a},Blockly.Blocks.logic_when={init:function(){this.jsonInit(this._init()),this.oldDataId},_init:function(){return{message0:"When %1 is change",args0:[{type:"input_value",name:"data"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"do"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"else"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_LOGIC_HUE}"}}},Blockly.Python.logic_when=function(t){var e=Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_NONE)||"0",n=Blockly.Python.statementToCode(t,"do",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.statementToCode(t,"else",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=this.oldDataId;return`if ${e} != oldData${l}:\n  oldData${l} = ${e}\n${n}else:\n${o}  pass\n`}},function(t,e){Blockly.Blocks.dumps_json={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DUMPS_JSON,args0:[{type:"input_value",name:"JSON_VAR",check:"String"}],output:"String",inputsInline:!0,colour:Blockly.Msg.JSON_HUE}},attrs:{keyword:["json"]}},Blockly.Python.dumps_json=function(t){return[`json.dumps(${Blockly.Python.valueToCode(t,"JSON_VAR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.loads_json={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.LOADS_JSON,args0:[{type:"input_value",name:"JSON_VAR",check:"String"}],output:"String",inputsInline:!0,colour:Blockly.Msg.JSON_HUE}},attrs:{keyword:["json"]}},Blockly.Python.loads_json=function(t){return[`json.loads(${Blockly.Python.valueToCode(t,"JSON_VAR",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.map_clear={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MAP_CLEAR,args0:[{type:"input_value",name:"map"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.map_clear=function(t){return(Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0")+".clear()\n"},Blockly.Blocks.get_map_in={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_MAP_IN,args0:[{type:"input_value",name:"map"},{type:"input_value",name:"key"}],output:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.get_map_in=function(t){var e=Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return[`${Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} in ${e}.keys()`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.get_map_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_MAP_KEY,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"map"}],output:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.get_map_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return[`${Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}[${e}]`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.add_map_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ADD_MAP_KEY,args0:[{type:"input_value",name:"map"},{type:"input_value",name:"key"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.add_map_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}[${e}] = ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\n`},Blockly.Blocks.set_map_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.SET_MAP_KEY,args0:[{type:"input_value",name:"map"},{type:"input_value",name:"key"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.set_map_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}[${e}] = ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\n`},Blockly.Blocks.delete_map_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.DELETE_MAP_KEY,args0:[{type:"input_value",name:"map"},{type:"input_value",name:"key"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:[]}},attrs:{keyword:["map"]}},Blockly.Python.delete_map_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"0";return`${Blockly.Python.valueToCode(t,"map",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}.pop(${e})\n`},Blockly.Blocks.map_on_loop={init:function(){this.jsonInit(this._init()),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.appendDummyInput().appendField("                            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this)))},_init:function(){return{message0:Blockly.Msg.MAP_ON_LOOP,args0:[],message1:Blockly.Msg.MAP_ON_func,args1:[{type:"input_statement",name:"LOOP"}],output:null,colour:Blockly.Msg.MAP_HUE,tool:["This block is only used with the set key value block in the region","Returns a map object"],nextConnection:"null"}},attrs:{keyword:["map"]},create_map:function(){var t=BlocklyEditor.newBlock("create_map_key");t.initSvg(),t.render();let e=this.getInput("LOOP").sourceBlock_.childBlocks_;e.length>0?function t(e){var n=null;if(null==e)return null;if(null!=e.sourceBlock_&&null!=e.sourceBlock_){if(null==e.sourceBlock_.nextConnection.targetConnection)return e.sourceBlock_;n=t(e.sourceBlock_.nextConnection.targetConnection)}else n=e.sourceBlock_;return n}(e[0].nextConnection).nextConnection.connect(t.getConnections_()[0]):this.getInput("LOOP").connection.connect(t.getConnections_()[0])}},Blockly.Python.map_on_loop=function(t){var e=Blockly.Python.statementToCode(t,"LOOP")||"";return[`{${e=e.replace(/(^\s+)|(\s+$)/g,"")}}`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.create_map_key={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.CREATE_MAP_KEY,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MAP_HUE,tool:["This block is only used with the new map block"]}},attrs:{keyword:["map"]}},Blockly.Python.create_map_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return e&&n&&"''"!==e?t.getNextBlock()?`${e}:${n},`:`${e}:${n}`:""}},function(t,e){Blockly.Blocks.procedures_ifreturn_func={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue_)),t},domToMutation:function(t){this.hasReturnValue_=1==t.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(){if(this.workspace.isDragging&&!this.workspace.isDragging()){var t=!1,e=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(e.type)){t=!0;break}e=e.getSurroundParent()}while(e);t?("procedures_defnoreturn"==e.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=e.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]}},function(t,e){let n=[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"],["%","REMAINDER"]];Blockly.Blocks.math_arithmetic_arr={init:function(){this.appendValueInput("A").setCheck("Number"),this.appendDummyInput().appendField(new Blockly.FieldDropdown(n),"OP"),this.appendValueInput("B").setCheck("Number"),this.setOutput(!0,"Number"),this.setColour(Blockly.Msg.MATH_HUE),this.setInputsInline(!0),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.img_map_delete="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAfElEQVRYR+3TwQmAMBBE0T8VaAkpRUuxMkvREizBErSCFQ+CSAKCAS+zl1zC7ORBxM+jn/fjAhawgAUsYIGsQES0wAicZ41ZJQ25oFKBDphqbL5l9JLmZ2apQAIWoKlUYgeSpO1VgetSRJwSnyf38ivUv8ACFrCABSxggQNdwBQhXjlruAAAAABJRU5ErkJggg==",this.inputArrar=[],this.itemCount_=0,this.appendDummyInput().appendValueInput,this.updateShape_(this),this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this)))},attrs:{keyword:["math","arithmetic"]},mutationToDom:function(){if(!this.itemCount_)return null;var t=document.createElement("mutation");return this.itemCount_&&t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10)||0,this.updateShape_(this)},create_map:function(){this.removeInput("image"),this.getInput("OPERATORARR"+this.itemCount_)?this.removeInput("OPERATORARR"+this.itemCount_):this.appendDummyInput("OPERATORARR"+this.itemCount_).appendField(new Blockly.FieldDropdown(n),"OPERATOR"+this.itemCount_),this.getInput("NUMBER_TO_CHECK"+this.itemCount_)?this.removeInput("NUMBER_TO_CHECK"+this.itemCount_):this.appendValueInput("NUMBER_TO_CHECK"+this.itemCount_).setCheck("Number"),this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this)));let t=this.itemCount_;this.inputArrar.push(["OPERATORARR"+t,"NUMBER_TO_CHECK"+t]),this.itemCount_++},delete_map:function(){var t=this.itemCount_;t>0&&(this.inputArrar.splice(this.itemCount_-1,1),this.removeInput("OPERATORARR"+(t-1)),this.removeInput("NUMBER_TO_CHECK"+(t-1)),this.itemCount_--)},updateShape_:function(t){for(let t=0;t<this.itemCount_;t++)this.removeInput("image"),this.appendDummyInput("OPERATORARR"+t).appendField(new Blockly.FieldDropdown(n),"OPERATOR"+t),this.appendValueInput("NUMBER_TO_CHECK"+t).setCheck("Number"),this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_map.bind(this))).appendField(new Blockly.FieldImage(this.img_map_delete,20,20,"*",this.delete_map.bind(this)))}},Blockly.Python.math_arithmetic_arr=function(t){let e=t,n={ADD:[" + ",Blockly.Python.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",Blockly.Python.ORDER_EXPONENTIATION],REMAINDER:[" % ",Blockly.Python.ORDER_MULTIPLICATIVE]};var o=n[e.getFieldValue("OP")],l=o[0];o=o[1];let i=[(Blockly.Python.valueToCode(t,"A",o)||"0")+l+(t=Blockly.Python.valueToCode(t,"B",o)||"0"),Blockly.Python.ORDER_CONDITIONAL];return e.inputList.forEach(t=>{-1!==t.name.indexOf("OPERATORARR")?i[0]+=n[e.getFieldValue(t.fieldRow[0].name)][0]:-1!==t.name.indexOf("NUMBER_TO_CHECK")&&(i[0]+=Blockly.Python.valueToCode(e,t.name,o)||"0")}),[i[0],Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_bit_operation={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_BIT_OPERATION,args0:[{type:"input_value",name:"data"},{type:"field_dropdown",name:"OP",options:[["&","&"],["|","|"],["<<","<<"],[">>",">>"],["^","^"]]},{type:"input_value",name:"value"}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_bit_operation=function(t){return[`${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} ${t.getFieldValue("OP")||"&"} ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_get_bit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_GET_BIT,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"num"}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_get_bit=function(t){return[`((${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} >> ${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}) & 0x01)`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_set_bit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_SET_BIT,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"num"}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_set_bit=function(t){return[`(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} | (0x01 << ${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}))`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_clear_bit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_CLEAR_BIT,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"num"}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_clear_bit=function(t){return[`(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} & (~ (0x01 << ${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})))`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_reverse_bit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_REVERSE_BIT,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"num"}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_reverse_bit=function(t){return[`(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"} ^ (0x01 << ${Blockly.Python.valueToCode(t,"num",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}))`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.math_int_from_bytes={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MATH_INT_FROM_BYTES,args0:[{type:"input_value",name:"bytes"},{type:"field_dropdown",name:"byteorder",options:[["Big","big"],["Little","little"]]}],output:null,inputsInline:!0,colour:Blockly.Msg.MATH_HUE,tool:[]}},attrs:{keyword:["math"]}},Blockly.Python.math_int_from_bytes=function(t){return[`int.from_bytes(${Blockly.Python.valueToCode(t,"bytes",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, '${t.getFieldValue("byteorder")||"big"}')`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.ezdata_get_key_with_token={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_GET_KEY_WITH_TOKEN,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"token",check:"String"}],output:null,inputsInline:!0,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_get_key_with_token=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"";return[`ezdata.getData(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${e})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ezdata_set_key_with_token={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_SET_KEY_WITH_TOKEN,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"value"},{type:"input_value",name:"token",check:"String"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_set_key_with_token=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`ezdata.setData(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${e}, ${n})\n`},Blockly.Blocks.ezdata_add_value_with_token={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ADD_VALUE_WITH_TOKEN,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"value"},{type:"input_value",name:"token",check:"String"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_add_value_with_token=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`ezdata.addToList(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${e}, ${n})\n`},Blockly.Blocks.ezdata_remove_key_with_token={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_REMOVE_KEY_WITH_TOKEN,args0:[{type:"input_value",name:"key"},{type:"input_value",name:"token",check:"String"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_remove_key_with_token=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"";return`ezdata.removeData(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${e})\n`},Blockly.Blocks.ezdata_get_list_with_token={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_GET_LIST_WITH_TOKEN,args0:[{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"offset",align:"RIGHT"},{type:"input_value",name:"count",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],output:null,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_get_list_with_token=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"offset",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_FUNCTION_CALL)||"";return[`ezdata.getData(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${e}, ${n}, ${o})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ezdata_get_iso_date={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.EZDATA_GET_ISO_DATE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_get_iso_date=function(t){return["ezdata.getCurrentISODateTime()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.ezdata_async_get_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("eventId",this.eventId),t.setAttribute("cbId",this.cbId),this.getField("id").setValue(this.eventId),t},domToMutation:function(t){this.eventId=t.getAttribute("eventId"),this.cbId=t.getAttribute("cbId")},attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=this.cbId;return`ezdata.getDataAsync(ezdata_get_${o}cb, ezdata_get_fail_${o}cb, ${n}, ${e})\n`},Blockly.Blocks.ezdata_async_get_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Get value callback %2 Success with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_get_${l}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"_"} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_get_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`},Blockly.Blocks.ezdata_async_set_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_SET_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_set_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=this.cbId;return`ezdata.setDataAsync(ezdata_set_${l}cb, ezdata_set_fail_${l}cb, ${o}, ${e}, ${n})\n`},Blockly.Blocks.ezdata_async_set_value_cb={init:function(){this.jsonInit(this._init()),this.eventId="",this.cbId=""},_init:function(){return{message0:"ID:%1 Set value callback %2 Success %3",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_set_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_set_${l}cb(r=None):\n  # global params\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_set_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`},Blockly.Blocks.ezdata_async_get_list_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_LIST_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"offset",align:"RIGHT"},{type:"input_value",name:"count",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_list_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"offset",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"count",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=this.cbId;return`ezdata.getDataAsync(ezdata_get_${i}cb, ezdata_get_fail_${i}cb, ${l}, ${e}, ${n}, ${o})\n`},Blockly.Blocks.ezdata_async_get_list_value_cb={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:"ID: %1 Get value from list callback %2 Success with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_list_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_get_${l}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||""} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_get_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`},Blockly.Blocks.ezdata_async_set_list_value={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_SET_LIST_VALUE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"value",align:"RIGHT"},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_set_list_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=this.cbId;return`ezdata.addToListAsync(ezdata_set_${l}cb, ezdata_set_fail_${l}cb, ${o}, ${e}, ${n})\n`},Blockly.Blocks.ezdata_async_set_list_value_cb={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:"ID:%1 Set list value callback %2 Success %3",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_set_list_value_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_set_${l}cb(r=None):\n  # global params\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_set_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`},Blockly.Blocks.ezdata_async_remove={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_REMOVE,args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_value",name:"key",align:"RIGHT"},{type:"input_value",name:"token",check:"String",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_remove=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=this.cbId;return`ezdata.removeDataAsync(ezdata_remove_${o}cb, ezdata_remove_fail_${o}cb, ${n}, ${e})\n`},Blockly.Blocks.ezdata_async_remove_cb={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:"ID:%1 Remove callback %2 Success %3",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_remove_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_remove_${l}cb(r=None):\n  # global params\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_remove_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`},Blockly.Blocks.ezdata_async_get_iso_date={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:Blockly.Msg.EZDATA_ASYNC_GET_ISO_DATE,args0:[{type:"field_label",name:"id",text:this.eventId}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_iso_date=function(t){var e=this.cbId;return`ezdata.getCurrentISODateTimeAsync(ezdata_get_${e}cb, ezdata_get_fail_${e}cb)\n`},Blockly.Blocks.ezdata_async_get_iso_date_cb={init:function(){this.jsonInit(this._getJson()),this.eventId="",this.cbId=""},_getJson:function(){return{message0:"ID:%1 Get current ISODateTime callback %2 Success with %3 %4",args0:[{type:"field_label",name:"id",text:this.eventId},{type:"input_dummy"},{type:"input_value",name:"value",check:"null"},{type:"input_statement",name:"success_fun"}],message1:"Fail %1",args1:[{type:"input_statement",name:"fail_fun"}],inputsInline:!1,colour:Blockly.Msg.EZDATA_HUE,tool:[]}},mutationToDom:Blockly.Blocks.ezdata_async_get_value.mutationToDom,domToMutation:Blockly.Blocks.ezdata_async_get_value.domToMutation,attrs:{keyword:["ezdata"]}},Blockly.Python.ezdata_async_get_iso_date_cb=function(t){var e=t.getFieldValue("id")||"",n=t.type.replace(/_cb/,""),l=o.getCbIdByEventId(e,n);let i=`def ezdata_get_${l}cb(value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||""} = value\n${Blockly.Python.statementToCode(t,"success_fun")||""}  pass\n`,a=`def ezdata_get_fail_${l}cb():\n  # global params\n${Blockly.Python.statementToCode(t,"fail_fun")||""}  pass\n`;return Blockly.defineGlobal().length>0&&(i=i.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")),a=a.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", "))),`${i}${a}`}},function(t,e,n){"use strict";n.r(e);var o=n(146),l=n(147),i=n(148),a=n(149),s=n(150);Blockly.M5Toolbox.iotcloudToolbox=[{kind:"category",name:"%{BKY_AZURE}",colour:"%{BKY_AZURE_HUE}",contents:o.AzureToolbox},{kind:"category",name:"%{BKY_AWS}",colour:"%{BKY_AWS_HUE}",contents:l.AwsToolbox},{kind:"category",name:"%{BKY_TENCENT}",colour:"%{BKY_TENCENT_HUE}",contents:i.TencentToolbox},{kind:"category",name:"%{BKY_IOT_BLYNK}",colour:"%{BKY_IOT_BLYNK_HUE}",contents:a.IotblynkToolbox},{kind:"category",name:"%{BKY_ALI_IOT}",colour:"%{BKY_ALI_IOT_HUE}",contents:s.AliiotToolbox}]},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(t){return t.replace(/^'/,"").replace(/'$/,"").trim()}Blockly.Blocks.tencent_init={init:function(){this.jsonInit(this._init()),this.productid="",this.devicename="",this.devicesecret="",this.username="",this.password=""},_init:function(){return{message0:Blockly.Msg.TENCENT_INIT,args0:[{type:"input_value",name:"productid"},{type:"input_value",name:"devicename"},{type:"input_value",name:"sceret"},{type:"input_value",name:"keepalive"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_init=function(t){var e=Blockly.Python.valueToCode(t,"productid",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"devicename",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"sceret",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||0;let a=[];"''"!==e&&"''"!==n&&"''"!==o&&(e===this.productid&&n===this.devicename&&o===this.devicesecret||(a=function(t,e,n){if(""===t||""===e||""===n)return;let o=t+e+";12010126;"+function(t,e){e=e||"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var n="";for(let t=0;t<5;t++){let t=Math.floor(Math.random()*e.length);n+=e.substring(t,t+1)}return n}()+";"+(Math.floor(Date.now()/1e3)+864e5),l="",i="";return l=window.CryptoJS.HmacSHA1(o,window.CryptoJS.enc.Base64.parse(n)),i=l+";hmacsha1",[o,i]}(l(e),l(n),l(o)),this.productid=e,this.devicename=n,this.devicesecret=o,this.username=a[0],this.password=a[1]));let s=`tencent = Tencent(product_id=${e}, device_name=${n}, username='${this.username}', password='${this.password}', port=1883, keepalive=${i})\n`;if(Blockly.tencentSub)for(var r=0;r<Blockly.tencentSub.length;r++)s+=Blockly.tencentSub[r].sub;return s},Blockly.Blocks.tencent_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_SUB,args0:[{type:"input_value",name:"FROM"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.TENCENT_HUE,tool:["Tencent subscribe topic","note: if received topic, will call fun with topic data"]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_sub=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=e.replace(/\W/gi,"_");let l=`def fun${o}(topic_data):\n  # global params\n${n}  pass\n`;Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let i="tencent.subscribe(str("+e+"), fun"+o+")\n",a=Blockly.tencentSub.findIndex(function(e){return e.id===t.id});return-1===a?Blockly.tencentSub.push({id:t.id,sub:i}):Blockly.tencentSub[a].sub=i,l},Blockly.Blocks.tencent_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_PUBLISH,args0:[{type:"input_value",name:"FROM"},{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:["Tencent publish msg to topic","topic: string","msg: string"]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_publish=function(t){return`tencent.publish(str(${Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||""}),str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.tencent_sub_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_SUBSCRIBE_PROPERTY_MSG,message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.TENCENT_HUE,tool:["Tencent subscribe property up topic","note: if received topic, will call fun with topic data"]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_sub_msg=function(t){let e=`def tencent_fun(property_data):\n  # global params\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let n="tencent.subscribe_property_msg(tencent_fun)\n",o=Blockly.tencentSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.tencentSub.push({id:t.id,sub:n}):Blockly.tencentSub[o].sub=n,e},Blockly.Blocks.tencent_publish_property_msg={init:function(){this.jsonInit(this._init()),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.appendDummyInput().appendField("                            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_key.bind(this)))},_init:function(){return{message0:Blockly.Msg.TENCENT_PUBLISH_PROPERTY_MSG,args0:[],message1:"%1",args1:[{type:"input_statement",name:"LOOP"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[],nextConnection:"null"}},attrs:{keyword:["tencent"]},create_key:function(){var t=BlocklyEditor.newBlock("create_tencent_publish_key");t.initSvg(),t.render();let e=this.getInput("LOOP").sourceBlock_.childBlocks_,n=e.findIndex(t=>"create_tencent_publish_key"===t.type);n>-1?function t(e){var n=null;if(null==e)return null;if(null!=e.sourceBlock_&&null!=e.sourceBlock_){if(null==e.sourceBlock_.nextConnection.targetConnection)return e.sourceBlock_;n=t(e.sourceBlock_.nextConnection.targetConnection)}else n=e.sourceBlock_;return n}(e[n].nextConnection).nextConnection.connect(t.getConnections_()[0]):this.getInput("LOOP").connection.connect(t.getConnections_()[0])}},Blockly.Python.tencent_publish_property_msg=function(t){var e=Blockly.Python.statementToCode(t,"LOOP")||"";return`tencent.publish_property_msg(${e=e.replace(/(^\s+)|(\s+$)/g,"")})\n`},Blockly.Blocks.create_tencent_publish_key={init:function(t){this.jsonInit(this._init()),this.appendValueInput("key"),this.appendDummyInput().appendField("="),this.appendValueInput("value"),this.connect_childblock()},_init:function(){return{previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},mutationToDom:function(){let t=this.getInput("key");if(t&&t.connection){let e=t.connection;if(this.keyBlockId&&e.targetConnection&&this.keyBlockId!==e.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.keyBlockId)&&(BlocklyEditor.getBlockById(this.keyBlockId).dispose(),this.keyBlockId=e.targetConnection.sourceBlock_.id)}catch(t){}}let e=this.getInput("value");if(e&&e.connection){let n=e.connection;if(this.valueBlockId&&n.targetConnection&&this.valueBlockId!==n.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.valueBlockId)&&(BlocklyEditor.getBlockById(this.valueBlockId).dispose(),this.valueBlockId=n.targetConnection.sourceBlock_.id)}catch(t){}}},connect_childblock:function(){let t=o.createChildBlock("text_copy"),e=o.createChildBlock("text");this.keyBlockId=t.id,this.valueBlockId=e.id,this.getInput("key").connection.connect(t.getConnections_()[0]),this.getInput("value").connection.connect(e.getConnections_()[0])},onchange:function(t){if(!this.workspace.isDragging()){if(!this.getSurroundParent()||"tencent_publish_property_msg"!==this.getSurroundParent().type)return this.setWarningText("Warning: This block is invalid!"),void this.setEnabled(!1);if(t.blockId===this.childBlocks_[0].id){let t=this.childBlocks_[0].getFieldValue("TEXT");!t||/^[_A-Za-z]/g.test(t)?(this.setWarningText(null),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_()):(this.setWarningText("Warning: Key is invalid!"),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_())}}}},Blockly.Python.create_tencent_publish_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""!==e&&""!==n&&"''"!==e&&"''"!==n&&/^[_A-Za-z]/g.test(e)?t.getNextBlock()?`${e}=${n},`:`${e}=${n}`:""},Blockly.Blocks.tencent_publish_raw_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_PUBLISH_RAW_MSG,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_publish_raw_msg=function(t){return`tencent.publish_raw_msg(str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.tencent_publish_data_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_PUBLISH_DATA_MSG,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_publish_data_msg=function(t){return`tencent.publish_data_msg(str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.tencent_publish_event_msg={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_PUBLISH_EVENT_MSG,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_publish_event_msg=function(t){return`tencent.publish_event_msg(str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.tencent_get_topic_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_TOPICDATA,output:null,colour:Blockly.Msg.TENCENT_HUE,tool:["Get topic data","return: topic data","note: only valid in tencent subscribe fun"]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_get_topic_data=function(t){return["topic_data",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.tencent_get_property_topic_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_GET_PROPERTY_TOPICDATA,output:null,colour:Blockly.Msg.TENCENT_HUE,tool:["Get property topic data","return: property topic data","note: only valid in tencent subscribe property msg fun"]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_get_property_topic_data=function(t){return["property_data",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.tencent_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TENCENT_START,previousStatement:null,nextStatement:null,colour:Blockly.Msg.TENCENT_HUE,tool:[]}},attrs:{keyword:["tencent"]}},Blockly.Python.tencent_start=function(t){return"tencent.start()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.aws_init={init:function(){this.jsonInit(this._init()),this.key="Null",this.cert="Null",this.updateOP(),this.add_file=o.addImage,this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,25,25,"*",this.addFile.bind(this,"key")))},_init:function(){return{message0:Blockly.Msg.AWS_INIT,args0:[{type:"input_value",name:"things_name"},{type:"input_value",name:"host"},{type:"input_value",name:"port"},{type:"input_value",name:"keepalive"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.AWS_HUE,tool:[]}},addFile:o.addFileFun,mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("key",this.key),t.setAttribute("cert",this.cert),t},domToMutation:function(t){this.key=t.getAttribute("key"),this.cert=t.getAttribute("cert"),this.updateOP()},updateOP:function(){var t=this,e=new Blockly.FieldDropdown(o.getResKeys,function(e){t.key=e}),n=new Blockly.FieldDropdown(o.getResKeys,function(e){t.cert=e});if(!this.getInput("key")&&!this.getInput("cert")){this.appendDummyInput("key").appendField(Blockly.Msg.KEYFILE).appendField(e),this.appendDummyInput("cert").appendField(Blockly.Msg.CERTFILE).appendField(n);let t=this.getInput("key").fieldRow[1].getValue();if(this.key!==t){let t=this.getInput("key").fieldRow[1];t.selectedOption_=[this.key,this.key],t.value_=this.key}let o=this.getInput("cert").fieldRow[1].getValue();if(this.cert!==o){let t=this.getInput("cert").fieldRow[1];t.selectedOption_=[this.cert,this.cert],t.value_=this.cert}}},attrs:{keyword:["aws"]}},Blockly.Python.aws_init=function(t){var e=Blockly.Python.valueToCode(t,"things_name",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"host",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||"",l=Blockly.Python.valueToCode(t,"keepalive",Blockly.Python.ORDER_FUNCTION_CALL)||0;let i="''",a="''";"Null"!==this.key&&(i=`"/flash/res/${this.key}"`),"Null"!==this.cert&&(a=`"/flash/res/${this.cert}"`);let s=`aws = AWS(things_name=${e}, host=${n}, port=${o}, keepalive=${l}, cert_file_path=${a}, private_key_path=${i})\n`;if(Blockly.awsSub)for(var r=0;r<Blockly.awsSub.length;r++)s+=Blockly.awsSub[r].sub;return s},Blockly.Blocks.aws_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AWS_SUB,args0:[{type:"input_value",name:"FROM"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.AWS_HUE,tool:["Aws subscribe topic","note: if received topic, will call fun with topic data"]}},attrs:{keyword:["aws"]}},Blockly.Python.aws_sub=function(t){var e=Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=e.replace(/\W/gi,"_");let l=`def fun${o}(topic_data):\n  # global params\n${n}  pass\n`;Blockly.defineGlobal().length>0&&(l=l.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let i="aws.subscribe(str("+e+"), fun"+o+")\n",a=Blockly.awsSub.findIndex(function(e){return e.id===t.id});return-1===a?Blockly.awsSub.push({id:t.id,sub:i}):Blockly.awsSub[a].sub=i,l},Blockly.Blocks.aws_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AWS_PUBLISH,args0:[{type:"input_value",name:"FROM"},{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.AWS_HUE,tool:["Aws publish msg to topic","topic: string","msg: string"]}},attrs:{keyword:["aws"]}},Blockly.Python.aws_publish=function(t){return`aws.publish(str(${Blockly.Python.valueToCode(t,"FROM",Blockly.Python.ORDER_FUNCTION_CALL)||""}),str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.aws_get_topic_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.GET_TOPICDATA,output:null,colour:Blockly.Msg.AWS_HUE,tool:["Get topic data","return: topic data","note: only valid in aws subscribe fun"]}},attrs:{keyword:["aws"]}},Blockly.Python.aws_get_topic_data=function(t){return["topic_data",Blockly.Python.ORDER_MEMBER]},Blockly.Blocks.aws_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AWS_START,previousStatement:null,nextStatement:null,colour:Blockly.Msg.AWS_HUE,tool:[]}},attrs:{keyword:["aws"]}},Blockly.Python.aws_start=function(t){return"aws.start()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);const l=[["SAS","True"],["X.509","False"]];Blockly.Blocks.azure_init_iothub={init:function(){this.jsonInit(this._init()),this.isSas="True",this.key="Null",this.cert="Null",this.appendDummyInput("op").appendField(Blockly.Msg.AZURE_INIT_IOTHUB).appendField(new Blockly.FieldDropdown(l,function(t){let e=this.getSourceBlock();t!==e.isSas&&(e.updateOP(t),e.isSas=t)})),this.appendValueInput("connection").appendField(Blockly.Msg.AZURE_INIT_IOTHUB_CONNECTION).setCheck("String"),this.add_file=o.addImage},_init:function(){return{previousStatement:null,nextStatement:null,colour:Blockly.Msg.AZURE_HUE,tool:[]}},addFile:o.addFileFun,mutationToDom:function(){let t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("isSas",this.isSas),t.setAttribute("key",this.key),t.setAttribute("cert",this.cert),t},domToMutation:function(t){if(this.isSas=t.getAttribute("isSas"),this.key=t.getAttribute("key"),this.cert=t.getAttribute("cert"),this.updateOP(this.isSas),"True"!==this.isSas){let t=this.getInput("op").fieldRow[1];t.selectedOption_=l[1],t.value_=this.isSas}},updateOP:function(t){if("True"===t){["connection","hostname","deviceId","key","cert","image"].forEach(t=>{if(this.getInput(t)){if("connection"===t||"deviceId"===t||"hostname"===t){let e=this.getInput(t).connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}}else"key"!==t&&"cert"!==t||(this[t]="Null");this.removeInput(t)}}),this.appendValueInput("connection").appendField(Blockly.Msg.AZURE_INIT_IOTHUB_CONNECTION).setCheck("String");let t=this.getInput("connection").connection;if(!this.isInFlyout&&t&&!t.targetConnection){let t=o.createShadow("text",{name:"TEXT"});this.getInput("connection").connection.setShadowDom(t)}}else{if(this.getInput("connection")){let e=this.getInput("connection").connection;if(e&&e.targetConnection)try{e.targetConnection.sourceBlock_.dispose()}catch(t){}this.removeInput("connection")}this.appendValueInput("hostname").appendField("host name").setCheck("String"),this.appendValueInput("deviceId").appendField("device id").setCheck("String"),["hostname","deviceId"].forEach(t=>{let e=this.getInput(t).connection;if(!this.isInFlyout&&e&&!e.targetConnection){let e=o.createShadow("text",{name:"TEXT"});this.getInput(t).connection.setShadowDom(e)}});let e=this,n=["cert","key"];this.getInput("key")||this.getInput("cert")||(n.forEach(t=>{this.appendDummyInput(t).appendField(t).appendField(new Blockly.FieldDropdown(o.getResKeys,function(n){e[t]=n}))}),this.appendDummyInput("image").appendField(new Blockly.FieldImage(this.add_file,25,25,"*",this.addFile.bind(this,"key"))),n.forEach(t=>{let e=this.getInput(t).fieldRow[1].getValue();if(this[t]!==e){let e=this.getInput(t).fieldRow[1];e.selectedOption_=[this[t],this[t]],e.value_=this.cert}}))}},attrs:{keyword:["azure"]}},Blockly.Python.azure_init_iothub=function(t){let e;if("True"===this.isSas)e=`azure = IoT_Hub(connection_string=${Blockly.Python.valueToCode(t,"connection",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;else{var n=Blockly.Python.valueToCode(t,"hostname",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"deviceId",Blockly.Python.ORDER_FUNCTION_CALL)||"";let l="''",i="''";"Null"!==this.key&&(l=`"/flash/res/${this.key}"`),"Null"!==this.cert&&(i=`"/flash/res/${this.cert}"`),e=`azure = IoT_Hub(device_id=${o}, host_name=${n}, ssl=True, cert_file_path=${i}, private_key_path=${l})\n`}if(Blockly.azureSub)for(var l=0;l<Blockly.azureSub.length;l++)e+=Blockly.azureSub[l].sub;return e},Blockly.Blocks.azure_init_central={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AZURE_INIT_CENTRAL,args0:[{type:"input_value",name:"scope_id"},{type:"input_value",name:"device_id"},{type:"input_value",name:"device_key"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_init_central=function(t){let e=`azure = IoT_Central(scope_id=${Blockly.Python.valueToCode(t,"scope_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, device_id=${Blockly.Python.valueToCode(t,"device_id",Blockly.Python.ORDER_FUNCTION_CALL)||""}, device_key=${Blockly.Python.valueToCode(t,"device_key",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;if(Blockly.azureSub)for(var n=0;n<Blockly.azureSub.length;n++)e+=Blockly.azureSub[n].sub;return e},Blockly.Blocks.azure_sub={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AZURE_SUB,args0:[{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!1,colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_sub=function(t){let e=`def azure_C2D_cb(msg_data):\n  # global params\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = msg_data\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let n="azure.subscribe_C2D_message(azure_C2D_cb)\n",o=Blockly.azureSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.azureSub.push({id:t.id,sub:n}):Blockly.azureSub[o].sub=n,e},Blockly.Blocks.azure_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AZURE_PUBLISH,args0:[{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.AZURE_HUE,tool:["Azure publish msg to topic","topic: string","msg: string"]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_publish=function(t){return`azure.publish_D2C_message(str(${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.azure_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AZURE_START,previousStatement:null,nextStatement:null,colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_start=function(t){return"azure.start()\n"},Blockly.Blocks.azure_sub_direct={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AZURE_SUB_DIRECT,args0:[{type:"field_input",name:"name",text:"fun"},{type:"input_value",name:"payload",check:"null"}],message1:Blockly.Msg.AZURE_SUB_DIRECT_RESPONSE,args1:[{type:"input_statement",name:"FUNC"},{type:"input_value",name:"status",check:"Number",align:"RIGHT"}],message2:"body %1",args2:[{type:"input_value",name:"content",check:"String",align:"RIGHT"}],colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_sub_direct=function(t){var e=t.getFieldValue("name")||"fun",n=Blockly.Python.valueToCode(t,"payload",Blockly.Python.ORDER_NONE)||"_",o=Blockly.Python.valueToCode(t,"status",Blockly.Python.ORDER_NONE)||"0",l=Blockly.Python.valueToCode(t,"content",Blockly.Python.ORDER_NONE)||"",i=`\ndef azure_direct_${e}(payload, rid):\n  # global params\n  ${n} = payload\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  azure.response_direct_method(${o}, rid, body=${l})\n`;let a=`azure.subscribe_direct_method('${e}', azure_direct_${e})\n`,s=Blockly.azureSub.findIndex(function(e){return e.id===t.id});return-1===s?Blockly.azureSub.push({id:t.id,sub:a}):Blockly.azureSub[s].sub=a,i+"\n"},Blockly.Blocks.azure_sub_twin_desired={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.AZURE_SUB_TWIN_DESIRED,args0:[{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_sub_twin_desired=function(t){var e=`\ndef azure_desired_cb(payload):\n  # global params\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = payload\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n`;let n="azure.subscribe_twin_desired_response(azure_desired_cb)\n",o=Blockly.azureSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.azureSub.push({id:t.id,sub:n}):Blockly.azureSub[o].sub=n,e+"\n"},Blockly.Blocks.azure_update_property={init:function(){this.jsonInit(this._init()),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.appendDummyInput().appendField("                            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_key.bind(this)))},_init:function(){return{message0:Blockly.Msg.AZURE_UPDATE_PROPERTY,args0:[],message1:"%1",args1:[{type:"input_statement",name:"LOOP"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.AZURE_HUE,tool:[],nextConnection:"null"}},attrs:{keyword:["azure"]},create_key:function(){var t=BlocklyEditor.newBlock("create_key_value");t.initSvg(),t.render();let e=this.getInput("LOOP").sourceBlock_.childBlocks_,n=e.findIndex(t=>"create_key_value"===t.type);n>-1?o.findObj(e[n].nextConnection).nextConnection.connect(t.getConnections_()[0]):this.getInput("LOOP").connection.connect(t.getConnections_()[0])}},Blockly.Python.azure_update_property=function(t){var e=Blockly.Python.statementToCode(t,"LOOP")||"";return`azure.update_twin_reported_properties(${e=e.replace(/(^\s+)|(\s+$)/g,"")})\n`},Blockly.Blocks.create_key_value={init:function(t){this.jsonInit(this._init()),this.appendValueInput("key"),this.appendDummyInput().appendField("="),this.appendValueInput("value"),this.connect_childblock()},_init:function(){return{previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.AZURE_HUE,tool:[]}},mutationToDom:function(){let t=this.getInput("key");if(t&&t.connection){let e=t.connection;if(this.keyBlockId&&e.targetConnection&&this.keyBlockId!==e.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.keyBlockId)&&(BlocklyEditor.getBlockById(this.keyBlockId).dispose(),this.keyBlockId=e.targetConnection.sourceBlock_.id)}catch(t){}}let e=this.getInput("value");if(e&&e.connection){let n=e.connection;if(this.valueBlockId&&n.targetConnection&&this.valueBlockId!==n.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.valueBlockId)&&(BlocklyEditor.getBlockById(this.valueBlockId).dispose(),this.valueBlockId=n.targetConnection.sourceBlock_.id)}catch(t){}}},connect_childblock:function(){let t=o.createChildBlock("text_copy"),e=o.createChildBlock("text");this.keyBlockId=t.id,this.valueBlockId=e.id,this.getInput("key").connection.connect(t.getConnections_()[0]),this.getInput("value").connection.connect(e.getConnections_()[0])},onchange:function(t){if(!this.workspace.isDragging()){if(!this.getSurroundParent()||"azure_update_property"!==this.getSurroundParent().type)return this.setWarningText("Warning: This block is invalid!"),void this.setEnabled(!1);if(this.childBlocks_[0]&&t.blockId===this.childBlocks_[0].id){let t=this.childBlocks_[0].getFieldValue("TEXT");!t||/^[_A-Za-z]/g.test(t)?(this.setWarningText(null),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_()):(this.setWarningText("Warning: Key is invalid!"),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_())}}}},Blockly.Python.create_key_value=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""!==e&&""!==n&&"''"!==e&&"''"!==n&&/^[_A-Za-z]/g.test(e)?t.getNextBlock()?`${e}=${n},`:`${e}=${n}`:""},Blockly.Blocks.azure_retrieve_twin_property={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AZURE_RETRIEVE_TWIN_PROPERTY,output:null,colour:Blockly.Msg.AZURE_HUE,tool:[]}},attrs:{keyword:["azure"]}},Blockly.Python.azure_retrieve_twin_property=function(t){return["azure.retrieve_twin_properties()",Blockly.Python.ORDER_MEMBER]}},function(t,e,n){"use strict";n.r(e);var o=n(0);Blockly.Blocks.iot_blynk_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_INIT,args0:[{type:"input_value",name:"token"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_init=function(t){let e=`blynk1 = blynk.Blynk(token=${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;if(Blockly.iotBlynkCb)for(var n=0;n<Blockly.iotBlynkCb.length;n++)e+=Blockly.iotBlynkCb[n].cb;return e},Blockly.Blocks.iot_blynk_init_customer={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_INIT_CUSTOMER,args0:[{type:"input_value",name:"server"},{type:"input_value",name:"port"},{type:"input_value",name:"token"},{type:"input_value",name:"heartbeat"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_init_customer=function(t){let e=`blynk1 = blynk.Blynk(server=${Blockly.Python.valueToCode(t,"server",Blockly.Python.ORDER_FUNCTION_CALL)||""}, port=${Blockly.Python.valueToCode(t,"port",Blockly.Python.ORDER_FUNCTION_CALL)||""}, token=${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, heartbeat=${Blockly.Python.valueToCode(t,"heartbeat",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`;if(Blockly.iotBlynkCb)for(var n=0;n<Blockly.iotBlynkCb.length;n++)e+=Blockly.iotBlynkCb[n].cb;return e},Blockly.Blocks.iot_blynk_disconnect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_DISCONNECT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_disconnect=function(t){return"blynk1.disconnect()\n"},Blockly.Blocks.iot_blynk_virtual_write={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_VIRTUAL_WRITE,args0:[{type:"input_value",name:"v_pin"},{type:"input_value",name:"val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_virtual_write=function(t){return`blynk1.virtual_write(${Blockly.Python.valueToCode(t,"v_pin",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"val",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_virtual_sync={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_VIRTUAL_SYNC,args0:[{type:"input_value",name:"v_pin"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_virtual_sync=function(t){return`blynk1.virtual_sync(${Blockly.Python.valueToCode(t,"v_pin",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_email={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_EMAIL,args0:[{type:"input_value",name:"to"},{type:"input_value",name:"subject"},{type:"input_value",name:"body"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_email=function(t){return`blynk1.email(${Blockly.Python.valueToCode(t,"to",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"subject",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"body",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_tweet={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_TWEET,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_tweet=function(t){return`blynk1.tweet(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_notify={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_NOTIFY,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_notify=function(t){return`blynk1.notify(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_set_property={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_SET_PROPERTY,args0:[{type:"input_value",name:"v_pin"},{type:"input_value",name:"property_name"},{type:"input_value",name:"val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_set_property=function(t){return`blynk1.set_property(${Blockly.Python.valueToCode(t,"v_pin",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"property_name",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"val",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.iot_blynk_event_write={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.IOT_BLYNK_EVENT_WRITE,args0:[{type:"field_dropdown",name:"SELECT",options:o.getBlynkEventOptions},{type:"input_value",name:"NUMBER"},{type:"input_value",name:"MSG"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_event_write=function(t){var e=t.getFieldValue("SELECT")||"*";let n=""+e;"v*"===e&&(n="all");var o=`\ndef blynk_write_${n}(v_pin, value):\n  # global params\n  ${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||"_"} = v_pin\n  ${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_NONE)||"_"} = value\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass\n`;let l=`blynk1.handle_event('write ${e}', blynk_write_${n})\n`,i=Blockly.iotBlynkCb.findIndex(function(e){return e.id===t.id});return-1===i?Blockly.iotBlynkCb.push({id:t.id,cb:l}):Blockly.iotBlynkCb[i].cb=l,o+"\n"},Blockly.Blocks.iot_blynk_event_read={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.IOT_BLYNK_EVENT_READ,args0:[{type:"field_dropdown",name:"SELECT",options:o.getBlynkEventOptions},{type:"input_value",name:"NUMBER"},{type:"input_statement",name:"FUNC"}],inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_event_read=function(t){var e=t.getFieldValue("SELECT")||"*";let n=""+e;"v*"===e&&(n="all");var o=`\ndef blynk_read_${n}(v_pin):\n  # global params\n  ${Blockly.Python.valueToCode(t,"NUMBER",Blockly.Python.ORDER_NONE)||"_"} = v_pin\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}\n  pass\n`;let l=`blynk1.handle_event('read ${e}', blynk_read_${n})\n`,i=Blockly.iotBlynkCb.findIndex(function(e){return e.id===t.id});return-1===i?Blockly.iotBlynkCb.push({id:t.id,cb:l}):Blockly.iotBlynkCb[i].cb=l,o+"\n"},Blockly.Blocks.iot_blynk_run={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.IOT_BLYNK_RUN,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.IOT_BLYNK_HUE,tool:[]}},attrs:{keyword:["blynk"]}},Blockly.Python.iot_blynk_run=function(t){return"blynk1.run()\n"}},function(t,e,n){"use strict";n.r(e);var o=n(0);function l(t){return t.replace(/^'/,"").replace(/'$/,"").trim()}var i=function(){return[["cn-qingdao","cn-qingdao"],["cn-beijing","cn-beijing"],["cn-zhangjiakou","cn-zhangjiakou"],["cn-huhehaote","cn-huhehaote"],["cn-wulanchabu","cn-wulanchabu"],["cn-hangzhou","cn-hangzhou"],["cn-shanghai","cn-shanghai"],["cn-shenzhen","cn-shenzhen"],["cn-heyuan","cn-heyuan"],["cn-guangzhou","cn-guangzhou"],["cn-chengdu","cn-chengdu"],["cn-nanjing","cn-nanjing"]]};Blockly.Blocks.aliiot_init={init:function(){this.jsonInit(this._init()),this.device_id="",this.product_key="",this.device_name="",this.deviceSecret="",this.password=""},_init:function(){return{message0:Blockly.Msg.ALIIOT_INIT,args0:[{type:"input_value",name:"product_key"},{type:"input_value",name:"device_name"},{type:"input_value",name:"deviceSecret"},{type:"input_value",name:"device_id"},{type:"field_dropdown",name:"region_id",options:i}],previousStatement:null,nextStatement:null,inputsInline:!1,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_init=function(t){var e=Blockly.Python.valueToCode(t,"device_id",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"product_key",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.Python.valueToCode(t,"device_name",Blockly.Python.ORDER_FUNCTION_CALL)||"",i=Blockly.Python.valueToCode(t,"deviceSecret",Blockly.Python.ORDER_FUNCTION_CALL)||"",a=t.getFieldValue("region_id")||"";"''"!==e&&"''"!==n&&"''"!==o&&"''"!==i&&(e===this.device_id&&n===this.product_key&&o===this.device_name&&i===this.deviceSecret||(this.device_id=e,this.product_key=n,this.device_name=o,this.deviceSecret=i,this.password=function(t,e,n,o){let l={productKey:e,deviceName:n,clientId:t};var i=Object.keys(l).sort();i=i.sort();var a=[];i.forEach(function(t){a.push(t+l[t])});var s=a.join("");return window.hex_hmac_md5(o,s).toUpperCase()}(l(e),l(n),l(o),l(i))));let s=`ali = AliIoT(device_id=${e}, product_key=${n}, device_name=${o}, region_id='${a}', password='${this.password}')\n`;if(Blockly.aliSub)for(var r=0;r<Blockly.aliSub.length;r++)s+=Blockly.aliSub[r].sub;return s},Blockly.Blocks.aliiot_start={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_START,previousStatement:null,nextStatement:null,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_start=function(t){return"ali.start()\n"},Blockly.Blocks.aliiot_sub_user={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_SUB_USER,args0:[{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!1,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_sub_user=function(t){let e=`def user_get_cb(payload):\n  # global params\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = payload\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let n="ali.subscribe_user_get_msg(user_get_cb)\n",o=Blockly.aliSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.aliSub.push({id:t.id,sub:n}):Blockly.aliSub[o].sub=n,e},Blockly.Blocks.aliiot_publish_user={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_PUBLISH_USER,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_publish_user=function(t){return`ali.publish_user_update_msg(str(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.aliiot_sub_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_SUB_RAW,args0:[{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!1,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_sub_raw=function(t){let e=`def raw_down_cb(payload):\n  # global params\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = payload\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let n="ali.subscribe_raw_down_msg(raw_down_cb)\n",o=Blockly.aliSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.aliSub.push({id:t.id,sub:n}):Blockly.aliSub[o].sub=n,e},Blockly.Blocks.aliiot_publish_raw={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_PUBLISH_RAW,args0:[{type:"input_value",name:"msg"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_publish_raw=function(t){return`ali.publish_raw_up_msg(str(${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`},Blockly.Blocks.aliiot_sub_shadow={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.ALIIOT_SUB_SHADOW,args0:[{type:"input_value",name:"msg",check:"null"}],message1:"%1",args1:[{type:"input_statement",name:"FUNC"}],inputsInline:!1,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},attrs:{keyword:["ali"]}},Blockly.Python.aliiot_sub_shadow=function(t){let e=`def shadow_get_cb(payload):\n  # global params\n  ${Blockly.Python.valueToCode(t,"msg",Blockly.Python.ORDER_NONE)||"_"} = payload\n${Blockly.Python.statementToCode(t,"FUNC",Blockly.Python.ORDER_FUNCTION_CALL)||""}  pass\n`;Blockly.defineGlobal().length>0&&(e=e.replace(/# global params/g,"global "+window.Blockly.defineGlobal().join(", ")));let n="ali.subscribe_shadow_get_msg(shadow_get_cb)\n",o=Blockly.aliSub.findIndex(function(e){return e.id===t.id});return-1===o?Blockly.aliSub.push({id:t.id,sub:n}):Blockly.aliSub[o].sub=n,e},Blockly.Blocks.aliiot_publish_shadow={init:function(){this.jsonInit(this._init()),this.img_map_create="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABJklEQVRYR+1XwVEDMRCTKgAqCKkASiCVhA5IKiCpgFBBQiVQAnSQDpKrQIzAzBw33PhsT7g87PdqVyffatdE5pG0ATAHcAlgQ3KZk4o5IEn3ALYd7JrkKjVfLoE9gEmn2JHk1ckJSLLkh55CU5ImN/gkKyDpDsBrT4UZybfB1QFUAlWBqsB5KRBM5ibSx7f2/p6YBYD3CP6D5PEn5ksBSfZwD5brFBMpiLVb7kiuGabaQ0GyEuizCagkQynWBHwfF6WJMvHN+FfQ+gm9ZHRnfOaHRWFN2KJWv3xAkrsg1gluw6eeEl7LYm24b+8M52VEUeG+PaMuJFWBqsDoCoz7MAnW/dfTrCFpckkn2Qlbs+OxU+n/HqeBhNcyDzCP8hcAi/aqNVSGTzC2pSS1Qp+LAAAAAElFTkSuQmCC",this.appendDummyInput().appendField("                            ").appendField(new Blockly.FieldImage(this.img_map_create,20,20,"*",this.create_key.bind(this)))},_init:function(){return{message0:Blockly.Msg.ALIIOT_PUBLISH_SHADOW,args0:[],message1:"%1",args1:[{type:"input_statement",name:"LOOP"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ALI_IOT_HUE,tool:[],nextConnection:"null"}},attrs:{keyword:["ali"]},create_key:function(){var t=BlocklyEditor.newBlock("create_publish_key");t.initSvg(),t.render();let e=this.getInput("LOOP").sourceBlock_.childBlocks_,n=e.findIndex(t=>"create_publish_key"===t.type);n>-1?o.findObj(e[n].nextConnection).nextConnection.connect(t.getConnections_()[0]):this.getInput("LOOP").connection.connect(t.getConnections_()[0])}},Blockly.Python.aliiot_publish_shadow=function(t){var e=Blockly.Python.statementToCode(t,"LOOP")||"";return`ali.publish_shadow_update_msg(${e=e.replace(/(^\s+)|(\s+$)/g,"")})\n`},Blockly.Blocks.create_publish_key={init:function(t){this.jsonInit(this._init()),this.appendValueInput("key"),this.appendDummyInput().appendField("="),this.appendValueInput("value"),this.connect_childblock()},_init:function(){return{previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ALI_IOT_HUE,tool:[]}},mutationToDom:function(){let t=this.getInput("key");if(t&&t.connection){let e=t.connection;if(this.keyBlockId&&e.targetConnection&&this.keyBlockId!==e.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.keyBlockId)&&(BlocklyEditor.getBlockById(this.keyBlockId).dispose(),this.keyBlockId=e.targetConnection.sourceBlock_.id)}catch(t){}}let e=this.getInput("value");if(e&&e.connection){let n=e.connection;if(this.valueBlockId&&n.targetConnection&&this.valueBlockId!==n.targetConnection.sourceBlock_.id)try{BlocklyEditor.getBlockById(this.valueBlockId)&&(BlocklyEditor.getBlockById(this.valueBlockId).dispose(),this.valueBlockId=n.targetConnection.sourceBlock_.id)}catch(t){}}},connect_childblock:function(){let t=o.createChildBlock("text_copy"),e=o.createChildBlock("text");this.keyBlockId=t.id,this.valueBlockId=e.id,this.getInput("key").connection.connect(t.getConnections_()[0]),this.getInput("value").connection.connect(e.getConnections_()[0])},onchange:function(t){if(!this.workspace.isDragging()){if(!this.getSurroundParent()||"aliiot_publish_shadow"!==this.getSurroundParent().type)return this.setWarningText("Warning: This block is invalid!"),void this.setEnabled(!1);if(t.blockId===this.childBlocks_[0].id){let t=this.childBlocks_[0].getFieldValue("TEXT");!t||/^[_A-Za-z]/g.test(t)?(this.setWarningText(null),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_()):(this.setWarningText("Warning: Key is invalid!"),this.childBlocks_[0].getField("TEXT")&&this.childBlocks_[0].getField("TEXT").resizeEditor_())}}}},Blockly.Python.create_publish_key=function(t){var e=Blockly.Python.valueToCode(t,"key",Blockly.Python.ORDER_FUNCTION_CALL)||"",n=Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"";return""!==e&&""!==n&&"''"!==e&&"''"!==n&&/^[_A-Za-z]/g.test(e)?t.getNextBlock()?`${e}=${n},`:`${e}=${n}`:""}},function(t,e,n){"use strict";n.r(e);var o=n(151),l=n(152),i=n(153);Blockly.M5Toolbox.thirdpartyToolbox=[{kind:"category",name:"%{BKY_MYCOBOT}",colour:"%{BKY_COMPONENT_LINE_HUE}",contents:o.MycobotToolbox,toolboxitemid:"mycobot"},{kind:"category",name:"%{BKY_MYCOBOT_PRO}",colour:"%{BKY_TEXTS_HUE}",contents:l.MycobotProToolbox,toolboxitemid:"mycobotpro"},{kind:"category",name:"Tello",colour:"#307A06",contents:i.TelloToolbox,toolboxitemid:"tello"}]},function(t,e){Blockly.Blocks.mycobot_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_init=function(t){return"cobot = mycobot.MyCobot()\n"},Blockly.Blocks.mycobot_power_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_POWER_ON,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_power_on=function(t){return"cobot.power_on()\n"},Blockly.Blocks.mycobot_power_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_POWER_OFF,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_power_off=function(t){return"cobot.power_off()\n"},Blockly.Blocks.mycobot_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: ","1 : power on","0 : power off","-1: error data"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_status=function(t){return["cobot.is_power_on()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_free_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_FREE_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_free_mode=function(t){return"cobot.set_free_mode()\n"},Blockly.Blocks.mycobot_get_angles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_ANGLES,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: data_list (list[angle...])"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_angles=function(t){return["cobot.get_angles()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_send_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ANGLE,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"degree"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["id: 1 ~ 6","degree: -180 ~ 180","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_angle=function(t){return`cobot.send_angle(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_send_all_angles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ALL_ANGLES,args0:[{type:"input_value",name:"degree"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["degree: [ 90, 90, 90, 90, 90, 90]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_all_angles=function(t){return`cobot.send_angles(${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_send_all_angles_degree={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ALL_ANGLES_DEGREE,args0:[{type:"input_value",name:"degree1"},{type:"input_value",name:"degree2"},{type:"input_value",name:"degree3"},{type:"input_value",name:"degree4"},{type:"input_value",name:"degree5"},{type:"input_value",name:"degree6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["degree: -180 ~ 180","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_all_angles_degree=function(t){return`cobot.send_angles([${Blockly.Python.valueToCode(t,"degree1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_radians={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_RADIANS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: data_list (list[radian...])"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_radians=function(t){return["cobot.get_radians()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_send_radians={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_RADIANS,args0:[{type:"input_value",name:"radians"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["radians: [0, 0, 0, 0, 0, 0]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_radians=function(t){return`cobot.send_radians(${Blockly.Python.valueToCode(t,"radians",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_send_radians_copy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_RADIANS_COPY,args0:[{type:"input_value",name:"radians1"},{type:"input_value",name:"radians2"},{type:"input_value",name:"radians3"},{type:"input_value",name:"radians4"},{type:"input_value",name:"radians5"},{type:"input_value",name:"radians6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["radians: [0, 0, 0, 0, 0, 0]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_radians_copy=function(t){return`cobot.send_radians([${Blockly.Python.valueToCode(t,"radians1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_coords={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_COORDS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: data_list (list): [x, y, z, rx, ry, rz]"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_coords=function(t){return["cobot.get_coords()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_send_coord={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORD,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"coord"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["id: 1 ~ 6","coord: x/y/z/rx/ry/rz","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_coord=function(t){return`cobot.send_coord(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"coord",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_send_coords={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORDS,args0:[{type:"input_value",name:"coords"},{type:"input_value",name:"speed"},{type:"field_dropdown",name:"mode",options:[["angluar","0"],["linear","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["coords: [x(mm), y, z, rx(angle), ry, rz]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_coords=function(t){return`cobot.send_coords(${Blockly.Python.valueToCode(t,"coords",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("mode")})\n`},Blockly.Blocks.mycobot_send_coords_list={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORDS_LIST,args0:[{type:"input_value",name:"coord1"},{type:"input_value",name:"coord2"},{type:"input_value",name:"coord3"},{type:"input_value",name:"coord4"},{type:"input_value",name:"coord5"},{type:"input_value",name:"coord6"},{type:"input_value",name:"speed"},{type:"field_dropdown",name:"mode",options:[["angluar","0"],["linear","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["coords: [x, y, z, rx, ry, rz]","speed: 0 ~ 100","mode: 0 or 1"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_send_coords_list=function(t){return`cobot.send_coords([${Blockly.Python.valueToCode(t,"coord1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("mode")})\n`},Blockly.Blocks.mycobot_pause={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_PAUSE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_pause=function(t){return"cobot.pause()\n"},Blockly.Blocks.mycobot_resume={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_RESUME,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_resume=function(t){return"cobot.resume()\n"},Blockly.Blocks.mycobot_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_stop=function(t){return"cobot.stop()\n"},Blockly.Blocks.mycobot_ispause={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_ISPAUSE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_ispause=function(t){return["cobot.is_paused()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_is_in_position={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_IN_POSITION,args0:[{type:"input_value",name:"data1"},{type:"input_value",name:"data2"},{type:"input_value",name:"data3"},{type:"input_value",name:"data4"},{type:"input_value",name:"data5"},{type:"input_value",name:"data6"},{type:"input_value",name:"id"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["id: 1 - coords, 0 - angle","return: ","0 : error position","1 : right position","-1: error data"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_is_in_position=function(t){return[`cobot.is_in_position([${Blockly.Python.valueToCode(t,"data1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_ismoving={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_ISMOVING,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: ","0 : not moving","1 : is moving","-1: error data"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_ismoving=function(t){return["cobot.is_moving()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_jog_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_ANGLE,args0:[{type:"input_value",name:"joint_id"},{type:"input_value",name:"direction"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["joint id: 1 ~ 6","direction: 0 or 1","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_jog_angle=function(t){return`cobot.jog_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"direction",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_jog_coord={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_COORD,args0:[{type:"input_value",name:"coord_id"},{type:"input_value",name:"direction"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["coord id: 1 ~ 6","direction: 0 or 1","speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_jog_coord=function(t){return`cobot.jog_coord(${Blockly.Python.valueToCode(t,"coord_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"direction",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_jog_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_jog_stop=function(t){return"cobot.jog_stop()\n"},Blockly.Blocks.mycobot_get_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_SPEED,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_speed=function(t){return["cobot.get_speed()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_SPEED,args0:[{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["speed: 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_speed=function(t){return`cobot.set_speed(${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_joint_min_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_JOINT_MIN_ANGLE,args0:[{type:"input_value",name:"joint_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_joint_min_angle=function(t){return[`cobot.get_joint_min_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_get_joint_max_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_JOINT_MAX_ANGLE,args0:[{type:"input_value",name:"joint_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_joint_max_angle=function(t){return[`cobot.get_joint_max_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_is_servo_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_SERVO_ENABLE,args0:[{type:"input_value",name:"servo_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_is_servo_enable=function(t){return[`cobot.is_servo_enable(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_is_allservo_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_ALLSERVO_ENABLE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_is_allservo_enable=function(t){return["cobot.is_all_servo_enable()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_release_servo={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_RELEASE_SERVO,args0:[{type:"input_value",name:"servo_id"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_release_servo=function(t){return`cobot.release_servo(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.mycobot_focus_servo={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_FOCUS_SERVO,args0:[{type:"input_value",name:"servo_id"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_focus_servo=function(t){return`cobot.focus_servo(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.mycobot_set_atom_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_ATOM_COLOR,args0:[{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["R: 0 ~ 255","G: 0 ~ 255","B: 0 ~ 255"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_atom_color=function(t){return`cobot.set_color(${Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.mycobot_set_pin_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_PIN_MODE,args0:[{type:"input_value",name:"pin_no"},{type:"field_dropdown",name:"pin_mode",options:[["input","0"],["output","1"],["input_pullup","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_pin_mode=function(t){return`cobot.set_pin_mode(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("pin_mode")})\n`},Blockly.Blocks.mycobot_set_digital_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_DIGITAL_OUTPUT,args0:[{type:"input_value",name:"pin_no"},{type:"input_value",name:"pin_signal"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_digital_output=function(t){return`cobot.set_digital_output(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"pin_signal",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_digital_input={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_DIGITAL_INPUT,args0:[{type:"input_value",name:"pin_no"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_digital_input=function(t){return[`cobot.get_digital_input(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_pwm_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_PWM_MODE,args0:[{type:"input_value",name:"pin_no"},{type:"input_value",name:"channel"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_pwm_mode=function(t){return`cobot.set_pwm_mode(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_set_pwm_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_PWM_OUTPUT,args0:[{type:"input_value",name:"channel"},{type:"input_value",name:"freq"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_pwm_output=function(t){return`cobot.set_pwm_output(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"freq",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_gripper_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_GRIPPER_VALUE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_gripper_value=function(t){return["cobot.get_gripper_value()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_gripper_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_VALUE,args0:[{type:"input_value",name:"value"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["value (int): 0 ~ 4096","speed (int): 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_gripper_value=function(t){return`cobot.set_gripper_value(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_set_gripper_state={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_STATE,args0:[{type:"field_dropdown",name:"flag",options:[["open","0"],["close","1"]]},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["speed (int): 0 ~ 100"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_gripper_state=function(t){return`cobot.set_gripper_state(${t.getFieldValue("flag")}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_set_gripper_ini={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_INI,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["Set the current position to zero","Current position value is `248`."]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_gripper_ini=function(t){return"cobot.set_gripper_ini()\n"},Blockly.Blocks.mycobot_is_gripper_moving={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_GRIPPER_MOVING,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["return: ","0 : not moving","1 : is moving","-1: error data"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_is_gripper_moving=function(t){return["cobot.is_gripper_moving()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_get_encoder_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_ENCODER_VALUE,args0:[{type:"input_dummy"},{type:"input_value",name:"id",align:"RIGHT"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["id: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_encoder_value=function(t){return[`cobot.get_encoder(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_encoder_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_ENCODER_VALUE,args0:[{type:"input_dummy"},{type:"input_value",name:"id",align:"RIGHT"},{type:"input_value",name:"value",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["id: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_encoder_value=function(t){return`cobot.set_encoder(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_sync_send_angles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SYNC_SEND_ANGLES,args0:[{type:"input_value",name:"data1"},{type:"input_value",name:"data2"},{type:"input_value",name:"data3"},{type:"input_value",name:"data4"},{type:"input_value",name:"data5"},{type:"input_value",name:"data6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_sync_send_angles=function(t){return`cobot.sync_send_angles([${Blockly.Python.valueToCode(t,"data1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_sync_send_coords={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SYNC_SEND_COORDS,args0:[{type:"input_value",name:"data1"},{type:"input_value",name:"data2"},{type:"input_value",name:"data3"},{type:"input_value",name:"data4"},{type:"input_value",name:"data5"},{type:"input_value",name:"data6"},{type:"input_value",name:"speed"},{type:"field_dropdown",name:"mode",options:[["angular","0"],["linear","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_sync_send_coords=function(t){return`cobot.sync_send_coords([${Blockly.Python.valueToCode(t,"data1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("mode")})\n`},Blockly.Blocks.mycobot_release_all_servos={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_RELEASE_ALL_SERVOS,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_release_all_servos=function(t){return"cobot.release_all_servos()\n"},Blockly.Blocks.mycobot_check_atom_connect={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_CHECK_ATOM_CONNECT,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_check_atom_connect=function(t){return["cobot.is_controller_connected()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_encoders={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_ENCODERS,args0:[{type:"input_value",name:"data1"},{type:"input_value",name:"data2"},{type:"input_value",name:"data3"},{type:"input_value",name:"data4"},{type:"input_value",name:"data5"},{type:"input_value",name:"data6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_encoders=function(t){return`cobot.set_encoders([${Blockly.Python.valueToCode(t,"data1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"data6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_encoders={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_ENCODERS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_encoders=function(t){return["cobot.get_encoders()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_servo_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_SERVO_DATA,args0:[{type:"input_value",name:"servo",align:"RIGHT"},{type:"input_value",name:"data",align:"RIGHT"},{type:"input_value",name:"value",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo: 1 ~ 6","data: 0x20 ~ 0x24"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_servo_data=function(t){return`cobot.set_servo_data(${Blockly.Python.valueToCode(t,"servo",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0x20"}, ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_servo_data={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_SERVO_DATA,args0:[{type:"input_dummy"},{type:"input_value",name:"servo"},{type:"input_value",name:"data"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo: 1 ~ 6","data id: 0x21 ~ 0x27"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_servo_data=function(t){return[`cobot.get_servo_data(${Blockly.Python.valueToCode(t,"servo",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_servo_calibration={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_SERVO_CALIBRATION,args0:[{type:"input_dummy"},{type:"input_value",name:"servo",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:["servo: 1 ~ 6"]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_servo_calibration=function(t){return`cobot.set_servo_calibration(${Blockly.Python.valueToCode(t,"servo",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.mycobot_get_tof_distance={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_TOF_DISTANCE,args0:[],output:null,inputsInline:!1,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_tof_distance=function(t){return["cobot.get_tof_distance()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobot_set_basic_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_BASIC_OUTPUT,args0:[{type:"input_dummy"},{type:"input_value",name:"pin"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_set_basic_output=function(t){return`cobot.set_basic_output(${Blockly.Python.valueToCode(t,"pin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobot_get_basic_input={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_BASIC_INPUT,args0:[{type:"input_dummy"},{type:"input_value",name:"pin"}],output:null,inputsInline:!0,colour:Blockly.Msg.COMPONENT_LINE_HUE,tool:[]}},attrs:{keyword:["mycobot"]}},Blockly.Python.mycobot_get_basic_input=function(t){return[`cobot.get_basic_input(${Blockly.Python.valueToCode(t,"pin",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.mycobotpro_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_INIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_init=function(t){return"cobot_pro = myCobotPro.myCobotPro()\n"},Blockly.Blocks.mycobotpro_power_on={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_POWER_ON,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_power_on=function(t){return"cobot_pro.power_on()\n"},Blockly.Blocks.mycobotpro_power_off={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_POWER_OFF,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_power_off=function(t){return"cobot_pro.power_off()\n"},Blockly.Blocks.mycobotpro_get_status={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_STATUS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: ","1 : power on","0 : power off","-1: error data"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_status=function(t){return["cobot_pro.is_power_on()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_set_free_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_FREE_MODE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_free_mode=function(t){return"cobot_pro.set_free_mode()\n"},Blockly.Blocks.mycobotpro_get_angles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_ANGLES,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: data_list (list[angle...])"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_angles=function(t){return["cobot_pro.get_angles()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_send_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ANGLE,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"degree"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["id: 1 ~ 6","degree: -180 ~ 180","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_angle=function(t){return`cobot_pro.send_angle(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_send_all_angles={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ALL_ANGLES,args0:[{type:"input_value",name:"degree"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["degree: [ 90, 90, 90, 90, 90, 90]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_all_angles=function(t){return`cobot_pro.send_angles(${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_send_all_angles_degree={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_ALL_ANGLES_DEGREE,args0:[{type:"input_value",name:"degree1"},{type:"input_value",name:"degree2"},{type:"input_value",name:"degree3"},{type:"input_value",name:"degree4"},{type:"input_value",name:"degree5"},{type:"input_value",name:"degree6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["degree: -180 ~ 180","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_all_angles_degree=function(t){return`cobot_pro.send_angles([${Blockly.Python.valueToCode(t,"degree1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"degree6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_get_radians={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_RADIANS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: data_list (list[radian...])"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_radians=function(t){return["cobot_pro.get_radians()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_send_radians={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_RADIANS,args0:[{type:"input_value",name:"radians"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["radians: [0, 0, 0, 0, 0, 0]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_radians=function(t){return`cobot_pro.send_radians(${Blockly.Python.valueToCode(t,"radians",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_send_radians_copy={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_RADIANS_COPY,args0:[{type:"input_value",name:"radians1"},{type:"input_value",name:"radians2"},{type:"input_value",name:"radians3"},{type:"input_value",name:"radians4"},{type:"input_value",name:"radians5"},{type:"input_value",name:"radians6"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["radians: [0, 0, 0, 0, 0, 0]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_radians_copy=function(t){return`cobot_pro.send_radians([${Blockly.Python.valueToCode(t,"radians1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"radians6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_get_coords={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_COORDS,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: data_list (list): [x, y, z, rx, ry, rz]"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_coords=function(t){return["cobot_pro.get_coords()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_send_coord={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORD,args0:[{type:"input_value",name:"id"},{type:"input_value",name:"coord"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["id: 1 ~ 6","coord: x/y/z/rx/ry/rz","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_coord=function(t){return`cobot_pro.send_coord(${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"coord",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_send_coords={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORDS,args0:[{type:"input_value",name:"coords"},{type:"input_value",name:"speed"},{type:"field_dropdown",name:"mode",options:[["angluar","0"],["linear","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["coords: [x(mm), y, z, rx(angle), ry, rz]","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_coords=function(t){return`cobot_pro.send_coords(${Blockly.Python.valueToCode(t,"coords",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("mode")})\n`},Blockly.Blocks.mycobotpro_send_coords_list={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SEND_COORDS_LIST,args0:[{type:"input_value",name:"coord1"},{type:"input_value",name:"coord2"},{type:"input_value",name:"coord3"},{type:"input_value",name:"coord4"},{type:"input_value",name:"coord5"},{type:"input_value",name:"coord6"},{type:"input_value",name:"speed"},{type:"input_value",name:"mode"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["coords: [x, y, z, rx, ry, rz]","speed: 0 ~ 100","mode: 0 or 1"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_send_coords_list=function(t){return`cobot_pro.send_coords([${Blockly.Python.valueToCode(t,"coord1",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord2",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord3",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord4",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord5",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"coord6",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}], ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"mode",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_pause={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_PAUSE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_pause=function(t){return"cobot_pro.pause()\n"},Blockly.Blocks.mycobotpro_resume={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_RESUME,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_resume=function(t){return"cobot_pro.resume()\n"},Blockly.Blocks.mycobotpro_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_stop=function(t){return"cobot_pro.stop()\n"},Blockly.Blocks.mycobotpro_ispause={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_ISPAUSE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_ispause=function(t){return["cobot_pro.is_paused()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_is_in_position={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_IS_IN_POSITION,args0:[{type:"input_value",name:"data"},{type:"input_value",name:"id"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["id: 1 - coords, 0 - angle","return: ","0 : error position","1 : right position","-1: error data"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_is_in_position=function(t){return[`cobot_pro.is_in_position(${Blockly.Python.valueToCode(t,"data",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"}, ${Blockly.Python.valueToCode(t,"id",Blockly.Python.ORDER_FUNCTION_CALL)||"[]"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_ismoving={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_ISMOVING,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: ","0 : not moving","1 : is moving","-1: error data"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_ismoving=function(t){return["cobot_pro.is_moving()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_jog_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_ANGLE,args0:[{type:"input_value",name:"joint_id"},{type:"input_value",name:"direction"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["joint id: 1 ~ 6","direction: 0 or 1","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_jog_angle=function(t){return`cobot_pro.jog_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"direction",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_jog_coord={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_COORD,args0:[{type:"input_value",name:"coord_id"},{type:"input_value",name:"direction"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["coord id: 1 ~ 6","direction: 0 or 1","speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_jog_coord=function(t){return`cobot_pro.jog_coord(${Blockly.Python.valueToCode(t,"coord_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"direction",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_jog_stop={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_JOG_STOP,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_jog_stop=function(t){return"cobot_pro.jog_stop()\n"},Blockly.Blocks.mycobotpro_get_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_SPEED,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_speed=function(t){return["cobot_pro.get_speed()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_set_speed={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_SPEED,args0:[{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["speed: 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_speed=function(t){return`cobot_pro.set_speed(${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_get_joint_min_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_JOINT_MIN_ANGLE,args0:[{type:"input_value",name:"joint_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_joint_min_angle=function(t){return[`cobot_pro.get_joint_min_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_get_joint_max_angle={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_JOINT_MAX_ANGLE,args0:[{type:"input_value",name:"joint_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_joint_max_angle=function(t){return[`cobot_pro.get_joint_max_angle(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_is_servo_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_SERVO_ENABLE,args0:[{type:"input_value",name:"servo_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_is_servo_enable=function(t){return[`cobot_pro.is_servo_enable(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_is_allservo_enable={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_ALLSERVO_ENABLE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_is_allservo_enable=function(t){return["cobot_pro.is_all_servo_enable()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_release_servo={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_RELEASE_SERVO,args0:[{type:"input_value",name:"servo_id"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_release_servo=function(t){return`cobot_pro.release_servo(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.mycobotpro_focus_servo={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_FOCUS_SERVO,args0:[{type:"input_value",name:"servo_id"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["servo id: 1 ~ 6"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_focus_servo=function(t){return`cobot_pro.focus_servo(${Blockly.Python.valueToCode(t,"servo_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})\n`},Blockly.Blocks.mycobotpro_set_atom_color={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_ATOM_COLOR,args0:[{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["R: 0 ~ 255","G: 0 ~ 255","B: 0 ~ 255"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_atom_color=function(t){return`cobot_pro.set_color(${Blockly.Python.valueToCode(t,"R",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"G",Blockly.Python.ORDER_NONE)||"0"}, ${Blockly.Python.valueToCode(t,"B",Blockly.Python.ORDER_NONE)||"0"})\n`},Blockly.Blocks.mycobotpro_set_pin_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_PIN_MODE,args0:[{type:"input_value",name:"pin_no"},{type:"field_dropdown",name:"pin_mode",options:[["input","0"],["output","1"],["input_pullup","2"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_pin_mode=function(t){return`cobot_pro.set_pin_mode(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${t.getFieldValue("pin_mode")})\n`},Blockly.Blocks.mycobotpro_set_digital_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_DIGITAL_OUTPUT,args0:[{type:"input_value",name:"pin_no"},{type:"input_value",name:"pin_signal"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_digital_output=function(t){return`cobot_pro.set_digital_output(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"pin_signal",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_get_digital_input={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_DIGITAL_INPUT,args0:[{type:"input_value",name:"pin_no"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_digital_input=function(t){return[`cobot_pro.get_digital_input(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_set_pwm_mode={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_PWM_MODE,args0:[{type:"input_value",name:"pin_no"},{type:"input_value",name:"channel"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_pwm_mode=function(t){return`cobot_pro.set_pwm_mode(${Blockly.Python.valueToCode(t,"pin_no",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_set_pwm_output={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_SET_PWM_OUTPUT,args0:[{type:"input_value",name:"channel"},{type:"input_value",name:"pin_val"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_pwm_output=function(t){return`cobot_pro.set_pwm_output(${Blockly.Python.valueToCode(t,"channel",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"pin_val",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_get_gripper_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_GET_GRIPPER_VALUE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_gripper_value=function(t){return["cobot_pro.get_gripper_value()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_set_gripper_value={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_VALUE,args0:[{type:"input_value",name:"value"},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["value (int): 0 ~ 4096","speed (int): 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_gripper_value=function(t){return`cobot_pro.set_gripper_value(${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_set_gripper_state={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_STATE,args0:[{type:"field_dropdown",name:"flag",options:[["open","0"],["close","1"]]},{type:"input_value",name:"speed"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["speed (int): 0 ~ 100"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_gripper_state=function(t){return`cobot_pro.set_gripper_state(${t.getFieldValue("flag")}, ${Blockly.Python.valueToCode(t,"speed",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_set_gripper_ini={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_SET_GRIPPER_INI,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Set the current position to zero","Current position value is `248`."]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_gripper_ini=function(t){return"cobot_pro.set_gripper_ini()\n"},Blockly.Blocks.mycobotpro_is_gripper_moving={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOT_IS_GRIPPER_MOVING,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["return: ","0 : not moving","1 : is moving","-1: error data"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_is_gripper_moving=function(t){return["cobot_pro.is_gripper_moving()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_get_joint_current={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_GET_JOINT_CURRENT,args0:[{type:"input_value",name:"joint_id"}],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Read collision current","joint_id: 1 ~ 6"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_get_joint_current=function(t){return[`cobot_pro.get_joint_current(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"})`,Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.mycobotpro_set_joint_current={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_SET_JOINT_CURRENT,args0:[{type:"input_value",name:"joint_id"},{type:"input_value",name:"value"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Set collision current","joint_id: 1 ~ 6","value: int"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_joint_current=function(t){return`cobot_pro.set_joint_current(${Blockly.Python.valueToCode(t,"joint_id",Blockly.Python.ORDER_FUNCTION_CALL)||"1"}, ${Blockly.Python.valueToCode(t,"value",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.mycobotpro_set_current_state={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MYCOBOTPRO_SET_CURRENT_STATE,args0:[{type:"field_dropdown",name:"flag",options:[["off","0"],["open","1"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:["Setting the impact current switch"]}},attrs:{keyword:["mycobotpro"]}},Blockly.Python.mycobotpro_set_current_state=function(t){return`cobot_pro.set_current_state(${t.getFieldValue("flag")})\n`}},function(t,e){let n="#307a06";Blockly.Blocks.__Tello_initDrone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_INITTELLO}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_initDrone=function(t){return"import network\nimport tello\nwifi = network.WLAN(network.STA_IF)\nwifi.active(True)\n"},Blockly.Blocks.__Tello_connectDrone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_CONNECTDRONE}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_connectDrone=function(t){return"drone = tello.Tello('192.168.10.2', 8889)\ndrone.command('command')\n"},Blockly.Blocks.__Tello_takeoffDrone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_TAKEOFFDRONE}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_takeoffDrone=function(t){return"drone.takeoff()\n"},Blockly.Blocks.__Tello_landDrone={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_LANDDRONE}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_landDrone=function(t){return"drone.land()\n"},Blockly.Blocks.__Tello_rotateCW={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_ROTATECW}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_DEGREE},{type:"input_value",value:0,name:"degree"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_rotateCW=function(t){return`DEGREE = ${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\n\ndrone.rotate_cw((DEGREE))\n`},Blockly.Blocks.__Tello_rotateCCW={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_ROTATECCW}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_DEGREE},{type:"input_value",value:0,name:"degree"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_rotateCCW=function(t){return`DEGREE = ${Blockly.Python.valueToCode(t,"degree",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\n\ndrone.rotate_ccw((DEGREE))\n`},Blockly.Blocks.__Tello_flipRight={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_FLIPRIGHT}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_flipRight=function(t){return"drone.flip('r')\n"},Blockly.Blocks.__Tello_flipLeft={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_FLIPRIGHT}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_flipLeft=function(t){return"drone.flip('l')\n"},Blockly.Blocks.__Tello_moveUp={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_UP}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveUp=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_up((CM))\n`},Blockly.Blocks.__Tello_moveDown={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_DOWN}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveDown=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_down((CM))\n`},Blockly.Blocks.__Tello_moveForward={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_FORWARD}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",value:0,name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveForward=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_forward((CM))\n`},Blockly.Blocks.__Tello_moveBackward={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_BACKWARD}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",value:0,name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveBackward=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_backward((CM))\n`},Blockly.Blocks.__Tello_moveLeft={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_LEFT}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",value:0,name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveLeft=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_left((CM))\n`},Blockly.Blocks.__Tello_moveRight={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:"%1",args0:[{type:"field_label",text:Blockly.Msg.TELLO_MOVE_RIGHT}],message1:"%1 %2",args1:[{type:"field_label",text:Blockly.Msg.TELLO_CM},{type:"input_value",value:0,name:"cm"}],previousStatement:null,nextStatement:null,colour:n}},attrs:{keyword:["tello"]}},Blockly.Python.__Tello_moveRight=function(t){return`CM = ${Blockly.Python.valueToCode(t,"cm",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}\ndrone.move_right((CM))\n`}},function(t,e){Blockly.Blocks.audio_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AUDIO_INIT,args0:[{type:"input_value",name:"token"},{type:"field_dropdown",name:"autoplay",options:[["True","True"],["False","False"]]}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["audio"]}},Blockly.Python.audio_init=function(t){return`audio = AudioPlay(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${t.getFieldValue("autoplay")||"True"})\n`},Blockly.Blocks.audio_set_play={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AUDIO_SET_PLAY,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["audio"]}},Blockly.Python.audio_set_play=function(t){return"audio.play()\n"},Blockly.Blocks.audio_get_state={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AUDIO_GET_STATE,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tool:[]}},attrs:{keyword:["audio"]}},Blockly.Python.audio_get_state=function(t){return["audio.state()",Blockly.Python.ORDER_CONDITIONAL]},Blockly.Blocks.audio_deinit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.AUDIO_DEINIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE}},attrs:{keyword:["audio"]}},Blockly.Python.audio_deinit=function(t){return"audio.deinit()\n"}},function(t,e){Blockly.Blocks.micrecord_second={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MIC_RECORD_SECOND,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["record"]}},Blockly.Python.micrecord_second=function(t){return"mic = MicRecord()\n"},Blockly.Blocks.micrecord_server={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MIC_RECORD_SERVER,args0:[{type:"input_value",name:"second"},{type:"input_value",name:"token"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["record"]}},Blockly.Python.micrecord_server=function(t){return`mic.record2server(${Blockly.Python.valueToCode(t,"second",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`},Blockly.Blocks.micrecord_file={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MIC_RECORD_FILE,args0:[{type:"input_value",name:"second"},{type:"input_value",name:"filename"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.UART_HUE}},attrs:{keyword:["record"]}},Blockly.Python.micrecord_file=function(t){return`mic.record2file(${Blockly.Python.valueToCode(t,"second",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"filename",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){Blockly.Blocks.timercam_init={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMERCAM_INIT,args0:[{type:"input_value",name:"token"},{type:"input_value",name:"x"},{type:"input_value",name:"y"},{type:"input_value",name:"width"},{type:"input_value",name:"height"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["camera"]}},Blockly.Python.timercam_init=function(t){return`cam = TimerCam(${Blockly.Python.valueToCode(t,"token",Blockly.Python.ORDER_FUNCTION_CALL)||""}, ${Blockly.Python.valueToCode(t,"x",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"y",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"width",Blockly.Python.ORDER_FUNCTION_CALL)||"0"}, ${Blockly.Python.valueToCode(t,"height",Blockly.Python.ORDER_FUNCTION_CALL)||"0"})\n`},Blockly.Blocks.timercam_show={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMERCAM_SHOW,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["camera"]}},Blockly.Python.timercam_show=function(t){return"cam.show()\n"},Blockly.Blocks.timercam_hide={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMERCAM_HIDE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["camera"]}},Blockly.Python.timercam_hide=function(t){return"cam.hide()\n"},Blockly.Blocks.timercam_delete={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMERCAM_DELETE,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["camera"]}},Blockly.Python.timercam_delete=function(t){return"cam.delete()\n"},Blockly.Blocks.timercam_deinit={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.TIMERCAM_DEINIT,args0:[],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.RGB_HUE}},attrs:{keyword:["camera"]}},Blockly.Python.timercam_deinit=function(t){return"cam.deinit()\n"}},function(t,e){Blockly.Blocks.echo_stt_init={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.ECHO_STT_INIT,args0:[{type:"input_value",name:"TOKEN"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE,tool:[]}},attrs:{keyword:["echo","stt"]}},Blockly.Python.echo_stt_init=function(t){let e=`echo = Echo(str(${Blockly.Python.valueToCode(t,"TOKEN",Blockly.Python.ORDER_FUNCTION_CALL)||""}))\n`;if(Blockly.echoSttCb)for(var n=0;n<Blockly.echoSttCb.length;n++)e+=Blockly.echoSttCb[n].cb;return e},Blockly.Blocks.echo_stt_recv_data={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.ECHO_STT_RECV_DATA,args0:[{type:"input_value",name:"DATA"},{type:"input_statement",name:"CB"}],inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE,tool:[]}},attrs:{keyword:["echo","stt"]}},Blockly.Python.echo_stt_recv_data=function(t){var e=Blockly.Python.valueToCode(t,"DATA",Blockly.Python.ORDER_FUNCTION_CALL)||"_",n=Blockly.Python.statementToCode(t,"CB",Blockly.Python.ORDER_FUNCTION_CALL)||"",o=Blockly.defineGlobal(),l=`\ndef echo_callback(*args):\n  # global params\n  ${e} = args[0]\n${n}\n  pass\n`;o.length>0&&(l=l.replace(/# global params/g,"global "+o.join(",")));let i="echo.set_callback(echo_callback)\n",a=Blockly.echoSttCb.findIndex(function(e){return e.id===t.id});return-1===a?Blockly.echoSttCb.push({id:t.id,cb:i}):Blockly.echoSttCb[a].cb=i,l},Blockly.Blocks.echo_stt_get_text={init:function(){this.jsonInit(this._getJson())},_getJson:function(){return{message0:Blockly.Msg.ECHO_STT_GET_TEXT,args0:[],output:null,inputsInline:!0,colour:Blockly.Msg.ECHO_STT_HUE,tool:[]}},attrs:{keyword:["echo","stt"]}},Blockly.Python.echo_stt_get_text=function(t){return["echo.recv_text",Blockly.Python.ORDER_CONDITIONAL]}},function(t,e){Blockly.Blocks.mqtt_printer_set_topic={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MQTT_PRINTER_SET_TOPIC,args0:[{type:"input_value",name:"TOPIC"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MQTT_PRINTER_HUE,tool:[]}},attrs:{keyword:["mqtt","printer"]}},Blockly.Python.mqtt_printer_set_topic=function(t){return`mqtt = Mqtt_Printer(${Blockly.Python.valueToCode(t,"TOPIC",Blockly.Python.ORDER_FUNCTION_CALL)||""})\nmqtt.start()\n`},Blockly.Blocks.mqtt_printer_publish={init:function(){this.jsonInit(this._init())},_init:function(){return{message0:Blockly.Msg.MQTT_PRINTER_PUBLISH,args0:[{type:"field_dropdown",name:"FORMAT",options:[["ASCII","ASCII"],["QR","QR"],["BAR","BAR"]]},{type:"input_value",name:"MSG"}],previousStatement:null,nextStatement:null,inputsInline:!0,colour:Blockly.Msg.MQTT_PRINTER_HUE,tool:["msg: string"]}},attrs:{keyword:["mqtt","printer"]}},Blockly.Python.mqtt_printer_publish=function(t){return`mqtt.print_func('${t.getFieldValue("FORMAT")}',${Blockly.Python.valueToCode(t,"MSG",Blockly.Python.ORDER_FUNCTION_CALL)||""})\n`}},function(t,e){},function(t,e,n){"use strict";n.r(e);var o=n(63),l=n(64),i=n(65),a=n(66),s=n(67),r=n(68),c=n(69),u=n(70),_=n(71),d=n(72),h=n(73),y=n(74),p=n(75),m=n(76),k=n(77),g=n(78),f=n(79),b=n(80),v=n(81),T=n(82),E=n(83),B=n(84),I=n(85),R=n(86),O=n(87),C=n(88),N=n(89),w=n(90),A=n(91);var M=n(92),S=n(93),P=n(104),x=n(105),D=n(106),L=n(107),U=n(108);var F=n(109),H=n(110),V=n(111),G=n(112),j=n(113),W=n(114),K=n(115),Y=n(116),X=n(117),$=n(118),z=n(119),q=n(120);var J=n(155),Z=n(124),Q=n(125);Blockly.M5Toolbox.unitsToolbox=[{kind:"category",name:"%{BKY_ENV}",colour:"%{BKY_DHT_HUE}",hidden:"true",toolboxitemid:"unit_env",contents:o.UnitEnvToolbox},{kind:"category",name:"%{BKY_ANGLE}",colour:"%{BKY_PINS_HUE}",hidden:"true",toolboxitemid:"unit_angle",contents:l.UnitAngleToolbox},{kind:"category",name:"%{BKY_PIR}",colour:"%{BKY_SERVO_HUE}",hidden:"true",toolboxitemid:"unit_pir",contents:i.UnitPirToolbox},{kind:"category",name:"%{BKY_NEOPIXEL}",colour:"%{BKY_PINS_HUE}",hidden:"true",toolboxitemid:"unit_neopixel",contents:a.UnitNeopixelToolbox},{kind:"category",name:"%{BKY_JOYSTICK}",colour:"%{BKY_DHT_HUE}",hidden:"true",toolboxitemid:"unit_joystick",contents:s.UnitJoysticklToolbox},{kind:"category",name:"%{BKY_LIGHT}",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"unit_light",contents:r.UnitLightToolbox},{kind:"category",name:"%{BKY_EARTH}",colour:"%{BKY_GPIO_HUE}",hidden:"true",toolboxitemid:"unit_earth",contents:c.UnitEarthToolbox},{kind:"category",name:"%{BKY_MAKEY}",colour:"%{BKY_NXT_MOTOR_HUE}",hidden:"true",toolboxitemid:"unit_makey",contents:u.UnitMakeyToolbox},{kind:"category",name:"%{BKY_SERVO}",colour:"%{BKY_SERVO_HUE}",hidden:"true",toolboxitemid:"unit_servo",contents:_.UnitServoToolbox},{kind:"category",name:"%{BKY_WEIGHT}",colour:"%{BKY_DAC_HUE}",hidden:"true",toolboxitemid:"unit_weigh",contents:d.UnitWeightToolbox},{kind:"category",name:"%{BKY_HEART}",colour:"%{BKY_RGB_HUE}",hidden:"true",toolboxitemid:"unit_heart",contents:h.UnitHeartToolbox},{kind:"category",name:"%{BKY_TRACK}",colour:"%{BKY_TRACK_HUE}",hidden:"true",toolboxitemid:"unit_track",contents:y.UnitTrackToolbox},{kind:"category",name:"%{BKY_BUTTON}",colour:"%{BKY_TRACK_HUE}",hidden:"true",toolboxitemid:"unit_button",contents:p.UnitButtonToolbox},{kind:"category",name:"%{BKY_DUAL_BUTTON}",colour:"%{BKY_RGB_HUE}",hidden:"true",toolboxitemid:"unit_dual_button",contents:m.UnitDualbtnToolbox},{kind:"category",name:"RGB",colour:"%{BKY_PINS_HUE}",hidden:"true",toolboxitemid:"unit_rgb",contents:k.UnitRgbToolbox},{kind:"category",name:"%{BKY_RELAY}",colour:"%{BKY_SERVO_HUE}",hidden:"true",toolboxitemid:"unit_relay",contents:g.UnitRelayToolbox},{kind:"category",name:"ADC",colour:"%{BKY_PINS_HUE}",hidden:"true",toolboxitemid:"unit_adc",contents:f.UnitAdcToolbox},{kind:"category",name:"DAC",colour:"%{BKY_DHT_HUE}",hidden:"true",toolboxitemid:"unit_dac",contents:b.UnitDacToolbox},{kind:"category",name:"ToF",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"unit_tof",contents:v.UnitTofToolbox},{kind:"category",name:"NCIR",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"unit_ncir",contents:T.UnitNcirToolbox},{kind:"category",name:"IR",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"unit_ir",contents:E.UnitIrToolbox},{kind:"category",name:"EXT.IO",colour:"%{BKY_DHT_HUE}",hidden:"true",toolboxitemid:"unit_ext_io",contents:B.UnitExtioToolbox},{kind:"category",name:"Color",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"unit_color",contents:I.UnitColorToolbox},{kind:"category",name:"FINGER",colour:"%{BKY_SPEAKER_HUE}",hidden:"true",toolboxitemid:"unit_finger",contents:R.UnitFingerToolbox},{kind:"category",name:"RFID",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"unit_rfid",contents:O.UnitRfidToolbox},{kind:"category",name:"CardKB",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"unit_cardkb",contents:C.UnitCardkbToolbox},{kind:"category",name:"%{BKY_PB_HUB}",colour:"%{BKY_PBHUB_HUE}",hidden:"true",toolboxitemid:"unit_pbhub",contents:N.UnitPbhubToolbox},{kind:"category",name:"%{BKY_PA_HUB}",colour:"%{BKY_PAHUB_HUE}",hidden:"true",toolboxitemid:"unit_pahub",contents:w.UnitPahubToolbox},{kind:"category",name:"%{BKY_THERMAL}",colour:"%{BKY_THERMAL_HUE}",hidden:"true",toolboxitemid:"unit_thermal",contents:A.UnitThermalToolbox},{kind:"category",name:"GPS",colour:"%{BKY_SPEAKER_HUE}",custom:"UNIT_GPS",hidden:"true",toolboxitemid:"unit_gps"},{kind:"category",name:"%{BKY_UNIT_ACCEL}",colour:"%{BKY_UNIT_ACCEL_HUE}",hidden:"true",toolboxitemid:"unit_accel",contents:[{kind:"button",text:"%{BKY_UNIT_ACCEL}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"accel"},{kind:"button",text:"\u25b6 %{BKY_UNIT_ACCEL_DEMO_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="unit_accel_get_x_acc">\n        <field name="POS">accel0</field>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="unit_accel_get_y_acc">\n            <field name="POS">accel0</field>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="unit_accel_get_z_acc">\n                <field name="POS">accel0</field>\n              </block>\n            </value>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"228","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_accel_get_x_acc"},{kind:"block",type:"unit_accel_get_y_acc"},{kind:"block",type:"unit_accel_get_z_acc"}]},{kind:"category",name:"%{BKY_UNIT_ACSOCKET}",colour:"%{BKY_UNIT_ACSOCKET_HUE}",hidden:"true",toolboxitemid:"unit_acsocket",contents:M.UnitAcsocketToolbox},{kind:"category",name:"%{BKY_UNIT_V}",colour:"%{BKY_UNIT_V_HUE}",hidden:"true",toolboxitemid:"unit_V",contents:S.UnitVToolbox},{kind:"category",name:"%{BKY_UNIT_IMU}",colour:"%{BKY_UNIT_IMU_HUE}",hidden:"true",toolboxitemid:"unit_unit_imu",contents:P.UnitImuToolbox},{kind:"category",name:"%{BKY_UNIT_BPS}",colour:"%{BKY_UNIT_BPS_HUE}",hidden:"true",toolboxitemid:"unit_bps",contents:x.UnitBpsToolbox},{kind:"category",name:"%{BKY_UNIT_TVOC}",colour:"%{BKY_LCD_HUE}",hidden:"true",toolboxitemid:"unit_tvoc",contents:D.UnitTvocToolbox},{kind:"category",name:"%{BKY_UNIT_VMETER}",colour:"%{BKY_EMOJI_HUE}",hidden:"true",toolboxitemid:"unit_VMeter",contents:L.UnitVMeterToolbox},{kind:"category",name:"%{BKY_UNIT_AMETER}",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"unit_AMeter",contents:U.UnitAMeterToolbox},{kind:"category",name:"%{BKY_UNIT_KMETER}",colour:"%{BKY_UNIT_KMETER_HUE}",hidden:"true",toolboxitemid:"unit_KMeter",contents:[{kind:"button",text:"%{BKY_UNIT_KMETER}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"kmeter"},{kind:"button","web-class":"blockly-subclass--style",callbackKey:"unitsDocs",url:"sonic.io",urlId:"null",icon:"/assets/images/flyout/unit_kmeter.jpg",iconSize:"200"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n    <statement name="LOOP">\n        <block type="text_print">\n            <value name="TEXT">\n                <block type="kmeter_get_temperature"><field name="type">1</field></block>\n            </value>\n            <next>\n                <block type="text_print">\n                    <value name="TEXT">\n                        <block type="kmeter_get_temperature"><field name="type">2</field></block>\n                    </value>\n                </block>\n            </next>\n        </block>\n    </statement>\n</block>'},{kind:"button",width:"278","web-class":"blockly-divider-nowidth"},{kind:"block",type:"kmeter_get_temperature"}]},{kind:"category",name:"%{BKY_UNIT_OP}",colour:"%{BKY_MATH_HUE}",hidden:"true",toolboxitemid:"unit_op",contents:F.UnitOPToolbox},{kind:"category",name:"%{BKY_UNIT_HALL}",colour:"%{BKY_LOGIC_HUE}",hidden:"true",toolboxitemid:"unit_hall",contents:H.UnitHallToolbox},{kind:"category",name:"%{BKY_UNIT_FAN}",colour:"%{BKY_UART_HUE}",hidden:"true",toolboxitemid:"unit_fan",contents:V.UnitFanToolbox},{kind:"category",name:"%{BKY_UNIT_VIBRATOR}",colour:"%{BKY_SERVO_HUE}",hidden:"true",toolboxitemid:"unit_vibrator",contents:G.UnitVibratorToolbox},{kind:"category",name:"%{BKY_UNIT_LASERTX}",colour:"%{BKY_LCD_HUE}",hidden:"true",toolboxitemid:"unit_laser_tx",contents:j.UnitLasertxToolbox},{kind:"category",name:"%{BKY_UNIT_LASERRX}",colour:"%{BKY_TEXTS_HUE}",hidden:"true",toolboxitemid:"unit_laser_rx",contents:W.UnitLaserrxToolbox},{kind:"category",name:"%{BKY_UNIT_ULTRASONIC}",colour:"%{BKY_FUNCTION_HUE}",hidden:"true",toolboxitemid:"unit_Ultrasonic",contents:K.UnitUltrasonicToolbox},{kind:"category",name:"%{BKY_UNIT_WATERING}",colour:"%{BKY_EEPROM_HUE}",hidden:"true",toolboxitemid:"unit_Watering",contents:Y.UnitWateringToolbox},{kind:"category",name:"%{BKY_UNIT_RELAY4}",colour:"%{BKY_ECHO_STT_HUE}",hidden:"true",toolboxitemid:"unit_relay4",contents:X.UnitRelay4Toolbox},{kind:"category",name:"%{BKY_UNIT_DDS}",colour:"%{BKY_MOTOR_HUE}",hidden:"true",toolboxitemid:"unit_dds",contents:$.UnitDDSToolbox},{kind:"category",name:"%{BKY_UNIT_UHF_RFID}",colour:"%{BKY_LISTS_HUE}",hidden:"true",toolboxitemid:"unit_uhf_rfid",contents:z.UnitUhfrfidToolbox},{kind:"category",name:"%{BKY_UNIT_CAM}",colour:"%{BKY_GPS_HUE}",hidden:"true",toolboxitemid:"unit_unitcam",contents:q.UnitUnitcamToolbox},{kind:"category",name:"%{BKY_UNIT_TIMERCAM}",colour:"%{BKY_GPS_HUE}",hidden:"true",toolboxitemid:"unit_timercam",contents:[{kind:"button",text:"%{BKY_UNIT_TIMERCAM}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"timercam"},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_CLOUD_MODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">A</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="unit_timercam_set_wifi">\n    <value name="ssid">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="pwd">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <next>\n      <block type="unit_timercam_set_upload_time">\n        <value name="time">\n          <shadow type="math_slider">\n            <field name="NUM" min="5" max="65536" step="1">5</field>\n          </shadow>\n        </value>\n        <next>\n          <block type="unit_timercam_set_mode">\n            <field name="mode">CLOUD_MODE</field>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_SHOW_QRCODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">B</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="variables_set">\n    <field name="VAR">timercam_token</field>\n    <value name="VALUE">\n      <block type="unit_timercam_get_token"></block>\n    </value>\n    <next>\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="variables_get">\n            <field name="VAR">timercam_token</field>\n          </block>\n        </value>\n        <statement name="DO0">\n          <block type="lcd_qrcode">\n            <value name="text">\n              <shadow type="text">\n                <field name="TEXT"></field>\n              </shadow>\n              <block type="unit_timercam_get_qrcodeurl"></block>\n            </value>\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">72</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">32</field>\n              </shadow>\n            </value>\n            <value name="width">\n              <shadow type="math_number">\n                <field name="NUM">176</field>\n              </shadow>\n            </value>\n            <value name="version">\n              <shadow type="math_slider">\n                <field name="NUM" min="1" max="10" step="1">6</field>\n              </shadow>\n            </value>\n          </block>\n        </statement>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_BTN_CONTROL_UART_MODE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">C</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="unit_timercam_set_show">\n    <field name="mode">True</field>\n    <next>\n      <block type="unit_timercam_set_size">\n        <field name="size">SIZE_320_240</field>\n        <next>\n          <block type="unit_timercam_set_mode">\n            <field name="mode">UART_MODE</field>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"509","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Cloud mode","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_timercam_set_wifi">\n    <value name="ssid">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n    <value name="pwd">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_timercam_set_upload_time">\n    <value name="time">\n      <shadow type="math_slider">\n        <field name="NUM" min="5" max="65536">5</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_timercam_get_token"},{kind:"block",type:"unit_timercam_get_qrcodeurl"},{kind:"button",text:"UART mode","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_timercam_set_show"},{kind:"block",blockxml:'<block type="unit_timercam_set_size">\n    <field name="size">SIZE_320_240</field>\n  </block>'},{kind:"block",blockxml:'<block type="unit_timercam_set_position">\n    <value name="x">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n    <value name="y">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"Command","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_timercam_set_mode"},{kind:"block",blockxml:'<block type="unit_timercam_set_brightness">\n    <value name="brightness">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="1024">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_UNIT_V2}",colour:"%{BKY_TEXTS_HUE}",hidden:"true",toolboxitemid:"unit_V2",contents:J.UnitV2Toolbox},{kind:"category",name:"%{BKY_UNIT_OLED}",colour:"%{BKY_LISTS_HUE}",hidden:"true",toolboxitemid:"unit_oled",contents:Z.UnitOledToolbox},{kind:"category",name:"%{BKY_UNIT_NBIOT}",colour:"%{BKY_UNIT_ACCEL_HUE}",hidden:"true",toolboxitemid:"unit_NBIoT",contents:Q.UnitNBIoTToolbox},{kind:"category",name:"%{BKY_UNIT_RS485}",colour:"%{BKY_TEXTS_HUE}",hidden:"true",toolboxitemid:"unit_RS485",contents:[{kind:"button",text:"%{BKY_UNIT_RS485}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"rs485"},{kind:"block",blockxml:'<block type="unit_rs485_init">\n    <value name="BAUD">\n      <shadow type="math_number">\n        <field name="NUM">9600</field>\n      </shadow>\n    </value>\n    <field name="data_bits">8</field>\n  </block>'},{kind:"button",text:"RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_rs485_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n        </value>\n        <value name="ADD1">\n          <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n        </value>\n        <value name="ADD2">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_rs485_read"},{kind:"block",blockxml:'<block type="unit_rs485_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_rs485_readline"},{kind:"block",type:"unit_rs485_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_rs485_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_rs485_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_rs485_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_UNIT_ISO485}",colour:"%{BKY_EEPROM_HUE}",hidden:"true",toolboxitemid:"unit_ISO485",contents:[{kind:"button",text:"%{BKY_UNIT_ISO485}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"iso485"},{kind:"block",blockxml:'<block type="unit_iso485_init">\n    <value name="BAUD">\n      <shadow type="math_number">\n        <field name="NUM">9600</field>\n      </shadow>\n    </value>\n    <field name="data_bits">8</field>\n  </block>'},{kind:"button",text:"ISO RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_iso485_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"ISO RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_iso485_read"},{kind:"block",blockxml:'<block type="unit_iso485_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_iso485_readline"},{kind:"block",type:"unit_iso485_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_iso485_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_iso485_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_iso485_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_LORAWAN470}",colour:"%{BKY_GPS_HUE}",hidden:"true",toolboxitemid:"unit_LoRaWAN470",contents:[{kind:"button",text:"%{BKY_LORAWAN470}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"lorawan470"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_lorawan470_set_join_mode" hidden="true">\n<field name="mode">0</field>\n<next>\n  <block type="unit_lorawan470_config_mode">\n    <mutation mode="OTAA"></mutation>\n    <field name="mode">OTAA</field>\n    <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <next>\n      <block type="unit_lorawan470_config">\n        <field name="channel">0400</field>\n        <field name="rx2_dr">0</field>\n        <field name="class_mode">2</field>\n        <field name="freqmode">1</field>\n        <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n        <value name="rx2_freq"><shadow type="math_number"><field name="NUM">505300000</field></shadow></value>\n        <next>\n          <block type="unit_lorawan470_join_start">\n            <field name="para2">1</field>\n            <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n            <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">8</field></shadow></value>\n            <next>\n              <block type="variables_set">\n                <field name="VAR">flag</field>\n                <value name="VALUE">\n                  <block type="logic_boolean"><field name="BOOL">FALSE</field></block>\n                </value>\n                <next>\n                  <block type="basic_on_loop">\n                    <statement name="LOOP">\n                      <block type="controls_if">\n                        <value name="IF0">\n                          <block type="logic_operation">\n                            <field name="OP">AND</field>\n                            <value name="A">\n                              <block type="logic_negate">\n                                <value name="BOOL">\n                                  <block type="variables_get"><field name="VAR">flag</field></block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="B">\n                              <block type="unit_lorawan470_check_join_status"></block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="variables_set">\n                            <field name="VAR">flag</field>\n                            <value name="VALUE">\n                              <block type="logic_boolean"><field name="BOOL">TRUE</field></block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text"><field name="TEXT">Joined</field></block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="controls_if">\n                            <value name="IF0">\n                              <block type="variables_get"><field name="VAR">flag</field></block>\n                            </value>\n                            <statement name="DO0">\n                              <block type="unit_lorawan470_send_data">\n                                <mutation isconfirm="true"></mutation>\n                                <field name="confirmOP">true</field>\n                                <value name="payload"><shadow type="text"><field name="TEXT">M5STACK</field></shadow></value>\n                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">5</field></shadow></value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT"><block type="unit_lorawan470_check_downlink_data"></block></value>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="timer_delay">\n                                <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </statement>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"779","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="unit_lorawan470_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_lorawan470_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">505300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"unit_lorawan470_get_abp_config"},{kind:"block",type:"unit_lorawan470_get_otaa_config"},{kind:"block",type:"unit_lorawan470_check_join_status"},{kind:"block",type:"unit_lorawan470_set_join_mode"},{kind:"block",type:"unit_lorawan470_join_stop"},{kind:"block",blockxml:'<block type="unit_lorawan470_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan470_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan470_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_lorawan470_check_sent_status"},{kind:"block",type:"unit_lorawan470_check_downlink_data"}]},{kind:"category",name:"%{BKY_LORAWAN868}",colour:"%{BKY_UART_HUE}",hidden:"true",toolboxitemid:"unit_LoRaWAN868",contents:[{kind:"button",text:"%{BKY_LORAWAN868}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"lorawan868"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_lorawan868_set_join_mode" hidden="true">\n<field name="mode">0</field>\n<next>\n  <block type="unit_lorawan868_config_mode">\n    <mutation mode="OTAA"></mutation>\n    <field name="mode">OTAA</field>\n    <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <next>\n      <block type="unit_lorawan868_config">\n        <field name="rx2_dr">0</field>\n        <field name="class_mode">2</field>\n        <field name="freqmode">1</field>\n        <value name="channel"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n        <value name="rx2_freq"><shadow type="math_number"><field name="NUM">869525000</field></shadow></value>\n        <next>\n          <block type="unit_lorawan868_join_start">\n            <field name="para2">1</field>\n            <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n            <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">8</field></shadow></value>\n            <next>\n              <block type="variables_set">\n                <field name="VAR">flag</field>\n                <value name="VALUE">\n                  <block type="logic_boolean"><field name="BOOL">FALSE</field></block>\n                </value>\n                <next>\n                  <block type="basic_on_loop">\n                    <statement name="LOOP">\n                      <block type="controls_if">\n                        <value name="IF0">\n                          <block type="logic_operation">\n                            <field name="OP">AND</field>\n                            <value name="A">\n                              <block type="logic_negate">\n                                <value name="BOOL">\n                                  <block type="variables_get"><field name="VAR">flag</field></block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="B">\n                              <block type="unit_lorawan868_check_join_status"></block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="variables_set">\n                            <field name="VAR">flag</field>\n                            <value name="VALUE">\n                              <block type="logic_boolean"><field name="BOOL">TRUE</field></block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text"><field name="TEXT">Joined</field></block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="controls_if">\n                            <value name="IF0">\n                              <block type="variables_get"><field name="VAR">flag</field></block>\n                            </value>\n                            <statement name="DO0">\n                              <block type="unit_lorawan868_send_data">\n                                <mutation isconfirm="true"></mutation>\n                                <field name="confirmOP">true</field>\n                                <value name="payload"><shadow type="text"><field name="TEXT">M5STACK</field></shadow></value>\n                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">5</field></shadow></value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT"><block type="unit_lorawan868_check_downlink_data"></block></value>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="timer_delay">\n                                <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </statement>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"779","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="unit_lorawan868_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_lorawan868_config">\n      <value name="channel">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">869525000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"unit_lorawan868_get_abp_config"},{kind:"block",type:"unit_lorawan868_get_otaa_config"},{kind:"block",type:"unit_lorawan868_check_join_status"},{kind:"block",type:"unit_lorawan868_set_join_mode"},{kind:"block",type:"unit_lorawan868_join_stop"},{kind:"block",blockxml:'<block type="unit_lorawan868_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan868_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan868_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_lorawan868_check_sent_status"},{kind:"block",type:"unit_lorawan868_check_downlink_data"}]},{kind:"category",name:"%{BKY_LORAWAN915}",colour:"%{BKY_TIMER_HUE}",hidden:"true",toolboxitemid:"unit_LoRaWAN915",contents:[{kind:"button",text:"%{BKY_LORAWAN915}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"lorawan915"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_lorawan915_set_join_mode" hidden="true">\n<field name="mode">0</field>\n<next>\n  <block type="unit_lorawan915_config_mode">\n    <mutation mode="OTAA"></mutation>\n    <field name="mode">OTAA</field>\n    <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n    <next>\n      <block type="unit_lorawan915_config">\n        <field name="channel">0400</field>\n        <field name="rx2_dr">0</field>\n        <field name="class_mode">2</field>\n        <field name="freqmode">1</field>\n        <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n        <value name="rx2_freq"><shadow type="math_number"><field name="NUM">923300000</field></shadow></value>\n        <next>\n          <block type="unit_lorawan915_join_start">\n            <field name="para2">1</field>\n            <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n            <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">8</field></shadow></value>\n            <next>\n              <block type="variables_set">\n                <field name="VAR">flag</field>\n                <value name="VALUE">\n                  <block type="logic_boolean"><field name="BOOL">FALSE</field></block>\n                </value>\n                <next>\n                  <block type="basic_on_loop">\n                    <statement name="LOOP">\n                      <block type="controls_if">\n                        <value name="IF0">\n                          <block type="logic_operation">\n                            <field name="OP">AND</field>\n                            <value name="A">\n                              <block type="logic_negate">\n                                <value name="BOOL">\n                                  <block type="variables_get"><field name="VAR">flag</field></block>\n                                </value>\n                              </block>\n                            </value>\n                            <value name="B">\n                              <block type="unit_lorawan915_check_join_status"></block>\n                            </value>\n                          </block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="variables_set">\n                            <field name="VAR">flag</field>\n                            <value name="VALUE">\n                              <block type="logic_boolean"><field name="BOOL">TRUE</field></block>\n                            </value>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text"><field name="TEXT">Joined</field></block>\n                                </value>\n                              </block>\n                            </next>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="controls_if">\n                            <value name="IF0">\n                              <block type="variables_get"><field name="VAR">flag</field></block>\n                            </value>\n                            <statement name="DO0">\n                              <block type="unit_lorawan915_send_data">\n                                <mutation isconfirm="true"></mutation>\n                                <field name="confirmOP">true</field>\n                                <value name="payload"><shadow type="text"><field name="TEXT">M5STACK</field></shadow></value>\n                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">5</field></shadow></value>\n                                <next>\n                                  <block type="text_print">\n                                    <value name="TEXT"><block type="unit_lorawan915_check_downlink_data"></block></value>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="timer_delay">\n                                <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </statement>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"779","web-class":"blockly-divider-nowidth"},{kind:"block",blockxml:'<block type="unit_lorawan915_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_lorawan915_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">923300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"unit_lorawan915_get_abp_config"},{kind:"block",type:"unit_lorawan915_get_otaa_config"},{kind:"block",type:"unit_lorawan915_check_join_status"},{kind:"block",type:"unit_lorawan915_set_join_mode"},{kind:"block",type:"unit_lorawan915_join_stop"},{kind:"block",blockxml:'<block type="unit_lorawan915_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan915_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="unit_lorawan915_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_lorawan915_check_sent_status"},{kind:"block",type:"unit_lorawan915_check_downlink_data"}]},{kind:"category",name:"%{BKY_FADER}",colour:"%{BKY_TEXTS_HUE}",hidden:"true",toolboxitemid:"unit_fader",contents:[{kind:"button",text:"%{BKY_FADER}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"fader"},{kind:"block",blockxml:'<block type="fader_set_color">\n          <value name="num">\n            <shadow type="math_number">\n              <field name="NUM">1</field>\n            </shadow>\n          </value>\n          <value name="color_in">\n            <shadow type="math_number">\n              <field name="NUM">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="fader_set_color_rgb">\n          <value name="num">\n            <shadow type="math_number">\n              <field name="NUM">1</field>\n            </shadow>\n          </value>\n          <value name="R">\n            <shadow type="math_slider">\n              <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n          </value>\n          <value name="G">\n            <shadow type="math_slider">\n              <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n          </value>\n          <value name="B">\n            <shadow type="math_slider">\n              <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="fader_set_brightness">\n          <value name="brightness">\n            <shadow type="math_slider">\n              <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="fader_set_color_pot">\n          <value name="lednum">\n            <shadow type="math_number">\n              <field name="NUM">1</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",type:"fader_set_bright_pot"},{kind:"block",type:"fader_readraw12"},{kind:"block",type:"fader_readraw16"}]},{kind:"category",name:"%{BKY_GESTURE}",colour:"%{BKY_GESTURE_HUE}",hidden:"true",toolboxitemid:"unit_gesture",contents:[{kind:"button",text:"%{BKY_GESTURE}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"gesture"},{kind:"block",type:"gesture_begin"},{kind:"block",type:"gesture_get"},{kind:"block",type:"gesture_get_desc"},{kind:"block",type:"gesture_set_highrate"},{kind:"block",type:"gesture_status"}]},{kind:"category",name:"%{BKY_MQTT}",colour:"%{BKY_UNIT_MQTT_HUE}",hidden:"true",toolboxitemid:"unit_mqtt",contents:[{kind:"button",text:"%{BKY_MQTT}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"mqtt"},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="unit_mqtt_stop" hidden="true">\n<next>\n  <block type="controls_whileUntil">\n    <field name="MODE">UNTIL</field>\n    <value name="BOOL">\n      <block type="unit_mqtt_is_lan_connect">\n      </block>\n    </value>\n    <statement name="DO">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text"><field name="TEXT">waiting LAN connection</field></block>\n        </value>\n      </block>\n    </statement>\n    <next>\n      <block type="unit_mqtt_config">\n        <value name="server"><shadow type="text"><field name="TEXT">mqtt.m5stack.com</field></shadow></value>\n        <value name="port"><shadow type="math_number"><field name="NUM">1883</field></shadow></value>\n        <value name="client_id"><shadow type="text"><field name="TEXT">unit_mqtt_id</field></shadow></value>\n        <value name="user"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="password"><shadow type="text_password"><field name="TEXT"></field></shadow></value>\n        <value name="keepalive"><shadow type="math_number"><field name="NUM">30</field></shadow></value>\n        <next>\n          <block type="controls_whileUntil">\n            <field name="MODE">UNTIL</field>\n            <value name="BOOL">\n              <block type="unit_mqtt_subscribe">\n                <value name="number"><shadow type="math_number"><field name="NUM">1</field></shadow></value>\n                <value name="topic"><shadow type="text"><field name="TEXT">mqtt_unit_down</field></shadow></value>\n                <value name="quality"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n              </block>\n            </value>\n            <statement name="DO">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text"><field name="TEXT">waiting subcribe topic</field></block>\n                </value>\n              </block>\n            </statement>\n            <next>\n              <block type="controls_whileUntil">\n                <field name="MODE">UNTIL</field>\n                <value name="BOOL">\n                  <block type="unit_mqtt_save_param"></block>\n                </value>\n                <statement name="DO">\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text"><field name="TEXT">waiting save configure</field></block>\n                    </value>\n                  </block>\n                </statement>\n                <next>\n                  <block type="unit_mqtt_start">\n                    <next>\n                      <block type="controls_whileUntil">\n                        <field name="MODE">UNTIL</field>\n                        <value name="BOOL">\n                          <block type="unit_mqtt_is_mqtt_connect"></block>\n                        </value>\n                        <statement name="DO">\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text"><field name="TEXT">waiting MQTT connection</field></block>\n                            </value>\n                          </block>\n                        </statement>\n                        <next>\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text"><field name="TEXT">MQTT connected!</field></block>\n                            </value>\n                            <next>\n                              <block type="basic_on_loop">\n                                <statement name="LOOP">\n                                  <block type="unit_mqtt_publish">\n                                    <value name="topic"><shadow type="text"><field name="TEXT">mqtt_unit_up</field></shadow></value>\n                                    <value name="message"><shadow type="text"><field name="TEXT">hello</field></shadow></value>\n                                    <value name="quality"><shadow type="math_number"><field name="NUM">0</field></shadow>\n                                    </value>\n                                    <next>\n                                      <block type="text_print">\n                                        <value name="TEXT">\n                                          <block type="unit_mqtt_receive">\n                                            <value name="timeout"><shadow type="math_number"><field name="NUM">5</field></shadow></value>\n                                          </block>\n                                        </value>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </statement>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"761","web-class":"blockly-divider-nowidth"},{kind:"block",type:"unit_mqtt_start"},{kind:"block",type:"unit_mqtt_stop"},{kind:"block",type:"unit_mqtt_is_lan_connect"},{kind:"block",type:"unit_mqtt_is_mqtt_connect"},{kind:"block",type:"unit_mqtt_save_param"},{kind:"block",blockxml:'<block type="unit_mqtt_config">\n    <value name="server">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="port">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n        </shadow>\n      </value>\n    <value name="client_id">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="user">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="password">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="keepalive">\n      <shadow type="math_number">\n        <field name="NUM">0\n        </field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_mqtt_subscribe">\n    <value name="number">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="4">1\n        </field>\n        </shadow>\n      </value>\n    <value name="topic">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="quality">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_mqtt_sub_cb">\n      <value name="topic">\n        <block type="variables_get">\n          <field name="VAR">mqtt_topic</field>\n        </block>\n      </value>\n      <value name="msg">\n        <block type="variables_get">\n          <field name="VAR">mqtt_msg</field>\n        </block>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="unit_mqtt_publish">\n    <value name="topic">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="message">\n      <shadow type="text">\n        <field name="TEXT"></field>\n        </shadow>\n      </value>\n    <value name="quality">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"unit_mqtt_cb_loop"}]},{kind:"category",name:"%{BKY_RTC}",colour:"%{BKY_UNIT_RTC_HUE}",hidden:"true",toolboxitemid:"unit_rtc",contents:[{kind:"button",text:"%{BKY_RTC}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"rtc"},{kind:"block",blockxml:'<block type="unit_rtc_set_date_time">\n    <value name="YEAR">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="99">0</field>\n      </shadow>\n    </value>\n    <value name="MONTH">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="12">1</field>\n      </shadow>\n    </value>\n    <value name="DAY">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="31">1</field>\n      </shadow>\n    </value>\n    <value name="WEEKDAY">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="7">1</field>\n      </shadow>\n    </value>\n    <value name="HOUR">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="23">0</field>\n      </shadow>\n    </value>\n    <value name="MINUTE">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="59">0</field>\n      </shadow>\n    </value>\n    <value name="SECOND">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="59">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_rtc_get_date_time"},{kind:"block",blockxml:'<block type="unit_rtc_set_alarm">\n    <value name="date">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="31">1</field>\n      </shadow>\n    </value>\n    <value name="hours">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="23">0</field>\n      </shadow>\n    </value>\n    <value name="minutes">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="59">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_rtc_check_alarm_flag"},{kind:"block",type:"unit_rtc_clear_alarm"},{kind:"block",type:"unit_rtc_disable_alarm"},{kind:"block",blockxml:'<block type="unit_rtc_set_timer_mode">\n    <value name="value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_rtc_get_timer_value"},{kind:"block",type:"unit_rtc_check_timer_flag"},{kind:"block",type:"unit_rtc_clear_timer_flag"},{kind:"block",type:"unit_rtc_disable_timer"},{kind:"block",type:"unit_rtc_pause_timer"},{kind:"block",type:"unit_rtc_resume_timer"}]},{kind:"category",name:"%{BKY_UNIT_LCD}",colour:"%{BKY_UNIT_LCD_HUE}",hidden:"true",toolboxitemid:"unit_lcd",contents:[{kind:"button",text:"%{BKY_UNIT_LCD}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"lcd"},{kind:"block",blockxml:'<block type="unit_lcd_init_display">\n            <value name="width">\n              <shadow type="math_number">\n                <field name="NUM">135</field>\n              </shadow>\n            </value>\n            <value name="height">\n              <shadow type="math_number">\n                <field name="NUM">240</field>\n              </shadow>\n            </value>\n            <value name="stride">\n              <shadow type="math_number">\n                <field name="NUM">1</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",type:"unit_lcd_fill"},{kind:"block",blockxml:'<block type="unit_lcd_fill_rect">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="W">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="H">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_rect">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="W">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="H">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_pixel">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_hline">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="W">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_vline">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="H">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_line">\n            <value name="X1">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y1">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="X2">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y2">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_text">\n            <value name="text">\n              <shadow type="text">\n                <field name="TEXT"></field>\n              </shadow>\n            </value>\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_image">\n            <value name="X">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n            <value name="Y">\n              <shadow type="math_number">\n                <field name="NUM">0</field>\n              </shadow>\n            </value>\n          </block>'},{kind:"block",type:"unit_lcd_rotate"},{kind:"block",type:"unit_lcd_flip"},{kind:"block",blockxml:'<block type="unit_lcd_brightness">\n            <value name="bright">\n                <shadow type="math_slider">\n                <field name="NUM" min="0" max="255">0</field>\n                </shadow>\n            </value>\n          </block>'},{kind:"block",blockxml:'<block type="unit_lcd_sleep">\n            <value name="sleep">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n          </block>'},{kind:"block",type:"unit_lcd_show_on"}]},{kind:"category",name:"%{BKY_UNIT_ROTARY}",colour:"%{BKY_UNIT_ROTARY_HUE}",hidden:"true",toolboxitemid:"unit_rotary",contents:[{kind:"button",text:"%{BKY_UNIT_ROTARY}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"rotary"},{kind:"block",type:"unit_rotary_set_mode"},{kind:"block",type:"unit_rotary_get_ab_count"},{kind:"block",type:"unit_rotary_get_pulse_count"},{kind:"block",type:"unit_rotary_get_btn_status"},{kind:"block",type:"unit_rotary_set_rgb_color"}]},{kind:"category",name:"%{BKY_UNIT_ID}",colour:"%{BKY_UNIT_ID_HUE}",hidden:"true",toolboxitemid:"unit_ID",contents:[{kind:"button",text:"%{BKY_UNIT_ID}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"id"},{kind:"button",text:"\u25b6 %{BKY_DEMO}1","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="execute" hidden="true">\n  <field name="CODE">message=[0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,&amp;#10;  0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F]</field>\n  <next>\n    <block type="controls_if">\n      <mutation else="1"></mutation>\n      <value name="IF0">\n        <block type="unit_id_get_info"></block>\n      </value>\n      <statement name="DO0">\n        <block type="text_print">\n          <value name="TEXT"><block type="text"><field name="TEXT">Read Device Info Sucess</field></block></value>\n        </block>\n      </statement>\n      <statement name="ELSE">\n        <block type="text_print">\n          <value name="TEXT"><block type="text"><field name="TEXT">Read Device Info Unsucess</field></block></value>\n        </block>\n      </statement>\n      <next>\n        <block type="controls_if">\n          <mutation else="1"></mutation>\n          <value name="IF0">\n            <block type="unit_id_read_config"></block>\n          </value>\n          <statement name="DO0">\n            <block type="text_print">\n              <value name="TEXT">\n                <block type="text"><field name="TEXT">Read Config Sucess</field></block>\n              </value>\n            </block>\n          </statement>\n          <statement name="ELSE">\n            <block type="text_print">\n              <value name="TEXT">\n                <block type="text"><field name="TEXT">Read Config Unsucess</field></block>\n              </value>\n            </block>\n          </statement>\n          <next>\n            <block type="controls_if">\n              <value name="IF0">\n                <block type="logic_operation">\n                  <field name="OP">OR</field>\n                  <value name="A">\n                    <block type="unit_id_config_lock_status"></block>\n                  </value>\n                  <value name="B">\n                    <block type="logic_operation">\n                      <field name="OP">OR</field>\n                      <value name="A">\n                        <block type="unit_id_data_otp_status"></block>\n                      </value>\n                      <value name="B">\n                        <block type="unit_id_slot_status"></block>\n                      </value>\n                    </block>\n                  </value>\n                </block>\n              </value>\n              <statement name="DO0">\n                <block type="text_print">\n                  <value name="TEXT">\n                    <block type="text">\n                      <field name="TEXT">Read Config Status Sucess</field>\n                    </block>\n                  </value>\n                  <next>\n                    <block type="controls_if">\n                      <value name="IF0">\n                        <block type="unit_id_generate_public_key">\n                          <value name="slot">\n                            <shadow type="math_number">\n                              <field name="NUM">0x0000</field>\n                            </shadow>\n                          </value>\n                        </block>\n                      </value>\n                      <statement name="DO0">\n                        <block type="variables_set">\n                          <field name="VAR">public</field>\n                          <value name="VALUE">\n                            <block type="unit_id_public_Key_64Bytes"></block>\n                          </value>\n                          <next>\n                            <block type="controls_if">\n                              <value name="IF0">\n                                <block type="unit_id_create_signature">\n                                  <value name="data">\n                                    <block type="variables_get">\n                                      <field name="VAR">message</field>\n                                    </block>\n                                  </value>\n                                  <value name="slot">\n                                    <shadow type="math_number">\n                                      <field name="NUM">0x0000</field>\n                                    </shadow>\n                                  </value>\n                                </block>\n                              </value>\n                              <statement name="DO0">\n                                <block type="variables_set">\n                                  <field name="VAR">signature</field>\n                                  <value name="VALUE">\n                                    <block type="unit_id_signature"></block>\n                                  </value>\n                                  <next>\n                                    <block type="execute">\n                                      <field name="CODE">recv_msg=[0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,&amp;#10;  0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F]</field>\n                                      <next>\n                                        <block type="controls_if">\n                                          <mutation else="1"></mutation>\n                                          <value name="IF0">\n                                            <block type="unit_id_verify_signature">\n                                              <value name="message">\n                                                <block type="variables_get">\n                                                  <field name="VAR">recv_msg</field>\n                                                </block>\n                                              </value>\n                                              <value name="signature">\n                                                <block type="variables_get">\n                                                  <field name="VAR">signature</field>\n                                                </block>\n                                              </value>\n                                              <value name="publicKey">\n                                                <block type="variables_get">\n                                                  <field name="VAR">public</field>\n                                                </block>\n                                              </value>\n                                            </block>\n                                          </value>\n                                          <statement name="DO0">\n                                            <block type="text_print">\n                                              <value name="TEXT">\n                                                <block type="text"><field name="TEXT">Verify Sucess</field></block>\n                                              </value>\n                                            </block>\n                                          </statement>\n                                          <statement name="ELSE">\n                                            <block type="text_print">\n                                              <value name="TEXT">\n                                                <block type="text"><field name="TEXT">Verify UnSucess</field></block>\n                                              </value>\n                                            </block>\n                                          </statement>\n                                        </block>\n                                      </next>\n                                    </block>\n                                  </next>\n                                </block>\n                              </statement>\n                            </block>\n                          </next>\n                        </block>\n                      </statement>\n                    </block>\n                  </next>\n                </block>\n              </statement>\n            </block>\n          </next>\n        </block>\n      </next>\n    </block>\n  </next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DEMO}2","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="button_callback" hidden="true">\n<field name="BUTTON">A</field>\n<field name="EVENT">wasPressed</field>\n<statement name="FUNC">\n  <block type="controls_if">\n    <mutation else="1"></mutation>\n    <value name="IF0">\n      <block type="unit_id_get_info"></block>\n    </value>\n    <statement name="DO0">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text"><field name="TEXT">Read Device Info Sucess</field></block>\n        </value>\n      </block>\n    </statement>\n    <statement name="ELSE">\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text"><field name="TEXT">Read Device Info Unsucess</field></block>\n        </value>\n      </block>\n    </statement>\n    <next>\n      <block type="controls_if">\n        <mutation else="1"></mutation>\n        <value name="IF0">\n          <block type="unit_id_write_config_zone"></block>\n        </value>\n        <statement name="DO0">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text"><field name="TEXT">Write Sucess</field></block>\n            </value>\n          </block>\n        </statement>\n        <statement name="ELSE">\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text">\n                <field name="TEXT">Write Unsucess</field>\n              </block>\n            </value>\n          </block>\n        </statement>\n        <next>\n          <block type="controls_if">\n            <mutation else="1"></mutation>\n            <value name="IF0">\n              <block type="unit_id_lock_config"></block>\n            </value>\n            <statement name="DO0">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text"><field name="TEXT">Write Sucess</field></block>\n                </value>\n              </block>\n            </statement>\n            <statement name="ELSE">\n              <block type="text_print">\n                <value name="TEXT">\n                  <block type="text"><field name="TEXT">Write Unsucess</field></block>\n                </value>\n              </block>\n            </statement>\n            <next>\n              <block type="controls_if">\n                <mutation else="1"></mutation>\n                <value name="IF0">\n                  <block type="unit_id_create_keypair">\n                    <value name="slot">\n                      <shadow type="math_number">\n                        <field name="NUM">0x0000</field>\n                      </shadow>\n                    </value>\n                  </block>\n                </value>\n                <statement name="DO0">\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text"><field name="TEXT">Write Sucess</field></block>\n                    </value>\n                  </block>\n                </statement>\n                <statement name="ELSE">\n                  <block type="text_print">\n                    <value name="TEXT">\n                      <block type="text"><field name="TEXT">Write Unsucess</field></block>\n                    </value>\n                  </block>\n                </statement>\n                <next>\n                  <block type="controls_if">\n                    <mutation else="1"></mutation>\n                    <value name="IF0">\n                      <block type="unit_id_lock_data_otp"></block>\n                    </value>\n                    <statement name="DO0">\n                      <block type="text_print">\n                        <value name="TEXT">\n                          <block type="text"><field name="TEXT">Write Sucess</field></block>\n                        </value>\n                      </block>\n                    </statement>\n                    <statement name="ELSE">\n                      <block type="text_print">\n                        <value name="TEXT">\n                          <block type="text"><field name="TEXT">Write Unsucess</field></block>\n                        </value>\n                      </block>\n                    </statement>\n                    <next>\n                      <block type="controls_if">\n                        <mutation else="1"></mutation>\n                        <value name="IF0">\n                          <block type="unit_id_lock_data_slot"></block>\n                        </value>\n                        <statement name="DO0">\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text"><field name="TEXT">Write Sucess</field></block>\n                            </value>\n                          </block>\n                        </statement>\n                        <statement name="ELSE">\n                          <block type="text_print">\n                            <value name="TEXT">\n                              <block type="text"><field name="TEXT">Write Unsucess</field></block>\n                            </value>\n                          </block>\n                        </statement>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"955","web-class":"blockly-divider-nowidth"},{kind:"button",text:"Wake up","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_id_wakeup"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_id_get_info"},{kind:"block",type:"unit_id_read_config"},{kind:"block",type:"unit_id_serial_number"},{kind:"block",type:"unit_id_revision_number"},{kind:"block",type:"unit_id_config_lock_status"},{kind:"block",type:"unit_id_data_otp_status"},{kind:"block",type:"unit_id_slot_status"},{kind:"block",type:"unit_id_public_Key_64Bytes"},{kind:"block",type:"unit_id_signature"},{kind:"block",blockxml:'<block type="unit_id_random_min_max">\n        <value name="min">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n        <value name="max">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_id_config_zone"},{kind:"block",type:"unit_id_key_config"},{kind:"block",type:"unit_id_slot_config"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_id_generate_public_key">\n        <value name="slot">\n          <shadow type="math_number">\n            <field name="NUM">0x0000</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_id_write_config_zone"},{kind:"block",type:"unit_id_lock_config"},{kind:"block",blockxml:'<block type="unit_id_create_keypair">\n        <value name="slot">\n          <shadow type="math_number">\n            <field name="NUM">0x0000</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_id_lock_data_otp"},{kind:"block",type:"unit_id_lock_data_slot"},{kind:"block",blockxml:'<block type="unit_id_create_signature">\n        <value name="slot">\n          <shadow type="math_number">\n            <field name="NUM">0x0000</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_id_verify_signature"},{kind:"block",blockxml:'<block type="unit_id_sha256">\n        <value name="length">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_id_update_random_32bytes"}]},{kind:"category",name:"%{BKY_UNIT_JOYSTICKLED}",colour:"%{BKY_UNIT_JOYSTICKLED_HUE}",hidden:"true",toolboxitemid:"unit_joystick_led",contents:[{kind:"button",text:"%{BKY_UNIT_JOYSTICKLED}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"joystickled"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"joystickled_x_raw"},{kind:"block",type:"joystickled_y_raw"},{kind:"block",type:"joystickled_x"},{kind:"block",type:"joystickled_y"},{kind:"block",type:"joystickled_btn_status"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",type:"joystickled_led_color"},{kind:"block",type:"joystickled_calibration"}]},{kind:"category",name:"%{BKY_UNIT_ENCODER}",colour:"%{BKY_UNIT_ENCODER_HUE}",hidden:"true",toolboxitemid:"unit_encoder",contents:[{kind:"button",text:"%{BKY_UNIT_ENCODER}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"encoder"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"Rotary_Encoder_unit"},{kind:"block",type:"unit_encoder_count"},{kind:"block",type:"unit_encoder_btn_status"},{kind:"block",blockxml:'<block type="unit_encoder_set_color">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">3</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_encoder_set_rgb">\n        <value name="num">\n          <shadow type="math_number">\n            <field name="NUM">3</field>\n          </shadow>\n        </value>\n        <value name="R">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="G">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n        <value name="B">\n          <shadow type="math_slider">\n            <field name="NUM" min="0" max="255">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"button",width:"685","web-class":"blockly-divider-nowidth"},{kind:"button",text:"If you want to use this functionality, please upgrade the unit encoder firmware(stm32).","web-class":"unitEncoderLink--style",callbackKey:"unitEncoderFirmware"},{kind:"block",type:"unit_encoder_set_mode"},{kind:"block",blockxml:'<block type="unit_encoder_set_count">\n    <value name="count">\n      <shadow type="math_number">\n        <field name="NUM">1000</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"unit_encoder_reset_count"}]},{kind:"category",name:"%{BKY_FADER}8",colour:"%{BKY_FADER8_HUE}",hidden:"true",toolboxitemid:"unit_fader8",contents:[{kind:"button",text:"%{BKY_FADER}8","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"fader8"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"fader8_adc_16raw"},{kind:"block",type:"fader8_adc_8raw"},{kind:"block",type:"fader8_switch_status"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",type:"fader8_led_color"},{kind:"block",blockxml:'<block type="fader8_single_color">\n        <value name="color">\n            <shadow type="math_slider">\n                <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n        </value>\n      </block>'}]},{kind:"category",name:"%{BKY_UNIT_MIC}",colour:"%{BKY_MIC_HUE}",hidden:"true",toolboxitemid:"unit_mic",contents:[{kind:"button",text:"%{BKY_UNIT_MIC}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"mic"},{kind:"block",type:"unit_mic_get_analog"},{kind:"block",type:"unit_mic_get_digital"}]},{kind:"category",name:"%{BKY_UNIT_DLIGHT}",colour:"%{BKY_UNIT_DLIGHT_HUE}",hidden:"true",toolboxitemid:"unit_dlight",contents:[{kind:"button",text:"%{BKY_UNIT_DLIGHT}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"dlight"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_dlight_get_lux"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_dlight_set_state_mode"},{kind:"block",type:"unit_dlight_set_continous_mode"},{kind:"block",type:"unit_dlight_set_one_shot_mode"}]},{kind:"category",name:"%{BKY_UNIT_PDM}",colour:"%{BKY_UNIT_PDM_HUE}",hidden:"true",toolboxitemid:"unit_pdm",contents:[{kind:"button",text:"%{BKY_UNIT_PDM}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"pdm"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"unit pdm"},{kind:"block",blockxml:'<block type="unit_pdm_init">\n        <value name="rate">\n          <shadow type="math_number">\n            <field name="NUM">44100</field>\n          </shadow>\n        </value>\n        <value name="count">\n          <shadow type="math_slider">\n            <field name="NUM" min="2" max="128">5</field>\n          </shadow>\n        </value>\n        <value name="length">\n          <shadow type="math_slider">\n            <field name="NUM" min="8" max="1024">256</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_pdm_record_to_file">\n        <value name="seconds">\n          <shadow type="math_number">\n            <field name="NUM">3</field>\n          </shadow>\n        </value>\n        <value name="file">\n            <shadow type="text">\n            <field name="TEXT">/sd/test.wav</field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_pdm_deinit"}]},{kind:"category",name:"%{BKY_UNIT_SSR}",colour:"%{BKY_UNIT_SSR_HUE}",hidden:"true",toolboxitemid:"unit_ssr",contents:[{kind:"button",text:"%{BKY_UNIT_SSR}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"ssr"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT SSR"},{kind:"block",type:"unit_ssr_control"}]},{kind:"category",name:"%{BKY_UNIT_RELAY2}",colour:"%{BKY_UNIT_RELAY2_HUE}",hidden:"true",toolboxitemid:"unit_relay2",contents:[{kind:"button",text:"%{BKY_UNIT_RELAY2}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"2relay"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT RELAY2"},{kind:"block",type:"unit_relay2_control"}]},{kind:"category",name:"%{BKY_UNIT_POESP32}",colour:"%{BKY_UNIT_POESP32_HUE}",hidden:"true",toolboxitemid:"unit_poesp32",contents:[{kind:"button",text:"%{BKY_UNIT_POESP32}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"poesp32"},{kind:"button","web-class":"blockly-subclass--style",callbackKey:"unitsDocs",url:"poesp32",urlId:"null",icon:"/assets/images/flyout/PoESP32.jpg",iconSize:"200"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"unit_poesp32_check_uart"},{kind:"block",type:"unit_poesp32_check_eth"},{kind:"button",text:"TCP","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_poesp32_create_tcp">\n        <value name="ip">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="port">\n            <shadow type="math_number">\n                <field name="NUM"></field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_poesp32_send_tcp_packet">\n        <value name="packet">\n            <shadow type="text">\n                <field name="TEXT">12345</field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_poesp32_receive_tcp_packet"},{kind:"button",text:"MQTT","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="unit_poesp32_mqtt_init">\n        <value name="server">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="port">\n            <shadow type="math_number">\n                <field name="NUM">1883</field>\n            </shadow>\n        </value>\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="username">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="passwd">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_poesp32_mqtt_publish">\n        <value name="topic">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="msg">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="qos">\n            <shadow type="math_number">\n                <field name="NUM"></field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_poesp32_mqtt_subscribe">\n        <value name="topic">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="qos">\n            <shadow type="math_number">\n                <field name="NUM"></field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="unit_poesp32_mqtt_unsubscribe">\n        <value name="topic">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",type:"unit_poesp32_mqtt_receive"}]},{kind:"category",name:"%{BKY_UNIT_SONIC_IO}",colour:"%{BKY_UNIT_SONIC_IO_HUE}",hidden:"true",toolboxitemid:"unit_sonic_io",contents:[{kind:"button",text:"%{BKY_UNIT_SONIC_IO}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"sonic.io"},{kind:"button","web-class":"blockly-subclass--style",callbackKey:"unitsDocs",url:"sonic.io",urlId:"null",icon:"/assets/images/flyout/unit_sonic_io.jpg",iconSize:"200"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT SONIC IO"},{kind:"block",type:"sonic_io_get_distance"}]},{kind:"category",name:"%{BKY_UNIT_ANGLE8}",colour:"%{BKY_UNIT_ANGLE8_HUE}",hidden:"true",toolboxitemid:"unit_angle8",contents:[{kind:"button",text:"%{BKY_UNIT_ANGLE8}","web-class":"blockly-title--style",callbackKey:"unitsDocs",url:"angle8"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"UNIT ANGLE-8"},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"angle8_adc_16raw"},{kind:"block",type:"angle8_adc_8raw"},{kind:"block",type:"angle8_switch_status"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",type:"angle8_led_color"},{kind:"block",blockxml:'<block type="angle8_single_color">\n        <value name="color">\n            <shadow type="math_slider">\n                <field name="NUM" min="0" max="255">0</field>\n            </shadow>\n        </value>\n      </block>'}]}]},function(t,e,n){"use strict";n.r(e);var o=n(30),l=n(31),i=n(32),a=n(33);Blockly.M5Toolbox.baseToolbox=[{kind:"category",name:"%{BKY_HDRIVER}",colour:"%{BKY_DHT_HUE}",toolboxitemid:"hdriver",contents:[{kind:"button",text:"%{BKY_HDRIVER}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_hdriver"},{kind:"block",type:"hdriver_init"},{kind:"block",blockxml:'<block type="hdriver_set_speed">\n                <value name="speed">\n                  <shadow type="math_slider">\n                    <field name="NUM" min="-100" max="100">0</field>\n                  </shadow>\n                </value>\n              </block>'},{kind:"block",type:"hdriver_get_voltage"},{kind:"block",type:"hdriver_get_status"}]},{kind:"category",name:"%{BKY_MOTION}",colour:"%{BKY_SPEAKER_HUE}",toolboxitemid:"motion",contents:o.MotionToolbox},{kind:"category",name:"%{BKY_GPS}",colour:"%{BKY_UART_HUE}",toolboxitemid:"base_gps",contents:l.GpsToolbox},{kind:"category",name:"%{BKY_QRCODE}",colour:"%{BKY_LCD_HUE}",toolboxitemid:"base_qrcode",contents:i.qrcodeToolbox},{kind:"category",name:"%{BKY_STEP_MOTOR}",colour:"%{BKY_MATH_HUE}",toolboxitemid:"base_stepmotor",contents:a.stepmotorToolbox},{kind:"category",name:"%{BKY_DTU}",colour:"%{BKY_EEPROM_HUE}",toolboxitemid:"dtu",contents:[{kind:"category",name:"%{BKY_DTU_NB}",colour:"%{BKY_DTUNB_HUE}",toolboxitemid:"dtu_nb",contents:[{kind:"button",text:"%{BKY_DTU_NB}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_dtu_nb"},{kind:"button",text:"%{BKY_LOAD_EXAMPLES}","web-class":"blockly-blue-btn",callbackKey:"RunExamples",fileName:"ATOM-DTU-NB-MQTT"},{kind:"block",type:"base_dtunb_init"},{kind:"block",type:"base_dtunb_power_down_module"},{kind:"block",type:"base_dtunb_reset_module"},{kind:"block",type:"base_dtunb_set_echo_mode"},{kind:"block",type:"base_dtunb_check_status"},{kind:"block",type:"base_dtunb_check_single_quality"},{kind:"block",type:"base_dtunb_check_network_registration"},{kind:"block",type:"base_dtunb_check_gprs_network_registration"},{kind:"block",type:"base_dtunb_enable_pdp_context"},{kind:"button",text:"%{BKY_NBIOT_COAP_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_dtunb_coap_connect">\n        <value name="ip">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">5683</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_dtunb_coap_get">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_dtunb_coap_post">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_dtunb_coap_put">\n        <value name="url">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"base_dtunb_coap_destroy"},{kind:"button",text:"%{BKY_NBIOT_MQTT_TITLE}","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_connect">\n        <value name="server">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="port">\n          <shadow type="math_number">\n            <field name="NUM">1883</field>\n          </shadow>\n        </value>\n        <value name="client_id">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="username">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="passwd">\n          <shadow type="text_password">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="keepalive">\n          <shadow type="math_number">\n            <field name="NUM">0</field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"base_dtunb_mqtt_disconnect"},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_sub">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_sub_cb">\n      <value name="topic">\n        <block type="variables_get">\n          <field name="VAR">nb_topic</field>\n        </block>\n      </value>\n      <value name="msg">\n        <block type="variables_get">\n          <field name="VAR">nb_msg</field>\n        </block>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_unsubscribe">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_publish">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="payload">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n        <value name="qos">\n          <shadow type="math_number">\n            <field name="NUM"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",type:"base_dtunb_mqtt_check_connection"},{kind:"block",blockxml:'<block type="base_dtunb_mqtt_poll">\n        <value name="topic">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"button",text:"NB-IoT Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_dtunb_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"NB-IoT Read","web-class":"blockly-subclass--style"},{kind:"block",type:"base_dtunb_read"},{kind:"block",blockxml:'<block type="base_dtunb_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_dtunb_readline"},{kind:"block",type:"base_dtunb_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_dtunb_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_dtunb_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_dtunb_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_LORAWAN470}",colour:"%{BKY_GPS_HUE}",toolboxitemid:"dtu_lorawan470",contents:[{kind:"button",text:"%{BKY_LORAWAN470}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_dtu_lorawan470"},{kind:"button",text:"\u25b6 %{BKY_DEMO_CONFIG_LORAWAN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="base_lorawan470_init" hidden="true">\n<next>\n  <block type="base_lorawan470_set_join_mode">\n    <field name="mode">0</field>\n    <next>\n      <block type="base_lorawan470_config_mode">\n        <mutation mode="OTAA"></mutation>\n        <field name="mode">OTAA</field>\n        <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <next>\n          <block type="base_lorawan470_config">\n            <field name="channel">0001</field>\n            <field name="rx2_dr">0</field>\n            <field name="class_mode">0</field>\n            <field name="freqmode">1</field>\n            <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n            <value name="rx2_freq"><shadow type="math_number"><field name="NUM">505300000</field></shadow></value>\n            <next>\n              <block type="base_lorawan470_join_start">\n                <field name="para2">1</field>\n                <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">1</field></shadow></value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="rgb_set_all" hidden="true">\n<field name="COLOR">#cc6600</field>\n<next>\n    <block type="base_lorawan470_init">\n        <next>\n            <block type="base_lorawan470_set_join_mode">\n                <field name="mode">0</field>\n                <next>\n                    <block type="base_lorawan470_config_mode">\n                        <mutation mode="OTAA"></mutation>\n                        <field name="mode">OTAA</field>\n                        <value name="deveui"><shadow type="text"><field name="TEXT">2fd1549588a2f196</field></shadow></value>\n                        <value name="appkey"><shadow type="text"><field name="TEXT">059d230cf60aaf212783b4b7e801a389</field></shadow></value>\n                        <value name="appeui"><shadow type="text"><field name="TEXT">00000000000000000000000000000000</field></shadow></value>\n                        <next>\n                            <block type="base_lorawan470_config">\n                                <field name="channel">0400</field>\n                                <field name="rx2_dr">0</field>\n                                <field name="class_mode">2</field>\n                                <field name="freqmode">1</field>\n                                <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n                                <value name="rx2_freq"><shadow type="math_number"><field name="NUM">505300000</field></shadow></value>\n                                <next>\n                                    <block type="base_lorawan470_join_start">\n                                        <field name="para2">1</field>\n                                        <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                                        <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">10</field></shadow></value>\n                                        <next>\n                                            <block type="rgb_set_all">\n                                                <field name="COLOR">#ff6666</field>\n                                                <next>\n                                                    <block type="controls_whileUntil">\n                                                        <field name="MODE">UNTIL</field>\n                                                        <value name="BOOL"><block type="base_lorawan470_check_join_status"></block></value>\n                                                        <statement name="DO">\n                                                            <block type="text_print">\n                                                                <value name="TEXT">\n                                                                    <block type="text"><field name="TEXT">waiting join....</field></block>\n                                                                </value>\n                                                                <next>\n                                                                    <block type="controls_for">\n                                                                        <field name="VAR">j</field>\n                                                                        <value name="FROM"><block type="math_number"><field name="NUM">0</field></block></value>\n                                                                        <value name="TO"><block type="math_number"><field name="NUM">100</field></block></value>\n                                                                        <value name="BY"><block type="math_number"><field name="NUM">1</field></block></value>\n                                                                        <statement name="DO">\n                                                                            <block type="rgb_set_brightness">\n                                                                                <value name="BRIGHTNESS"><shadow type="math_slider">\n                                                                                    <field name="NUM" max="100" step="1">100</field></shadow>\n                                                                                    <block type="variables_get"><field name="VAR">j</field></block>\n                                                                                </value>\n                                                                                <next>\n                                                                                    <block type="timer_delay_ms">\n                                                                                        <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                                                                                    </block>\n                                                                                </next>\n                                                                            </block>\n                                                                        </statement>\n                                                                        <next>\n                                                                            <block type="controls_for">\n                                                                                <field name="VAR">j</field>\n                                                                                <value name="FROM"><block type="math_number"><field name="NUM">100</field></block></value>\n                                                                                <value name="TO"><block type="math_number"><field name="NUM">0</field></block></value>\n                                                                                <value name="BY"><block type="math_number"><field name="NUM">-1</field></block></value>\n                                                                                <statement name="DO">\n                                                                                    <block type="rgb_set_brightness">\n                                                                                        <value name="BRIGHTNESS">\n                                                                                            <shadow type="math_slider"><field name="NUM" max="100" step="1">100</field></shadow>\n                                                                                            <block type="variables_get"><field name="VAR">j</field></block>\n                                                                                        </value>\n                                                                                        <next>\n                                                                                            <block type="timer_delay_ms">\n                                                                                                <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                                                                                            </block>\n                                                                                        </next>\n                                                                                    </block>\n                                                                                </statement>\n                                                                            </block>\n                                                                        </next>\n                                                                    </block>\n                                                                </next>\n                                                            </block>\n                                                        </statement>\n                                                        <next>\n                                                            <block type="text_print">\n                                                                <value name="TEXT"><block type="text"><field name="TEXT">connected!</field></block></value>\n                                                                <next>\n                                                                    <block type="rgb_set_brightness">\n                                                                        <value name="BRIGHTNESS"><shadow type="math_slider"><field name="NUM" max="100" step="1">100</field></shadow></value>\n                                                                        <next>\n                                                                            <block type="rgb_set_all">\n                                                                                <field name="COLOR">#33ff33</field>\n                                                                                <next>\n                                                                                    <block type="basic_on_loop">\n                                                                                        <statement name="LOOP">\n                                                                                            <block type="base_lorawan470_send_data">\n                                                                                                <mutation isconfirm="true"></mutation>\n                                                                                                <field name="confirmOP">true</field>\n                                                                                                <value name="payload"><shadow type="text"><field name="TEXT">012345678</field></shadow></value>\n                                                                                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">15</field></shadow>\n                                                                                                </value>\n                                                                                                <next>\n                                                                                                    <block type="text_print" >\n                                                                                                        <value name="TEXT"><block type="base_lorawan470_check_downlink_data"></block></value>\n                                                                                                        <next>\n                                                                                                            <block type="timer_delay"><value name="DELAY"><shadow type="math_number"><field name="NUM">5</field></shadow></value></block>\n                                                                                                        </next>\n                                                                                                    </block>\n                                                                                                </next>\n                                                                                            </block>\n                                                                                        </statement>\n                                                                                    </block>\n                                                                                </next>\n                                                                            </block>\n                                                                        </next>\n                                                                    </block>\n                                                                </next>\n                                                            </block>\n                                                        </next>\n                                                    </block>\n                                                </next>\n                                            </block>\n                                        </next>\n                                    </block>\n                                </next>\n                            </block>\n                        </next>\n                    </block>\n                </next>\n            </block>\n        </next>\n    </block>\n</next>\n</block>'},{kind:"button",width:"770","web-class":"blockly-divider-nowidth"},{kind:"block",type:"base_lorawan470_init"},{kind:"block",blockxml:'<block type="base_lorawan470_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">505300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"base_lorawan470_get_abp_config"},{kind:"block",type:"base_lorawan470_get_otaa_config"},{kind:"block",type:"base_lorawan470_check_join_status"},{kind:"block",type:"base_lorawan470_set_join_mode"},{kind:"block",type:"base_lorawan470_join_stop"},{kind:"block",blockxml:'<block type="base_lorawan470_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan470_check_sent_status"},{kind:"block",type:"base_lorawan470_check_downlink_data"},{kind:"button",text:"RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan470_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"base_lorawan470_read"},{kind:"block",blockxml:'<block type="base_lorawan470_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan470_readline"},{kind:"block",type:"base_lorawan470_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan470_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan470_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan470_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_LORAWAN868}",colour:"%{BKY_UART_HUE}",toolboxitemid:"dtu_lorawan868",contents:[{kind:"button",text:"%{BKY_LORAWAN868}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_dtu_lorawan868"},{kind:"button",text:"\u25b6 %{BKY_DEMO_CONFIG_LORAWAN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="base_lorawan868_init" hidden="true">\n<next>\n  <block type="base_lorawan868_set_join_mode">\n    <field name="mode">0</field>\n    <next>\n      <block type="base_lorawan868_config_mode">\n        <mutation mode="OTAA"></mutation>\n        <field name="mode">OTAA</field>\n        <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <next>\n          <block type="base_lorawan868_config">\n            <value name="channel">\n              <shadow type="text"><field name="TEXT"></field></shadow>\n            </value>\n            <field name="rx2_dr">0</field>\n            <field name="class_mode">0</field>\n            <field name="freqmode">1</field>\n            <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n            <value name="rx2_freq"><shadow type="math_number"><field name="NUM">869525000</field></shadow></value>\n            <next>\n              <block type="base_lorawan868_join_start">\n                <field name="para2">1</field>\n                <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">1</field></shadow></value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="rgb_set_all" hidden="true">\n<field name="COLOR">#cc6600</field>\n<next>\n  <block type="base_lorawan868_init">\n    <next>\n      <block type="base_lorawan868_set_join_mode">\n        <field name="mode">0</field>\n        <next>\n          <block type="base_lorawan868_config_mode">\n            <mutation mode="OTAA"></mutation>\n            <field name="mode">OTAA</field>\n            <value name="deveui"><shadow type="text"><field name="TEXT">00bb9da5b97addf8</field></shadow></value>\n            <value name="appkey"><shadow type="text"><field name="TEXT">27dfe264ca33ac1957c005eb48ba4728</field></shadow></value>\n            <value name="appeui"><shadow type="text"><field name="TEXT">00000000000000000000000000000000</field></shadow></value>\n            <next>\n              <block type="base_lorawan868_config">\n                <field name="rx2_dr">0</field>\n                <field name="class_mode">2</field>\n                <field name="freqmode">1</field>\n                <value name="channel"><shadow type="text"><field name="TEXT">0001</field></shadow></value>\n                <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n                <value name="rx2_freq"><shadow type="math_number"><field name="NUM">869525000</field></shadow></value>\n                <next>\n                  <block type="base_lorawan868_join_start">\n                    <field name="para2">1</field>\n                    <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                    <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">10</field></shadow>\n                    </value>\n                    <next>\n                      <block type="rgb_set_all">\n                        <field name="COLOR">#ff6666</field>\n                        <next>\n                          <block type="controls_whileUntil">\n                            <field name="MODE">UNTIL</field>\n                            <value name="BOOL">\n                              <block type="base_lorawan868_check_join_status"></block>\n                            </value>\n                            <statement name="DO">\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text">\n                                    <field name="TEXT">waiting join....</field>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="controls_for">\n                                    <field name="VAR">j</field>\n                                    <value name="FROM">\n                                      <block type="math_number">\n                                        <field name="NUM">0</field>\n                                      </block>\n                                    </value>\n                                    <value name="TO">\n                                      <block type="math_number">\n                                        <field name="NUM">100</field>\n                                      </block>\n                                    </value>\n                                    <value name="BY">\n                                      <block type="math_number">\n                                        <field name="NUM">1</field>\n                                      </block>\n                                    </value>\n                                    <statement name="DO">\n                                      <block type="rgb_set_brightness">\n                                        <value name="BRIGHTNESS">\n                                          <shadow type="math_slider">\n                                            <field name="NUM" max="100" step="1">100</field>\n                                          </shadow>\n                                          <block type="variables_get">\n                                            <field name="VAR">j</field>\n                                          </block>\n                                        </value>\n                                        <next>\n                                          <block type="timer_delay_ms">\n                                            <value name="DELAY">\n                                              <shadow type="math_number">\n                                                <field name="NUM">10</field>\n                                              </shadow>\n                                            </value>\n                                          </block>\n                                        </next>\n                                      </block>\n                                    </statement>\n                                    <next>\n                                      <block type="controls_for">\n                                        <field name="VAR">j</field>\n                                        <value name="FROM">\n                                          <block type="math_number">\n                                            <field name="NUM">100</field>\n                                          </block>\n                                        </value>\n                                        <value name="TO">\n                                          <block type="math_number">\n                                            <field name="NUM">0</field>\n                                          </block>\n                                        </value>\n                                        <value name="BY">\n                                          <block type="math_number">\n                                            <field name="NUM">-1</field>\n                                          </block>\n                                        </value>\n                                        <statement name="DO">\n                                          <block type="rgb_set_brightness">\n                                            <value name="BRIGHTNESS">\n                                              <shadow type="math_slider">\n                                                <field name="NUM" max="100" step="1">100</field>\n                                              </shadow>\n                                              <block type="variables_get">\n                                                <field name="VAR">j</field>\n                                              </block>\n                                            </value>\n                                            <next>\n                                              <block type="timer_delay_ms">\n                                                <value name="DELAY">\n                                                  <shadow type="math_number">\n                                                    <field name="NUM">10</field>\n                                                  </shadow>\n                                                </value>\n                                              </block>\n                                            </next>\n                                          </block>\n                                        </statement>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </next>\n                              </block>\n                            </statement>\n                            <next>\n                              <block type="text_print">\n                                <value name="TEXT">\n                                  <block type="text">\n                                    <field name="TEXT">connected!</field>\n                                  </block>\n                                </value>\n                                <next>\n                                  <block type="rgb_set_brightness">\n                                    <value name="BRIGHTNESS">\n                                      <shadow type="math_slider">\n                                        <field name="NUM" max="100" step="1">100</field>\n                                      </shadow>\n                                    </value>\n                                    <next>\n                                      <block type="rgb_set_all">\n                                        <field name="COLOR">#33ff33</field>\n                                        <next>\n                                          <block type="basic_on_loop">\n                                            <statement name="LOOP">\n                                              <block type="base_lorawan868_send_data">\n                                                <mutation isconfirm="true"></mutation>\n                                                <field name="confirmOP">true</field>\n                                                <value name="payload">\n                                                  <shadow type="text">\n                                                    <field name="TEXT">012345678</field>\n                                                  </shadow>\n                                                </value>\n                                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">15</field></shadow>\n                                                </value>\n                                                <next>\n                                                  <block type="text_print">\n                                                    <value name="TEXT">\n                                                      <block type="base_lorawan868_check_downlink_data"></block>\n                                                    </value>\n                                                    <next>\n                                                      <block type="timer_delay">\n                                                        <value name="DELAY">\n                                                          <shadow type="math_number">\n                                                            <field name="NUM">5</field>\n                                                          </shadow>\n                                                        </value>\n                                                      </block>\n                                                    </next>\n                                                  </block>\n                                                </next>\n                                              </block>\n                                            </statement>\n                                          </block>\n                                        </next>\n                                      </block>\n                                    </next>\n                                  </block>\n                                </next>\n                              </block>\n                            </next>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",width:"770","web-class":"blockly-divider-nowidth"},{kind:"block",type:"base_lorawan868_init"},{kind:"block",blockxml:'<block type="base_lorawan868_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_config">\n      <value name="channel">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">869525000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"base_lorawan868_get_abp_config"},{kind:"block",type:"base_lorawan868_get_otaa_config"},{kind:"block",type:"base_lorawan868_check_join_status"},{kind:"block",type:"base_lorawan868_set_join_mode"},{kind:"block",type:"base_lorawan868_join_stop"},{kind:"block",blockxml:'<block type="base_lorawan868_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan868_check_sent_status"},{kind:"block",type:"base_lorawan868_check_downlink_data"},{kind:"button",text:"RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan868_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"base_lorawan868_read"},{kind:"block",blockxml:'<block type="base_lorawan868_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan868_readline"},{kind:"block",type:"base_lorawan868_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan868_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan868_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan868_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_LORAWAN915}",colour:"%{BKY_TIMER_HUE}",toolboxitemid:"dtu_lorawan915",contents:[{kind:"button",text:"%{BKY_LORAWAN915}","web-class":"blockly-title--style",callbackKey:"atomDocs",url:"atom_dtu_lorawan915"},{kind:"button",text:"\u25b6 %{BKY_DEMO_CONFIG_LORAWAN}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="base_lorawan915_init" hidden="true">\n<next>\n  <block type="base_lorawan915_set_join_mode">\n    <field name="mode">0</field>\n    <next>\n      <block type="base_lorawan915_config_mode">\n        <mutation mode="OTAA"></mutation>\n        <field name="mode">OTAA</field>\n        <value name="deveui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appkey"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <value name="appeui"><shadow type="text"><field name="TEXT"></field></shadow></value>\n        <next>\n          <block type="base_lorawan915_config">\n            <field name="channel">0001</field>\n            <field name="rx2_dr">0</field>\n            <field name="class_mode">0</field>\n            <field name="freqmode">1</field>\n            <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n            <value name="rx2_freq"><shadow type="math_number"><field name="NUM">923300000</field></shadow></value>\n            <next>\n              <block type="base_lorawan915_join_start">\n                <field name="para2">1</field>\n                <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">1</field></shadow></value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</next>\n</block>'},{kind:"button",text:"\u25b6 %{BKY_DEMO}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="rgb_set_all" hidden="true">\n<field name="COLOR">#cc6600</field>\n<next>\n    <block type="base_lorawan915_init">\n        <next>\n            <block type="base_lorawan915_set_join_mode">\n                <field name="mode">0</field>\n                <next>\n                    <block type="base_lorawan915_config_mode">\n                        <mutation mode="OTAA"></mutation>\n                        <field name="mode">OTAA</field>\n                        <value name="deveui"><shadow type="text"><field name="TEXT">d896e0ff00000241</field></shadow></value>\n                        <value name="appkey"><shadow type="text"><field name="TEXT">98929b92f09e2daf676d646d0f61d251</field></shadow></value>\n                        <value name="appeui"><shadow type="text"><field name="TEXT">0000000000000001</field></shadow></value>\n                        <next>\n                            <block type="base_lorawan915_config">\n                                <field name="channel">0400</field>\n                                <field name="rx2_dr">0</field>\n                                <field name="class_mode">2</field>\n                                <field name="freqmode">1</field>\n                                <value name="rx1_offset"><shadow type="math_number"><field name="NUM">0</field></shadow></value>\n                                <value name="rx2_freq"><shadow type="math_number"><field name="NUM">923300000</field></shadow></value>\n                                <next>\n                                    <block type="base_lorawan915_join_start">\n                                        <field name="para2">1</field>\n                                        <value name="para3"><shadow type="math_slider"><field name="NUM" min="7" max="255" step="1">8</field></shadow></value>\n                                        <value name="para4"><shadow type="math_slider"><field name="NUM" min="1" max="256" step="1">15</field></shadow></value>\n                                        <next>\n                                            <block type="rgb_set_all">\n                                                <field name="COLOR">#ff6666</field>\n                                                <next>\n                                                    <block type="controls_whileUntil">\n                                                        <field name="MODE">UNTIL</field>\n                                                        <value name="BOOL"><block type="base_lorawan915_check_join_status"></block></value>\n                                                        <statement name="DO">\n                                                            <block type="text_print">\n                                                                <value name="TEXT">\n                                                                    <block type="text"><field name="TEXT">waiting join....</field></block>\n                                                                </value>\n                                                                <next>\n                                                                    <block type="controls_for">\n                                                                        <field name="VAR">j</field>\n                                                                        <value name="FROM"><block type="math_number"><field name="NUM">0</field></block></value>\n                                                                        <value name="TO"><block type="math_number"><field name="NUM">100</field></block></value>\n                                                                        <value name="BY"><block type="math_number"><field name="NUM">1</field></block></value>\n                                                                        <statement name="DO">\n                                                                            <block type="rgb_set_brightness">\n                                                                                <value name="BRIGHTNESS"><shadow type="math_slider">\n                                                                                    <field name="NUM" max="100" step="1">100</field></shadow>\n                                                                                    <block type="variables_get"><field name="VAR">j</field></block>\n                                                                                </value>\n                                                                                <next>\n                                                                                    <block type="timer_delay_ms">\n                                                                                        <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                                                                                    </block>\n                                                                                </next>\n                                                                            </block>\n                                                                        </statement>\n                                                                        <next>\n                                                                            <block type="controls_for">\n                                                                                <field name="VAR">j</field>\n                                                                                <value name="FROM"><block type="math_number"><field name="NUM">100</field></block></value>\n                                                                                <value name="TO"><block type="math_number"><field name="NUM">0</field></block></value>\n                                                                                <value name="BY"><block type="math_number"><field name="NUM">-1</field></block></value>\n                                                                                <statement name="DO">\n                                                                                    <block type="rgb_set_brightness">\n                                                                                        <value name="BRIGHTNESS">\n                                                                                            <shadow type="math_slider"><field name="NUM" max="100" step="1">100</field></shadow>\n                                                                                            <block type="variables_get"><field name="VAR">j</field></block>\n                                                                                        </value>\n                                                                                        <next>\n                                                                                            <block type="timer_delay_ms">\n                                                                                                <value name="DELAY"><shadow type="math_number"><field name="NUM">10</field></shadow></value>\n                                                                                            </block>\n                                                                                        </next>\n                                                                                    </block>\n                                                                                </statement>\n                                                                            </block>\n                                                                        </next>\n                                                                    </block>\n                                                                </next>\n                                                            </block>\n                                                        </statement>\n                                                        <next>\n                                                            <block type="text_print">\n                                                                <value name="TEXT"><block type="text"><field name="TEXT">connected!</field></block></value>\n                                                                <next>\n                                                                    <block type="rgb_set_brightness">\n                                                                        <value name="BRIGHTNESS"><shadow type="math_slider"><field name="NUM" max="100" step="1">100</field></shadow></value>\n                                                                        <next>\n                                                                            <block type="rgb_set_all">\n                                                                                <field name="COLOR">#33ff33</field>\n                                                                                <next>\n                                                                                    <block type="basic_on_loop">\n                                                                                        <statement name="LOOP">\n                                                                                            <block type="base_lorawan915_send_data">\n                                                                                                <mutation isconfirm="true"></mutation>\n                                                                                                <field name="confirmOP">true</field>\n                                                                                                <value name="payload"><shadow type="text"><field name="TEXT">012345678</field></shadow></value>\n                                                                                                <value name="nbtrials"><shadow type="math_slider"><field name="NUM" min="1" max="15" step="1">15</field></shadow>\n                                                                                                </value>\n                                                                                                <next>\n                                                                                                    <block type="text_print" >\n                                                                                                        <value name="TEXT"><block type="base_lorawan915_check_downlink_data"></block></value>\n                                                                                                        <next>\n                                                                                                            <block type="timer_delay"><value name="DELAY"><shadow type="math_number"><field name="NUM">5</field></shadow></value></block>\n                                                                                                        </next>\n                                                                                                    </block>\n                                                                                                </next>\n                                                                                            </block>\n                                                                                        </statement>\n                                                                                    </block>\n                                                                                </next>\n                                                                            </block>\n                                                                        </next>\n                                                                    </block>\n                                                                </next>\n                                                            </block>\n                                                        </next>\n                                                    </block>\n                                                </next>\n                                            </block>\n                                        </next>\n                                    </block>\n                                </next>\n                            </block>\n                        </next>\n                    </block>\n                </next>\n            </block>\n        </next>\n    </block>\n</next>\n</block>'},{kind:"button",width:"770","web-class":"blockly-divider-nowidth"},{kind:"block",type:"base_lorawan915_init"},{kind:"block",blockxml:'<block type="base_lorawan915_config_mode">\n      <value name="deveui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appkey">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n      <value name="appeui">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_config">\n      <value name="rx1_offset">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="rx2_freq">\n        <shadow type="math_number">\n          <field name="NUM">923300000</field>\n        </shadow>\n      </value>\n    </block>'},{kind:"block",type:"base_lorawan915_get_abp_config"},{kind:"block",type:"base_lorawan915_get_otaa_config"},{kind:"block",type:"base_lorawan915_check_join_status"},{kind:"block",type:"base_lorawan915_set_join_mode"},{kind:"block",type:"base_lorawan915_join_stop"},{kind:"block",blockxml:'<block type="base_lorawan915_join_start">\n    <value name="para3">\n      <shadow type="math_slider">\n        <field name="NUM" min="7" max="255">8</field>\n      </shadow>\n    </value>\n    <value name="para4">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="256">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_set_uplink_app_port">\n    <value name="port">\n      <shadow type="math_slider">\n        <field name="NUM" min="1" max="233">1</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_send_data">\n    <value name="payload">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan915_check_sent_status"},{kind:"block",type:"base_lorawan915_check_downlink_data"},{kind:"button",text:"RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan915_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"base_lorawan915_read"},{kind:"block",blockxml:'<block type="base_lorawan915_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"base_lorawan915_readline"},{kind:"block",type:"base_lorawan915_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan915_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="base_lorawan915_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="base_lorawan915_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_DTU_CAT1}",colour:"%{BKY_DTU_CAT1_HUE}",toolboxitemid:"dtu_cat1",custom:"DTU_CAT1"}]}]},function(t,e,n){"use strict";n.r(e);var o=n(126),l=n(127),i=n(128),a=n(129),s=n(130),r=n(131),c=n(132),u=n(133),_=n(134),d=n(135),h=n(136),y=n(137),p=n(138),m=n(139),k=n(140),g=n(141),f=n(142),b=n(143),v=n(144),T=n(145);Blockly.M5Toolbox.hatToolbox=[{kind:"category",name:"%{BKY_HAT_ENV}",colour:"%{BKY_HAT_ENV_HUE}",hidden:"true",toolboxitemid:"hat_env",contents:o.HatEnvToolbox},{kind:"category",name:"%{BKY_HAT_PIR}",colour:"%{BKY_HAT_PIR_SERVO_HUE}",hidden:"true",toolboxitemid:"hat_pir",contents:l.HatPirToolbox},{kind:"category",name:"%{BKY_HAT_SPK}",colour:"%{BKY_HAT_SPEAKER_HUE}",hidden:"true",toolboxitemid:"hat_spk",contents:i.HatSpkToolbox},{kind:"category",name:"%{BKY_HAT_NCIR}",colour:"%{BKY_HAT_NCIR_HUE}",hidden:"true",toolboxitemid:"hat_ncir",contents:a.HatNcirToolbox},{kind:"category",name:"%{BKY_HAT_ADC}",colour:"%{BKY_HAT_ADC_HUE}",hidden:"true",toolboxitemid:"hat_adc",contents:s.HatAdcToolbox},{kind:"category",name:"%{BKY_HAT_DAC}",colour:"%{BKY_HAT_DAC_HUE}",hidden:"true",toolboxitemid:"hat_dac",contents:r.HatDacToolbox},{kind:"category",name:"%{BKY_HAT_YUN}",colour:"%{BKY_HAT_YUN_HUE}",hidden:"true",toolboxitemid:"hat_yun",contents:c.HatYunToolbox},{kind:"category",name:"%{BKY_HAT_SERVO}",colour:"%{BKY_HAT_SERVO_HUE}",hidden:"true",toolboxitemid:"hat_servo",contents:u.HatServoToolbox},{kind:"category",name:"%{BKY_HAT_SERVOS}",colour:"%{BKY_HAT_SERVOS_HUE}",hidden:"true",toolboxitemid:"hat_servos",contents:_.HatServosToolbox},{kind:"category",name:"%{BKY_HAT_PUPPY}",colour:"%{BKY_HAT_PUPPY_HUE}",hidden:"true",toolboxitemid:"hat_puppyC",contents:d.HatPuppyCToolbox},{kind:"category",name:"%{BKY_HAT_JOYSTICK}",colour:"%{BKY_HAT_JOYSTICK_HUE}",hidden:"true",toolboxitemid:"hat_Joystick",contents:h.HatJoystickToolbox},{kind:"category",name:"%{BKY_HAT_BUGC}",colour:"%{BKY_HAT_BUGC_HUE}",hidden:"true",toolboxitemid:"hat_bugc",contents:y.HatBugcToolbox},{kind:"category",name:"%{BKY_HAT_FINGER}",colour:"%{BKY_HAT_FINGER_HUE}",hidden:"true",toolboxitemid:"hat_Finger",contents:p.HatFingerToolbox},{kind:"category",name:"%{BKY_HAT_BEETLEC}",colour:"%{BKY_HAT_BEETLEC_HUE}",hidden:"true",toolboxitemid:"hat_BeetleC",contents:m.HatBeetleCToolbox},{kind:"category",name:"%{BKY_HAT_JOYC}",colour:"%{BKY_HAT_JOYC_HUE}",hidden:"true",toolboxitemid:"hat_joyc",contents:k.HatJoycToolbox},{kind:"category",name:"%{BKY_HAT_ROVERC}",colour:"%{BKY_HAT_ROVERC_HUE}",hidden:"true",toolboxitemid:"hat_roverc",contents:g.HatRovercToolbox},{kind:"category",name:"%{BKY_HAT_TOF}",colour:"%{BKY_HAT_TOF_HUE}",hidden:"true",toolboxitemid:"hat_tof",contents:f.HatTofToolbox},{kind:"category",name:"%{BKY_HAT_THERMAL}",colour:"%{BKY_HAT_THERMAL_HUE}",hidden:"true",toolboxitemid:"hat_thermal",contents:b.HatThermalToolbox},{kind:"category",name:"%{BKY_HAT_CARDKB}",colour:"%{BKY_HAT_CARDKB_HUE}",hidden:"true",toolboxitemid:"hat_cardkb",contents:v.HatCardkbToolbox},{kind:"category",name:"%{BKY_HAT_ENV2}",colour:"%{BKY_HAT_ADC_HUE}",hidden:"true",toolboxitemid:"hat_env2",contents:T.HatEnv2Toolbox},{kind:"category",name:"%{BKY_HAT_ENV3}",colour:"%{BKY_HAT_ADC_HUE}",hidden:"true",toolboxitemid:"hat_env3",contents:[{kind:"button",text:"%{BKY_HAT_ENV3}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"envIII"},{kind:"button",text:"\u25b6 %{BKY_HAT_EVN2_READ_VALUE}","web-class":"blockly-button--style",callbackKey:"selected"},{kind:"block",isDemo:"true",blockxml:'<block type="basic_on_loop" hidden="true">\n<statement name="LOOP">\n  <block type="text_print">\n    <value name="TEXT">\n      <block type="text_add">\n        <value name="arg0">\n          <shadow type="text">\n            <field name="TEXT"> Baro: </field>\n          </shadow>\n        </value>\n        <value name="arg1">\n          <block type="hat_env3_pressure">\n          </block>\n        </value>\n      </block>\n    </value>\n    <next>\n      <block type="text_print">\n        <value name="TEXT">\n          <block type="text_add">\n            <value name="arg0">\n              <shadow type="text">\n                <field name="TEXT"> Temp: </field>\n              </shadow>\n            </value>\n            <value name="arg1">\n              <block type="hat_env3_get_temperature">\n              </block>\n            </value>\n          </block>\n        </value>\n        <next>\n          <block type="text_print">\n            <value name="TEXT">\n              <block type="text_add">\n                <value name="arg0">\n                  <shadow type="text">\n                    <field name="TEXT"> Hum: </field>\n                  </shadow>\n                </value>\n                <value name="arg1">\n                  <block type="hat_env3_get_humidity">\n                  </block>\n                </value>\n              </block>\n            </value>\n            <next>\n              <block type="timer_delay">\n                <value name="DELAY">\n                  <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                  </shadow>\n                </value>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </next>\n  </block>\n</statement>\n</block>'},{kind:"button",width:"458","web-class":"blockly-divider-nowidth"},{kind:"block",type:"hat_env3_pressure"},{kind:"block",type:"hat_env3_get_temperature"},{kind:"block",type:"hat_env3_get_humidity"}]},{kind:"category",name:"%{BKY_HAT_RS485}",colour:"%{BKY_HAT_ROVERC_HUE}",hidden:"true",toolboxitemid:"hat_rs485",contents:[{kind:"button",text:"%{BKY_HAT_RS485}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"rs485"},{kind:"block",blockxml:'<block type="hat_rs485_init">\n    <value name="BAUD">\n      <shadow type="math_number">\n        <field name="NUM">9600</field>\n      </shadow>\n    </value>\n    <field name="data_bits">8</field>\n  </block>'},{kind:"button",text:"RS485 Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="hat_rs485_write_line">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="NUM"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_write">\n    <value name="VALUE">\n      <shadow type="text">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_write_raw_data">\n    <value name="VALUE">\n      <block type="lists_create_with">\n        <value name="ADD0">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD1">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n        <value name="ADD2">\n          <block type="math_number"><field name="NUM">0</field></block>\n        </value>\n      </block>\n    </value>\n  </block>'},{kind:"button",text:"RS485 Read","web-class":"blockly-subclass--style"},{kind:"block",type:"hat_rs485_read"},{kind:"block",blockxml:'<block type="hat_rs485_read_characters">\n    <value name="NUM">\n      <shadow type="math_number">\n        <field name="NUM">10</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",type:"hat_rs485_readline"},{kind:"block",type:"hat_rs485_any"},{kind:"button",text:"ModBus RTU Read","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="hat_rs485_read_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="coil_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_read_discrete_inputs">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="input_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_read_holding_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_read_input_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_qty">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"button",text:"ModBus RTU Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="hat_rs485_write_single_coil">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="output_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_write_single_register">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="register_address">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_write_multiple_coils">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="output_value">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="hat_rs485_write_multiple_registers">\n    <value name="slave_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="255">1</field>\n      </shadow>\n    </value>\n    <value name="starting_addr">\n      <shadow type="math_slider">\n        <field name="NUM" min="0" max="65535">1</field>\n      </shadow>\n    </value>\n    <value name="register_values">\n      <shadow type="math_number">\n        <field name="NUM">0</field>\n      </shadow>\n    </value>\n  </block>'}]},{kind:"category",name:"%{BKY_HAT_CBACK}",colour:"%{BKY_HAT_CBACK_HUE}",hidden:"true",toolboxitemid:"hat_cback",contents:[{kind:"button",text:"%{BKY_HAT_CBACK}","web-class":"blockly-title--style",callbackKey:"hatDocs",url:"c_back_driver"},{kind:"button",text:"Write","web-class":"blockly-subclass--style"},{kind:"block",blockxml:'<block type="hat_set_servo_angle">\n        <value name="angle">\n            <shadow type="math_slider">\n                <field name="NUM" min="0" max="180">0</field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="hat_set_servo_pulse">\n        <value name="pulse">\n            <shadow type="math_slider">\n                <field name="NUM" min="500" max="2500">500</field>\n            </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="hat_set_output">\n        <value name="num">\n            <shadow type="math_slider">\n                <field name="NUM" min="0" max="1">0</field>\n            </shadow>\n        </value>\n      </block>'},{kind:"button",text:"Read","web-class":"blockly-subclass--style"},{kind:"block",type:"hat_cback_raw_adc"},{kind:"block",type:"hat_cback_get_input"}]}]},function(t,e,n){"use strict";n.r(e);var o=n(34),l=n(35),i=n(38),a=n(39),s=n(40),r=n(41),c=n(42),u=n(43),_=n(44),d=n(45),h=n(46),y=n(47),p=n(48),m=n(49),k=(n(156),n(50)),g=n(51),f=n(56),b=n(57),v=n(58),T=n(59),E=n(60),B=n(61),I=n(62);let R=[{kind:"category",name:"%{BKY_FACES_CALCULATOR}",colour:"%{BKY_FACES_CALCULATOR_HUE}",cssConfig:{icon:"blocklyTreeIconCalc"},toolboxitemid:"calculator",contents:f.CalculatorToolbox},{kind:"category",name:"%{BKY_FACES_ENCODE}",colour:"%{BKY_FACES_ENCODE_HUE}",cssConfig:{icon:"blocklyTreeIconEncoder"},toolboxitemid:"encode",contents:b.EncodeToolbox},{kind:"category",name:"%{BKY_FACES_FINGER}",colour:"%{BKY_FACES_FINGER_HUE}",cssConfig:{icon:"blocklyTreeIconFinger"},toolboxitemid:"finger",contents:v.FingerToolbox},{kind:"category",name:"%{BKY_FACES_GAMEBOY}",colour:"%{BKY_FACES_GAMEBOY_HUE}",cssConfig:{icon:"blocklyTreeIconGameBoy"},toolboxitemid:"gameboy",contents:T.GameboyToolbox},{kind:"category",name:"%{BKY_FACES_JOYSTICK}",colour:"%{BKY_FACES_JOYSTICK_HUE}",cssConfig:{icon:"blocklyTreeIconJoystick"},toolboxitemid:"joystick",contents:E.JoystickToolbox},{kind:"category",name:"%{BKY_FACES_KEYBOARD}",colour:"%{BKY_FACES_KEYBOARD_HUE}",cssConfig:{icon:"blocklyTreeIconKeyBoard"},toolboxitemid:"keyboard",contents:B.KeyboardToolbox},{kind:"category",name:"%{BKY_FACES_RFID}",colour:"%{BKY_FACES_RFID_HUE}",cssConfig:{icon:"blocklyTreeIconRFID"},toolboxitemid:"rfid",contents:I.RfidToolbox}];Blockly.M5Toolbox.modulesToolbox=[{kind:"category",name:"%{BKY_FACES}",colour:"%{BKY_FACES_HUE}",toolboxitemid:"faces",contents:R},{kind:"category",name:"%{BKY_LIDARBAR}",colour:"%{BKY_SPEAKER_HUE}",toolboxitemid:"lidarbot",contents:o.LidarbarToolbox},{kind:"category",name:"%{BKY_LORAWAN}",colour:"%{BKY_TIMER_HUE}",toolboxitemid:"lorawan",contents:l.LorawanToolbox},{kind:"category",name:"%{BKY_STEP_MOTOR}",colour:"%{BKY_MOTOR_HUE}",toolboxitemid:"stepmotor",contents:i.StepMotorToolbox},{kind:"category",name:"%{BKY_SERVO}",colour:"%{BKY_SERVO_HUE}",toolboxitemid:"servo",contents:a.ServoToolbox},{kind:"category",name:"%{BKY_SERVO2}",colour:"%{BKY_LISTS_HUE}",toolboxitemid:"servo2",contents:s.Servo2Toolbox},{kind:"category",name:"%{BKY_BALA}",colour:"260",toolboxitemid:"bala",contents:r.BalaToolbox},{kind:"category",name:"%{BKY_BALA_MOTOR}",colour:"%{BKY_NXT_MOTOR_HUE}",toolboxitemid:"bala_motor",contents:c.BalaMotorToolbox},{kind:"category",name:"%{BKY_LEGO_MOTOR}",colour:"%{BKY_LEGO_MOTOR_HUE}",toolboxitemid:"dc_motor",contents:u.LegoToolbox},{kind:"category",name:"%{BKY_PM_2_5}",colour:"%{BKY_PW2_5_HUE}",toolboxitemid:"pw2_5",contents:_.PM25Toolbox},{kind:"category",name:"%{BKY_CELLULAR}",colour:"%{BKY_CELLULAR_HUE}",toolboxitemid:"cellular",contents:d.CellularToolbox},{kind:"category",name:"%{BKY_BASEX}",colour:"%{BKY_BASEX_HUE}",toolboxitemid:"basex",contents:h.BasexToolbox},{kind:"category",name:"%{BKY_PLUS}",colour:"%{BKY_PLUS_HUE}",toolboxitemid:"plus",contents:y.PlusToolbox},{kind:"category",name:"%{BKY_GO_PLUS}",colour:"%{BKY_GO_PLUS_HUE}",toolboxitemid:"goplus",contents:p.GoPlusToolbox},{kind:"category",name:"%{BKY_GO_PLUS2}",colour:"%{BKY_LOGIC_HUE}",toolboxitemid:"goplus2",contents:m.GoPlus2Toolbox},{kind:"category",name:"%{BKY_GPS}",colour:"%{BKY_GPS_HUE}",toolboxitemid:"gps",custom:"GPS"},{kind:"category",name:"%{BKY_GRBL}",colour:"%{BKY_PINS_HUE}",toolboxitemid:"grbl",contents:k.GrblToolbox},{kind:"category",name:"%{BKY_COMX}",colour:"%{BKY_EEPROM_HUE}",toolboxitemid:"comx",contents:g.ComxToolbox},{kind:"category",name:"%{BKY_STEPMOTOR_DRIVER}",colour:"%{BKY_TEXTS_HUE}",toolboxitemid:"stepmotor_driver",contents:[{kind:"button",text:"%{BKY_STEPMOTOR_DRIVER}","web-class":"blockly-title--style",callbackKey:"modulesDocs",url:"stepmotor_driver"},{kind:"block",blockxml:'<block type="stepmotor_driver_set_step_pulse">\n          <value name="freq">\n            <shadow type="math_number">\n              <field name="NUM">500</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="stepmotor_driver_set_micro_stepselect">\n          <value name="steps">\n            <shadow type="math_number">\n              <field name="NUM">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="stepmotor_driver_set_step_dir">\n          <value name="dir">\n            <shadow type="math_number">\n              <field name="NUM">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",type:"stepmotor_driver_read_io_status"},{kind:"block",blockxml:'<block type="stepmotor_driver_read_pin_status">\n          <value name="pin">\n            <shadow type="math_slider">\n              <field name="NUM" min="0" max="7">0</field>\n            </shadow>\n          </value>\n        </block>'},{kind:"block",blockxml:'<block type="stepmotor_driver_enable_motor">\n\n        </block>'},{kind:"block",blockxml:'<block type="stepmotor_driver_set_single_motor">\n         \n        </block>'}]},{kind:"category",name:"%{BKY_LORA433}",colour:"%{BKY_LORA433_HUE}",toolboxitemid:"lora433",custom:"LORA433"},{kind:"category",name:"%{BKY_LORA868}",colour:"%{BKY_LORA868_HUE}",toolboxitemid:"lora868",custom:"LORA868"},{kind:"category",name:"%{BKY_IOTBASE}",colour:"%{BKY_IOTBASE_HUE}",toolboxitemid:"iot_base_nb",custom:"IOTBASE"},{kind:"category",name:"%{BKY_IOTBASE_CATM}",colour:"%{BKY_IOTBASE_CATM_HUE}",toolboxitemid:"iot_base_catm",custom:"IOTBASECATM"},{kind:"category",name:"%{BKY_LAN_BASE}",colour:"%{BKY_LAN_BASE_HUE}",toolboxitemid:"lanbase",custom:"LAN_BASE"}]},function(t,e,n){"use strict";n.r(e);var o=n(154);Blockly.M5Toolbox.mediatransToolbox=[{kind:"category",name:"Audio",colour:"%{BKY_UART_HUE}",toolboxitemid:"audio",contents:o.AudioToolbox},{kind:"category",name:"%{BKY_TIMER_CAM}",colour:"%{BKY_RGB_HUE}",custom:"TIMERCAM",toolboxitemid:"timer_cam"},{kind:"category",name:"%{BKY_ECHO_STT}",colour:"%{BKY_ECHO_STT_HUE}",toolboxitemid:"echo_stt",contents:[{kind:"button",text:"%{BKY_ECHO_STT}","web-class":"blockly-title--style",callbackKey:"advancedDocs",url:"media"},{kind:"block",blockxml:'<block type="echo_stt_init">\n    <value name="TOKEN">\n      <shadow type="text_password">\n        <field name="TEXT"></field>\n      </shadow>\n    </value>\n  </block>'},{kind:"block",blockxml:'<block type="echo_stt_recv_data">\n    <value name="DATA">\n      <block type="variables_get">\n        <field name="VAR">stt_data</field>\n      </block>\n    </value>\n  </block>'},{kind:"block",type:"echo_stt_get_text"}]},{kind:"category",name:"%{BKY_MQTT_PRINTER}",colour:"%{BKY_MQTT_PRINTER_HUE}",toolboxitemid:"mqtt_printer",contents:[{kind:"button",text:"%{BKY_MQTT_PRINTER}","web-class":"blockly-title--style nounderline"},{kind:"block",blockxml:'<block type="mqtt_printer_set_topic">\n        <value name="TOPIC">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'},{kind:"block",blockxml:'<block type="mqtt_printer_publish">\n        <value name="MSG">\n          <shadow type="text">\n            <field name="TEXT"></field>\n          </shadow>\n        </value>\n      </block>'}]}]}]),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var l=n[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var o,l,i;l=[t,n(7)],o=function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(t){return t&&t.__esModule?t:{default:t}}(e),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":l(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a},void 0!==(i="function"==typeof o?o.apply(e,l):o)&&(t.exports=i)},function(t,e,n){var o=n(6),l=n(5);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!o.string(e))throw new TypeError("Second argument must be a String");if(!o.fn(n))throw new TypeError("Third argument must be a Function");if(o.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(o.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(o.string(t))return function(t,e,n){return l(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){l.off(t,o),e.apply(n,arguments)}var l=this;return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,l=n.length;o<l;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],l=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&l.push(o[i]);return l.length?n[t]=l:delete n[t],this}},t.exports=n},function(t,e,n){var o,l,i;l=[t,n(0),n(2),n(1)],o=function(t,e,n,o){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=l(e),u=l(n),_=l(o),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),y=function(t){function e(t,n){i(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return s(e,t),h(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,_.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return r("action",t)}},{key:"defaultTarget",value:function(t){var e=r("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return r("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(u.default);t.exports=y},void 0!==(i="function"==typeof o?o.apply(e,l):o)&&(t.exports=i)},function(t,e){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){function o(t,e,n,o,i){var a=l.apply(this,arguments);return t.addEventListener(n,a,i),{destroy:function(){t.removeEventListener(n,a,i)}}}function l(t,e,n,o){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&o.call(t,n)}}var i=n(4);t.exports=function(t,e,n,l,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return o(t,e,n,l,i)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),l=document.createRange();l.selectNodeContents(t),o.removeAllRanges(),o.addRange(l),e=o.toString()}return e}}])}),function(t,e){"object"==typeof exports?module.exports=exports=e():"function"==typeof define&&define.amd?define([],e):t.CryptoJS=e()}(this,function(){var t,e,n,o,l,i,a,s=s||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},l=o.lib={},i=l.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=l.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||r).stringify(this)},concat:function(t){var e=this.words,n=t.words,o=this.sigBytes,l=t.sigBytes;if(this.clamp(),o%4)for(var i=0;i<l;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[o+i>>>2]|=a<<24-(o+i)%4*8}else for(i=0;i<l;i+=4)e[o+i>>>2]=n[i>>>2];return this.sigBytes+=l,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,o=[],l=function(e){e=e;var n=987654321,o=4294967295;return function(){var l=((n=36969*(65535&n)+(n>>16)&o)<<16)+(e=18e3*(65535&e)+(e>>16)&o)&o;return l/=4294967296,(l+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var s=l(4294967296*(n||t.random()));n=987654071*s(),o.push(4294967296*s()|0)}return new a.init(o,e)}}),s=o.enc={},r=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,o=[],l=0;l<n;l++){var i=e[l>>>2]>>>24-l%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o+=2)n[o>>>3]|=parseInt(t.substr(o,2),16)<<24-o%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,o=[],l=0;l<n;l++){var i=e[l>>>2]>>>24-l%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>2]|=(255&t.charCodeAt(o))<<24-o%4*8;return new a.init(n,e)}},u=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},_=l.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,o=n.words,l=n.sigBytes,i=this.blockSize,s=l/(4*i),r=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*i,c=t.min(4*r,l);if(r){for(var u=0;u<r;u+=i)this._doProcessBlock(o,u);var _=o.splice(0,r);n.sigBytes-=c}return new a.init(_,c)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(l.Hasher=_.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),o.algo={});return o}(Math);return function(){function t(t,e,o){for(var l=[],i=0,a=0;a<e;a++)if(a%4){var s=o[t.charCodeAt(a-1)]<<a%4*2,r=o[t.charCodeAt(a)]>>>6-a%4*2;l[i>>>2]|=(s|r)<<24-i%4*8,i++}return n.create(l,i)}var e=s,n=e.lib.WordArray;e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,o=this._map;t.clamp();for(var l=[],i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)l.push(o.charAt(a>>>6*(3-s)&63));var r=o.charAt(64);if(r)for(;l.length%4;)l.push(r);return l.join("")},parse:function(e){var n=e.length,o=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var i=0;i<o.length;i++)l[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(n=s)}return t(e,n,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,o,l,i,a){var s=t+(e&n|~e&o)+l+a;return(s<<i|s>>>32-i)+e}function n(t,e,n,o,l,i,a){var s=t+(e&o|n&~o)+l+a;return(s<<i|s>>>32-i)+e}function o(t,e,n,o,l,i,a){var s=t+(e^n^o)+l+a;return(s<<i|s>>>32-i)+e}function l(t,e,n,o,l,i,a){var s=t+(n^(e|~o))+l+a;return(s<<i|s>>>32-i)+e}var i=s,a=i.lib,r=a.WordArray,c=a.Hasher,u=i.algo,_=[];!function(){for(var e=0;e<64;e++)_[e]=4294967296*t.abs(t.sin(e+1))|0}();var d=u.MD5=c.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,i){for(var a=0;a<16;a++){var s=i+a,r=t[s];t[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var c=this._hash.words,u=t[i+0],d=t[i+1],h=t[i+2],y=t[i+3],p=t[i+4],m=t[i+5],k=t[i+6],g=t[i+7],f=t[i+8],b=t[i+9],v=t[i+10],T=t[i+11],E=t[i+12],B=t[i+13],I=t[i+14],R=t[i+15],O=c[0],C=c[1],N=c[2],w=c[3];O=e(O,C,N,w,u,7,_[0]),w=e(w,O,C,N,d,12,_[1]),N=e(N,w,O,C,h,17,_[2]),C=e(C,N,w,O,y,22,_[3]),O=e(O,C,N,w,p,7,_[4]),w=e(w,O,C,N,m,12,_[5]),N=e(N,w,O,C,k,17,_[6]),C=e(C,N,w,O,g,22,_[7]),O=e(O,C,N,w,f,7,_[8]),w=e(w,O,C,N,b,12,_[9]),N=e(N,w,O,C,v,17,_[10]),C=e(C,N,w,O,T,22,_[11]),O=e(O,C,N,w,E,7,_[12]),w=e(w,O,C,N,B,12,_[13]),N=e(N,w,O,C,I,17,_[14]),O=n(O,C=e(C,N,w,O,R,22,_[15]),N,w,d,5,_[16]),w=n(w,O,C,N,k,9,_[17]),N=n(N,w,O,C,T,14,_[18]),C=n(C,N,w,O,u,20,_[19]),O=n(O,C,N,w,m,5,_[20]),w=n(w,O,C,N,v,9,_[21]),N=n(N,w,O,C,R,14,_[22]),C=n(C,N,w,O,p,20,_[23]),O=n(O,C,N,w,b,5,_[24]),w=n(w,O,C,N,I,9,_[25]),N=n(N,w,O,C,y,14,_[26]),C=n(C,N,w,O,f,20,_[27]),O=n(O,C,N,w,B,5,_[28]),w=n(w,O,C,N,h,9,_[29]),N=n(N,w,O,C,g,14,_[30]),O=o(O,C=n(C,N,w,O,E,20,_[31]),N,w,m,4,_[32]),w=o(w,O,C,N,f,11,_[33]),N=o(N,w,O,C,T,16,_[34]),C=o(C,N,w,O,I,23,_[35]),O=o(O,C,N,w,d,4,_[36]),w=o(w,O,C,N,p,11,_[37]),N=o(N,w,O,C,g,16,_[38]),C=o(C,N,w,O,v,23,_[39]),O=o(O,C,N,w,B,4,_[40]),w=o(w,O,C,N,u,11,_[41]),N=o(N,w,O,C,y,16,_[42]),C=o(C,N,w,O,k,23,_[43]),O=o(O,C,N,w,b,4,_[44]),w=o(w,O,C,N,E,11,_[45]),N=o(N,w,O,C,R,16,_[46]),O=l(O,C=o(C,N,w,O,h,23,_[47]),N,w,u,6,_[48]),w=l(w,O,C,N,g,10,_[49]),N=l(N,w,O,C,I,15,_[50]),C=l(C,N,w,O,m,21,_[51]),O=l(O,C,N,w,E,6,_[52]),w=l(w,O,C,N,y,10,_[53]),N=l(N,w,O,C,v,15,_[54]),C=l(C,N,w,O,d,21,_[55]),O=l(O,C,N,w,f,6,_[56]),w=l(w,O,C,N,R,10,_[57]),N=l(N,w,O,C,k,15,_[58]),C=l(C,N,w,O,B,21,_[59]),O=l(O,C,N,w,p,6,_[60]),w=l(w,O,C,N,T,10,_[61]),N=l(N,w,O,C,h,15,_[62]),C=l(C,N,w,O,b,21,_[63]),c[0]=c[0]+O|0,c[1]=c[1]+C|0,c[2]=c[2]+N|0,c[3]=c[3]+w|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,l=8*e.sigBytes;n[l>>>5]|=128<<24-l%32;var i=t.floor(o/4294967296),a=o;n[15+(l+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(l+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,r=s.words,c=0;c<4;c++){var u=r[c];r[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});i.MD5=c._createHelper(d),i.HmacMD5=c._createHmacHelper(d)}(Math),e=(t=s).lib,n=e.WordArray,o=e.Hasher,l=t.algo,i=[],a=l.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,o=n[0],l=n[1],a=n[2],s=n[3],r=n[4],c=0;c<80;c++){if(c<16)i[c]=0|t[e+c];else{var u=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=u<<1|u>>>31}var _=(o<<5|o>>>27)+r+i[c];_+=c<20?1518500249+(l&a|~l&s):c<40?1859775393+(l^a^s):c<60?(l&a|l&s|a&s)-1894007588:(l^a^s)-899497514,r=s,s=a,a=l<<30|l>>>2,l=o,o=_}n[0]=n[0]+o|0,n[1]=n[1]+l|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+r|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return e[o>>>5]|=128<<24-o%32,e[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(o+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),t.SHA1=o._createHelper(a),t.HmacSHA1=o._createHmacHelper(a),function(t){var e=s,n=e.lib,o=n.WordArray,l=n.Hasher,i=e.algo,a=[],r=[];!function(){function e(e){for(var n=t.sqrt(e),o=2;o<=n;o++)if(!(e%o))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var o=2,l=0;l<64;)e(o)&&(l<8&&(a[l]=n(t.pow(o,.5))),r[l]=n(t.pow(o,1/3)),l++),o++}();var c=[],u=i.SHA256=l.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,o=n[0],l=n[1],i=n[2],a=n[3],s=n[4],u=n[5],_=n[6],d=n[7],h=0;h<64;h++){if(h<16)c[h]=0|t[e+h];else{var y=c[h-15],p=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,m=c[h-2],k=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=p+c[h-7]+k+c[h-16]}var g=o&l^o&i^l&i,f=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&_)+r[h]+c[h];d=_,_=u,u=s,s=a+b|0,a=i,i=l,l=o,o=b+(f+g)|0}n[0]=n[0]+o|0,n[1]=n[1]+l|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+_|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,l=8*e.sigBytes;return n[l>>>5]|=128<<24-l%32,n[14+(l+64>>>9<<4)]=t.floor(o/4294967296),n[15+(l+64>>>9<<4)]=o,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=l._createHelper(u),e.HmacSHA256=l._createHmacHelper(u)}(Math),function(){function t(t){return t<<8&4278255360|t>>>8&16711935}var e=s,n=e.lib.WordArray,o=e.enc;o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,o=[],l=0;l<n;l+=2){var i=e[l>>>2]>>>16-l%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(t){for(var e=t.length,o=[],l=0;l<e;l++)o[l>>>1]|=t.charCodeAt(l)<<16-l%2*16;return n.create(o,2*e)}},o.Utf16LE={stringify:function(e){for(var n=e.words,o=e.sigBytes,l=[],i=0;i<o;i+=2){var a=t(n[i>>>2]>>>16-i%4*8&65535);l.push(String.fromCharCode(a))}return l.join("")},parse:function(e){for(var o=e.length,l=[],i=0;i<o;i++)l[i>>>1]|=t(e.charCodeAt(i)<<16-i%2*16);return n.create(l,2*o)}}}(),function(){if("function"==typeof ArrayBuffer){var t=s.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,o=[],l=0;l<n;l++)o[l>>>2]|=t[l]<<24-l%4*8;e.call(this,o,n)}else e.apply(this,arguments)}).prototype=t}}(),function(t){function e(t,e,n){return t^e^n}function n(t,e,n){return t&e|~t&n}function o(t,e,n){return(t|~e)^n}function l(t,e,n){return t&n|e&~n}function i(t,e,n){return t^(e|~n)}function a(t,e){return t<<e|t>>>32-e}var r=s,c=r.lib,u=c.WordArray,_=c.Hasher,d=r.algo,h=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=u.create([0,1518500249,1859775393,2400959708,2840853838]),g=u.create([1352829926,1548603684,1836072691,2053994217,0]),f=d.RIPEMD160=_.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,s){for(var r=0;r<16;r++){var c=s+r,u=t[c];t[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var _,d,f,b,v,T,E,B,I,R,O=this._hash.words,C=k.words,N=g.words,w=h.words,A=y.words,M=p.words,S=m.words;T=_=O[0],E=d=O[1],B=f=O[2],I=b=O[3],R=v=O[4];var P;for(r=0;r<80;r+=1)P=_+t[s+w[r]]|0,P+=r<16?e(d,f,b)+C[0]:r<32?n(d,f,b)+C[1]:r<48?o(d,f,b)+C[2]:r<64?l(d,f,b)+C[3]:i(d,f,b)+C[4],P=(P=a(P|=0,M[r]))+v|0,_=v,v=b,b=a(f,10),f=d,d=P,P=T+t[s+A[r]]|0,P+=r<16?i(E,B,I)+N[0]:r<32?l(E,B,I)+N[1]:r<48?o(E,B,I)+N[2]:r<64?n(E,B,I)+N[3]:e(E,B,I)+N[4],P=(P=a(P|=0,S[r]))+R|0,T=R,R=I,I=a(B,10),B=E,E=P;P=O[1]+f+I|0,O[1]=O[2]+b+R|0,O[2]=O[3]+v+T|0,O[3]=O[4]+_+E|0,O[4]=O[0]+d+B|0,O[0]=P},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;e[o>>>5]|=128<<24-o%32,e[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var l=this._hash,i=l.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return l},clone:function(){var t=_.clone.call(this);return t._hash=this._hash.clone(),t}});r.RIPEMD160=_._createHelper(f),r.HmacRIPEMD160=_._createHmacHelper(f)}(Math),function(){var t=s,e=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var o=t.blockSize,l=4*o;e.sigBytes>l&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),s=i.words,r=a.words,c=0;c<o;c++)s[c]^=1549556828,r[c]^=909522486;i.sigBytes=a.sigBytes=l,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}(),function(){var t=s,e=t.lib,n=e.Base,o=e.WordArray,l=t.algo,i=l.SHA1,a=l.HMAC,r=l.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,l=a.create(n.hasher,t),i=o.create(),s=o.create([1]),r=i.words,c=s.words,u=n.keySize,_=n.iterations;r.length<u;){var d=l.update(e).finalize(s);l.reset();for(var h=d.words,y=h.length,p=d,m=1;m<_;m++){p=l.finalize(p),l.reset();for(var k=p.words,g=0;g<y;g++)h[g]^=k[g]}i.concat(d),c[0]++}return i.sigBytes=4*u,i}});t.PBKDF2=function(t,e,n){return r.create(n).compute(t,e)}}(),function(){var t=s,e=t.lib,n=e.Base,o=e.WordArray,l=t.algo,i=l.MD5,a=l.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,l=n.hasher.create(),i=o.create(),a=i.words,s=n.keySize,r=n.iterations;a.length<s;){c&&l.update(c);var c=l.update(t).finalize(e);l.reset();for(var u=1;u<r;u++)c=l.finalize(c),l.reset();i.concat(c)}return i.sigBytes=4*s,i}});t.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),function(){var t=s,e=t.lib.WordArray,n=t.algo,o=n.SHA256,l=n.SHA224=o.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=o._createHelper(l),t.HmacSHA224=o._createHmacHelper(l)}(),function(t){var e=s,n=e.lib,o=n.Base,l=n.WordArray,i=e.x64={};i.Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],o=0;o<e;o++){var i=t[o];n.push(i.high),n.push(i.low)}return l.create(n,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),n=e.length,l=0;l<n;l++)e[l]=e[l].clone();return t}})}(),function(t){var e=s,n=e.lib,o=n.WordArray,l=n.Hasher,i=e.x64.Word,a=e.algo,r=[],c=[],u=[];!function(){for(var t=1,e=0,n=0;n<24;n++){r[t+5*e]=(n+1)*(n+2)/2%64;var o=(2*t+3*e)%5;t=e%5,e=o}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var l=1,a=0;a<24;a++){for(var s=0,_=0,d=0;d<7;d++){if(1&l){var h=(1<<d)-1;h<32?_^=1<<h:s^=1<<h-32}128&l?l=l<<1^113:l<<=1}u[a]=i.create(s,_)}}();var _=[];!function(){for(var t=0;t<25;t++)_[t]=i.create()}();var d=a.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,o=this.blockSize/2,l=0;l<o;l++){var i=t[e+2*l],a=t[e+2*l+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(C=n[l]).high^=a,C.low^=i}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var h=0,y=0,p=0;p<5;p++){h^=(C=n[d+5*p]).high,y^=C.low}var m=_[d];m.high=h,m.low=y}for(d=0;d<5;d++){var k=_[(d+4)%5],g=_[(d+1)%5],f=g.high,b=g.low;for(h=k.high^(f<<1|b>>>31),y=k.low^(b<<1|f>>>31),p=0;p<5;p++){(C=n[d+5*p]).high^=h,C.low^=y}}for(var v=1;v<25;v++){var T=(C=n[v]).high,E=C.low,B=r[v];if(B<32)h=T<<B|E>>>32-B,y=E<<B|T>>>32-B;else h=E<<B-32|T>>>64-B,y=T<<B-32|E>>>64-B;var I=_[c[v]];I.high=h,I.low=y}var R=_[0],O=n[0];R.high=O.high,R.low=O.low;for(d=0;d<5;d++)for(p=0;p<5;p++){var C=n[v=d+5*p],N=_[v],w=_[(d+1)%5+5*p],A=_[(d+2)%5+5*p];C.high=N.high^~w.high&A.high,C.low=N.low^~w.low&A.low}C=n[0];var M=u[s];C.high^=M.high,C.low^=M.low}},_doFinalize:function(){var e=this._data,n=e.words,l=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;n[l>>>5]|=1<<24-l%32,n[(t.ceil((l+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,r=s/8,c=[],u=0;u<r;u++){var _=a[u],d=_.high,h=_.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(d)}return new o.init(c,s)},clone:function(){for(var t=l.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=l._createHelper(d),e.HmacSHA3=l._createHmacHelper(d)}(Math),function(){function t(){return l.create.apply(l,arguments)}var e=s,n=e.lib.Hasher,o=e.x64,l=o.Word,i=o.WordArray,a=e.algo,r=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=t()}();var u=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,o=n[0],l=n[1],i=n[2],a=n[3],s=n[4],u=n[5],_=n[6],d=n[7],h=o.high,y=o.low,p=l.high,m=l.low,k=i.high,g=i.low,f=a.high,b=a.low,v=s.high,T=s.low,E=u.high,B=u.low,I=_.high,R=_.low,O=d.high,C=d.low,N=h,w=y,A=p,M=m,S=k,P=g,x=f,D=b,L=v,U=T,F=E,H=B,V=I,G=R,j=O,W=C,K=0;K<80;K++){var Y=c[K];if(K<16)var X=Y.high=0|t[e+2*K],$=Y.low=0|t[e+2*K+1];else{var z=c[K-15],q=z.high,J=z.low,Z=(q>>>1|J<<31)^(q>>>8|J<<24)^q>>>7,Q=(J>>>1|q<<31)^(J>>>8|q<<24)^(J>>>7|q<<25),tt=c[K-2],et=tt.high,nt=tt.low,ot=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,lt=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),it=c[K-7],at=it.high,st=it.low,rt=c[K-16],ct=rt.high,ut=rt.low;X=(X=(X=Z+at+(($=Q+st)>>>0<Q>>>0?1:0))+ot+(($=$+lt)>>>0<lt>>>0?1:0))+ct+(($=$+ut)>>>0<ut>>>0?1:0);Y.high=X,Y.low=$}var _t,dt=L&F^~L&V,ht=U&H^~U&G,yt=N&A^N&S^A&S,pt=w&M^w&P^M&P,mt=(N>>>28|w<<4)^(N<<30|w>>>2)^(N<<25|w>>>7),kt=(w>>>28|N<<4)^(w<<30|N>>>2)^(w<<25|N>>>7),gt=(L>>>14|U<<18)^(L>>>18|U<<14)^(L<<23|U>>>9),ft=(U>>>14|L<<18)^(U>>>18|L<<14)^(U<<23|L>>>9),bt=r[K],vt=bt.high,Tt=bt.low,Et=j+gt+((_t=W+ft)>>>0<W>>>0?1:0),Bt=kt+pt;j=V,W=G,V=F,G=H,F=L,H=U,L=x+(Et=(Et=(Et=Et+dt+((_t=_t+ht)>>>0<ht>>>0?1:0))+vt+((_t=_t+Tt)>>>0<Tt>>>0?1:0))+X+((_t=_t+$)>>>0<$>>>0?1:0))+((U=D+_t|0)>>>0<D>>>0?1:0)|0,x=S,D=P,S=A,P=M,A=N,M=w,N=Et+(mt+yt+(Bt>>>0<kt>>>0?1:0))+((w=_t+Bt|0)>>>0<_t>>>0?1:0)|0}y=o.low=y+w,o.high=h+N+(y>>>0<w>>>0?1:0),m=l.low=m+M,l.high=p+A+(m>>>0<M>>>0?1:0),g=i.low=g+P,i.high=k+S+(g>>>0<P>>>0?1:0),b=a.low=b+D,a.high=f+x+(b>>>0<D>>>0?1:0),T=s.low=T+U,s.high=v+L+(T>>>0<U>>>0?1:0),B=u.low=B+H,u.high=E+F+(B>>>0<H>>>0?1:0),R=_.low=R+G,_.high=I+V+(R>>>0<G>>>0?1:0),C=d.low=C+W,d.high=O+j+(C>>>0<W>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return e[o>>>5]|=128<<24-o%32,e[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(o+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});e.SHA512=n._createHelper(u),e.HmacSHA512=n._createHmacHelper(u)}(),function(){var t=s,e=t.x64,n=e.Word,o=e.WordArray,l=t.algo,i=l.SHA512,a=l.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=i._createHelper(a),t.HmacSHA384=i._createHmacHelper(a)}(),s.lib.Cipher||function(t){var e=s,n=e.lib,o=n.Base,l=n.WordArray,i=n.BufferedBlockAlgorithm,a=e.enc,r=(a.Utf8,a.Base64),c=e.algo.EvpKDF,u=n.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?f:k}return function(e){return{encrypt:function(n,o,l){return t(o).encrypt(e,n,o,l)},decrypt:function(n,o,l){return t(o).decrypt(e,n,o,l)}}}}()}),_=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),d=n.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),h=_.CBC=function(){function t(t,e,n){var o=this._iv;if(o){var l=o;this._iv=undefined}else l=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=l[i]}var e=d.extend();return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,l=o.blockSize;t.call(this,e,n,l),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+l)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,l=o.blockSize,i=e.slice(n,n+l);o.decryptBlock(e,n),t.call(this,e,n,l),this._prevBlock=i}}),e}(),y=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,o=n-t.sigBytes%n,i=o<<24|o<<16|o<<8|o,a=[],s=0;s<o;s+=4)a.push(i);var r=l.create(a,o);t.concat(r)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},p=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:y}),reset:function(){u.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{o=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==o?this._mode.init(this,e&&e.words):(this._mode=o.call(n,this,e&&e.words),this._mode.__creator=o)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),n.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),m=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var o=l.create([1398893684,1701076831]).concat(n).concat(e);else o=e;return o.toString(r)},parse:function(t){var e=r.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var o=l.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:o})}},k=n.SerializableCipher=o.extend({cfg:o.extend({format:m}),encrypt:function(t,e,n,o){o=this.cfg.extend(o);var l=t.createEncryptor(n,o),i=l.finalize(e),a=l.cfg;return p.create({ciphertext:i,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:o.format})},decrypt:function(t,e,n,o){return o=this.cfg.extend(o),e=this._parse(e,o.format),t.createDecryptor(n,o).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),g=(e.kdf={}).OpenSSL={execute:function(t,e,n,o){o||(o=l.random(8));var i=c.create({keySize:e+n}).compute(t,o),a=l.create(i.words.slice(e),4*n);return i.sigBytes=4*e,p.create({key:i,iv:a,salt:o})}},f=n.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:g}),encrypt:function(t,e,n,o){var l=(o=this.cfg.extend(o)).kdf.execute(n,t.keySize,t.ivSize);o.iv=l.iv;var i=k.encrypt.call(this,t,e,l.key,o);return i.mixIn(l),i},decrypt:function(t,e,n,o){o=this.cfg.extend(o),e=this._parse(e,o.format);var l=o.kdf.execute(n,t.keySize,t.ivSize,e.salt);return o.iv=l.iv,k.decrypt.call(this,t,e,l.key,o)}})}(),s.mode.CFB=function(){function t(t,e,n,o){var l=this._iv;if(l){var i=l.slice(0);this._iv=void 0}else i=this._prevBlock;o.encryptBlock(i,0);for(var a=0;a<n;a++)t[e+a]^=i[a]}var e=s.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,l=o.blockSize;t.call(this,e,n,l,o),this._prevBlock=e.slice(n,n+l)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,l=o.blockSize,i=e.slice(n,n+l);t.call(this,e,n,l,o),this._prevBlock=i}}),e}(),s.mode.ECB=function(){var t=s.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),s.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,o=4*e,l=o-n%o,i=n+l-1;t.clamp(),t.words[i>>>2]|=l<<24-i%4*8,t.sigBytes+=l},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},s.pad.Iso10126={pad:function(t,e){var n=4*e,o=n-t.sigBytes%n;t.concat(s.lib.WordArray.random(o-1)).concat(s.lib.WordArray.create([o<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},s.pad.Iso97971={pad:function(t,e){t.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(t,e)},unpad:function(t){s.pad.ZeroPadding.unpad(t),t.sigBytes--}},s.mode.OFB=function(){var t=s.lib.BlockCipherMode.extend(),e=t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize,l=this._iv,i=this._keystream;l&&(i=this._keystream=l.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<o;a++)t[e+a]^=i[a]}});return t.Decryptor=e,t}(),s.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var e=s,n=e.lib.CipherParams,o=e.enc.Hex;e.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return n.create({ciphertext:e})}}}(),function(){var t=s,e=t.lib.BlockCipher,n=t.algo,o=[],l=[],i=[],a=[],r=[],c=[],u=[],_=[],d=[],h=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,s=0;for(e=0;e<256;e++){var y=s^s<<1^s<<2^s<<3^s<<4;y=y>>>8^255&y^99,o[n]=y,l[y]=n;var p=t[n],m=t[p],k=t[m],g=257*t[y]^16843008*y;i[n]=g<<24|g>>>8,a[n]=g<<16|g>>>16,r[n]=g<<8|g>>>24,c[n]=g;g=16843009*k^65537*m^257*p^16843008*n;u[y]=g<<24|g>>>8,_[y]=g<<16|g>>>16,d[y]=g<<8|g>>>24,h[y]=g,n?(n=p^t[t[t[k^p]]],s^=t[t[s]]):n=s=1}}();var y=[0,1,2,4,8,16,32,64,128,27,54],p=n.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,l=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<l;a++)if(a<n)i[a]=e[a];else{var s=i[a-1];a%n?n>6&&a%n==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=y[a/n|0]<<24),i[a]=i[a-n]^s}for(var r=this._invKeySchedule=[],c=0;c<l;c++){a=l-c;if(c%4)s=i[a];else s=i[a-4];r[c]=c<4||a<=4?s:u[o[s>>>24]]^_[o[s>>>16&255]]^d[o[s>>>8&255]]^h[o[255&s]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i,a,r,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,_,d,h,l);n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,o,l,i,a,s){for(var r=this._nRounds,c=t[e]^n[0],u=t[e+1]^n[1],_=t[e+2]^n[2],d=t[e+3]^n[3],h=4,y=1;y<r;y++){var p=o[c>>>24]^l[u>>>16&255]^i[_>>>8&255]^a[255&d]^n[h++],m=o[u>>>24]^l[_>>>16&255]^i[d>>>8&255]^a[255&c]^n[h++],k=o[_>>>24]^l[d>>>16&255]^i[c>>>8&255]^a[255&u]^n[h++],g=o[d>>>24]^l[c>>>16&255]^i[u>>>8&255]^a[255&_]^n[h++];c=p,u=m,_=k,d=g}p=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[_>>>8&255]<<8|s[255&d])^n[h++],m=(s[u>>>24]<<24|s[_>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^n[h++],k=(s[_>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[h++],g=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&_])^n[h++];t[e]=p,t[e+1]=m,t[e+2]=k,t[e+3]=g},keySize:8});t.AES=e._createHelper(p)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n=s,o=n.lib,l=o.WordArray,i=o.BlockCipher,a=n.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],_=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var o=r[n]-1;e[n]=t[o>>>5]>>>31-o%32&1}for(var l=this._subKeys=[],i=0;i<16;i++){var a=l[i]=[],s=u[i];for(n=0;n<24;n++)a[n/6|0]|=e[(c[n]-1+s)%28]<<31-n%6,a[4+(n/6|0)]|=e[28+(c[n+24]-1+s)%28]<<31-n%6;a[0]=a[0]<<1|a[0]>>>31;for(n=1;n<7;n++)a[n]=a[n]>>>4*(n-1)+3;a[7]=a[7]<<5|a[7]>>>27}var _=this._invSubKeys=[];for(n=0;n<16;n++)_[n]=l[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,o,l){this._lBlock=n[o],this._rBlock=n[o+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var i=0;i<16;i++){for(var a=l[i],s=this._lBlock,r=this._rBlock,c=0,u=0;u<8;u++)c|=_[u][((r^a[u])&d[u])>>>0];this._lBlock=r,this._rBlock=s^c}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[o]=this._lBlock,n[o+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(h);var y=a.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(l.create(t.slice(0,2))),this._des2=h.createEncryptor(l.create(t.slice(2,4))),this._des3=h.createEncryptor(l.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=i._createHelper(y)}(),function(){function t(){for(var t=this._S,e=this._i,n=this._j,o=0,l=0;l<4;l++){n=(n+t[e=(e+1)%256])%256;var i=t[e];t[e]=t[n],t[n]=i,o|=t[(t[e]+t[n])%256]<<24-8*l}return this._i=e,this._j=n,o}var e=s,n=e.lib.StreamCipher,o=e.algo,l=o.RC4=n.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,o=this._S=[],l=0;l<256;l++)o[l]=l;l=0;for(var i=0;l<256;l++){var a=l%n,s=e[a>>>2]>>>24-a%4*8&255;i=(i+o[l]+s)%256;var r=o[l];o[l]=o[i],o[i]=r}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});e.RC4=n._createHelper(l);var i=o.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});e.RC4Drop=n._createHelper(i)}(),s.mode.CTRGladman=function(){function t(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,o=255&t;255===e?(e=0,255===n?(n=0,255===o?o=0:++o):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=o}else t+=1<<24;return t}function e(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=s.lib.BlockCipherMode.extend(),o=n.Encryptor=n.extend({processBlock:function(t,n){var o=this._cipher,l=o.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),e(a);var s=a.slice(0);o.encryptBlock(s,0);for(var r=0;r<l;r++)t[n+r]^=s[r]}});return n.Decryptor=o,n}(),function(){function t(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0;for(n=0;n<8;n++){var o=t[n]+e[n],l=65535&o,s=o>>>16,r=((l*l>>>17)+l*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=r^c}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}var e=s,n=e.lib.StreamCipher,o=e.algo,l=[],i=[],a=[],r=o.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var l=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(o=0;o<4;o++)t.call(this);for(o=0;o<8;o++)i[o]^=l[o+4&7];if(n){var a=n.words,s=a[0],r=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),_=c>>>16|4294901760&u,d=u<<16|65535&c;i[0]^=c,i[1]^=_,i[2]^=u,i[3]^=d,i[4]^=c,i[5]^=_,i[6]^=u,i[7]^=d;for(o=0;o<4;o++)t.call(this)}},_doProcessBlock:function(e,n){var o=this._X;t.call(this),l[0]=o[0]^o[5]>>>16^o[3]<<16,l[1]=o[2]^o[7]>>>16^o[5]<<16,l[2]=o[4]^o[1]>>>16^o[7]<<16,l[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)l[i]=16711935&(l[i]<<8|l[i]>>>24)|4278255360&(l[i]<<24|l[i]>>>8),e[n+i]^=l[i]},blockSize:4,ivSize:2});e.Rabbit=n._createHelper(r)}(),s.mode.CTR=function(){var t=s.lib.BlockCipherMode.extend(),e=t.Encryptor=t.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize,l=this._iv,i=this._counter;l&&(i=this._counter=l.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[o-1]=i[o-1]+1|0;for(var s=0;s<o;s++)t[e+s]^=a[s]}});return t.Decryptor=e,t}(),function(){function t(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0;for(n=0;n<8;n++){var o=t[n]+e[n],l=65535&o,s=o>>>16,r=((l*l>>>17)+l*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=r^c}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}var e=s,n=e.lib.StreamCipher,o=e.algo,l=[],i=[],a=[],r=o.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],l=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)t.call(this);for(i=0;i<8;i++)l[i]^=o[i+4&7];if(n){var a=n.words,s=a[0],r=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),_=c>>>16|4294901760&u,d=u<<16|65535&c;l[0]^=c,l[1]^=_,l[2]^=u,l[3]^=d,l[4]^=c,l[5]^=_,l[6]^=u,l[7]^=d;for(i=0;i<4;i++)t.call(this)}},_doProcessBlock:function(e,n){var o=this._X;t.call(this),l[0]=o[0]^o[5]>>>16^o[3]<<16,l[1]=o[2]^o[7]>>>16^o[5]<<16,l[2]=o[4]^o[1]>>>16^o[7]<<16,l[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)l[i]=16711935&(l[i]<<8|l[i]>>>24)|4278255360&(l[i]<<24|l[i]>>>8),e[n+i]^=l[i]},blockSize:4,ivSize:2});e.RabbitLegacy=n._createHelper(r)}(),s.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},s});var hexcase=0,b64pad="",chrsz=8;function hex_md5(t){return binl2hex(core_md5(str2binl(t),t.length*chrsz))}function b64_md5(t){return binl2b64(core_md5(str2binl(t),t.length*chrsz))}function str_md5(t){return binl2str(core_md5(str2binl(t),t.length*chrsz))}function hex_hmac_md5(t,e){return binl2hex(core_hmac_md5(t,e))}function b64_hmac_md5(t,e){return binl2b64(core_hmac_md5(t,e))}function str_hmac_md5(t,e){return binl2str(core_hmac_md5(t,e))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,o=-271733879,l=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,r=o,c=l,u=i;n=md5_ff(n,o,l,i,t[a+0],7,-680876936),i=md5_ff(i,n,o,l,t[a+1],12,-389564586),l=md5_ff(l,i,n,o,t[a+2],17,606105819),o=md5_ff(o,l,i,n,t[a+3],22,-1044525330),n=md5_ff(n,o,l,i,t[a+4],7,-176418897),i=md5_ff(i,n,o,l,t[a+5],12,1200080426),l=md5_ff(l,i,n,o,t[a+6],17,-1473231341),o=md5_ff(o,l,i,n,t[a+7],22,-45705983),n=md5_ff(n,o,l,i,t[a+8],7,1770035416),i=md5_ff(i,n,o,l,t[a+9],12,-1958414417),l=md5_ff(l,i,n,o,t[a+10],17,-42063),o=md5_ff(o,l,i,n,t[a+11],22,-1990404162),n=md5_ff(n,o,l,i,t[a+12],7,1804603682),i=md5_ff(i,n,o,l,t[a+13],12,-40341101),l=md5_ff(l,i,n,o,t[a+14],17,-1502002290),n=md5_gg(n,o=md5_ff(o,l,i,n,t[a+15],22,1236535329),l,i,t[a+1],5,-165796510),i=md5_gg(i,n,o,l,t[a+6],9,-1069501632),l=md5_gg(l,i,n,o,t[a+11],14,643717713),o=md5_gg(o,l,i,n,t[a+0],20,-373897302),n=md5_gg(n,o,l,i,t[a+5],5,-701558691),i=md5_gg(i,n,o,l,t[a+10],9,38016083),l=md5_gg(l,i,n,o,t[a+15],14,-660478335),o=md5_gg(o,l,i,n,t[a+4],20,-405537848),n=md5_gg(n,o,l,i,t[a+9],5,568446438),i=md5_gg(i,n,o,l,t[a+14],9,-1019803690),l=md5_gg(l,i,n,o,t[a+3],14,-187363961),o=md5_gg(o,l,i,n,t[a+8],20,1163531501),n=md5_gg(n,o,l,i,t[a+13],5,-1444681467),i=md5_gg(i,n,o,l,t[a+2],9,-51403784),l=md5_gg(l,i,n,o,t[a+7],14,1735328473),n=md5_hh(n,o=md5_gg(o,l,i,n,t[a+12],20,-1926607734),l,i,t[a+5],4,-378558),i=md5_hh(i,n,o,l,t[a+8],11,-2022574463),l=md5_hh(l,i,n,o,t[a+11],16,1839030562),o=md5_hh(o,l,i,n,t[a+14],23,-35309556),n=md5_hh(n,o,l,i,t[a+1],4,-1530992060),i=md5_hh(i,n,o,l,t[a+4],11,1272893353),l=md5_hh(l,i,n,o,t[a+7],16,-155497632),o=md5_hh(o,l,i,n,t[a+10],23,-1094730640),n=md5_hh(n,o,l,i,t[a+13],4,681279174),i=md5_hh(i,n,o,l,t[a+0],11,-358537222),l=md5_hh(l,i,n,o,t[a+3],16,-722521979),o=md5_hh(o,l,i,n,t[a+6],23,76029189),n=md5_hh(n,o,l,i,t[a+9],4,-640364487),i=md5_hh(i,n,o,l,t[a+12],11,-421815835),l=md5_hh(l,i,n,o,t[a+15],16,530742520),n=md5_ii(n,o=md5_hh(o,l,i,n,t[a+2],23,-995338651),l,i,t[a+0],6,-198630844),i=md5_ii(i,n,o,l,t[a+7],10,1126891415),l=md5_ii(l,i,n,o,t[a+14],15,-1416354905),o=md5_ii(o,l,i,n,t[a+5],21,-57434055),n=md5_ii(n,o,l,i,t[a+12],6,1700485571),i=md5_ii(i,n,o,l,t[a+3],10,-1894986606),l=md5_ii(l,i,n,o,t[a+10],15,-1051523),o=md5_ii(o,l,i,n,t[a+1],21,-2054922799),n=md5_ii(n,o,l,i,t[a+8],6,1873313359),i=md5_ii(i,n,o,l,t[a+15],10,-30611744),l=md5_ii(l,i,n,o,t[a+6],15,-1560198380),o=md5_ii(o,l,i,n,t[a+13],21,1309151649),n=md5_ii(n,o,l,i,t[a+4],6,-145523070),i=md5_ii(i,n,o,l,t[a+11],10,-1120210379),l=md5_ii(l,i,n,o,t[a+2],15,718787259),o=md5_ii(o,l,i,n,t[a+9],21,-343485551),n=safe_add(n,s),o=safe_add(o,r),l=safe_add(l,c),i=safe_add(i,u)}return Array(n,o,l,i)}function md5_cmn(t,e,n,o,l,i){return safe_add(bit_rol(safe_add(safe_add(e,t),safe_add(o,i)),l),n)}function md5_ff(t,e,n,o,l,i,a){return md5_cmn(e&n|~e&o,t,e,l,i,a)}function md5_gg(t,e,n,o,l,i,a){return md5_cmn(e&o|n&~o,t,e,l,i,a)}function md5_hh(t,e,n,o,l,i,a){return md5_cmn(e^n^o,t,e,l,i,a)}function md5_ii(t,e,n,o,l,i,a){return md5_cmn(n^(e|~o),t,e,l,i,a)}function core_hmac_md5(t,e){var n=str2binl(t);n.length>16&&(n=core_md5(n,t.length*chrsz));for(var o=Array(16),l=Array(16),i=0;i<16;i++)o[i]=909522486^n[i],l[i]=1549556828^n[i];var a=core_md5(o.concat(str2binl(e)),512+e.length*chrsz);return core_md5(l.concat(a),640)}function safe_add(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function bit_rol(t,e){return t<<e|t>>>32-e}function str2binl(t){for(var e=Array(),n=(1<<chrsz)-1,o=0;o<t.length*chrsz;o+=chrsz)e[o>>5]|=(t.charCodeAt(o/chrsz)&n)<<o%32;return e}function binl2str(t){for(var e="",n=(1<<chrsz)-1,o=0;o<32*t.length;o+=chrsz)e+=String.fromCharCode(t[o>>5]>>>o%32&n);return e}function binl2hex(t){for(var e=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<4*t.length;o++)n+=e.charAt(t[o>>2]>>o%4*8+4&15)+e.charAt(t[o>>2]>>o%4*8&15);return n}function binl2b64(t){for(var e="",n=0;n<4*t.length;n+=3)for(var o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255,l=0;l<4;l++)8*n+6*l>32*t.length?e+=b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-l)&63);return e}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.echarts={})}(this,function(t){"use strict";var e,n=2311,o=function(){return n++},l="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),o=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),l=t.match(/Edge\/([\d.]+)/),i=/micromessenger/i.test(t);return n&&(e.firefox=!0,e.version=n[1]),o&&(e.ie=!0,e.version=o[1]),l&&(e.edge=!0,e.version=l[1]),i&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent),i={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},a={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},s=Object.prototype.toString,r=Array.prototype,c=r.forEach,u=r.filter,_=r.slice,d=r.map,h=r.reduce,y={};function p(t,n){"createCanvas"===t&&(e=null),y[t]=n}function m(t){if(null==t||"object"!=typeof t)return t;var e=t,n=s.call(t);if("[object Array]"===n){if(!J(t)){e=[];for(var o=0,l=t.length;o<l;o++)e[o]=m(t[o])}}else if(a[n]){if(!J(t)){var r=t.constructor;if(t.constructor.from)e=r.from(t);else for(e=new r(t.length),o=0,l=t.length;o<l;o++)e[o]=m(t[o])}}else if(!i[n]&&!J(t)&&!H(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=m(t[c]));return e}function k(t,e,n){if(!L(e)||!L(t))return n?m(e):t;for(var o in e)if(e.hasOwnProperty(o)){var l=t[o],i=e[o];!L(i)||!L(l)||P(i)||P(l)||H(i)||H(l)||U(i)||U(l)||J(i)||J(l)?!n&&o in t||(t[o]=m(e[o])):k(l,i,n)}return t}function g(t,e){for(var n=t[0],o=1,l=t.length;o<l;o++)n=k(n,t[o],e);return n}function f(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function b(t,e,n){for(var o in e)e.hasOwnProperty(o)&&(n?null!=e[o]:null==t[o])&&(t[o]=e[o]);return t}function v(){return y.createCanvas()}function T(){return e=e||v().getContext("2d")}function E(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n}return-1}function B(t,e){var n=t.prototype;function o(){}for(var l in o.prototype=e.prototype,t.prototype=new o,n)n.hasOwnProperty(l)&&(t.prototype[l]=n[l]);(t.prototype.constructor=t).superClass=e}function I(t,e,n){b(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function R(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function O(t,e,n){if(t&&e)if(t.forEach&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length)for(var o=0,l=t.length;o<l;o++)e.call(n,t[o],o,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function C(t,e,n){if(t&&e){if(t.map&&t.map===d)return t.map(e,n);for(var o=[],l=0,i=t.length;l<i;l++)o.push(e.call(n,t[l],l,t));return o}}function N(t,e,n,o){if(t&&e){if(t.reduce&&t.reduce===h)return t.reduce(e,n,o);for(var l=0,i=t.length;l<i;l++)n=e.call(o,n,t[l],l,t);return n}}function w(t,e,n){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,n);for(var o=[],l=0,i=t.length;l<i;l++)e.call(n,t[l],l,t)&&o.push(t[l]);return o}}function A(t,e,n){if(t&&e)for(var o=0,l=t.length;o<l;o++)if(e.call(n,t[o],o,t))return t[o]}function M(t,e){var n=_.call(arguments,2);return function(){return t.apply(e,n.concat(_.call(arguments)))}}function S(t){var e=_.call(arguments,1);return function(){return t.apply(this,e.concat(_.call(arguments)))}}function P(t){return"[object Array]"===s.call(t)}function x(t){return"function"==typeof t}function D(t){return"[object String]"===s.call(t)}function L(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function U(t){return!!i[s.call(t)]}function F(t){return!!a[s.call(t)]}function H(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function V(t){return t!=t}function G(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function j(t,e){return null!=t?t:e}function W(t,e,n){return null!=t?t:null!=e?e:n}function K(){return Function.call.apply(_,arguments)}function Y(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function X(t,e){if(!t)throw new Error(e)}function $(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}y.createCanvas=function(){return document.createElement("canvas")};var z="__ec_primitive__";function q(t){t[z]=!0}function J(t){return t[z]}function Z(t){var e=P(t);this.data={};var n=this;function o(t,o){e?n.set(t,o):n.set(o,t)}t instanceof Z?t.each(o):t&&O(t,o)}function Q(t){return new Z(t)}function tt(t,e){for(var n=new t.constructor(t.length+e.length),o=0;o<t.length;o++)n[o]=t[o];var l=t.length;for(o=0;o<e.length;o++)n[o+l]=e[o];return n}function et(){}Z.prototype={constructor:Z,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=M(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var nt=(Object.freeze||Object)({$override:p,clone:m,merge:k,mergeAll:g,extend:f,defaults:b,createCanvas:v,getContext:T,indexOf:E,inherits:B,mixin:I,isArrayLike:R,each:O,map:C,reduce:N,filter:w,find:A,bind:M,curry:S,isArray:P,isFunction:x,isString:D,isObject:L,isBuiltInObject:U,isTypedArray:F,isDom:H,eqNaN:V,retrieve:G,retrieve2:j,retrieve3:W,slice:K,normalizeCssArray:Y,assert:X,trim:$,setAsPrimitive:q,isPrimitive:J,createHashMap:Q,concatArray:tt,noop:et}),ot="undefined"==typeof Float32Array?Array:Float32Array;function lt(t,e){var n=new ot(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function it(t,e){return t[0]=e[0],t[1]=e[1],t}function at(t){var e=new ot(2);return e[0]=t[0],e[1]=t[1],e}function st(t,e,n){return t[0]=e,t[1]=n,t}function rt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ct(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function _t(t){return Math.sqrt(ht(t))}var dt=_t;function ht(t){return t[0]*t[0]+t[1]*t[1]}var yt=ht;function pt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mt(t,e){var n=_t(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function kt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var gt=kt;function ft(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var bt=ft;function vt(t,e,n,o){return t[0]=e[0]+o*(n[0]-e[0]),t[1]=e[1]+o*(n[1]-e[1]),t}function Tt(t,e,n){var o=e[0],l=e[1];return t[0]=n[0]*o+n[2]*l+n[4],t[1]=n[1]*o+n[3]*l+n[5],t}function Et(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Bt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var It=(Object.freeze||Object)({create:lt,copy:it,clone:at,set:st,add:rt,scaleAndAdd:ct,sub:ut,len:_t,length:dt,lenSquare:ht,lengthSquare:yt,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:pt,normalize:mt,distance:kt,dist:gt,distanceSquare:ft,distSquare:bt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:vt,applyTransform:Tt,min:Et,max:Bt});function Rt(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Ot(t,e){return{target:t,topTarget:e&&e.topTarget}}Rt.prototype={constructor:Rt,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(Ot(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,o=t.offsetY,l=n-this._x,i=o-this._y;this._x=n,this._y=o,e.drift(l,i,t),this.dispatchToElement(Ot(e,t),"drag",t.event);var a=this.findHover(n,o,e).target,s=this._dropTarget;e!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(Ot(s,t),"dragleave",t.event),a&&a!==s&&this.dispatchToElement(Ot(a,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(Ot(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(Ot(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var Ct=Array.prototype.slice,Nt=function(t){this._$handlers={},this._$eventProcessor=t};function wt(t,e,n,o,l,i){var a=t._$handlers;if("function"==typeof n&&(l=o,o=n,n=null),!o||!e)return t;n=function(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}(t,n),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===o)return t;var r={h:o,one:i,query:n,ctx:l||t,callAtLast:o.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,r):a[e].push(r),t}Nt.prototype={constructor:Nt,one:function(t,e,n,o){return wt(this,t,e,n,o,!0)},on:function(t,e,n,o){return wt(this,t,e,n,o,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var o=[],l=0,i=n[t].length;l<i;l++)n[t][l].h!==e&&o.push(n[t][l]);n[t]=o}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var o=arguments,l=o.length;3<l&&(o=Ct.call(o,1));for(var i=e.length,a=0;a<i;){var s=e[a];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))a++;else{switch(l){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,o[1]);break;case 3:s.h.call(s.ctx,o[1],o[2]);break;default:s.h.apply(s.ctx,o)}s.one?(e.splice(a,1),i--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var o=arguments,l=o.length;4<l&&(o=Ct.call(o,1,o.length-1));for(var i=o[o.length-1],a=e.length,s=0;s<a;){var r=e[s];if(n&&n.filter&&null!=r.query&&!n.filter(t,r.query))s++;else{switch(l){case 1:r.h.call(i);break;case 2:r.h.call(i,o[1]);break;case 3:r.h.call(i,o[1],o[2]);break;default:r.h.apply(i,o)}r.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var At=Math.log(2);function Mt(t,e,n,o,l,i){var a=o+"-"+l,s=t.length;if(i.hasOwnProperty(a))return i[a];if(1===e){var r=Math.round(Math.log((1<<s)-1&~l)/At);return t[n][r]}for(var c=o|1<<n,u=n+1;o&1<<u;)u++;for(var _=0,d=0,h=0;d<s;d++){var y=1<<d;y&l||(_+=(h%2?-1:1)*t[n][d]*Mt(t,e-1,u,c,l|y,i),h++)}return i[a]=_}function St(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],o={},l=Mt(n,8,0,0,0,o);if(0!==l){for(var i=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==i[s]&&(i[s]=0),i[s]+=((a+s)%2?-1:1)*Mt(n,7,0===a?1:0,1<<a,1<<s,o)/l*e[a];return function(t,e,n){var o=e*i[6]+n*i[7]+1;t[0]=(e*i[0]+n*i[1]+i[2])/o,t[1]=(e*i[3]+n*i[4]+i[5])/o}}}var Pt="___zrEVENTSAVED",xt=[];function Dt(t,e,n,o,i){if(e.getBoundingClientRect&&l.domSupported&&!Lt(e)){var a=e[Pt]||(e[Pt]={}),s=function(t,e,n){for(var o=n?"invTrans":"trans",l=e[o],i=e.srcCoords,a=!0,s=[],r=[],c=0;c<4;c++){var u=t[c].getBoundingClientRect(),_=2*c,d=u.left,h=u.top;s.push(d,h),a=a&&i&&d===i[_]&&h===i[1+_],r.push(t[c].offsetLeft,t[c].offsetTop)}return a&&l?l:(e.srcCoords=s,e[o]=n?St(r,s):St(s,r))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var o=["left","right"],l=["top","bottom"],i=0;i<4;i++){var a=document.createElement("div"),s=i%2,r=(i>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[s]+":0",l[r]+":0",o[1-s]+":auto",l[1-r]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(e,a),a,i);if(s)return s(t,n,o),!0}return!1}function Lt(t){return"CANVAS"===t.nodeName.toUpperCase()}var Ut="undefined"!=typeof window&&!!window.addEventListener,Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ht=[];function Vt(t,e,n,o){return n=n||{},o||!l.canvasSupported?Gt(t,e,n):l.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Gt(t,e,n),n}function Gt(t,e,n){if(l.domSupported&&t.getBoundingClientRect){var o=e.clientX,i=e.clientY;if(Lt(t)){var a=t.getBoundingClientRect();return n.zrX=o-a.left,void(n.zrY=i-a.top)}if(Dt(Ht,t,o,i))return n.zrX=Ht[0],void(n.zrY=Ht[1])}n.zrX=n.zrY=0}function jt(t){return t||window.event}function Wt(t,e,n){if(null!=(e=jt(e)).zrX)return e;var o=e.type;if(o&&0<=o.indexOf("touch")){var l="touchend"!==o?e.targetTouches[0]:e.changedTouches[0];l&&Vt(t,l,e,n)}else Vt(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var i=e.button;return null==e.which&&void 0!==i&&Ft.test(e.type)&&(e.which=1&i?1:2&i?3:4&i?2:0),e}function Kt(t,e,n,o){Ut?t.addEventListener(e,n,o):t.attachEvent("on"+e,n)}var Yt=Ut?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function Xt(t){return 2===t.which||3===t.which}function $t(){this._track=[]}function zt(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}$t.prototype={constructor:$t,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var o=t.touches;if(o){for(var l={points:[],touches:[],target:e,event:t},i=0,a=o.length;i<a;i++){var s=o[i],r=Vt(n,s,{});l.points.push([r.zrX,r.zrY]),l.touches.push(s)}this._track.push(l)}},_recognize:function(t){for(var e in qt)if(qt.hasOwnProperty(e)){var n=qt[e](this._track,t);if(n)return n}}};var qt={pinch:function(t,e){var n=t.length;if(n){var o=(t[n-1]||{}).points,l=(t[n-2]||{}).points||o;if(l&&1<l.length&&o&&1<o.length){var i=zt(o)/zt(l);isFinite(i)||(i=1),e.pinchScale=i;var a=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(o);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}},Jt="silent";function Zt(){Yt(this.event)}function Qt(){}function te(t,e,n,o){Nt.call(this),this.storage=t,this.painter=e,this.painterRoot=o,n=n||new Qt,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,Rt.call(this),this.setHandlerProxy(n)}Qt.prototype.dispose=function(){};var ee=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function ne(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var o,l=t;l;){if(l.clipPath&&!l.clipPath.contain(e,n))return!1;l.silent&&(o=!0),l=l.parent}return!o||Jt}return!1}function oe(t,e,n){var o=t.painter;return e<0||e>o.getWidth()||n<0||n>o.getHeight()}te.prototype={constructor:te,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(O(ee,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,o=oe(this,e,n),l=this._hovered,i=l.target;i&&!i.__zr&&(i=(l=this.findHover(l.x,l.y)).target);var a=this._hovered=o?{x:e,y:n}:this.findHover(e,n),s=a.target,r=this.proxy;r.setCursor&&r.setCursor(s?s.cursor:"default"),i&&s!==i&&this.dispatchToElement(l,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==i&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&(n||this.trigger("globalout",{type:"globalout",event:t}))},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var o=(t=t||{}).target;if(!o||!o.silent){for(var l="on"+e,i=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Zt}}(e,t,n);o&&(o[l]&&(i.cancelBubble=o[l].call(o,i)),o.trigger(e,i),o=o.parent,!i.cancelBubble););i.cancelBubble||(this.trigger(e,i),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[l]&&t[l].call(t,i),t.trigger&&t.trigger(e,i)}))}},findHover:function(t,e,n){for(var o=this.storage.getDisplayList(),l={x:t,y:e},i=o.length-1;0<=i;i--){var a;if(o[i]!==n&&!o[i].ignore&&(a=ne(o[i],t,e))&&(l.topTarget||(l.topTarget=o[i]),a!==Jt)){l.target=o[i];break}}return l},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new $t);var n=this._gestureMgr;"start"===e&&n.clear();var o=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),o){var l=o.type;t.gestureEvent=l,this.dispatchToElement({target:o.target},l,o.event)}}},O(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){te.prototype[t]=function(e){var n,o,l=e.zrX,i=e.zrY,a=oe(this,l,i);if("mouseup"===t&&a||(o=(n=this.findHover(l,i)).target),"mousedown"===t)this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if("mouseup"===t)this._upEl=o;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||4<gt(this._downPoint,[e.zrX,e.zrY]))return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),I(te,Nt),I(te,Rt);var le="undefined"==typeof Float32Array?Array:Float32Array;function ie(){var t=new le(6);return ae(t),t}function ae(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function se(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function re(t,e,n){var o=e[0]*n[0]+e[2]*n[1],l=e[1]*n[0]+e[3]*n[1],i=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],r=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=o,t[1]=l,t[2]=i,t[3]=a,t[4]=s,t[5]=r,t}function ce(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function ue(t,e,n){var o=e[0],l=e[2],i=e[4],a=e[1],s=e[3],r=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=o*u+a*c,t[1]=-o*c+a*u,t[2]=l*u+s*c,t[3]=-l*c+u*s,t[4]=u*i+c*r,t[5]=u*r-c*i,t}function _e(t,e,n){var o=n[0],l=n[1];return t[0]=e[0]*o,t[1]=e[1]*l,t[2]=e[2]*o,t[3]=e[3]*l,t[4]=e[4]*o,t[5]=e[5]*l,t}function de(t,e){var n=e[0],o=e[2],l=e[4],i=e[1],a=e[3],s=e[5],r=n*a-i*o;return r?(r=1/r,t[0]=a*r,t[1]=-i*r,t[2]=-o*r,t[3]=n*r,t[4]=(o*s-a*l)*r,t[5]=(i*l-n*s)*r,t):null}function he(t){var e=ie();return se(e,t),e}var ye=(Object.freeze||Object)({create:ie,identity:ae,copy:se,mul:re,translate:ce,rotate:ue,scale:_e,invert:de,clone:he}),pe=ae;function me(t){return 5e-5<t||t<-5e-5}var ke=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},ge=ke.prototype;ge.transform=null,ge.needLocalTransform=function(){return me(this.rotation)||me(this.position[0])||me(this.position[1])||me(this.scale[0]-1)||me(this.scale[1]-1)};var fe=[];ge.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),o=this.transform;if(n||e){o=o||ie(),n?this.getLocalTransform(o):pe(o),e&&(n?re(o,t.transform,o):se(o,t.transform)),this.transform=o;var l=this.globalScaleRatio;if(null!=l&&1!==l){this.getGlobalScale(fe);var i=fe[0]<0?-1:1,a=fe[1]<0?-1:1,s=((fe[0]-i)*l+i)/fe[0]||0,r=((fe[1]-a)*l+a)/fe[1]||0;o[0]*=s,o[1]*=s,o[2]*=r,o[3]*=r}this.invTransform=this.invTransform||ie(),de(this.invTransform,o)}else o&&pe(o)},ge.getLocalTransform=function(t){return ke.getLocalTransform(this,t)},ge.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},ge.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var be=[],ve=ie();ge.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],o=this.position,l=this.scale;me(e-1)&&(e=Math.sqrt(e)),me(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),o[0]=t[4],o[1]=t[5],l[0]=e,l[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},ge.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(re(be,t.invTransform,e),e=be);var n=this.origin;n&&(n[0]||n[1])&&(ve[4]=n[0],ve[5]=n[1],re(be,e,ve),be[4]-=n[0],be[5]-=n[1],e=be),this.setLocalTransform(e)}},ge.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},ge.transformCoordToLocal=function(t,e){var n=[t,e],o=this.invTransform;return o&&Tt(n,n,o),n},ge.transformCoordToGlobal=function(t,e){var n=[t,e],o=this.transform;return o&&Tt(n,n,o),n},ke.getLocalTransform=function(t,e){pe(e=e||[]);var n=t.origin,o=t.scale||[1,1],l=t.rotation||0,i=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),_e(e,e,o),l&&ue(e,e,l),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=i[0],e[5]+=i[1],e};var Te={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-Te.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Te.bounceIn(2*t):.5*Te.bounceOut(2*t-1)+.5}};function Ee(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function Be(){this.head=null,this.tail=null,this._len=0}Ee.prototype={constructor:Ee,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var o=this.easing,l="string"==typeof o?Te[o]:o,i="function"==typeof l?l(n):n;return this.fire("frame",i),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Ie=Be.prototype;function Re(t){this._list=new Be,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null}Ie.insert=function(t){var e=new Oe(t);return this.insertEntry(e),e},Ie.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Ie.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Ie.len=function(){return this._len},Ie.clear=function(){this.head=this.tail=null,this._len=0};var Oe=function(t){this.value=t,this.next,this.prev},Ce=Re.prototype;Ce.put=function(t,e){var n=this._list,o=this._map,l=null;if(null==o[t]){var i=n.len(),a=this._lastRemovedEntry;if(i>=this._maxSize&&0<i){var s=n.head;n.remove(s),delete o[s.key],l=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new Oe(e),a.key=t,n.insertEntry(a),o[t]=a}return l},Ce.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},Ce.clear=function(){this._list.clear(),this._map={}};var Ne={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function we(t){return(t=Math.round(t))<0?0:255<t?255:t}function Ae(t){return t<0?0:1<t?1:t}function Me(t){return t.length&&"%"===t.charAt(t.length-1)?we(parseFloat(t)/100*255):we(parseInt(t,10))}function Se(t){return t.length&&"%"===t.charAt(t.length-1)?Ae(parseFloat(t)/100):Ae(parseFloat(t))}function Pe(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function xe(t,e,n){return t+(e-t)*n}function De(t,e,n,o,l){return t[0]=e,t[1]=n,t[2]=o,t[3]=l,t}function Le(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Ue=new Re(20),Fe=null;function He(t,e){Fe&&Le(Fe,e),Fe=Ue.put(t,Fe||e.slice())}function Ve(t,e){if(t){e=e||[];var n=Ue.get(t);if(n)return Le(e,n);var o,l=(t+="").replace(/ /g,"").toLowerCase();if(l in Ne)return Le(e,Ne[l]),He(t,e),e;if("#"===l.charAt(0))return 4===l.length?0<=(o=parseInt(l.substr(1),16))&&o<=4095?(De(e,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1),He(t,e),e):void De(e,0,0,0,1):7===l.length?0<=(o=parseInt(l.substr(1),16))&&o<=16777215?(De(e,(16711680&o)>>16,(65280&o)>>8,255&o,1),He(t,e),e):void De(e,0,0,0,1):void 0;var i=l.indexOf("("),a=l.indexOf(")");if(-1!==i&&a+1===l.length){var s=l.substr(0,i),r=l.substr(i+1,a-(i+1)).split(","),c=1;switch(s){case"rgba":if(4!==r.length)return void De(e,0,0,0,1);c=Se(r.pop());case"rgb":return 3!==r.length?void De(e,0,0,0,1):(De(e,Me(r[0]),Me(r[1]),Me(r[2]),c),He(t,e),e);case"hsla":return 4!==r.length?void De(e,0,0,0,1):(r[3]=Se(r[3]),Ge(r,e),He(t,e),e);case"hsl":return 3!==r.length?void De(e,0,0,0,1):(Ge(r,e),He(t,e),e);default:return}}De(e,0,0,0,1)}}function Ge(t,e){var n=(parseFloat(t[0])%360+360)%360/360,o=Se(t[1]),l=Se(t[2]),i=l<=.5?l*(o+1):l+o-l*o,a=2*l-i;return De(e=e||[],we(255*Pe(a,i,n+1/3)),we(255*Pe(a,i,n)),we(255*Pe(a,i,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function je(t,e){var n=Ve(t);if(n){for(var o=0;o<3;o++)n[o]=e<0?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0,255<n[o]?n[o]=255:t[o]<0&&(n[o]=0);return Je(n,4===n.length?"rgba":"rgb")}}function We(t){var e=Ve(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function Ke(t,e,n){if(e&&e.length&&0<=t&&t<=1){n=n||[];var o=t*(e.length-1),l=Math.floor(o),i=Math.ceil(o),a=e[l],s=e[i],r=o-l;return n[0]=we(xe(a[0],s[0],r)),n[1]=we(xe(a[1],s[1],r)),n[2]=we(xe(a[2],s[2],r)),n[3]=Ae(xe(a[3],s[3],r)),n}}var Ye=Ke;function Xe(t,e,n){if(e&&e.length&&0<=t&&t<=1){var o=t*(e.length-1),l=Math.floor(o),i=Math.ceil(o),a=Ve(e[l]),s=Ve(e[i]),r=o-l,c=Je([we(xe(a[0],s[0],r)),we(xe(a[1],s[1],r)),we(xe(a[2],s[2],r)),Ae(xe(a[3],s[3],r))],"rgba");return n?{color:c,leftIndex:l,rightIndex:i,value:o}:c}}var $e=Xe;function ze(t,e,n,o){if(t=Ve(t))return t=function(t){if(t){var e,n,o=t[0]/255,l=t[1]/255,i=t[2]/255,a=Math.min(o,l,i),s=Math.max(o,l,i),r=s-a,c=(s+a)/2;if(0==r)n=e=0;else{n=c<.5?r/(s+a):r/(2-s-a);var u=((s-o)/6+r/2)/r,_=((s-l)/6+r/2)/r,d=((s-i)/6+r/2)/r;o===s?e=d-_:l===s?e=1/3+u-d:i===s&&(e=2/3+_-u),e<0&&(e+=1),1<e&&(e-=1)}var h=[360*e,n,c];return null!=t[3]&&h.push(t[3]),h}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:360<t?360:t}(e)),null!=n&&(t[1]=Se(n)),null!=o&&(t[2]=Se(o)),Je(Ge(t),"rgba")}function qe(t,e){if((t=Ve(t))&&null!=e)return t[3]=Ae(e),Je(t,"rgba")}function Je(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var Ze=(Object.freeze||Object)({parse:Ve,lift:je,toHex:We,fastLerp:Ke,fastMapToColor:Ye,lerp:Xe,mapToColor:$e,modifyHSL:ze,modifyAlpha:qe,stringify:Je}),Qe=Array.prototype.slice;function tn(t,e){return t[e]}function en(t,e,n){t[e]=n}function nn(t,e,n){return(e-t)*n+t}function on(t,e,n){return.5<n?e:t}function ln(t,e,n,o,l){var i=t.length;if(1===l)for(var a=0;a<i;a++)o[a]=nn(t[a],e[a],n);else{var s=i&&t[0].length;for(a=0;a<i;a++)for(var r=0;r<s;r++)o[a][r]=nn(t[a][r],e[a][r],n)}}function an(t,e,n){var o=t.length,l=e.length;if(o!==l)if(l<o)t.length=l;else for(var i=o;i<l;i++)t.push(1===n?e[i]:Qe.call(e[i]));var a=t[0]&&t[0].length;for(i=0;i<t.length;i++)if(1===n)isNaN(t[i])&&(t[i]=e[i]);else for(var s=0;s<a;s++)isNaN(t[i][s])&&(t[i][s]=e[i][s])}function sn(t,e,n){if(t===e)return!0;var o=t.length;if(o!==e.length)return!1;if(1===n){for(var l=0;l<o;l++)if(t[l]!==e[l])return!1}else{var i=t[0].length;for(l=0;l<o;l++)for(var a=0;a<i;a++)if(t[l][a]!==e[l][a])return!1}return!0}function rn(t,e,n,o,l,i,a,s,r){var c=t.length;if(1===r)for(var u=0;u<c;u++)s[u]=cn(t[u],e[u],n[u],o[u],l,i,a);else{var _=t[0].length;for(u=0;u<c;u++)for(var d=0;d<_;d++)s[u][d]=cn(t[u][d],e[u][d],n[u][d],o[u][d],l,i,a)}}function cn(t,e,n,o,l,i,a){var s=.5*(n-t),r=.5*(o-e);return(2*(e-n)+s+r)*a+(-3*(e-n)-2*s-r)*i+s*l+e}function un(t){if(R(t)){var e=t.length;if(R(t[0])){for(var n=[],o=0;o<e;o++)n.push(Qe.call(t[o]));return n}return Qe.call(t)}return t}function _n(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function dn(t,e,n,o,l,i){var a=t._getter,s=t._setter,r="spline"===e,c=o.length;if(c){var u,_=R(o[0].value),d=!1,h=!1,y=_?function(t){var e=t[t.length-1].value;return R(e&&e[0])?2:1}(o):0;o.sort(function(t,e){return t.time-e.time}),u=o[c-1].time;for(var p=[],m=[],k=o[0].value,g=!0,f=0;f<c;f++){p.push(o[f].time/u);var b=o[f].value;if(_&&sn(b,k,y)||!_&&b===k||(g=!1),"string"==typeof(k=b)){var v=Ve(b);v?(b=v,d=!0):h=!0}m.push(b)}if(i||!g){var T=m[c-1];for(f=0;f<c-1;f++)_?an(m[f],T,y):!isNaN(m[f])||isNaN(T)||h||d||(m[f]=T);_&&an(a(t._target,l),T,y);var E,B,I,O,C,N=0,w=0;if(d)var A=[0,0,0,0];var M=new Ee({target:t._target,life:u,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<w){for(n=Math.min(N+1,c-1);0<=n&&!(p[n]<=e);n--);n=Math.min(n,c-2)}else{for(n=N;n<c&&!(p[n]>e);n++);n=Math.min(n-1,c-2)}w=e;var o=p[(N=n)+1]-p[n];if(0!=o)if(E=(e-p[n])/o,r)if(I=m[n],B=m[0===n?n:n-1],O=m[c-2<n?c-1:n+1],C=m[c-3<n?c-1:n+2],_)rn(B,I,O,C,E,E*E,E*E*E,a(t,l),y);else{if(d)i=rn(B,I,O,C,E,E*E,E*E*E,A,1),i=_n(A);else{if(h)return on(I,O,E);i=cn(B,I,O,C,E,E*E,E*E*E)}s(t,l,i)}else if(_)ln(m[n],m[n+1],E,a(t,l),y);else{var i;if(d)ln(m[n],m[n+1],E,A,1),i=_n(A);else{if(h)return on(m[n],m[n+1],E);i=nn(m[n],m[n+1],E)}s(t,l,i)}},ondestroy:n});return e&&"spline"!==e&&(M.easing=e),M}}}function hn(t,e,n,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||tn,this._setter=o||en,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}hn.prototype={when:function(t,e){var n=this._tracks;for(var o in e)if(e.hasOwnProperty(o)){if(!n[o]){n[o]=[];var l=this._getter(this._target,o);if(null==l)continue;0!==t&&n[o].push({time:0,value:un(l)})}n[o].push({time:t,value:e[o]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){function n(){--i||l._doneCallback()}var o,l=this,i=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=dn(this,t,n,this._tracks[a],a,e);s&&(this._clipList.push(s),i++,this.animation&&this.animation.addClip(s),o=s)}if(o){var r=o.onframe;o.onframe=function(t,e){r(t,e);for(var n=0;n<l._onframeList.length;n++)l._onframeList[n](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,o=0;o<e.length;o++){var l=e[o];t&&l.onframe(this._target,1),n&&n.removeClip(l)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var yn=1;"undefined"!=typeof window&&(yn=Math.max(window.devicePixelRatio||1,1));var pn=yn;function mn(){this.animators=[]}var kn=function(){};function gn(t,e,n,o,l,i,a,s){D(o)?(i=l,l=o,o=0):x(l)?(i=l,l="linear",o=0):x(o)?(i=o,o=0):n=x(n)?(i=n,500):n||500,t.stopAnimation(),function t(e,n,o,l,i,a,s){var r={},c=0;for(var u in l)l.hasOwnProperty(u)&&(null!=o[u]?L(l[u])&&!R(l[u])?t(e,n?n+"."+u:u,o[u],l[u],i,a,s):(s?(r[u]=o[u],fn(e,n,u,l[u])):r[u]=l[u],c++):null==l[u]||s||fn(e,n,u,l[u]));0<c&&e.animate(n,!1).when(null==i?500:i,r).delay(a||0)}(t,"",t,e,n,o,s);var r=t.animators.slice(),c=r.length;function u(){--c||i&&i()}c||i&&i();for(var _=0;_<r.length;_++)r[_].done(u).start(l,a)}function fn(t,e,n,o){if(e){var l={};l[e]={},l[e][n]=o,t.attr(l)}else t.attr(n,o)}mn.prototype={constructor:mn,animate:function(t,e){var n,o=!1,l=this,i=this.__zr;if(t){var a=t.split("."),s=l;o="shape"===a[0];for(var r=0,c=a.length;r<c;r++)s=s&&s[a[r]];s&&(n=s)}else n=l;if(n){var u=l.animators,_=new hn(n,e);return _.during(function(t){l.dirty(o)}).done(function(){u.splice(E(u,_),1)}),u.push(_),i&&i.animation.addAnimator(_),_}kn('Property "'+t+'" is not existed in element '+l.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,o=0;o<n;o++)e[o].stop(t);return e.length=0,this},animateTo:function(t,e,n,o,l,i){gn(this,t,e,n,o,l,i)},animateFrom:function(t,e,n,o,l,i){gn(this,t,e,n,o,l,i,!0)}};var bn=function(t){ke.call(this,t),Nt.call(this,t),mn.call(this,t),this.id=t.id||o()};bn.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];(n=n||(this[t]=[]))[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(L(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},I(bn,mn),I(bn,ke),I(bn,Nt);var vn,Tn,En,Bn,In=Tt,Rn=Math.min,On=Math.max;function Cn(t,e,n,o){n<0&&(t+=n,n=-n),o<0&&(e+=o,o=-o),this.x=t,this.y=e,this.width=n,this.height=o}Cn.prototype={constructor:Cn,union:function(t){var e=Rn(t.x,this.x),n=Rn(t.y,this.y);this.width=On(t.x+t.width,this.x+this.width)-e,this.height=On(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(vn=[],Tn=[],En=[],Bn=[],function(t){if(t){vn[0]=En[0]=this.x,vn[1]=Bn[1]=this.y,Tn[0]=Bn[0]=this.x+this.width,Tn[1]=En[1]=this.y+this.height,In(vn,vn,t),In(Tn,Tn,t),In(En,En,t),In(Bn,Bn,t),this.x=Rn(vn[0],Tn[0],En[0],Bn[0]),this.y=Rn(vn[1],Tn[1],En[1],Bn[1]);var e=On(vn[0],Tn[0],En[0],Bn[0]),n=On(vn[1],Tn[1],En[1],Bn[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,o=ie();return ce(o,o,[-this.x,-this.y]),_e(o,o,[e,n]),ce(o,o,[t.x,t.y]),o},intersect:function(t){if(!t)return!1;t instanceof Cn||(t=Cn.create(t));var e=this,n=e.x,o=e.x+e.width,l=e.y,i=e.y+e.height,a=t.x,s=t.x+t.width,r=t.y,c=t.y+t.height;return!(o<a||s<n||i<r||c<l)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new Cn(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Cn.create=function(t){return new Cn(t.x,t.y,t.width,t.height)};var Nn=function(t){for(var e in bn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};Nn.prototype={constructor:Nn,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,o=n.indexOf(e);0<=o&&(n.splice(o,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Nn&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,o=this._children,l=E(o,t);return l<0||(o.splice(l,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof Nn&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,o=this.__storage;for(e=0;e<n.length;e++)t=n[e],o&&(o.delFromStorage(t),t instanceof Nn&&t.delChildrenFromStorage(o)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,o=0;o<n.length;o++){var l=n[o];t.call(e,l,o)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var o=this._children[n];t.call(e,o),"group"===o.type&&o.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof Nn&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof Nn&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new Cn(0,0,0,0),o=t||this._children,l=[],i=0;i<o.length;i++){var a=o[i];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),r=a.getLocalTransform(l);r?(n.copy(s),n.applyTransform(r),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},B(Nn,bn);function wn(t,e,n,o){var l=e+1;if(l===n)return 1;if(o(t[l++],t[e])<0){for(;l<n&&o(t[l],t[l-1])<0;)l++;!function(t,e,n){for(n--;e<n;){var o=t[e];t[e++]=t[n],t[n--]=o}}(t,e,l)}else for(;l<n&&0<=o(t[l],t[l-1]);)l++;return l-e}function An(t,e,n,o,l){for(o===e&&o++;o<n;o++){for(var i,a=t[o],s=e,r=o;s<r;)l(a,t[i=s+r>>>1])<0?r=i:s=1+i;var c=o-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<c;)t[s+c]=t[s+c-1],c--}t[s]=a}}function Mn(t,e,n,o,l,i){var a=0,s=0,r=1;if(0<i(t,e[n+l])){for(s=o-l;r<s&&0<i(t,e[n+l+r]);)(r=1+((a=r)<<1))<=0&&(r=s);s<r&&(r=s),a+=l,r+=l}else{for(s=l+1;r<s&&i(t,e[n+l-r])<=0;)(r=1+((a=r)<<1))<=0&&(r=s);s<r&&(r=s);var c=a;a=l-r,r=l-c}for(a++;a<r;){var u=a+(r-a>>>1);0<i(t,e[n+u])?a=u+1:r=u}return r}function Sn(t,e,n,o,l,i){var a=0,s=0,r=1;if(i(t,e[n+l])<0){for(s=l+1;r<s&&i(t,e[n+l-r])<0;)(r=1+((a=r)<<1))<=0&&(r=s);s<r&&(r=s);var c=a;a=l-r,r=l-c}else{for(s=o-l;r<s&&0<=i(t,e[n+l+r]);)(r=1+((a=r)<<1))<=0&&(r=s);s<r&&(r=s),a+=l,r+=l}for(a++;a<r;){var u=a+(r-a>>>1);i(t,e[n+u])<0?r=u:a=u+1}return r}function Pn(t,e){var n,o,l=7,i=0,a=[];function s(s){var r=n[s],c=o[s],u=n[s+1],_=o[s+1];o[s]=c+_,s===i-3&&(n[s+1]=n[s+2],o[s+1]=o[s+2]),i--;var d=Sn(t[u],t,r,c,0,e);r+=d,0!=(c-=d)&&0!==(_=Mn(t[r+c-1],t,u,_,_-1,e))&&(c<=_?function(n,o,i,s){var r=0;for(r=0;r<o;r++)a[r]=t[n+r];var c=0,u=i,_=n;if(t[_++]=t[u++],0!=--s){if(1===o){for(r=0;r<s;r++)t[_+r]=t[u+r];return t[_+s]=a[c]}for(var d,h,y,p=l;;){h=d=0,y=!1;do{if(e(t[u],a[c])<0){if(t[_++]=t[u++],h++,(d=0)==--s){y=!0;break}}else if(t[_++]=a[c++],d++,h=0,1==--o){y=!0;break}}while((d|h)<p);if(y)break;do{if(0!==(d=Sn(t[u],a,c,o,0,e))){for(r=0;r<d;r++)t[_+r]=a[c+r];if(_+=d,c+=d,(o-=d)<=1){y=!0;break}}if(t[_++]=t[u++],0==--s){y=!0;break}if(0!==(h=Mn(a[c],t,u,s,0,e))){for(r=0;r<h;r++)t[_+r]=t[u+r];if(_+=h,u+=h,0==(s-=h)){y=!0;break}}if(t[_++]=a[c++],1==--o){y=!0;break}p--}while(7<=d||7<=h);if(y)break;p<0&&(p=0),p+=2}if((l=p)<1&&(l=1),1===o){for(r=0;r<s;r++)t[_+r]=t[u+r];t[_+s]=a[c]}else{if(0===o)throw new Error;for(r=0;r<o;r++)t[_+r]=a[c+r]}}else for(r=0;r<o;r++)t[_+r]=a[c+r]}(r,c,u,_):function(n,o,i,s){var r=0;for(r=0;r<s;r++)a[r]=t[i+r];var c=n+o-1,u=s-1,_=i+s-1,d=0,h=0;if(t[_--]=t[c--],0!=--o){if(1===s){for(h=1+(_-=o),d=1+(c-=o),r=o-1;0<=r;r--)t[h+r]=t[d+r];return t[_]=a[u]}for(var y=l;;){var p=0,m=0,k=!1;do{if(e(a[u],t[c])<0){if(t[_--]=t[c--],p++,(m=0)==--o){k=!0;break}}else if(t[_--]=a[u--],m++,p=0,1==--s){k=!0;break}}while((p|m)<y);if(k)break;do{if(0!=(p=o-Sn(a[u],t,n,o,o-1,e))){for(o-=p,h=1+(_-=p),d=1+(c-=p),r=p-1;0<=r;r--)t[h+r]=t[d+r];if(0===o){k=!0;break}}if(t[_--]=a[u--],1==--s){k=!0;break}if(0!=(m=s-Mn(t[c],a,0,s,s-1,e))){for(s-=m,h=1+(_-=m),d=1+(u-=m),r=0;r<m;r++)t[h+r]=a[d+r];if(s<=1){k=!0;break}}if(t[_--]=t[c--],0==--o){k=!0;break}y--}while(7<=p||7<=m);if(k)break;y<0&&(y=0),y+=2}if((l=y)<1&&(l=1),1===s){for(h=1+(_-=o),d=1+(c-=o),r=o-1;0<=r;r--)t[h+r]=t[d+r];t[_]=a[u]}else{if(0===s)throw new Error;for(d=_-(s-1),r=0;r<s;r++)t[d+r]=a[r]}}else for(d=_-(s-1),r=0;r<s;r++)t[d+r]=a[r]}(r,c,u,_))}n=[],o=[],this.mergeRuns=function(){for(;1<i;){var t=i-2;if(1<=t&&o[t-1]<=o[t]+o[t+1]||2<=t&&o[t-2]<=o[t]+o[t-1])o[t-1]<o[t+1]&&t--;else if(o[t]>o[t+1])break;s(t)}},this.forceMergeRuns=function(){for(;1<i;){var t=i-2;0<t&&o[t-1]<o[t+1]&&t--,s(t)}},this.pushRun=function(t,e){n[i]=t,o[i]=e,i+=1}}function xn(t,e,n,o){n=n||0;var l=(o=o||t.length)-n;if(!(l<2)){var i=0;if(l<32)An(t,n,o,n+(i=wn(t,n,o,e)),e);else{var a=new Pn(t,e),s=function(t){for(var e=0;32<=t;)e|=1&t,t>>=1;return t+e}(l);do{if((i=wn(t,n,o,e))<s){var r=l;s<r&&(r=s),An(t,n,n+r,n+i,e),i=r}a.pushRun(n,i),a.mergeRuns(),l-=i,n+=i}while(0!==l);a.forceMergeRuns()}}}function Dn(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function Ln(){this._roots=[],this._displayList=[],this._displayListLen=0}Ln.prototype={constructor:Ln,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,o=0,i=e.length;o<i;o++)this._updateAndAddDisplayable(e[o],null,t);n.length=this._displayListLen,l.canvasSupported&&xn(n,Dn)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var o=t.clipPath;if(o){e=e?e.slice():[];for(var l=o,i=t;l;)l.parent=i,l.updateTransform(),e.push(l),l=(i=l).clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var r=a[s];t.__dirty&&(r.__dirty=!0),this._updateAndAddDisplayable(r,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof Nn&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof Nn&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var o=t.length;e<o;e++)this.delRoot(t[e])}else{var l=E(this._roots,t);0<=l&&(this.delFromStorage(t),this._roots.splice(l,1),t instanceof Nn&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Dn};var Un={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Fn=function(t,e,n){return Un.hasOwnProperty(e)?n*t.dpr:n},Hn=0,Vn=1,Gn=2,jn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Wn=function(t){this.extendFrom(t,!1)};function Kn(t,e,n){var o=null==e.x?0:e.x,l=null==e.x2?1:e.x2,i=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(o=o*n.width+n.x,l=l*n.width+n.x,i=i*n.height+n.y,a=a*n.height+n.y),o=isNaN(o)?0:o,l=isNaN(l)?1:l,i=isNaN(i)?0:i,a=isNaN(a)?0:a,t.createLinearGradient(o,i,l,a)}function Yn(t,e,n){var o=n.width,l=n.height,i=Math.min(o,l),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,r=null==e.r?.5:e.r;return e.global||(a=a*o+n.x,s=s*l+n.y,r*=i),t.createRadialGradient(a,s,0,a,s,r)}for(var Xn=Wn.prototype={constructor:Wn,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var o=this,l=n&&n.style,i=!l||t.__attrCachedBy!==Vn;t.__attrCachedBy=Vn;for(var a=0;a<jn.length;a++){var s=jn[a],r=s[0];!i&&o[r]===l[r]||(t[r]=Fn(t,r,o[r]||s[1]))}if(!i&&o.fill===l.fill||(t.fillStyle=o.fill),!i&&o.stroke===l.stroke||(t.strokeStyle=o.stroke),!i&&o.opacity===l.opacity||(t.globalAlpha=null==o.opacity?1:o.opacity),!i&&o.blend===l.blend||(t.globalCompositeOperation=o.blend||"source-over"),this.hasStroke()){var c=o.lineWidth;t.lineWidth=c/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var o=("radial"===e.type?Yn:Kn)(t,e,n),l=e.colorStops,i=0;i<l.length;i++)o.addColorStop(l[i].offset,l[i].color);return o}},$n=0;$n<jn.length;$n++){var zn=jn[$n];zn[0]in Xn||(Xn[zn[0]]=zn[1])}function qn(t,e){this.image=t,this.repeat=e,this.type="pattern"}function Jn(){return!1}function Zn(t,e,n){var o=v(),l=e.getWidth(),i=e.getHeight(),a=o.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=l+"px",a.height=i+"px",o.setAttribute("data-zr-dom-id",t)),o.width=l*n,o.height=i*n,o}function Qn(t,e,n){var o;n=n||pn,"string"==typeof t?o=Zn(t,e,n):L(t)&&(t=(o=t).id),this.id=t;var l=(this.dom=o).style;l&&(o.onselectstart=Jn,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}Wn.getGradient=Xn.getGradient,Qn.prototype={constructor:Qn,__dirty:!0,__used:!(qn.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=Zn("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,o=this.dom,l=o.style,i=this.domBack;l&&(l.width=t+"px",l.height=e+"px"),o.width=t*n,o.height=e*n,i&&(i.width=t*n,i.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,o=this.dom,l=this.ctx,i=o.width,a=o.height,s=(e=e||this.clearColor,this.motionBlur&&!t),r=this.lastFrameAlpha,c=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,i/c,a/c)),l.clearRect(0,0,i,a),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||Wn.getGradient(l,e,{x:0,y:0,width:i,height:a}),e.__canvasGradient=n):e.image&&(n=qn.prototype.getCanvasPattern.call(e,l)),l.save(),l.fillStyle=n||e,l.fillRect(0,0,i,a),l.restore()),s){var u=this.domBack;l.save(),l.globalAlpha=r,l.drawImage(u,0,0,i,a),l.restore()}}};var to="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},eo=new Re(50);function no(t){if("string"!=typeof t)return t;var e=eo.get(t);return e&&e.image}function oo(t,e,n,o,l){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!n)return e;var i=eo.get(t),a={hostEl:n,cb:o,cbPayload:l};return i?io(e=i.image)||i.pending.push(a):((e=new Image).onload=e.onerror=lo,eo.put(t,e.__cachedImgObj={image:e,pending:[a]}),e.src=e.__zrImageSrc=t),e}return e}function lo(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],o=n.cb;o&&o(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function io(t){return t&&t.width&&t.height}var ao={},so=0,ro=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,co="12px sans-serif",uo={};function _o(t,e){var n=t+":"+(e=e||co);if(ao[n])return ao[n];for(var o,l,i=(t+"").split("\n"),a=0,s=0,r=i.length;s<r;s++)a=Math.max((o=i[s],l=e,uo.measureText(o,l)).width,a);return 5e3<so&&(so=0,ao={}),so++,ao[n]=a}function ho(t,e,n,o,l,i,a,s){return a?function(t,e,n,o,l,i,a,s){var r=Eo(t,{rich:a,truncate:s,font:e,textAlign:n,textPadding:l,textLineHeight:i}),c=r.outerWidth,u=r.outerHeight;return new Cn(yo(0,c,n),po(0,u,o),c,u)}(t,e,n,o,l,i,a,s):function(t,e,n,o,l,i,a){var s=To(t,e,l,i,a),r=_o(t,e);l&&(r+=l[1]+l[3]);var c=s.outerHeight,u=new Cn(yo(0,r,n),po(0,c,o),r,c);return u.lineHeight=s.lineHeight,u}(t,e,n,o,l,i,s)}function yo(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function po(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function mo(t,e,n){var o=e.textPosition,l=e.textDistance,i=n.x,a=n.y;l=l||0;var s=n.height,r=n.width,c=s/2,u="left",_="top";switch(o){case"left":i-=l,a+=c,u="right",_="middle";break;case"right":i+=l+r,a+=c,_="middle";break;case"top":i+=r/2,a-=l,u="center",_="bottom";break;case"bottom":i+=r/2,a+=s+l,u="center";break;case"inside":i+=r/2,a+=c,u="center",_="middle";break;case"insideLeft":i+=l,a+=c,_="middle";break;case"insideRight":i+=r-l,a+=c,u="right",_="middle";break;case"insideTop":i+=r/2,a+=l,u="center";break;case"insideBottom":i+=r/2,a+=s-l,u="center",_="bottom";break;case"insideTopLeft":i+=l,a+=l;break;case"insideTopRight":i+=r-l,a+=l,u="right";break;case"insideBottomLeft":i+=l,a+=s-l,_="bottom";break;case"insideBottomRight":i+=r-l,a+=s-l,u="right",_="bottom"}return(t=t||{}).x=i,t.y=a,t.textAlign=u,t.textVerticalAlign=_,t}function ko(t,e,n,o,l){if(!e)return"";var i=(t+"").split("\n");l=go(e,n,o,l);for(var a=0,s=i.length;a<s;a++)i[a]=fo(i[a],l);return i.join("\n")}function go(t,e,n,o){(o=f({},o)).font=e,n=j(n,"..."),o.maxIterations=j(o.maxIterations,2);var l=o.minChar=j(o.minChar,0);o.cnCharWidth=_o("\u56fd",e);var i=o.ascCharWidth=_o("a",e);o.placeholder=j(o.placeholder,"");for(var a=t=Math.max(0,t-1),s=0;s<l&&i<=a;s++)a-=i;var r=_o(n,e);return a<r&&(n="",r=0),a=t-r,o.ellipsis=n,o.ellipsisWidth=r,o.contentWidth=a,o.containerWidth=t,o}function fo(t,e){var n=e.containerWidth,o=e.font,l=e.contentWidth;if(!n)return"";var i=_o(t,o);if(i<=n)return t;for(var a=0;;a++){if(i<=l||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?bo(t,l,e.ascCharWidth,e.cnCharWidth):0<i?Math.floor(t.length*l/i):0;i=_o(t=t.substr(0,s),o)}return""===t&&(t=e.placeholder),t}function bo(t,e,n,o){for(var l=0,i=0,a=t.length;i<a&&l<e;i++){var s=t.charCodeAt(i);l+=0<=s&&s<=127?n:o}return i}function vo(t){return _o("\u56fd",t)}function To(t,e,n,o,l){null!=t&&(t+="");var i=j(o,vo(e)),a=t?t.split("\n"):[],s=a.length*i,r=s,c=!0;if(n&&(r+=n[0]+n[2]),t&&l){c=!1;var u=l.outerHeight,_=l.outerWidth;if(null!=u&&u<r)t="",a=[];else if(null!=_)for(var d=go(_-(n?n[1]+n[3]:0),e,l.ellipsis,{minChar:l.minChar,placeholder:l.placeholder}),h=0,y=a.length;h<y;h++)a[h]=fo(a[h],d)}return{lines:a,height:s,outerHeight:r,lineHeight:i,canCacheByTextString:c}}function Eo(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var o,l=ro.lastIndex=0;null!=(o=ro.exec(t));){var i=o.index;l<i&&Bo(n,t.substring(l,i)),Bo(n,o[2],o[1]),l=ro.lastIndex}l<t.length&&Bo(n,t.substring(l,t.length));var a=n.lines,s=0,r=0,c=[],u=e.textPadding,_=e.truncate,d=_&&_.outerWidth,h=_&&_.outerHeight;u&&(null!=d&&(d-=u[1]+u[3]),null!=h&&(h-=u[0]+u[2]));for(var y=0;y<a.length;y++){for(var p=a[y],m=0,k=0,g=0;g<p.tokens.length;g++){var f=(N=p.tokens[g]).styleName&&e.rich[N.styleName]||{},b=N.textPadding=f.textPadding,v=N.font=f.font||e.font,T=N.textHeight=j(f.textHeight,vo(v));if(b&&(T+=b[0]+b[2]),N.height=T,N.lineHeight=W(f.textLineHeight,e.textLineHeight,T),N.textAlign=f&&f.textAlign||e.textAlign,N.textVerticalAlign=f&&f.textVerticalAlign||"middle",null!=h&&s+N.lineHeight>h)return{lines:[],width:0,height:0};N.textWidth=_o(N.text,v);var E=f.textWidth,B=null==E||"auto"===E;if("string"==typeof E&&"%"===E.charAt(E.length-1))N.percentWidth=E,c.push(N),E=0;else{if(B){E=N.textWidth;var I=f.textBackgroundColor,R=I&&I.image;R&&io(R=no(R))&&(E=Math.max(E,R.width*T/R.height))}var O=b?b[1]+b[3]:0;E+=O;var C=null!=d?d-k:null;null!=C&&C<E&&(!B||C<O?(N.text="",N.textWidth=E=0):(N.text=ko(N.text,C-O,v,_.ellipsis,{minChar:_.minChar}),N.textWidth=_o(N.text,v),E=N.textWidth+O))}k+=N.width=E,f&&(m=Math.max(m,N.lineHeight))}p.width=k,s+=p.lineHeight=m,r=Math.max(r,k)}for(n.outerWidth=n.width=j(e.textWidth,r),n.outerHeight=n.height=j(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]),y=0;y<c.length;y++){var N,w=(N=c[y]).percentWidth;N.width=parseInt(w,10)/100*r}return n}function Bo(t,e,n){for(var o=""===e,l=e.split("\n"),i=t.lines,a=0;a<l.length;a++){var s=l[a],r={styleName:n,text:s,isLineHolder:!s&&!o};if(a)i.push({tokens:[r]});else{var c=(i[i.length-1]||(i[0]={tokens:[]})).tokens,u=c.length;1===u&&c[0].isLineHolder?c[0]=r:!s&&u&&!o||c.push(r)}}}function Io(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&$(e)||t.textFont||t.font}function Ro(t,e){var n,o,l,i,a,s=e.x,r=e.y,c=e.width,u=e.height,_=e.r;c<0&&(s+=c,c=-c),u<0&&(r+=u,u=-u),"number"==typeof _?n=o=l=i=_:_ instanceof Array?1===_.length?n=o=l=i=_[0]:2===_.length?(n=l=_[0],o=i=_[1]):3===_.length?(n=_[0],o=i=_[1],l=_[2]):(n=_[0],o=_[1],l=_[2],i=_[3]):n=o=l=i=0,c<n+o&&(n*=c/(a=n+o),o*=c/a),c<l+i&&(l*=c/(a=l+i),i*=c/a),u<o+l&&(o*=u/(a=o+l),l*=u/a),u<n+i&&(n*=u/(a=n+i),i*=u/a),t.moveTo(s+n,r),t.lineTo(s+c-o,r),0!==o&&t.arc(s+c-o,r+o,o,-Math.PI/2,0),t.lineTo(s+c,r+u-l),0!==l&&t.arc(s+c-l,r+u-l,l,0,Math.PI/2),t.lineTo(s+i,r+u),0!==i&&t.arc(s+i,r+u-i,i,Math.PI/2,Math.PI),t.lineTo(s,r+n),0!==n&&t.arc(s+n,r+n,n,Math.PI,1.5*Math.PI)}uo.measureText=function(t,e){var n=T();return n.font=e||co,n.measureText(t)};var Oo=co,Co={left:1,right:1,center:1},No={top:1,bottom:1,middle:1},wo=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Ao={},Mo={};function So(t){return Po(t),O(t.rich,Po),t}function Po(t){if(t){t.font=Io(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||Co[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||No[n]?n:"top",t.textPadding&&(t.textPadding=Y(t.textPadding))}}function xo(t,e,n,o,l,i){o.rich?function(t,e,n,o,l,i){9!==i&&(e.__attrCachedBy=Hn);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=Eo(n,o)),function(t,e,n,o,l){var i=n.width,a=n.outerWidth,s=n.outerHeight,r=o.textPadding,c=Vo(Mo,t,o,l),u=c.baseX,_=c.baseY,d=c.textAlign,h=c.textVerticalAlign;Do(e,o,l,u,_);var y=yo(u,a,d),p=po(_,s,h),m=y,k=p;r&&(m+=r[3],k+=r[0]);var g=m+i;Uo(o)&&Fo(t,e,o,y,p,a,s);for(var f=0;f<n.lines.length;f++){for(var b,v=n.lines[f],T=v.tokens,E=T.length,B=v.lineHeight,I=v.width,R=0,O=m,C=g,N=E-1;R<E&&(!(b=T[R]).textAlign||"left"===b.textAlign);)Lo(t,e,b,o,B,k,O,"left"),I-=b.width,O+=b.width,R++;for(;0<=N&&"right"===(b=T[N]).textAlign;)Lo(t,e,b,o,B,k,C,"right"),I-=b.width,C-=b.width,N--;for(O+=(i-(O-m)-(g-C)-I)/2;R<=N;)Lo(t,e,b=T[R],o,B,k,O+b.width/2,"center"),O+=b.width,R++;k+=B}}(t,e,a,o,l)}(t,e,n,o,l,i):function(t,e,n,o,l,i){var a,s=Uo(o),r=!1,c=e.__attrCachedBy===Gn;9!==i?(i&&(a=i.style,r=!s&&c&&a),e.__attrCachedBy=s?Hn:Gn):c&&(e.__attrCachedBy=Hn);var u=o.font||Oo;r&&u===(a.font||Oo)||(e.font=u);var _=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,_=t.__computedFont=e.font);var d=o.textPadding,h=o.textLineHeight,y=t.__textCotentBlock;y&&!t.__dirtyText||(y=t.__textCotentBlock=To(n,_,d,h,o.truncate));var p=y.outerHeight,m=y.lines,k=y.lineHeight,g=Vo(Mo,t,o,l),f=g.baseX,b=g.baseY,v=g.textAlign||"left",T=g.textVerticalAlign;Do(e,o,l,f,b);var E=po(b,p,T),B=f,I=E;if(s||d){var R=_o(n,_);d&&(R+=d[1]+d[3]);var O=yo(f,R,v);s&&Fo(t,e,o,O,E,R,p),d&&(B=Yo(f,v,d),I+=d[0])}e.textAlign=v,e.textBaseline="middle",e.globalAlpha=o.opacity||1;for(var C=0;C<wo.length;C++){var N=wo[C],w=N[0],A=N[1],M=o[w];r&&M===a[w]||(e[A]=Fn(e,A,M||N[2]))}I+=k/2;var S=o.textStrokeWidth,P=r?a.textStrokeWidth:null,x=!r||S!==P,D=!r||x||o.textStroke!==a.textStroke,L=jo(o.textStroke,S),U=Wo(o.textFill);if(L&&(x&&(e.lineWidth=S),D&&(e.strokeStyle=L)),U&&(r&&o.textFill===a.textFill||(e.fillStyle=U)),1===m.length)L&&e.strokeText(m[0],B,I),U&&e.fillText(m[0],B,I);else for(C=0;C<m.length;C++)L&&e.strokeText(m[C],B,I),U&&e.fillText(m[C],B,I),I+=k}(t,e,n,o,l,i)}function Do(t,e,n,o,l){if(n&&e.textRotation){var i=e.textOrigin;"center"===i?(o=n.width/2+n.x,l=n.height/2+n.y):i&&(o=i[0]+n.x,l=i[1]+n.y),t.translate(o,l),t.rotate(-e.textRotation),t.translate(-o,-l)}}function Lo(t,e,n,o,l,i,a,s){var r=o.rich[n.styleName]||{};r.text=n.text;var c=n.textVerticalAlign,u=i+l/2;"top"===c?u=i+n.height/2:"bottom"===c&&(u=i+l-n.height/2),!n.isLineHolder&&Uo(r)&&Fo(t,e,r,"right"===s?a-n.width:"center"===s?a-n.width/2:a,u-n.height/2,n.width,n.height);var _=n.textPadding;_&&(a=Yo(a,s,_),u-=n.height/2-_[2]-n.textHeight/2),Go(e,"shadowBlur",W(r.textShadowBlur,o.textShadowBlur,0)),Go(e,"shadowColor",r.textShadowColor||o.textShadowColor||"transparent"),Go(e,"shadowOffsetX",W(r.textShadowOffsetX,o.textShadowOffsetX,0)),Go(e,"shadowOffsetY",W(r.textShadowOffsetY,o.textShadowOffsetY,0)),Go(e,"textAlign",s),Go(e,"textBaseline","middle"),Go(e,"font",n.font||Oo);var d=jo(r.textStroke||o.textStroke,y),h=Wo(r.textFill||o.textFill),y=j(r.textStrokeWidth,o.textStrokeWidth);d&&(Go(e,"lineWidth",y),Go(e,"strokeStyle",d),e.strokeText(n.text,a,u)),h&&(Go(e,"fillStyle",h),e.fillText(n.text,a,u))}function Uo(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Fo(t,e,n,o,l,i,a){var s=n.textBackgroundColor,r=n.textBorderWidth,c=n.textBorderColor,u=D(s);if(Go(e,"shadowBlur",n.textBoxShadowBlur||0),Go(e,"shadowColor",n.textBoxShadowColor||"transparent"),Go(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),Go(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),u||r&&c){e.beginPath();var _=n.textBorderRadius;_?Ro(e,{x:o,y:l,width:i,height:a,r:_}):e.rect(o,l,i,a),e.closePath()}if(u)if(Go(e,"fillStyle",s),null!=n.fillOpacity){var d=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=d}else e.fill();else if(L(s)){var h=s.image;(h=oo(h,null,t,Ho,s))&&io(h)&&e.drawImage(h,o,l,i,a)}r&&c&&(Go(e,"lineWidth",r),Go(e,"strokeStyle",c),null!=n.strokeOpacity?(d=e.globalAlpha,e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=d):e.stroke())}function Ho(t,e){e.image=t}function Vo(t,e,n,o){var l=n.x||0,i=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(o){var r=n.textPosition;if(r instanceof Array)l=o.x+Ko(r[0],o.width),i=o.y+Ko(r[1],o.height);else{var c=e&&e.calculateTextPosition?e.calculateTextPosition(Ao,n,o):mo(Ao,n,o);l=c.x,i=c.y,a=a||c.textAlign,s=s||c.textVerticalAlign}var u=n.textOffset;u&&(l+=u[0],i+=u[1])}return(t=t||{}).baseX=l,t.baseY=i,t.textAlign=a,t.textVerticalAlign=s,t}function Go(t,e,n){return t[e]=Fn(t,e,n),t[e]}function jo(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Wo(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ko(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function Yo(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function Xo(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function $o(){}var zo=new Cn;function qo(t){for(var e in bn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Wn(t.style,this),this._rect=null,this.__clipPaths=null}function Jo(t){qo.call(this,t)}qo.prototype={constructor:qo,type:"displayable",__dirty:!0,invisible:!($o.prototype={constructor:$o,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&So(n);var o=n.text;if(null!=o&&(o+=""),Xo(o,n)){t.save();var l=this.transform;n.transformText?this.setTransform(t):l&&(zo.copy(e),zo.applyTransform(l),e=zo),xo(this,t,o,n,e,9),t.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?bn.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Wn(t,this),this.dirty(!1),this},calculateTextPosition:null},B(qo,bn),I(qo,$o),Jo.prototype={constructor:Jo,type:"image",brush:function(t,e){var n=this.style,o=n.image;n.bind(t,this,e);var l=this._image=oo(o,this._image,this,this.onload);if(l&&io(l)){var i=n.x||0,a=n.y||0,s=n.width,r=n.height,c=l.width/l.height;if(null==s&&null!=r?s=r*c:null==r&&null!=s?r=s/c:null==s&&null==r&&(s=l.width,r=l.height),this.setTransform(t),n.sWidth&&n.sHeight){var u=n.sx||0,_=n.sy||0;t.drawImage(l,u,_,n.sWidth,n.sHeight,i,a,s,r)}else if(n.sx&&n.sy){var d=s-(u=n.sx),h=r-(_=n.sy);t.drawImage(l,u,_,d,h,i,a,s,r)}else t.drawImage(l,i,a,s,r);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new Cn(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},B(Jo,qo);var Zo=314159;function Qo(t){return parseInt(t,10)}var tl=new Cn(0,0,0,0),el=new Cn(0,0,0,0);function nl(t,e,n){this.type="canvas";var o=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=f({},n||{}),this.dpr=n.devicePixelRatio||pn,this._singleCanvas=o;var l=(this.root=t).style;l&&(l["-webkit-tap-highlight-color"]="transparent",l["-webkit-user-select"]=l["user-select"]=l["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var i=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,o){var s=t.width,r=t.height;null!=n.width&&(s=n.width),null!=n.height&&(r=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=r*this.dpr,this._width=s,this._height=r;var c=new Qn(t,this,this.dpr);c.__builtin__=!0,c.initContext(),(a[Zo]=c).zlevel=Zo,i.push(Zo),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var u=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(u)}this._hoverlayer=null,this._hoverElements=[]}function ol(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Nt.call(this)}nl.prototype={constructor:nl,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var o=0;o<n.length;o++){var l=n[o],i=this._layers[l];if(!i.__builtin__&&i.refresh){var a=0===o?this._backgroundColor:null;i.refresh(a)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return(n.__from=t).__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,o=E(n,e);0<=o&&n.splice(o,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var o=e[n].__from;o&&(o.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){xn(t,this.storage.displayableSortFunc);var o={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var l=0;l<e;){var i=t[l],a=i.__from;a&&a.__zr?(l++,a.invisible||(i.transform=a.transform,i.invTransform=a.invTransform,i.__clipPaths=a.__clipPaths,this._doPaintEl(i,n,!0,o))):(t.splice(l,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!o){var l=this;to(function(){l._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(Zo).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(o){o.virtual&&t.drawImage(o.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],o=0;o<this._zlevelList.length;o++){var i=this._zlevelList[o];(r=this._layers[i]).__builtin__&&r!==this._hoverlayer&&(r.__dirty||e)&&n.push(r)}for(var a=!0,s=0;s<n.length;s++){var r,c=(r=n[s]).ctx,u={};c.save();var _=e?r.__startIndex:r.__drawIndex,d=!e&&r.incremental&&Date.now,h=d&&Date.now(),y=r.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(r.__startIndex===r.__endIndex)r.clear(!1,y);else if(_===r.__startIndex){var p=t[_];p.incremental&&p.notClear&&!e||r.clear(!1,y)}-1===_&&(console.error("For some unknown reason. drawIndex is -1"),_=r.__startIndex);for(var m=_;m<r.__endIndex;m++){var k=t[m];if(this._doPaintEl(k,r,e,u),k.__dirty=k.__dirtyText=!1,d&&15<Date.now()-h)break}r.__drawIndex=m,r.__drawIndex<r.__endIndex&&(a=!1),u.prevElClipPaths&&c.restore(),c.restore()}return l.wxa&&O(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),a},_doPaintEl:function(t,e,n,o){var l=e.ctx,i=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!i||i[0]||i[3])&&(!t.culling||!function(t,e,n){return tl.copy(t.getBoundingRect()),t.transform&&tl.applyTransform(t.transform),el.width=e,el.height=n,!tl.intersect(el)}(t,this._width,this._height))){var a=t.__clipPaths,s=o.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(a,s)||(s&&(l.restore(),o.prevElClipPaths=null,o.prevEl=null),a&&(l.save(),function(t,e){for(var n=0;n<t.length;n++){var o=t[n];o.setTransform(e),e.beginPath(),o.buildPath(e,o.shape),e.clip(),o.restoreTransform(e)}}(a,l),o.prevElClipPaths=a)),t.beforeBrush&&t.beforeBrush(l),t.brush(l,o.prevEl||null),(o.prevEl=t).afterBrush&&t.afterBrush(l)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Zo);var n=this._layers[t];return n||((n=new Qn("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?k(n,this._layerConfig[t],!0):this._layerConfig[t-.01]&&k(n,this._layerConfig[t-.01],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,o=this._zlevelList,l=o.length,i=null,a=-1,s=this._domRoot;if(n[t])kn("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(0<l&&t>o[0]){for(a=0;a<l-1&&!(o[a]<t&&o[a+1]>t);a++);i=n[o[a]]}if(o.splice(a+1,0,t),!(n[t]=e).virtual)if(i){var r=i.dom;r.nextSibling?s.insertBefore(e.dom,r.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}else kn("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var n,o,l=this._zlevelList;for(o=0;o<l.length;o++)n=l[o],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,o,l,i=this._zlevelList;for(l=0;l<i.length;l++)o=i[l],(n=this._layers[o]).__builtin__&&t.call(e,n,o)},eachOtherLayer:function(t,e){var n,o,l,i=this._zlevelList;for(l=0;l<i.length;l++)o=i[l],(n=this._layers[o]).__builtin__||t.call(e,n,o)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){l&&(l.__endIndex!==t&&(l.__dirty=!0),l.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++)if((a=t[n]).zlevel!==t[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var o,l=null,i=0;for(n=0;n<t.length;n++){var a,s,r=(a=t[n]).zlevel;o!==r&&(o=r,i=0),a.incremental?((s=this.getLayer(r+.001,this._needsManuallyCompositing)).incremental=!0,i=1):s=this.getLayer(r+(0<i?.01:0),this._needsManuallyCompositing),s.__builtin__||kn("ZLevel "+r+" has been used by unkown layer "+s.id),s!==l&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.incremental?s.__drawIndex=-1:s.__drawIndex=n,e(n),l=s),a.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(t,e){!t.__used&&0<t.getElementCount()&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?k(n[t],e,!0):n[t]=e;for(var o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o];l!==t&&l!==t+.01||k(this._layers[l],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,o=e[t];o&&(o.dom.parentNode.removeChild(o.dom),delete e[t],n.splice(E(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var o=this._opts;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var l in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(t,e);O(this._progressiveLayers,function(n){n.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Zo).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Zo].dom;var e=new Qn("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,o=e.dom.height,l=e.ctx;this.eachLayer(function(t){t.__builtin__?l.drawImage(t.dom,0,0,n,o):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var i={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var r=a[s];this._doPaintEl(r,e,!0,i)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],o=["clientWidth","clientHeight"][t],l=["paddingLeft","paddingTop"][t],i=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[o]||Qo(s[n])||Qo(a.style[n]))-(Qo(s[l])||0)-(Qo(s[i])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),o=n.getContext("2d"),l=t.getBoundingRect(),i=t.style,a=i.shadowBlur*e,s=i.shadowOffsetX*e,r=i.shadowOffsetY*e,c=i.hasStroke()?i.lineWidth:0,u=Math.max(c/2,a-s),_=Math.max(c/2,s+a),d=Math.max(c/2,a-r),h=Math.max(c/2,r+a),y=l.width+u+_,p=l.height+d+h;n.width=y*e,n.height=p*e,o.scale(e,e),o.clearRect(0,0,y,p),o.dpr=e;var m={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-l.x,d-l.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(o);var k=new Jo({style:{x:0,y:0,image:n}});return null!=m.position&&(k.position=t.position=m.position),null!=m.rotation&&(k.rotation=t.rotation=m.rotation),null!=m.scale&&(k.scale=t.scale=m.scale),k}},ol.prototype={constructor:ol,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=E(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,o=n.length,l=[],i=[],a=0;a<o;a++){var s=n[a],r=s.step(t,e);r&&(l.push(r),i.push(s))}for(a=0;a<o;)n[a]._needsRemove?(n[a]=n[o-1],n.pop(),o--):a++;for(o=l.length,a=0;a<o;a++)i[a].fire(l[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,to(function e(){t._running&&(to(e),t._paused||t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new hn(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},I(ol,Nt);var ll,il,al=l.domSupported,sl=(il={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:ll=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:C(ll,function(t){var e=t.replace("mouse","pointer");return il.hasOwnProperty(e)?e:t})}),rl=["mousemove","mouseup"],cl=["pointermove","pointerup"];function ul(t){return"mousewheel"===t&&l.browser.firefox?"DOMMouseScroll":t}function _l(t){var e=t.pointerType;return"pen"===e||"touch"===e}function dl(t){t&&(t.zrByTouch=!0)}function hl(t,e){for(var n=e,o=!1;n&&9!==n.nodeType&&!(o=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return o}function yl(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var pl=yl.prototype;pl.stopPropagation=pl.stopImmediatePropagation=pl.preventDefault=et;var ml={mousedown:function(t){t=Wt(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Wt(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||bl(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=Wt(this.dom,t),bl(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=Wt(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=hl(this,e),this.trigger("mouseout",t)},touchstart:function(t){dl(t=Wt(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),ml.mousemove.call(this,t),ml.mousedown.call(this,t)},touchmove:function(t){dl(t=Wt(this.dom,t)),this.handler.processGesture(t,"change"),ml.mousemove.call(this,t)},touchend:function(t){dl(t=Wt(this.dom,t)),this.handler.processGesture(t,"end"),ml.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&ml.click.call(this,t)},pointerdown:function(t){ml.mousedown.call(this,t)},pointermove:function(t){_l(t)||ml.mousemove.call(this,t)},pointerup:function(t){ml.mouseup.call(this,t)},pointerout:function(t){_l(t)||ml.mouseout.call(this,t)}};O(["click","mousewheel","dblclick","contextmenu"],function(t){ml[t]=function(e){e=Wt(this.dom,e),this.trigger(t,e)}});var kl={pointermove:function(t){_l(t)||kl.mousemove.call(this,t)},pointerup:function(t){kl.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;bl(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function gl(t,e,n,o){t.mounted[e]=n,t.listenerOpts[e]=o,Kt(t.domTarget,ul(e),n,o)}function fl(t){var e,n,o,l,i=t.mounted;for(var a in i)i.hasOwnProperty(a)&&(e=t.domTarget,n=ul(a),o=i[a],l=t.listenerOpts[a],Ut?e.removeEventListener(n,o,l):e.detachEvent("on"+n,o));t.mounted={}}function bl(t,e){if(t._mayPointerCapture=null,al&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?function(t,e){function n(n){gl(e,n,function(o){o=jt(o),hl(t,o.target)||(o=function(t,e){return Wt(t.dom,new yl(t,e),!0)}(t,o),e.domHandlers[n].call(t,o))},{capture:!0})}l.pointerEventsSupported?O(cl,n):l.touchEventsSupported||O(rl,n)}(t,n):fl(n)}}function vl(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Tl(t,e){Nt.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new vl(t,ml),al&&(this._globalHandlerScope=new vl(document,kl)),this._pointerCapturing=!1,this._mayPointerCapture=null,function(t,e){var n=e.domHandlers;l.pointerEventsSupported?O(sl.pointer,function(o){gl(e,o,function(e){n[o].call(t,e)})}):(l.touchEventsSupported&&O(sl.touch,function(o){gl(e,o,function(l){n[o].call(t,l),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}(e)})}),O(sl.mouse,function(o){gl(e,o,function(l){l=jt(l),e.touching||n[o].call(t,l)})}))}(this,this._localHandlerScope)}var El=Tl.prototype;El.dispose=function(){fl(this._localHandlerScope),al&&fl(this._globalHandlerScope)},El.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},I(Tl,Nt);var Bl=!l.canvasSupported,Il={canvas:nl},Rl={};function Ol(t,e){var n=new Nl(o(),t,e);return Rl[n.id]=n}function Cl(t,e){Il[t]=e}var Nl=function(t,e,n){n=n||{},this.dom=e,this.id=t;var o=this,i=new Ln,a=n.renderer;if(Bl){if(!Il.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&Il[a]||(a="canvas");var s=new Il[a](e,i,n,t);this.storage=i,this.painter=s;var r=l.node||l.worker?null:new Tl(s.getViewportRoot(),s.root);this.handler=new te(i,s,r,s.root),this.animation=new ol({stage:{update:M(this.flush,this)}}),this.animation.start(),this._needsRefresh;var c=i.delFromStorage,u=i.addToStorage;i.delFromStorage=function(t){c.call(i,t),t&&t.removeSelfFromZr(o)},i.addToStorage=function(t){u.call(i,t),t.addSelfToZr(o)}};Nl.prototype={constructor:Nl,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete Rl[t]}(this.id)}};var wl=(Object.freeze||Object)({version:"4.3.2",init:Ol,dispose:function(t){if(t)t.dispose();else{for(var e in Rl)Rl.hasOwnProperty(e)&&Rl[e].dispose();Rl={}}return this},getInstance:function(t){return Rl[t]},registerPainter:Cl}),Al=O,Ml=L,Sl=P,Pl="series\0";function xl(t){return t instanceof Array?t:null==t?[]:[t]}function Dl(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var o=0,l=n.length;o<l;o++){var i=n[o];!t.emphasis[e].hasOwnProperty(i)&&t[e].hasOwnProperty(i)&&(t.emphasis[e][i]=t[e][i])}}}var Ll=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Ul(t){return!Ml(t)||Sl(t)||t instanceof Date?t:t.value}function Fl(t,e){e=(e||[]).slice();var n=C(t||[],function(t,e){return{exist:t}});return Al(e,function(t,o){if(Ml(t)){for(var l=0;l<n.length;l++)if(!n[l].option&&null!=t.id&&n[l].exist.id===t.id+"")return n[l].option=t,void(e[o]=null);for(l=0;l<n.length;l++){var i=n[l].exist;if(!(n[l].option||null!=i.id&&null!=t.id||null==t.name||Gl(t)||Gl(i)||i.name!==t.name+""))return n[l].option=t,void(e[o]=null)}}}),Al(e,function(t,e){if(Ml(t)){for(var o=0;o<n.length;o++){var l=n[o].exist;if(!n[o].option&&!Gl(l)&&null==t.id){n[o].option=t;break}}o>=n.length&&n.push({option:t})}}),n}function Hl(t){var e=Q();Al(t,function(t,n){var o=t.exist;o&&e.set(o.id,t)}),Al(t,function(t,n){var o=t.option;X(!o||null==o.id||!e.get(o.id)||e.get(o.id)===t,"id duplicates: "+(o&&o.id)),o&&null!=o.id&&e.set(o.id,t),t.keyInfo||(t.keyInfo={})}),Al(t,function(t,n){var o=t.exist,l=t.option,i=t.keyInfo;if(Ml(l)){if(i.name=null!=l.name?l.name+"":o?o.name:Pl+n,o)i.id=o.id;else if(null!=l.id)i.id=l.id+"";else for(var a=0;i.id="\0"+i.name+"\0"+a++,e.get(i.id););e.set(i.id,t)}})}function Vl(t){var e=t.name;return!(!e||!e.indexOf(Pl))}function Gl(t){return Ml(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function jl(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?P(e.dataIndex)?C(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?P(e.name)?C(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function Wl(){var t="__\0ec_inner_"+Kl+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var Kl=0;function Yl(t,e,n){if(D(e)){var o={};o[e+"Index"]=0,e=o}var l=n&&n.defaultMainType;!l||Xl(e,l+"Index")||Xl(e,l+"Id")||Xl(e,l+"Name")||(e[l+"Index"]=0);var i={};return Al(e,function(o,l){if(o=e[l],"dataIndex"!==l&&"dataIndexInside"!==l){var a=l.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],r=(a[2]||"").toLowerCase();if(!(!s||!r||null==o||"index"===r&&"none"===o||n&&n.includeMainTypes&&E(n.includeMainTypes,s)<0)){var c={mainType:s};"index"===r&&"all"===o||(c[r]=o);var u=t.queryComponents(c);i[s+"Models"]=u,i[s+"Model"]=u[0]}}else i[l]=o}),i}function Xl(t,e){return t&&t.hasOwnProperty(e)}function $l(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function zl(t){return"auto"===t?l.domSupported?"html":"richText":t||"html"}function ql(t,e){var n=Q(),o=[];return O(t,function(t){var l=e(t);(n.get(l)||(o.push(l),n.set(l,[]))).push(t)}),{keys:o,buckets:n}}var Jl="___EC__COMPONENT__CONTAINER___";function Zl(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e}function Ql(t){(t.$constructor=t).extend=function(t){function e(){t.$constructor?t.$constructor.apply(this,arguments):n.apply(this,arguments)}var n=this;return f(e.prototype,t),e.extend=this.extend,e.superCall=ni,e.superApply=oi,B(e,this),e.superClass=n,e}}var ti=0;function ei(t){var e=["__\0is_clz",ti++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function ni(t,e){var n=K(arguments,2);return this.superClass.prototype[e].apply(t,n)}function oi(t,e,n){return this.superClass.prototype[e].apply(t,n)}function li(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){return e&&(function(t){X(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=Zl(e)).sub?e.sub!==Jl&&((function(t){var e=n[t.main];return e&&e[Jl]||((e=n[t.main]={})[Jl]=!0),e}(e))[e.sub]=t):n[e.main]=t),t},t.getClass=function(t,e,o){var l=n[t];if(l&&l[Jl]&&(l=e?l[e]:null),o&&!l)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return l},t.getClassesByMainType=function(t){t=Zl(t);var e=[],o=n[t.main];return o&&o[Jl]?O(o,function(t,n){n!==Jl&&e.push(t)}):e.push(o),e},t.hasClass=function(t){return t=Zl(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return O(n,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=Zl(t);var e=n[t.main];return e&&e[Jl]},t.parseClassType=Zl,e.registerWhenExtend){var o=t.extend;o&&(t.extend=function(e){var n=o.call(this,e);return t.registerClass(n,e.type)})}return t}function ii(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,o){for(var l={},i=0;i<t.length;i++){var a=t[i][1];if(!(n&&0<=E(n,a)||o&&E(o,a)<0)){var s=e.getShallow(a);null!=s&&(l[t[i][0]]=s)}}return l}}var ai=ii([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),si={getLineStyle:function(t){var e=ai(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),o=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[o,o]:[n,n])}},ri=ii([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),ci={getAreaStyle:function(t,e){return ri(this,t,e)}},ui=Math.pow,_i=Math.sqrt,di=1e-8,hi=1e-4,yi=_i(3),pi=1/3,mi=lt(),ki=lt(),gi=lt();function fi(t){return-di<t&&t<di}function bi(t){return di<t||t<-di}function vi(t,e,n,o,l){var i=1-l;return i*i*(i*t+3*l*e)+l*l*(l*o+3*i*n)}function Ti(t,e,n,o,l){var i=1-l;return 3*(((e-t)*i+2*(n-e)*l)*i+(o-n)*l*l)}function Ei(t,e,n,o,l){var i=6*n-12*e+6*t,a=9*e+3*o-3*t-9*n,s=3*e-3*t,r=0;if(fi(a))bi(i)&&0<=(u=-s/i)&&u<=1&&(l[r++]=u);else{var c=i*i-4*a*s;if(fi(c))l[0]=-i/(2*a);else if(0<c){var u,_=_i(c),d=(-i-_)/(2*a);0<=(u=(-i+_)/(2*a))&&u<=1&&(l[r++]=u),0<=d&&d<=1&&(l[r++]=d)}}return r}function Bi(t,e,n,o,l,i){var a=(e-t)*l+t,s=(n-e)*l+e,r=(o-n)*l+n,c=(s-a)*l+a,u=(r-s)*l+s,_=(u-c)*l+c;i[0]=t,i[1]=a,i[2]=c,i[3]=_,i[4]=_,i[5]=u,i[6]=r,i[7]=o}function Ii(t,e,n,o){var l=1-o;return l*(l*t+2*o*e)+o*o*n}function Ri(t,e,n,o){return 2*((1-o)*(e-t)+o*(n-e))}function Oi(t,e,n){var o=t+n-2*e;return 0==o?.5:(t-e)/o}function Ci(t,e,n,o,l){var i=(e-t)*o+t,a=(n-e)*o+e,s=(a-i)*o+i;l[0]=t,l[1]=i,l[2]=s,l[3]=s,l[4]=a,l[5]=n}var Ni=Math.min,wi=Math.max,Ai=Math.sin,Mi=Math.cos,Si=2*Math.PI,Pi=lt(),xi=lt(),Di=lt();function Li(t,e,n){if(0!==t.length){var o,l=t[0],i=l[0],a=l[0],s=l[1],r=l[1];for(o=1;o<t.length;o++)l=t[o],i=Ni(i,l[0]),a=wi(a,l[0]),s=Ni(s,l[1]),r=wi(r,l[1]);e[0]=i,e[1]=s,n[0]=a,n[1]=r}}function Ui(t,e,n,o,l,i){l[0]=Ni(t,n),l[1]=Ni(e,o),i[0]=wi(t,n),i[1]=wi(e,o)}var Fi=[],Hi=[];function Vi(t,e,n,o,l,i,a,s,r,c){var u,_=Ei,d=vi,h=_(t,n,l,a,Fi);for(r[0]=1/0,r[1]=1/0,c[0]=-1/0,c[1]=-1/0,u=0;u<h;u++){var y=d(t,n,l,a,Fi[u]);r[0]=Ni(y,r[0]),c[0]=wi(y,c[0])}for(h=_(e,o,i,s,Hi),u=0;u<h;u++){var p=d(e,o,i,s,Hi[u]);r[1]=Ni(p,r[1]),c[1]=wi(p,c[1])}r[0]=Ni(t,r[0]),c[0]=wi(t,c[0]),r[0]=Ni(a,r[0]),c[0]=wi(a,c[0]),r[1]=Ni(e,r[1]),c[1]=wi(e,c[1]),r[1]=Ni(s,r[1]),c[1]=wi(s,c[1])}function Gi(t,e,n,o,l,i,a,s,r){var c=Et,u=Bt,_=Math.abs(l-i);if(_%Si<1e-4&&1e-4<_)return s[0]=t-n,s[1]=e-o,r[0]=t+n,void(r[1]=e+o);if(Pi[0]=Mi(l)*n+t,Pi[1]=Ai(l)*o+e,xi[0]=Mi(i)*n+t,xi[1]=Ai(i)*o+e,c(s,Pi,xi),u(r,Pi,xi),(l%=Si)<0&&(l+=Si),(i%=Si)<0&&(i+=Si),i<l&&!a?i+=Si:l<i&&a&&(l+=Si),a){var d=i;i=l,l=d}for(var h=0;h<i;h+=Math.PI/2)l<h&&(Di[0]=Mi(h)*n+t,Di[1]=Ai(h)*o+e,c(s,Di,s),u(r,Di,r))}var ji={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Wi=[],Ki=[],Yi=[],Xi=[],$i=Math.min,zi=Math.max,qi=Math.cos,Ji=Math.sin,Zi=Math.sqrt,Qi=Math.abs,ta="undefined"!=typeof Float32Array,ea=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};function na(t,e,n,o,l,i,a){if(0===l)return!1;var s,r=l;if(e+r<a&&o+r<a||a<e-r&&a<o-r||t+r<i&&n+r<i||i<t-r&&i<n-r)return!1;if(t===n)return Math.abs(i-t)<=r/2;var c=(s=(e-o)/(t-n))*i-a+(t*o-n*e)/(t-n);return c*c/(s*s+1)<=r/2*r/2}function oa(t,e,n,o,l,i,a,s,r,c,u){if(0===r)return!1;var _=r;return!(e+_<u&&o+_<u&&i+_<u&&s+_<u||u<e-_&&u<o-_&&u<i-_&&u<s-_||t+_<c&&n+_<c&&l+_<c&&a+_<c||c<t-_&&c<n-_&&c<l-_&&c<a-_)&&function(t,e,n,o,l,i,a,s,r,c,u){var _,d,h,y,p,m=.005,k=1/0;mi[0]=r,mi[1]=c;for(var g=0;g<1;g+=.05)ki[0]=vi(t,n,l,a,g),ki[1]=vi(e,o,i,s,g),(y=bt(mi,ki))<k&&(_=g,k=y);k=1/0;for(var f=0;f<32&&!(m<hi);f++)d=_-m,h=_+m,ki[0]=vi(t,n,l,a,d),ki[1]=vi(e,o,i,s,d),y=bt(ki,mi),0<=d&&y<k?(_=d,k=y):(gi[0]=vi(t,n,l,a,h),gi[1]=vi(e,o,i,s,h),p=bt(gi,mi),h<=1&&p<k?(_=h,k=p):m*=.5);return _i(k)}(t,e,n,o,l,i,a,s,c,u)<=_/2}function la(t,e,n,o,l,i,a,s,r){if(0===a)return!1;var c=a;return!(e+c<r&&o+c<r&&i+c<r||r<e-c&&r<o-c&&r<i-c||t+c<s&&n+c<s&&l+c<s||s<t-c&&s<n-c&&s<l-c)&&function(t,e,n,o,l,i,a,s,r){var c,u=.005,_=1/0;mi[0]=a,mi[1]=s;for(var d=0;d<1;d+=.05)ki[0]=Ii(t,n,l,d),ki[1]=Ii(e,o,i,d),(m=bt(mi,ki))<_&&(c=d,_=m);_=1/0;for(var h=0;h<32&&!(u<hi);h++){var y=c-u,p=c+u;ki[0]=Ii(t,n,l,y),ki[1]=Ii(e,o,i,y);var m=bt(ki,mi);if(0<=y&&m<_)c=y,_=m;else{gi[0]=Ii(t,n,l,p),gi[1]=Ii(e,o,i,p);var k=bt(gi,mi);p<=1&&k<_?(c=p,_=k):u*=.5}}return _i(_)}(t,e,n,o,l,i,s,r)<=c/2}ea.prototype={constructor:ea,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){n=n||0,this._ux=Qi(n/pn/t)||0,this._uy=Qi(n/pn/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(ji.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=Qi(t-this._xi)>this._ux||Qi(e-this._yi)>this._uy||this._len<5;return this.addData(ji.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,o,l,i){return this.addData(ji.C,t,e,n,o,l,i),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,o,l,i):this._ctx.bezierCurveTo(t,e,n,o,l,i)),this._xi=l,this._yi=i,this},quadraticCurveTo:function(t,e,n,o){return this.addData(ji.Q,t,e,n,o),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,o):this._ctx.quadraticCurveTo(t,e,n,o)),this._xi=n,this._yi=o,this},arc:function(t,e,n,o,l,i){return this.addData(ji.A,t,e,n,n,o,l-o,0,i?0:1),this._ctx&&this._ctx.arc(t,e,n,o,l,i),this._xi=qi(l)*n+t,this._yi=Ji(l)*n+e,this},arcTo:function(t,e,n,o,l){return this._ctx&&this._ctx.arcTo(t,e,n,o,l),this},rect:function(t,e,n,o){return this._ctx&&this._ctx.rect(t,e,n,o),this.addData(ji.R,t,e,n,o),this},closePath:function(){this.addData(ji.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!ta||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,o=this._len,l=0;l<e;l++)n+=t[l].len();for(ta&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+n)),l=0;l<e;l++)for(var i=t[l].data,a=0;a<i.length;a++)this.data[o++]=i[a];this._len=o},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,o,l=this._dashSum,i=this._dashOffset,a=this._lineDash,s=this._ctx,r=this._xi,c=this._yi,u=t-r,_=e-c,d=Zi(u*u+_*_),h=r,y=c,p=a.length;for(i<0&&(i=l+i),h-=(i%=l)*(u/=d),y-=i*(_/=d);0<u&&h<=t||u<0&&t<=h||0===u&&(0<_&&y<=e||_<0&&e<=y);)h+=u*(n=a[o=this._dashIdx]),y+=_*n,this._dashIdx=(o+1)%p,0<u&&h<r||u<0&&r<h||0<_&&y<c||_<0&&c<y||s[o%2?"moveTo":"lineTo"](0<=u?$i(h,t):zi(h,t),0<=_?$i(y,e):zi(y,e));u=h-t,_=y-e,this._dashOffset=-Zi(u*u+_*_)},_dashedBezierTo:function(t,e,n,o,l,i){var a,s,r,c,u,_=this._dashSum,d=this._dashOffset,h=this._lineDash,y=this._ctx,p=this._xi,m=this._yi,k=vi,g=0,f=this._dashIdx,b=h.length,v=0;for(d<0&&(d=_+d),d%=_,a=0;a<1;a+=.1)s=k(p,t,n,l,a+.1)-k(p,t,n,l,a),r=k(m,e,o,i,a+.1)-k(m,e,o,i,a),g+=Zi(s*s+r*r);for(;f<b&&!(d<(v+=h[f]));f++);for(a=(v-d)/g;a<=1;)c=k(p,t,n,l,a),u=k(m,e,o,i,a),f%2?y.moveTo(c,u):y.lineTo(c,u),a+=h[f]/g,f=(f+1)%b;f%2!=0&&y.lineTo(l,i),s=l-c,r=i-u,this._dashOffset=-Zi(s*s+r*r)},_dashedQuadraticTo:function(t,e,n,o){var l=n,i=o;n=(n+2*t)/3,o=(o+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,o,l,i)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,ta&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Wi[0]=Wi[1]=Yi[0]=Yi[1]=Number.MAX_VALUE,Ki[0]=Ki[1]=Xi[0]=Xi[1]=-Number.MAX_VALUE;for(var t,e,n,o,l,i,a,s,r,c,u,_,d,h,y=this.data,p=0,m=0,k=0,g=0,f=0;f<y.length;){var b=y[f++];switch(1===f&&(k=p=y[f],g=m=y[f+1]),b){case ji.M:p=k=y[f++],m=g=y[f++],Yi[0]=k,Yi[1]=g,Xi[0]=k,Xi[1]=g;break;case ji.L:Ui(p,m,y[f],y[f+1],Yi,Xi),p=y[f++],m=y[f++];break;case ji.C:Vi(p,m,y[f++],y[f++],y[f++],y[f++],y[f],y[f+1],Yi,Xi),p=y[f++],m=y[f++];break;case ji.Q:t=p,e=m,n=y[f++],o=y[f++],l=y[f],i=y[f+1],a=Yi,s=Xi,c=r=void 0,c=Ii,u=wi(Ni((r=Oi)(t,n,l),1),0),_=wi(Ni(r(e,o,i),1),0),d=c(t,n,l,u),h=c(e,o,i,_),a[0]=Ni(t,l,d),a[1]=Ni(e,i,h),s[0]=wi(t,l,d),s[1]=wi(e,i,h),p=y[f++],m=y[f++];break;case ji.A:var v=y[f++],T=y[f++],E=y[f++],B=y[f++],I=y[f++],R=y[f++]+I;f+=1;var O=1-y[f++];1===f&&(k=qi(I)*E+v,g=Ji(I)*B+T),Gi(v,T,E,B,I,R,O,Yi,Xi),p=qi(R)*E+v,m=Ji(R)*B+T;break;case ji.R:Ui(k=p=y[f++],g=m=y[f++],k+y[f++],g+y[f++],Yi,Xi);break;case ji.Z:p=k,m=g}Et(Wi,Wi,Yi),Bt(Ki,Ki,Xi)}return 0===f&&(Wi[0]=Wi[1]=Ki[0]=Ki[1]=0),new Cn(Wi[0],Wi[1],Ki[0]-Wi[0],Ki[1]-Wi[1])},rebuildPath:function(t){for(var e,n,o,l,i,a,s=this.data,r=this._ux,c=this._uy,u=this._len,_=0;_<u;){var d=s[_++];switch(1===_&&(e=o=s[_],n=l=s[_+1]),d){case ji.M:e=o=s[_++],n=l=s[_++],t.moveTo(o,l);break;case ji.L:i=s[_++],a=s[_++],(Qi(i-o)>r||Qi(a-l)>c||_===u-1)&&(t.lineTo(i,a),o=i,l=a);break;case ji.C:t.bezierCurveTo(s[_++],s[_++],s[_++],s[_++],s[_++],s[_++]),o=s[_-2],l=s[_-1];break;case ji.Q:t.quadraticCurveTo(s[_++],s[_++],s[_++],s[_++]),o=s[_-2],l=s[_-1];break;case ji.A:var h=s[_++],y=s[_++],p=s[_++],m=s[_++],k=s[_++],g=s[_++],f=s[_++],b=s[_++],v=m<p?p:m,T=m<p?1:p/m,E=m<p?m/p:1,B=k+g;.001<Math.abs(p-m)?(t.translate(h,y),t.rotate(f),t.scale(T,E),t.arc(0,0,v,k,B,1-b),t.scale(1/T,1/E),t.rotate(-f),t.translate(-h,-y)):t.arc(h,y,v,k,B,1-b),1===_&&(e=qi(k)*p+h,n=Ji(k)*m+y),o=qi(B)*p+h,l=Ji(B)*m+y;break;case ji.R:e=o=s[_],n=l=s[_+1],t.rect(s[_++],s[_++],s[_++],s[_++]);break;case ji.Z:t.closePath(),o=e,l=n}}}},ea.CMD=ji;var ia=2*Math.PI;function aa(t){return(t%=ia)<0&&(t+=ia),t}var sa=2*Math.PI;function ra(t,e,n,o,l,i,a,s,r){if(0===a)return!1;var c=a;s-=t,r-=e;var u=Math.sqrt(s*s+r*r);if(n<u-c||u+c<n)return!1;if(Math.abs(o-l)%sa<1e-4)return!0;if(i){var _=o;o=aa(l),l=aa(_)}else o=aa(o),l=aa(l);l<o&&(l+=sa);var d=Math.atan2(r,s);return d<0&&(d+=sa),o<=d&&d<=l||o<=d+sa&&d+sa<=l}function ca(t,e,n,o,l,i){if(e<i&&o<i||i<e&&i<o)return 0;if(o===e)return 0;var a=o<e?1:-1,s=(i-e)/(o-e);1!=s&&0!=s||(a=o<e?.5:-.5);var r=s*(n-t)+t;return r===l?1/0:l<r?a:0}var ua=ea.CMD,_a=2*Math.PI,da=[-1,-1,-1],ha=[-1,-1];function ya(t,e,n,o,l,i,a,s,r,c){if(e<c&&o<c&&i<c&&s<c||c<e&&c<o&&c<i&&c<s)return 0;var u,_=function(t,e,n,o,l,i){var a=o+3*(e-n)-t,s=3*(n-2*e+t),r=3*(e-t),c=t-l,u=s*s-3*a*r,_=s*r-9*a*c,d=r*r-3*s*c,h=0;if(fi(u)&&fi(_))fi(s)?i[0]=0:0<=(B=-r/s)&&B<=1&&(i[h++]=B);else{var y=_*_-4*u*d;if(fi(y)){var p=_/u,m=-p/2;0<=(B=-s/a+p)&&B<=1&&(i[h++]=B),0<=m&&m<=1&&(i[h++]=m)}else if(0<y){var k=_i(y),g=u*s+1.5*a*(-_+k),f=u*s+1.5*a*(-_-k);0<=(B=(-s-((g=g<0?-ui(-g,pi):ui(g,pi))+(f=f<0?-ui(-f,pi):ui(f,pi))))/(3*a))&&B<=1&&(i[h++]=B)}else{var b=(2*u*s-3*a*_)/(2*_i(u*u*u)),v=Math.acos(b)/3,T=_i(u),E=Math.cos(v),B=(-s-2*T*E)/(3*a),I=(m=(-s+T*(E+yi*Math.sin(v)))/(3*a),(-s+T*(E-yi*Math.sin(v)))/(3*a));0<=B&&B<=1&&(i[h++]=B),0<=m&&m<=1&&(i[h++]=m),0<=I&&I<=1&&(i[h++]=I)}}return h}(e,o,i,s,c,da);if(0===_)return 0;for(var d,h,y=0,p=-1,m=0;m<_;m++){var k=da[m],g=0===k||1===k?.5:1;vi(t,n,l,a,k)<r||(p<0&&(p=Ei(e,o,i,s,ha),ha[1]<ha[0]&&1<p&&(u=ha[0],ha[0]=ha[1],ha[1]=u),d=vi(e,o,i,s,ha[0]),1<p&&(h=vi(e,o,i,s,ha[1]))),2===p?k<ha[0]?y+=d<e?g:-g:k<ha[1]?y+=h<d?g:-g:y+=s<h?g:-g:k<ha[0]?y+=d<e?g:-g:y+=s<d?g:-g)}return y}function pa(t,e,n,o,l,i,a,s){if(e<s&&o<s&&i<s||s<e&&s<o&&s<i)return 0;var r=function(t,e,n,o,l){var i=t-2*e+n,a=2*(e-t),s=t-o,r=0;if(fi(i))bi(a)&&0<=(u=-s/a)&&u<=1&&(l[r++]=u);else{var c=a*a-4*i*s;if(fi(c))0<=(u=-a/(2*i))&&u<=1&&(l[r++]=u);else if(0<c){var u,_=_i(c),d=(-a-_)/(2*i);0<=(u=(-a+_)/(2*i))&&u<=1&&(l[r++]=u),0<=d&&d<=1&&(l[r++]=d)}}return r}(e,o,i,s,da);if(0===r)return 0;var c=Oi(e,o,i);if(0<=c&&c<=1){for(var u=0,_=Ii(e,o,i,c),d=0;d<r;d++){var h=0===da[d]||1===da[d]?.5:1;Ii(t,n,l,da[d])<a||(da[d]<c?u+=_<e?h:-h:u+=i<_?h:-h)}return u}return h=0===da[0]||1===da[0]?.5:1,Ii(t,n,l,da[0])<a?0:i<e?h:-h}function ma(t,e,n,o,l,i,a,s){if(n<(s-=e)||s<-n)return 0;var r=Math.sqrt(n*n-s*s);da[0]=-r,da[1]=r;var c=Math.abs(o-l);if(c<1e-4)return 0;if(c%_a<1e-4){l=_a;var u=i?1:-1;return a>=da[o=0]+t&&a<=da[1]+t?u:0}i?(r=o,o=aa(l),l=aa(r)):(o=aa(o),l=aa(l)),l<o&&(l+=_a);for(var _=0,d=0;d<2;d++){var h=da[d];if(a<h+t){var y=Math.atan2(s,h);u=i?1:-1,y<0&&(y=_a+y),(o<=y&&y<=l||o<=y+_a&&y+_a<=l)&&(y>Math.PI/2&&y<1.5*Math.PI&&(u=-u),_+=u)}}return _}function ka(t,e,n,o,l){for(var i=0,a=0,s=0,r=0,c=0,u=0;u<t.length;){var _=t[u++];switch(_===ua.M&&1<u&&(n||(i+=ca(a,s,r,c,o,l))),1===u&&(r=a=t[u],c=s=t[u+1]),_){case ua.M:a=r=t[u++],s=c=t[u++];break;case ua.L:if(n){if(na(a,s,t[u],t[u+1],e,o,l))return!0}else i+=ca(a,s,t[u],t[u+1],o,l)||0;a=t[u++],s=t[u++];break;case ua.C:if(n){if(oa(a,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],e,o,l))return!0}else i+=ya(a,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],o,l)||0;a=t[u++],s=t[u++];break;case ua.Q:if(n){if(la(a,s,t[u++],t[u++],t[u],t[u+1],e,o,l))return!0}else i+=pa(a,s,t[u++],t[u++],t[u],t[u+1],o,l)||0;a=t[u++],s=t[u++];break;case ua.A:var d=t[u++],h=t[u++],y=t[u++],p=t[u++],m=t[u++],k=t[u++];u+=1;var g=1-t[u++],f=Math.cos(m)*y+d,b=Math.sin(m)*p+h;1<u?i+=ca(a,s,f,b,o,l):(r=f,c=b);var v=(o-d)*p/y+d;if(n){if(ra(d,h,p,m,m+k,g,e,v,l))return!0}else i+=ma(d,h,p,m,m+k,g,v,l);a=Math.cos(m+k)*y+d,s=Math.sin(m+k)*p+h;break;case ua.R:if(r=a=t[u++],c=s=t[u++],f=r+t[u++],b=c+t[u++],n){if(na(r,c,f,c,e,o,l)||na(f,c,f,b,e,o,l)||na(f,b,r,b,e,o,l)||na(r,b,r,c,e,o,l))return!0}else i+=ca(f,c,f,b,o,l),i+=ca(r,b,r,c,o,l);break;case ua.Z:if(n){if(na(a,s,r,c,e,o,l))return!0}else i+=ca(a,s,r,c,o,l);a=r,s=c}}return n||function(t,e){return Math.abs(t-e)<1e-4}(s,c)||(i+=ca(a,s,r,c,o,l)||0),0!==i}var ga=qn.prototype.getCanvasPattern,fa=Math.abs,ba=new ea(!0);function va(t){qo.call(this,t),this.path=null}function Ta(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}va.prototype={constructor:va,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,o=this.style,l=this.path||ba,i=o.hasStroke(),a=o.hasFill(),s=o.fill,r=o.stroke,c=a&&!!s.colorStops,u=i&&!!r.colorStops,_=a&&!!s.image,d=i&&!!r.image;o.bind(t,this,e),this.setTransform(t),this.__dirty&&(c&&(n=n||this.getBoundingRect(),this._fillGradient=o.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=o.getGradient(t,r,n))),c?t.fillStyle=this._fillGradient:_&&(t.fillStyle=ga.call(s,t)),u?t.strokeStyle=this._strokeGradient:d&&(t.strokeStyle=ga.call(r,t));var h=o.lineDash,y=o.lineDashOffset,p=!!t.setLineDash,m=this.getGlobalScale();if(l.setScale(m[0],m[1],this.segmentIgnoreThreshold),this.__dirtyPath||h&&!p&&i?(l.beginPath(t),h&&!p&&(l.setLineDash(h),l.setLineDashOffset(y)),this.buildPath(l,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=o.fillOpacity){var k=t.globalAlpha;t.globalAlpha=o.fillOpacity*o.opacity,l.fill(t),t.globalAlpha=k}else l.fill(t);h&&p&&(t.setLineDash(h),t.lineDashOffset=y),i&&(null!=o.strokeOpacity?(k=t.globalAlpha,t.globalAlpha=o.strokeOpacity*o.opacity,l.stroke(t),t.globalAlpha=k):l.stroke(t)),h&&p&&t.setLineDash([]),null!=o.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new ea},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var o=this.path;o=o||(this.path=new ea),this.__dirtyPath&&(o.beginPath(),this.buildPath(o,this.shape,!1)),t=o.getBoundingRect()}if(this._rect=t,e.hasStroke()){var l=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){l.copy(t);var i=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(i=Math.max(i,this.strokeContainThreshold||4)),1e-10<a&&(l.width+=i/a,l.height+=i/a,l.x-=i/a/2,l.y-=i/a/2)}return l}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),o=this.getBoundingRect(),l=this.style;if(t=n[0],e=n[1],o.contain(t,e)){var i=this.path.data;if(l.hasStroke()){var a=l.lineWidth,s=l.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(l.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(t,e,n,o){return ka(t,e,!0,n,o)}(i,a/s,t,e)))return!0}if(l.hasFill())return function(t,e,n){return ka(t,0,!1,e,n)}(i,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):qo.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(L(t))for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<fa(t[0]-1)&&1e-10<fa(t[3]-1)?Math.sqrt(fa(t[0]*t[3]-t[2]*t[1])):1}},va.extend=function(t){function e(e){va.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var o=this.shape;for(var l in n)!o.hasOwnProperty(l)&&n.hasOwnProperty(l)&&(o[l]=n[l])}t.init&&t.init.call(this,e)}for(var n in B(e,va),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},B(va,qo);var Ea=ea.CMD,Ba=[[],[],[]],Ia=Math.sqrt,Ra=Math.atan2,Oa=Math.sqrt,Ca=Math.sin,Na=Math.cos,wa=Math.PI,Aa=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(Ta(t)*Ta(e))},Ma=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Aa(t,e))};function Sa(t,e,n,o,l,i,a,s,r,c,u){var _=r*(wa/180),d=Na(_)*(t-n)/2+Ca(_)*(e-o)/2,h=-1*Ca(_)*(t-n)/2+Na(_)*(e-o)/2,y=d*d/(a*a)+h*h/(s*s);1<y&&(a*=Oa(y),s*=Oa(y));var p=(l===i?-1:1)*Oa((a*a*(s*s)-a*a*(h*h)-s*s*(d*d))/(a*a*(h*h)+s*s*(d*d)))||0,m=p*a*h/s,k=p*-s*d/a,g=(t+n)/2+Na(_)*m-Ca(_)*k,f=(e+o)/2+Ca(_)*m+Na(_)*k,b=Ma([1,0],[(d-m)/a,(h-k)/s]),v=[(d-m)/a,(h-k)/s],T=[(-1*d-m)/a,(-1*h-k)/s],E=Ma(v,T);Aa(v,T)<=-1&&(E=wa),1<=Aa(v,T)&&(E=0),0===i&&0<E&&(E-=2*wa),1===i&&E<0&&(E+=2*wa),u.addData(c,g,f,a,s,b,E,_,i)}var Pa=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,xa=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Da(t,e){var n=function(t){if(!t)return new ea;for(var e,n=0,o=0,l=n,i=o,a=new ea,s=ea.CMD,r=t.match(Pa),c=0;c<r.length;c++){for(var u,_=r[c],d=_.charAt(0),h=_.match(xa)||[],y=h.length,p=0;p<y;p++)h[p]=parseFloat(h[p]);for(var m=0;m<y;){var k,g,f,b,v,T,E,B=n,I=o;switch(d){case"l":n+=h[m++],o+=h[m++],u=s.L,a.addData(u,n,o);break;case"L":n=h[m++],o=h[m++],u=s.L,a.addData(u,n,o);break;case"m":n+=h[m++],o+=h[m++],u=s.M,a.addData(u,n,o),l=n,i=o,d="l";break;case"M":n=h[m++],o=h[m++],u=s.M,a.addData(u,n,o),l=n,i=o,d="L";break;case"h":n+=h[m++],u=s.L,a.addData(u,n,o);break;case"H":n=h[m++],u=s.L,a.addData(u,n,o);break;case"v":o+=h[m++],u=s.L,a.addData(u,n,o);break;case"V":o=h[m++],u=s.L,a.addData(u,n,o);break;case"C":u=s.C,a.addData(u,h[m++],h[m++],h[m++],h[m++],h[m++],h[m++]),n=h[m-2],o=h[m-1];break;case"c":u=s.C,a.addData(u,h[m++]+n,h[m++]+o,h[m++]+n,h[m++]+o,h[m++]+n,h[m++]+o),n+=h[m-2],o+=h[m-1];break;case"S":k=n,g=o;var R=a.len(),O=a.data;e===s.C&&(k+=n-O[R-4],g+=o-O[R-3]),u=s.C,B=h[m++],I=h[m++],n=h[m++],o=h[m++],a.addData(u,k,g,B,I,n,o);break;case"s":k=n,g=o,R=a.len(),O=a.data,e===s.C&&(k+=n-O[R-4],g+=o-O[R-3]),u=s.C,B=n+h[m++],I=o+h[m++],n+=h[m++],o+=h[m++],a.addData(u,k,g,B,I,n,o);break;case"Q":B=h[m++],I=h[m++],n=h[m++],o=h[m++],u=s.Q,a.addData(u,B,I,n,o);break;case"q":B=h[m++]+n,I=h[m++]+o,n+=h[m++],o+=h[m++],u=s.Q,a.addData(u,B,I,n,o);break;case"T":k=n,g=o,R=a.len(),O=a.data,e===s.Q&&(k+=n-O[R-4],g+=o-O[R-3]),n=h[m++],o=h[m++],u=s.Q,a.addData(u,k,g,n,o);break;case"t":k=n,g=o,R=a.len(),O=a.data,e===s.Q&&(k+=n-O[R-4],g+=o-O[R-3]),n+=h[m++],o+=h[m++],u=s.Q,a.addData(u,k,g,n,o);break;case"A":f=h[m++],b=h[m++],v=h[m++],T=h[m++],E=h[m++],Sa(B=n,I=o,n=h[m++],o=h[m++],T,E,f,b,v,u=s.A,a);break;case"a":f=h[m++],b=h[m++],v=h[m++],T=h[m++],E=h[m++],Sa(B=n,I=o,n+=h[m++],o+=h[m++],T,E,f,b,v,u=s.A,a)}}"z"!==d&&"Z"!==d||(u=s.Z,a.addData(u),n=l,o=i),e=u}return a.toStatic(),a}(t);return(e=e||{}).buildPath=function(t){if(t.setData)t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){(function(t,e){var n,o,l,i,a,s=t.data,r=Ea.M,c=Ea.C,u=Ea.L,_=Ea.R,d=Ea.A,h=Ea.Q;for(i=l=0;l<s.length;){switch(n=s[l++],i=l,o=0,n){case r:case u:o=1;break;case c:o=3;break;case h:o=2;break;case d:var y=e[4],p=e[5],m=Ia(e[0]*e[0]+e[1]*e[1]),k=Ia(e[2]*e[2]+e[3]*e[3]),g=Ra(-e[1]/k,e[0]/m);s[l]*=m,s[l++]+=y,s[l]*=k,s[l++]+=p,s[l++]*=m,s[l++]*=k,s[l++]+=g,s[l++]+=g,i=l+=2;break;case _:f[0]=s[l++],f[1]=s[l++],Tt(f,f,e),s[i++]=f[0],s[i++]=f[1],f[0]+=s[l++],f[1]+=s[l++],Tt(f,f,e),s[i++]=f[0],s[i++]=f[1]}for(a=0;a<o;a++){var f;(f=Ba[a])[0]=s[l++],f[1]=s[l++],Tt(f,f,e),s[i++]=f[0],s[i++]=f[1]}}})(n,t),this.dirty(!0)},e}function La(t,e){return new va(Da(t,e))}var Ua=function(t){qo.call(this,t)};function Fa(t){return l.browser.ie&&11<=l.browser.version?function(){var e,n=this.__clipPaths,o=this.style;if(n)for(var l=0;l<n.length;l++){var i=n[l],a=i&&i.shape,s=i&&i.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var r=0;r<Va.length;r++)Va[r][2]=o[Va[r][0]],o[Va[r][0]]=Va[r][1];e=!0;break}}if(t.apply(this,arguments),e)for(r=0;r<Va.length;r++)o[Va[r][0]]=Va[r][2]}:t}Ua.prototype={constructor:Ua,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&So(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var o=n.text;null!=o&&(o+=""),Xo(o,n)?(this.setTransform(t),xo(this,t,o,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=Hn},getBoundingRect:function(){var t=this.style;if(this.__dirty&&So(t),!this._rect){var e=t.text;null!=e?e+="":e="";var n=ho(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,jo(t.textStroke,t.textStrokeWidth)){var o=t.textStrokeWidth;n.x-=o/2,n.y-=o/2,n.width+=o,n.height+=o}this._rect=n}return this._rect}},B(Ua,qo);var Ha=va.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Va=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Ga=va.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Fa(va.prototype.brush),buildPath:function(t,e){var n=e.cx,o=e.cy,l=Math.max(e.r0||0,0),i=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,r=e.clockwise,c=Math.cos(a),u=Math.sin(a);t.moveTo(c*l+n,u*l+o),t.lineTo(c*i+n,u*i+o),t.arc(n,o,i,a,s,!r),t.lineTo(Math.cos(s)*l+n,Math.sin(s)*l+o),0!==l&&t.arc(n,o,l,s,a,r),t.closePath()}}),ja=va.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,o=e.cy,l=2*Math.PI;t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,l,!1),t.moveTo(n+e.r0,o),t.arc(n,o,e.r0,0,l,!0)}});function Wa(t,e,n,o,l,i,a){var s=.5*(n-t),r=.5*(o-e);return(2*(e-n)+s+r)*a+(-3*(e-n)-2*s-r)*i+s*l+e}function Ka(t,e,n){var o=e.points,l=e.smooth;if(o&&2<=o.length){if(l&&"spline"!==l){var i=function(t,e,n,o){var l,i,a,s,r=[],c=[],u=[],_=[];if(o){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=0,h=t.length;d<h;d++)Et(a,a,t[d]),Bt(s,s,t[d]);Et(a,a,o[0]),Bt(s,s,o[1])}for(d=0,h=t.length;d<h;d++){var y=t[d];if(n)l=t[d?d-1:h-1],i=t[(d+1)%h];else{if(0===d||d===h-1){r.push(at(t[d]));continue}l=t[d-1],i=t[d+1]}ut(c,i,l),pt(c,c,e);var p=kt(y,l),m=kt(y,i),k=p+m;0!==k&&(p/=k,m/=k),pt(u,c,-p),pt(_,c,m);var g=rt([],y,u),f=rt([],y,_);o&&(Bt(g,g,a),Et(g,g,s),Bt(f,f,a),Et(f,f,s)),r.push(g),r.push(f)}return n&&r.push(r.shift()),r}(o,l,n,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var a=o.length,s=0;s<(n?a:a-1);s++){var r=i[2*s],c=i[2*s+1],u=o[(s+1)%a];t.bezierCurveTo(r[0],r[1],c[0],c[1],u[0],u[1])}}else{"spline"===l&&(o=function(t,e){for(var n=t.length,o=[],l=0,i=1;i<n;i++)l+=kt(t[i-1],t[i]);var a=l/2;for(a=a<n?n:a,i=0;i<a;i++){var s,r,c,u=i/(a-1)*(e?n:n-1),_=Math.floor(u),d=u-_,h=t[_%n];c=e?(s=t[(_-1+n)%n],r=t[(_+1)%n],t[(_+2)%n]):(s=t[0===_?_:_-1],r=t[n-2<_?n-1:_+1],t[n-3<_?n-1:_+2]);var y=d*d,p=d*y;o.push([Wa(s[0],h[0],r[0],c[0],d,y,p),Wa(s[1],h[1],r[1],c[1],d,y,p)])}return o}(o,n)),t.moveTo(o[0][0],o[0][1]),s=1;for(var _=o.length;s<_;s++)t.lineTo(o[s][0],o[s][1])}n&&t.closePath()}}var Ya=va.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){Ka(t,e,!0)}}),Xa=va.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Ka(t,e,!1)}}),$a=Math.round;function za(t,e,n){if(e){var o=e.x1,l=e.x2,i=e.y1,a=e.y2;t.x1=o,t.x2=l,t.y1=i,t.y2=a;var s=n&&n.lineWidth;s&&($a(2*o)===$a(2*l)&&(t.x1=t.x2=Ja(o,s,!0)),$a(2*i)===$a(2*a)&&(t.y1=t.y2=Ja(i,s,!0)))}}function qa(t,e,n){if(e){var o=e.x,l=e.y,i=e.width,a=e.height;t.x=o,t.y=l,t.width=i,t.height=a;var s=n&&n.lineWidth;s&&(t.x=Ja(o,s,!0),t.y=Ja(l,s,!0),t.width=Math.max(Ja(o+i,s,!1)-t.x,0===i?0:1),t.height=Math.max(Ja(l+a,s,!1)-t.y,0===a?0:1))}}function Ja(t,e,n){if(!e)return t;var o=$a(2*t);return(o+$a(e))%2==0?o/2:(o+(n?1:-1))/2}var Za={},Qa=va.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,o,l,i;this.subPixelOptimize?(qa(Za,e,this.style),n=Za.x,o=Za.y,l=Za.width,i=Za.height,Za.r=e.r,e=Za):(n=e.x,o=e.y,l=e.width,i=e.height),e.r?Ro(t,e):t.rect(n,o,l,i),t.closePath()}}),ts={},es=va.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,o,l,i;i=this.subPixelOptimize?(za(ts,e,this.style),n=ts.x1,o=ts.y1,l=ts.x2,ts.y2):(n=e.x1,o=e.y1,l=e.x2,e.y2);var a=e.percent;0!==a&&(t.moveTo(n,o),a<1&&(l=n*(1-a)+l*a,i=o*(1-a)+i*a),t.lineTo(l,i))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),ns=[];function os(t,e,n){var o=t.cpx2,l=t.cpy2;return null===o||null===l?[(n?Ti:vi)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Ti:vi)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Ri:Ii)(t.x1,t.cpx1,t.x2,e),(n?Ri:Ii)(t.y1,t.cpy1,t.y2,e)]}function ls(t){this.colorStops=t||[]}var is=va.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,o=e.y1,l=e.x2,i=e.y2,a=e.cpx1,s=e.cpy1,r=e.cpx2,c=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,o),null==r||null==c?(u<1&&(Ci(n,a,l,u,ns),a=ns[1],l=ns[2],Ci(o,s,i,u,ns),s=ns[1],i=ns[2]),t.quadraticCurveTo(a,s,l,i)):(u<1&&(Bi(n,a,r,l,u,ns),a=ns[1],r=ns[2],l=ns[3],Bi(o,s,c,i,u,ns),s=ns[1],c=ns[2],i=ns[3]),t.bezierCurveTo(a,s,r,c,l,i)))},pointAt:function(t){return os(this.shape,t,!1)},tangentAt:function(t){var e=os(this.shape,t,!0);return mt(e,e)}}),as=va.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,o=e.cy,l=Math.max(e.r,0),i=e.startAngle,a=e.endAngle,s=e.clockwise,r=Math.cos(i),c=Math.sin(i);t.moveTo(r*l+n,c*l+o),t.arc(n,o,l,i,a,!s)}}),ss=va.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],o=0;o<n.length;o++)n[o].buildPath(t,n[o].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),va.prototype.getBoundingRect.call(this)}});function rs(t,e,n,o,l,i){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==o?0:o,this.type="linear",this.global=i||!1,ls.call(this,l)}function cs(t,e,n,o,l){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=l||!1,ls.call(this,o)}function us(t){qo.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}ls.prototype={constructor:ls,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},rs.prototype={constructor:rs},B(rs,ls),cs.prototype={constructor:cs},B(cs,ls),us.prototype.incremental=!0,us.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},us.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},us.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},us.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},us.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},us.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++)(o=this._displayables[n]).beforeBrush&&o.beforeBrush(t),o.brush(t,n===this._cursor?null:this._displayables[n-1]),o.afterBrush&&o.afterBrush(t);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var o;(o=this._temporaryDisplayables[n]).beforeBrush&&o.beforeBrush(t),o.brush(t,0===n?null:this._temporaryDisplayables[n-1]),o.afterBrush&&o.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var _s=[];us.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Cn(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],o=n.getBoundingRect().clone();n.needLocalTransform()&&o.applyTransform(n.getLocalTransform(_s)),t.union(o)}this._rect=t}return this._rect},us.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++)if(this._displayables[o].contain(t,e))return!0;return!1},B(us,qo);var ds=Math.max,hs=Math.min,ys={},ps={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},ms="emphasis",ks="normal",gs=1,fs={},bs={};function vs(t){return va.extend(t)}function Ts(t,e){bs[t]=e}function Es(t){if(bs.hasOwnProperty(t))return bs[t]}function Bs(t,e,n,o){var l=La(t,e);return n&&("center"===o&&(n=Rs(n,l.getBoundingRect())),Cs(l,n)),l}function Is(t,e,n){var o=new Jo({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var l={width:t.width,height:t.height};o.setStyle(Rs(e,l))}}});return o}function Rs(t,e){var n,o=e.width/e.height,l=t.height*o;return n=l<=t.width?t.height:(l=t.width)/o,{x:t.x+t.width/2-l/2,y:t.y+t.height/2-n/2,width:l,height:n}}var Os=function(t,e){for(var n=[],o=t.length,l=0;l<o;l++){var i=t[l];i.path||i.createPathProxy(),i.__dirtyPath&&i.buildPath(i.path,i.shape,!0),n.push(i.path)}var a=new va(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a};function Cs(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}var Ns=Ja;function ws(t){return null!=t&&"none"!==t}var As=Q(),Ms=0;function Ss(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,o=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=o?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var l=t,i=t.style;o&&(i=(l=n.addHover(t)).style),tr(i),o||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var o=t.style;for(var l in e)null!=e[l]&&(n[l]=o[l]);n.fill=o.fill,n.stroke=o.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}(l),i.extendFrom(e),Ps(i,e,"fill"),Ps(i,e,"stroke"),Qs(i),o||(t.dirty(!1),t.z2+=1)}}}function Ps(t,e,n){!ws(e[n])&&ws(t[n])&&(t[n]=function(t){if("string"!=typeof t)return t;var e=As.get(t);return e||(e=je(t,-.1),Ms<1e4&&(As.set(t,e),Ms++)),e}(t[n]))}function xs(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,o=t.__cachedNormalStl;o&&(tr(n),t.setStyle(o),Qs(n));var l=t.__cachedNormalZ2;null!=l&&t.z2-l==1&&(t.z2=l)}}function Ds(t,e,n){var o,l=ks,i=ks;t.__highlighted&&(l=ms,o=!0),e(t,n),t.__highlighted&&(i=ms,o=!0),t.isGroup&&t.traverse(function(t){t.isGroup||e(t,n)}),o&&t.__highDownOnUpdate&&t.__highDownOnUpdate(l,i)}function Ls(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,xs(t),Ss(t))}function Us(t){Gs(this,t)||this.__highByOuter||Ds(this,Ss)}function Fs(t){Gs(this,t)||this.__highByOuter||Ds(this,xs)}function Hs(t){this.__highByOuter|=1<<(t||0),Ds(this,Ss)}function Vs(t){(this.__highByOuter&=~(1<<(t||0)))||Ds(this,xs)}function Gs(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function js(t,e){Ws(t,!0),Ds(t,Ls,e)}function Ws(t,e){var n=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var o=n?"off":"on";t[o]("mouseover",Us)[o]("mouseout",Fs),t[o]("emphasis",Hs)[o]("normal",Vs),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function Ks(t){return!(!t||!t.__highDownDispatcher)}function Ys(t){var e=fs[t];return null==e&&gs<=32&&(e=fs[t]=gs++),e}function Xs(t,e,n,o,l,i,a){var s,r=(l=l||ys).labelFetcher,c=l.labelDataIndex,u=l.labelDimIndex,_=l.labelProp,d=n.getShallow("show"),h=o.getShallow("show");(d||h)&&(r&&(s=r.getFormattedLabel(c,"normal",null,u,_)),null==s&&(s=x(l.defaultText)?l.defaultText(c,l):l.defaultText));var y=d?s:null,p=h?j(r?r.getFormattedLabel(c,"emphasis",null,u,_):null,s):null;null==y&&null==p||(zs(t,n,i,l),zs(e,o,a,l,!0)),t.text=y,e.text=p}function $s(t,e,n){var o=t.style;e&&(tr(o),t.setStyle(e),Qs(o)),o=t.__hoverStl,n&&o&&(tr(o),f(o,n),Qs(o))}function zs(t,e,n,o,l){return qs(t,e,o,l),n&&f(t,n),t}function qs(t,e,n,o){if((n=n||ys).isRectText){var l;n.getTextPosition?l=n.getTextPosition(e,o):"outside"===(l=e.getShallow("position")||(o?null:"inside"))&&(l="top"),t.textPosition=l,t.textOffset=e.getShallow("offset");var i=e.getShallow("rotate");null!=i&&(i*=Math.PI/180),t.textRotation=i,t.textDistance=j(e.getShallow("distance"),o?null:5)}var a,s=e.ecModel,r=s&&s.option.textStyle,c=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||ys).rich;if(n)for(var o in e=e||{},n)n.hasOwnProperty(o)&&(e[o]=1);t=t.parentModel}return e}(e);if(c)for(var u in a={},c)if(c.hasOwnProperty(u)){var _=e.getModel(["rich",u]);Js(a[u]={},_,r,n,o)}return t.rich=a,Js(t,e,r,n,o,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function Js(t,e,n,o,l,i){n=!l&&n||ys,t.textFill=Zs(e.getShallow("color"),o)||n.color,t.textStroke=Zs(e.getShallow("textBorderColor"),o)||n.textBorderColor,t.textStrokeWidth=j(e.getShallow("textBorderWidth"),n.textBorderWidth),l||(i&&(t.insideRollbackOpt=o,Qs(t)),null==t.textFill&&(t.textFill=o.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),i&&o.disableBox||(t.textBackgroundColor=Zs(e.getShallow("backgroundColor"),o),t.textPadding=e.getShallow("padding"),t.textBorderColor=Zs(e.getShallow("borderColor"),o),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Zs(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Qs(t){var e,n=t.textPosition,o=t.insideRollbackOpt;if(o&&null==t.textFill){var l=o.autoColor,i=o.isRectText,a=o.useInsideStyle,s=!1!==a&&(!0===a||i&&n&&"string"==typeof n&&0<=n.indexOf("inside")),r=!s&&null!=l;(s||r)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),s&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=l,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),r&&(t.textFill=l)}t.insideRollback=e}function tr(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function er(t,e){var n=e&&e.getModel("textStyle");return $([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function nr(t,e,n,o,l,i){if("function"==typeof l&&(i=l,l=null),o&&o.isAnimationEnabled()){var a=t?"Update":"",s=o.getShallow("animationDuration"+a),r=o.getShallow("animationEasing"+a),c=o.getShallow("animationDelay"+a);"function"==typeof c&&(c=c(l,o.getAnimationDelayParams?o.getAnimationDelayParams(e,l):null)),"function"==typeof s&&(s=s(l)),0<s?e.animateTo(n,s,c||0,r,i,!!i):(e.stopAnimation(),e.attr(n),i&&i())}else e.stopAnimation(),e.attr(n),i&&i()}function or(t,e,n,o,l){nr(!0,t,e,n,o,l)}function lr(t,e,n,o,l){nr(!1,t,e,n,o,l)}function ir(t,e){for(var n=ae([]);t&&t!==e;)re(n,t.getLocalTransform(),n),t=t.parent;return n}function ar(t,e,n){return e&&!R(e)&&(e=ke.getLocalTransform(e)),n&&(e=de([],e)),Tt([],t,e)}function sr(t,e,n){var o=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),l=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),i=["left"===t?-o:"right"===t?o:0,"top"===t?-l:"bottom"===t?l:0];return i=ar(i,e,n),Math.abs(i[0])>Math.abs(i[1])?0<i[0]?"right":"left":0<i[1]?"bottom":"top"}function rr(t,e,n,o){if(t&&e){var l,i=(l={},t.traverse(function(t){!t.isGroup&&t.anid&&(l[t.anid]=t)}),l);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=i[t.anid];if(e){var o=a(t);t.attr(a(e)),or(t,o,n,t.dataIndex)}}})}function a(t){var e={position:at(t.position),rotation:t.rotation};return t.shape&&(e.shape=f({},t.shape)),e}}function cr(t,e){return C(t,function(t){var n=t[0];n=ds(n,e.x),n=hs(n,e.x+e.width);var o=t[1];return o=ds(o,e.y),[n,o=hs(o,e.y+e.height)]})}function ur(t,e,n){var o=(e=f({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(o.image=t.slice(8),b(o,n),new Jo(e)):Bs(t.replace("path://",""),e,n,"center")}function _r(t,e,n,o,l){for(var i=0,a=l[l.length-1];i<l.length;i++){var s=l[i];if(dr(t,e,n,o,s[0],s[1],a[0],a[1]))return!0;a=s}}function dr(t,e,n,o,l,i,a,s){var r=n-t,c=o-e,u=a-l,_=s-i,d=hr(u,_,r,c);if(function(t){return t<=1e-6&&-1e-6<=t}(d))return!1;var h=t-l,y=e-i,p=hr(h,y,r,c)/d;if(p<0||1<p)return!1;var m=hr(h,y,u,_)/d;return!(m<0||1<m)}function hr(t,e,n,o){return t*o-n*e}Ts("circle",Ha),Ts("sector",Ga),Ts("ring",ja),Ts("polygon",Ya),Ts("polyline",Xa),Ts("rect",Qa),Ts("line",es),Ts("bezierCurve",is),Ts("arc",as);var yr=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:ps,extendShape:vs,extendPath:function(t,e){return function(t,e){return va.extend(Da(t,e))}(t,e)},registerShape:Ts,getShapeClass:Es,makePath:Bs,makeImage:Is,mergePath:Os,resizePath:Cs,subPixelOptimizeLine:function(t){return za(t.shape,t.shape,t.style),t},subPixelOptimizeRect:function(t){return qa(t.shape,t.shape,t.style),t},subPixelOptimize:Ns,setElementHoverStyle:Ls,setHoverStyle:js,setAsHighDownDispatcher:Ws,isHighDownDispatcher:Ks,getHighlightDigit:Ys,setLabelStyle:Xs,modifyLabelStyle:$s,setTextStyle:zs,setText:function(t,e,n){var o,l={isRectText:!0};!1===n?o=!0:l.autoColor=n,qs(t,e,l,o)},getFont:er,updateProps:or,initProps:lr,getTransform:ir,applyTransform:ar,transformDirection:sr,groupTransition:rr,clipPointsByRect:cr,clipRectByRect:function(t,e){var n=ds(t.x,e.x),o=hs(t.x+t.width,e.x+e.width),l=ds(t.y,e.y),i=hs(t.y+t.height,e.y+e.height);if(n<=o&&l<=i)return{x:n,y:l,width:o-n,height:i-l}},createIcon:ur,linePolygonIntersect:_r,lineLineIntersect:dr,Group:Nn,Image:Jo,Text:Ua,Circle:Ha,Sector:Ga,Ring:ja,Polygon:Ya,Polyline:Xa,Rect:Qa,Line:es,BezierCurve:is,Arc:as,IncrementalDisplayable:us,CompoundPath:ss,LinearGradient:rs,RadialGradient:cs,BoundingRect:Cn}),pr=["textStyle","color"],mr={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(pr):null)},getFont:function(){return er({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return ho(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},kr=ii([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),gr={getItemStyle:function(t,e){var n=kr(this,t,e),o=this.getBorderLineDash();return o&&(n.lineDash=o),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},fr=I,br=Wl();function vr(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function Tr(t,e,n){for(var o=0;o<e.length&&(!e[o]||null!=(t=t&&"object"==typeof t?t[e[o]]:null));o++);return null==t&&n&&(t=n.get(e)),t}function Er(t,e){var n=br(t).getParent;return n?n.call(t,e):t.parentModel}vr.prototype={constructor:vr,init:null,mergeOption:function(t){k(this.option,t,!0)},get:function(t,e){return null==t?this.option:Tr(this.option,this.parsePath(t),!e&&Er(this,t))},getShallow:function(t,e){var n=this.option,o=null==n?n:n[t],l=!e&&Er(this,t);return null==o&&l&&(o=l.getShallow(t)),o},getModel:function(t,e){var n;return new vr(null==t?this.option:Tr(this.option,t=this.parsePath(t)),e=e||(n=Er(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(m(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){br(this).getParent=t},isAnimationEnabled:function(){if(!l.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Ql(vr),ei(vr),fr(vr,si),fr(vr,ci),fr(vr,mr),fr(vr,gr);var Br=0;function Ir(t){return[t||"",Br++,Math.random().toFixed(5)].join("_")}var Rr=1e-4;function Or(t,e,n,o){var l=e[1]-e[0],i=n[1]-n[0];if(0==l)return 0==i?n[0]:(n[0]+n[1])/2;if(o)if(0<l){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/l*i+n[0]}function Cr(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(t){return t.replace(/^\s+|\s+$/g,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function Nr(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function wr(t){return t.sort(function(t,e){return t-e}),t}function Ar(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Mr(t){var e=t.toString(),n=e.indexOf("e");if(0<n){var o=+e.slice(n+1);return o<0?-o:0}var l=e.indexOf(".");return l<0?0:e.length-1-l}function Sr(t,e){var n=Math.log,o=Math.LN10,l=Math.floor(n(t[1]-t[0])/o),i=Math.round(n(Math.abs(e[1]-e[0]))/o),a=Math.min(Math.max(-l+i,0),20);return isFinite(a)?a:20}function Pr(t,e,n){if(!t[e])return 0;var o=N(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===o)return 0;for(var l=Math.pow(10,n),i=C(t,function(t){return(isNaN(t)?0:t)/o*l*100}),a=100*l,s=C(i,function(t){return Math.floor(t)}),r=N(s,function(t,e){return t+e},0),c=C(i,function(t,e){return t-s[e]});r<a;){for(var u=Number.NEGATIVE_INFINITY,_=null,d=0,h=c.length;d<h;++d)c[d]>u&&(u=c[d],_=d);++s[_],c[_]=0,++r}return s[e]/l}var xr=9007199254740991;function Dr(t){var e=2*Math.PI;return(t%e+e)%e}function Lr(t){return-Rr<t&&t<Rr}var Ur=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Fr(t){if(t instanceof Date)return t;if("string"!=typeof t)return null==t?new Date(NaN):new Date(Math.round(t));var e=Ur.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}function Hr(t){return Math.pow(10,Vr(t))}function Vr(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return 10<=t/Math.pow(10,e)&&e++,e}function Gr(t,e){var n=Vr(t),o=Math.pow(10,n),l=t/o;return t=(e?l<1.5?1:l<2.5?2:l<4?3:l<7?5:10:l<1?1:l<2?2:l<3?3:l<5?5:10)*o,-20<=n?+t.toFixed(n<0?-n:0):t}function jr(t){t.sort(function(t,e){return function t(e,n,o){return e.interval[o]<n.interval[o]||e.interval[o]===n.interval[o]&&(e.close[o]-n.close[o]==(o?-1:1)||!o&&t(e,n,1))}(t,e,0)?-1:1});for(var e=-1/0,n=1,o=0;o<t.length;){for(var l=t[o].interval,i=t[o].close,a=0;a<2;a++)l[a]<=e&&(l[a]=e,i[a]=a?1:1-n),e=l[a],n=i[a];l[0]===l[1]&&i[0]*i[1]!=1?t.splice(o,1):o++}return t}function Wr(t){return 0<=t-parseFloat(t)}var Kr=(Object.freeze||Object)({linearMap:Or,parsePercent:Cr,round:Nr,asc:wr,getPrecision:Ar,getPrecisionSafe:Mr,getPixelPrecision:Sr,getPercentWithPrecision:Pr,MAX_SAFE_INTEGER:xr,remRadian:Dr,isRadianAroundZero:Lr,parseDate:Fr,quantity:Hr,quantityExponent:Vr,nice:Gr,quantile:function(t,e){var n=(t.length-1)*e+1,o=Math.floor(n),l=+t[o-1],i=n-o;return i?l+i*(t[o]-l):l},reformIntervals:jr,isNumeric:Wr});function Yr(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")}function Xr(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var $r=Y,zr=/([&<>"'])/g,qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Jr(t){return null==t?"":(t+"").replace(zr,function(t,e){return qr[e]})}function Zr(t,e){return"{"+t+(null==e?"":e)+"}"}var Qr=["a","b","c","d","e","f","g"];function tc(t,e,n){P(e)||(e=[e]);var o=e.length;if(!o)return"";for(var l=e[0].$vars||[],i=0;i<l.length;i++){var a=Qr[i];t=t.replace(Zr(a),Zr(a,0))}for(var s=0;s<o;s++)for(var r=0;r<l.length;r++){var c=e[s][l[r]];t=t.replace(Zr(Qr[r],s),n?Jr(c):c)}return t}function ec(t,e,n){return O(e,function(e,o){t=t.replace("{"+o+"}",n?Jr(e):e)}),t}function nc(t,e){var n=(t=D(t)?{color:t,extraCssText:e}:t||{}).color,o=t.type,l=(e=t.extraCssText,t.renderMode||"html"),i=t.markerId||"X";return n?"html"===l?"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Jr(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Jr(n)+";"+(e||"")+'"></span>':{renderMode:l,content:"{marker"+i+"|}  ",style:{color:n}}:""}function oc(t,e){return"0000".substr(0,e-(t+="").length)+t}function lc(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var o=Fr(e),l=n?"UTC":"",i=o["get"+l+"FullYear"](),a=o["get"+l+"Month"]()+1,s=o["get"+l+"Date"](),r=o["get"+l+"Hours"](),c=o["get"+l+"Minutes"](),u=o["get"+l+"Seconds"](),_=o["get"+l+"Milliseconds"]();return t.replace("MM",oc(a,2)).replace("M",a).replace("yyyy",i).replace("yy",i%100).replace("dd",oc(s,2)).replace("d",s).replace("hh",oc(r,2)).replace("h",r).replace("mm",oc(c,2)).replace("m",c).replace("ss",oc(u,2)).replace("s",u).replace("SSS",oc(_,3))}function ic(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var ac=ko;function sc(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}var rc=(Object.freeze||Object)({addCommas:Yr,toCamelCase:Xr,normalizeCssArray:$r,encodeHTML:Jr,formatTpl:tc,formatTplSimple:ec,getTooltipMarker:nc,formatTime:lc,capitalFirst:ic,truncateText:ac,getTextBoundingRect:function(t){return ho(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},getTextRect:function(t,e,n,o,l,i,a,s){return ho(t,e,n,o,l,s,i,a)},windowOpen:sc}),cc=O,uc=["left","right","top","bottom","width","height"],_c=[["width","left","right"],["height","top","bottom"]];function dc(t,e,n,o,l){var i=0,a=0;null==o&&(o=1/0),null==l&&(l=1/0);var s=0;e.eachChild(function(r,c){var u,_,d=r.position,h=r.getBoundingRect(),y=e.childAt(c+1),p=y&&y.getBoundingRect();if("horizontal"===t){var m=h.width+(p?-p.x+h.x:0);s=o<(u=i+m)||r.newline?(i=0,u=m,a+=s+n,h.height):Math.max(s,h.height)}else{var k=h.height+(p?-p.y+h.y:0);s=l<(_=a+k)||r.newline?(i+=s+n,a=0,_=k,h.width):Math.max(s,h.width)}r.newline||(d[0]=i,d[1]=a,"horizontal"===t?i=u+n:a=_+n)})}var hc=dc;function yc(t,e,n){n=$r(n||0);var o=e.width,l=e.height,i=Cr(t.left,o),a=Cr(t.top,l),s=Cr(t.right,o),r=Cr(t.bottom,l),c=Cr(t.width,o),u=Cr(t.height,l),_=n[2]+n[0],d=n[1]+n[3],h=t.aspect;switch(isNaN(c)&&(c=o-s-d-i),isNaN(u)&&(u=l-r-_-a),null!=h&&(isNaN(c)&&isNaN(u)&&(o/l<h?c=.8*o:u=.8*l),isNaN(c)&&(c=h*u),isNaN(u)&&(u=c/h)),isNaN(i)&&(i=o-s-c-d),isNaN(a)&&(a=l-r-u-_),t.left||t.right){case"center":i=o/2-c/2-n[3];break;case"right":i=o-c-d}switch(t.top||t.bottom){case"middle":case"center":a=l/2-u/2-n[0];break;case"bottom":a=l-u-_}i=i||0,a=a||0,isNaN(c)&&(c=o-d-i-(s||0)),isNaN(u)&&(u=l-_-a-(r||0));var y=new Cn(i+n[3],a+n[0],c,u);return y.margin=n,y}function pc(t,e,n,o,l){var i=!l||!l.hv||l.hv[0],a=!l||!l.hv||l.hv[1],s=l&&l.boundingMode||"all";if(i||a){var r;if("raw"===s)r="group"===t.type?new Cn(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(r=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();(r=r.clone()).applyTransform(c)}e=yc(b({width:r.width,height:r.height},e),n,o);var u=t.position,_=i?e.x-r.x:0,d=a?e.y-r.y:0;t.attr("position","raw"===s?[_,d]:[u[0]+_,u[1]+d])}}function mc(t,e,n){L(n)||(n={});var o=n.ignoreSize;P(o)||(o=[o,o]);var l=a(_c[0],0),i=a(_c[1],1);function a(n,l){var i={},a=0,c={},u=0;if(cc(n,function(e){c[e]=t[e]}),cc(n,function(t){s(e,t)&&(i[t]=c[t]=e[t]),r(i,t)&&a++,r(c,t)&&u++}),o[l])return r(e,n[1])?c[n[2]]=null:r(e,n[2])&&(c[n[1]]=null),c;if(2!==u&&a){if(2<=a)return i;for(var _=0;_<n.length;_++){var d=n[_];if(!s(i,d)&&s(t,d)){i[d]=t[d];break}}return i}return c}function s(t,e){return t.hasOwnProperty(e)}function r(t,e){return null!=t[e]&&"auto"!==t[e]}function c(t,e,n){cc(t,function(t){e[t]=n[t]})}c(_c[0],t,l),c(_c[1],t,i)}function kc(t){return gc({},t)}function gc(t,e){return e&&t&&cc(uc,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}S(dc,"vertical"),S(dc,"horizontal");var fc,bc,vc,Tc=Wl(),Ec=vr.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,o){vr.call(this,t,e,n,o),this.uid=Ir("ec_cpt_model")},init:function(t,e,n,o){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,o=n?kc(t):{};k(t,e.getTheme().get(this.mainType)),k(t,this.getDefaultOption()),n&&mc(t,o,n)},mergeOption:function(t,e){k(this.option,t,!0);var n=this.layoutMode;n&&mc(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=Tc(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var o=n.prototype.defaultOption;o&&e.push(o),n=n.superClass}for(var l={},i=e.length-1;0<=i;i--)l=k(l,e[i],!0);t.defaultOption=l}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function Bc(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}li(Ec,{registerWhenExtend:!0}),bc={},(fc=Ec).registerSubTypeDefaulter=function(t,e){t=Zl(t),bc[t.main]=e},fc.determineSubType=function(t,e){var n=e.type;if(!n){var o=Zl(t).main;fc.hasSubTypes(t)&&bc[o]&&(n=bc[o](e))}return n},vc=function(t){var e=[];return O(Ec.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=C(e,function(t){return Zl(t).main}),"dataset"!==t&&E(e,"dataset")<=0&&e.unshift("dataset"),e},Ec.topologicalTravel=function(t,e,n,o){if(t.length){var l=function(t){var e={},n=[];return O(t,function(o){var l=Bc(e,o),i=function(t,e){var n=[];return O(t,function(t){0<=E(e,t)&&n.push(t)}),n}(l.originalDeps=vc(o),t);l.entryCount=i.length,0===l.entryCount&&n.push(o),O(i,function(t){E(l.predecessor,t)<0&&l.predecessor.push(t);var n=Bc(e,t);E(n.successor,t)<0&&n.successor.push(o)})}),{graph:e,noEntryList:n}}(e),i=l.graph,a=l.noEntryList,s={};for(O(t,function(t){s[t]=!0});a.length;){var r=a.pop(),c=i[r],u=!!s[r];u&&(n.call(o,r,c.originalDeps.slice()),delete s[r]),O(c.successor,u?d:_)}O(s,function(){throw new Error("Circle dependency may exists")})}function _(t){i[t].entryCount--,0===i[t].entryCount&&a.push(t)}function d(t){s[t]=!0,_(t)}},I(Ec,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var Ic="";"undefined"!=typeof navigator&&(Ic=navigator.platform||"");var Rc={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:Ic.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Oc=Wl(),Cc={clearColorPalette:function(){Oc(this).colorIdx=0,Oc(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var o=Oc(e=e||this),l=o.colorIdx||0,i=o.colorNameMap=o.colorNameMap||{};if(i.hasOwnProperty(t))return i[t];var a=xl(this.get("color",!0)),s=this.get("colorLayer",!0),r=null!=n&&s?function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o].length>e)return t[o];return t[n-1]}(s,n):a;if((r=r||a)&&r.length){var c=r[l];return t&&(i[t]=c),o.colorIdx=(l+1)%r.length,c}}},Nc="original",wc="arrayRows",Ac="objectRows",Mc="keyedColumns",Sc="unknown",Pc="typedArray",xc="column",Dc="row";function Lc(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===Mc?{}:[]),this.sourceFormat=t.sourceFormat||Sc,this.seriesLayoutBy=t.seriesLayoutBy||xc,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&Q(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}Lc.seriesDataToSource=function(t){return new Lc({data:t,sourceFormat:F(t)?Pc:Nc,fromDataset:!1})},ei(Lc);var Uc=1,Fc=2,Hc=3,Vc=Wl();function Gc(t){var e=t.option,n=e.data,o=F(n)?Pc:Nc,l=!1,i=e.seriesLayoutBy,a=e.sourceHeader,s=e.dimensions,r=Xc(t);if(r){var c=r.option;n=c.source,o=Vc(r).sourceFormat,l=!0,i=i||c.seriesLayoutBy,null==a&&(a=c.sourceHeader),s=s||c.dimensions}var u=function(t,e,n,o,l){if(!t)return{dimensionsDefine:jc(l)};var i,a;if(e===wc)"auto"===o||null==o?Wc(function(t){null!=t&&"-"!==t&&(D(t)?null==a&&(a=1):a=0)},n,t,10):a=o?1:0,l||1!==a||(l=[],Wc(function(t,e){l[e]=null!=t?t:""},n,t)),i=l?l.length:n===Dc?t.length:t[0]?t[0].length:null;else if(e===Ac)l=l||function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var o=[];return O(e,function(t,e){o.push(e)}),o}}(t);else if(e===Mc)l||(l=[],O(t,function(t,e){l.push(e)}));else if(e===Nc){var s=Ul(t[0]);i=P(s)&&s.length||1}return{startIndex:a,dimensionsDefine:jc(l),dimensionsDetectCount:i}}(n,o,i,a,s);Vc(t).source=new Lc({data:n,fromDataset:l,seriesLayoutBy:i,sourceFormat:o,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectCount:u.dimensionsDetectCount,encodeDefine:e.encode})}function jc(t){if(t){var e=Q();return C(t,function(t,n){if(null==(t=f({},L(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var o=e.get(t.name);return o?t.name+="-"+o.count++:e.set(t.name,{count:1}),t})}}function Wc(t,e,n,o){if(null==o&&(o=1/0),e===Dc)for(var l=0;l<n.length&&l<o;l++)t(n[l]?n[l][0]:null,l);else{var i=n[0]||[];for(l=0;l<i.length&&l<o;l++)t(i[l],l)}}function Kc(t,e,n){var o={},l=Xc(e);if(!l||!t)return o;var i,a,s=[],r=[],c=e.ecModel,u=Vc(c).datasetMap,_=l.uid+"_"+n.seriesLayoutBy;O(t=t.slice(),function(e,n){L(e)||(t[n]={name:e}),"ordinal"===e.type&&null==i&&(a=y(t[i=n])),o[e.name]=[]});var d=u.get(_)||u.set(_,{categoryWayDim:a,valueWayDim:0});function h(t,e,n){for(var o=0;o<n;o++)t.push(e+o)}function y(t){var e=t.dimsDef;return e?e.length:1}return O(t,function(t,e){var n=t.name,l=y(t);if(null==i){var a=d.valueWayDim;h(o[n],a,l),h(r,a,l),d.valueWayDim+=l}else i===e?(h(o[n],0,l),h(s,0,l)):(a=d.categoryWayDim,h(o[n],a,l),h(r,a,l),d.categoryWayDim+=l)}),s.length&&(o.itemName=s),r.length&&(o.seriesName=r),o}function Yc(t,e,n){var o={};if(!Xc(t))return o;var l,i=e.sourceFormat,a=e.dimensionsDefine;i!==Ac&&i!==Mc||O(a,function(t,e){"name"===(L(t)?t.name:t)&&(l=e)});var s=function(){for(var t={},o={},s=[],r=0,c=Math.min(5,n);r<c;r++){var u=$c(e.data,i,e.seriesLayoutBy,a,e.startIndex,r);s.push(u);var _=u===Hc;if(_&&null==t.v&&r!==l&&(t.v=r),null!=t.n&&t.n!==t.v&&(_||s[t.n]!==Hc)||(t.n=r),d(t)&&s[t.n]!==Hc)return t;_||(u===Fc&&null==o.v&&r!==l&&(o.v=r),null!=o.n&&o.n!==o.v||(o.n=r))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(o)?o:null}();if(s){o.value=s.v;var r=null!=l?l:s.n;o.itemName=[r],o.seriesName=[r]}return o}function Xc(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function $c(t,e,n,o,l,i){var a,s,r;if(F(t))return Hc;if(o){var c=o[i];L(c)?(s=c.name,r=c.type):D(c)&&(s=c)}if(null!=r)return"ordinal"===r?Uc:Hc;if(e===wc)if(n===Dc){for(var u=t[i],_=0;_<(u||[]).length&&_<5;_++)if(null!=(a=p(u[l+_])))return a}else for(_=0;_<t.length&&_<5;_++){var d=t[l+_];if(d&&null!=(a=p(d[i])))return a}else if(e===Ac){if(!s)return Hc;for(_=0;_<t.length&&_<5;_++)if((h=t[_])&&null!=(a=p(h[s])))return a}else if(e===Mc){if(!s)return Hc;if(!(u=t[s])||F(u))return Hc;for(_=0;_<u.length&&_<5;_++)if(null!=(a=p(u[_])))return a}else if(e===Nc)for(_=0;_<t.length&&_<5;_++){var h,y=Ul(h=t[_]);if(!P(y))return Hc;if(null!=(a=p(y[i])))return a}function p(t){var e=D(t);return null!=t&&isFinite(t)&&""!==t?e?Fc:Hc:e&&"-"!==t?Uc:void 0}return Hc}var zc="\0_ec_inner",qc=vr.extend({init:function(t,e,n,o){n=n||{},this.option=null,this._theme=new vr(n),this._optionManager=o},setOption:function(t,e){X(!(zc in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var o=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(o)):function(t){t=t,this.option={},this.option[zc]=1,this._componentsMap=Q({series:[]}),this._seriesIndices,this._seriesIndicesMap,function(t,e){var n=t.color&&!t.colorLayer;O(e,function(e,o){"colorLayer"===o&&n||Ec.hasClass(o)||("object"==typeof e?t[o]=t[o]?k(t[o],e,!1):m(e):null==t[o]&&(t[o]=e))})}(t,this._theme.option),k(t,Rc,!1),this.mergeOption(t)}.call(this,o),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var l=n.getTimelineOption(this);l&&(this.mergeOption(l),e=!0)}if(!t||"recreate"===t||"media"===t){var i=n.getMediaOption(this,this._api);i.length&&O(i,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,o=[];!function(t){Vc(t).datasetMap=Q()}(this),O(t,function(t,n){null!=t&&(Ec.hasClass(n)?n&&o.push(n):e[n]=null==e[n]?m(t):k(e[n],t,!0))}),Ec.topologicalTravel(o,Ec.getAllClassMainTypes(),function(o,l){var i=xl(t[o]),a=Fl(n.get(o),i);Hl(a),O(a,function(t,e){var n=t.option;L(n)&&(t.keyInfo.mainType=o,t.keyInfo.subType=function(t,e,n){return e.type?e.type:n?n.subType:Ec.determineSubType(t,e)}(o,n,t.exist))});var s=function(t,e){P(e)||(e=e?[e]:[]);var n={};return O(e,function(e){n[e]=(t.get(e)||[]).slice()}),n}(n,l);e[o]=[],n.set(o,[]),O(a,function(t,l){var i=t.exist,a=t.option;if(X(L(a)||i,"Empty component definition"),a){var r=Ec.getClass(o,t.keyInfo.subType,!0);if(i&&i.constructor===r)i.name=t.keyInfo.name,i.mergeOption(a,this),i.optionUpdated(a,!1);else{var c=f({dependentModels:s,componentIndex:l},t.keyInfo);f(i=new r(a,this,this,c),c),i.init(a,this,this,c),i.optionUpdated(null,!0)}}else i.mergeOption({},this),i.optionUpdated({},!1);n.get(o)[l]=i,e[o][l]=i.option},this),"series"===o&&Jc(this,n.get("series"))},this),this._seriesIndicesMap=Q(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=m(this.option);return O(t,function(e,n){if(Ec.hasClass(n)){for(var o=(e=xl(e)).length-1;0<=o;o--)Gl(e[o])&&e.splice(o,1);t[n]=e}}),delete t[zc],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,o=t.index,l=t.id,i=t.name,a=this._componentsMap.get(e);if(!a||!a.length)return[];if(null!=o)P(o)||(o=[o]),n=w(C(o,function(t){return a[t]}),function(t){return!!t});else if(null!=l){var s=P(l);n=w(a,function(t){return s&&0<=E(l,t.id)||!s&&t.id===l})}else if(null!=i){var r=P(i);n=w(a,function(t){return r&&0<=E(i,t.name)||!r&&t.name===i})}else n=a.slice();return Zc(n,t)},findComponents:function(t){var e,n,o,l,i,a=t.query,s=t.mainType,r=(n=s+"Index",o=s+"Id",l=s+"Name",!(e=a)||null==e[n]&&null==e[o]&&null==e[l]?null:{mainType:s,index:e[n],id:e[o],name:e[l]});return i=Zc(r?this.queryComponents(r):this._componentsMap.get(s),t),t.filter?w(i,t.filter):i},eachComponent:function(t,e,n){var o=this._componentsMap;"function"==typeof t?(n=e,e=t,o.each(function(t,o){O(t,function(t,l){e.call(n,o,t,l)})})):D(t)?O(o.get(t),e,n):L(t)&&O(this.findComponents(t),e,n)},getSeriesByName:function(t){return w(this._componentsMap.get("series"),function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){return w(this._componentsMap.get("series"),function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){O(this._seriesIndices,function(n){var o=this._componentsMap.get("series")[n];t.call(e,o,n)},this)},eachRawSeries:function(t,e){O(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){O(this._seriesIndices,function(o){var l=this._componentsMap.get("series")[o];l.subType===t&&e.call(n,l,o)},this)},eachRawSeriesByType:function(t,e,n){return O(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Jc(this,w(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Jc(this,e.get("series"));var n=[];e.each(function(t,e){n.push(e)}),Ec.topologicalTravel(n,Ec.getAllClassMainTypes(),function(n,o){O(e.get(n),function(e){"series"===n&&function(t,e){if(e){var n=e.seiresIndex,o=e.seriesId,l=e.seriesName;return null!=n&&t.componentIndex!==n||null!=o&&t.id!==o||null!=l&&t.name!==l}}(e,t)||e.restoreData()})})}});function Jc(t,e){t._seriesIndicesMap=Q(t._seriesIndices=C(e,function(t){return t.componentIndex})||[])}function Zc(t,e){return e.hasOwnProperty("subType")?w(t,function(t){return t.subType===e.subType}):t}I(qc,Cc);var Qc=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function tu(t){O(Qc,function(e){this[e]=M(t[e],t)},this)}var eu={};function nu(){this._coordinateSystems=[]}nu.prototype={constructor:nu,create:function(t,e){var n=[];O(eu,function(o,l){var i=o.create(t,e);n=n.concat(i||[])}),this._coordinateSystems=n},update:function(t,e){O(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},nu.register=function(t,e){eu[t]=e},nu.get=function(t){return eu[t]};var ou=O,lu=m,iu=C,au=k,su=/^(min|max)?(.+)$/;function ru(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function cu(t,e,n){var o={width:e,height:n,aspectratio:e/n},l=!0;return O(t,function(t,e){var n=e.match(su);if(n&&n[1]&&n[2]){var i=n[1],a=n[2].toLowerCase();!function(t,e,n){return"min"===n?e<=t:"max"===n?t<=e:t===e}(o[a],t,i)&&(l=!1)}}),l}ru.prototype={constructor:ru,setOption:function(t,e){t&&O(xl(t.series),function(t){t&&t.data&&F(t.data)&&q(t.data)}),t=lu(t);var n=this._optionBackup,o=function(t,e,n){var o,l,i=[],a=[],s=t.timeline;if(t.baseOption&&(l=t.baseOption),(s||t.options)&&(l=l||{},i=(t.options||[]).slice()),t.media){l=l||{};var r=t.media;ou(r,function(t){t&&t.option&&(t.query?a.push(t):o=o||t)})}return(l=l||t).timeline||(l.timeline=s),ou([l].concat(i).concat(C(a,function(t){return t.option})),function(t){ou(e,function(e){e(t,n)})}),{baseOption:l,timelineOptions:i,mediaDefault:o,mediaList:a}}.call(this,t,e,!n);this._newBaseOption=o.baseOption,n?(function(t,e){ou(e=e||{},function(e,n){if(null!=e){var o=t[n];if(Ec.hasClass(n)){e=xl(e);var l=Fl(o=xl(o),e);t[n]=iu(l,function(t){return t.option&&t.exist?au(t.exist,t.option,!0):t.exist||t.option})}else t[n]=au(o,e,!0)}})}(n.baseOption,o.baseOption),o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=iu(e.timelineOptions,lu),this._mediaList=iu(e.mediaList,lu),this._mediaDefault=lu(e.mediaDefault),this._currentMediaIndices=[],lu(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var o=t.getComponent("timeline");o&&(e=lu(n[o.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),o=this._mediaList,l=this._mediaDefault,i=[],a=[];if(!o.length&&!l)return a;for(var s=0,r=o.length;s<r;s++)cu(o[s].query,e,n)&&i.push(s);return!i.length&&l&&(i=[-1]),i.length&&!function(t,e){return t.join(",")===e.join(",")}(i,this._currentMediaIndices)&&(a=iu(i,function(t){return lu(-1===t?l.option:o[t].option)})),this._currentMediaIndices=i,a}};var uu=O,_u=L,du=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function hu(t){var e=t&&t.itemStyle;if(e)for(var n=0,o=du.length;n<o;n++){var l=du[n],i=e.normal,a=e.emphasis;i&&i[l]&&(t[l]=t[l]||{},t[l].normal?k(t[l].normal,i[l]):t[l].normal=i[l],i[l]=null),a&&a[l]&&(t[l]=t[l]||{},t[l].emphasis?k(t[l].emphasis,a[l]):t[l].emphasis=a[l],a[l]=null)}}function yu(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var o=t[e].normal,l=t[e].emphasis;o&&(n?(t[e].normal=t[e].emphasis=null,b(t[e],o)):t[e]=o),l&&(t.emphasis=t.emphasis||{},t.emphasis[e]=l)}}function pu(t){yu(t,"itemStyle"),yu(t,"lineStyle"),yu(t,"areaStyle"),yu(t,"label"),yu(t,"labelLine"),yu(t,"upperLabel"),yu(t,"edgeLabel")}function mu(t,e){var n=_u(t)&&t[e],o=_u(n)&&n.textStyle;if(o)for(var l=0,i=Ll.length;l<i;l++)e=Ll[l],o.hasOwnProperty(e)&&(n[e]=o[e])}function ku(t){t&&(pu(t),mu(t,"label"),t.emphasis&&mu(t.emphasis,"label"))}function gu(t){return P(t)?t:t?[t]:[]}function fu(t){return(P(t)?t[0]:t)||{}}function bu(t){O(vu,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var vu=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Tu=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Eu=function(t,e){(function(t,e){uu(gu(t.series),function(t){_u(t)&&function(t){if(_u(t)){hu(t),pu(t),mu(t,"label"),mu(t,"upperLabel"),mu(t,"edgeLabel"),t.emphasis&&(mu(t.emphasis,"label"),mu(t.emphasis,"upperLabel"),mu(t.emphasis,"edgeLabel")),(n=t.markPoint)&&(hu(n),ku(n)),(o=t.markLine)&&(hu(o),ku(o));var e=t.markArea;e&&ku(e);var n,o,l=t.data;if("graph"===t.type){l=l||t.nodes;var i=t.links||t.edges;if(i&&!F(i))for(var a=0;a<i.length;a++)ku(i[a]);O(t.categories,function(t){pu(t)})}if(l&&!F(l))for(a=0;a<l.length;a++)ku(l[a]);if((n=t.markPoint)&&n.data){var s=n.data;for(a=0;a<s.length;a++)ku(s[a])}if((o=t.markLine)&&o.data){var r=o.data;for(a=0;a<r.length;a++)P(r[a])?(ku(r[a][0]),ku(r[a][1])):ku(r[a])}"gauge"===t.type?(mu(t,"axisLabel"),mu(t,"title"),mu(t,"detail")):"treemap"===t.type?(yu(t.breadcrumb,"itemStyle"),O(t.levels,function(t){pu(t)})):"tree"===t.type&&pu(t.leaves)}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),uu(n,function(e){uu(gu(t[e]),function(t){t&&(mu(t,"axisLabel"),mu(t.axisPointer,"label"))})}),uu(gu(t.parallel),function(t){var e=t&&t.parallelAxisDefault;mu(e,"axisLabel"),mu(e&&e.axisPointer,"label")}),uu(gu(t.calendar),function(t){yu(t,"itemStyle"),mu(t,"dayLabel"),mu(t,"monthLabel"),mu(t,"yearLabel")}),uu(gu(t.radar),function(t){mu(t,"name")}),uu(gu(t.geo),function(t){_u(t)&&(ku(t),uu(gu(t.regions),function(t){ku(t)}))}),uu(gu(t.timeline),function(t){ku(t),yu(t,"label"),yu(t,"itemStyle"),yu(t,"controlStyle",!0);var e=t.data;P(e)&&O(e,function(t){L(t)&&(yu(t,"label"),yu(t,"itemStyle"))})}),uu(gu(t.toolbox),function(t){yu(t,"iconStyle"),uu(t.feature,function(t){yu(t,"iconStyle")})}),mu(fu(t.axisPointer),"label"),mu(fu(t.tooltip).axisPointer,"label")})(t,e),t.series=xl(t.series),O(t.series,function(t){if(L(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,o=0;o<e.length&&null!=(n=n&&n[e[o]]);o++);return n}(t,"pointer.color");null!=n&&function(t,e,n,o){e=e.split(",");for(var l,i=t,a=0;a<e.length-1;a++)null==i[l=e[a]]&&(i[l]={}),i=i[l];null!=i[e[a]]||(i[e[a]]=n)}(t,"itemStyle.color",n)}bu(t)}}),t.dataRange&&(t.visualMap=t.dataRange),O(Tu,function(e){var n=t[e];n&&(P(n)||(n=[n]),O(n,function(t){bu(t)}))})};function Bu(t){O(t,function(e,n){var o=[],l=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,r=a.map(i,function(i,r,c){var u,_,d=a.get(e.stackedDimension,c);if(isNaN(d))return l;s?_=a.getRawIndex(c):u=a.get(e.stackedByDimension,c);for(var h=NaN,y=n-1;0<=y;y--){var p=t[y];if(s||(_=p.data.rawIndexOf(p.stackedByDimension,u)),0<=_){var m=p.data.getByRawIndex(p.stackResultDimension,_);if(0<=d&&0<m||d<=0&&m<0){d+=m,h=m;break}}}return o[0]=d,o[1]=h,o});a.hostModel.setData(r),e.data=r})}function Iu(t,e){Lc.isInstance(t)||(t=Lc.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,o=t.sourceFormat;o===Pc&&(this._offset=0,this._dimSize=e,this._data=n),f(this,Ou[o===wc?o+"_"+t.seriesLayoutBy:o])}var Ru=Iu.prototype;Ru.pure=!1;var Ou={arrayRows_column:{pure:Ru.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:wu},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,o=0;o<n.length;o++){var l=n[o];e.push(l?l[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Cu,getItem:Nu,appendData:wu},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,o=0;o<n.length;o++){var l=this._data[n[o].name];e.push(l?l[t]:null)}return e},appendData:function(t){var e=this._data;O(t,function(t,n){for(var o=e[n]||(e[n]=[]),l=0;l<(t||[]).length;l++)o.push(t[l])})}},original:{count:Cu,getItem:Nu,appendData:wu},typedArray:{persistent:!(Ru.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var n=this._dimSize*t,o=0;o<this._dimSize;o++)e[o]=this._data[n+o];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function Cu(){return this._data.length}function Nu(t){return this._data[t]}function wu(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var Au={arrayRows:Mu,objectRows:function(t,e,n,o){return null!=n?t[o]:t},keyedColumns:Mu,original:function(t,e,n,o){var l=Ul(t);return null!=n&&l instanceof Array?l[n]:l},typedArray:Mu};function Mu(t,e,n,o){return null!=n?t[n]:t}var Su={arrayRows:Pu,objectRows:function(t,e,n,o){return xu(t[e],this._dimensionInfos[e])},keyedColumns:Pu,original:function(t,e,n,o){var l=t&&(null==t.value?t:t.value);return!this._rawData.pure&&function(t){return Ml(t)&&!(t instanceof Array)}(t)&&(this.hasItemOption=!0),xu(l instanceof Array?l[o]:l,this._dimensionInfos[e])},typedArray:function(t,e,n,o){return t[o]}};function Pu(t,e,n,o){return xu(t[o],this._dimensionInfos[e])}function xu(t,e){var n=e&&e.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+Fr(t)),null==t||""===t?NaN:+t;var o=e&&e.ordinalMeta;return o?o.parseAndCollect(t):t}function Du(t,e,n){if(t){var o=t.getRawDataItem(e);if(null!=o){var l,i,a=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(l=s.name,i=s.index),Au[a](o,e,i,l)}}}function Lu(t,e,n){if(t){var o=t.getProvider().getSource().sourceFormat;if(o===Nc||o===Ac){var l=t.getRawDataItem(e);return o!==Nc||L(l)||(l=null),l?l[n]:void 0}}}var Uu=/\{@(.+?)\}/g,Fu={getDataParams:function(t,e){var n=this.getData(e),o=this.getRawValue(t,e),l=n.getRawIndex(t),i=n.getName(t),a=n.getRawDataItem(t),s=n.getItemVisual(t,"color"),r=n.getItemVisual(t,"borderColor"),c=this.ecModel.getComponent("tooltip"),u=zl(c&&c.get("renderMode")),_=this.mainType,d="series"===_,h=n.userOutput;return{componentType:_,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:i,dataIndex:l,data:a,dataType:e,value:o,color:s,borderColor:r,dimensionNames:h?h.dimensionNames:null,encode:h?h.encode:null,marker:nc({color:s,renderMode:u}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,o,l){e=e||"normal";var i=this.getData(n),a=i.getItemModel(t),s=this.getDataParams(t,n);null!=o&&s.value instanceof Array&&(s.value=s.value[o]);var r=a.get("normal"===e?[l||"label","formatter"]:[e,l||"label","formatter"]);return"function"==typeof r?(s.status=e,s.dimensionIndex=o,r(s)):"string"==typeof r?tc(r,s).replace(Uu,function(e,n){var o=n.length;return"["===n.charAt(0)&&"]"===n.charAt(o-1)&&(n=+n.slice(1,o-1)),Du(i,t,n)}):void 0},getRawValue:function(t,e){return Du(this.getData(e),t)},formatTooltip:function(){}};function Hu(t){return new Vu(t)}function Vu(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}var Gu=Vu.prototype;Gu.perform=function(t){var e,n=this._upstream,o=t&&t.skip;if(this._dirty&&n){var l=this.context;l.data=l.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!o&&(e=this._plan(this.context));var i,a=u(this._modBy),s=this._modDataCount||0,r=u(t&&t.modBy),c=t&&t.modDataCount||0;function u(t){return 1<=t||(t=1),t}a===r&&s===c||(e="reset"),!this._dirty&&"reset"!==e||(this._dirty=!1,i=function(t,e){var n,o;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(o=n.forceFirstProgress,n=n.progress),P(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var l=t._downstream;return l&&l.dirty(),o}(this,o)),this._modBy=r,this._modDataCount=c;var _=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,h=Math.min(null!=_?this._dueIndex+_:1/0,this._dueEnd);if(!o&&(i||d<h)){var y=this._progress;if(P(y))for(var p=0;p<y.length;p++)Zu(this,y[p],d,h,r,c);else Zu(this,y,d,h,r,c)}this._dueIndex=h;var m=null!=this._settedOutputEnd?this._settedOutputEnd:h;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var ju,Wu,Ku,Yu,Xu,$u,zu=$u={reset:function(t,e,n,o){Wu=t,ju=e,Ku=n,Yu=o,Xu=Math.ceil(Yu/Ku),$u.next=1<Ku&&0<Yu?Ju:qu}};function qu(){return Wu<ju?Wu++:null}function Ju(){var t=Wu%Xu*Ku+Math.ceil(Wu/Xu),e=ju<=Wu?null:t<Yu?t:Wu;return Wu++,e}function Zu(t,e,n,o,l,i){zu.reset(n,o,l,i),t._callingProgress=e,t._callingProgress({start:n,end:o,count:o-n,next:zu.next},t.context)}Gu.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Gu.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Gu.pipe=function(t){this._downstream===t&&!this._dirty||((this._downstream=t)._upstream=this,t.dirty())},Gu.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Gu.getUpstream=function(){return this._upstream},Gu.getDownstream=function(){return this._downstream},Gu.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Qu=Wl(),t_=Ec.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,o){this.seriesIndex=this.componentIndex,this.dataTask=Hu({count:n_,reset:o_}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),Gc(this);var l=this.getInitialData(t,n);i_(l,this),this.dataTask.context.data=l,Qu(this).dataBeforeProcessed=l,e_(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,o=n?kc(t):{},l=this.subType;Ec.hasClass(l)&&(l+="Series"),k(t,e.getTheme().get(this.subType)),k(t,this.getDefaultOption()),Dl(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&mc(t,o,n)},mergeOption:function(t,e){t=k(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&mc(this.option,t,n),Gc(this);var o=this.getInitialData(t,e);i_(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Qu(this).dataBeforeProcessed=o,e_(this)},fillDataTextStyle:function(t){if(t&&!F(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Dl(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=s_(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return Qu(this).data},setData:function(t){var e=s_(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}Qu(this).data=t},getSource:function(){return function(t){return Vc(t).source}(this)},getRawData:function(){return Qu(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,o){var l=this,i="html"===(o=o||"html")?"<br/>":"\n",a="richText"===o,s={},r=0;var c=this.getData(),u=c.mapDimension("defaultedTooltip",!0),_=u.length,d=this.getRawValue(t),h=P(d),y=c.getItemVisual(t,"color");L(y)&&y.colorStops&&(y=(y.colorStops[0]||{}).color),y=y||"transparent";var p=(1<_||h&&!_?function(n){var i=N(n,function(t,e,n){var o=c.getDimensionInfo(n);return t|(o&&!1!==o.tooltip&&null!=o.displayName)},0),_=[];function d(t,n){var u=c.getDimensionInfo(n);if(u&&!1!==u.otherDims.tooltip){var d=u.type,h="sub"+l.seriesIndex+"at"+r,p=nc({color:y,type:"subItem",renderMode:o,markerId:h}),m="string"==typeof p?p:p.content,k=(i?m+Jr(u.displayName||"-")+": ":"")+Jr("ordinal"===d?t+"":"time"===d?e?"":lc("yyyy/MM/dd hh:mm:ss",t):Yr(t));k&&_.push(k),a&&(s[h]=y,++r)}}u.length?O(u,function(e){d(Du(c,t,e),e)}):O(n,d);var h=i?a?"\n":"<br/>":"",p=h+_.join(h||", ");return{renderMode:o,content:p,style:s}}(d):function(t){return{renderMode:o,content:Jr(Yr(t)),style:s}}(_?Du(c,t,u[0]):h?d[0]:d)).content,m=l.seriesIndex+"at"+r,k=nc({color:y,type:"item",renderMode:o,markerId:m});s[m]=y,++r;var g=c.getName(t),f=this.name;Vl(this)||(f=""),f=f?Jr(f)+(e?": ":i):"";var b="string"==typeof k?k:k.content;return{html:e?b+f+p:f+b+(g?Jr(g)+": "+p:p),markers:s}},isAnimationEnabled:function(){if(l.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var o=this.ecModel,l=Cc.getColorFromPalette.call(this,t,e,n);return l||o.getColorFromPalette(t,e,n)},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function e_(t){var e=t.name;Vl(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),o=[];return O(n,function(t){var n=e.getDimensionInfo(t);n.displayName&&o.push(n.displayName)}),o.join(" ")}(t)||e)}function n_(t){return t.model.getRawData().count()}function o_(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),l_}function l_(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function i_(t,e){O(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,S(a_,e))})}function a_(t){var e=s_(t);e&&e.setOutputEnd(this.count())}function s_(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var o=n.currentTask;if(o){var l=o.agentStubMap;l&&(o=l.get(t.uid))}return o}}I(t_,Fu),I(t_,Cc);var r_=function(){this.group=new Nn,this.uid=Ir("viewComponent")},c_=r_.prototype={constructor:r_,init:function(t,e){},render:function(t,e,n,o){},dispose:function(){},filterForExposedEvent:null};function u_(){var t=Wl();return function(e){var n=t(e),o=e.pipelineContext,l=n.large,i=n.progressiveRender,a=n.large=o&&o.large,s=n.progressiveRender=o&&o.progressiveRender;return!!(l^a||i^s)&&"reset"}}c_.updateView=c_.updateLayout=c_.updateVisual=function(t,e,n,o){},Ql(r_),li(r_,{registerWhenExtend:!0});var __=Wl(),d_=u_();function h_(){this.group=new Nn,this.uid=Ir("viewChart"),this.renderTask=Hu({plan:k_,reset:g_}),this.renderTask.context={view:this}}var y_=h_.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,o){},highlight:function(t,e,n,o){m_(t.getData(),o,"emphasis")},downplay:function(t,e,n,o){m_(t.getData(),o,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function p_(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!Ks(t)))for(var o=0,l=t.childCount();o<l;o++)p_(t.childAt(o),e,n)}function m_(t,e,n){var o=jl(t,e),l=e&&null!=e.highlightKey?Ys(e.highlightKey):null;null!=o?O(xl(o),function(e){p_(t.getItemGraphicEl(e),n,l)}):t.eachItemGraphicEl(function(t){p_(t,n,l)})}function k_(t){return d_(t.model)}function g_(t){var e=t.model,n=t.ecModel,o=t.api,l=t.payload,i=e.pipelineContext.progressiveRender,a=t.view,s=l&&__(l).updateMethod,r=i?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==r&&a[r](e,n,o,l),f_[r]}y_.updateView=y_.updateLayout=y_.updateVisual=function(t,e,n,o){this.render(t,e,n,o)},Ql(h_),li(h_,{registerWhenExtend:!0}),h_.markUpdateMethod=function(t,e){__(t).updateMethod=e};var f_={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},b_="\0__throttleOriginMethod",v_="\0__throttleRate",T_="\0__throttleType";function E_(t,e,n){var o,l,i,a,s,r=0,c=0,u=null;function _(){c=(new Date).getTime(),u=null,t.apply(i,a||[])}function d(){o=(new Date).getTime(),i=this,a=arguments;var t=s||e,d=s||n;s=null,l=o-(d?r:c)-t,clearTimeout(u),d?u=setTimeout(_,t):0<=l?_():u=setTimeout(_,-l),r=o}return e=e||0,d.clear=function(){u&&(clearTimeout(u),u=null)},d.debounceNextCall=function(t){s=t},d}function B_(t,e,n,o){var l=t[e];if(l){var i=l[b_]||l,a=l[T_];if(l[v_]!==n||a!==o){if(null==n||!o)return t[e]=i;(l=t[e]=E_(i,n,"debounce"===o))[b_]=i,l[T_]=o,l[v_]=n}return l}}function I_(t,e){var n=t[e];n&&n[b_]&&(t[e]=n[b_])}var R_={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),o=(t.visualColorAccessPath||"itemStyle.color").split("."),l=t.get(o),i=!x(l)||l instanceof ls?null:l;l&&!i||(l=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",l);var a=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=t.get(a);if(n.setVisual("borderColor",s),!e.isSeriesFiltered(t))return i&&n.each(function(e){n.setItemVisual(e,"color",i(t.getDataParams(e)))}),{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e),l=n.get(o,!0),i=n.get(a,!0);null!=l&&t.setItemVisual(e,"color",l),null!=i&&t.setItemVisual(e,"borderColor",i)}:null}}},O_={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},C_=Math.PI;function N_(t,e,n,o){this.ecInstance=t,this.api=e,this.unfinished,n=this._dataProcessorHandlers=n.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=n.concat(o),this._stageTaskMap=Q()}var w_=N_.prototype;function A_(t,e,n,o,l){var i;function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}l=l||{},O(e,function(e,s){if(!l.visualType||l.visualType===e.visualType){var r=t._stageTaskMap.get(e.uid),c=r.seriesTaskMap,u=r.overallTask;if(u){var _,d=u.agentStubMap;d.each(function(t){a(l,t)&&(t.dirty(),_=!0)}),_&&u.dirty(),M_(u,o);var h=t.getPerformArgs(u,l.block);d.each(function(t){t.perform(h)}),i|=u.perform(h)}else c&&c.each(function(s,r){a(l,s)&&s.dirty();var c=t.getPerformArgs(s,l.block);c.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),M_(s,o),i|=s.perform(c)})}}),t.unfinished|=i}w_.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},w_.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),o=n.context,l=!e&&n.progressiveEnabled&&(!o||o.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,i=o&&o.modDataCount;return{step:l,modBy:null!=i?Math.ceil(i/l):null,modDataCount:i}}},w_.getPipeline=function(t){return this._pipelineMap.get(t)},w_.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),o=t.getData().count(),l=n.progressiveEnabled&&e.incrementalPrepareRender&&o>=n.threshold,i=t.get("large")&&o>=t.get("largeThreshold"),a="mod"===t.get("progressiveChunkMode")?o:null;t.pipelineContext=n.context={progressiveRender:l,modDataCount:a,large:i}},w_.restorePipelines=function(t){var e=this,n=e._pipelineMap=Q();t.eachSeries(function(t){var o=t.getProgressive(),l=t.uid;n.set(l,{id:l,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:o&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),G_(e,t,t.dataTask)})},w_.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;O(this._allHandlers,function(o){var l=t.get(o.uid)||t.set(o.uid,[]);o.reset&&function(t,e,n,o,l){var i=n.seriesTaskMap||(n.seriesTaskMap=Q()),a=e.seriesType,s=e.getTargetSeries;function r(n){var a=n.uid,s=i.get(a)||i.set(a,Hu({plan:L_,reset:U_,count:V_}));s.context={model:n,ecModel:o,api:l,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},G_(t,n,s)}e.createOnAllSeries?o.eachRawSeries(r):a?o.eachRawSeriesByType(a,r):s&&s(o,l).each(r);var c=t._pipelineMap;i.each(function(t,e){c.get(e)||(t.dispose(),i.removeKey(e))})}(this,o,l,e,n),o.overallReset&&function(t,e,n,o,l){var i=n.overallTask=n.overallTask||Hu({reset:S_});i.context={ecModel:o,api:l,overallReset:e.overallReset,scheduler:t};var a=i.agentStubMap=i.agentStubMap||Q(),s=e.seriesType,r=e.getTargetSeries,c=!0,u=e.modifyOutputEnd;function _(e){var n=e.uid,o=a.get(n);o||(o=a.set(n,Hu({reset:P_,onDirty:D_})),i.dirty()),o.context={model:e,overallProgress:c,modifyOutputEnd:u},o.agent=i,o.__block=c,G_(t,e,o)}s?o.eachRawSeriesByType(s,_):r?r(o,l).each(_):(c=!1,O(o.getSeries(),_));var d=t._pipelineMap;a.each(function(t,e){d.get(e)||(t.dispose(),i.dirty(),a.removeKey(e))})}(this,o,l,e,n)},this)},w_.prepareView=function(t,e,n,o){var l=t.renderTask,i=l.context;i.model=e,i.ecModel=n,i.api=o,l.__block=!t.incrementalPrepareRender,G_(this,e,l)},w_.performDataProcessorTasks=function(t,e){A_(this,this._dataProcessorHandlers,t,e,{block:!0})},w_.performVisualTasks=function(t,e,n){A_(this,this._visualHandlers,t,e,n)},w_.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},w_.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var M_=w_.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function S_(t){t.overallReset(t.ecModel,t.api,t.payload)}function P_(t,e){return t.overallProgress&&x_}function x_(){this.agent.dirty(),this.getDownstream().dirty()}function D_(){this.agent&&this.agent.dirty()}function L_(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function U_(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=xl(t.reset(t.model,t.ecModel,t.api,t.payload));return 1<e.length?C(e,function(t,e){return H_(e)}):F_}var F_=H_(0);function H_(t){return function(e,n){var o=n.data,l=n.resetDefines[t];if(l&&l.dataEach)for(var i=e.start;i<e.end;i++)l.dataEach(o,i);else l&&l.progress&&l.progress(e,o)}}function V_(t){return t.data.count()}function G_(t,e,n){var o=e.uid,l=t._pipelineMap.get(o);l.head||(l.head=n),l.tail&&l.tail.pipe(n),(l.tail=n).__idxInPipeline=l.count++,n.__pipeline=l}N_.wrapStageHandler=function(t,e){return x(t)&&(t={overallReset:t,seriesType:function(t){j_=null;try{t(W_,K_)}catch(t){}return j_}(t)}),t.uid=Ir("stageHandler"),e&&(t.visualType=e),t};var j_,W_={},K_={};function Y_(t,e){for(var n in e.prototype)t[n]=et}function X_(){return{axisLine:{lineStyle:{color:q_}},axisTick:{lineStyle:{color:q_}},axisLabel:{textStyle:{color:q_}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:q_}}}}Y_(W_,qc),Y_(K_,tu),W_.eachSeriesByType=W_.eachRawSeriesByType=function(t){j_=t},W_.eachComponent=function(t){"series"===t.mainType&&t.subType&&(j_=t.subType)};var $_=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],z_={color:$_,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],$_]},q_="#eee",J_=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Z_={color:J_,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:q_},crossStyle:{color:q_},label:{color:"#000"}}},legend:{textStyle:{color:q_}},textStyle:{color:q_},title:{textStyle:{color:q_}},toolbox:{iconStyle:{normal:{borderColor:q_}}},dataZoom:{textStyle:{color:q_}},visualMap:{textStyle:{color:q_}},timeline:{lineStyle:{color:q_},itemStyle:{normal:{color:J_[1]}},label:{normal:{textStyle:{color:q_}}},controlStyle:{normal:{color:q_,borderColor:q_}}},timeAxis:X_(),logAxis:X_(),valueAxis:X_(),categoryAxis:X_(),line:{symbol:"circle"},graph:{color:J_},gauge:{title:{textStyle:{color:q_}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Z_.categoryAxis.splitLine.show=!1,Ec.extend({type:"dataset",defaultOption:{seriesLayoutBy:xc,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=Sc;if(F(e))n=Pc;else if(P(e)){0===e.length&&(n=wc);for(var o=0,l=e.length;o<l;o++){var i=e[o];if(null!=i){if(P(i)){n=wc;break}if(L(i)){n=Ac;break}}}}else if(L(e)){for(var a in e)if(e.hasOwnProperty(a)&&R(e[a])){n=Mc;break}}else if(null!=e)throw new Error("Invalid data");Vc(t).sourceFormat=n}(this)}}),r_.extend({type:"dataset"});var Q_=va.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=e.cx,o=e.cy,l=e.rx,i=e.ry,a=.5522848*l,s=.5522848*i;t.moveTo(n-l,o),t.bezierCurveTo(n-l,o-s,n-a,o-i,n,o-i),t.bezierCurveTo(n+a,o-i,n+l,o-s,n+l,o),t.bezierCurveTo(n+l,o+s,n+a,o+i,n,o+i),t.bezierCurveTo(n-a,o+i,n-l,o+s,n-l,o),t.closePath()}}),td=/[\s,]+/;function ed(t){for(D(t)&&(t=(new DOMParser).parseFromString(t,"text/xml")),9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function nd(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}nd.prototype.parse=function(t,e){e=e||{};var n=ed(t);if(!n)throw new Error("Illegal svg");var o=new Nn;this._root=o;var l=n.getAttribute("viewBox")||"",i=parseFloat(n.getAttribute("width")||e.width),a=parseFloat(n.getAttribute("height")||e.height);isNaN(i)&&(i=null),isNaN(a)&&(a=null),rd(n,o,null,!0);for(var s,r,c=n.firstChild;c;)this._parseNode(c,o),c=c.nextSibling;if(l){var u=$(l).split(td);4<=u.length&&(s={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(s&&null!=i&&null!=a&&(r=hd(s,i,a),!e.ignoreViewBox)){var _=o;(o=new Nn).add(_),_.scale=r.scale.slice(),_.position=r.position.slice()}return e.ignoreRootClip||null==i||null==a||o.setClipPath(new Qa({shape:{x:0,y:0,width:i,height:a}})),{root:o,width:i,height:a,viewBoxRect:s,viewBoxTransform:r}},nd.prototype._parseNode=function(t,e){var n,o,l=t.nodeName.toLowerCase();if("defs"===l?this._isDefine=!0:"text"===l&&(this._isText=!0),this._isDefine){if(o=ld[l]){var i=o.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=i)}}else(o=od[l])&&(n=o.call(this,t,e),e.add(n));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===l?this._isDefine=!1:"text"===l&&(this._isText=!1)},nd.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(o)}var l=new Ua({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});id(e,l),rd(t,l,this._defs);var i=l.style.fontSize;i&&i<9&&(l.style.fontSize=9,l.scale=l.scale||[1,1],l.scale[0]*=i/9,l.scale[1]*=i/9);var a=l.getBoundingRect();return this._textX+=a.width,e.add(l),l};var od={g:function(t,e){var n=new Nn;return id(e,n),rd(t,n,this._defs),n},rect:function(t,e){var n=new Qa;return id(e,n),rd(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new Ha;return id(e,n),rd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new es;return id(e,n),rd(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Q_;return id(e,n),rd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n=n&&ad(n);var o=new Ya({shape:{points:n||[]}});return id(e,o),rd(t,o,this._defs),o},polyline:function(t,e){var n=new va;id(e,n),rd(t,n,this._defs);var o=t.getAttribute("points");return o=o&&ad(o),new Xa({shape:{points:o||[]}})},image:function(t,e){var n=new Jo;return id(e,n),rd(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,o=t.getAttribute("y")||0,l=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(l),this._textY=parseFloat(o)+parseFloat(i);var a=new Nn;return id(e,a),rd(t,a,this._defs),a},tspan:function(t,e){var n=t.getAttribute("x"),o=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=o&&(this._textY=parseFloat(o));var l=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0,a=new Nn;return id(e,a),rd(t,a,this._defs),this._textX+=l,this._textY+=i,a},path:function(t,e){var n=La(t.getAttribute("d")||"");return id(e,n),rd(t,n,this._defs),n}},ld={lineargradient:function(t){var e=new rs(parseInt(t.getAttribute("x1")||0,10),parseInt(t.getAttribute("y1")||0,10),parseInt(t.getAttribute("x2")||10,10),parseInt(t.getAttribute("y2")||0,10));return function(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType){var o=n.getAttribute("offset");o=0<o.indexOf("%")?parseInt(o,10)/100:o?parseFloat(o):0;var l=n.getAttribute("stop-color")||"#000000";e.addColorStop(o,l)}n=n.nextSibling}}(t,e),e},radialgradient:function(t){}};function id(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),b(e.__inheritedStyle,t.__inheritedStyle))}function ad(t){for(var e=$(t).split(td),n=[],o=0;o<e.length;o+=2){var l=parseFloat(e[o]),i=parseFloat(e[o+1]);n.push([l,i])}return n}var sd={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function rd(t,e,n,o){var l=e.__inheritedStyle||{},i="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var o=null,l=[];n.replace(_d,function(t,e,n){l.push(e,n)});for(var i=l.length-1;0<i;i-=2){var a=l[i],s=l[i-1];switch(o=o||ie(),s){case"translate":a=$(a).split(td),ce(o,o,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=$(a).split(td),_e(o,o,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=$(a).split(td),ue(o,o,parseFloat(a[0]));break;case"skew":a=$(a).split(td),console.warn("Skew transform is not supported yet");break;case"matrix":a=$(a).split(td),o[0]=parseFloat(a[0]),o[1]=parseFloat(a[1]),o[2]=parseFloat(a[2]),o[3]=parseFloat(a[3]),o[4]=parseFloat(a[4]),o[5]=parseFloat(a[5])}}e.setLocalTransform(o)}}(t,e),f(l,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var o,l={};for(dd.lastIndex=0;null!=(o=dd.exec(e));)l[o[1]]=o[2];for(var i in sd)sd.hasOwnProperty(i)&&null!=l[i]&&(n[sd[i]]=l[i]);return n}(t)),!o))for(var a in sd)if(sd.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(l[sd[a]]=s)}var r=i?"textFill":"fill",c=i?"textStroke":"stroke";e.style=e.style||new Wn;var u=e.style;null!=l.fill&&u.set(r,ud(l.fill,n)),null!=l.stroke&&u.set(c,ud(l.stroke,n)),O(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){var e="lineWidth"===t&&i?"textStrokeWidth":t;null!=l[t]&&u.set(e,parseFloat(l[t]))}),l.textBaseline&&"auto"!==l.textBaseline||(l.textBaseline="alphabetic"),"alphabetic"===l.textBaseline&&(l.textBaseline="bottom"),"start"===l.textAlign&&(l.textAlign="left"),"end"===l.textAlign&&(l.textAlign="right"),O(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=l[t]&&u.set(t,l[t])}),l.lineDash&&(e.style.lineDash=$(l.lineDash).split(td)),u[c]&&"none"!==u[c]&&(e[c]=!0),e.__inheritedStyle=l}var cd=/url\(\s*#(.*?)\)/;function ud(t,e){var n=e&&t&&t.match(cd);return n?e[$(n[1])]:t}var _d=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,dd=/([^\s:;]+)\s*:\s*([^:;]+)/g;function hd(t,e,n){var o=e/t.width,l=n/t.height,i=Math.min(o,l);return{scale:[i,i],position:[-(t.x+t.width/2)*i+e/2,-(t.y+t.height/2)*i+n/2]}}var yd=Q(),pd=function(t,e,n){var o;return O(o=P(e)?e:e.svg?[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),[{type:"geoJSON",source:e,specialAreas:n}]),function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,kd[e])(t)}),yd.set(t,o)},md=function(t){return yd.get(t)},kd={geoJSON:function(t){var e=t.source;t.geoJSON=D(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=ed(t.source)}},gd=X,fd=O,bd=x,vd=L,Td=Ec.parseClassType,Ed={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Bd="__flagInMainProcess",Id="__optionUpdated",Rd=/^[a-zA-Z0-9_]+$/;function Od(t,e){return function(n,o,l){!e&&this._disposed||(n=n&&n.toLowerCase(),Nt.prototype[t].call(this,n,o,l))}}function Cd(){Nt.call(this)}function Nd(t,e,n){n=n||{},"string"==typeof e&&(e=Qd[e]),this.id,this.group,this._dom=t;var o=this._zr=Ol(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=E_(M(o.flush,o),17),(e=m(e))&&Eu(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new nu;var l=this._api=function(t){var e=t._coordSysMgr;return f(new tu(t),{getCoordinateSystems:M(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}(this);function i(t,e){return t.__prio-e.__prio}xn(Zd,i),xn(zd,i),this._scheduler=new N_(this,l,zd,Zd),Nt.call(this,this._ecEventProcessor=new Yd),this._messageCenter=new Cd,this._initEvents(),this.resize=M(this.resize,this),this._pendingActions=[],o.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[Id]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}(o,this),q(this)}Cd.prototype.on=Od("on",!0),Cd.prototype.off=Od("off",!0),Cd.prototype.one=Od("one",!0),I(Cd,Nt);var wd=Nd.prototype;function Ad(t,e,n){if(!this._disposed){var o,l=this._model,i=this._coordSysMgr.getCoordinateSystems();e=Yl(l,e);for(var a=0;a<i.length;a++){var s=i[a];if(s[t]&&null!=(o=s[t](l,e,n)))return o}}}wd._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[Id]){var e=this[Id].silent;this[Bd]=!0,Sd(this),Md.update.call(this),this[Bd]=!1,this[Id]=!1,Ld.call(this,e),Ud.call(this,e)}else if(t.unfinished){var n=1,o=this._model,l=this._api;t.unfinished=!1;do{var i=+new Date;t.performSeriesTasks(o),t.performDataProcessorTasks(o),xd(this,o),t.performVisualTasks(o),Gd(this,this._model,l,"remain"),n-=+new Date-i}while(0<n&&t.unfinished);t.unfinished||this._zr.flush()}}},wd.getDom=function(){return this._dom},wd.getZr=function(){return this._zr},wd.setOption=function(t,e,n){if(!this._disposed){var o;if(vd(e)&&(n=e.lazyUpdate,o=e.silent,e=e.notMerge),this[Bd]=!0,!this._model||e){var l=new ru(this._api),i=this._theme,a=this._model=new qc;a.scheduler=this._scheduler,a.init(null,null,i,l)}this._model.setOption(t,qd),n?(this[Id]={silent:o},this[Bd]=!1):(Sd(this),Md.update.call(this),this._zr.flush(),this[Id]=!1,this[Bd]=!1,Ld.call(this,o),Ud.call(this,o))}},wd.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},wd.getModel=function(){return this._model},wd.getOption=function(){return this._model&&this._model.getOption()},wd.getWidth=function(){return this._zr.getWidth()},wd.getHeight=function(){return this._zr.getHeight()},wd.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},wd.getRenderedCanvas=function(t){if(l.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},wd.getSvgDataURL=function(){if(l.svgSupported){var t=this._zr;return O(t.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),t.painter.toDataURL()}},wd.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,o=[],l=this;fd(e,function(t){n.eachComponent({mainType:t},function(t){var e=l._componentsMap[t.__viewId];e.group.ignore||(o.push(e),e.group.ignore=!0)})});var i="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return fd(o,function(t){t.group.ignore=!1}),i}},wd.getConnectedDataURL=function(t){if(!this._disposed&&l.canvasSupported){var e="svg"===t.type,n=this.group,o=Math.min,i=Math.max;if(nh[n]){var a=1/0,s=1/0,r=-1/0,c=-1/0,u=[],_=t&&t.pixelRatio||1;O(eh,function(l,_){if(l.group===n){var d=e?l.getZr().painter.getSvgDom().innerHTML:l.getRenderedCanvas(m(t)),h=l.getDom().getBoundingClientRect();a=o(h.left,a),s=o(h.top,s),r=i(h.right,r),c=i(h.bottom,c),u.push({dom:d,left:h.left,top:h.top})}});var d=(r*=_)-(a*=_),h=(c*=_)-(s*=_),y=v(),p=Ol(y,{renderer:e?"svg":"canvas"});if(p.resize({width:d,height:h}),e){var k="";return fd(u,function(t){var e=t.left-a,n=t.top-s;k+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"}),p.painter.getSvgRoot().innerHTML=k,t.connectedBackgroundColor&&p.painter.setBackgroundColor(t.connectedBackgroundColor),p.refreshImmediately(),p.painter.toDataURL()}return t.connectedBackgroundColor&&p.add(new Qa({shape:{x:0,y:0,width:d,height:h},style:{fill:t.connectedBackgroundColor}})),fd(u,function(t){var e=new Jo({style:{x:t.left*_-a,y:t.top*_-s,image:t.dom}});p.add(e)}),p.refreshImmediately(),y.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},wd.convertToPixel=S(Ad,"convertToPixel"),wd.convertFromPixel=S(Ad,"convertFromPixel"),wd.containPixel=function(t,e){var n;if(!this._disposed)return O(t=Yl(this._model,t),function(t,o){0<=o.indexOf("Models")&&O(t,function(t){var l=t.coordinateSystem;if(l&&l.containPoint)n|=!!l.containPoint(e);else if("seriesModels"===o){var i=this._chartsMap[t.__viewId];i&&i.containPoint&&(n|=i.containPoint(e,t))}},this)},this),!!n},wd.getVisual=function(t,e){var n=(t=Yl(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),o=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=o?n.getItemVisual(o,e):n.getVisual(e)},wd.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},wd.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var Md={prepareAndUpdate:function(t){Sd(this),Md.update.call(this,t)},update:function(t){var e=this._model,n=this._api,o=this._zr,i=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),i.create(e,n),a.performDataProcessorTasks(e,t),xd(this,e),i.update(e,n),Hd(e),a.performVisualTasks(e,t),Vd(this,e,n,t);var s=e.get("backgroundColor")||"transparent";if(l.canvasSupported)o.setBackgroundColor(s);else{var r=Ve(s);s=Je(r,"rgb"),0===r[3]&&(s="transparent")}jd(e,n)}},updateTransform:function(t){var e=this._model,n=this,o=this._api;if(e){var l=[];e.eachComponent(function(i,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var r=s.updateTransform(a,e,o,t);r&&r.update&&l.push(s)}else l.push(s)});var i=Q();e.eachSeries(function(l){var a=n._chartsMap[l.__viewId];if(a.updateTransform){var s=a.updateTransform(l,e,o,t);s&&s.update&&i.set(l.uid,1)}else i.set(l.uid,1)}),Hd(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:i}),Gd(n,e,o,t,i),jd(e,this._api)}},updateView:function(t){var e=this._model;e&&(h_.markUpdateMethod(t,"updateView"),Hd(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),Vd(this,this._model,this._api,t),jd(e,this._api))},updateVisual:function(t){Md.update.call(this,t)},updateLayout:function(t){Md.update.call(this,t)}};function Sd(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),Fd(t,"component",e,n),Fd(t,"chart",e,n),n.plan()}function Pd(t,e,n,o,l){var i=t._model;if(o){var a={};a[o+"Id"]=n[o+"Id"],a[o+"Index"]=n[o+"Index"],a[o+"Name"]=n[o+"Name"];var s={mainType:o,query:a};l&&(s.subType=l);var r=n.excludeSeriesId;null!=r&&(r=Q(xl(r))),i&&i.eachComponent(s,function(e){r&&null!=r.get(e.id)||c(t["series"===o?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else fd(t._componentsViews.concat(t._chartsViews),c);function c(o){o&&o.__alive&&o[e]&&o[e](o.__model,i,t._api,n)}}function xd(t,e){var n=t._chartsMap,o=t._scheduler;e.eachSeries(function(t){o.updateStreamModes(t,n[t.__viewId])})}function Dd(t,e){var n=t.type,o=t.escapeConnect,l=Xd[n],i=l.actionInfo,a=(i.update||"update").split(":"),s=a.pop();a=null!=a[0]&&Td(a[0]),this[Bd]=!0;var r=[t],c=!1;t.batch&&(c=!0,r=C(t.batch,function(e){return(e=b(f({},e),t)).batch=null,e}));var u,_=[],d="highlight"===n||"downplay"===n;fd(r,function(t){(u=(u=l.action(t,this._model,this._api))||f({},t)).type=i.event||u.type,_.push(u),d?Pd(this,s,t,"series"):a&&Pd(this,s,t,a.main,a.sub)},this),"none"===s||d||a||(this[Id]?(Sd(this),Md.update.call(this,t),this[Id]=!1):Md[s].call(this,t)),u=c?{type:i.event||n,escapeConnect:o,batch:_}:_[0],this[Bd]=!1,e||this._messageCenter.trigger(u.type,u)}function Ld(t){for(var e=this._pendingActions;e.length;){var n=e.shift();Dd.call(this,n,t)}}function Ud(t){t||this.trigger("updated")}function Fd(t,e,n,o){for(var l="component"===e,i=l?t._componentsViews:t._chartsViews,a=l?t._componentsMap:t._chartsMap,s=t._zr,r=t._api,c=0;c<i.length;c++)i[c].__alive=!1;function u(t){var e="_ec_"+t.id+"_"+t.type,c=a[e];if(!c){var u=Td(t.type);(c=new(l?r_.getClass(u.main,u.sub):h_.getClass(u.sub))).init(n,r),a[e]=c,i.push(c),s.add(c.group)}t.__viewId=c.__id=e,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},l||o.prepareView(c,t,n,r)}for(l?n.eachComponent(function(t,e){"series"!==t&&u(e)}):n.eachSeries(u),c=0;c<i.length;){var _=i[c];_.__alive?c++:(l||_.renderTask.dispose(),s.remove(_.group),_.dispose(n,r),i.splice(c,1),delete a[_.__id],_.__id=_.group.__ecComponentInfo=null)}}function Hd(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function Vd(t,e,n,o){!function(t,e,n,o,l){fd(t._componentsViews,function(t){var l=t.__model;t.render(l,e,n,o),Kd(l,t)})}(t,e,n,o),fd(t._chartsViews,function(t){t.__alive=!1}),Gd(t,e,n,o),fd(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function Gd(t,e,n,o,i){var a,s=t._scheduler;e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var l=n.renderTask;s.updatePayload(l,o),i&&i.get(e.uid)&&l.dirty(),a|=l.perform(s.getPerformArgs(l)),n.group.silent=!!e.get("silent"),Kd(e,n),function(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}(e,n)}),s.unfinished|=a,function(t,e){var n=t._zr.storage,o=0;n.traverse(function(t){o++}),o>e.get("hoverLayerThreshold")&&!l.node&&e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse(function(t){t.useHoverLayer=!0})}})}(t,e),function(t,e){var n=e.getModel("aria");if(n.get("show"))if(n.get("description"))t.setAttribute("aria-label",n.get("description"));else{var o=0;e.eachSeries(function(t,e){++o},this);var l,i=n.get("data.maxCount")||10,a=n.get("series.maxCount")||10,s=Math.min(o,a);if(!(o<1)){var r=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();l=r?u(_("general.withTitle"),{title:r}):_("general.withoutTitle");var c=[];l+=u(_(1<o?"series.multiple.prefix":"series.single.prefix"),{seriesCount:o}),e.eachSeries(function(t,e){if(e<s){var n,l=t.get("name"),a="series."+(1<o?"multiple":"single")+".";n=u(n=_(l?a+"withName":a+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return O_.series.typeNames[t]||"\u81ea\u5b9a\u4e49\u56fe"}(t.subType)});var r=t.getData();(window.data=r).count()>i?n+=u(_("data.partialData"),{displayCnt:i}):n+=_("data.allData");for(var d=[],h=0;h<r.count();h++)if(h<i){var y=r.getName(h),p=Du(r,h);d.push(u(_(y?"data.withName":"data.withoutName"),{name:y,value:p}))}n+=d.join(_("data.separator.middle"))+_("data.separator.end"),c.push(n)}}),l+=c.join(_("series.multiple.separator.middle"))+_("series.multiple.separator.end"),t.setAttribute("aria-label",l)}}function u(t,e){if("string"!=typeof t)return t;var n=t;return O(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function _(t){var e=n.get(t);if(null!=e)return e;for(var o=t.split("."),l=O_.aria,i=0;i<o.length;++i)l=l[o[i]];return l}}(t._zr.dom,e)}function jd(t,e){fd(Jd,function(n){n(t,e)})}wd.resize=function(t){if(!this._disposed){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),o=t&&t.silent;this[Bd]=!0,n&&Sd(this),Md.update.call(this),this[Bd]=!1,Ld.call(this,o),Ud.call(this,o)}}},wd.showLoading=function(t,e){if(!this._disposed&&(vd(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),th[t])){var n=th[t](this._api,e),o=this._zr;this._loadingFX=n,o.add(n)}},wd.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},wd.makeActionFromEvent=function(t){var e=f({},t);return e.type=$d[t.type],e},wd.dispatchAction=function(t,e){this._disposed||(vd(e)||(e={silent:!!e}),Xd[t.type]&&this._model&&(this[Bd]?this._pendingActions.push(t):(Dd.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&l.browser.weChat&&this._throttledZrFlush(),Ld.call(this,e.silent),Ud.call(this,e.silent))))},wd.appendData=function(t){if(!this._disposed){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0}},wd.on=Od("on",!1),wd.off=Od("off",!1),wd.one=Od("one",!1);var Wd=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Kd(t,e){var n=t.get("z"),o=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=o&&(t.zlevel=o))})}function Yd(){this.eventInfo}wd._initEvents=function(){fd(Wd,function(t){function e(e){var n,o=this.getModel(),l=e.target;if("globalout"===t)n={};else if(l&&null!=l.dataIndex){var i=l.dataModel||o.getSeriesByIndex(l.seriesIndex);n=i&&i.getDataParams(l.dataIndex,l.dataType,l)||{}}else l&&l.eventData&&(n=f({},l.eventData));if(n){var a=n.componentType,s=n.componentIndex;"markLine"!==a&&"markPoint"!==a&&"markArea"!==a||(a="series",s=n.seriesIndex);var r=a&&null!=s&&o.getComponent(a,s),c=r&&this["series"===r.mainType?"_chartsMap":"_componentsMap"][r.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:l,packedEvent:n,model:r,view:c},this.trigger(t,n)}}e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)},this),fd($d,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},wd.isDisposed=function(){return this._disposed},wd.clear=function(){this._disposed||this.setOption({series:[]},!0)},wd.dispose=function(){if(!this._disposed){this._disposed=!0,$l(this.getDom(),ih,"");var t=this._api,e=this._model;fd(this._componentsViews,function(n){n.dispose(e,t)}),fd(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete eh[this.id]}},I(Nd,Nt),Yd.prototype={constructor:Yd,normalizeQuery:function(t){var e={},n={},o={};if(D(t)){var l=Td(t);e.mainType=l.main||null,e.subType=l.sub||null}else{var i=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};O(t,function(t,l){for(var s=!1,r=0;r<i.length;r++){var c=i[r],u=l.lastIndexOf(c);if(0<u&&u===l.length-c.length){var _=l.slice(0,u);"data"!==_&&(e.mainType=_,e[c.toLowerCase()]=t,s=!0)}}a.hasOwnProperty(l)&&(n[l]=t,s=!0),s||(o[l]=t)})}return{cptQuery:e,dataQuery:n,otherQuery:o}},filter:function(t,e,n){var o=this.eventInfo;if(!o)return!0;var l=o.targetEl,i=o.packedEvent,a=o.model,s=o.view;if(!a||!s)return!0;var r=e.cptQuery,c=e.dataQuery;return u(r,a,"mainType")&&u(r,a,"subType")&&u(r,a,"index","componentIndex")&&u(r,a,"name")&&u(r,a,"id")&&u(c,i,"name")&&u(c,i,"dataIndex")&&u(c,i,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,l,i));function u(t,e,n,o){return null==t[n]||e[o||n]===t[n]}},afterTrigger:function(){this.eventInfo=null}};var Xd={},$d={},zd=[],qd=[],Jd=[],Zd=[],Qd={},th={},eh={},nh={},oh=new Date-0,lh=new Date-0,ih="_echarts_instance_";function ah(t){nh[t]=!1}var sh=ah;function rh(t){return eh[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,ih)]}function ch(t,e){Qd[t]=e}function uh(t){qd.push(t)}function _h(t,e){mh(zd,t,e,1e3)}function dh(t,e,n){"function"==typeof e&&(n=e,e="");var o=vd(t)?t.type:[t,t={event:e}][0];t.event=(t.event||o).toLowerCase(),e=t.event,gd(Rd.test(o)&&Rd.test(e)),Xd[o]||(Xd[o]={action:n,actionInfo:t}),$d[e]=o}function hh(t,e){nu.register(t,e)}function yh(t,e){mh(Zd,t,e,1e3,"layout")}function ph(t,e){mh(Zd,t,e,3e3,"visual")}function mh(t,e,n,o,l){(bd(e)||vd(e))&&(n=e,e=o);var i=N_.wrapStageHandler(n,l);return i.__prio=e,i.__raw=n,t.push(i),i}function kh(t,e){th[t]=e}function gh(t){return Ec.extend(t)}function fh(t){return r_.extend(t)}function bh(t){return t_.extend(t)}function vh(t){return h_.extend(t)}function Th(t){return t}function Eh(t,e,n,o,l){this._old=t,this._new=e,this._oldKeyGetter=n||Th,this._newKeyGetter=o||Th,this.context=l}function Bh(t,e,n,o,l){for(var i=0;i<t.length;i++){var a="_ec_"+l[o](t[i],i),s=e[a];null==s?(n.push(a),e[a]=i):(s.length||(e[a]=s=[s]),s.push(i))}}ph(2e3,R_),uh(Eu),_h(900,function(t){var e=Q();t.eachSeries(function(t){var n=t.get("stack");if(n){var o=e.get(n)||e.set(n,[]),l=t.getData(),i={stackResultDimension:l.getCalculationInfo("stackResultDimension"),stackedOverDimension:l.getCalculationInfo("stackedOverDimension"),stackedDimension:l.getCalculationInfo("stackedDimension"),stackedByDimension:l.getCalculationInfo("stackedByDimension"),isStackedByIndex:l.getCalculationInfo("isStackedByIndex"),data:l,seriesModel:t};if(!i.stackedDimension||!i.isStackedByIndex&&!i.stackedByDimension)return;o.length&&l.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(i)}}),e.each(Bu)}),kh("default",function(t,e){b(e=e||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Nn,o=new Qa({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(o);var l=e.fontSize+" sans-serif",i=new Qa({style:{fill:"none",text:e.text,font:l,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(n.add(i),e.showSpinner){var a=new as({shape:{startAngle:-C_/2,endAngle:-C_/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*C_/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*C_/2}).delay(300).start("circularInOut"),n.add(a)}return n.resize=function(){var n=_o(e.text,l),s=e.showSpinner?e.spinnerRadius:0,r=(t.getWidth()-2*s-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner?0:n/2),c=t.getHeight()/2;e.showSpinner&&a.setShape({cx:r,cy:c}),i.setShape({x:r-s,y:c-s,width:2*s,height:2*s}),o.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}),dh({type:"highlight",event:"highlight",update:"highlight"},et),dh({type:"downplay",event:"downplay",update:"downplay"},et),ch("light",z_),ch("dark",Z_),Eh.prototype={constructor:Eh,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},o=[],l=[];for(Bh(t,{},o,"_oldKeyGetter",this),Bh(e,n,l,"_newKeyGetter",this),i=0;i<t.length;i++)null!=(s=n[a=o[i]])?((c=s.length)?(1===c&&(n[a]=null),s=s.shift()):n[a]=null,this._update&&this._update(s,i)):this._remove&&this._remove(i);for(var i=0;i<l.length;i++){var a=l[i];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var r=0,c=s.length;r<c;r++)this._add&&this._add(s[r]);else this._add&&this._add(s)}}}};var Ih=Q(["tooltip","label","itemName","itemId","seriesName"]);function Rh(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function Oh(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function Ch(t){null!=t&&f(this,t),this.otherDims={}}var Nh=L,wh="undefined",Ah={float:typeof Float64Array==wh?Array:Float64Array,int:typeof Int32Array==wh?Array:Int32Array,ordinal:Array,number:Array,time:Array},Mh=typeof Uint32Array==wh?Array:Uint32Array,Sh=typeof Int32Array==wh?Array:Int32Array,Ph=typeof Uint16Array==wh?Array:Uint16Array;function xh(t){return 65535<t._rawCount?Mh:Ph}var Dh=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Lh=["_extent","_approximateExtent","_rawExtent"];function Uh(t,e){O(Dh.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,O(Lh,function(n){t[n]=m(e[n])}),t._calculationInfo=f(e._calculationInfo)}var Fh=function(t,e){t=t||["x","y"];for(var n={},o=[],l={},i=0;i<t.length;i++){var a=t[i];D(a)?a=new Ch({name:a}):a instanceof Ch||(a=new Ch(a));var s=a.name;a.type=a.type||"float",a.coordDim||(a.coordDim=s,a.coordDimIndex=0),a.otherDims=a.otherDims||{},o.push(s),(n[s]=a).index=i,a.createInvertedIndices&&(l[s]=[])}this.dimensions=o,this._dimensionInfos=n,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(t){var e={},n=e.encode={},o=Q(),l=[],i=[],a=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};O(t.dimensions,function(e){var s=t.getDimensionInfo(e),r=s.coordDim;if(r){var c=s.coordDimIndex;Rh(n,r)[c]=e,s.isExtraCoord||(o.set(r,1),function(t){return!("ordinal"===t||"time"===t)}(s.type)&&(l[0]=e),Rh(a.encode,r)[c]=s.index),s.defaultTooltip&&i.push(e)}Ih.each(function(t,e){var o=Rh(n,e),l=s.otherDims[e];null!=l&&!1!==l&&(o[l]=s.name)})});var s=[],r={};o.each(function(t,e){var o=n[e];r[e]=o[0],s=s.concat(o)}),e.dataDimsOnCoord=s,e.encodeFirstDimNotExtra=r;var c=n.label;c&&c.length&&(l=c.slice());var u=n.tooltip;return u&&u.length?i=u.slice():i.length||(i=l.slice()),n.defaultedLabel=l,n.defaultedTooltip=i,e}(this),this._invertedIndicesMap=l,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},Hh=Fh.prototype;function Vh(t,e,n,o,l){var i=Ah[e.type],a=o-1,s=e.name,r=t[s][a];if(r&&r.length<n){for(var c=new i(Math.min(l-a*n,n)),u=0;u<r.length;u++)c[u]=r[u];t[s][a]=c}for(var _=o*n;_<l;_+=n)t[s].push(new i(Math.min(l-_,n)))}function Gh(t){var e=t._invertedIndicesMap;O(e,function(n,o){var l=t._dimensionInfos[o].ordinalMeta;if(l){n=e[o]=new Sh(l.categories.length);for(var i=0;i<n.length;i++)n[i]=-1;for(i=0;i<t._count;i++)n[t.get(o,i)]=i}})}function jh(t,e,n){var o;if(null!=e){var l=t._chunkSize,i=Math.floor(n/l),a=n%l,s=t.dimensions[e],r=t._storage[s][i];if(r){o=r[a];var c=t._dimensionInfos[s].ordinalMeta;c&&c.categories.length&&(o=c.categories[o])}}return o}function Wh(t){return t}function Kh(t){return t<this._count&&0<=t?this._indices[t]:-1}function Yh(t,e){var n=t._idList[e];return null==n&&(n=jh(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n}function Xh(t){return P(t)||(t=[t]),t}function $h(t,e){var n=t.dimensions,o=new Fh(C(n,t.getDimensionInfo,t),t.hostModel);Uh(o,t);for(var l=o._storage={},i=t._storage,a=0;a<n.length;a++){var s=n[a];i[s]&&(0<=E(e,s)?(l[s]=zh(i[s]),o._rawExtent[s]=[1/0,-1/0],o._extent[s]=null):l[s]=i[s])}return o}function zh(t){for(var e,n,o=new Array(t.length),l=0;l<t.length;l++)o[l]=(n=void 0,(n=(e=t[l]).constructor)===Array?e.slice():new n(e));return o}function qh(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType}function Jh(t,e,n){Lc.isInstance(e)||(e=Lc.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var o=(n.dimsDef||[]).slice(),l=Q(),i=Q(),a=[],s=function(t,e,n,o){var l=Math.max(t.dimensionsDetectCount||1,e.length,n.length,o||0);return O(e,function(t){var e=t.dimsDef;e&&(l=Math.max(l,e.length))}),l}(e,t,o,n.dimCount),r=0;r<s;r++){var c=o[r]=f({},L(o[r])?o[r]:{name:o[r]}),u=c.name,_=a[r]=new Ch;null!=u&&null==l.get(u)&&(_.name=_.displayName=u,l.set(u,r)),null!=c.type&&(_.type=c.type),null!=c.displayName&&(_.displayName=c.displayName)}var d=n.encodeDef;!d&&n.encodeDefaulter&&(d=n.encodeDefaulter(e,s)),(d=Q(d)).each(function(t,e){if(1===(t=xl(t).slice()).length&&!D(t[0])&&t[0]<0)d.set(e,!1);else{var n=d.set(e,[]);O(t,function(t,o){D(t)&&(t=l.get(t)),null!=t&&t<s&&(n[o]=t,y(a[t],e,o))})}});var h=0;function y(t,e,n){null!=Ih.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,i.set(e,!0))}O(t,function(t,e){var n,o,l;if(D(t))n=t,t={};else{n=t.name;var i=t.ordinalMeta;t.ordinalMeta=null,(t=m(t)).ordinalMeta=i,o=t.dimsDef,l=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}if(!1!==(s=d.get(n))){var s;if(!(s=xl(s)).length)for(var r=0;r<(o&&o.length||1);r++){for(;h<a.length&&null!=a[h].coordDim;)h++;h<a.length&&s.push(h++)}O(s,function(e,i){var s=a[e];if(y(b(s,t),n,i),null==s.name&&o){var r=o[i];L(r)||(r={name:r}),s.name=s.displayName=r.name,s.defaultTooltip=r.defaultTooltip}l&&b(s.otherDims,l)})}});var p=n.generateCoord,k=n.generateCoordCount,g=null!=k;k=p?k||1:0;for(var v,T,E=p||"value",B=0;B<s;B++)null==(_=a[B]=a[B]||new Ch).coordDim&&(_.coordDim=Zh(E,i,g),_.coordDimIndex=0,(!p||k<=0)&&(_.isExtraCoord=!0),k--),null==_.name&&(_.name=Zh(_.coordDim,l)),null==_.type&&(v=e,T=B,_.name,$c(v.data,v.sourceFormat,v.seriesLayoutBy,v.dimensionsDefine,v.startIndex,T)===Uc||_.isExtraCoord&&(null!=_.otherDims.itemName||null!=_.otherDims.seriesName))&&(_.type="ordinal");return a}function Zh(t,e,n){if(n||null!=e.get(t)){for(var o=0;null!=e.get(t+o);)o++;t+=o}return e.set(t,!0),t}Hh.type="list",Hh.hasItemOption=!0,Hh.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},Hh.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},Hh.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Hh.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var o=n.encode[t];return!0===e?(o||[]).slice():o&&o[e]},Hh.initData=function(t,e,n){(Lc.isInstance(t)||R(t))&&(t=new Iu(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=Su[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Su.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},Hh.getProvider=function(){return this._rawData},Hh.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var o=e.count();e.persistent||(o+=n),this._initDataFromProvider(n,o)},Hh.appendValues=function(t,e){for(var n=this._chunkSize,o=this._storage,l=this.dimensions,i=l.length,a=this._rawExtent,s=this.count(),r=s+Math.max(t.length,e?e.length:0),c=this._chunkCount,u=0;u<i;u++)a[k=l[u]]||(a[k]=[1/0,-1/0]),o[k]||(o[k]=[]),Vh(o,this._dimensionInfos[k],n,c,r),this._chunkCount=o[k].length;for(var _=new Array(i),d=s;d<r;d++){for(var h=d-s,y=Math.floor(d/n),p=d%n,m=0;m<i;m++){var k=l[m],g=this._dimValueGetterArrayRows(t[h]||_,k,h,m);o[k][y][p]=g;var f=a[k];g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g)}e&&(this._nameList[d]=e[h])}this._rawCount=this._count=r,this._extent={},Gh(this)},Hh._initDataFromProvider=function(t,e){if(!(e<=t)){for(var n,o=this._chunkSize,l=this._rawData,i=this._storage,a=this.dimensions,s=a.length,r=this._dimensionInfos,c=this._nameList,u=this._idList,_=this._rawExtent,d=this._nameRepeatCount={},h=this._chunkCount,y=0;y<s;y++){_[v=a[y]]||(_[v]=[1/0,-1/0]);var p=r[v];0===p.otherDims.itemName&&(n=this._nameDimIdx=y),0===p.otherDims.itemId&&(this._idDimIdx=y),i[v]||(i[v]=[]),Vh(i,p,o,h,e),this._chunkCount=i[v].length}for(var m=new Array(s),k=t;k<e;k++){m=l.getItem(k,m);for(var g=Math.floor(k/o),f=k%o,b=0;b<s;b++){var v,T=i[v=a[b]][g],E=this._dimValueGetter(m,v,k,b);T[f]=E;var B=_[v];E<B[0]&&(B[0]=E),E>B[1]&&(B[1]=E)}if(!l.pure){var I=c[k];if(m&&null==I)if(null!=m.name)c[k]=I=m.name;else if(null!=n){var R=a[n],O=i[R][g];if(O){I=O[f];var C=r[R].ordinalMeta;C&&C.categories.length&&(I=C.categories[I])}}var N=null==m?null:m.id;null==N&&null!=I&&(d[I]=d[I]||0,0<d[N=I]&&(N+="__ec__"+d[I]),d[I]++),null!=N&&(u[k]=N)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=e,this._extent={},Gh(this)}},Hh.count=function(){return this._count},Hh.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){l=new e(n);for(var o=0;o<n;o++)l[o]=t[o]}else l=new e(t.buffer,0,n)}else{var l=new(e=xh(this))(this.count());for(o=0;o<l.length;o++)l[o]=o}return l},Hh.get=function(t,e){if(!(0<=e&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var o=Math.floor(e/this._chunkSize),l=e%this._chunkSize;return n[t][o][l]},Hh.getByRawIndex=function(t,e){if(!(0<=e&&e<this._rawCount))return NaN;var n=this._storage[t];if(!n)return NaN;var o=Math.floor(e/this._chunkSize),l=e%this._chunkSize;return n[o][l]},Hh._getFast=function(t,e){var n=Math.floor(e/this._chunkSize),o=e%this._chunkSize;return this._storage[t][n][o]},Hh.getValues=function(t,e){var n=[];P(t)||(e=t,t=this.dimensions);for(var o=0,l=t.length;o<l;o++)n.push(this.get(t[o],e));return n},Hh.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,o=e.length;n<o;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},Hh.getDataExtent=function(t){t=this.getDimension(t);var e=[1/0,-1/0];if(!this._storage[t])return e;var n,o=this.count();if(!this._indices)return this._rawExtent[t].slice();if(n=this._extent[t])return n.slice();for(var l=(n=e)[0],i=n[1],a=0;a<o;a++){var s=this._getFast(t,this.getRawIndex(a));s<l&&(l=s),i<s&&(i=s)}return n=[l,i],this._extent[t]=n},Hh.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},Hh.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},Hh.getCalculationInfo=function(t){return this._calculationInfo[t]},Hh.setCalculationInfo=function(t,e){Nh(t)?f(this._calculationInfo,t):this._calculationInfo[t]=e},Hh.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,o=this.count();n<o;n++){var l=this.get(t,n);isNaN(l)||(e+=l)}return e},Hh.getMedian=function(t){var e=[];this.each(t,function(t,n){isNaN(t)||e.push(t)});var n=[].concat(e).sort(function(t,e){return t-e}),o=this.count();return 0===o?0:o%2==1?n[(o-1)/2]:(n[o/2]+n[o/2-1])/2},Hh.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},Hh.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},Hh.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var o=0,l=this._count-1;o<=l;){var i=(o+l)/2|0;if(e[i]<t)o=1+i;else{if(!(e[i]>t))return i;l=i-1}}return-1},Hh.indicesOfNearest=function(t,e,n){var o=[];if(!this._storage[t])return o;null==n&&(n=1/0);for(var l=1/0,i=-1,a=0,s=0,r=this.count();s<r;s++){var c=e-this.get(t,s),u=Math.abs(c);u<=n&&((u<l||u===l&&0<=c&&i<0)&&(l=u,i=c,a=0),c===i&&(o[a++]=s))}return o.length=a,o},Hh.getRawIndex=Wh,Hh.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var o=this.dimensions[n];e.push(this.get(o,t))}return e},Hh.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||jh(this,this._nameDimIdx,e)||""},Hh.getId=function(t){return Yh(this,this.getRawIndex(t))},Hh.each=function(t,e,n,o){if(this._count){"function"==typeof t&&(o=n,n=e,e=t,t=[]),n=n||o||this;for(var l=(t=C(Xh(t),this.getDimension,this)).length,i=0;i<this.count();i++)switch(l){case 0:e.call(n,i);break;case 1:e.call(n,this.get(t[0],i),i);break;case 2:e.call(n,this.get(t[0],i),this.get(t[1],i),i);break;default:for(var a=0,s=[];a<l;a++)s[a]=this.get(t[a],i);s[a]=i,e.apply(n,s)}}},Hh.filterSelf=function(t,e,n,o){if(this._count){"function"==typeof t&&(o=n,n=e,e=t,t=[]),n=n||o||this,t=C(Xh(t),this.getDimension,this);for(var l=this.count(),i=new(xh(this))(l),a=[],s=t.length,r=0,c=t[0],u=0;u<l;u++){var _,d=this.getRawIndex(u);if(0===s)_=e.call(n,u);else if(1===s){var h=this._getFast(c,d);_=e.call(n,h,u)}else{for(var y=0;y<s;y++)a[y]=this._getFast(c,d);a[y]=u,_=e.apply(n,a)}_&&(i[r++]=d)}return r<l&&(this._indices=i),this._count=r,this._extent={},this.getRawIndex=this._indices?Kh:Wh,this}},Hh.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var o=e.length;if(o){var l=this.count(),i=new(xh(this))(l),a=0,s=e[0],r=t[s][0],c=t[s][1],u=!1;if(!this._indices){var _=0;if(1===o){for(var d=this._storage[e[0]],h=0;h<this._chunkCount;h++)for(var y=d[h],p=Math.min(this._count-h*this._chunkSize,this._chunkSize),m=0;m<p;m++)(r<=(v=y[m])&&v<=c||isNaN(v))&&(i[a++]=_),_++;u=!0}else if(2===o){d=this._storage[s];var k=this._storage[e[1]],g=t[e[1]][0],f=t[e[1]][1];for(h=0;h<this._chunkCount;h++){y=d[h];var b=k[h];for(p=Math.min(this._count-h*this._chunkSize,this._chunkSize),m=0;m<p;m++){var v=y[m],T=b[m];(r<=v&&v<=c||isNaN(v))&&(g<=T&&T<=f||isNaN(T))&&(i[a++]=_),_++}}u=!0}}if(!u)if(1===o)for(m=0;m<l;m++){var E=this.getRawIndex(m);(r<=(v=this._getFast(s,E))&&v<=c||isNaN(v))&&(i[a++]=E)}else for(m=0;m<l;m++){var B=!0;for(E=this.getRawIndex(m),h=0;h<o;h++){var I=e[h];((v=this._getFast(n,E))<t[I][0]||v>t[I][1])&&(B=!1)}B&&(i[a++]=this.getRawIndex(m))}return a<l&&(this._indices=i),this._count=a,this._extent={},this.getRawIndex=this._indices?Kh:Wh,this}}},Hh.mapArray=function(t,e,n,o){"function"==typeof t&&(o=n,n=e,e=t,t=[]),n=n||o||this;var l=[];return this.each(t,function(){l.push(e&&e.apply(this,arguments))},n),l},Hh.map=function(t,e,n,o){n=n||o||this;var l=$h(this,t=C(Xh(t),this.getDimension,this));l._indices=this._indices,l.getRawIndex=l._indices?Kh:Wh;for(var i=l._storage,a=[],s=this._chunkSize,r=t.length,c=this.count(),u=[],_=l._rawExtent,d=0;d<c;d++){for(var h=0;h<r;h++)u[h]=this.get(t[h],d);u[r]=d;var y=e&&e.apply(n,u);if(null!=y){"object"!=typeof y&&(a[0]=y,y=a);for(var p=this.getRawIndex(d),m=Math.floor(p/s),k=p%s,g=0;g<y.length;g++){var f=t[g],b=y[g],v=_[f],T=i[f];T&&(T[m][k]=b),b<v[0]&&(v[0]=b),b>v[1]&&(v[1]=b)}}}return l},Hh.downSample=function(t,e,n,o){for(var l=$h(this,[t]),i=l._storage,a=[],s=Math.floor(1/e),r=i[t],c=this.count(),u=this._chunkSize,_=l._rawExtent[t],d=new(xh(this))(c),h=0,y=0;y<c;y+=s){c-y<s&&(s=c-y,a.length=s);for(var p=0;p<s;p++){var m=this.getRawIndex(y+p),k=Math.floor(m/u),g=m%u;a[p]=r[k][g]}var f=n(a),b=this.getRawIndex(Math.min(y+o(a,f)||0,c-1)),v=b%u;(r[Math.floor(b/u)][v]=f)<_[0]&&(_[0]=f),f>_[1]&&(_[1]=f),d[h++]=b}return l._count=h,l._indices=d,l.getRawIndex=Kh,l},Hh.getItemModel=function(t){var e=this.hostModel;return new vr(this.getRawDataItem(t),e,e&&e.ecModel)},Hh.diff=function(t){var e=this;return new Eh(t?t.getIndices():[],this.getIndices(),function(e){return Yh(t,e)},function(t){return Yh(e,t)})},Hh.getVisual=function(t){var e=this._visual;return e&&e[t]},Hh.setVisual=function(t,e){if(Nh(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},Hh.setLayout=function(t,e){if(Nh(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},Hh.getLayout=function(t){return this._layout[t]},Hh.getItemLayout=function(t){return this._itemLayouts[t]},Hh.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?f(this._itemLayouts[t]||{},e):e},Hh.clearItemLayouts=function(){this._itemLayouts.length=0},Hh.getItemVisual=function(t,e,n){var o=this._itemVisuals[t],l=o&&o[e];return null!=l||n?l:this.getVisual(e)},Hh.setItemVisual=function(t,e,n){var o=this._itemVisuals[t]||{},l=this.hasItemVisual;if(this._itemVisuals[t]=o,Nh(e))for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i],l[i]=!0);else o[e]=n,l[e]=!0},Hh.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},Hh.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(qh,e)),this._graphicEls[t]=e},Hh.getItemGraphicEl=function(t){return this._graphicEls[t]},Hh.eachItemGraphicEl=function(t,e){O(this._graphicEls,function(n,o){n&&t&&t.call(e,n,o)})},Hh.cloneShallow=function(t){if(!t){var e=C(this.dimensions,this.getDimensionInfo,this);t=new Fh(e,this.hostModel)}if(t._storage=this._storage,Uh(t,this),this._indices){var n=this._indices.constructor;t._indices=new n(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?Kh:Wh,t},Hh.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(K(arguments)))})},Hh.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Hh.CHANGABLE_METHODS=["filterSelf","selectRange"];var Qh=function(t,e){return Jh((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function ty(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.firstCategoryDimIndex=null}var ey={cartesian2d:function(t,e,n,o){var l=t.getReferringComponents("xAxis")[0],i=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",l),n.set("y",i),ny(l)&&(o.set("x",l),e.firstCategoryDimIndex=0),ny(i)&&(o.set("y",i),e.firstCategoryDimIndex,e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,o){var l=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",l),ny(l)&&(o.set("single",l),e.firstCategoryDimIndex=0)},polar:function(t,e,n,o){var l=t.getReferringComponents("polar")[0],i=l.findAxisModel("radiusAxis"),a=l.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",i),n.set("angle",a),ny(i)&&(o.set("radius",i),e.firstCategoryDimIndex=0),ny(a)&&(o.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,o){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,o){var l=t.ecModel,i=l.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=i.dimensions.slice();O(i.parallelAxisIndex,function(t,i){var s=l.getComponent("parallelAxis",t),r=a[i];n.set(r,s),ny(s)&&null==e.firstCategoryDimIndex&&(o.set(r,s),e.firstCategoryDimIndex=i)})}};function ny(t){return"category"===t.get("type")}function oy(t,e,n){var o,l,i,a,s=(n=n||{}).byIndex,r=n.stackedCoordDimension,c=!(!t||!t.get("stack"));if(O(e,function(t,n){D(t)&&(e[n]=t={name:t}),c&&!t.isExtraCoord&&(s||o||!t.ordinalMeta||(o=t),l||"ordinal"===t.type||"time"===t.type||r&&r!==t.coordDim||(l=t))}),!l||s||o||(s=!0),l){i="__\0ecstackresult",a="__\0ecstackedover",o&&(o.createInvertedIndices=!0);var u=l.coordDim,_=l.type,d=0;O(e,function(t){t.coordDim===u&&d++}),e.push({name:i,coordDim:u,coordDimIndex:d,type:_,isExtraCoord:!0,isCalculationCoord:!0}),d++,e.push({name:a,coordDim:a,coordDimIndex:d,type:_,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:l&&l.name,stackedByDimension:o&&o.name,isStackedByIndex:s,stackedOverDimension:a,stackResultDimension:i}}function ly(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function iy(t,e){return ly(t,e)?t.getCalculationInfo("stackResultDimension"):e}function ay(t,e,n){n=n||{},Lc.isInstance(t)||(t=Lc.seriesDataToSource(t));var o,l=e.get("coordinateSystem"),i=nu.get(l),a=function(t){var e=t.get("coordinateSystem"),n=new ty(e),o=ey[e];if(o)return o(t,n,n.axisMap,n.categoryAxisMap),n}(e);a&&(o=C(a.coordSysDims,function(t){var e={name:t},n=a.axisMap.get(t);if(n){var o=n.get("type");e.type=Oh(o)}return e})),o=o||i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"];var s,r,c=Qh(t,{coordDimensions:o,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?S(Kc,o,e):null});a&&O(c,function(t,e){var n=t.coordDim,o=a.categoryAxisMap.get(n);o&&(null==s&&(s=e),t.ordinalMeta=o.getOrdinalMeta()),null!=t.otherDims.itemName&&(r=!0)}),r||null==s||(c[s].otherDims.itemName=0);var u=oy(e,c),_=new Fh(c,e);_.setCalculationInfo(u);var d=null!=s&&function(t){if(t.sourceFormat===Nc){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!P(Ul(e))}}(t)?function(t,e,n,o){return o===s?n:this.defaultDimValueGetter(t,e,n,o)}:null;return _.hasItemOption=!1,_.initData(t,null,d),_}function sy(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function ry(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}sy.prototype.parse=function(t){return t},sy.prototype.getSetting=function(t){return this._setting[t]},sy.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},sy.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},sy.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},sy.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},sy.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},sy.prototype.getExtent=function(){return this._extent.slice()},sy.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},sy.prototype.isBlank=function(){return this._isBlank},sy.prototype.setBlank=function(t){this._isBlank=t},sy.prototype.getLabel=null,Ql(sy),li(sy,{registerWhenExtend:!0}),ry.createByAxisModel=function(t){var e=t.option,n=e.data,o=n&&C(n,_y);return new ry({categories:o,needCollect:!o,deduplication:!1!==e.dedplication})};var cy=ry.prototype;function uy(t){return t._map||(t._map=Q(t.categories))}function _y(t){return L(t)&&null!=t.value?t.value:t+""}cy.getOrdinal=function(t){return uy(this).get(t)},cy.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var o=uy(this);return null==(e=o.get(t))&&(n?(e=this.categories.length,this.categories[e]=t,o.set(t,e)):e=NaN),e};var dy=sy.prototype,hy=sy.extend({type:"ordinal",init:function(t,e){t&&!P(t)||(t=new ry({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),dy.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return dy.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(dy.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:et,niceExtent:et});hy.create=function(){return new hy};var yy=Nr;function py(t){return Mr(t)+2}function my(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function ky(t,e){isFinite(t[0])||(t[0]=e[0]),isFinite(t[1])||(t[1]=e[1]),my(t,0,e),my(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var gy=Nr,fy=sy.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),fy.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=py(t)},getTicks:function(t){var e=this._interval,n=this._extent,o=this._niceExtent,l=this._intervalPrecision,i=[];if(!e)return i;n[0]<o[0]&&(t?i.push(gy(o[0]-e,l)):i.push(n[0]));for(var a=o[0];a<=o[1]&&(i.push(a),(a=gy(a+e,l))!==i[i.length-1]);)if(1e4<i.length)return[];var s=i.length?i[i.length-1]:o[1];return n[1]>s&&(t?i.push(gy(s+e,l)):i.push(n[1])),i},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],o=this.getExtent(),l=1;l<e.length;l++){for(var i=e[l],a=e[l-1],s=0,r=[],c=(i-a)/t;s<t-1;){var u=Nr(a+(s+1)*c);u>o[0]&&u<o[1]&&r.push(u),s++}n.push(r)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=Mr(t)||0:"auto"===n&&(n=this._intervalPrecision),Yr(t=gy(t,n,!0))},niceTicks:function(t,e,n){t=t||5;var o=this._extent,l=o[1]-o[0];if(isFinite(l)){l<0&&(l=-l,o.reverse());var i=function(t,e,n,o){var l={},i=t[1]-t[0],a=l.interval=Gr(i/e,!0);null!=n&&a<n&&(a=l.interval=n),null!=o&&o<a&&(a=l.interval=o);var s=l.intervalPrecision=py(a);return ky(l.niceTickExtent=[yy(Math.ceil(t[0]/a)*a,s),yy(Math.floor(t[1]/a)*a,s)],t),l}(o,t,e,n);this._intervalPrecision=i.intervalPrecision,this._interval=i.interval,this._niceExtent=i.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;var o=e[1]-e[0];isFinite(o)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var l=this._interval;t.fixMin||(e[0]=gy(Math.floor(e[0]/l)*l)),t.fixMax||(e[1]=gy(Math.ceil(e[1]/l)*l))}});fy.create=function(){return new fy};var by="__ec_stack_",vy="undefined"!=typeof Float32Array?Float32Array:Array;function Ty(t){return t.get("stack")||by+t.seriesIndex}function Ey(t){return t.dim+t.index}function By(t,e){var n=[];return e.eachSeriesByType(t,function(t){wy(t)&&!Ay(t)&&n.push(t)}),n}function Iy(t){var e=function(t){var e={};O(t,function(t){var n=t.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var o=t.getData(),l=n.dim+"_"+n.index,i=o.mapDimension(n.dim),a=0,s=o.count();a<s;++a){var r=o.get(i,a);e[l]?e[l].push(r):e[l]=[r]}});var n=[];for(var o in e)if(e.hasOwnProperty(o)){var l=e[o];if(l){l.sort(function(t,e){return t-e});for(var i=null,a=1;a<l.length;++a){var s=l[a]-l[a-1];0<s&&(i=null===i?s:Math.min(i,s))}n[o]=i}}return n}(t),n=[];return O(t,function(t){var o,l=t.coordinateSystem.getBaseAxis(),i=l.getExtent();if("category"===l.type)o=l.getBandWidth();else if("value"===l.type||"time"===l.type){var a=l.dim+"_"+l.index,s=e[a],r=Math.abs(i[1]-i[0]),c=l.scale.getExtent(),u=Math.abs(c[1]-c[0]);o=s?r/u*s:r}else{var _=t.getData();o=Math.abs(i[1]-i[0])/_.count()}var d=Cr(t.get("barWidth"),o),h=Cr(t.get("barMaxWidth"),o),y=Cr(t.get("barMinWidth")||1,o),p=t.get("barGap"),m=t.get("barCategoryGap");n.push({bandWidth:o,barWidth:d,barMaxWidth:h,barMinWidth:y,barGap:p,barCategoryGap:m,axisKey:Ey(l),stackId:Ty(t)})}),Ry(n)}function Ry(t){var e={};O(t,function(t,n){var o=t.axisKey,l=t.bandWidth,i=e[o]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=i.stacks;e[o]=i;var s=t.stackId;a[s]||i.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var r=t.barWidth;r&&!a[s].width&&(a[s].width=r,r=Math.min(i.remainedWidth,r),i.remainedWidth-=r);var c=t.barMaxWidth;c&&(a[s].maxWidth=c);var u=t.barMinWidth;u&&(a[s].minWidth=u);var _=t.barGap;null!=_&&(i.gap=_);var d=t.barCategoryGap;null!=d&&(i.categoryGap=d)});var n={};return O(e,function(t,e){n[e]={};var o=t.stacks,l=t.bandWidth,i=Cr(t.categoryGap,l),a=Cr(t.gap,1),s=t.remainedWidth,r=t.autoWidthCount,c=(s-i)/(r+(r-1)*a);c=Math.max(c,0),O(o,function(t){var e=t.maxWidth,n=t.minWidth;if(t.width)o=t.width,e&&(o=Math.min(o,e)),n&&(o=Math.max(o,n)),t.width=o,s-=o+a*o,r--;else{var o=c;e&&e<o&&(o=Math.min(e,s)),n&&o<n&&(o=n),o!==c&&(t.width=o,s-=o+a*o,r--)}}),c=(s-i)/(r+(r-1)*a),c=Math.max(c,0);var u,_=0;O(o,function(t,e){t.width||(t.width=c),_+=(u=t).width*(1+a)}),u&&(_-=u.width*a);var d=-_/2;O(o,function(t,o){n[e][o]=n[e][o]||{bandWidth:l,offset:d,width:t.width},d+=t.width*(1+a)})}),n}function Oy(t,e,n){if(t&&e){var o=t[Ey(e)];return null!=o&&null!=n&&(o=o[Ty(n)]),o}}function Cy(t,e){var n=By(t,e),o=Iy(n),l={};O(n,function(t){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),a=Ty(t),s=o[Ey(i)][a],r=s.offset,c=s.width,u=n.getOtherAxis(i),_=t.get("barMinHeight")||0;l[a]=l[a]||[],e.setLayout({bandWidth:s.bandWidth,offset:r,size:c});for(var d=e.mapDimension(u.dim),h=e.mapDimension(i.dim),y=ly(e,d),p=u.isHorizontal(),m=My(i,u),k=0,g=e.count();k<g;k++){var f,b,v,T,E,B=e.get(d,k),I=e.get(h,k),R=0<=B?"p":"n",O=m;y&&(l[a][I]||(l[a][I]={p:m,n:m}),O=l[a][I][R]),p?(f=O,b=(E=n.dataToPoint([B,I]))[1]+r,v=E[0]-m,T=c,Math.abs(v)<_&&(v=(v<0?-1:1)*_),isNaN(v)||y&&(l[a][I][R]+=v)):(f=(E=n.dataToPoint([I,B]))[0]+r,b=O,v=c,T=E[1]-m,Math.abs(T)<_&&(T=(T<=0?-1:1)*_),isNaN(T)||y&&(l[a][I][R]+=T)),e.setItemLayout(k,{x:f,y:b,width:v,height:T})}},this)}var Ny={seriesType:"bar",plan:u_(),reset:function(t){if(wy(t)&&Ay(t)){var e=t.getData(),n=t.coordinateSystem,o=n.grid.getRect(),l=n.getBaseAxis(),i=n.getOtherAxis(l),a=e.mapDimension(i.dim),s=e.mapDimension(l.dim),r=i.isHorizontal(),c=r?0:1,u=Oy(Iy([t]),l,t).width;return.5<u||(u=.5),{progress:function(t,e){for(var _,d=t.count,h=new vy(2*d),y=new vy(2*d),p=new vy(d),m=[],k=[],g=0,f=0;null!=(_=t.next());)k[c]=e.get(a,_),k[1-c]=e.get(s,_),m=n.dataToPoint(k,null,m),y[g]=r?o.x+o.width:m[0],h[g++]=m[0],y[g]=r?m[1]:o.y+o.height,h[g++]=m[1],p[f++]=_;e.setLayout({largePoints:h,largeDataIndices:p,largeBackgroundPoints:y,barWidth:u,valueAxisStart:My(l,i),backgroundStart:r?o.x:o.y,valueAxisHorizontal:r})}}}}};function wy(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function Ay(t){return t.pipelineContext&&t.pipelineContext.large}function My(t,e){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var Sy=fy.prototype,Py=Math.ceil,xy=Math.floor,Dy=36e5,Ly=864e5,Uy=fy.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return lc(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=Ly,e[1]+=Ly),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-Ly}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(e[0]=Nr(xy(e[0]/o)*o)),t.fixMax||(e[1]=Nr(Py(e[1]/o)*o))},niceTicks:function(t,e,n){t=t||10;var o=this._extent,l=o[1]-o[0],i=l/t;null!=e&&i<e&&(i=e),null!=n&&n<i&&(i=n);var a=Fy.length,s=function(t,e,n,o){for(;n<o;){var l=n+o>>>1;t[l][1]<e?n=1+l:o=l}return n}(Fy,i,0,a),r=Fy[Math.min(s,a-1)],c=r[1];"year"===r[0]&&(c*=Gr(l/c/t,!0));var u=this.getSetting("useUTC")?0:60*new Date(+o[0]||+o[1]).getTimezoneOffset()*1e3,_=[Math.round(Py((o[0]-u)/c)*c+u),Math.round(xy((o[1]-u)/c)*c+u)];ky(_,o),this._stepLvl=r,this._interval=c,this._niceExtent=_},parse:function(t){return+Fr(t)}});O(["contain","normalize"],function(t){Uy.prototype[t]=function(e){return Sy[t].call(this,this.parse(e))}});var Fy=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",Dy],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",6*Dy],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",Ly],["MM-dd\nyyyy",2*Ly],["MM-dd\nyyyy",3*Ly],["MM-dd\nyyyy",4*Ly],["MM-dd\nyyyy",5*Ly],["MM-dd\nyyyy",6*Ly],["week",7*Ly],["MM-dd\nyyyy",864e6],["week",14*Ly],["week",21*Ly],["month",31*Ly],["week",42*Ly],["month",62*Ly],["week",70*Ly],["quarter",95*Ly],["month",31*Ly*4],["month",13392e6],["half-year",16416e6],["month",31*Ly*8],["month",26784e6],["year",380*Ly]];Uy.create=function(t){return new Uy({useUTC:t.ecModel.get("useUTC")})};var Hy=sy.prototype,Vy=fy.prototype,Gy=Mr,jy=Nr,Wy=Math.floor,Ky=Math.ceil,Yy=Math.pow,Xy=Math.log,$y=sy.extend({type:"log",base:10,$constructor:function(){sy.apply(this,arguments),this._originalScale=new fy},getTicks:function(t){var e=this._originalScale,n=this._extent,o=e.getExtent();return C(Vy.getTicks.call(this,t),function(t){var l=Nr(Yy(this.base,t));return l=t===n[0]&&e.__fixMin?zy(l,o[0]):l,t===n[1]&&e.__fixMax?zy(l,o[1]):l},this)},getMinorTicks:Vy.getMinorTicks,getLabel:Vy.getLabel,scale:function(t){return t=Hy.scale.call(this,t),Yy(this.base,t)},setExtent:function(t,e){var n=this.base;t=Xy(t)/Xy(n),e=Xy(e)/Xy(n),Vy.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=Hy.getExtent.call(this);e[0]=Yy(t,e[0]),e[1]=Yy(t,e[1]);var n=this._originalScale,o=n.getExtent();return n.__fixMin&&(e[0]=zy(e[0],o[0])),n.__fixMax&&(e[1]=zy(e[1],o[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Xy(t[0])/Xy(e),t[1]=Xy(t[1])/Xy(e),Hy.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n==1/0||n<=0)){var o=Hr(n);for(t/n*o<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&0<Math.abs(o);)o*=10;var l=[Nr(Ky(e[0]/o)*o),Nr(Wy(e[1]/o)*o)];this._interval=o,this._niceExtent=l}},niceExtent:function(t){Vy.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function zy(t,e){return jy(t,Gy(e))}function qy(t,e){var n,o,l,i=t.type,a=e.getMin(),s=e.getMax(),r=t.getExtent();"ordinal"===i?n=e.getCategories().length:(P(o=e.get("boundaryGap"))||(o=[o||0,o||0]),"boolean"==typeof o[0]&&(o=[0,0]),o[0]=Cr(o[0],1),o[1]=Cr(o[1],1),l=r[1]-r[0]||Math.abs(r[0])),"dataMin"===a?a=r[0]:"function"==typeof a&&(a=a({min:r[0],max:r[1]})),"dataMax"===s?s=r[1]:"function"==typeof s&&(s=s({min:r[0],max:r[1]}));var c=null!=a,u=null!=s;null==a&&(a="ordinal"===i?n?0:NaN:r[0]-o[0]*l),null==s&&(s="ordinal"===i?n?n-1:NaN:r[1]+o[1]*l),null!=a&&isFinite(a)||(a=NaN),null!=s&&isFinite(s)||(s=NaN),t.setBlank(V(a)||V(s)||"ordinal"===i&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(0<a&&0<s&&!c&&(a=0),a<0&&s<0&&!u&&(s=0));var _=e.ecModel;if(_&&"time"===i){var d,h=By("bar",_);if(O(h,function(t){d|=t.getBaseAxis()===e.axis}),d){var y=Iy(h),p=function(t,e,n,o){var l=n.axis.getExtent(),i=l[1]-l[0],a=Oy(o,n.axis);if(void 0===a)return{min:t,max:e};var s=1/0;O(a,function(t){s=Math.min(t.offset,s)});var r=-1/0;O(a,function(t){r=Math.max(t.offset+t.width,r)}),s=Math.abs(s),r=Math.abs(r);var c=s+r,u=e-t,_=u/(1-(s+r)/i)-u;return{min:t-=s/c*_,max:e+=r/c*_}}(a,s,e,y);a=p.min,s=p.max}}return{extent:[a,s],fixMin:c,fixMax:u}}function Jy(t,e){var n=qy(t,e),o=n.extent,l=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var i=t.type;t.setExtent(o[0],o[1]),t.niceExtent({splitNumber:l,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===i||"time"===i?e.get("minInterval"):null,maxInterval:"interval"===i||"time"===i?e.get("maxInterval"):null});var a=e.get("interval");null!=a&&t.setInterval&&t.setInterval(a)}function Zy(t,e){if(e=e||t.get("type"))switch(e){case"category":return new hy(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new fy;default:return(sy.getClass(e)||fy).create(t)}}function Qy(t){var e,n=t.getLabelModel().get("formatter"),o="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof n?(e=n,n=function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}):"function"==typeof n?function(e,l){return null!=o&&(l=e-o),n(tp(t,e),l)}:function(e){return t.scale.getLabel(e)}}function tp(t,e){return"category"===t.type?t.scale.getLabel(e):e}function ep(t){var e=t.get("interval");return null==e?"auto":e}function np(t){return"category"===t.type&&0===ep(t.getLabelModel())}O(["contain","normalize"],function(t){$y.prototype[t]=function(e){return e=Xy(e)/Xy(this.base),Hy[t].call(this,e)}}),$y.create=function(){return new $y};var op={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!V(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!V(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:et,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},lp=vs({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,o=e.cy,l=e.width/2,i=e.height/2;t.moveTo(n,o-i),t.lineTo(n+l,o+i),t.lineTo(n-l,o+i),t.closePath()}}),ip=vs({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,o=e.cy,l=e.width/2,i=e.height/2;t.moveTo(n,o-i),t.lineTo(n+l,o),t.lineTo(n,o+i),t.lineTo(n-l,o),t.closePath()}}),ap=vs({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,o=e.y,l=e.width/5*3,i=Math.max(l,e.height),a=l/2,s=a*a/(i-a),r=o-i+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,_=Math.sin(c),d=Math.cos(c),h=.6*a,y=.7*a;t.moveTo(n-u,r+s),t.arc(n,r,a,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+u-_*h,r+s+d*h,n,o-y,n,o),t.bezierCurveTo(n,o-y,n-u+_*h,r+s+d*h,n-u,r+s),t.closePath()}}),sp=vs({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,o=e.width,l=e.x,i=e.y,a=o/3*2;t.moveTo(l,i),t.lineTo(l+a,i+n),t.lineTo(l,i+n/4*3),t.lineTo(l-a,i+n),t.lineTo(l,i),t.closePath()}}),rp={line:function(t,e,n,o,l){l.x1=t,l.y1=e+o/2,l.x2=t+n,l.y2=e+o/2},rect:function(t,e,n,o,l){l.x=t,l.y=e,l.width=n,l.height=o},roundRect:function(t,e,n,o,l){l.x=t,l.y=e,l.width=n,l.height=o,l.r=Math.min(n,o)/4},square:function(t,e,n,o,l){var i=Math.min(n,o);l.x=t,l.y=e,l.width=i,l.height=i},circle:function(t,e,n,o,l){l.cx=t+n/2,l.cy=e+o/2,l.r=Math.min(n,o)/2},diamond:function(t,e,n,o,l){l.cx=t+n/2,l.cy=e+o/2,l.width=n,l.height=o},pin:function(t,e,n,o,l){l.x=t+n/2,l.y=e+o/2,l.width=n,l.height=o},arrow:function(t,e,n,o,l){l.x=t+n/2,l.y=e+o/2,l.width=n,l.height=o},triangle:function(t,e,n,o,l){l.cx=t+n/2,l.cy=e+o/2,l.width=n,l.height=o}},cp={};O({line:es,rect:Qa,roundRect:Qa,square:Qa,circle:Ha,diamond:ip,pin:ap,arrow:sp,triangle:lp},function(t,e){cp[e]=new t});var up=vs({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var o=mo(t,e,n),l=this.shape;return l&&"pin"===l.symbolType&&"inside"===e.textPosition&&(o.y=n.y+.4*n.height),o},buildPath:function(t,e,n){var o=e.symbolType;if("none"!==o){var l=cp[o];l=l||cp[o="rect"],rp[o](e.x,e.y,e.width,e.height,l.shape),l.buildPath(t,l.shape,n)}}});function _p(t,e){if("image"!==this.type){var n=this.style,o=this.shape;o&&"line"===o.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function dp(t,e,n,o,l,i,a){var s,r=0===t.indexOf("empty");return r&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?Is(t.slice(8),new Cn(e,n,o,l),a?"center":"cover"):0===t.indexOf("path://")?Bs(t.slice(7),{},new Cn(e,n,o,l),a?"center":"cover"):new up({shape:{symbolType:t,x:e,y:n,width:o,height:l}})).__isEmptyBrush=r,s.setColor=_p,s.setColor(i),s}var hp={isDimensionStacked:ly,enableDataStack:oy,getStackedDimension:iy},yp=(Object.freeze||Object)({createList:function(t){return ay(t.getSource(),t)},getLayoutRect:yc,dataStack:hp,createScale:function(t,e){var n=e;vr.isInstance(e)||I(n=new vr(e),op);var o=Zy(n);return o.setExtent(t[0],t[1]),Jy(o,n),o},mixinAxisModelCommonMethods:function(t){I(t,op)},completeDimensions:Jh,createDimensions:Qh,createSymbol:dp});function pp(t,e){return Math.abs(t-e)<1e-8}function mp(t,e,n){var o=0,l=t[0];if(!l)return!1;for(var i=1;i<t.length;i++){var a=t[i];o+=ca(l[0],l[1],a[0],a[1],e,n),l=a}var s=t[0];return pp(l[0],s[0])&&pp(l[1],s[1])||(o+=ca(l[0],l[1],s[0],s[1],e,n)),0!==o}function kp(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var o=this.getBoundingRect();n=[o.x+o.width/2,o.y+o.height/2]}this.center=n}function gp(t,e,n){for(var o=[],l=e[0],i=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,r=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),r=r>>1^-(1&r),l=s+=l,i=r+=i,o.push([s/n,r/n])}return o}function fp(t,e){return function(t){if(t.UTF8Encoding){var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,o=0;o<n.length;o++)for(var l=n[o].geometry,i=l.coordinates,a=l.encodeOffsets,s=0;s<i.length;s++){var r=i[s];if("Polygon"===l.type)i[s]=gp(r,a[s],e);else if("MultiPolygon"===l.type)for(var c=0;c<r.length;c++){var u=r[c];r[c]=gp(u,a[s][c],e)}}t.UTF8Encoding=!1}}(t),C(w(t.features,function(t){return t.geometry&&t.properties&&0<t.geometry.coordinates.length}),function(t){var n=t.properties,o=t.geometry,l=o.coordinates,i=[];"Polygon"===o.type&&i.push({type:"polygon",exterior:l[0],interiors:l.slice(1)}),"MultiPolygon"===o.type&&O(l,function(t){t[0]&&i.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var a=new kp(n[e||"name"],i,n.cp);return a.properties=n,a})}kp.prototype={constructor:kp,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],o=[-e,-e],l=[],i=[],a=this.geometries,s=0;s<a.length;s++)"polygon"===a[s].type&&(Li(a[s].exterior,l,i),Et(n,n,l),Bt(o,o,i));return 0===s&&(n[0]=n[1]=o[0]=o[1]=0),this._rect=new Cn(n[0],n[1],o[0]-n[0],o[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var o=0,l=n.length;o<l;o++)if("polygon"===n[o].type){var i=n[o].exterior,a=n[o].interiors;if(mp(i,t[0],t[1])){for(var s=0;s<(a?a.length:0);s++)if(mp(a[s]))continue t;return!0}}return!1},transformTo:function(t,e,n,o){var l=this.getBoundingRect(),i=l.width/l.height;n?o=o||n/i:n=i*o;for(var a=new Cn(t,e,n,o),s=l.calculateTransform(a),r=this.geometries,c=0;c<r.length;c++)if("polygon"===r[c].type){for(var u=r[c].exterior,_=r[c].interiors,d=0;d<u.length;d++)Tt(u[d],u[d],s);for(var h=0;h<(_?_.length:0);h++)for(d=0;d<_[h].length;d++)Tt(_[h][d],_[h][d],s)}(l=this._rect).copy(a),this.center=[l.x+l.width/2,l.y+l.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new kp(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var bp=Wl();function vp(t,e){var n,o=Tp(t,"labels"),l=ep(e);return Ep(o,l)||Bp(o,l,{labels:x(l)?Rp(t,l):Ip(t,n="auto"===l?function(t){var e=bp(t).autoInterval;return null!=e?e:bp(t).autoInterval=t.calculateCategoryInterval()}(t):l),labelCategoryInterval:n})}function Tp(t,e){return bp(t)[e]||(bp(t)[e]=[])}function Ep(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Bp(t,e,n){return t.push({key:e,value:n}),n}function Ip(t,e,n){var o=Qy(t),l=t.scale,i=l.getExtent(),a=t.getLabelModel(),s=[],r=Math.max((e||0)+1,1),c=i[0],u=l.count();0!==c&&1<r&&2<u/r&&(c=Math.round(Math.ceil(c/r)*r));var _=np(t),d=a.get("showMinLabel")||_,h=a.get("showMaxLabel")||_;d&&c!==i[0]&&p(i[0]);for(var y=c;y<=i[1];y+=r)p(y);function p(t){s.push(n?t:{formattedLabel:o(t),rawLabel:l.getLabel(t),tickValue:t})}return h&&y-r!==i[1]&&p(i[1]),s}function Rp(t,e,n){var o=t.scale,l=Qy(t),i=[];return O(o.getTicks(),function(t){var a=o.getLabel(t);e(t,a)&&i.push(n?t:{formattedLabel:l(t),rawLabel:a,tickValue:t})}),i}var Op=[0,1],Cp=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function Np(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}Cp.prototype={constructor:Cp,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),o=Math.max(e[0],e[1]);return n<=t&&t<=o},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return Sr(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,o=this.scale;return t=o.normalize(t),this.onBand&&"ordinal"===o.type&&Np(n=n.slice(),o.count()),Or(t,Op,n,e)},coordToData:function(t,e){var n=this._extent,o=this.scale;this.onBand&&"ordinal"===o.type&&Np(n=n.slice(),o.count());var l=Or(t,n,Op,e);return this.scale.scale(l)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=C(function(t,e){return"category"===t.type?function(t,e){var n,o,l=Tp(t,"ticks"),i=ep(e),a=Ep(l,i);if(a)return a;if(e.get("show")&&!t.scale.isBlank()||(n=[]),x(i))n=Rp(t,i,!0);else if("auto"===i){var s=vp(t,t.getLabelModel());o=s.labelCategoryInterval,n=C(s.labels,function(t){return t.tickValue})}else n=Ip(t,o=i,!0);return Bp(l,i,{ticks:n,tickCategoryInterval:o})}(t,e):{ticks:t.scale.getTicks()}}(this,e).ticks,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);return function(t,e,n,o){var l=e.length;if(t.onBand&&!n&&l){var i,a,s=t.getExtent();if(1===l)e[0].coord=s[0],i=e[1]={coord:s[0]};else{var r=e[l-1].tickValue-e[0].tickValue,c=(e[l-1].coord-e[0].coord)/r;O(e,function(t){t.coord-=c/2}),a=1+t.scale.getExtent()[1]-e[l-1].tickValue,i={coord:e[l-1].coord+c*a},e.push(i)}var u=s[0]>s[1];_(e[0].coord,s[0])&&(o?e[0].coord=s[0]:e.shift()),o&&_(s[0],e[0].coord)&&e.unshift({coord:s[0]}),_(s[1],i.coord)&&(o?i.coord=s[1]:e.pop()),o&&_(i.coord,s[1])&&e.push({coord:s[1]})}function _(t,e){return t=Nr(t),e=Nr(e),u?e<t:t<e}}(this,n,e.get("alignWithLabel"),t.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return 0<t&&t<100||(t=5),C(this.scale.getMinorTicks(t),function(t){return C(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this)},getViewLabels:function(){return function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),n=vp(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Qy(t);return{labels:C(e,function(e,o){return{formattedLabel:n(e,o),rawLabel:t.scale.getLabel(e),tickValue:e}})}}(t)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var o=Math.abs(t[1]-t[0]);return Math.abs(o)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Qy(t),o=(e.axisRotate-e.labelRotate)/180*Math.PI,l=t.scale,i=l.getExtent(),a=l.count();if(i[1]-i[0]<1)return 0;var s=1;40<a&&(s=Math.max(1,Math.floor(a/40)));for(var r=i[0],c=t.dataToCoord(r+1)-t.dataToCoord(r),u=Math.abs(c*Math.cos(o)),_=Math.abs(c*Math.sin(o)),d=0,h=0;r<=i[1];r+=s){var y,p,m=ho(n(r),e.font,"center","top");y=1.3*m.width,p=1.3*m.height,d=Math.max(d,y,7),h=Math.max(h,p,7)}var k=d/u,g=h/_;isNaN(k)&&(k=1/0),isNaN(g)&&(g=1/0);var f=Math.max(0,Math.floor(Math.min(k,g))),b=bp(t.model),v=t.getExtent(),T=b.lastAutoInterval,E=b.lastTickCount;return null!=T&&null!=E&&Math.abs(T-f)<=1&&Math.abs(E-a)<=1&&f<T&&b.axisExtend0===v[0]&&b.axisExtend1===v[1]?f=T:(b.lastTickCount=a,b.lastAutoInterval=f,b.axisExtend0=v[0],b.axisExtend1=v[1]),f}(this)}};var wp=fp,Ap={};O(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){Ap[t]=nt[t]});var Mp={};function Sp(t,e){var n=t.mapDimension("defaultedLabel",!0),o=n.length;if(1===o)return Du(t,e,n[0]);if(o){for(var l=[],i=0;i<n.length;i++){var a=Du(t,e,n[i]);l.push(a)}return l.join(" ")}}function Pp(t,e,n){Nn.call(this),this.updateData(t,e,n)}O(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){Mp[t]=yr[t]}),t_.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return ay(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var xp=Pp.prototype,Dp=Pp.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function Lp(t){return[t[0]/2,t[1]/2]}function Up(t,e){this.parent.drift(t,e)}xp._createSymbol=function(t,e,n,o,l){this.removeAll();var i=dp(t,-1,-1,2,2,e.getItemVisual(n,"color"),l);i.attr({z2:100,culling:!0,scale:Lp(o)}),i.drift=Up,this._symbolType=t,this.add(i)},xp.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},xp.getSymbolPath=function(){return this.childAt(0)},xp.getScale=function(){return this.childAt(0).scale},xp.highlight=function(){this.childAt(0).trigger("emphasis")},xp.downplay=function(){this.childAt(0).trigger("normal")},xp.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},xp.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},xp.updateData=function(t,e,n){this.silent=!1;var o=t.getItemVisual(e,"symbol")||"circle",l=t.hostModel,i=Dp(t,e),a=o!==this._symbolType;if(a){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(o,t,e,i,s)}else(r=this.childAt(0)).silent=!1,or(r,{scale:Lp(i)},l,e);if(this._updateCommon(t,e,i,n),a){var r=this.childAt(0),c=n&&n.fadeIn,u={scale:r.scale.slice()};c&&(u.style={opacity:r.style.opacity}),r.scale=[0,0],c&&(r.style.opacity=0),lr(r,u,l,e)}this._seriesModel=l};var Fp=["itemStyle"],Hp=["emphasis","itemStyle"],Vp=["label"],Gp=["emphasis","label"];function jp(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,o=n[1]/n[0],l={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*o)]};this.animateTo(l,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Wp(t){this.group=new Nn,this._symbolCtor=t||Pp}xp._updateCommon=function(t,e,n,o){var l=this.childAt(0),i=t.hostModel,a=t.getItemVisual(e,"color");"image"!==l.type?l.useStyle({strokeNoScale:!0}):l.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=o&&o.itemStyle,r=o&&o.hoverItemStyle,c=o&&o.symbolOffset,u=o&&o.labelModel,_=o&&o.hoverLabelModel,d=o&&o.hoverAnimation,h=o&&o.cursorStyle;if(!o||t.hasItemOption){var y=o&&o.itemModel?o.itemModel:t.getItemModel(e);s=y.getModel(Fp).getItemStyle(["color"]),r=y.getModel(Hp).getItemStyle(),c=y.getShallow("symbolOffset"),u=y.getModel(Vp),_=y.getModel(Gp),d=y.getShallow("hoverAnimation"),h=y.getShallow("cursor")}else r=f({},r);var p=l.style,m=t.getItemVisual(e,"symbolRotate");l.attr("rotation",(m||0)*Math.PI/180||0),c&&l.attr("position",[Cr(c[0],n[0]),Cr(c[1],n[1])]),h&&l.attr("cursor",h),l.setColor(a,o&&o.symbolInnerColor),l.setStyle(s);var k=t.getItemVisual(e,"opacity");null!=k&&(p.opacity=k);var g=t.getItemVisual(e,"liftZ"),b=l.__z2Origin;null!=g?null==b&&(l.__z2Origin=l.z2,l.z2+=g):null!=b&&(l.z2=b,l.__z2Origin=null);var v=o&&o.useNameLabel;Xs(p,r,u,_,{labelFetcher:i,labelDataIndex:e,defaultText:function(e,n){return v?t.getName(e):Sp(t,e)},isRectText:!0,autoColor:a}),l.__symbolOriginalScale=Lp(n),l.hoverStyle=r,l.highDownOnUpdate=d&&i.isAnimationEnabled()?jp:null,js(l)},xp.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,e&&e.keepLabel||(n.style.text=null),or(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},B(Pp,Nn);var Kp=Wp.prototype;function Yp(t,e,n,o){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(o.isIgnore&&o.isIgnore(n))&&!(o.clipShape&&!o.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Xp(t){return null==t||L(t)||(t={isIgnore:t}),t||{}}function $p(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function zp(t,e,n){var o,l=t.getBaseAxis(),i=t.getOtherAxis(l),a=function(t,e){var n=0,o=t.scale.getExtent();return"start"===e?n=o[0]:"end"===e?n=o[1]:0<o[0]?n=o[0]:o[1]<0&&(n=o[1]),n}(i,n),s=l.dim,r=i.dim,c=e.mapDimension(r),u=e.mapDimension(s),_="x"===r||"radius"===r?1:0,d=C(t.dimensions,function(t){return e.mapDimension(t)}),h=e.getCalculationInfo("stackResultDimension");return(o|=ly(e,d[0]))&&(d[0]=h),(o|=ly(e,d[1]))&&(d[1]=h),{dataDimsForPoint:d,valueStart:a,valueAxisDim:r,baseAxisDim:s,stacked:!!o,valueDim:c,baseDim:u,baseDataOffset:_,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function qp(t,e,n,o){var l=NaN;t.stacked&&(l=n.get(n.getCalculationInfo("stackedOverDimension"),o)),isNaN(l)&&(l=t.valueStart);var i=t.baseDataOffset,a=[];return a[i]=n.get(t.baseDim,o),a[1-i]=l,e.dataToPoint(a)}Kp.updateData=function(t,e){e=Xp(e);var n=this.group,o=t.hostModel,l=this._data,i=this._symbolCtor,a=$p(t);l||n.removeAll(),t.diff(l).add(function(o){var l=t.getItemLayout(o);if(Yp(t,l,o,e)){var s=new i(t,o,a);s.attr("position",l),t.setItemGraphicEl(o,s),n.add(s)}}).update(function(s,r){var c=l.getItemGraphicEl(r),u=t.getItemLayout(s);Yp(t,u,s,e)?(c?(c.updateData(t,s,a),or(c,{position:u},o)):(c=new i(t,s)).attr("position",u),n.add(c),t.setItemGraphicEl(s,c)):n.remove(c)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._data=t},Kp.isPersistent=function(){return!0},Kp.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var o=t.getItemLayout(n);e.attr("position",o)})},Kp.incrementalPrepareUpdate=function(t){this._seriesScope=$p(t),this._data=null,this.group.removeAll()},Kp.incrementalUpdate=function(t,e,n){function o(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=Xp(n);for(var l=t.start;l<t.end;l++){var i=e.getItemLayout(l);if(Yp(e,i,l,n)){var a=new this._symbolCtor(e,l,this._seriesScope);a.traverse(o),a.attr("position",i),this.group.add(a),e.setItemGraphicEl(l,a)}}},Kp.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var Jp=Et,Zp=Bt,Qp=ct,tm=it,em=[],nm=[],om=[];function lm(t){return isNaN(t[0])||isNaN(t[1])}function im(t,e,n,o,l,i,a,s,r,c){return"none"!==c&&c?function(t,e,n,o,l,i,a,s,r,c,u){for(var _=0,d=n,h=0;h<o;h++){var y=e[d];if(l<=d||d<0)break;if(lm(y)){if(u){d+=i;continue}break}if(d===n)t[0<i?"moveTo":"lineTo"](y[0],y[1]);else if(0<r){var p=e[_],m="y"===c?1:0,k=(y[m]-p[m])*r;tm(nm,p),nm[m]=p[m]+k,tm(om,y),om[m]=y[m]-k,t.bezierCurveTo(nm[0],nm[1],om[0],om[1],y[0],y[1])}else t.lineTo(y[0],y[1]);_=d,d+=i}return h}.apply(this,arguments):function(t,e,n,o,l,i,a,s,r,c,u){for(var _=0,d=n,h=0;h<o;h++){var y=e[d];if(l<=d||d<0)break;if(lm(y)){if(u){d+=i;continue}break}if(d===n)t[0<i?"moveTo":"lineTo"](y[0],y[1]),tm(nm,y);else if(0<r){var p=d+i,m=e[p];if(u)for(;m&&lm(e[p]);)m=e[p+=i];var k=.5,g=e[_];if(!(m=e[p])||lm(m))tm(om,y);else{var f,b;if(lm(m)&&!u&&(m=y),ut(em,m,g),"x"===c||"y"===c){var v="x"===c?0:1;f=Math.abs(y[v]-g[v]),b=Math.abs(y[v]-m[v])}else f=gt(y,g),b=gt(y,m);Qp(om,y,em,-r*(1-(k=b/(b+f))))}Jp(nm,nm,s),Zp(nm,nm,a),Jp(om,om,s),Zp(om,om,a),t.bezierCurveTo(nm[0],nm[1],om[0],om[1],y[0],y[1]),Qp(nm,y,em,r*k)}else t.lineTo(y[0],y[1]);_=d,d+=i}return h}.apply(this,arguments)}function am(t,e){var n=[1/0,1/0],o=[-1/0,-1/0];if(e)for(var l=0;l<t.length;l++){var i=t[l];i[0]<n[0]&&(n[0]=i[0]),i[1]<n[1]&&(n[1]=i[1]),i[0]>o[0]&&(o[0]=i[0]),i[1]>o[1]&&(o[1]=i[1])}return{min:e?n:o,max:e?o:n}}var sm=va.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Fa(va.prototype.brush),buildPath:function(t,e){var n=e.points,o=0,l=n.length,i=am(n,e.smoothConstraint);if(e.connectNulls){for(;0<l&&lm(n[l-1]);l--);for(;o<l&&lm(n[o]);o++);}for(;o<l;)o+=im(t,n,o,l,l,1,i.min,i.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),rm=va.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Fa(va.prototype.brush),buildPath:function(t,e){var n=e.points,o=e.stackedOnPoints,l=0,i=n.length,a=e.smoothMonotone,s=am(n,e.smoothConstraint),r=am(o,e.smoothConstraint);if(e.connectNulls){for(;0<i&&lm(n[i-1]);i--);for(;l<i&&lm(n[l]);l++);}for(;l<i;){var c=im(t,n,l,i,i,1,s.min,s.max,e.smooth,a,e.connectNulls);im(t,o,l+c-1,c,i,-1,r.min,r.max,e.stackedOnSmooth,a,e.connectNulls),l+=c+1,t.closePath()}}});function cm(t,e,n){var o=t.getArea(),l=t.getBaseAxis().isHorizontal(),i=o.x,a=o.y,s=o.width,r=o.height,c=n.get("lineStyle.width")||2;i-=c/2,a-=c/2,s+=c,r+=c,i=Math.floor(i),s=Math.round(s);var u=new Qa({shape:{x:i,y:a,width:s,height:r}});return e&&(u.shape[l?"width":"height"]=0,lr(u,{shape:{width:s,height:r}},n)),u}function um(t,e,n){var o=t.getArea(),l=new Ga({shape:{cx:Nr(t.cx,1),cy:Nr(t.cy,1),r0:Nr(o.r0,1),r:Nr(o.r,1),startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});return e&&(l.shape.endAngle=o.startAngle,lr(l,{shape:{endAngle:o.endAngle}},n)),l}function _m(t,e,n){return t?"polar"===t.type?um(t,e,n):"cartesian2d"===t.type?cm(t,e,n):null:null}function dm(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var o=t[n],l=e[n];if(o[0]!==l[0]||o[1]!==l[1])return}return!0}}function hm(t,e){var n=[],o=[],l=[],i=[];return Li(t,n,o),Li(e,l,i),Math.max(Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]),Math.abs(o[0]-i[0]),Math.abs(o[1]-i[1]))}function ym(t){return"number"==typeof t?t:t?.5:0}function pm(t,e,n){for(var o=e.getBaseAxis(),l="x"===o.dim||"radius"===o.dim?0:1,i=[],a=0;a<t.length-1;a++){var s=t[a+1],r=t[a];i.push(r);var c=[];switch(n){case"end":c[l]=s[l],c[1-l]=r[1-l],i.push(c);break;case"middle":var u=(r[l]+s[l])/2,_=[];c[l]=_[l]=u,c[1-l]=r[1-l],_[1-l]=s[1-l],i.push(c),i.push(_);break;default:c[l]=r[l],c[1-l]=s[1-l],i.push(c)}}return t[a]&&i.push(t[a]),i}function mm(t,e,n){if("cartesian2d"!==t.type)return um(t,e,n);var o=t.getBaseAxis().isHorizontal(),l=cm(t,e,n);if(!n.get("clip",!0)){var i=l.shape,a=Math.max(i.width,i.height);o?(i.y-=a,i.height+=2*a):(i.x-=a,i.width+=2*a)}return l}function km(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,o,l){var i=t.getData(),a=t.get("symbol"),s=t.get("symbolSize"),r=t.get("symbolKeepAspect"),c=t.get("symbolRotate"),u=x(a),_=x(s),d=x(c),h=u||_||d,y=!u&&a?a:e,p=_?null:s;if(i.setVisual({legendSymbol:n||y,symbol:y,symbolSize:p,symbolKeepAspect:r,symbolRotate:c}),!o.isSeriesFiltered(t))return{dataEach:i.hasItemOption||h?function(e,n){if(h){var o=t.getRawValue(n),l=t.getDataParams(n);u&&e.setItemVisual(n,"symbol",a(o,l)),_&&e.setItemVisual(n,"symbolSize",s(o,l)),d&&e.setItemVisual(n,"symbolRotate",c(o,l))}if(e.hasItemOption){var i=e.getItemModel(n),r=i.getShallow("symbol",!0),y=i.getShallow("symbolSize",!0),p=i.getShallow("symbolRotate",!0),m=i.getShallow("symbolKeepAspect",!0);null!=r&&e.setItemVisual(n,"symbol",r),null!=y&&e.setItemVisual(n,"symbolSize",y),null!=p&&e.setItemVisual(n,"symbolRotate",p),null!=m&&e.setItemVisual(n,"symbolKeepAspect",m)}}:null}}}}function gm(t){return{seriesType:t,plan:u_(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,o=t.pipelineContext.large;if(n){var l=C(n.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),i=l.length,a=e.getCalculationInfo("stackResultDimension");return ly(e,l[0])&&(l[0]=a),ly(e,l[1])&&(l[1]=a),i&&{progress:function(t,e){for(var a=t.end-t.start,s=o&&new Float32Array(a*i),r=t.start,c=0,u=[],_=[];r<t.end;r++){var d;if(1===i){var h=e.get(l[0],r);d=!isNaN(h)&&n.dataToPoint(h,null,_)}else{h=u[0]=e.get(l[0],r);var y=u[1]=e.get(l[1],r);d=!isNaN(h)&&!isNaN(y)&&n.dataToPoint(u,null,_)}o?(s[c++]=d?d[0]:NaN,s[c++]=d?d[1]:NaN):e.setItemLayout(r,d&&d.slice()||[NaN,NaN])}o&&e.setLayout("symbolPoints",s)}}}}}}function fm(t,e){return Math.round(t.length/2)}h_.extend({type:"line",init:function(){var t=new Nn,e=new Wp;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var o=t.coordinateSystem,l=this.group,i=t.getData(),a=t.getModel("lineStyle"),s=t.getModel("areaStyle"),r=i.mapArray(i.getItemLayout),c="polar"===o.type,u=this._coordSys,_=this._symbolDraw,d=this._polyline,h=this._polygon,y=this._lineGroup,p=t.get("animation"),m=!s.isEmpty(),k=s.get("origin"),g=function(t,e,n){if(!n.valueDim)return[];for(var o=[],l=0,i=e.count();l<i;l++)o.push(qp(n,t,e,l));return o}(o,i,zp(o,i,k)),f=t.get("showSymbol"),v=f&&!c&&function(t,e,n){var o=t.get("showAllSymbol"),l="auto"===o;if(!o||l){var i=n.getAxesByScale("ordinal")[0];if(i&&(!l||!function(t,e){var n=t.getExtent(),o=Math.abs(n[1]-n[0])/t.scale.count();isNaN(o)&&(o=0);for(var l=e.count(),i=Math.max(1,Math.round(l/5)),a=0;a<l;a+=i)if(1.5*Pp.getSymbolSize(e,a)[t.isHorizontal()?1:0]>o)return!1;return!0}(i,e))){var a=e.mapDimension(i.dim),s={};return O(i.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}(t,i,o),T=this._data;T&&T.eachItemGraphicEl(function(t,e){t.__temp&&(l.remove(t),T.setItemGraphicEl(e,null))}),f||_.remove(),l.add(y);var E,B=!c&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(null!=(E=o.getArea()).width?(E.x-=.1,E.y-=.1,E.width+=.2,E.height+=.2):E.r0&&(E.r0-=.5,E.r1+=.5)),this._clipShapeForSymbol=E,d&&u.type===o.type&&B===this._step?(m&&!h?h=this._newPolygon(r,g,o,p):h&&!m&&(y.remove(h),h=this._polygon=null),y.setClipPath(mm(o,!1,t)),f&&_.updateData(i,{isIgnore:v,clipShape:E}),i.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),dm(this._stackedOnPoints,g)&&dm(this._points,r)||(p?this._updateAnimation(i,g,o,n,B,k):(B&&(r=pm(r,o,B),g=pm(g,o,B)),d.setShape({points:r}),h&&h.setShape({points:r,stackedOnPoints:g})))):(f&&_.updateData(i,{isIgnore:v,clipShape:E}),B&&(r=pm(r,o,B),g=pm(g,o,B)),d=this._newPolyline(r,o,p),m&&(h=this._newPolygon(r,g,o,p)),y.setClipPath(mm(o,!0,t)));var I=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var o,l,i=n.length-1;0<=i;i--){var a=n[i].dimension,s=t.dimensions[a],r=t.getDimensionInfo(s);if("x"===(o=r&&r.coordDim)||"y"===o){l=n[i];break}}if(l){var c=e.getAxis(o),u=C(l.stops,function(t){return{coord:c.toGlobalCoord(c.dataToCoord(t.value)),color:t.color}}),_=u.length,d=l.outerColors.slice();_&&u[0].coord>u[_-1].coord&&(u.reverse(),d.reverse());var h=u[0].coord-10,y=u[_-1].coord+10,p=y-h;if(p<.001)return"transparent";O(u,function(t){t.offset=(t.coord-h)/p}),u.push({offset:_?u[_-1].offset:.5,color:d[1]||"transparent"}),u.unshift({offset:_?u[0].offset:.5,color:d[0]||"transparent"});var m=new rs(0,0,0,0,u,!0);return m[o]=h,m[o+"2"]=y,m}}}(i,o)||i.getVisual("color");d.useStyle(b(a.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"}));var R=t.get("smooth");if(R=ym(t.get("smooth")),d.setShape({smooth:R,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),h){var N=i.getCalculationInfo("stackedOnSeries"),w=0;h.useStyle(b(s.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel"})),N&&(w=ym(N.get("smooth"))),h.setShape({smooth:R,stackedOnSmooth:w,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=i,this._coordSys=o,this._stackedOnPoints=g,this._points=r,this._step=B,this._valueOrigin=k},dispose:function(){},highlight:function(t,e,n,o){var l=t.getData(),i=jl(l,o);if(!(i instanceof Array)&&null!=i&&0<=i){var a=l.getItemGraphicEl(i);if(!a){var s=l.getItemLayout(i);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(a=new Pp(l,i)).position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,l.setItemGraphicEl(i,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else h_.prototype.highlight.call(this,t,e,n,o)},downplay:function(t,e,n,o){var l=t.getData(),i=jl(l,o);if(null!=i&&0<=i){var a=l.getItemGraphicEl(i);a&&(a.__temp?(l.setItemGraphicEl(i,null),this.group.remove(a)):a.downplay())}else h_.prototype.downplay.call(this,t,e,n,o)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new sm({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new rm({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(t,e,n,o,l,i){var a=this._polyline,s=this._polygon,r=t.hostModel,c=function(t,e,n,o,l,i,a,s){for(var r=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),c=[],u=[],_=[],d=[],h=[],y=[],p=[],m=zp(l,e,a),k=zp(i,t,s),g=0;g<r.length;g++){var f=r[g],b=!0;switch(f.cmd){case"=":var v=t.getItemLayout(f.idx),T=e.getItemLayout(f.idx1);(isNaN(v[0])||isNaN(v[1]))&&(v=T.slice()),c.push(v),u.push(T),_.push(n[f.idx]),d.push(o[f.idx1]),p.push(e.getRawIndex(f.idx1));break;case"+":var E=f.idx;c.push(l.dataToPoint([e.get(m.dataDimsForPoint[0],E),e.get(m.dataDimsForPoint[1],E)])),u.push(e.getItemLayout(E).slice()),_.push(qp(m,l,e,E)),d.push(o[E]),p.push(e.getRawIndex(E));break;case"-":E=f.idx;var B=t.getRawIndex(E);B!==E?(c.push(t.getItemLayout(E)),u.push(i.dataToPoint([t.get(k.dataDimsForPoint[0],E),t.get(k.dataDimsForPoint[1],E)])),_.push(n[E]),d.push(qp(k,i,t,E)),p.push(B)):b=!1}b&&(h.push(f),y.push(y.length))}y.sort(function(t,e){return p[t]-p[e]});var I=[],R=[],O=[],C=[],N=[];for(g=0;g<y.length;g++)E=y[g],I[g]=c[E],R[g]=u[E],O[g]=_[E],C[g]=d[E],N[g]=h[E];return{current:I,next:R,stackedOnCurrent:O,stackedOnNext:C,status:N}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,i),u=c.current,_=c.stackedOnCurrent,d=c.next,h=c.stackedOnNext;if(l&&(u=pm(c.current,n,l),_=pm(c.stackedOnCurrent,n,l),d=pm(c.next,n,l),h=pm(c.stackedOnNext,n,l)),3e3<hm(u,d)||s&&3e3<hm(_,h))return a.setShape({points:d}),void(s&&s.setShape({points:d,stackedOnPoints:h}));a.shape.__points=c.current,a.shape.points=u,or(a,{shape:{points:d}},r),s&&(s.setShape({points:u,stackedOnPoints:_}),or(s,{shape:{points:d,stackedOnPoints:h}},r));for(var y=[],p=c.status,m=0;m<p.length;m++)if("="===p[m].cmd){var k=t.getItemGraphicEl(p[m].idx1);k&&y.push({el:k,ptIdx:m})}a.animators&&a.animators.length&&a.animators[0].during(function(){for(var t=0;t<y.length;t++)y[t].el.attr("position",a.shape.__points[y[t].ptIdx])})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,o){t.__temp&&(e.remove(t),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var bm={average:function(t){for(var e=0,n=0,o=0;o<t.length;o++)isNaN(t[o])||(e+=t[o],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};function vm(t){return this._axes[t]}function Tm(t){this._axes={},this._dimList=[],this.name=t||""}function Em(t){Tm.call(this,t)}function Bm(t,e,n,o,l){Cp.call(this,t,e,n),this.type=o||"value",this.position=l||"bottom"}Tm.prototype={constructor:Tm,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return C(this._dimList,vm,this)},getAxesByScale:function(t){return t=t.toLowerCase(),w(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,o=t instanceof Array?[]:{},l=0;l<n.length;l++){var i=n[l],a=this._axes[i];o[i]=a[e](t[i])}return o}},Em.prototype={constructor:Em,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var o=this.getAxis("x"),l=this.getAxis("y");return(n=n||[])[0]=o.toGlobalCoord(o.dataToCoord(t[0])),n[1]=l.toGlobalCoord(l.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,o=this.getAxis("y").scale,l=n.getExtent(),i=o.getExtent(),a=n.parse(t[0]),s=o.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(l[0],l[1]),a),Math.max(l[0],l[1])),e[1]=Math.min(Math.max(Math.min(i[0],i[1]),s),Math.max(i[0],i[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),o=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=o.coordToData(o.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),o=Math.min(e[0],e[1]);return new Cn(n,o,Math.max(t[0],t[1])-n,Math.max(e[0],e[1])-o)}},B(Em,Tm),Bm.prototype={constructor:Bm,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},B(Bm,Cp);var Im={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Rm={};function Om(t,e,n,o){O(Cm,function(l){e.extend({type:t+"Axis."+l,mergeDefaultAndTheme:function(e,o){var i=this.layoutMode,a=i?kc(e):{};k(e,o.getTheme().get(l+"Axis")),k(e,this.getDefaultOption()),e.type=n(t,e),i&&mc(e,a,i)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=ry.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:g([{},Rm[l+"Axis"],o],!0)})}),Ec.registerSubTypeDefaulter(t+"Axis",S(n,t))}Rm.categoryAxis=k({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Im),Rm.valueAxis=k({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},Im),Rm.timeAxis=b({scale:!0,min:"dataMin",max:"dataMax"},Rm.valueAxis),Rm.logAxis=b({scale:!0,logBase:10},Rm.valueAxis);var Cm=["value","category","time","log"],Nm=Ec.extend({type:"cartesian2dAxis",axis:null,init:function(){Nm.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Nm.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Nm.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function wm(t,e){return e.type||(e.data?"category":"value")}k(Nm.prototype,op);var Am={offset:0};function Mm(t,e){return t.getCoordSysModel()===e}function Sm(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}Om("x",Nm,wm,Am),Om("y",Nm,wm,Am),Ec.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Pm=Sm.prototype;function xm(t,e,n,o){n.getAxesOnZeroOf=function(){return l?[l]:[]};var l,i=t[e],a=n.model,s=a.get("axisLine.onZero"),r=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=r)Dm(i[r])&&(l=i[r]);else for(var c in i)if(i.hasOwnProperty(c)&&Dm(i[c])&&!o[u(i[c])]){l=i[c];break}l&&(o[u(l)]=!0)}function u(t){return t.dim+"_"+t.index}}function Dm(t){return t&&"category"!==t.type&&"time"!==t.type&&function(t){var e=t.scale.getExtent(),n=e[0],o=e[1];return!(0<n&&0<o||n<0&&o<0)}(t)}Pm.type="grid",Pm.axisPointerEnabled=!0,Pm.getRect=function(){return this._rect},Pm.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),O(n.x,function(t){Jy(t.scale,t.model)}),O(n.y,function(t){Jy(t.scale,t.model)});var o={};O(n.x,function(t){xm(n,"y",t,o)}),O(n.y,function(t){xm(n,"x",t,o)}),this.resize(this.model,e)},Pm.resize=function(t,e,n){var o=yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=o;var l=this._axesList;function i(){O(l,function(t){var e=t.isHorizontal(),n=e?[0,o.width]:[0,o.height],l=t.inverse?1:0;t.setExtent(n[l],n[1-l]),function(t,e){var n=t.getExtent(),o=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return o-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return o-t+e}}(t,e?o.x:o.y)})}i(),!n&&t.get("containLabel")&&(O(l,function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e=t.model,n=t.scale;if(e.get("axisLabel.show")&&!n.isBlank()){var o,l,i="category"===t.type,a=n.getExtent();l=i?n.count():(o=n.getTicks()).length;var s,r,c,u,_,d,h,y,p=t.getLabelModel(),m=Qy(t),k=1;40<l&&(k=Math.ceil(l/40));for(var g=0;g<l;g+=k){var f=m(o?o[g]:a[0]+g),b=(r=p.getTextRect(f),c=(p.get("rotate")||0)*Math.PI/180,_=(u=r.plain()).width,d=u.height,h=_*Math.abs(Math.cos(c))+Math.abs(d*Math.sin(c)),y=_*Math.abs(Math.sin(c))+Math.abs(d*Math.cos(c)),new Cn(u.x,u.y,h,y));s?s.union(b):s=b}return s}}(t);if(e){var n=t.isHorizontal()?"height":"width",l=t.model.get("axisLabel.margin");o[n]-=e[n]+l,"top"===t.position?o.y+=e.height+l:"left"===t.position&&(o.x+=e.width+l)}}}),i())},Pm.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var o in n)if(n.hasOwnProperty(o))return n[o];return n[e]}},Pm.getAxes=function(){return this._axesList.slice()},Pm.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}L(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var o=0,l=this._coordsList;o<l.length;o++)if(l[o].getAxis("x").index===t||l[o].getAxis("y").index===e)return l[o]},Pm.getCartesians=function(){return this._coordsList.slice()},Pm.convertToPixel=function(t,e,n){var o=this._findConvertTarget(t,e);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},Pm.convertFromPixel=function(t,e,n){var o=this._findConvertTarget(t,e);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},Pm._findConvertTarget=function(t,e){var n,o,l=e.seriesModel,i=e.xAxisModel||l&&l.getReferringComponents("xAxis")[0],a=e.yAxisModel||l&&l.getReferringComponents("yAxis")[0],s=e.gridModel,r=this._coordsList;return l?E(r,n=l.coordinateSystem)<0&&(n=null):i&&a?n=this.getCartesian(i.componentIndex,a.componentIndex):i?o=this.getAxis("x",i.componentIndex):a?o=this.getAxis("y",a.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:o}},Pm.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},Pm._initCartesian=function(t,e,n){var o={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},i={x:0,y:0};if(e.eachComponent("xAxis",a("x"),this),e.eachComponent("yAxis",a("y"),this),!i.x||!i.y)return this._axesMap={},void(this._axesList=[]);function a(e){return function(n,a){if(Mm(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&(s=o.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=o.left?"right":"left"),o[s]=!0;var r=new Bm(e,Zy(n),[0,0],n.get("type"),s),c="category"===r.type;r.onBand=c&&n.get("boundaryGap"),r.inverse=n.get("inverse"),(n.axis=r).model=n,r.grid=this,r.index=a,this._axesList.push(r),l[e][a]=r,i[e]++}}}O((this._axesMap=l).x,function(e,n){O(l.y,function(o,l){var i="x"+n+"y"+l,a=new Em(i);a.grid=this,a.model=t,this._coordsMap[i]=a,this._coordsList.push(a),a.addAxis(e),a.addAxis(o)},this)},this)},Pm._updateScale=function(t,e){function n(t,e){O(t.mapDimension(e.dim,!0),function(n){e.scale.unionExtentFromData(t,iy(t,n))})}O(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(t){if(Fm(t)){var o=Um(t),l=o[0],i=o[1];if(!Mm(l,e)||!Mm(i,e))return;var a=this.getCartesian(l.componentIndex,i.componentIndex),s=t.getData(),r=a.getAxis("x"),c=a.getAxis("y");"list"===s.type&&(n(s,r),n(s,c))}},this)},Pm.getTooltipAxes=function(t){var e=[],n=[];return O(this.getCartesians(),function(o){var l=null!=t&&"auto"!==t?o.getAxis(t):o.getBaseAxis(),i=o.getOtherAxis(l);E(e,l)<0&&e.push(l),E(n,i)<0&&n.push(i)}),{baseAxes:e,otherAxes:n}};var Lm=["xAxis","yAxis"];function Um(t){return C(Lm,function(e){return t.getReferringComponents(e)[0]})}function Fm(t){return"cartesian2d"===t.get("coordinateSystem")}function Hm(t,e){this.opt=e,this.axisModel=t,b(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Nn;var n=new Nn({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}Sm.create=function(t,e){var n=[];return t.eachComponent("grid",function(o,l){var i=new Sm(o,t,e);i.name="grid_"+l,i.resize(o,e,!0),o.coordinateSystem=i,n.push(i)}),t.eachSeries(function(t){if(Fm(t)){var e=Um(t),n=e[0],o=e[1],l=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=l.getCartesian(n.componentIndex,o.componentIndex)}}),n},Sm.dimensions=Sm.prototype.dimensions=Em.prototype.dimensions,nu.register("cartesian2d",Sm);var Vm=Math.PI;Hm.prototype={constructor:Hm,hasBuilder:function(t){return!!Gm[t]},add:function(t){Gm[t].call(this)},getGroup:function(){return this.group}};var Gm={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),o=this._transform,l=[n[0],0],i=[n[1],0];o&&(Tt(l,l,o),Tt(i,i,o));var a=f({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new es({anid:"line",subPixelOptimize:!0,shape:{x1:l[0],y1:l[1],x2:i[0],y2:i[1]},style:a,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var s=e.get("axisLine.symbol"),r=e.get("axisLine.symbolSize"),c=e.get("axisLine.symbolOffset")||0;if("number"==typeof c&&(c=[c,c]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof r&&"number"!=typeof r||(r=[r,r]);var u=r[0],_=r[1];O([{rotate:t.rotation+Math.PI/2,offset:c[0],r:0},{rotate:t.rotation-Math.PI/2,offset:c[1],r:Math.sqrt((l[0]-i[0])*(l[0]-i[0])+(l[1]-i[1])*(l[1]-i[1]))}],function(e,n){if("none"!==s[n]&&null!=s[n]){var o=dp(s[n],-u/2,-_/2,u,_,a.stroke,!0),i=e.r+e.offset,r=[l[0]+i*Math.cos(t.rotation),l[1]-i*Math.sin(t.rotation)];o.attr({rotation:e.rotate,position:r,silent:!0,z2:11}),this.group.add(o)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var o=e.axis,l=e.getModel("axisTick");if(l.get("show")&&!o.scale.isBlank()){for(var i=l.getModel("lineStyle"),a=n.tickDirection*l.get("length"),s=zm(o.getTicksCoords(),t._transform,a,b(i.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),r=0;r<s.length;r++)t.group.add(s[r]);return s}}(this,t,e);!function(t,e,n){if(!np(t.axis)){var o=t.get("axisLabel.showMinLabel"),l=t.get("axisLabel.showMaxLabel");n=n||[];var i=(e=e||[])[0],a=e[1],s=e[e.length-1],r=e[e.length-2],c=n[0],u=n[1],_=n[n.length-1],d=n[n.length-2];!1===o?(Ym(i),Ym(c)):Xm(i,a)&&(o?(Ym(a),Ym(u)):(Ym(i),Ym(c))),!1===l?(Ym(s),Ym(_)):Xm(r,s)&&(l?(Ym(r),Ym(d)):(Ym(s),Ym(_)))}}(t,function(t,e,n){var o=e.axis;if(G(n.axisLabelShow,e.get("axisLabel.show"))&&!o.scale.isBlank()){var l=e.getModel("axisLabel"),i=l.get("margin"),a=o.getViewLabels(),s=(G(n.labelRotate,l.get("rotate"))||0)*Vm/180,r=Wm(n.rotation,s,n.labelDirection),c=e.getCategories&&e.getCategories(!0),u=[],_=Km(e),d=e.get("triggerEvent");return O(a,function(a,s){var h=a.tickValue,y=a.formattedLabel,p=a.rawLabel,m=l;c&&c[h]&&c[h].textStyle&&(m=new vr(c[h].textStyle,l,e.ecModel));var k=m.getTextColor()||e.get("axisLine.lineStyle.color"),g=[o.dataToCoord(h),n.labelOffset+n.labelDirection*i],f=new Ua({anid:"label_"+h,position:g,rotation:r.rotation,silent:_,z2:10});zs(f.style,m,{text:y,textAlign:m.getShallow("align",!0)||r.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||r.textVerticalAlign,textFill:"function"==typeof k?k("category"===o.type?p:"value"===o.type?h+"":h,s):k}),d&&(f.eventData=jm(e),f.eventData.targetType="axisLabel",f.eventData.value=p),t._dumbGroup.add(f),f.updateTransform(),u.push(f),t.group.add(f),f.decomposeTransform()}),u}}(this,t,e),n),function(t,e,n){var o=e.axis,l=e.getModel("minorTick");if(l.get("show")&&!o.scale.isBlank()){var i=o.getMinorTicksCoords();if(i.length)for(var a=l.getModel("lineStyle"),s=n.tickDirection*l.get("length"),r=b(a.getLineStyle(),b(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),c=0;c<i.length;c++)for(var u=zm(i[c],t._transform,s,r,"minorticks_"+c),_=0;_<u.length;_++)t.group.add(u[_])}}(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,n=G(t.axisName,e.get("name"));if(n){var o,l,i=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),r=e.get("nameGap")||0,c=this.axisModel.axis.getExtent(),u=c[0]>c[1]?-1:1,_=["start"===i?c[0]-u*r:"end"===i?c[1]+u*r:(c[0]+c[1])/2,$m(i)?t.labelOffset+a*r:0],d=e.get("nameRotate");null!=d&&(d=d*Vm/180),$m(i)?o=Wm(t.rotation,null!=d?d:t.rotation,a):(o=function(t,e,n,o){var l,i=Dr(n-t.rotation),a=o[0]>o[1],s="start"===e&&!a||"start"!==e&&a;return{rotation:i,textAlign:Lr(i-Vm/2)?(l=s?"bottom":"top","center"):Lr(i-1.5*Vm)?(l=s?"top":"bottom","center"):(l="middle",i<1.5*Vm&&Vm/2<i?s?"left":"right":s?"right":"left"),textVerticalAlign:l}}(t,i,d||0,c),null!=(l=t.axisNameAvailableWidth)&&(l=Math.abs(l/Math.sin(o.rotation)),isFinite(l)||(l=null)));var h=s.getFont(),y=e.get("nameTruncate",!0)||{},p=y.ellipsis,m=G(t.nameTruncateMaxWidth,y.maxWidth,l),k=null!=p&&null!=m?ac(n,m,h,p,{minChar:2,placeholder:y.placeholder}):n,g=e.get("tooltip",!0),b=e.mainType,v={componentType:b,name:n,$vars:["name"]};v[b+"Index"]=e.componentIndex;var T=new Ua({anid:"name",__fullText:n,__truncatedText:k,position:_,rotation:o.rotation,silent:Km(e),z2:1,tooltip:g&&g.show?f({content:n,formatter:function(){return n},formatterParams:v},g):null});zs(T.style,s,{text:k,textFont:h,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:s.get("align")||o.textAlign,textVerticalAlign:s.get("verticalAlign")||o.textVerticalAlign}),e.get("triggerEvent")&&(T.eventData=jm(e),T.eventData.targetType="axisName",T.eventData.name=n),this._dumbGroup.add(T),T.updateTransform(),this.group.add(T),T.decomposeTransform()}}},jm=Hm.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},Wm=Hm.innerTextLayout=function(t,e,n){var o,l=Dr(e-t);return{rotation:l,textAlign:Lr(l)?(o=0<n?"top":"bottom","center"):Lr(l-Vm)?(o=0<n?"bottom":"top","center"):(o="middle",0<l&&l<Vm?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:o}},Km=Hm.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function Ym(t){t&&(t.ignore=!0)}function Xm(t,e){var n=t&&t.getBoundingRect().clone(),o=e&&e.getBoundingRect().clone();if(n&&o){var l=ae([]);return ue(l,l,-t.rotation),n.applyTransform(re([],l,t.getLocalTransform())),o.applyTransform(re([],l,e.getLocalTransform())),n.intersect(o)}}function $m(t){return"middle"===t||"center"===t}function zm(t,e,n,o,l){for(var i=[],a=[],s=[],r=0;r<t.length;r++){var c=t[r].coord;a[0]=c,s[a[1]=0]=c,s[1]=n,e&&(Tt(a,a,e),Tt(s,s,e));var u=new es({anid:l+"_"+t[r].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:o,z2:2,silent:!0});i.push(u)}return i}var qm=O,Jm=S;function Zm(t,e){return"all"===t||P(t)&&0<=E(t,e)||t===e}function Qm(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[ek(t)]}function tk(t){return!!t.get("handle.show")}function ek(t){return t.type+"||"+t.id}var nk=fh({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,o){this.axisPointerClass&&function(t){var e=Qm(t);if(e){var n=e.axisPointerModel,o=e.axis.scale,l=n.option,i=n.get("status"),a=n.get("value");null!=a&&(a=o.parse(a));var s=tk(n);null==i&&(l.status=s?"show":"hide");var r=o.getExtent().slice();r[0]>r[1]&&r.reverse(),(null==a||a>r[1])&&(a=r[1]),a<r[0]&&(a=r[0]),l.value=a,s&&(l.status=e.axis.scale.isBlank()?"hide":"show")}}(t),nk.superApply(this,"render",arguments),ok(this,t,e,n,o,!0)},updateAxisPointer:function(t,e,n,o,l){ok(this,t,e,n,o,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),nk.superApply(this,"remove",arguments)},dispose:function(t,e){lk(this,e),nk.superApply(this,"dispose",arguments)}});function ok(t,e,n,o,l,i){var a=nk.getAxisPointerClass(t.axisPointerClass);if(a){var s=function(t){var e=Qm(t);return e&&e.axisPointerModel}(e);s?(t._axisPointer||(t._axisPointer=new a)).render(e,s,o,i):lk(t,o)}}function lk(t,e,n){var o=t._axisPointer;o&&o.dispose(e,n),t._axisPointer=null}var ik=[];function ak(t,e,n){n=n||{};var o=t.coordinateSystem,l=e.axis,i={},a=l.getAxesOnZeroOf()[0],s=l.position,r=a?"onZero":s,c=l.dim,u=o.getRect(),_=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,y="x"===c?[_[2]-h,_[3]+h]:[_[0]-h,_[1]+h];if(a){var p=a.toGlobalCoord(a.dataToCoord(0));y[d.onZero]=Math.max(Math.min(p,y[1]),y[0])}i.position=["y"===c?y[d[r]]:_[0],"x"===c?y[d[r]]:_[3]],i.rotation=Math.PI/2*("x"===c?0:1),i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],i.labelOffset=a?y[d[s]]-y[d.onZero]:0,e.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),G(n.labelInside,e.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var m=e.get("axisLabel.rotate");return i.labelRotate="top"===r?-m:m,i.z2=1,i}function sk(t,e,n,o){var l=n.axis;if(!l.scale.isBlank()){var i=n.getModel("splitArea"),a=i.getModel("areaStyle"),s=a.get("color"),r=o.coordinateSystem.getRect(),c=l.getTicksCoords({tickModel:i,clamp:!0});if(c.length){var u=s.length,_=t.__splitAreaColors,d=Q(),h=0;if(_)for(var y=0;y<c.length;y++){var p=_.get(c[y].tickValue);if(null!=p){h=(p+(u-1)*y)%u;break}}var m=l.toGlobalCoord(c[0].coord),k=a.getAreaStyle();for(s=P(s)?s:[s],y=1;y<c.length;y++){var g,f,v,T,E=l.toGlobalCoord(c[y].coord);m=l.isHorizontal()?(g=m,f=r.y,v=E-g,T=r.height,g+v):(g=r.x,f=m,v=r.width,f+(T=E-f));var B=c[y-1].tickValue;null!=B&&d.set(B,h),e.add(new Qa({anid:null!=B?"area_"+B:null,shape:{x:g,y:f,width:v,height:T},style:b({fill:s[h]},k),silent:!0})),h=(h+1)%u}t.__splitAreaColors=d}}}function rk(t){t.__splitAreaColors=null}nk.registerAxisPointerClass=function(t,e){ik[t]=e},nk.getAxisPointerClass=function(t){return t&&ik[t]};var ck=["axisLine","axisTickLabel","axisName"],uk=["splitArea","splitLine","minorSplitLine"],_k=nk.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,o){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Nn,this.group.add(this._axisGroup),t.get("show")){var i=t.getCoordSysModel(),a=ak(i,t),s=new Hm(t,a);O(ck,s.add,s),this._axisGroup.add(s.getGroup()),O(uk,function(e){t.get(e+".show")&&this["_"+e](t,i)},this),rr(l,this._axisGroup,t),_k.superCall(this,"render",t,e,n,o)}},remove:function(){rk(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),i=l.get("color");i=P(i)?i:[i];for(var a=e.coordinateSystem.getRect(),s=n.isHorizontal(),r=0,c=n.getTicksCoords({tickModel:o}),u=[],_=[],d=l.getLineStyle(),h=0;h<c.length;h++){var y=n.toGlobalCoord(c[h].coord);s?(u[0]=y,u[1]=a.y,_[0]=y,_[1]=a.y+a.height):(u[0]=a.x,u[1]=y,_[0]=a.x+a.width,_[1]=y);var p=r++%i.length,m=c[h].tickValue;this._axisGroup.add(new es({anid:null!=m?"line_"+c[h].tickValue:null,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:_[0],y2:_[1]},style:b({stroke:i[p]},d),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,o=t.getModel("minorSplitLine").getModel("lineStyle"),l=e.coordinateSystem.getRect(),i=n.isHorizontal(),a=n.getMinorTicksCoords();if(a.length)for(var s=[],r=[],c=o.getLineStyle(),u=0;u<a.length;u++)for(var _=0;_<a[u].length;_++){var d=n.toGlobalCoord(a[u][_].coord);i?(s[0]=d,s[1]=l.y,r[0]=d,r[1]=l.y+l.height):(s[0]=l.x,s[1]=d,r[0]=l.x+l.width,r[1]=d),this._axisGroup.add(new es({anid:"minor_line_"+a[u][_].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:r[0],y2:r[1]},style:c,silent:!0}))}},_splitArea:function(t,e){sk(this,this._axisGroup,t,e)}});_k.extend({type:"xAxis"}),_k.extend({type:"yAxis"}),fh({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Qa({shape:t.coordinateSystem.getRect(),style:b({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),uh(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),ph(km("line","circle","line")),yh(gm("line")),_h(Ed.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var o=t.getData(),l=t.get("sampling"),i=t.coordinateSystem;if("cartesian2d"===i.type&&l){var a,s=i.getBaseAxis(),r=i.getOtherAxis(s),c=s.getExtent(),u=Math.abs(c[1]-c[0]),_=Math.round(o.count()/u);1<_&&("string"==typeof l?a=bm[l]:"function"==typeof l&&(a=l),a&&t.setData(o.downSample(o.mapDimension(r.dim),1/_,a,fm)))}}});var dk=t_.extend({type:"series.__base_bar__",getInitialData:function(t,e){return ay(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),o=this.getData(),l=o.getLayout("offset"),i=o.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=l+i/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function hk(t,e,n,o,l,i){Xs(t,e,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:l,labelDataIndex:i,defaultText:Sp(l.getData(),i),isRectText:!0,autoColor:o}),yk(t),yk(e)}function yk(t,e){"outside"===t.textPosition&&(t.textPosition=e)}dk.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return t<e&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var pk=ii([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mk={getBarItemStyle:function(t){var e=pk(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}},kk=vs({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,o=e.cy,l=Math.max(e.r0||0,0),i=Math.max(e.r,0),a=.5*(i-l),s=l+a,r=e.startAngle,c=e.endAngle,u=e.clockwise,_=Math.cos(r),d=Math.sin(r),h=Math.cos(c),y=Math.sin(c);(u?c-r<2*Math.PI:r-c<2*Math.PI)&&(t.moveTo(_*l+n,d*l+o),t.arc(_*s+n,d*s+o,a,-Math.PI+r,r,!u)),t.arc(n,o,i,r,c,!u),t.moveTo(h*i+n,y*i+o),t.arc(h*s+n,y*s+o,a,c-2*Math.PI,c-Math.PI,!u),0!==l&&(t.arc(n,o,l,c,r,u),t.moveTo(_*l+n,y*l+o)),t.closePath()}}),gk=["itemStyle","barBorderWidth"],fk=[0,0];f(vr.prototype,mk),vh({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var o=t.get("coordinateSystem");return"cartesian2d"!==o&&"polar"!==o||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,o){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var o,l=this.group,i=t.getData(),a=this._data,s=t.coordinateSystem,r=s.getBaseAxis();"cartesian2d"===s.type?o=r.isHorizontal():"polar"===s.type&&(o="angle"===r.dim);var c=t.isAnimationEnabled()?t:null,u=t.get("clip",!0),_=function(t,e){var n=t.getArea&&t.getArea();if("cartesian2d"===t.type){var o=t.getBaseAxis();if("category"!==o.type||!o.onBand){var l=e.getLayout("bandWidth");o.isHorizontal()?(n.x-=l,n.width+=2*l):(n.y-=l,n.height+=2*l)}}return n}(s,i);function d(t){var e=Rk[s.type](i,t),n=function(t,e,n){return new("polar"===t.type?Ga:Qa)({shape:Mk(e,n,t),silent:!0,z2:0})}(s,o,e);return n.useStyle(p.getBarItemStyle()),"cartesian2d"===s.type&&n.setShape("r",m),k[t]=n}l.removeClipPath();var h=t.get("roundCap",!0),y=t.get("showBackground",!0),p=t.getModel("backgroundStyle"),m=p.get("barBorderRadius")||0,k=[],g=this._backgroundEls||[];i.diff(a).add(function(e){var n=i.getItemModel(e),a=Rk[s.type](i,e,n);if(y&&d(e),i.hasValue(e)){if(u&&Tk[s.type](_,a))return void l.remove(r);var r=Ek[s.type](e,a,o,c,!1,h);i.setItemGraphicEl(e,r),l.add(r),Ck(r,i,e,n,a,t,o,"polar"===s.type)}}).update(function(e,n){var r=i.getItemModel(e),f=Rk[s.type](i,e,r);if(y){var b;0===g.length?b=d(n):((b=g[n]).useStyle(p.getBarItemStyle()),"cartesian2d"===s.type&&b.setShape("r",m),k[e]=b);var v=Rk[s.type](i,e);or(b,{shape:Mk(o,v,s)},c,e)}var T=a.getItemGraphicEl(n);if(i.hasValue(e)){if(u&&Tk[s.type](_,f))return void l.remove(T);T?or(T,{shape:f},c,e):T=Ek[s.type](e,f,o,c,!0,h),i.setItemGraphicEl(e,T),l.add(T),Ck(T,i,e,r,f,t,o,"polar"===s.type)}else l.remove(T)}).remove(function(t){var e=a.getItemGraphicEl(t);"cartesian2d"===s.type?e&&Bk(t,c,e):e&&Ik(t,c,e)}).execute();var f=this._backgroundGroup||(this._backgroundGroup=new Nn);f.removeAll();for(var b=0;b<k.length;++b)f.add(k[b]);l.add(f),this._backgroundEls=k,this._data=i},_renderLarge:function(t,e,n){this._clear(),wk(t,this.group);var o=t.get("clip",!0)?_m(t.coordinateSystem,!1,t):null;o?this.group.setClipPath(o):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),wk(e,this.group,!0)},dispose:et,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(e){"sector"===e.type?Ik(e.dataIndex,t,e):Bk(e.dataIndex,t,e)})):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var bk=Math.max,vk=Math.min,Tk={cartesian2d:function(t,e){var n=e.width<0?-1:1,o=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),o<0&&(e.y+=e.height,e.height=-e.height);var l=bk(e.x,t.x),i=vk(e.x+e.width,t.x+t.width),a=bk(e.y,t.y),s=vk(e.y+e.height,t.y+t.height);e.x=l,e.y=a,e.width=i-l,e.height=s-a;var r=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),o<0&&(e.y+=e.height,e.height=-e.height),r},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var o=e.r;e.r=e.r0,e.r0=o}o=vk(e.r,t.r);var l=bk(e.r0,t.r0),i=(e.r=o)-(e.r0=l)<0;return n<0&&(o=e.r,e.r=e.r0,e.r0=o),i}},Ek={cartesian2d:function(t,e,n,o,l){var i=new Qa({shape:f({},e),z2:1});if(i.name="item",o){var a=n?"height":"width",s={};i.shape[a]=0,s[a]=e[a],yr[l?"updateProps":"initProps"](i,{shape:s},o,t)}return i},polar:function(t,e,n,o,l,i){var a=e.startAngle<e.endAngle,s=new(!n&&i?kk:Ga)({shape:b({clockwise:a},e),z2:1});if(s.name="item",o){var r=n?"r":"endAngle",c={};s.shape[r]=n?0:e.startAngle,c[r]=e[r],yr[l?"updateProps":"initProps"](s,{shape:c},o,t)}return s}};function Bk(t,e,n){n.style.text=null,or(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function Ik(t,e,n){n.style.text=null,or(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}var Rk={cartesian2d:function(t,e,n){var o=t.getItemLayout(e),l=n?function(t,e){var n=t.get(gk)||0,o=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),l=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,o,l)}(n,o):0,i=0<o.width?1:-1,a=0<o.height?1:-1;return{x:o.x+i*l/2,y:o.y+a*l/2,width:o.width-i*l,height:o.height-a*l}},polar:function(t,e,n){var o=t.getItemLayout(e);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle}}};function Ok(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function Ck(t,e,n,o,l,i,a,s){var r=e.getItemVisual(n,"color"),c=e.getItemVisual(n,"opacity"),u=e.getVisual("borderColor"),_=o.getModel("itemStyle"),d=o.getModel("emphasis.itemStyle").getBarItemStyle();s||t.setShape("r",_.get("barBorderRadius")||0),t.useStyle(b({stroke:Ok(l)?"none":u,fill:Ok(l)?"none":r,opacity:c},_.getBarItemStyle()));var h=o.getShallow("cursor");h&&t.attr("cursor",h),a?l.height:l.width,s||hk(t.style,d,o,r,i,n),Ok(l)&&(d.fill=d.stroke="none"),js(t,d)}var Nk=va.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,o=this.__startPoint,l=this.__baseDimIdx,i=0;i<n.length;i+=2)o[l]=n[i+l],t.moveTo(o[0],o[1]),t.lineTo(n[i],n[i+1])}});function wk(t,e,n){var o=t.getData(),l=[],i=o.getLayout("valueAxisHorizontal")?1:0;l[1-i]=o.getLayout("valueAxisStart");var a=o.getLayout("largeDataIndices"),s=o.getLayout("barWidth"),r=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var c=o.getLayout("largeBackgroundPoints"),u=[];u[1-i]=o.getLayout("backgroundStart");var _=new Nk({shape:{points:c},incremental:!!n,__startPoint:u,__baseDimIdx:i,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});!function(t,e,n){var o=e.get("borderColor")||e.get("color"),l=e.getItemStyle(["color","borderColor"]);t.useStyle(l),t.style.fill=null,t.style.stroke=o,t.style.lineWidth=n.getLayout("barWidth")}(_,r,o),e.add(_)}var d=new Nk({shape:{points:o.getLayout("largePoints")},incremental:!!n,__startPoint:l,__baseDimIdx:i,__largeDataIndices:a,__barWidth:s});e.add(d),function(t,e,n){var o=n.getVisual("borderColor")||n.getVisual("color"),l=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(l),t.style.fill=null,t.style.stroke=o,t.style.lineWidth=n.getLayout("barWidth")}(d,t,o),d.seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",Ak),d.on("mousemove",Ak))}var Ak=E_(function(t){var e=function(t,e,n){var o=t.__baseDimIdx,l=1-o,i=t.shape.points,a=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),r=t.__startPoint[l];fk[0]=e,fk[1]=n;for(var c=fk[o],u=fk[1-o],_=c-s,d=c+s,h=0,y=i.length/2;h<y;h++){var p=2*h,m=i[p+o],k=i[p+l];if(_<=m&&m<=d&&(r<=k?r<=u&&u<=k:k<=u&&u<=r))return a[h]}return-1}(this,t.offsetX,t.offsetY);this.dataIndex=0<=e?e:null},30,!1);function Mk(t,e,n){var o,l="polar"===n.type;return o=l?n.getArea():n.grid.getRect(),l?{cx:o.cx,cy:o.cy,r0:t?o.r0:e.r0,r:t?o.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:o.x,y:t?o.y:e.y,width:t?e.width:o.width,height:t?o.height:e.height}}function Sk(t,e,n){e=P(e)&&{coordDimensions:e}||f({},e);var o=t.getSource(),l=Qh(o,e),i=new Fh(l,t);return i.initData(o,n),i}yh(Ed.VISUAL.LAYOUT,S(Cy,"bar")),yh(Ed.VISUAL.PROGRESSIVE_LAYOUT,Ny),ph({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var Pk={updateSelectedMap:function(t){this._targetList=P(t)?t.slice():[],this._selectTargetMap=N(t||[],function(t,e){return t.set(e.name,e),t},Q())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(t){t.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}};function xk(t,e){this.getAllNames=function(){var t=e();return t.mapArray(t.getName)},this.containName=function(t){return 0<=e().indexOfName(t)},this.indexOfName=function(e){return t().indexOfName(e)},this.getItemVisual=function(e,n){return t().getItemVisual(e,n)}}var Dk=bh({type:"series.pie",init:function(t){Dk.superApply(this,"init",arguments),this.legendVisualProvider=new xk(M(this.getData,this),M(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){Dk.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return Sk(this,{coordDimensions:["value"],encodeDefaulter:S(Yc,this)})},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],o=0,l=t.count();o<l;o++)n.push({name:t.getName(o),value:t.get(e,o),selected:Lu(t,o,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=Dk.superCall(this,"getDataParams",t),o=[];return e.each(e.mapDimension("value"),function(t){o.push(t)}),n.percent=Pr(o,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Dl(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function Lk(t,e,n,o){var l=e.getData(),i=this.dataIndex,a=l.getName(i),s=e.get("selectedOffset");o.dispatchAction({type:"pieToggleSelect",from:t,name:a,seriesId:e.id}),l.each(function(t){Uk(l.getItemGraphicEl(t),l.getItemLayout(t),e.isSelected(l.getName(t)),s,n)})}function Uk(t,e,n,o,l){var i=(e.startAngle+e.endAngle)/2,a=n?o:0,s=[Math.cos(i)*a,Math.sin(i)*a];l?t.animate().when(200,{position:s}).start("bounceOut"):t.attr("position",s)}function Fk(t,e){Nn.call(this);var n=new Ga({z2:2}),o=new Xa,l=new Ua;this.add(n),this.add(o),this.add(l),this.updateData(t,e,!0)}I(Dk,Pk);var Hk=Fk.prototype;function Vk(t,e){O(e,function(e){e.update="updateView",dh(e,function(n,o){var l={};return o.eachComponent({mainType:"series",subType:t,query:n},function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var o=t.getData();o.each(function(e){var n=o.getName(e);l[n]=t.isSelected(n)||!1})}),{name:n.name,selected:l,seriesId:n.seriesId}})})}function Gk(t){return{getTargetSeries:function(e){var n={},o=Q();return e.eachSeriesByType(t,function(t){t.__paletteScope=n,o.set(t.uid,t)}),o},reset:function(t,e){var n=t.getRawData(),o={},l=t.getData();l.each(function(t){var e=l.getRawIndex(t);o[e]=t}),n.each(function(e){var i,a=o[e],s=null!=a&&l.getItemVisual(a,"color",!0),r=null!=a&&l.getItemVisual(a,"borderColor",!0);if(s&&r||(i=n.getItemModel(e)),!s){var c=i.get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());null!=a&&l.setItemVisual(a,"color",c)}if(!r){var u=i.get("itemStyle.borderColor");null!=a&&l.setItemVisual(a,"borderColor",u)}})}}}Hk.updateData=function(t,e,n){var o=this.childAt(0),l=this.childAt(1),i=this.childAt(2),a=t.hostModel,s=t.getItemModel(e),r=t.getItemLayout(e),c=f({},r);c.label=null;var u=a.getShallow("animationTypeUpdate");n?(o.setShape(c),"scale"===a.getShallow("animationType")?(o.shape.r=r.r0,lr(o,{shape:{r:r.r}},a,e)):(o.shape.endAngle=r.startAngle,or(o,{shape:{endAngle:r.endAngle}},a,e))):"expansion"===u?o.setShape(c):or(o,{shape:c},a,e);var _=t.getItemVisual(e,"color");o.useStyle(b({lineJoin:"bevel",fill:_},s.getModel("itemStyle").getItemStyle())),o.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var d=s.getShallow("cursor");d&&o.attr("cursor",d),Uk(this,t.getItemLayout(e),a.isSelected(t.getName(e)),a.get("selectedOffset"),a.get("animation"));var h=!n&&"transition"===u;this._updateLabel(t,e,h),this.highDownOnUpdate=a.get("silent")?null:function(t,e){var n=a.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===e?(l.ignore=l.hoverIgnore,i.ignore=i.hoverIgnore,n&&(o.stopAnimation(!0),o.animateTo({shape:{r:r.r+a.get("hoverOffset")}},300,"elasticOut"))):(l.ignore=l.normalIgnore,i.ignore=i.normalIgnore,n&&(o.stopAnimation(!0),o.animateTo({shape:{r:r.r}},300,"elasticOut")))},js(this)},Hk._updateLabel=function(t,e,n){var o=this.childAt(1),l=this.childAt(2),i=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e).label,r=t.getItemVisual(e,"color");if(!s||isNaN(s.x)||isNaN(s.y))l.ignore=l.normalIgnore=l.hoverIgnore=o.ignore=o.normalIgnore=o.hoverIgnore=!0;else{var c={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},u={x:s.x,y:s.y};n?(or(o,{shape:c},i,e),or(l,{style:u},i,e)):(o.attr({shape:c}),l.attr({style:u})),l.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var _=a.getModel("label"),d=a.getModel("emphasis.label"),h=a.getModel("labelLine"),y=a.getModel("emphasis.labelLine");r=t.getItemVisual(e,"color"),Xs(l.style,l.hoverStyle={},_,d,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:s.text,autoColor:r,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),l.ignore=l.normalIgnore=!_.get("show"),l.hoverIgnore=!d.get("show"),o.ignore=o.normalIgnore=!h.get("show"),o.hoverIgnore=!y.get("show"),o.setStyle({stroke:r,opacity:t.getItemVisual(e,"opacity")}),o.setStyle(h.getModel("lineStyle").getLineStyle()),o.hoverStyle=y.getModel("lineStyle").getLineStyle();var p=h.get("smooth");p&&!0===p&&(p=.4),o.setShape({smooth:p})}},B(Fk,Nn),h_.extend({type:"pie",init:function(){var t=new Nn;this._sectorGroup=t},render:function(t,e,n,o){if(!o||o.from!==this.uid){var l=t.getData(),i=this._data,a=this.group,s=e.get("animation"),r=!i,c=t.get("animationType"),u=t.get("animationTypeUpdate"),_=S(Lk,this.uid,t,s,n),d=t.get("selectedMode");if(l.diff(i).add(function(t){var e=new Fk(l,t);r&&"scale"!==c&&e.eachChild(function(t){t.stopAnimation(!0)}),d&&e.on("click",_),l.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var n=i.getItemGraphicEl(e);r||"transition"===u||n.eachChild(function(t){t.stopAnimation(!0)}),n.updateData(l,t),n.off("click"),d&&n.on("click",_),a.add(n),l.setItemGraphicEl(t,n)}).remove(function(t){var e=i.getItemGraphicEl(t);a.remove(e)}).execute(),s&&0<l.count()&&(r?"scale"!==c:"transition"!==u)){for(var h=l.getItemLayout(0),y=1;isNaN(h.startAngle)&&y<l.count();++y)h=l.getItemLayout(y);var p=Math.max(n.getWidth(),n.getHeight())/2,m=M(a.removeClipPath,a);a.setClipPath(this._createClipPath(h.cx,h.cy,p,h.startAngle,h.clockwise,m,t,r))}else a.removeClipPath();this._data=l}},dispose:function(){},_createClipPath:function(t,e,n,o,l,i,a,s){var r=new Ga({shape:{cx:t,cy:e,r0:0,r:n,startAngle:o,endAngle:o,clockwise:l}});return(s?lr:or)(r,{shape:{endAngle:o+(l?1:-1)*Math.PI*2}},a,i),r},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var o=t[0]-n.cx,l=t[1]-n.cy,i=Math.sqrt(o*o+l*l);return i<=n.r&&i>=n.r0}}});var jk=Math.PI/180;function Wk(t,e,n,o,l,i,a,s,r,c){function u(e,n,o){for(var l=e;l<n&&!(t[l].y+o>r+a);l++)if(t[l].y+=o,e<l&&l+1<n&&t[l+1].y>t[l].y+t[l].height)return void _(l,o/2);_(n-1,o/2)}function _(e,n){for(var o=e;0<=o&&!(t[o].y-n<r)&&(t[o].y-=n,!(0<o&&t[o].y>t[o-1].y+t[o-1].height));o--);}function d(t,e,n,o,l,i){for(var a=e?Number.MAX_VALUE:0,s=0,r=t.length;s<r;s++)if("none"===t[s].labelAlignTo){var c=Math.abs(t[s].y-o),u=t[s].len,_=t[s].len2,d=c<l+u?Math.sqrt((l+u+_)*(l+u+_)-c*c):Math.abs(t[s].x-n);e&&a<=d&&(d=a-10),!e&&d<=a&&(d=a+10),t[s].x=n+d*i,a=d}}t.sort(function(t,e){return t.y-e.y});for(var h,y=0,p=t.length,m=[],k=[],g=0;g<p;g++){if("outer"===t[g].position&&"labelLine"===t[g].labelAlignTo){var f=t[g].x-c;t[g].linePoints[1][0]+=f,t[g].x=c}(h=t[g].y-y)<0&&u(g,p,-h),y=t[g].y+t[g].height}for(a-y<0&&_(p-1,y-a),g=0;g<p;g++)t[g].y>=n?k.push(t[g]):m.push(t[g]);d(m,!1,e,n,o,l),d(k,!0,e,n,o,l)}function Kk(t){return"center"===t.position}var Yk=2*Math.PI,Xk=Math.PI/180;function $k(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var o=t.getData();o.filterSelf(function(t){for(var e=o.getName(t),l=0;l<n.length;l++)if(!n[l].isSelected(e))return!1;return!0})}}}}Vk("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),ph(Gk("pie")),yh(S(function(t,e,n,o){e.eachSeriesByType(t,function(t){var e=t.getData(),o=e.mapDimension("value"),l=function(t,e){return yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,n),i=t.get("center"),a=t.get("radius");P(a)||(a=[0,a]),P(i)||(i=[i,i]);var s=Cr(l.width,n.getWidth()),r=Cr(l.height,n.getHeight()),c=Math.min(s,r),u=Cr(i[0],s)+l.x,_=Cr(i[1],r)+l.y,d=Cr(a[0],c/2),h=Cr(a[1],c/2),y=-t.get("startAngle")*Xk,p=t.get("minAngle")*Xk,m=0;e.each(o,function(t){isNaN(t)||m++});var k=e.getSum(o),g=Math.PI/(k||m)*2,f=t.get("clockwise"),b=t.get("roseType"),v=t.get("stillShowZeroSum"),T=e.getDataExtent(o);T[0]=0;var E=Yk,B=0,I=y,R=f?1:-1;if(e.each(o,function(t,n){var o;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:f,cx:u,cy:_,r0:d,r:b?NaN:h,viewRect:l});else{(o="area"!==b?0===k&&v?g:t*g:Yk/m)<p?E-=o=p:B+=t;var i=I+R*o;e.setItemLayout(n,{angle:o,startAngle:I,endAngle:i,clockwise:f,cx:u,cy:_,r0:d,r:b?Or(t,T,[d,h]):h,viewRect:l}),I=i}}),E<Yk&&m)if(E<=.001){var O=Yk/m;e.each(o,function(t,n){if(!isNaN(t)){var o=e.getItemLayout(n);o.angle=O,o.startAngle=y+R*n*O,o.endAngle=y+R*(n+1)*O}})}else g=E/B,I=y,e.each(o,function(t,n){if(!isNaN(t)){var o=e.getItemLayout(n),l=o.angle===p?p:t*g;o.startAngle=I,o.endAngle=I+R*l,I+=R*l}});!function(t,e,n,o,l,i){var a,s,r=t.getData(),c=[],u=!1,_=(t.get("minShowLabelAngle")||0)*jk;r.each(function(o){var i=r.getItemLayout(o),d=r.getItemModel(o),h=d.getModel("label"),y=h.get("position")||d.get("emphasis.label.position"),p=h.get("distanceToLabelLine"),m=h.get("alignTo"),k=Cr(h.get("margin"),n),g=h.get("bleedMargin"),f=h.getFont(),b=d.getModel("labelLine"),v=b.get("length");v=Cr(v,n);var T=b.get("length2");if(T=Cr(T,n),!(i.angle<_)){var E,B,I,R,O=(i.startAngle+i.endAngle)/2,C=Math.cos(O),N=Math.sin(O);a=i.cx,s=i.cy;var w,A=t.getFormattedLabel(o,"normal")||r.getName(o),M=ho(A,f,R,"top"),S="inside"===y||"inner"===y;if("center"===y)E=i.cx,B=i.cy,R="center";else{var P=(S?(i.r+i.r0)/2*C:i.r*C)+a,x=(S?(i.r+i.r0)/2*N:i.r*N)+s;if(E=P+3*C,B=x+3*N,!S){var D=P+C*(v+e-i.r),L=x+N*(v+e-i.r),U=D+(C<0?-1:1)*T;E="edge"===m?C<0?l+k:l+n-k:U+(C<0?-p:p),I=[[P,x],[D,L],[U,B=L]]}R=S?"center":"edge"===m?0<C?"right":"left":0<C?"left":"right"}var F=h.get("rotate");w="number"==typeof F?F*(Math.PI/180):F?C<0?-O+Math.PI:-O:0,u=!!w,i.label={x:E,y:B,position:y,height:M.height,len:v,len2:T,linePoints:I,textAlign:R,verticalAlign:"middle",rotation:w,inside:S,labelDistance:p,labelAlignTo:m,labelMargin:k,bleedMargin:g,textRect:M,text:A,font:f},S||c.push(i.label)}}),!u&&t.get("avoidLabelOverlap")&&function(t,e,n,o,l,i,a,s){for(var r=[],c=[],u=Number.MAX_VALUE,_=-Number.MAX_VALUE,d=0;d<t.length;d++)Kk(t[d])||(t[d].x<e?(u=Math.min(u,t[d].x),r.push(t[d])):(_=Math.max(_,t[d].x),c.push(t[d])));for(Wk(c,e,n,o,1,0,i,0,s,_),Wk(r,e,n,o,-1,0,i,0,s,u),d=0;d<t.length;d++){var h=t[d];if(!Kk(h)){var y=h.linePoints;if(y){var p,m="edge"===h.labelAlignTo,k=h.textRect.width;(p=m?h.x<e?y[2][0]-h.labelDistance-a-h.labelMargin:a+l-h.labelMargin-y[2][0]-h.labelDistance:h.x<e?h.x-a-h.bleedMargin:a+l-h.x-h.bleedMargin)<h.textRect.width&&(h.text=ko(h.text,p,h.font),"edge"===h.labelAlignTo&&(k=_o(h.text,h.font)));var g=y[1][0]-y[2][0];m?h.x<e?y[2][0]=a+h.labelMargin+k+h.labelDistance:y[2][0]=a+l-h.labelMargin-k-h.labelDistance:(h.x<e?y[2][0]=h.x+h.labelDistance:y[2][0]=h.x-h.labelDistance,y[1][0]=y[2][0]+g),y[1][1]=y[2][1]=h.y}}}}(c,a,s,e,n,o,l,i)}(t,h,l.width,l.height,l.x,l.y)})},"pie")),_h($k("pie")),t_.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return ay(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var zk=vs({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(t,e){var n=e.points,o=e.size,l=this.symbolProxy,i=l.shape;if(!((t.getContext?t.getContext():t)&&o[0]<4))for(var a=0;a<n.length;){var s=n[a++],r=n[a++];isNaN(s)||isNaN(r)||this.softClipShape&&!this.softClipShape.contain(s,r)||(i.x=s-o[0]/2,i.y=r-o[1]/2,i.width=o[0],i.height=o[1],l.buildPath(t,i,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,o=e.size;if(o[0]<4){this.setTransform(t);for(var l=0;l<n.length;){var i=n[l++],a=n[l++];isNaN(i)||isNaN(a)||this.softClipShape&&!this.softClipShape.contain(i,a)||t.fillRect(i-o[0]/2,a-o[1]/2,o[0],o[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,o=n.points,l=n.size,i=Math.max(l[0],4),a=Math.max(l[1],4),s=o.length/2-1;0<=s;s--){var r=2*s,c=o[r]-i/2,u=o[1+r]-a/2;if(c<=t&&u<=e&&t<=c+i&&e<=u+a)return s}return-1}});function qk(){this.group=new Nn}var Jk=qk.prototype;function Zk(t,e,n){Cp.call(this,t,e,n),this.type="value",this.angle=0,this.name="",this.model}function Qk(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=C(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,o=new Zk(n,"log"===t.get("axisType")?new $y:new fy);return o.name=t.get("name"),(o.model=t).axis=o,this.dimensions.push(n),o},this),this.resize(t,n),this.cx,this.cy,this.r,this.r0,this.startAngle}Jk.isPersistent=function(){return!this._incremental},Jk.updateData=function(t,e){this.group.removeAll();var n=new zk({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},Jk.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),o=4*t.startIndex*2;e=new Float32Array(e.buffer,o,n)}t.setShape("points",e)})}},Jk.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),2e6<t.count()?(this._incremental||(this._incremental=new us({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Jk.incrementalUpdate=function(t,e,n){var o;this._incremental?(o=new zk,this._incremental.addDisplayable(o,!0)):((o=new zk({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(o)),o.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(o,e,!!this._incremental,n)},Jk._setCommon=function(t,e,n,o){var l=e.hostModel;o=o||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=o.clipShape||null,t.symbolProxy=dp(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(l.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("color");s&&t.setColor(s),n||(t.seriesIndex=l.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<=n&&(t.dataIndex=n+(t.startIndex||0))}))},Jk.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Jk._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},vh({type:"scatter",render:function(t,e,n){var o=t.getData();this._updateSymbolDraw(o,t).updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},incrementalPrepareRender:function(t,e,n){var o=t.getData();this._updateSymbolDraw(o,t).incrementalPrepareUpdate(o),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var o=t.getData();if(this.group.dirty(),!this._finished||1e4<o.count()||!this._symbolDraw.isPersistent())return{update:!0};var l=gm().reset(t);l.progress&&l.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_getClipShape:function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,o=e.pipelineContext.large;return n&&o===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=o?new qk:new Wp,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),ph(km("scatter","circle")),yh(gm("scatter")),B(Zk,Cp),Qk.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Qk.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},Qk.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},Qk.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var l,i=Math.atan2(-n,e),a=1/0,s=-1,r=0;r<this._indicatorAxes.length;r++){var c=this._indicatorAxes[r],u=Math.abs(i-c.angle);u<a&&(l=c,s=r,a=u)}return[s,+(l&&l.coordToData(o))]},Qk.prototype.resize=function(t,e){var n=t.get("center"),o=e.getWidth(),l=e.getHeight(),i=Math.min(o,l)/2;this.cx=Cr(n[0],o),this.cy=Cr(n[1],l),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");"string"!=typeof a&&"number"!=typeof a||(a=[0,a]),this.r0=Cr(a[0],i),this.r=Cr(a[1],i),O(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},Qk.prototype.update=function(t,e){var n=this._indicatorAxes,o=this._model;O(n,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,l){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===o){var i=e.getData();O(n,function(t){t.scale.unionExtentFromData(i,i.mapDimension(t.dim))})}},this);var l=o.get("splitNumber");function i(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}O(n,function(t,e){var n=qy(t.scale,t.model).extent;Jy(t.scale,t.model);var o=t.model,a=t.scale,s=o.getMin(),r=o.getMax(),c=a.getInterval();if(null!=s&&null!=r)a.setExtent(+s,+r),a.setInterval((r-s)/l);else if(null!=s)for(;_=s+c*l,a.setExtent(+s,_),a.setInterval(c),c=i(c),_<n[1]&&isFinite(_)&&isFinite(n[1]););else if(null!=r)for(;d=r-c*l,a.setExtent(d,+r),a.setInterval(c),c=i(c),d>n[0]&&isFinite(d)&&isFinite(n[0]););else{var u=a.getTicks().length-1;l<u&&(c=i(c));var _,d=Nr((_=Math.ceil(n[1]/c)*c)-c*l);a.setExtent(d,_),a.setInterval(c)}})},Qk.dimensions=[],Qk.create=function(t,e){var n=[];return t.eachComponent("radar",function(o){var l=new Qk(o,t,e);n.push(l),o.coordinateSystem=l}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},nu.register("radar",Qk);var tg=Rm.valueAxis;function eg(t,e){return b({show:e},t)}gh({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),l=this.get("axisTick"),i=this.get("axisType"),a=this.get("axisLabel"),s=this.get("name"),r=this.get("name.show"),c=this.get("name.formatter"),u=this.get("nameGap"),_=this.get("triggerEvent"),d=C(this.get("indicator")||[],function(d){null!=d.max&&0<d.max&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var h=s;if(null!=d.color&&(h=b({color:d.color},s)),d=k(m(d),{boundaryGap:t,splitNumber:e,scale:n,axisLine:o,axisTick:l,axisType:i,axisLabel:a,name:d.text,nameLocation:"end",nameGap:u,nameTextStyle:h,triggerEvent:_},!1),r||(d.name=""),"string"==typeof c){var y=d.name;d.name=c.replace("{value}",null!=y?y:"")}else"function"==typeof c&&(d.name=c(d.name,d));var p=f(new vr(d,null,this.ecModel),op);return p.mainType="radar",p.componentIndex=this.componentIndex,p},this);this.getIndicatorModels=function(){return d}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:k({lineStyle:{color:"#bbb"}},tg.axisLine),axisLabel:eg(tg.axisLabel,!1),axisTick:eg(tg.axisTick,!1),axisType:"interval",splitLine:eg(tg.splitLine,!0),splitArea:eg(tg.splitArea,!0),indicator:[]}});var ng=["axisLine","axisTickLabel","axisName"];fh({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;O(C(e.getIndicatorAxes(),function(t){return new Hm(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(t){O(ng,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var o=t.get("shape"),l=t.getModel("splitLine"),i=t.getModel("splitArea"),a=l.getModel("lineStyle"),s=i.getModel("areaStyle"),r=l.get("show"),c=i.get("show"),u=a.get("color"),_=s.get("color");u=P(u)?u:[u],_=P(_)?_:[_];var d=[],h=[];if("circle"===o)for(var y=n[0].getTicksCoords(),p=e.cx,m=e.cy,k=0;k<y.length;k++)r&&d[R(d,u,k)].push(new Ha({shape:{cx:p,cy:m,r:y[k].coord}})),c&&k<y.length-1&&h[R(h,_,k)].push(new ja({shape:{cx:p,cy:m,r0:y[k].coord,r:y[k+1].coord}}));else{var g,f=C(n,function(t,n){var o=t.getTicksCoords();return g=null==g?o.length-1:Math.min(o.length-1,g),C(o,function(t){return e.coordToPoint(t.coord,n)})}),v=[];for(k=0;k<=g;k++){for(var T=[],E=0;E<n.length;E++)T.push(f[E][k]);T[0]&&T.push(T[0].slice()),r&&d[R(d,u,k)].push(new Xa({shape:{points:T}})),c&&v&&h[R(h,_,k-1)].push(new Ya({shape:{points:T.concat(v)}})),v=T.slice().reverse()}}var B=a.getLineStyle(),I=s.getAreaStyle();O(h,function(t,e){this.group.add(Os(t,{style:b({stroke:"none",fill:_[e%_.length]},I),silent:!0}))},this),O(d,function(t,e){this.group.add(Os(t,{style:b({fill:"none",stroke:u[e%u.length]},B),silent:!0}))},this)}function R(t,e,n){var o=n%e.length;return t[o]=t[o]||[],o}}});var og=t_.extend({type:"series.radar",dependencies:["radar"],init:function(t){og.superApply(this,"init",arguments),this.legendVisualProvider=new xk(M(this.getData,this),M(this.getRawData,this))},getInitialData:function(t,e){return Sk(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t,e,n,o){var l=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(t),s="html"===o?"<br/>":"\n";return Jr(""===a?this.name:a)+s+C(i,function(e,n){var o=l.get(l.mapDimension(e.dim),t);return Jr(e.name+" : "+o)}).join(s)},getTooltipPosition:function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,o=e.getValues(C(n.dimensions,function(t){return e.mapDimension(t)}),t,!0),l=0,i=o.length;l<i;l++)if(!isNaN(o[l])){var a=n.getIndicatorAxes();return n.coordToPoint(a[l].dataToCoord(o[l]),l)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function lg(t){return!isNaN(t[0])&&!isNaN(t[1])}function ig(t){return[t.cx,t.cy]}vh({type:"radar",render:function(t,e,n){var o=t.coordinateSystem,l=this.group,i=t.getData(),a=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle",o=t.getItemVisual(e,"color");if("none"!==n){var l=function(t){return P(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),i=dp(n,-1,-1,2,2,o),a=t.getItemVisual(e,"symbolRotate")||0;return i.attr({style:{strokeNoScale:!0},z2:100,scale:[l[0]/2,l[1]/2],rotation:a*Math.PI/180||0}),i}}function r(e,n,o,l,i,a){o.removeAll();for(var r=0;r<n.length-1;r++){var c=s(l,i);c&&(e[c.__dimIdx=r]?(c.attr("position",e[r]),yr[a?"initProps":"updateProps"](c,{position:n[r]},t,i)):c.attr("position",n[r]),o.add(c))}}function c(t){return C(t,function(t){return[o.cx,o.cy]})}i.diff(a).add(function(e){var n=i.getItemLayout(e);if(n){var o=new Ya,l=new Xa,a={shape:{points:n}};o.shape.points=c(n),l.shape.points=c(n),lr(o,a,t,e),lr(l,a,t,e);var s=new Nn,u=new Nn;s.add(l),s.add(o),s.add(u),r(l.shape.points,n,u,i,e,!0),i.setItemGraphicEl(e,s)}}).update(function(e,n){var o=a.getItemGraphicEl(n),l=o.childAt(0),s=o.childAt(1),c=o.childAt(2),u={shape:{points:i.getItemLayout(e)}};u.shape.points&&(r(l.shape.points,u.shape.points,c,i,e,!1),or(l,u,t),or(s,u,t),i.setItemGraphicEl(e,o))}).remove(function(t){l.remove(a.getItemGraphicEl(t))}).execute(),i.eachItemGraphicEl(function(t,e){var n=i.getItemModel(e),o=t.childAt(0),a=t.childAt(1),s=t.childAt(2),r=i.getItemVisual(e,"color");l.add(t),o.useStyle(b(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:r})),o.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var c=n.getModel("areaStyle"),u=n.getModel("emphasis.areaStyle"),_=c.isEmpty()&&c.parentModel.isEmpty(),d=u.isEmpty()&&u.parentModel.isEmpty();d=d&&_,a.ignore=_,a.useStyle(b(c.getAreaStyle(),{fill:r,opacity:.7})),a.hoverStyle=u.getAreaStyle();var h=n.getModel("itemStyle").getItemStyle(["color"]),y=n.getModel("emphasis.itemStyle").getItemStyle(),p=n.getModel("label"),k=n.getModel("emphasis.label");s.eachChild(function(t){t.setStyle(h),t.hoverStyle=m(y);var n=i.get(i.dimensions[t.__dimIdx],e);null!=n&&!isNaN(n)||(n=""),Xs(t.style,t.hoverStyle,p,k,{labelFetcher:i.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:n,autoColor:r,isRectText:!0})}),t.highDownOnUpdate=function(t,e){a.attr("ignore","emphasis"===e?d:_)},js(t)}),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),ph(Gk("radar")),ph(km("radar","circle")),yh(function(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],o=t.coordinateSystem;if(o){var l=o.getIndicatorAxes();O(l,function(t,i){e.each(e.mapDimension(l[i].dim),function(t,e){n[e]=n[e]||[];var l=o.dataToPoint(t,i);n[e][i]=lg(l)?l:ig(o)})}),e.each(function(t){var l=A(n[t],function(t){return lg(t)})||ig(o);n[t].push(l.slice()),e.setItemLayout(t,n[t])})}})}),_h($k("radar")),uh(function(t){var e=t.polar;if(e){P(e)||(e=[e]);var n=[];O(e,function(e,o){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],P(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}O(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})});for(var ag=[126,25],sg=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],rg=0;rg<sg.length;rg++)for(var cg=0;cg<sg[rg].length;cg++)sg[rg][cg][0]/=10.5,sg[rg][cg][1]/=-14,sg[rg][cg][0]+=ag[0],sg[rg][cg][1]+=ag[1];var ug={"\u5357\u6d77\u8bf8\u5c9b":[32,80],"\u5e7f\u4e1c":[0,-10],"\u9999\u6e2f":[10,5],"\u6fb3\u95e8":[-10,10],"\u5929\u6d25":[5,5]},_g={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},dg=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],hg=Wl(),yg={load:function(t,e,n){var o=hg(e).parsed;if(o)return o;var l,i=e.specialAreas||{},a=e.geoJSON;try{l=a?fp(a,n):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(t,e){"china"===t&&e.push(new kp("\u5357\u6d77\u8bf8\u5c9b",C(sg,function(t){return{type:"polygon",exterior:t}}),ag))}(t,l),O(l,function(e){var n=e.name;!function(t,e){if("china"===t){var n=ug[e.name];if(n){var o=e.center;o[0]+=n[0]/10.5,o[1]+=-n[1]/14}}}(t,e),function(t,e){if("world"===t){var n=_g[e.name];if(n){var o=e.center;o[0]=n[0],o[1]=n[1]}}}(t,e),function(t,e){"china"===t&&"\u53f0\u6e7e"===e.name&&e.geometries.push({type:"polygon",exterior:dg[0]})}(t,e);var o=i[n];o&&e.transformTo(o.left,o.top,o.width,o.height)}),hg(e).parsed={regions:l,boundingRect:function(t){for(var e,n=0;n<t.length;n++){var o=t[n].getBoundingRect();(e=e||o.clone()).union(o)}return e}(l)}}},pg=Wl();function mg(t,e){var n,o,l=t.svgXML;try{X(null!=(o=(n=l&&function(t,e){return(new nd).parse(t,{ignoreViewBox:!0,ignoreRootClip:!0})}(l)||{}).root))}catch(t){throw new Error("Invalid svg format\n"+t.message)}var i=n.width,a=n.height,s=n.viewBoxRect;if(e||(e=null==i||null==a?o.getBoundingRect():new Cn(0,0,0,0),null!=i&&(e.width=i),null!=a&&(e.height=a)),s){var r=hd(s,e.width,e.height),c=o;(o=new Nn).add(c),c.scale=r.scale,c.position=r.position}return o.setClipPath(new Qa({shape:e.plain()})),{root:o,boundingRect:e}}var kg={geoJSON:yg,svg:{load:function(t,e){var n=pg(e).originRoot;if(n)return{root:n,boundingRect:pg(e).boundingRect};var o=mg(e);return pg(e).originRoot=o.root,pg(e).boundingRect=o.boundingRect,o},makeGraphic:function(t,e,n){var o=pg(e),l=o.rootMap||(o.rootMap=Q()),i=l.get(n);if(i)return i;var a=o.originRoot,s=o.boundingRect;return i=o.originRootHostKey?mg(e,s).root:(o.originRootHostKey=n,a),l.set(n,i)},removeGraphic:function(t,e,n){var o=pg(e),l=o.rootMap;l&&l.removeKey(n),n===o.originRootHostKey&&(o.originRootHostKey=null)}}},gg={load:function(t,e,n){var o,l=[],i=Q(),a=Q();return O(bg(t),function(s){var r=kg[s.type].load(t,s,n);O(r.regions,function(t){var n=t.name;e&&e.hasOwnProperty(n)&&(t=t.cloneShallow(n=e[n])),l.push(t),i.set(n,t),a.set(n,t.center)});var c=r.boundingRect;c&&(o?o.union(c):o=c.clone())}),{regions:l,regionsMap:i,nameCoordMap:a,boundingRect:o||new Cn(0,0,0,0)}},makeGraphic:fg("makeGraphic"),removeGraphic:fg("removeGraphic")};function fg(t){return function(e,n){var o=bg(e),l=[];return O(o,function(o){var i=kg[o.type][t];i&&l.push(i(e,o,n))}),l}}function bg(t){return md(t)||[]}I(t_.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(t){for(var e=Sk(this,{coordDimensions:["value"],encodeDefaulter:S(Yc,this)}),n=e.mapDimension("value"),o=Q(),l=[],i=[],a=0,s=e.count();a<s;a++){var r=e.getName(a);o.set(r,!0),l.push({name:r,value:e.get(n,a),selected:Lu(e,a,"selected")})}return O(gg.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(t){var e=t.name;o.get(e)||(l.push({name:e}),i.push(e))}),this.updateSelectedMap(l),e.appendValues([],i),e},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t,e,n,o){for(var l=this.getData(),i=Yr(this.getRawValue(t)),a=l.getName(t),s=this.seriesGroup,r=[],c=0;c<s.length;c++){var u=s[c].originalData.indexOfName(a),_=l.mapDimension("value");isNaN(s[c].originalData.get(_,u))||r.push(Jr(s[c].name))}var d="html"===o?"<br/>":"\n";return r.join(", ")+d+Jr(a+" : "+i)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,o=n.getRegion(e);return o&&n.dataToPoint(o.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),Pk);var vg="\0_ec_interaction_mutex";function Tg(t,e){return!!Eg(t)[e]}function Eg(t){return t[vg]||(t[vg]={})}function Bg(t){this.pointerChecker,this._zr=t,this._opt={};var e=M,n=e(Ig,this),o=e(Rg,this),l=e(Og,this),i=e(Cg,this),a=e(Ng,this);Nt.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,s){this.disable(),this._opt=b(m(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",n),t.on("mousemove",o),t.on("mouseup",l)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",i),t.on("pinch",a))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",o),t.off("mouseup",l),t.off("mousewheel",i),t.off("pinch",a)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function Ig(t){if(!(Xt(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function Rg(t){if(this._dragging&&Mg("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Tg(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,o=this._x,l=this._y,i=e-o,a=n-l;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&Yt(t.event),Ag(this,"pan","moveOnMouseMove",t,{dx:i,dy:a,oldX:o,oldY:l,newX:e,newY:n})}}function Og(t){Xt(t)||(this._dragging=!1)}function Cg(t){var e=Mg("zoomOnMouseWheel",t,this._opt),n=Mg("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,l=Math.abs(o),i=t.offsetX,a=t.offsetY;if(0!==o&&(e||n)){if(e){var s=3<l?1.4:1<l?1.2:1.1;wg(this,"zoom","zoomOnMouseWheel",t,{scale:0<o?s:1/s,originX:i,originY:a})}if(n){var r=Math.abs(o);wg(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(0<o?1:-1)*(3<r?.4:1<r?.15:.05),originX:i,originY:a})}}}function Ng(t){Tg(this._zr,"globalPan")||wg(this,"zoom",null,t,{scale:1<t.pinchScale?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY})}function wg(t,e,n,o,l){t.pointerChecker&&t.pointerChecker(o,l.originX,l.originY)&&(Yt(o.event),Ag(t,e,n,o,l))}function Ag(t,e,n,o,l){l.isAvailableBehavior=M(Mg,null,n,o),t.trigger(e,l)}function Mg(t,e,n){var o=n[t];return!t||o&&(!D(o)||e.event[o+"Key"])}function Sg(t,e,n){var o=t.target,l=o.position;l[0]+=e,l[1]+=n,o.dirty()}function Pg(t,e,n,o){var l=t.target,i=t.zoomLimit,a=l.position,s=l.scale,r=t.zoom=t.zoom||1;if(r*=e,i){var c=i.min||0,u=i.max||1/0;r=Math.max(Math.min(u,r),c)}var _=r/t.zoom;t.zoom=r,a[0]-=(n-a[0])*(_-1),a[1]-=(o-a[1])*(_-1),s[0]*=_,s[1]*=_,l.dirty()}dh({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),I(Bg,Nt);var xg={axisPointer:1,tooltip:1,brush:1};function Dg(t,e,n){var o=e.getComponentByElement(t.topTarget),l=o&&o.coordinateSystem;return o&&o!==n&&!xg[o.mainType]&&l&&l.model!==n}function Lg(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function Ug(t,e){e.eachChild(function(e){O(e.__regions,function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")})})}function Fg(t,e){var n=new Nn;this.uid=Ir("ec_map_draw"),this._controller=new Bg(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,this._mouseDownFlag,this._mapName,this._initialized,n.add(this._regionsGroup=new Nn),n.add(this._backgroundGroup=new Nn)}Fg.prototype={constructor:Fg,draw:function(t,e,n,o,l){var i="geo"===t.mainType,a=t.getData&&t.getData();i&&e.eachComponent({mainType:"series",subType:"map"},function(e){a||e.getHostGeoModel()!==t||(a=e.getData())});var s=t.coordinateSystem;this._updateBackground(s);var r,c=this._regionsGroup,u=this.group,_=s.getTransformInfo(),d=!c.childAt(0)||l;if(d)u.transform=_.roamTransform,u.decomposeTransform(),u.dirty();else{var h=new ke;h.transform=_.roamTransform,h.decomposeTransform();var y={scale:h.scale,position:h.position};r=h.scale,or(u,y,t)}var p=_.rawScale,m=_.rawPosition;c.removeAll();var k=["itemStyle"],g=["emphasis","itemStyle"],f=["label"],b=["emphasis","label"],v=Q();O(s.regions,function(e){var n=v.get(e.name)||v.set(e.name,new Nn),o=new ss({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(o);var l,s=(P=t.getRegionModel(e.name)||t).getModel(k),_=P.getModel(g),h=Lg(s),y=Lg(_),T=P.getModel(f),E=P.getModel(b);if(a){l=a.indexOfName(e.name);var B=a.getItemVisual(l,"color",!0);B&&(h.fill=B)}function I(t){return[t[0]*p[0]+m[0],t[1]*p[1]+m[1]]}O(e.geometries,function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(I(t.exterior[n]));for(o.shape.paths.push(new Ya({segmentIgnoreThreshold:1,shape:{points:e}})),n=0;n<(t.interiors?t.interiors.length:0);++n){for(var l=t.interiors[n],i=(e=[],0);i<l.length;++i)e.push(I(l[i]));o.shape.paths.push(new Ya({segmentIgnoreThreshold:1,shape:{points:e}}))}}}),o.setStyle(h),o.style.strokeNoScale=!0,o.culling=!0;var R=T.get("show"),C=E.get("show"),N=a&&isNaN(a.get(a.mapDimension("value"),l)),w=a&&a.getItemLayout(l);if(i||N&&(R||C)||w&&w.showLabel){var A,M=i?e.name:l;(!a||0<=l)&&(A=t);var S=new Ua({position:I(e.center.slice()),scale:[1/u.scale[0],1/u.scale[1]],z2:10,silent:!0});Xs(S.style,S.hoverStyle={},T,E,{labelFetcher:A,labelDataIndex:M,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),d||or(S,{scale:[1/r[0],1/r[1]]},t),n.add(S)}if(a)a.setItemGraphicEl(l,n);else{var P=t.getRegionModel(e.name);o.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:e.name,region:P&&P.option||{}}}(n.__regions||(n.__regions=[])).push(e),n.highDownSilentOnTouch=!!t.get("selectedMode"),js(n,y),c.add(n)}),this._updateController(t,e,n),function(t,e,n,o,l){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",function(){t._mouseDownFlag=!0}),n.on("click",function(i){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var a=i.target;!a.__regions;)a=a.parent;if(a){var s={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:C(a.__regions,function(t){return{name:t.name,from:l.uid}})};s[e.mainType+"Id"]=e.id,o.dispatchAction(s),Ug(e,n)}}}))}(this,t,c,n,o),Ug(t,c)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&gg.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&O(gg.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateController:function(t,e,n){var o=t.coordinateSystem,l=this._controller,i=this._controllerHost;i.zoomLimit=t.get("scaleLimit"),i.zoom=o.getZoom(),l.enable(t.get("roam")||!1);var a=t.mainType;function s(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}l.off("pan").on("pan",function(t){this._mouseDownFlag=!1,Sg(i,t.dx,t.dy),n.dispatchAction(f(s(),{dx:t.dx,dy:t.dy}))},this),l.off("zoom").on("zoom",function(t){if(this._mouseDownFlag=!1,Pg(i,t.scale,t.originX,t.originY),n.dispatchAction(f(s(),{zoom:t.scale,originX:t.originX,originY:t.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){"text"===t.type&&t.attr("scale",[1/e[0],1/e[1]])})}},this),l.setPointerChecker(function(e,l,i){return o.getViewRectAfterRoam().contain(l,i)&&!Dg(e,n,t)})}};var Hg="__seriesMapHighDown",Vg="__seriesMapCallKey";function Gg(t){var e=this[Hg];e&&e.recordVersion===this[Vg]&&jg(e,t)}function jg(t,e){var n=t.circle,o=t.labelModel,l=t.hoverLabelModel,i=t.emphasisText,a=t.normalText;e?(n.style.extendFrom(zs({},l,{text:l.get("show")?i:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(zs(n.style,o,{text:o.get("show")?a:null,textPosition:o.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function Wg(t,e,n){var o=t.getZoom(),l=t.getCenter(),i=e.zoom,a=t.dataToPoint(l);if(null!=e.dx&&null!=e.dy&&(a[0]-=e.dx,a[1]-=e.dy,l=t.pointToData(a),t.setCenter(l)),null!=i){if(n){var s=n.min||0,r=n.max||1/0;i=Math.max(Math.min(o*i,r),s)/o}t.scale[0]*=i,t.scale[1]*=i;var c=t.position,u=(e.originX-c[0])*(i-1),_=(e.originY-c[1])*(i-1);c[0]-=u,c[1]-=_,t.updateTransform(),l=t.pointToData(a),t.setCenter(l),t.setZoom(i*o)}return{center:t.getCenter(),zoom:t.getZoom()}}vh({type:"map",render:function(t,e,n,o){if(!o||"mapToggleSelect"!==o.type||o.from!==this.uid){var l=this.group;if(l.removeAll(),!t.getHostGeoModel()){if(o&&"geoRoam"===o.type&&"series"===o.componentType&&o.seriesId===t.id)(i=this._mapDraw)&&l.add(i.group);else if(t.needsDrawMap){var i=this._mapDraw||new Fg(n,!0);l.add(i.group),i.draw(t,e,n,this,o),this._mapDraw=i}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var o=t.originalData,l=this.group;o.each(o.mapDimension("value"),function(e,n){if(!isNaN(e)){var i=o.getItemLayout(n);if(i&&i.point){var a=i.point,s=i.offset,r=new Ha({style:{fill:t.getData().getVisual("color")},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:2)});if(!s){var c=t.mainSeries.getData(),u=o.getName(n),_=c.indexOfName(u),d=o.getItemModel(n),h=d.getModel("label"),y=d.getModel("emphasis.label"),p=c.getItemGraphicEl(_),m=j(t.getFormattedLabel(_,"normal"),u),k=j(t.getFormattedLabel(_,"emphasis"),m),g=p[Hg],b=Math.random();if(!g){g=p[Hg]={};var v=S(Gg,!0),T=S(Gg,!1);p.on("mouseover",v).on("mouseout",T).on("emphasis",v).on("normal",T)}f(g,{recordVersion:p[Vg]=b,circle:r,labelModel:h,hoverLabelModel:y,emphasisText:k,normalText:m}),jg(g,!1)}l.add(r)}}})}}),dh({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var o=e.coordinateSystem;if("geo"===o.type){var l=Wg(o,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(l.center),e.setZoom&&e.setZoom(l.zoom),"series"===n&&O(e.seriesGroup,function(t){t.setCenter(l.center),t.setZoom(l.zoom)})}})});var Kg=Tt;function Yg(){ke.call(this)}function Xg(t){this.name=t,this.zoomLimit,ke.call(this),this._roamTransformable=new Yg,this._rawTransformable=new Yg,this._center,this._zoom}function $g(t,e,n,o){var l=n.seriesModel,i=l?l.coordinateSystem:null;return i===this?i[t](o):null}function zg(t,e,n,o){Xg.call(this,t),this.map=e;var l=gg.load(e,n);this._nameCoordMap=l.nameCoordMap,this._regionsMap=l.regionsMap,this._invertLongitute=null==o||o,this.regions=l.regions,this._rect=l.boundingRect}function qg(t,e,n,o){var l=n.geoModel,i=n.seriesModel,a=l?l.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[t](o):null}function Jg(t,e){var n=t.get("boundingCoords");if(null!=n){var o=n[0],l=n[1];isNaN(o[0])||isNaN(o[1])||isNaN(l[0])||isNaN(l[1])||this.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1])}var i,a=this.getBoundingRect(),s=t.get("layoutCenter"),r=t.get("layoutSize"),c=e.getWidth(),u=e.getHeight(),_=a.width/a.height*this.aspectScale,d=!1;if(s&&r&&(s=[Cr(s[0],c),Cr(s[1],u)],r=Cr(r,Math.min(c,u)),isNaN(s[0])||isNaN(s[1])||isNaN(r)||(d=!0)),d){var h={};1<_?(h.width=r,h.height=r/_):(h.height=r,h.width=r*_),h.y=s[1]-h.height/2,h.x=s[0]-h.width/2}else(i=t.getBoxLayoutParams()).aspect=_,h=yc(i,{width:c,height:u});this.setViewRect(h.x,h.y,h.width,h.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Zg(t,e){O(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}I(Yg,ke),Xg.prototype={constructor:Xg,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,o){return this._rect=new Cn(t,e,n,o),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,o){this.transformTo(t,e,n,o),this._viewRect=new Cn(t,e,n,o)},transformTo:function(t,e,n,o){var l=this.getBoundingRect(),i=this._rawTransformable;i.transform=l.calculateTransform(new Cn(t,e,n,o)),i.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),l=this.getZoom();o=Tt([],o,t),n=Tt([],n,t),e.origin=o,e.position=[n[0]-o[0],n[1]-o[1]],e.scale=[l,l],this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable,e=this._rawTransformable;(e.parent=t).updateTransform(),e.updateTransform(),se(this.transform||(this.transform=[]),e.transform||ie()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],de(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var t=this._roamTransformable.transform,e=this._rawTransformable;return{roamTransform:t?K(t):ie(),rawScale:K(e.scale),rawPosition:K(e.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var o=e?this._rawTransform:this.transform;return n=n||[],o?Kg(n,t,o):it(n,t)},pointToData:function(t){var e=this.invTransform;return e?Kg([],t,e):[t[0],t[1]]},convertToPixel:S($g,"dataToPoint"),convertFromPixel:S($g,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},I(Xg,ke),zg.prototype={constructor:zg,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,o){var l=this.getBoundingRect(),i=this._invertLongitute;l=l.clone(),i&&(l.y=-l.y-l.height);var a=this._rawTransformable;if(a.transform=l.calculateTransform(new Cn(t,e,n,o)),a.decomposeTransform(),i){var s=a.scale;s[1]=-s[1]}a.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return Xg.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:S(qg,"dataToPoint"),convertFromPixel:S(qg,"pointToData")},I(zg,Xg);var Qg={dimensions:zg.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(t,o){var l=t.get("map"),i=t.get("aspectScale"),a=!0,s=md(l);s&&s[0]&&"svg"===s[0].type?(null==i&&(i=1),a=!1):null==i&&(i=.75);var r=new zg(l+o,l,t.get("nameMap"),a);r.aspectScale=i,r.zoomLimit=t.get("scaleLimit"),n.push(r),Zg(r,t),(t.coordinateSystem=r).model=t,r.resize=Jg,r.resize(t,e)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}});var o={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();o[e]=o[e]||[],o[e].push(t)}}),O(o,function(t,o){var l=new zg(o,o,g(C(t,function(t){return t.get("nameMap")})));l.zoomLimit=G.apply(null,C(t,function(t){return t.get("scaleLimit")})),n.push(l),l.resize=Jg,l.aspectScale=t[0].get("aspectScale"),l.resize(t[0],e),O(t,function(t){Zg(t.coordinateSystem=l,t)})}),n},getFilledRegions:function(t,e,n){for(var o=(t||[]).slice(),l=Q(),i=0;i<o.length;i++)l.set(o[i].name,o[i]);return O(gg.load(e,n).regions,function(t){var e=t.name;l.get(e)||o.push({name:e})}),o}};hh("geo",Qg),yh(function(t){var e={};t.eachSeriesByType("map",function(n){var o=n.getMapType();if(!n.getHostGeoModel()&&!e[o]){var l={};O(n.seriesGroup,function(e){var n=e.coordinateSystem,o=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&o.each(o.mapDimension("value"),function(t,e){var i=o.getName(e),a=n.getRegion(i);if(a&&!isNaN(t)){var s=l[i]||0,r=n.dataToPoint(a.center);l[i]=s+1,o.setItemLayout(e,{point:r,offset:s})}})});var i=n.getData();i.each(function(t){var e=i.getName(t),n=i.getItemLayout(t)||{};n.showLabel=!l[e],i.setItemLayout(t,n)}),e[o]=!0}})}),ph(function(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),n=t.getModel("itemStyle"),o=n.get("areaColor"),l=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:o,color:l})})}),_h(Ed.PROCESSOR.STATISTIC,function(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),o=n?"o"+n.id:"i"+t.getMapType();(e[o]=e[o]||[]).push(t)}),O(e,function(t,e){for(var n=function(t,e){var n={};return O(t,function(t){t.each(t.mapDimension("value"),function(e,o){var l="ec-"+t.getName(o);n[l]=n[l]||[],isNaN(e)||n[l].push(e)})}),t[0].map(t[0].mapDimension("value"),function(o,l){for(var i="ec-"+t[0].getName(l),a=0,s=1/0,r=-1/0,c=n[i].length,u=0;u<c;u++)s=Math.min(s,n[i][u]),r=Math.max(r,n[i][u]),a+=n[i][u];return 0===c?NaN:"min"===e?s:"max"===e?r:"average"===e?a/c:a})}(C(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),o=0;o<t.length;o++)t[o].originalData=t[o].getData();for(o=0;o<t.length;o++)(t[o].seriesGroup=t)[o].needsDrawMap=0===o&&!t[o].getHostGeoModel(),t[o].setData(n.cloneShallow()),t[o].mainSeries=t[0]})}),uh(function(t){var e=[];O(t.series,function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,b(t,t.mapLocation))})}),Vk("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var tf=O,ef="\0__link_datas",nf="\0__link_mainData";function of(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,cf(e,n,t),tf(n,function(n){tf(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,S(lf,t))})}),e.wrapMethod("cloneShallow",S(sf,t)),tf(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,S(af,t))}),X(n[e.dataType]===e)}function lf(t,e){if(function(t){return t[nf]===t}(this)){var n=f({},this[ef]);cf(n[this.dataType]=e,n,t)}else uf(e,this.dataType,this[nf],t);return e}function af(t,e){return t.struct&&t.struct.update(this),e}function sf(t,e){return tf(e[ef],function(n,o){n!==e&&uf(n.cloneShallow(),o,e,t)}),e}function rf(t){var e=this[nf];return null==t||null==e?e:e[ef][t]}function cf(t,e,n){t[ef]={},tf(e,function(e,o){uf(e,o,t,n)})}function uf(t,e,n,o){(n[ef][e]=t)[nf]=n,t.dataType=e,o.struct&&(t[o.structAttr]=o.struct,o.struct[o.datasAttr[e]]=t),t.getLinkedData=rf}function _f(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e}function df(t){this.root,this.data,this._nodes=[],this.hostModel=t}function hf(t,e){var n=t.isExpand?t.children:[],o=t.parentNode.children,l=t.hierNode.i?o[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,o=0,l=0;0<=--n;){var i=e[n];i.hierNode.prelim+=o,i.hierNode.modifier+=o,l+=i.hierNode.change,o+=i.hierNode.shift+l}}(t);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;l?(t.hierNode.prelim=l.hierNode.prelim+e(t,l),t.hierNode.modifier=t.hierNode.prelim-i):t.hierNode.prelim=i}else l&&(t.hierNode.prelim=l.hierNode.prelim+e(t,l));t.parentNode.hierNode.defaultAncestor=function(t,e,n,o){if(e){for(var l=t,i=t,a=i.parentNode.children[0],s=e,r=l.hierNode.modifier,c=i.hierNode.modifier,u=a.hierNode.modifier,_=s.hierNode.modifier;s=kf(s),i=gf(i),s&&i;){l=kf(l),a=gf(a),l.hierNode.ancestor=t;var d=s.hierNode.prelim+_-i.hierNode.prelim-c+o(s,i);0<d&&(ff((y=t,p=n,(h=s).hierNode.ancestor.parentNode===y.parentNode?h.hierNode.ancestor:p),t,d),c+=d,r+=d),_+=s.hierNode.modifier,c+=i.hierNode.modifier,r+=l.hierNode.modifier,u+=a.hierNode.modifier}s&&!kf(l)&&(l.hierNode.thread=s,l.hierNode.modifier+=_-r),i&&!gf(a)&&(a.hierNode.thread=i,a.hierNode.modifier+=c-u,n=t)}var h,y,p;return n}(t,l,t.parentNode.hierNode.defaultAncestor||o[0],e)}function yf(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function pf(t){return arguments.length?t:bf}function mf(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function kf(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function gf(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function ff(t,e,n){var o=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=o,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=o}function bf(t,e){return t.parentNode===e.parentNode?1:2}_f.prototype={constructor:_f,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),D(t=t||{})&&(t={order:t});var o,l=t.order||"preorder",i=this[t.attr||"children"];"preorder"===l&&(o=e.call(n,this));for(var a=0;!o&&a<i.length;a++)i[a].eachNode(t,e,n);"postorder"===l&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(t+1),o.height>e&&(e=o.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,o=n.length;e<o;e++){var l=n[e].getNodeById(t);if(l)return l}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,o=n.length;e<o;e++){var l=n[e].contains(t);if(l)return l}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},setVisual:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},df.prototype={constructor:df,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,o=e.length;n<o;n++)e[n].dataIndex=-1;for(n=0,o=t.count();n<o;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},df.createTree=function(t,e,n){var o=new df(e),l=[],i=1;!function t(e,n){var a=e.value;i=Math.max(i,P(a)?a.length:1),l.push(e);var s=new _f(e.name,o);n?function(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}(s,n):o.root=s,o._nodes.push(s);var r=e.children;if(r)for(var c=0;c<r.length;c++)t(r[c],s)}(t),o.root.updateDepthAndHeight(0);var a=Qh(l,{coordDimensions:["value"],dimensionsCount:i}),s=new Fh(a,e);return s.initData(l),n&&n(s),of({mainData:s,struct:o,structAttr:"tree"}),o.update(),o},t_.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n=new vr(t.leaves||{},this,this.ecModel),o=df.createTree(e,this,function(t){t.wrapMethod("getItemModel",function(t,e){var l=o.getNodeByDataIndex(e);return l.children.length&&l.isExpand||(t.parentModel=n),t})}),l=0;o.eachNode("preorder",function(t){t.depth>l&&(l=t.depth)});var i=t.expandAndCollapse&&0<=t.initialTreeDepth?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=i}),o.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],o=e.getNodeByDataIndex(t),l=o.getValue(),i=o.name;o&&o!==n;)i=o.parentNode.name+"."+i,o=o.parentNode;return Jr(i+(isNaN(l)||null==l?"":" : "+l))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var vf=vs({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.childPoints,o=n.length,l=e.parentPoint,i=n[0],a=n[o-1];if(1===o)return t.moveTo(l[0],l[1]),void t.lineTo(i[0],i[1]);var s=e.orient,r="TB"===s||"BT"===s?0:1,c=1-r,u=Cr(e.forkPosition,1),_=[];_[r]=l[r],_[c]=l[c]+(a[c]-l[c])*u,t.moveTo(l[0],l[1]),t.lineTo(_[0],_[1]),t.moveTo(i[0],i[1]),_[r]=i[r],t.lineTo(_[0],_[1]),_[r]=a[r],t.lineTo(_[0],_[1]),t.lineTo(a[0],a[1]);for(var d=1;d<o-1;d++){var h=n[d];t.moveTo(h[0],h[1]),_[r]=h[r],t.lineTo(_[0],_[1])}}});function Tf(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function Ef(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),!1===t.isExpand&&0!==t.children.length?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function Bf(t,e,n,o,l,i){var a=!n,s=t.tree.getNodeByDataIndex(e),r=s.getModel(),c=(i=Ef(s,r,i),t.tree.root),u=s.parentNode===c?s:s.parentNode||s,_=t.getItemGraphicEl(u.dataIndex),d=u.getLayout(),h=_?{x:_.position[0],y:_.position[1],rawX:_.__radialOldRawX,rawY:_.__radialOldRawY}:d,y=s.getLayout();a?(n=new Pp(t,e,i)).attr("position",[h.x,h.y]):n.updateData(t,e,i),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=y.rawX,n.__radialRawY=y.rawY,o.add(n),t.setItemGraphicEl(e,n),or(n,{position:[y.x,y.y]},l);var p=n.getSymbolPath();if("radial"===i.layout){var m,k,g=c.children[0],f=g.getLayout(),v=g.children.length;if(y.x===f.x&&!0===s.isExpand){var T={};T.x=(g.children[0].getLayout().x+g.children[v-1].getLayout().x)/2,T.y=(g.children[0].getLayout().y+g.children[v-1].getLayout().y)/2,(m=Math.atan2(T.y-f.y,T.x-f.x))<0&&(m=2*Math.PI+m),(k=T.x<f.x)&&(m-=Math.PI)}else(m=Math.atan2(y.y-f.y,y.x-f.x))<0&&(m=2*Math.PI+m),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(k=y.x<f.x)&&(m-=Math.PI):(k=y.x>f.x)||(m-=Math.PI);var E=k?"left":"right",B=i.labelModel.get("rotate"),I=B*(Math.PI/180);p.setStyle({textPosition:i.labelModel.get("position")||E,textRotation:null==B?-m:I,textOrigin:"center",verticalAlign:"middle"})}!function(t,e,n,o,l,i,a,s,r){var c=r.edgeShape,u=o.__edge;if("curve"===c)e.parentNode&&e.parentNode!==n&&or(u=u||(o.__edge=new is({shape:Rf(r,l,l),style:b({opacity:0,strokeNoScale:!0},r.lineStyle)})),{shape:Rf(r,i,a),style:b({opacity:1},r.lineStyle)},t);else if("polyline"===c&&"orthogonal"===r.layout&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var _=e.children,d=[],h=0;h<_.length;h++){var y=_[h].getLayout();d.push([y.x,y.y])}or(u=u||(o.__edge=new vf({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:r.orient,forkPosition:r.edgeForkPosition},style:b({opacity:0,strokeNoScale:!0},r.lineStyle)})),{shape:{parentPoint:[a.x,a.y],childPoints:d},style:b({opacity:1},r.lineStyle)},t)}s.add(u)}(l,s,c,n,h,d,y,o,i)}function If(t,e,n,o,l,i){for(var a,s=t.tree.getNodeByDataIndex(e),r=t.tree.root,c=s.getModel(),u=(i=Ef(s,c,i),s.parentNode===r?s:s.parentNode||s),_=i.edgeShape;null==(a=u.getLayout());)u=u.parentNode===r?u:u.parentNode||u;or(n,{position:[a.x+1,a.y+1]},l,function(){o.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var d=t.getItemGraphicEl(u.dataIndex).__edge,h=n.__edge||(!1===u.isExpand||1===u.children.length?d:void 0);_=i.edgeShape,h&&("curve"===_?or(h,{shape:Rf(i,a,a),style:{opacity:0}},l,function(){o.remove(h)}):"polyline"===_&&"orthogonal"===i.layout&&or(h,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},l,function(){o.remove(h)}))}function Rf(t,e,n){var o,l,i,a,s,r,c,u,_=t.orient;if("radial"!==t.layout)return s=e.x,c=e.y,r=n.x,u=n.y,"LR"!==_&&"RL"!==_||(o=s+(r-s)*t.curvature,l=c,i=r+(s-r)*t.curvature,a=u),"TB"!==_&&"BT"!==_||(o=s,l=c+(u-c)*t.curvature,i=r,a=u+(c-u)*t.curvature),{x1:s,y1:c,x2:r,y2:u,cpx1:o,cpy1:l,cpx2:i,cpy2:a};s=e.rawX,c=e.rawY,r=n.rawX,u=n.rawY;var d=mf(s,c),h=mf(s,c+(u-c)*t.curvature),y=mf(r,u+(c-u)*t.curvature),p=mf(r,u);return{x1:d.x,y1:d.y,x2:p.x,y2:p.y,cpx1:h.x,cpy1:h.y,cpx2:y.x,cpy2:y.y}}function Of(t,e){for(var n,o=[t];n=o.pop();)if(e(n),n.isExpand){var l=n.children;if(l.length)for(var i=l.length-1;0<=i;i--)o.push(l[i])}}function Cf(t,e,n){if(t&&0<=E(e,t.type)){var o=n.getData().tree.root,l=t.targetNode;if("string"==typeof l&&(l=o.getNodeById(l)),l&&o.contains(l))return{node:l};var i=t.targetNodeId;if(null!=i&&(l=o.getNodeById(i)))return{node:l}}}function Nf(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function wf(t,e){return 0<=E(Nf(t),e)}function Af(t,e){for(var n=[];t;){var o=t.dataIndex;n.push({name:t.name,dataIndex:o,value:e.getRawValue(o)}),t=t.parentNode}return n.reverse(),n}vh({type:"tree",init:function(t,e){this._oldTree,this._mainGroup=new Nn,this._controller=new Bg(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,o){var l=t.getData(),i=t.layoutInfo,a=this._mainGroup,s=t.get("layout");"radial"===s?a.attr("position",[i.x+i.width/2,i.y+i.height/2]):a.attr("position",[i.x,i.y]),this._updateViewCoordSys(t,i,s),this._updateController(t,e,n);var r=this._data,c={expandAndCollapse:t.get("expandAndCollapse"),layout:s,edgeShape:t.get("edgeShape"),edgeForkPosition:t.get("edgeForkPosition"),orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};l.diff(r).add(function(e){Tf(l,e)&&Bf(l,e,null,a,t,c)}).update(function(e,n){var o=r.getItemGraphicEl(n);Tf(l,e)?Bf(l,e,o,a,t,c):o&&If(r,n,o,a,t,c)}).remove(function(e){var n=r.getItemGraphicEl(e);n&&If(r,e,n,a,t,c)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===c.expandAndCollapse&&l.eachItemGraphicEl(function(e,o){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:o})})}),this._data=l},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each(function(t){var o=e.getItemLayout(t);!o||isNaN(o.x)||isNaN(o.y)||n.push([+o.x,+o.y])});var o=[],l=[];Li(n,o,l);var i=this._min,a=this._max;l[0]-o[0]==0&&(o[0]=i?i[0]:o[0]-1,l[0]=a?a[0]:l[0]+1),l[1]-o[1]==0&&(o[1]=i?i[1]:o[1]-1,l[1]=a?a[1]:l[1]+1);var s=t.coordinateSystem=new Xg;s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),s.setCenter(t.get("center")),s.setZoom(t.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=o,this._max=l},_updateController:function(t,e,n){var o=this._controller,l=this._controllerHost,i=this.group;o.setPointerChecker(function(e,o,l){var a=i.getBoundingRect();return a.applyTransform(i.transform),a.contain(o,l)&&!Dg(e,n,t)}),o.enable(t.get("roam")),l.zoomLimit=t.get("scaleLimit"),l.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(e){Sg(l,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})},this).on("zoom",function(e){Pg(l,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),o=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",o)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,o=e.scale,l=o&&o[0]||1;return((e.getZoom()-1)*n+1)/l},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),dh({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,o=e.getData().tree.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),dh({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=Wg(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})}),ph(km("tree","circle")),yh(function(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var n=function(t,e){return yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var o=t.get("layout"),l=0,i=0,a=null;a="radial"===o?(l=2*Math.PI,i=Math.min(n.height,n.width)/2,pf(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(l=n.width,i=n.height,pf());var s=t.getData().tree.root,r=s.children[0];if(r){!function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,o=[t];e=o.pop();)if(n=e.children,e.isExpand&&n.length)for(var l=n.length-1;0<=l;l--){var i=n[l];i.hierNode={defaultAncestor:null,ancestor:i,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},o.push(i)}}(s),function(t,e,n){for(var o,l=[t],i=[];o=l.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)l.push(a[s])}for(;o=i.pop();)e(o,n)}(r,hf,a),s.hierNode.modifier=-r.hierNode.prelim,Of(r,yf);var c=r,u=r,_=r;Of(r,function(t){var e=t.getLayout().x;e<c.getLayout().x&&(c=t),e>u.getLayout().x&&(u=t),t.depth>_.depth&&(_=t)});var d=c===u?1:a(c,u)/2,h=d-c.getLayout().x,y=0,p=0,m=0,k=0;if("radial"===o)y=l/(u.getLayout().x+d+h),p=i/(_.depth-1||1),Of(r,function(t){m=(t.getLayout().x+h)*y,k=(t.depth-1)*p;var e=mf(m,k);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:k},!0)});else{var g=t.getOrient();"RL"===g||"LR"===g?(p=i/(u.getLayout().x+d+h),y=l/(_.depth-1||1),Of(r,function(t){k=(t.getLayout().x+h)*p,m="LR"===g?(t.depth-1)*y:l-(t.depth-1)*y,t.setLayout({x:m,y:k},!0)})):"TB"!==g&&"BT"!==g||(y=l/(u.getLayout().x+d+h),p=i/(_.depth-1||1),Of(r,function(t){m=(t.getLayout().x+h)*y,k="TB"===g?(t.depth-1)*p:i-(t.depth-1)*p,t.setLayout({x:m,y:k},!0)}))}}}(t,e)})}),t_.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;O(e.children,function(e){t(e);var o=e.value;P(o)&&(o=o[0]),n+=o});var o=e.value;P(o)&&(o=o[0]),null!=o&&!isNaN(o)||(o=n),o<0&&(o=0),P(e.value)?e.value[0]=o:e.value=o}(n);var o=t.levels||[],l=new vr({itemStyle:this.designatedVisualItemStyle={}},this,e),i=C((o=t.levels=function(t,e){var n,o=e.get("color");if(o)return O(t=t||[],function(t){var e=new vr(t),o=e.get("color");(e.get("itemStyle.color")||o&&"none"!==o)&&(n=!0)}),n||((t[0]||(t[0]={})).color=o.slice()),t}(o,e))||[],function(t){return new vr(t,l,e)},this),a=df.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=a.getNodeByDataIndex(e),o=i[n.depth];return t.parentModel=o||l,t})});return a.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),o=P(n)?Yr(n[0]):Yr(n);return Jr(e.getName(t)+": "+o)},getDataParams:function(t){var e=t_.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=Af(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},f(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=Q(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});function Mf(t){this.group=new Nn,t.add(this.group)}function Sf(t,e,n,o,l,i){var a=[[l?t:t-5,e],[t+n,e],[t+n,e+o],[l?t:t-5,e+o]];return i||a.splice(2,0,[t+n+5,e+o/2]),l||a.push([t,e+o/2]),a}function Pf(t){var e=jf(t);return e.stroke=e.fill=e.lineWidth=null,e}Mf.prototype={constructor:Mf,render:function(t,e,n,o){var l=t.getModel("breadcrumb"),i=this.group;if(i.removeAll(),l.get("show")&&n){var a=l.getModel("itemStyle"),s=a.getModel("textStyle"),r={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,r,s),this._renderContent(t,r,a,s,o),pc(i,r.pos,r.box)}},_prepare:function(t,e,n){for(var o=t;o;o=o.parentNode){var l=o.getModel().get("name"),i=n.getTextRect(l),a=Math.max(i.width+16,e.emptyItemWidth);e.totalWidth+=a+8,e.renderList.push({node:o,text:l,width:a})}},_renderContent:function(t,e,n,o,l){for(var i,a,s=0,r=e.emptyItemWidth,c=t.get("breadcrumb.height"),u=function(t,e,n){var o=e.width,l=e.height,i=Cr(t.x,o),a=Cr(t.y,l),s=Cr(t.x2,o),r=Cr(t.y2,l);return(isNaN(i)||isNaN(parseFloat(t.x)))&&(i=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=o),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(r)||isNaN(parseFloat(t.y2)))&&(r=l),n=$r(n||0),{width:Math.max(s-i-n[1]-n[3],0),height:Math.max(r-a-n[0]-n[2],0)}}(e.pos,e.box),_=e.totalWidth,d=e.renderList,h=d.length-1;0<=h;h--){var y=d[h],p=y.node,m=y.width,k=y.text;_>u.width&&(_-=m-r,m=r,k=null);var g=new Ya({shape:{points:Sf(s,0,m,c,h===d.length-1,0===h)},style:b(n.getItemStyle(),{lineJoin:"bevel",text:k,textFill:o.getTextColor(),textFont:o.getFont()}),z:10,onclick:S(l,p)});this.group.add(g),i=t,a=p,g.eventData={componentType:"series",componentSubType:"treemap",componentIndex:i.componentIndex,seriesIndex:i.componentIndex,seriesName:i.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&Af(a,i)},s+=m+8}},remove:function(){this.group.removeAll()}};var xf=M,Df=Nn,Lf=Qa,Uf=O,Ff=["label"],Hf=["emphasis","label"],Vf=["upperLabel"],Gf=["emphasis","upperLabel"],jf=ii([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function Wf(t,e,n,o,l,i,a,s,r,c){if(a){var u=a.getLayout(),_=t.getData();if(_.setItemGraphicEl(a.dataIndex,null),u&&u.isInView){var d=u.width,h=u.height,y=u.borderWidth,p=u.invisible,k=a.getRawIndex(),g=s&&s.getRawIndex(),b=a.viewChildren,v=u.upperHeight,T=b&&b.length,E=a.getModel("itemStyle"),B=a.getModel("emphasis.itemStyle"),I=M("nodeGroup",Df);if(I){if(r.add(I),I.attr("position",[u.x||0,u.y||0]),I.__tmNodeWidth=d,I.__tmNodeHeight=h,u.isAboveViewRoot)return I;var R=a.getModel(),O=M("background",Lf,c,1);if(O&&function(e,n,o){if(n.dataIndex=a.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:d,height:h}),p)N(n);else{n.invisible=!1;var l=a.getVisual("borderColor",!0),i=B.get("borderColor"),s=Pf(E);s.fill=l;var r=jf(B);if(r.fill=i,o){var c=d-2*y;w(s,r,l,c,v,{x:y,y:0,width:c,height:v})}else s.text=r.text=null;n.setStyle(s),Ls(n,r)}e.add(n)}(I,O,T&&u.upperLabelHeight),T)Ks(I)&&Ws(I,!1),O&&(Ws(O,!0),_.setItemGraphicEl(a.dataIndex,O));else{var C=M("content",Lf,c,2);C&&function(e,n){n.dataIndex=a.dataIndex,n.seriesIndex=t.seriesIndex;var o=Math.max(d-2*y,0),l=Math.max(h-2*y,0);if(n.culling=!0,n.setShape({x:y,y:y,width:o,height:l}),p)N(n);else{n.invisible=!1;var i=a.getVisual("color",!0),s=Pf(E);s.fill=i;var r=jf(B);w(s,r,i,o,l),n.setStyle(s),Ls(n,r)}e.add(n)}(I,C),O&&Ks(O)&&Ws(O,!1),Ws(I,!0),_.setItemGraphicEl(a.dataIndex,I)}return I}}}function N(t){t.invisible||i.push(t)}function w(e,n,o,l,i,s){var r=R.get("name"),c=R.getModel(s?Vf:Ff),_=R.getModel(s?Gf:Hf),d=c.getShallow("show");Xs(e,n,c,_,{defaultText:d?r:null,autoColor:o,isRectText:!0,labelFetcher:t,labelDataIndex:a.dataIndex,labelProp:s?"upperLabel":"label"}),A(e,s,u),A(n,s,u),s&&(e.textRect=m(s)),e.truncate=d&&c.get("ellipsis")?{outerWidth:l,outerHeight:i,minChar:2}:null}function A(e,n,o){var l=e.text;if(!n&&o.isLeafRoot&&null!=l){var i=t.get("drillDownIcon",!0);e.text=i?i+" "+l:l}}function M(t,i,s,r){var c=null!=g&&n[t][g],u=l[t];return c?(n[t][g]=null,function(t,e,n){(t[k]={}).old="nodeGroup"===n?e.position.slice():f({},e.shape)}(u,c,t)):p||((c=new i({z:function(t,e){var n=10*t+e;return(n-1)/n}(s,r)})).__tmDepth=s,function(t,e,n){var i=t[k]={},s=a.parentNode;if(s&&(!o||"drillDown"===o.direction)){var r=0,c=0,u=l.background[s.getRawIndex()];!o&&u&&u.old&&(r=u.old.width,c=u.old.height),i.old="nodeGroup"===n?[0,c]:{x:r,y:c,width:0,height:0}}i.fadein="nodeGroup"!==n}(u,0,c.__tmStorageName=t)),e[t][k]=c}}vh({type:"treemap",init:function(t,e){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(t,e,n,o){if(!(E(e.findComponents({mainType:"series",subType:"treemap",query:o}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var l=Cf(o,["treemapZoomToNode","treemapRootToNode"],t),i=o&&o.type,a=t.layoutInfo,s=!this._oldTree,r=this._storage,c="treemapRootToNode"===i&&l&&r?{rootNodeGroup:r.nodeGroup[l.node.getRawIndex()],direction:o.direction}:null,u=this._giveContainerGroup(a),_=this._doRender(u,t,c);s||i&&"treemapZoomToNode"!==i&&"treemapRootToNode"!==i?_.renderFinally():this._doAnimation(u,_,t,c),this._resetController(n),this._renderBreadcrumb(t,n,l)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new Df,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){var o=e.getData().tree,l=this._oldTree,i={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,r=[],c=S(Wf,e,a,s,n,i,r);!function t(e,n,o,l,i){function a(t){return t.getId()}function s(a,s){var r=null!=a?e[a]:null,u=null!=s?n[s]:null,_=c(r,u,o,i);_&&t(r&&r.viewChildren||[],u&&u.viewChildren||[],_,l,i+1)}l?Uf(n=e,function(t,e){t.isRemoved()||s(e,e)}):new Eh(n,e,a,a).add(s).update(s).remove(S(s,null)).execute()}(o.root?[o.root]:[],l&&l.root?[l.root]:[],t,o===l||!l,0);var u,_,d=(_={nodeGroup:[],background:[],content:[]},(u=s)&&Uf(u,function(t,e){var n=_[e];Uf(t,function(t){t&&(n.push(t),t.__tmWillDelete=1)})}),_);return this._oldTree=o,this._storage=a,{lastsForAnimation:i,willDeleteEls:d,renderFinally:function(){Uf(d,function(t){Uf(t,function(t){t.parent&&t.parent.remove(t)})}),Uf(r,function(t){t.invisible=!0,t.dirty()})}}},_doAnimation:function(t,e,n,o){if(n.get("animation")){var l=n.get("animationDurationUpdate"),i=n.get("animationEasing"),a=function(){var t,e=[],n={};return{add:function(t,o,l,i,a){return D(i)&&(a=i,i=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:o,time:l,delay:i,easing:a}),!0)},done:function(e){return t=e,this},start:function(){for(var o=e.length,l=0,i=e.length;l<i;l++){var a=e[l];a.el.animateTo(a.target,a.time,a.delay,a.easing,s)}return this;function s(){--o||(e.length=0,n={},t&&t())}}}}();Uf(e.willDeleteEls,function(t,e){Uf(t,function(t,n){if(!t.invisible){var s,r=t.parent;if(o&&"drillDown"===o.direction)s=r===o.rootNodeGroup?{shape:{x:0,y:0,width:r.__tmNodeWidth,height:r.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,u=0;r.__tmWillDelete||(c=r.__tmNodeWidth/2,u=r.__tmNodeHeight/2),s="nodeGroup"===e?{position:[c,u],style:{opacity:0}}:{shape:{x:c,y:u,width:0,height:0},style:{opacity:0}}}s&&a.add(t,s,l,i)}})}),Uf(this._storage,function(t,n){Uf(t,function(t,o){var s=e.lastsForAnimation[n][o],r={};s&&("nodeGroup"===n?s.old&&(r.position=t.position.slice(),t.attr("position",s.old)):(s.old&&(r.shape=f({},t.shape),t.setShape(s.old)),s.fadein?(t.setStyle("opacity",0),r.style={opacity:1}):1!==t.style.opacity&&(r.style={opacity:1})),a.add(t,r,l,i))})},this),this._state="animating",a.done(xf(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||((e=this._controller=new Bg(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",xf(this._onPan,this)),e.on("zoom",xf(this._onZoom,this)));var n=new Cn(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,o){return n.contain(e,o)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(3<Math.abs(t.dx)||3<Math.abs(t.dy))){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var i=new Cn(l.x,l.y,l.width,l.height),a=this.seriesModel.layoutInfo;e-=a.x,n-=a.y;var s=ie();ce(s,s,[-e,-n]),_e(s,s,[t.scale,t.scale]),ce(s,s,[e,n]),i.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},_initEvents:function(t){t.on("click",function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var o=n.node;if(o.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var l=o.hostTree.data.getItemModel(o.dataIndex),i=l.get("link",!0),a=l.get("target",!0)||"blank";i&&sc(i,a)}}}}},this)},_renderBreadcrumb:function(t,e,n){n=n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||{node:t.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new Mf(this.group))).render(t,e,n.node,xf(function(e){"animating"!==this._state&&(wf(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(o){var l=this._storage.background[o.getRawIndex()];if(l){var i=l.transformCoordToLocal(t,e),a=l.shape;if(!(a.x<=i[0]&&i[0]<=a.x+a.width&&a.y<=i[1]&&i[1]<=a.y+a.height))return!1;n={node:o,offsetX:i[0],offsetY:i[1]}}},this),n}});for(var Kf=function(){},Yf=["treemapZoomToNode","treemapRender","treemapMove"],Xf=0;Xf<Yf.length;Xf++)dh({type:Yf[Xf],update:"updateView"},Kf);dh({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var o=Cf(t,["treemapZoomToNode","treemapRootToNode"],e);if(o){var l=e.getViewRoot();l&&(t.direction=wf(l,o.node)?"rollUp":"drillDown"),e.resetViewRoot(o.node)}})});var $f=O,zf=L,qf=function(t){var e=t.mappingMethod,n=t.type,o=this.option=m(t);this.type=n,this.mappingMethod=e,this._normalizeData=sb[e];var l=Jf[n];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._doMap=l._doMap[e],"piecewise"===e?(Zf(o),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,O(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(o)):"category"===e?o.categories?function(t){var e=t.categories,n=t.visual,o=t.categoryMap={};if($f(e,function(t,e){o[t]=e}),!P(n)){var l=[];L(n)?$f(n,function(t,e){var n=o[e];l[null!=n?n:-1]=t}):l[-1]=n,n=ab(t,l)}for(var i=e.length-1;0<=i;i--)null==n[i]&&(delete o[e[i]],e.pop())}(o):Zf(o,!0):(X("linear"!==e||o.dataExtent),Zf(o))};qf.prototype={constructor:qf,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return M(this._normalizeData,this)}};var Jf=qf.visualHandlers={color:{applyVisual:eb("color"),getColorMapper:function(){var t=this.option;return M("category"===t.mappingMethod?function(t,e){return e||(t=this._normalizeData(t)),nb.call(this,t)}:function(e,n,o){var l=!!o;return n||(e=this._normalizeData(e)),o=Ke(e,t.parsedVisual,o),l?o:Je(o,"rgba")},this)},_doMap:{linear:function(t){return Je(Ke(t,this.option.parsedVisual),"rgba")},category:nb,piecewise:function(t,e){var n=ib.call(this,e);return null==n&&(n=Je(Ke(t,this.option.parsedVisual),"rgba")),n},fixed:ob}},colorHue:Qf(function(t,e){return ze(t,e)}),colorSaturation:Qf(function(t,e){return ze(t,null,e)}),colorLightness:Qf(function(t,e){return ze(t,null,null,e)}),colorAlpha:Qf(function(t,e){return qe(t,e)}),opacity:{applyVisual:eb("opacity"),_doMap:lb([0,1])},liftZ:{applyVisual:eb("liftZ"),_doMap:{linear:ob,category:ob,piecewise:ob,fixed:ob}},symbol:{applyVisual:function(t,e,n){var o=this.mapValueToVisual(t);if(D(o))n("symbol",o);else if(zf(o))for(var l in o)o.hasOwnProperty(l)&&n(l,o[l])},_doMap:{linear:tb,category:nb,piecewise:function(t,e){var n=ib.call(this,e);return null==n&&(n=tb.call(this,t)),n},fixed:ob}},symbolSize:{applyVisual:eb("symbolSize"),_doMap:lb([0,1])}};function Zf(t,e){var n=t.visual,o=[];L(n)?$f(n,function(t){o.push(t)}):null!=n&&o.push(n),e||1!==o.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(o[1]=o[0]),ab(t,o)}function Qf(t){return{applyVisual:function(e,n,o){e=this.mapValueToVisual(e),o("color",t(n("color"),e))},_doMap:lb([0,1])}}function tb(t){var e=this.option.visual;return e[Math.round(Or(t,[0,1],[0,e.length-1],!0))]||{}}function eb(t){return function(e,n,o){o(t,this.mapValueToVisual(e))}}function nb(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function ob(){return this.option.visual[0]}function lb(t){return{linear:function(e){return Or(e,t,this.option.visual,!0)},category:nb,piecewise:function(e,n){var o=ib.call(this,n);return null==o&&(o=Or(e,t,this.option.visual,!0)),o},fixed:ob}}function ib(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var o=n[qf.findPieceIndex(t,n)];if(o&&o.visual)return o.visual[this.type]}}function ab(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=C(e,function(t){return Ve(t)})),e}var sb={linear:function(t){return Or(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=qf.findPieceIndex(t,e,!0);if(null!=n)return Or(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:et};function rb(t,e,n){return t?e<=n:e<n}qf.listVisualTypes=function(){var t=[];return O(Jf,function(e,n){t.push(n)}),t},qf.addVisualHandler=function(t,e){Jf[t]=e},qf.isValidType=function(t){return Jf.hasOwnProperty(t)},qf.eachVisual=function(t,e,n){L(t)?O(t,e,n):e.call(n,t)},qf.mapVisual=function(t,e,n){var o,l=P(t)?[]:L(t)?{}:(o=!0,null);return qf.eachVisual(t,function(t,i){var a=e.call(n,t,i);o?l=a:l[i]=a}),l},qf.retrieveVisuals=function(t){var e,n={};return t&&$f(Jf,function(o,l){t.hasOwnProperty(l)&&(n[l]=t[l],e=!0)}),e?n:null},qf.prepareVisualTypes=function(t){if(zf(t)){var e=[];$f(t,function(t,n){e.push(n)}),t=e}else{if(!P(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},qf.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},qf.findPieceIndex=function(t,e,n){for(var o,l=1/0,i=0,a=e.length;i<a;i++){var s=e[i].value;if(null!=s){if(s===t||"string"==typeof s&&s===t+"")return i;n&&_(s,i)}}for(i=0,a=e.length;i<a;i++){var r=e[i],c=r.interval,u=r.close;if(c){if(c[0]===-1/0){if(rb(u[1],t,c[1]))return i}else if(c[1]===1/0){if(rb(u[0],c[0],t))return i}else if(rb(u[0],c[0],t)&&rb(u[1],t,c[1]))return i;n&&_(c[0],i),n&&_(c[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function _(e,n){var i=Math.abs(e-t);i<l&&(l=i,o=n)}};var cb=P,ub={seriesType:"treemap",reset:function(t,e,n,o){var l=t.getData().tree.root;l.isRemoved()||function t(e,n,o,l){var i=e.getModel(),a=e.getLayout();if(a&&!a.invisible&&a.isInView){var s,r,c=e.getModel("itemStyle"),u=function(t,e,n){var o=f({},e),l=n.designatedVisualItemStyle;return O(["color","colorAlpha","colorSaturation"],function(n){l[n]=e[n];var i=t.get(n);(l[n]=null)!=i&&(o[n]=i)}),o}(c,n,l),_=c.get("borderColor"),d=c.get("borderColorSaturation");null!=d&&(_=null!=(r=s=_b(u))?ze(r,null,null,d):null),e.setVisual("borderColor",_);var h=e.viewChildren;if(h&&h.length){var y=function(t,e,n,o,l,i){if(i&&i.length){var a=hb(e,"color")||null!=l.color&&"none"!==l.color&&(hb(e,"colorAlpha")||hb(e,"colorSaturation"));if(a){var s=e.get("visualMin"),r=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=r&&r>c[1]&&(c[1]=r);var u=e.get("colorMappingBy"),_={type:a.name,dataExtent:c,visual:a.range};"color"!==_.type||"index"!==u&&"id"!==u?_.mappingMethod="linear":(_.mappingMethod="category",_.loop=!0);var d=new qf(_);return d.__drColorMappingBy=u,d}}}(0,i,a,0,u,h);O(h,function(e,n){if(e.depth>=o.length||e===o[e.depth]){var a=function(t,e,n,o,l,i){var a=f({},e);if(l){var s=l.type,r="color"===s&&l.__drColorMappingBy,c="index"===r?o:"id"===r?i.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[s]=l.mapValueToVisual(c)}return a}(i,u,e,n,y,l);t(e,a,o,l)}})}else s=_b(u),e.setVisual("color",s)}}(l,{},t.getViewRoot().getAncestors(),t)}};function _b(t){var e=db(t,"color");if(e){var n=db(t,"colorAlpha"),o=db(t,"colorSaturation");return o&&(e=ze(e,null,null,o)),n&&(e=qe(e,n)),e}}function db(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function hb(t,e){var n=t.get(e);return cb(n)&&n.length?{name:e,range:n}:null}var yb=Math.max,pb=Math.min,mb=G,kb=O,gb=["itemStyle","borderWidth"],fb=["itemStyle","gapWidth"],bb=["upperLabel","show"],vb=["upperLabel","height"],Tb={seriesType:"treemap",reset:function(t,e,n,o){var l=n.getWidth(),i=n.getHeight(),a=t.option,s=yc(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),r=a.size||[],c=Cr(mb(s.width,r[0]),l),u=Cr(mb(s.height,r[1]),i),_=o&&o.type,d=Cf(o,["treemapZoomToNode","treemapRootToNode"],t),h="treemapRender"===_||"treemapMove"===_?o.rootRect:null,y=t.getViewRoot(),p=Nf(y);if("treemapMove"!==_){var m="treemapZoomToNode"===_?function(t,e,n,o,l){var i,a=(e||{}).node,s=[o,l];if(!a||a===n)return s;for(var r=o*l,c=r*t.option.zoomToNodeRatio;i=a.parentNode;){for(var u=0,_=i.children,d=0,h=_.length;d<h;d++)u+=_[d].getValue();var y=a.getValue();if(0===y)return s;c*=u/y;var p=i.getModel(),m=p.get(gb);c+=4*m*m+(3*m+Math.max(m,Rb(p)))*Math.pow(c,.5),xr<c&&(c=xr),a=i}c<r&&(c=r);var k=Math.pow(c/r,.5);return[o*k,l*k]}(t,d,y,c,u):h?[h.width,h.height]:[c,u],k=a.sort;k&&"asc"!==k&&"desc"!==k&&(k="desc");var g={squareRatio:a.squareRatio,sort:k,leafDepth:a.leafDepth};y.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};y.setLayout(b),function t(e,n,o,l){var i,a;if(!e.isRemoved()){var s=e.getLayout();i=s.width,a=s.height;var r=(y=e.getModel()).get(gb),c=y.get(fb)/2,u=Rb(y),_=Math.max(r,u),d=r-c,h=_-c,y=e.getModel();e.setLayout({borderWidth:r,upperHeight:_,upperLabelHeight:u},!0);var p=(i=yb(i-2*d,0))*(a=yb(a-d-h,0)),m=Eb(e,y,p,n,o,l);if(m.length){var k={x:d,y:h,width:i,height:a},g=pb(i,a),f=1/0,b=[];b.area=0;for(var v=0,T=m.length;v<T;){var E=m[v];b.push(E),b.area+=E.getLayout().area;var B=Bb(b,g,n.squareRatio);f=B<=f?(v++,B):(b.area-=b.pop().getLayout().area,Ib(b,g,k,c,!1),g=pb(k.width,k.height),b.length=b.area=0,1/0)}if(b.length&&Ib(b,g,k,c,!0),!o){var I=y.get("childrenVisibleMin");null!=I&&p<I&&(o=!0)}for(v=0,T=m.length;v<T;v++)t(m[v],n,o,l+1)}}}(y,g,!1,0),b=y.getLayout(),kb(p,function(t,e){var n=(p[e+1]||y).getValue();t.setLayout(f({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))})}var v=t.getData().tree.root;v.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var o={x:0,y:0};if(!n)return o;var l=n.node,i=l.getLayout();if(!i)return o;for(var a=[i.width/2,i.height/2],s=l;s;){var r=s.getLayout();a[0]+=r.x,a[1]+=r.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}(s,h,d),!0),t.setLayoutInfo(s),function t(e,n,o,l,i){var a=e.getLayout(),s=o[i],r=s&&s===e;if(!(s&&!r||i===o.length&&e!==l)){e.setLayout({isInView:!0,invisible:!r&&!n.intersect(a),isAboveViewRoot:r},!0);var c=new Cn(n.x-a.x,n.y-a.y,n.width,n.height);kb(e.viewChildren||[],function(e){t(e,c,o,l,i+1)})}}(v,new Cn(-s.x,-s.y,l,i),p,y,0)}};function Eb(t,e,n,o,l,i){var a=t.children||[],s=o.sort;"asc"!==s&&"desc"!==s&&(s=null);var r=null!=o.leafDepth&&o.leafDepth<=i;if(l&&!r)return t.viewChildren=[];!function(t,e){e&&t.sort(function(t,n){var o="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0==o?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:o})}(a=w(a,function(t){return!t.isRemoved()}),s);var c=function(t,e,n){for(var o=0,l=0,i=e.length;l<i;l++)o+=e[l].getValue();var a=t.get("visualDimension");if(e&&e.length)if("value"===a&&n)s=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];kb(e,function(t){var e=t.getValue(a);e<s[0]&&(s[0]=e),e>s[1]&&(s[1]=e)})}else s=[NaN,NaN];return{sum:o,dataExtent:s}}(e,a,s);if(0===c.sum)return t.viewChildren=[];if(c.sum=function(t,e,n,o,l){if(!o)return n;for(var i=t.get("visibleMin"),a=l.length,s=a,r=a-1;0<=r;r--){var c=l["asc"===o?a-r-1:r].getValue();c/n*e<i&&(s=r,n-=c)}return"asc"===o?l.splice(0,a-s):l.splice(s,a-s),n}(e,n,c.sum,s,a),0===c.sum)return t.viewChildren=[];for(var u=0,_=a.length;u<_;u++){var d=a[u].getValue()/c.sum*n;a[u].setLayout({area:d})}return r&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:c.dataExtent},!0),a}function Bb(t,e,n){for(var o,l=0,i=1/0,a=0,s=t.length;a<s;a++)(o=t[a].getLayout().area)&&(o<i&&(i=o),l<o&&(l=o));var r=t.area*t.area,c=e*e*n;return r?yb(c*l/r,r/(c*i)):1/0}function Ib(t,e,n,o,l){var i=e===n.width?0:1,a=1-i,s=["x","y"],r=["width","height"],c=n[s[i]],u=e?t.area/e:0;(l||u>n[r[a]])&&(u=n[r[a]]);for(var _=0,d=t.length;_<d;_++){var h=t[_],y={},p=u?h.getLayout().area/u:0,m=y[r[a]]=yb(u-2*o,0),k=n[s[i]]+n[r[i]]-c,g=_===d-1||k<p?k:p,f=y[r[i]]=yb(g-2*o,0);y[s[a]]=n[s[a]]+pb(o,m/2),y[s[i]]=c+pb(o,f/2),c+=g,h.setLayout(y,!0)}n[s[a]]+=u,n[r[a]]-=u}function Rb(t){return t.get(bb)?t.get(vb):0}function Ob(t){return"_EC_"+t}function Cb(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData}ph(ub),yh(Tb);var Nb=Cb.prototype;function wb(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function Ab(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function Mb(t,e){return{getValue:function(n){var o=this[t][e];return o.get(o.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,o){0<=this.dataIndex&&this[t][e].setItemVisual(this.dataIndex,n,o)},getVisual:function(n,o){return this[t][e].getItemVisual(this.dataIndex,n,o)},setLayout:function(n,o){0<=this.dataIndex&&this[t][e].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function Sb(t,e,n,o,l){for(var i=new Cb(o),a=0;a<t.length;a++)i.addNode(G(t[a].id,t[a].name,a),a);var s=[],r=[],c=0;for(a=0;a<e.length;a++){var u=e[a],_=u.source,d=u.target;i.addEdge(_,d,c)&&(r.push(u),s.push(G(u.id,_+" > "+d)),c++)}var h,y=n.get("coordinateSystem");if("cartesian2d"===y||"polar"===y)h=ay(t,n);else{var p=nu.get(y),m=p&&"view"!==p.type&&p.dimensions||[];E(m,"value")<0&&m.concat(["value"]);var k=Qh(t,{coordDimensions:m});(h=new Fh(k,n)).initData(t)}var g=new Fh(["value"],n);return g.initData(r,s),l&&l(h,g),of({mainData:h,struct:i,structAttr:"graph",datas:{node:h,edge:g},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}Nb.type="graph",Nb.isDirected=function(){return this._directed},Nb.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[Ob(t)]){var o=new wb(t,e);return(o.hostGraph=this).nodes.push(o),n[Ob(t)]=o}},Nb.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},Nb.getNodeById=function(t){return this._nodesMap[Ob(t)]},Nb.addEdge=function(t,e,n){var o=this._nodesMap,l=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),wb.isInstance(t)||(t=o[Ob(t)]),wb.isInstance(e)||(e=o[Ob(e)]),t&&e){var i=t.id+"-"+e.id,a=new Ab(t,e,n);return(a.hostGraph=this)._directed&&(t.outEdges.push(a),e.inEdges.push(a)),t.edges.push(a),t!==e&&e.edges.push(a),this.edges.push(a),l[i]=a}},Nb.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},Nb.getEdge=function(t,e){wb.isInstance(t)&&(t=t.id),wb.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},Nb.eachNode=function(t,e){for(var n=this.nodes,o=n.length,l=0;l<o;l++)0<=n[l].dataIndex&&t.call(e,n[l],l)},Nb.eachEdge=function(t,e){for(var n=this.edges,o=n.length,l=0;l<o;l++)0<=n[l].dataIndex&&0<=n[l].node1.dataIndex&&0<=n[l].node2.dataIndex&&t.call(e,n[l],l)},Nb.breadthFirstTraverse=function(t,e,n,o){if(wb.isInstance(e)||(e=this._nodesMap[Ob(e)]),e){for(var l="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!t.call(o,e,null))for(var a=[e];a.length;){var s=a.shift(),r=s[l];for(i=0;i<r.length;i++){var c=r[i],u=c.node1===s?c.node2:c.node1;if(!u.__visited){if(t.call(o,u,s))return;a.push(u),u.__visited=!0}}}}},Nb.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,o=this.edges,l=0,i=n.length;l<i;l++)n[l].dataIndex=-1;for(l=0,i=t.count();l<i;l++)n[t.getRawIndex(l)].dataIndex=l;for(e.filterSelf(function(t){var n=o[e.getRawIndex(t)];return 0<=n.node1.dataIndex&&0<=n.node2.dataIndex}),l=0,i=o.length;l<i;l++)o[l].dataIndex=-1;for(l=0,i=e.count();l<i;l++)o[e.getRawIndex(l)].dataIndex=l},Nb.clone=function(){for(var t=new Cb(this._directed),e=this.nodes,n=this.edges,o=0;o<e.length;o++)t.addNode(e[o].id,e[o].dataIndex);for(o=0;o<n.length;o++){var l=n[o];t.addEdge(l.node1.id,l.node2.id,l.dataIndex)}return t},wb.prototype={constructor:wb,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},Ab.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},I(wb,Mb("hostGraph","data")),I(Ab,Mb("hostGraph","edgeData")),Cb.Node=wb,Cb.Edge=Ab,ei(wb),ei(Ab);var Pb="--\x3e",xb=function(t){return t.get("autoCurveness")||null},Db=function(t,e){var n=xb(t),o=20,l=[];if("number"==typeof n)o=n;else if(P(n))return void(t.__curvenessList=n);o<e&&(o=e);var i=o%2?o+2:o+3;l=[];for(var a=0;a<i;a++)l.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=l},Lb=function(t,e,n){var o=[t.id,t.dataIndex].join("."),l=[e.id,e.dataIndex].join(".");return[n.uid,o,l].join(Pb)},Ub=function(t){var e=t.split(Pb);return[e[0],e[2],e[1]].join(Pb)},Fb=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function Hb(t,e,n,o){var l=xb(e),i=P(l);if(!l)return null;var a=function(t,e){var n=Lb(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!a)return null;for(var s=-1,r=0;r<a.length;r++)if(a[r]===n){s=r;break}var c=function(t,e){return Fb(Lb(t.node1,t.node2,e),e)+Fb(Lb(t.node2,t.node1,e),e)}(t,e);Db(e,c),t.lineStyle=t.lineStyle||{};var u=Lb(t.node1,t.node2,e),_=e.__curvenessList,d=i||c%2?0:1;if(a.isForward)return _[d+s];var h=Ub(u),y=Fb(h,e),p=_[s+y+d];return o?i?l&&0===l[0]?(y+d)%2?p:-p:((y%2?0:1)+d)%2?p:-p:(y+d)%2?p:-p:_[s+y+d]}var Vb=bh({type:"series.graph",init:function(t){Vb.superApply(this,"init",arguments);var e=this;function n(){return e._categoriesData}this.legendVisualProvider=new xk(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){Vb.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){Vb.superApply(this,"mergeDefaultAndTheme",arguments),Dl(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var n=t.edges||t.links||[],o=t.data||t.nodes||[],l=this;if(o&&n){!function(t){xb(t)&&(t.__curvenessList=[],t.__edgeMap={},Db(t))}(this);var i=Sb(o,n,this,!0,function(t,n){t.wrapMethod("getItemModel",function(t){var e=l._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var o=l.getModel("edgeLabel"),i=new vr({label:o.option},o.parentModel,e),a=l.getModel("emphasis.edgeLabel"),s=new vr({emphasis:{label:a.option}},a.parentModel,e);function r(t){return(t=this.parsePath(t))&&"label"===t[0]?i:t&&"emphasis"===t[0]&&"label"===t[1]?s:this.parentModel}n.wrapMethod("getItemModel",function(t){return t.customizeGetParent(r),t})});return O(i.edges,function(t){!function(t,e,n,o){if(xb(n)){var l=Lb(t,e,n),i=n.__edgeMap,a=i[Ub(l)];i[l]&&!a?i[l].isForward=!0:a&&i[l]&&(a.isForward=!0,i[l].isForward=!1),i[l]=i[l]||[],i[l].push(o)}}(t.node1,t.node2,this,t.dataIndex)},this),i.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"!==n)return Vb.superApply(this,"formatTooltip",arguments);var o=this.getData(),l=this.getDataParams(t,n),i=o.graph.getEdgeByIndex(t),a=o.getName(i.node1.dataIndex),s=o.getName(i.node2.dataIndex),r=[];return null!=a&&r.push(a),null!=s&&r.push(s),r=Jr(r.join(" > ")),l.value&&(r+=" : "+Jr(l.value)),r},_updateCategoriesData:function(){var t=C(this.option.categories||[],function(t){return null!=t.value?t:f({value:0},t)}),e=new Fh(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return Vb.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),Gb=es.prototype,jb=is.prototype;function Wb(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Kb=vs({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){this[Wb(e)?"_buildPathLine":"_buildPathCurve"](t,e)},_buildPathLine:Gb.buildPath,_buildPathCurve:jb.buildPath,pointAt:function(t){return this[Wb(this.shape)?"_pointAtLine":"_pointAtCurve"](t)},_pointAtLine:Gb.pointAt,_pointAtCurve:jb.pointAt,tangentAt:function(t){var e=this.shape,n=Wb(e)?[e.x2-e.x1,e.y2-e.y1]:this._tangentAtCurve(t);return mt(n,n)},_tangentAtCurve:jb.tangentAt}),Yb=["fromSymbol","toSymbol"];function Xb(t){return"_"+t+"Type"}function $b(t,e,n){var o=e.getItemVisual(n,t);if(o&&"none"!==o){var l=e.getItemVisual(n,"color"),i=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate");P(i)||(i=[i,i]);var s=dp(o,-i[0]/2,-i[1]/2,i[0],i[1],l);return s.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,s.name=t,s}}function zb(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}function qb(t,e,n){Nn.call(this),this._createLine(t,e,n)}var Jb=qb.prototype;function Zb(t){this._ctor=t||qb,this.group=new Nn}Jb.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),n=this.childOfName("label");if(t||e||!n.ignore){for(var o=1,l=this.parent;l;)l.scale&&(o/=l.scale[0]),l=l.parent;var i=this.childOfName("line");if(this.__dirty||i.__dirty){var a,s=i.shape.percent,r=i.pointAt(0),c=i.pointAt(s),u=ut([],c,r);if(mt(u,u),t){if(t.attr("position",r),null==(a=t.__specifiedRotation)){var _=i.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(_[1],_[0]))}else t.attr("rotation",a);t.attr("scale",[o*s,o*s])}if(e)e.attr("position",c),null==(a=e.__specifiedRotation)?(_=i.tangentAt(1),e.attr("rotation",-Math.PI/2-Math.atan2(_[1],_[0]))):e.attr("rotation",a),e.attr("scale",[o*s,o*s]);if(!n.ignore){var d,h,y,p;n.attr("position",c);var m=n.__labelDistance,k=m[0]*o,g=m[1]*o,f=s/2,b=[(_=i.tangentAt(f))[1],-_[0]],v=i.pointAt(f);0<b[1]&&(b[0]=-b[0],b[1]=-b[1]);var T,E=_[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var B=-Math.atan2(_[1],_[0]);c[0]<r[0]&&(B=Math.PI+B),n.attr("rotation",B)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":T=-g,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":T=g,y="top";break;default:T=0,y="middle"}switch(n.__position){case"end":d=[u[0]*k+c[0],u[1]*g+c[1]],h=.8<u[0]?"left":u[0]<-.8?"right":"center",y=.8<u[1]?"top":u[1]<-.8?"bottom":"middle";break;case"start":d=[-u[0]*k+r[0],-u[1]*g+r[1]],h=.8<u[0]?"right":u[0]<-.8?"left":"center",y=.8<u[1]?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":d=[k*E+r[0],r[1]+T],h=_[0]<0?"right":"left",p=[-k*E,-T];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":d=[v[0],v[1]+T],h="center",p=[0,-T];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":d=[-k*E+c[0],c[1]+T],h=0<=_[0]?"right":"left",p=[k*E,-T]}n.attr({style:{textVerticalAlign:n.__verticalAlign||y,textAlign:n.__textAlign||h},position:d,scale:[o,o],origin:p})}}}},Jb._createLine=function(t,e,n){var o=t.hostModel,l=function(t){var e=new Kb({name:"line",subPixelOptimize:!0});return zb(e.shape,t),e}(t.getItemLayout(e));l.shape.percent=0,lr(l,{shape:{percent:1}},o,e),this.add(l);var i=new Ua({name:"label",lineLabelOriginalOpacity:1});this.add(i),O(Yb,function(n){var o=$b(n,t,e);this.add(o),this[Xb(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},Jb.updateData=function(t,e,n){var o=t.hostModel,l=this.childOfName("line"),i=t.getItemLayout(e),a={shape:{}};zb(a.shape,i),or(l,a,o,e),O(Yb,function(n){var o=t.getItemVisual(e,n),l=Xb(n);if(this[l]!==o){this.remove(this.childOfName(n));var i=$b(n,t,e);this.add(i)}this[l]=o},this),this._updateCommonStl(t,e,n)},Jb._updateCommonStl=function(t,e,n){var o=t.hostModel,l=this.childOfName("line"),i=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,r=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var c=t.getItemModel(e);i=c.getModel("lineStyle").getLineStyle(),a=c.getModel("emphasis.lineStyle").getLineStyle(),s=c.getModel("label"),r=c.getModel("emphasis.label")}var u=t.getItemVisual(e,"color"),_=W(t.getItemVisual(e,"opacity"),i.opacity,1);l.useStyle(b({strokeNoScale:!0,fill:"none",stroke:u,opacity:_},i)),l.hoverStyle=a,O(Yb,function(t){var e=this.childOfName(t);e&&(e.setColor(u),e.setStyle({opacity:_}))},this);var d,h,y=s.getShallow("show"),p=r.getShallow("show"),m=this.childOfName("label");if((y||p)&&(d=u||"#000",null==(h=o.getFormattedLabel(e,"normal",t.dataType)))){var k=o.getRawValue(e);h=null==k?t.getName(e):isFinite(k)?Nr(k):k}var g=y?h:null,f=p?j(o.getFormattedLabel(e,"emphasis",t.dataType),h):null,v=m.style;if(null!=g||null!=f){zs(m.style,s,{text:g},{autoColor:d}),m.__textAlign=v.textAlign,m.__verticalAlign=v.textVerticalAlign,m.__position=s.get("position")||"middle";var T=s.get("distance");P(T)||(T=[T,T]),m.__labelDistance=T}m.hoverStyle=null!=f?{text:f,textFill:r.getTextColor(!0),fontStyle:r.getShallow("fontStyle"),fontWeight:r.getShallow("fontWeight"),fontSize:r.getShallow("fontSize"),fontFamily:r.getShallow("fontFamily")}:{text:null},m.ignore=!y&&!p,js(this)},Jb.highlight=function(){this.trigger("emphasis")},Jb.downplay=function(){this.trigger("normal")},Jb.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},Jb.setLinePoints=function(t){var e=this.childOfName("line");zb(e.shape,t),e.dirty()},B(qb,Nn);var Qb=Zb.prototype;function tv(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function ev(t){return isNaN(t[0])||isNaN(t[1])}function nv(t){return!ev(t[0])&&!ev(t[1])}function ov(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,o=e.scale,l=o&&o[0]||1;return((e.getZoom()-1)*n+1)/l}function lv(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}Qb.isPersistent=function(){return!0},Qb.updateData=function(t){var e=this,n=e.group,o=e._lineData;e._lineData=t,o||n.removeAll();var l=tv(t);t.diff(o).add(function(n){!function(t,e,n,o){if(nv(e.getItemLayout(n))){var l=new t._ctor(e,n,o);e.setItemGraphicEl(n,l),t.group.add(l)}}(e,t,n,l)}).update(function(n,i){!function(t,e,n,o,l,i){var a=e.getItemGraphicEl(o);if(!nv(n.getItemLayout(l)))return t.group.remove(a);a?a.updateData(n,l,i):a=new t._ctor(n,l,i),n.setItemGraphicEl(l,a),t.group.add(a)}(e,o,t,i,n,l)}).remove(function(t){n.remove(o.getItemGraphicEl(t))}).execute()},Qb.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},Qb.incrementalPrepareUpdate=function(t){this._seriesScope=tv(t),this._lineData=null,this.group.removeAll()},Qb.incrementalUpdate=function(t,e){function n(t){t.isGroup||function(t){return t.animators&&0<t.animators.length}(t)||(t.incremental=t.useHoverLayer=!0)}for(var o=t.start;o<t.end;o++)if(nv(e.getItemLayout(o))){var l=new this._ctor(e,o,this._seriesScope);l.traverse(n),this.group.add(l),e.setItemGraphicEl(o,l)}},Qb.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Qb._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var iv=[],av=[],sv=[],rv=Ii,cv=bt,uv=Math.abs;function _v(t,e,n){for(var o,l=t[0],i=t[1],a=t[2],s=1/0,r=n*n,c=.1,u=.1;u<=.9;u+=.1)iv[0]=rv(l[0],i[0],a[0],u),iv[1]=rv(l[1],i[1],a[1],u),(h=uv(cv(iv,e)-r))<s&&(s=h,o=u);for(var _=0;_<32;_++){var d=o+c;av[0]=rv(l[0],i[0],a[0],o),av[1]=rv(l[1],i[1],a[1],o),sv[0]=rv(l[0],i[0],a[0],d),sv[1]=rv(l[1],i[1],a[1],d);var h=cv(av,e)-r;if(uv(h)<.01)break;var y=cv(sv,e)-r;c/=2,h<0?0<=y?o+=c:o-=c:0<=y?o-=c:o+=c}return o}function dv(t,e){var n=[],o=Ci,l=[[],[],[]],i=[[],[]],a=[];e/=2,t.eachEdge(function(t,s){var r=t.getLayout(),c=t.getVisual("fromSymbol"),u=t.getVisual("toSymbol");r.__original||(r.__original=[at(r[0]),at(r[1])],r[2]&&r.__original.push(at(r[2])));var _=r.__original;if(null!=r[2]){if(it(l[0],_[0]),it(l[1],_[2]),it(l[2],_[1]),c&&"none"!==c){var d=lv(t.node1),h=_v(l,_[0],d*e);o(l[0][0],l[1][0],l[2][0],h,n),l[0][0]=n[3],l[1][0]=n[4],o(l[0][1],l[1][1],l[2][1],h,n),l[0][1]=n[3],l[1][1]=n[4]}u&&"none"!==u&&(d=lv(t.node2),h=_v(l,_[1],d*e),o(l[0][0],l[1][0],l[2][0],h,n),l[1][0]=n[1],l[2][0]=n[2],o(l[0][1],l[1][1],l[2][1],h,n),l[1][1]=n[1],l[2][1]=n[2]),it(r[0],l[0]),it(r[1],l[2]),it(r[2],l[1])}else it(i[0],_[0]),it(i[1],_[1]),ut(a,i[1],i[0]),mt(a,a),c&&"none"!==c&&(d=lv(t.node1),ct(i[0],i[0],a,d*e)),u&&"none"!==u&&(d=lv(t.node2),ct(i[1],i[1],a,-d*e)),it(r[0],i[0]),it(r[1],i[1])})}var hv="__focusNodeAdjacency",yv="__unfocusNodeAdjacency",pv=["itemStyle","opacity"],mv=["lineStyle","opacity"];function kv(t,e){var n=t.getVisual("opacity");return null!=n?n:t.getModel().get(e)}function gv(t,e,n){var o=t.getGraphicEl(),l=kv(t,e);null!=n&&(null==l&&(l=1),l*=n),o.downplay&&o.downplay(),o.traverse(function(t){if(!t.isGroup){var e=t.lineLabelOriginalOpacity;null!=e&&null==n||(e=l),t.setStyle("opacity",e)}})}function fv(t,e){var n=kv(t,e),o=t.getGraphicEl();o.traverse(function(t){t.isGroup||t.setStyle("opacity",n)}),o.highlight&&o.highlight()}function bv(t){return t instanceof Array||(t=[t,t]),t}function vv(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),Tv(n,t)}}function Tv(t,e){t.eachEdge(function(t,n){var o=W(t.getModel().get("lineStyle.curveness"),-Hb(t,e,n,!0),0),l=at(t.node1.getLayout()),i=at(t.node2.getLayout()),a=[l,i];+o&&a.push([(l[0]+i[0])/2-(l[1]-i[1])*o,(l[1]+i[1])/2-(i[0]-l[0])*o]),t.setLayout(a)})}vh({type:"graph",init:function(t,e){var n=new Wp,o=new Zb,l=this.group;this._controller=new Bg(e.getZr()),this._controllerHost={target:l},l.add(n.group),l.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},render:function(t,e,n){var o=this,l=t.coordinateSystem;this._model=t;var i=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===l.type){var r={position:l.position,scale:l.scale};this._firstRender?s.attr(r):or(s,r,t)}dv(t.getGraph(),ov(t));var c=t.getData();i.updateData(c);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var _=t.forceLayout,d=t.get("force.layoutAnimation");_&&this._startForceLayoutIteration(_,d),c.eachItemGraphicEl(function(e,l){var i=c.getItemModel(l);e.off("drag").off("dragend");var a=i.get("draggable");a&&e.on("drag",function(){_&&(_.warmUp(),this._layouting||this._startForceLayoutIteration(_,d),_.setFixed(l),c.setItemLayout(l,e.position))},this).on("dragend",function(){_&&_.setUnfixed(l)},this),e.setDraggable(a&&_),e[hv]&&e.off("mouseover",e[hv]),e[yv]&&e.off("mouseout",e[yv]),i.get("focusNodeAdjacency")&&(e.on("mouseover",e[hv]=function(){o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e[yv]=function(){o._dispatchUnfocus(n)}))},this),c.graph.eachEdge(function(e){var l=e.getGraphicEl();l[hv]&&l.off("mouseover",l[hv]),l[yv]&&l.off("mouseout",l[yv]),e.getModel().get("focusNodeAdjacency")&&(l.on("mouseover",l[hv]=function(){o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),l.on("mouseout",l[yv]=function(){o._dispatchUnfocus(n)}))});var h="circular"===t.get("layout")&&t.get("circular.rotateLabel"),y=c.getLayout("cx"),p=c.getLayout("cy");c.eachItemGraphicEl(function(t,e){var n=c.getItemModel(e).get("label.rotate")||0,o=t.getSymbolPath();if(h){var l=c.getItemLayout(e),i=Math.atan2(l[1]-p,l[0]-y);i<0&&(i=2*Math.PI+i);var a=l[0]<y;a&&(i-=Math.PI);var s=a?"left":"right";$s(o,{textRotation:-i,textPosition:s,textOrigin:"center"},{textPosition:s})}else $s(o,{textRotation:n*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(t,e){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,o){var l=t.getData().graph,i=o.dataIndex,a=o.edgeDataIndex,s=l.getNodeByIndex(i),r=l.getEdgeByIndex(a);(s||r)&&(l.eachNode(function(t){gv(t,pv,.1)}),l.eachEdge(function(t){gv(t,mv,.1)}),s&&(fv(s,pv),O(s.edges,function(t){t.dataIndex<0||(fv(t,mv),fv(t.node1,pv),fv(t.node2,pv))})),r&&(fv(r,mv),fv(r.node1,pv),fv(r.node2,pv)))},unfocusNodeAdjacency:function(t,e,n,o){var l=t.getData().graph;l.eachNode(function(t){gv(t,pv)}),l.eachEdge(function(t){gv(t,mv)})},_startForceLayoutIteration:function(t,e){var n=this;!function o(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(o,16):o())})}()},_updateController:function(t,e,n){var o=this._controller,l=this._controllerHost,i=this.group;o.setPointerChecker(function(e,o,l){var a=i.getBoundingRect();return a.applyTransform(i.transform),a.contain(o,l)&&!Dg(e,n,t)}),"view"===t.coordinateSystem.type?(o.enable(t.get("roam")),l.zoomLimit=t.get("scaleLimit"),l.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(e){Sg(l,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){Pg(l,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(),dv(t.getGraph(),ov(t)),this._lineDraw.updateLayout()},this)):o.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=ov(t),o=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",o)})},updateLayout:function(t){dv(t.getGraph(),ov(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),dh({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),dh({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),dh({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=Wg(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})});var Ev=Math.PI,Bv=[];function Iv(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var o=n.getBoundingRect(),l=t.getData(),i=l.graph,a=o.width/2+o.x,s=o.height/2+o.y,r=Math.min(o.width,o.height)/2,c=l.count();l.setLayout({cx:a,cy:s}),c&&(Rv[e](t,n,i,l,r,a,s,c),i.eachEdge(function(e,n){var o,l=W(e.getModel().get("lineStyle.curveness"),Hb(e,t,n),0),i=at(e.node1.getLayout()),r=at(e.node2.getLayout()),c=(i[0]+r[0])/2,u=(i[1]+r[1])/2;+l&&(o=[a*(l*=3)+c*(1-l),s*l+u*(1-l)]),e.setLayout([i,r,o])}))}}var Rv={value:function(t,e,n,o,l,i,a,s){var r=0,c=o.getSum("value"),u=2*Math.PI/(c||s);n.eachNode(function(t){var e=t.getValue("value"),n=u*(c?e:1)/2;r+=n,t.setLayout([l*Math.cos(r)+i,l*Math.sin(r)+a]),r+=n})},symbolSize:function(t,e,n,o,l,i,a,s){var r=0;Bv.length=s;var c=ov(t);n.eachNode(function(t){var e=lv(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=c;var n=Math.asin(e/2/l);isNaN(n)&&(n=Ev/2),Bv[t.dataIndex]=n,r+=2*n});var u=(2*Ev-r)/s/2,_=0;n.eachNode(function(t){var e=u+Bv[t.dataIndex];_+=e,t.setLayout([l*Math.cos(_)+i,l*Math.sin(_)+a]),_+=e})}},Ov=ct;_h(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),o=t.getGraph().data,l=n.mapArray(n.getName);o.filterSelf(function(t){var n=o.getItemModel(t).getShallow("category");if(null!=n){"number"==typeof n&&(n=l[n]);for(var i=0;i<e.length;i++)if(!e[i].isSelected(n))return!1}return!0})},this)}),ph(km("graph","circle",null)),ph(function(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),o=t.getData(),l={};n.each(function(o){var i=n.getName(o);l["ec-"+i]=o;var a=n.getItemModel(o),s=a.get("itemStyle.color")||t.getColorFromPalette(i,e);n.setItemVisual(o,"color",s);for(var r=["opacity","symbol","symbolSize","symbolKeepAspect"],c=0;c<r.length;c++){var u=a.getShallow(r[c],!0);null!=u&&n.setItemVisual(o,r[c],u)}}),n.count()&&o.each(function(t){var e=o.getItemModel(t).getShallow("category");if(null!=e){"string"==typeof e&&(e=l["ec-"+e]);for(var i=["color","opacity","symbol","symbolSize","symbolKeepAspect"],a=0;a<i.length;a++)null==o.getItemVisual(t,i[a],!0)&&o.setItemVisual(t,i[a],n.getItemVisual(e,i[a]))}})})}),ph(function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),o=bv(t.get("edgeSymbol")),l=bv(t.get("edgeSymbolSize")),i="lineStyle.color".split("."),a="lineStyle.opacity".split(".");n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",l&&l[0]),n.setVisual("toSymbolSize",l&&l[1]),n.setVisual("color",t.get(i)),n.setVisual("opacity",t.get(a)),n.each(function(t){var o=n.getItemModel(t),l=e.getEdgeByIndex(t),s=bv(o.getShallow("symbol",!0)),r=bv(o.getShallow("symbolSize",!0)),c=o.get(i),u=o.get(a);switch(c){case"source":c=l.node1.getVisual("color");break;case"target":c=l.node2.getVisual("color")}s[0]&&l.setVisual("fromSymbol",s[0]),s[1]&&l.setVisual("toSymbol",s[1]),r[0]&&l.setVisual("fromSymbolSize",r[0]),r[1]&&l.setVisual("toSymbolSize",r[1]),l.setVisual("color",c),l.setVisual("opacity",u)})})}),yh(function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var o=t.getData(),l=[];O(n.dimensions,function(t){l=l.concat(o.mapDimension(t,!0))});for(var i=0;i<o.count();i++){for(var a=[],s=!1,r=0;r<l.length;r++){var c=o.get(l[r],i);isNaN(c)||(s=!0),a.push(c)}s?o.setItemLayout(i,n.dataToPoint(a)):o.setItemLayout(i,[NaN,NaN])}Tv(o.graph,t)}else e&&"none"!==e||vv(t)})}),yh(Ed.VISUAL.POST_CHART_LAYOUT,function(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&Iv(t,"symbolSize")})}),yh(function(t){t.eachSeriesByType("graph",function(t){if(!(_=t.coordinateSystem)||"view"===_.type)if("force"===t.get("layout")){var e=t.preservedPoints||{},n=t.getGraph(),o=n.data,l=n.edgeData,i=t.getModel("force"),a=i.get("initLayout");t.preservedPoints?o.each(function(t){var n=o.getId(t);o.setItemLayout(t,e[n]||[NaN,NaN])}):a&&"none"!==a?"circular"===a&&Iv(t,"value"):vv(t);var s=o.getDataExtent("value"),r=l.getDataExtent("value"),c=i.get("repulsion"),u=i.get("edgeLength");P(c)||(c=[c,c]),P(u)||(u=[u,u]),u=[u[1],u[0]];var _,d=o.mapArray("value",function(t,e){var n=o.getItemLayout(e),l=Or(t,s,c);return isNaN(l)&&(l=(c[0]+c[1])/2),{w:l,rep:l,fixed:o.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),h=l.mapArray("value",function(e,o){var l=n.getEdgeByIndex(o),i=Or(e,r,u);isNaN(i)&&(i=(u[0]+u[1])/2);var a=l.getModel(),s=W(a.get("lineStyle.curveness"),-Hb(l,t,o,!0),0);return{n1:d[l.node1.dataIndex],n2:d[l.node2.dataIndex],d:i,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),y=(_=t.coordinateSystem).getBoundingRect(),p=function(t,e,n){for(var o=n.rect,l=o.width,i=o.height,a=[o.x+l/2,o.y+i/2],s=null==n.gravity?.1:n.gravity,r=0;r<t.length;r++){var c=t[r];c.p||(c.p=lt(l*(Math.random()-.5)+a[0],i*(Math.random()-.5)+a[1])),c.pp=at(c.p),c.edges=null}var u=null==n.friction?.6:n.friction,_=u;return{warmUp:function(){_=.8*u},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var o=[],l=t.length,i=0;i<e.length;i++){var r=e[i];if(!r.ignoreForceLayout){var c=r.n1;ut(o,(y=r.n2).p,c.p);var u=_t(o)-r.d,d=y.w/(c.w+y.w);isNaN(d)&&(d=0),mt(o,o),c.fixed||Ov(c.p,c.p,o,d*u*_),y.fixed||Ov(y.p,y.p,o,-(1-d)*u*_)}}for(i=0;i<l;i++)(k=t[i]).fixed||(ut(o,a,k.p),Ov(k.p,k.p,o,s*_));for(i=0;i<l;i++){c=t[i];for(var h=i+1;h<l;h++){var y;ut(o,(y=t[h]).p,c.p),0===(u=_t(o))&&(st(o,Math.random()-.5,Math.random()-.5),u=1);var p=(c.rep+y.rep)/u/u;c.fixed||Ov(c.pp,c.pp,o,p),y.fixed||Ov(y.pp,y.pp,o,-p)}}var m=[];for(i=0;i<l;i++){var k;(k=t[i]).fixed||(ut(m,k.p,k.pp),Ov(k.p,k.p,m,_),it(k.pp,k.p))}_*=.992,n&&n(t,e,_<.01)}}}(d,h,{rect:y,gravity:i.get("gravity"),friction:i.get("friction")}),m=p.step;p.step=function(t){for(var l=0,i=d.length;l<i;l++)d[l].fixed&&it(d[l].p,n.getNodeByIndex(l).getLayout());m(function(l,i,a){for(var s=0,r=l.length;s<r;s++)l[s].fixed||n.getNodeByIndex(s).setLayout(l[s].p),e[o.getId(s)]=l[s].p;for(s=0,r=i.length;s<r;s++){var c=i[s],u=n.getEdgeByIndex(s),_=c.n1.p,d=c.n2.p,h=u.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],it(h[0],_),it(h[1],d),+c.curveness&&(h[2]=[(_[0]+d[0])/2-(_[1]-d[1])*c.curveness,(_[1]+d[1])/2-(d[0]-_[0])*c.curveness]),u.setLayout(h)}t&&t(a)})},t.forceLayout=p,t.preservedPoints=e,p.step()}else t.forceLayout=null})}),hh("graphView",{create:function(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var o=t.get("coordinateSystem");if(!o||"view"===o){var l=t.getData(),i=[],a=[];Li(l.mapArray(function(t){var e=l.getItemModel(t);return[+e.get("x"),+e.get("y")]}),i,a),a[0]-i[0]==0&&(a[0]+=1,i[0]-=1),a[1]-i[1]==0&&(a[1]+=1,i[1]-=1);var s=(a[0]-i[0])/(a[1]-i[1]),r=function(t,e,n){var o=t.getBoxLayoutParams();return o.aspect=n,yc(o,{width:e.getWidth(),height:e.getHeight()})}(t,e,s);isNaN(s)&&(i=[r.x,r.y],a=[r.x+r.width,r.y+r.height]);var c=a[0]-i[0],u=a[1]-i[1],_=r.width,d=r.height,h=t.coordinateSystem=new Xg;h.zoomLimit=t.get("scaleLimit"),h.setBoundingRect(i[0],i[1],c,u),h.setViewRect(r.x,r.y,_,d),h.setCenter(t.get("center")),h.setZoom(t.get("zoom")),n.push(h)}}),n}}),t_.extend({type:"series.gauge",getInitialData:function(t,e){return Sk(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var Cv=va.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,o=Math.sin,l=e.r,i=e.width,a=e.angle,s=e.x-n(a)*i*(l/3<=i?1:2),r=e.y-o(a)*i*(l/3<=i?1:2);a=e.angle-Math.PI/2,t.moveTo(s,r),t.lineTo(e.x+n(a)*i,e.y+o(a)*i),t.lineTo(e.x+n(e.angle)*l,e.y+o(e.angle)*l),t.lineTo(e.x-n(a)*i,e.y-o(a)*i),t.lineTo(s,r)}});function Nv(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}var wv=2*Math.PI,Av=(h_.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var o=t.get("axisLine.lineStyle.color"),l=function(t,e){var n=t.get("center"),o=e.getWidth(),l=e.getHeight(),i=Math.min(o,l);return{cx:Cr(n[0],e.getWidth()),cy:Cr(n[1],e.getHeight()),r:Cr(t.get("radius"),i/2)}}(t,n);this._renderMain(t,e,n,o,l)},dispose:function(){},_renderMain:function(t,e,n,o,l){for(var i=this.group,a=t.getModel("axisLine"),s=a.getModel("lineStyle"),r=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=((p=-t.get("endAngle")/180*Math.PI)-c)%wv,_=c,d=s.get("width"),h=a.get("show"),y=0;h&&y<o.length;y++){var p,m=Math.min(Math.max(o[y][0],0),1),k=new Ga({shape:{startAngle:_,endAngle:p=c+u*m,cx:l.cx,cy:l.cy,clockwise:r,r0:l.r-d,r:l.r},silent:!0});k.setStyle({fill:o[y][1]}),k.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),i.add(k),_=p}function g(t){if(t<=0)return o[0][1];for(var e=0;e<o.length;e++)if(o[e][0]>=t&&(0===e?0:o[e-1][0])<t)return o[e][1];return o[e-1][1]}if(!r){var f=c;c=p,p=f}this._renderTicks(t,e,n,g,l,c,p,r),this._renderPointer(t,e,n,g,l,c,p,r),this._renderTitle(t,e,n,g,l),this._renderDetail(t,e,n,g,l)},_renderTicks:function(t,e,n,o,l,i,a,s){for(var r=this.group,c=l.cx,u=l.cy,_=l.r,d=+t.get("min"),h=+t.get("max"),y=t.getModel("splitLine"),p=t.getModel("axisTick"),m=t.getModel("axisLabel"),k=t.get("splitNumber"),g=p.get("splitNumber"),f=Cr(y.get("length"),_),b=Cr(p.get("length"),_),v=i,T=(a-i)/k,E=T/g,B=y.getModel("lineStyle").getLineStyle(),I=p.getModel("lineStyle").getLineStyle(),R=0;R<=k;R++){var O=Math.cos(v),C=Math.sin(v);if(y.get("show")){var N=new es({shape:{x1:O*_+c,y1:C*_+u,x2:O*(_-f)+c,y2:C*(_-f)+u},style:B,silent:!0});"auto"===B.stroke&&N.setStyle({stroke:o(R/k)}),r.add(N)}if(m.get("show")){var w=Nv(Nr(R/k*(h-d)+d),m.get("formatter")),A=m.get("distance"),M=o(R/k);r.add(new Ua({style:zs({},m,{text:w,x:O*(_-f-A)+c,y:C*(_-f-A)+u,textVerticalAlign:C<-.4?"top":.4<C?"bottom":"middle",textAlign:O<-.4?"left":.4<O?"right":"center"},{autoColor:M}),silent:!0}))}if(p.get("show")&&R!==k){for(var S=0;S<=g;S++){O=Math.cos(v),C=Math.sin(v);var P=new es({shape:{x1:O*_+c,y1:C*_+u,x2:O*(_-b)+c,y2:C*(_-b)+u},silent:!0,style:I});"auto"===I.stroke&&P.setStyle({stroke:o((R+S/g)/k)}),r.add(P),v+=E}v-=E}else v+=T}},_renderPointer:function(t,e,n,o,l,i,a,s){var r=this.group,c=this._data;if(t.get("pointer.show")){var u=[+t.get("min"),+t.get("max")],_=[i,a],d=t.getData(),h=d.mapDimension("value");d.diff(c).add(function(e){var n=new Cv({shape:{angle:i}});lr(n,{shape:{angle:Or(d.get(h,e),u,_,!0)}},t),r.add(n),d.setItemGraphicEl(e,n)}).update(function(e,n){var o=c.getItemGraphicEl(n);or(o,{shape:{angle:Or(d.get(h,e),u,_,!0)}},t),r.add(o),d.setItemGraphicEl(e,o)}).remove(function(t){var e=c.getItemGraphicEl(t);r.remove(e)}).execute(),d.eachItemGraphicEl(function(t,e){var n=d.getItemModel(e),i=n.getModel("pointer");t.setShape({x:l.cx,y:l.cy,width:Cr(i.get("width"),l.r),r:Cr(i.get("length"),l.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",o(Or(d.get(h,e),u,[0,1],!0))),js(t,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=d}else c&&c.eachItemGraphicEl(function(t){r.remove(t)})},_renderTitle:function(t,e,n,o,l){var i=t.getData(),a=i.mapDimension("value"),s=t.getModel("title");if(s.get("show")){var r=s.get("offsetCenter"),c=l.cx+Cr(r[0],l.r),u=l.cy+Cr(r[1],l.r),_=+t.get("min"),d=+t.get("max"),h=o(Or(t.getData().get(a,0),[_,d],[0,1],!0));this.group.add(new Ua({silent:!0,style:zs({},s,{x:c,y:u,text:i.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:h,forceRich:!0})}))}},_renderDetail:function(t,e,n,o,l){var i=t.getModel("detail"),a=+t.get("min"),s=+t.get("max");if(i.get("show")){var r=i.get("offsetCenter"),c=l.cx+Cr(r[0],l.r),u=l.cy+Cr(r[1],l.r),_=Cr(i.get("width"),l.r),d=Cr(i.get("height"),l.r),h=t.getData(),y=h.get(h.mapDimension("value"),0),p=o(Or(y,[a,s],[0,1],!0));this.group.add(new Ua({silent:!0,style:zs({},i,{x:c,y:u,text:Nv(y,i.get("formatter")),textWidth:isNaN(_)?null:_,textHeight:isNaN(d)?null:d,textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}}}),bh({type:"series.funnel",init:function(t){Av.superApply(this,"init",arguments),this.legendVisualProvider=new xk(M(this.getData,this),M(this.getRawData,this)),this._defaultLabelLine(t)},getInitialData:function(t,e){return Sk(this,{coordDimensions:["value"],encodeDefaulter:S(Yc,this)})},_defaultLabelLine:function(t){Dl(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=Av.superCall(this,"getDataParams",t),o=e.mapDimension("value"),l=e.getSum(o);return n.percent=l?+(e.get(o,t)/l*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function Mv(t,e){Nn.call(this);var n=new Ya,o=new Xa,l=new Ua;this.add(n),this.add(o),this.add(l),this.highDownOnUpdate=function(t,e){"emphasis"===e?(o.ignore=o.hoverIgnore,l.ignore=l.hoverIgnore):(o.ignore=o.normalIgnore,l.ignore=l.normalIgnore)},this.updateData(t,e,!0)}var Sv=Mv.prototype,Pv=["itemStyle","opacity"];function xv(t,e,n,o,l){Cp.call(this,t,e,n),this.type=o||"value",this.axisIndex=l}function Dv(t,e,n,o,l,i){t=t||0;var a=n[1]-n[0];if(null!=l&&(l=Uv(l,[0,a])),null!=i&&(i=Math.max(i,null!=l?l:0)),"all"===o){var s=Math.abs(e[1]-e[0]);l=i=Uv(s=Uv(s,[0,a]),[l,i]),o=0}e[0]=Uv(e[0],n),e[1]=Uv(e[1],n);var r=Lv(e,o);e[o]+=t;var c=l||0,u=n.slice();r.sign<0?u[0]+=c:u[1]-=c,e[o]=Uv(e[o],u);var _=Lv(e,o);return null!=l&&(_.sign!==r.sign||_.span<l)&&(e[1-o]=e[o]+r.sign*l),_=Lv(e,o),null!=i&&_.span>i&&(e[1-o]=e[o]+_.sign*i),e}function Lv(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:0<n?-1:n<0?1:e?-1:1}}function Uv(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}Sv.updateData=function(t,e,n){var o=this.childAt(0),l=t.hostModel,i=t.getItemModel(e),a=t.getItemLayout(e),s=t.getItemModel(e).get(Pv);s=null==s?1:s,o.useStyle({}),n?(o.setShape({points:a.points}),o.setStyle({opacity:0}),lr(o,{style:{opacity:s}},l,e)):or(o,{style:{opacity:s},shape:{points:a.points}},l,e);var r=i.getModel("itemStyle"),c=t.getItemVisual(e,"color");o.setStyle(b({lineJoin:"round",fill:c},r.getItemStyle(["opacity"]))),o.hoverStyle=r.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),js(this)},Sv._updateLabel=function(t,e){var n=this.childAt(1),o=this.childAt(2),l=t.hostModel,i=t.getItemModel(e),a=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");or(n,{shape:{points:a.linePoints||a.linePoints}},l,e),or(o,{style:{x:a.x,y:a.y}},l,e),o.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var r=i.getModel("label"),c=i.getModel("emphasis.label"),u=i.getModel("labelLine"),_=i.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color"),Xs(o.style,o.hoverStyle={},r,c,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),o.ignore=o.normalIgnore=!r.get("show"),o.hoverIgnore=!c.get("show"),n.ignore=n.normalIgnore=!u.get("show"),n.hoverIgnore=!_.get("show"),n.setStyle({stroke:s}),n.setStyle(u.getModel("lineStyle").getLineStyle()),n.hoverStyle=_.getModel("lineStyle").getLineStyle()},B(Mv,Nn),h_.extend({type:"funnel",render:function(t,e,n){var o=t.getData(),l=this._data,i=this.group;o.diff(l).add(function(t){var e=new Mv(o,t);o.setItemGraphicEl(t,e),i.add(e)}).update(function(t,e){var n=l.getItemGraphicEl(e);n.updateData(o,t),i.add(n),o.setItemGraphicEl(t,n)}).remove(function(t){var e=l.getItemGraphicEl(t);i.remove(e)}).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),ph(Gk("funnel")),yh(function(t,e,n){t.eachSeriesByType("funnel",function(t){var n=t.getData(),o=n.mapDimension("value"),l=t.get("sort"),i=function(t,e){return yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),a=function(t,e){for(var n=t.mapDimension("value"),o=t.mapArray(n,function(t){return t}),l=[],i="ascending"===e,a=0,s=t.count();a<s;a++)l[a]=a;return"function"==typeof e?l.sort(e):"none"!==e&&l.sort(function(t,e){return i?o[t]-o[e]:o[e]-o[t]}),l}(n,l),s=t.get("orient"),r=i.width,c=i.height,u=i.x,_=i.y,d="horizontal"===s?[Cr(t.get("minSize"),c),Cr(t.get("maxSize"),c)]:[Cr(t.get("minSize"),r),Cr(t.get("maxSize"),r)],h=n.getDataExtent(o),y=t.get("min"),p=t.get("max");function m(t,e){if("horizontal"===s){var l,i=Or(n.get(o,t)||0,[y,p],d,!0);switch(k){case"top":l=_;break;case"center":l=_+(c-i)/2;break;case"bottom":l=_+(c-i)}return[[e,l],[e,l+i]]}var a,h=Or(n.get(o,t)||0,[y,p],d,!0);switch(k){case"left":a=u;break;case"center":a=u+(r-h)/2;break;case"right":a=u+r-h}return[[a,e],[a+h,e]]}null==y&&(y=Math.min(h[0],0)),null==p&&(p=h[1]);var k=t.get("funnelAlign"),g=t.get("gap"),f=(("horizontal"===s?r:c)-g*(n.count()-1))/n.count();"ascending"===l&&(f=-f,g=-g,"horizontal"===s?u+=r:_+=c,a=a.reverse());for(var b=0;b<a.length;b++){var v=a[b],T=a[b+1],E=n.getItemModel(v);if("horizontal"===s){var B=E.get("itemStyle.width");null==B?B=f:(B=Cr(B,r),"ascending"===l&&(B=-B));var I=m(v,u),R=m(T,u+B);u+=B+g,n.setItemLayout(v,{points:I.concat(R.slice().reverse())})}else{var O=E.get("itemStyle.height");null==O?O=f:(O=Cr(O,c),"ascending"===l&&(O=-O)),I=m(v,"horizontal"===s?u:_),R=m(T,"horizontal"===s?u+B:_+O),_+=O+g,n.setItemLayout(v,{points:I.concat(R.slice().reverse())})}}!function(t){t.each(function(e){var n,o,l,i,a=t.getItemModel(e),s=a.getModel("label").get("position"),r=a.get("orient"),c=a.getModel("labelLine"),u=t.getItemLayout(e),_=u.points,d="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(d)n="insideLeft"===s?(o=(_[0][0]+_[3][0])/2+5,l=(_[0][1]+_[3][1])/2,"left"):"insideRight"===s?(o=(_[1][0]+_[2][0])/2-5,l=(_[1][1]+_[2][1])/2,"right"):(o=(_[0][0]+_[1][0]+_[2][0]+_[3][0])/4,l=(_[0][1]+_[1][1]+_[2][1]+_[3][1])/4,"center"),i=[[o,l],[o,l]];else{var h,y,p,m,k=c.get("length");n="left"===s?(h=(_[3][0]+_[0][0])/2,y=(_[3][1]+_[0][1])/2,o=(p=h-k)-5,"right"):"right"===s?(h=(_[1][0]+_[2][0])/2,y=(_[1][1]+_[2][1])/2,o=(p=h+k)+5,"left"):"top"===s?(h=(_[3][0]+_[0][0])/2,l=(m=(y=(_[3][1]+_[0][1])/2)-k)-5,"center"):"bottom"===s?(h=(_[1][0]+_[2][0])/2,l=(m=(y=(_[1][1]+_[2][1])/2)+k)+5,"center"):"rightTop"===s?(h="horizontal"===r?_[3][0]:_[1][0],y="horizontal"===r?_[3][1]:_[1][1],"horizontal"===r?(l=(m=y-k)-5,"center"):(o=(p=h+k)+5,"top")):"rightBottom"===s?(h=_[2][0],y=_[2][1],"horizontal"===r?(l=(m=y+k)+5,"center"):(o=(p=h+k)+5,"bottom")):"leftTop"===s?(h=_[0][0],y="horizontal"===r?_[0][1]:_[1][1],"horizontal"===r?(l=(m=y-k)-5,"center"):(o=(p=h-k)-5,"right")):"leftBottom"===s?(h="horizontal"===r?_[1][0]:_[3][0],y="horizontal"===r?_[1][1]:_[2][1],"horizontal"===r?(l=(m=y+k)+5,"center"):(o=(p=h-k)-5,"right")):(h=(_[1][0]+_[2][0])/2,y=(_[1][1]+_[2][1])/2,"horizontal"===r?(l=(m=y+k)+5,"center"):(o=(p=h+k)+5,"left")),"horizontal"===r?o=p=h:l=m=y,i=[[h,y],[p,m]]}u.label={linePoints:i,x:o,y:l,verticalAlign:"middle",textAlign:n,inside:d}})}(n)})}),_h($k("funnel")),xv.prototype={constructor:xv,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},B(xv,Cp);var Fv=O,Hv=Math.min,Vv=Math.max,Gv=Math.floor,jv=Math.ceil,Wv=Nr,Kv=Math.PI;function Yv(t,e,n){this._axesMap=Q(),this._axesLayout={},this.dimensions=t.dimensions,this._rect,this._model=t,this._init(t,e,n)}function Xv(t,e){return Hv(Vv(t,e[0]),e[1])}Yv.prototype={type:"parallel",constructor:Yv,_init:function(t,e,n){var o=t.dimensions,l=t.parallelAxisIndex;Fv(o,function(t,n){var o=l[n],i=e.getComponent("parallelAxis",o),a=this._axesMap.set(t,new xv(t,Zy(i),[0,0],i.get("type"),o)),s="category"===a.type;a.onBand=s&&i.get("boundaryGap"),a.inverse=i.get("inverse"),(i.axis=a).model=i,a.coordinateSystem=i.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,o=e.layoutBase,l=e.pixelDimIndex,i=t[1-l],a=t[l];return n<=i&&i<=n+e.axisLength&&o<=a&&a<=o+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var o=n.getData();Fv(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(o,o.mapDimension(t)),Jy(e.scale,e.model)},this)}},this)},resize:function(t,e){this._rect=yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,o=["x","y"],l=["width","height"],i=e.get("layout"),a="horizontal"===i?0:1,s=n[l[a]],r=[0,s],c=this.dimensions.length,u=Xv(e.get("axisExpandWidth"),r),_=Xv(e.get("axisExpandCount")||0,[0,c]),d=e.get("axisExpandable")&&3<c&&_<c&&1<_&&0<u&&0<s,h=e.get("axisExpandWindow");h?(t=Xv(h[1]-h[0],r),h[1]=h[0]+t):(t=Xv(u*(_-1),r),(h=[u*(e.get("axisExpandCenter")||Gv(c/2))-t/2])[1]=h[0]+t);var y=(s-t)/(c-_);y<3&&(y=0);var p=[Gv(Wv(h[0]/u,1))+1,jv(Wv(h[1]/u,1))-1],m=y/u*h[0];return{layout:i,pixelDimIndex:a,layoutBase:n[o[a]],layoutLength:s,axisBase:n[o[1-a]],axisLength:n[l[1-a]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:y,axisExpandWindow:h,axisCount:c,winInnerIndices:p,axisExpandWindow0Pos:m}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),l=o.layout;e.each(function(t){var e=[0,o.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),Fv(n,function(e,n){var i=(o.axisExpandable?function(t,e){var n,o,l=e.layoutLength,i=e.axisExpandWidth,a=e.axisCount,s=e.axisCollapseWidth,r=e.winInnerIndices,c=s,u=!1;return t<r[0]?(n=t*s,o=s):t<=r[1]?(n=e.axisExpandWindow0Pos+t*i-e.axisExpandWindow[0],c=i,u=!0):(n=l-(a-1-t)*s,o=s),{position:n,axisNameAvailableWidth:c,axisLabelShow:u,nameTruncateMaxWidth:o}}:function(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,o),a={horizontal:{x:i.position,y:o.axisLength},vertical:{x:0,y:i.position}},s={horizontal:Kv/2,vertical:0},r=[a[l].x+t.x,a[l].y+t.y],c=s[l],u=ie();ue(u,u,c),ce(u,u,r),this._axesLayout[e]={position:r,rotation:c,transform:u,axisNameAvailableWidth:i.axisNameAvailableWidth,axisLabelShow:i.axisLabelShow,nameTruncateMaxWidth:i.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,o){null==n&&(n=0),null==o&&(o=t.count());var l=this._axesMap,i=this.dimensions,a=[],s=[];O(i,function(e){a.push(t.mapDimension(e)),s.push(l.get(e).model)});for(var r=this.hasAxisBrushed(),c=n;c<o;c++){var u;if(r){u="active";for(var _=t.getValues(a,c),d=0,h=i.length;d<h;d++)if("inactive"===s[d].getActiveState(_[d])){u="inactive";break}}else u="normal";e(u,c)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,o=0,l=t.length;o<l;o++)"normal"!==e.get(t[o]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){return ar([t,0],this._axesLayout[e].transform)},getAxisLayout:function(t){return m(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,o=e.axisExpandWindow.slice(),l=o[1]-o[0],i=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:o};var a,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,r="slide",c=e.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),_=null!=u[0];return c?(_&&c&&s<l*u[0]?(r="jump",a=s-l*u[2]):_&&c&&s>l*(1-u[0])?(r="jump",a=s-l*(1-u[2])):0<=(a=s-l*u[1])&&(a=s-l*(1-u[1]))<=0&&(a=0),(a*=e.axisExpandWidth/c)?Dv(a,o,i,"all"):r="none"):(l=o[1]-o[0],(o=[Vv(0,i[1]*s/l-l/2)])[1]=Hv(i[1],o[0]+l),o[0]=o[1]-l),{axisExpandWindow:o,behavior:r}}},nu.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",function(o,l){var i=new Yv(o,t,e);i.name="parallel_"+l,i.resize(o,e),(o.coordinateSystem=i).model=o,n.push(i)}),t.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var $v=Ec.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return ii([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=m(t);if(e)for(var n=e.length-1;0<=n;n--)wr(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var o=0,l=e.length;o<l;o++)if(e[o][0]<=t&&t<=e[o][1])return"active";return"inactive"}});k($v.prototype,op),Om("parallel",$v,function(t,e){return e.type||(e.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Ec.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Ec.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&k(e,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){O(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];O(w(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this),function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}}),dh({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),dh("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var zv=S,qv=O,Jv=C,Zv=Math.min,Qv=Math.max,tT=Math.pow,eT="globalPan",nT={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},oT={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},lT={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},iT=0;function aT(t){Nt.call(this),this._zr=t,this.group=new Nn,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+iT++,this._handlers={},qv(MT,function(t,e){this._handlers[e]=M(t,this)},this)}function sT(t,e){var n=PT[e.brushType].createCover(t,e);return n.__brushOption=e,uT(n,e),t.group.add(n),n}function rT(t,e){var n=dT(e);return n.endCreating&&(n.endCreating(t,e),uT(e,e.__brushOption)),e}function cT(t,e){var n=e.__brushOption;dT(e).updateCoverShape(t,e,n.range,n)}function uT(t,e){var n=e.z;null==n&&(n=1e4),t.traverse(function(t){t.z=n,t.z2=n})}function _T(t,e){dT(e).updateCommon(t,e),cT(t,e)}function dT(t){return PT[t.__brushOption.brushType]}function hT(t,e,n){var o,l=t._panels;if(!l)return!0;var i=t._transform;return qv(l,function(t){t.isTargetByCursor(e,n,i)&&(o=t)}),o}function yT(t,e){var n=t._panels;if(!n)return!0;var o=e.__brushOption.panelId;return null==o||n[o]}function pT(t){var e=t._covers,n=e.length;return qv(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function mT(t,e){var n=Jv(t._covers,function(t){var e=t.__brushOption,n=m(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function kT(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function gT(t,e,n,o){var l=new Nn;return l.add(new Qa({name:"main",style:TT(n),silent:!0,draggable:!0,cursor:"move",drift:zv(t,e,l,"nswe"),ondragend:zv(mT,e,{isEnd:!0})})),qv(o,function(n){l.add(new Qa({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:zv(t,e,l,n),ondragend:zv(mT,e,{isEnd:!0})}))}),l}function fT(t,e,n,o){var l=o.brushStyle.lineWidth||0,i=Qv(l,6),a=n[0][0],s=n[1][0],r=a-l/2,c=s-l/2,u=n[0][1],_=n[1][1],d=u-i+l/2,h=_-i+l/2,y=u-a,p=_-s,m=y+l,k=p+l;vT(t,e,"main",a,s,y,p),o.transformable&&(vT(t,e,"w",r,c,i,k),vT(t,e,"e",d,c,i,k),vT(t,e,"n",r,c,m,i),vT(t,e,"s",r,h,m,i),vT(t,e,"nw",r,c,i,i),vT(t,e,"ne",d,c,i,i),vT(t,e,"sw",r,h,i,i),vT(t,e,"se",d,h,i,i))}function bT(t,e){var n=e.__brushOption,o=n.transformable,l=e.childAt(0);l.useStyle(TT(n)),l.attr({silent:!o,cursor:o?"move":"default"}),qv(["w","e","n","s","se","sw","ne","nw"],function(n){var l=e.childOfName(n),i=function t(e,n){if(1<n.length)return"e"!==(o=[t(e,(n=n.split(""))[0]),t(e,n[1])])[0]&&"w"!==o[0]||o.reverse(),o.join("");var o;return{left:"w",right:"e",top:"n",bottom:"s"}[o=sr({w:"left",e:"right",n:"top",s:"bottom"}[n],ir(e.group))]}(t,n);l&&l.attr({silent:!o,invisible:!o,cursor:o?oT[i]+"-resize":null})})}function vT(t,e,n,o,l,i,a){var s=e.childOfName(n);s&&s.setShape(function(t){var e=Zv(t[0][0],t[1][0]),n=Zv(t[0][1],t[1][1]);return{x:e,y:n,width:Qv(t[0][0],t[1][0])-e,height:Qv(t[0][1],t[1][1])-n}}(OT(t,e,[[o,l],[o+i,l+a]])))}function TT(t){return b({strokeNoScale:!0},t.brushStyle)}function ET(t,e,n,o){var l=[Zv(t,n),Zv(e,o)],i=[Qv(t,n),Qv(e,o)];return[[l[0],i[0]],[l[1],i[1]]]}function BT(t,e,n,o,l,i,a,s){var r=o.__brushOption,c=t(r.range),u=RT(n,i,a);qv(l.split(""),function(t){var e=nT[t];c[e[0]][e[1]]+=u[e[0]]}),r.range=e(ET(c[0][0],c[1][0],c[0][1],c[1][1])),_T(n,o),mT(n,{isEnd:!1})}function IT(t,e,n,o,l){var i=e.__brushOption.range,a=RT(t,n,o);qv(i,function(t){t[0]+=a[0],t[1]+=a[1]}),_T(t,e),mT(t,{isEnd:!1})}function RT(t,e,n){var o=t.group,l=o.transformCoordToLocal(e,n),i=o.transformCoordToLocal(0,0);return[l[0]-i[0],l[1]-i[1]]}function OT(t,e,n){var o=yT(t,e);return o&&!0!==o?o.clipPath(n,t._transform):m(n)}function CT(t){var e=t.event;e.preventDefault&&e.preventDefault()}function NT(t,e,n){return t.childOfName("main").contain(e,n)}function wT(t,e,n,o){var l,i=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],o=e[0],l=n[0]-o[0],i=n[1]-o[1];return 6<tT(l*l+i*i,.5)}(t)||i){if(a&&!i){"single"===s.brushMode&&pT(t);var r=m(s);r.brushType=AT(r.brushType,a),r.panelId=!0===a?null:a.panelId,i=t._creatingCover=sT(t,r),t._covers.push(i)}if(i){var c=PT[AT(t._brushType,a)];i.__brushOption.range=c.getCreatingRange(OT(t,i,t._track)),o&&(rT(t,i),c.updateCommon(t,i)),cT(t,i),l={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&hT(t,e,n)&&pT(t)&&(l={isEnd:o,removeOnClick:!0});return l}function AT(t,e){return"auto"===t?e.defaultBrushType:t}aT.prototype={constructor:aT,enableBrush:function(t){return this._brushType&&function(t){var e=t._zr;(function(t,e,n){var o=Eg(t);o[e]===n&&(o[e]=null)})(e,eT,t._uid),function(t,e){qv(e,function(e,n){t.off(n,e)})}(e,t._handlers),t._brushType=t._brushOption=null}(this),t.brushType&&function(t,e){var n=t._zr;t._enableGlobalPan||function(t,e,n){Eg(t).globalPan=n}(n,0,t._uid),function(t,e){qv(e,function(e,n){t.on(n,e)})}(n,t._handlers),t._brushType=e.brushType,t._brushOption=k(m(lT),e,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};O(t,function(t){e[t.panelId]=m(t)})}else this._panels=null;return this},mount:function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){qv(this._covers,t,e)},updateCovers:function(t){t=C(t,function(t){return k(m(lT),t,!0)});var e=this._covers,n=this._covers=[],o=this,l=this._creatingCover;return new Eh(e,t,function(t,e){return i(t.__brushOption,e)},i).add(a).update(a).remove(function(t){e[t]!==l&&o.group.remove(e[t])}).execute(),this;function i(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function a(i,a){var s=t[i];if(null!=a&&e[a]===l)n[i]=e[a];else{var r=n[i]=null!=a?(e[a].__brushOption=s,e[a]):rT(o,sT(o,s));_T(o,r)}}},unmount:function(){return this.enableBrush(!1),pT(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},I(aT,Nt);var MT={mousedown:function(t){if(this._dragging)ST(this,t);else if(!t.target||!t.target.draggable){CT(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=hT(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,o=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var o=t._zr;return e<0||e>o.getWidth()||n>o.getHeight()}(t,e)){var o=t._zr,l=t._covers,i=hT(t,e,n);if(!t._dragging)for(var a=0;a<l.length;a++){var s=l[a].__brushOption;if(i&&(!0===i||s.panelId===i.panelId)&&PT[s.brushType].contain(l[a],n[0],n[1]))return}i&&o.setCursorStyle("crosshair")}}(this,t,o),this._dragging){CT(t);var l=wT(this,t,o,!1);l&&mT(this,l)}},mouseup:function(t){ST(this,t)}};function ST(t,e){if(t._dragging){CT(e);var n=e.offsetX,o=e.offsetY,l=t.group.transformCoordToLocal(n,o),i=wT(t,e,l,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&mT(t,i)}}var PT={lineX:xT(0),lineY:xT(1),rect:{createCover:function(t,e){return gT(zv(BT,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=kT(t);return ET(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,o){fT(t,e,n,o)},updateCommon:bT,contain:NT},polygon:{createCover:function(t,e){var n=new Nn;return n.add(new Xa({name:"main",style:TT(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Ya({name:"main",draggable:!0,drift:zv(IT,t,e),ondragend:zv(mT,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,o){e.childAt(0).setShape({points:OT(t,e,n)})},updateCommon:bT,contain:NT}};function xT(t){return{createCover:function(e,n){return gT(zv(BT,function(e){var n=[e,[0,100]];return t&&n.reverse(),n},function(e){return e[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=kT(e);return[Zv(n[0][t],n[1][t]),Qv(n[0][t],n[1][t])]},updateCoverShape:function(e,n,o,l){var i,a=yT(e,n);if(!0!==a&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-t]]}var r=[o,i];t&&r.reverse(),fT(e,n,r,l)},updateCommon:bT,contain:NT}}function DT(t){return t=FT(t),function(e,n){return cr(e,t)}}function LT(t,e){return t=FT(t),function(n){var o=null!=e?e:n,l=o?t.width:t.height,i=o?t.x:t.y;return[i,i+(l||0)]}}function UT(t,e,n){return t=FT(t),function(o,l,i){return t.contain(l[0],l[1])&&!Dg(o,e,n)}}function FT(t){return Cn.create(t)}var HT=["axisLine","axisTickLabel","axisName"],VT=fh({type:"parallelAxis",init:function(t,e){VT.superApply(this,"init",arguments),(this._brushController=new aT(e.getZr())).on("brush",M(this._onBrush,this))},render:function(t,e,n,o){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,o)){this.axisModel=t,this.api=n,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Nn,this.group.add(this._axisGroup),t.get("show")){var i=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),a=i.coordinateSystem,s=t.getAreaSelectStyle(),r=s.width,c=t.axis.dim,u=f({strokeContainThreshold:r},a.getAxisLayout(c)),_=new Hm(t,u);O(HT,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(u,s,t,i,r,n);var d=o&&!1===o.animation?null:t;rr(l,this._axisGroup,d)}}},_refreshBrushController:function(t,e,n,o,l,i){var a=n.axis.getExtent(),s=a[1]-a[0],r=Math.min(30,.1*Math.abs(s)),c=Cn.create({x:a[0],y:-l/2,width:s,height:l});c.x-=r,c.width+=2*r,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:DT(c),isTargetByCursor:UT(c,i,o),getLinearBrushOtherExtent:LT(c,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return C(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}(n))},_onBrush:function(t,e){var n=this.axisModel,o=n.axis,l=C(t,function(t){return[o.coordToData(t.range[0],!0),o.coordToData(t.range[1],!0)]});!n.option.realtime!==e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:l})},dispose:function(){this._brushController.dispose()}});fh({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},O(GT,function(t,e){n.getZr().on(e,this._handlers[e]=M(t,this))},this)),B_(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){O(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(f({type:"parallelAxisExpand"},t))}});var GT={mousedown:function(t){jT(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(jT(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(5<Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==o.behavior&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&jT(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),o=n.behavior;"jump"===o&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===o?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===o&&null})}}};function jT(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function WT(t,e,n,o){for(var l,i=[],a=0;a<n.length;a++){var s=n[a],r=t.get(t.mapDimension(s),e);l=r,("category"===o.getAxis(s).type?null==l:null==l||isNaN(l))||i.push(o.dataToPoint(r,s))}return i}function KT(t,e,n,o,l){var i=WT(t,n,o,l),a=new Xa({shape:{points:i},silent:!0,z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function YT(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:.3}}function XT(t,e,n,o){var l=o.lineStyle;e.hasItemOption&&(l=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(l);var i=t.style;i.fill=null,i.stroke=e.getItemVisual(n,"color"),i.opacity=e.getItemVisual(n,"opacity"),o.smooth&&(t.shape.smooth=o.smooth)}uh(function(t){!function(t){if(!t.parallel){var e=!1;O(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}(t),function(t){O(xl(t.parallelAxis),function(e){if(L(e)){var n=e.parallelIndex||0,o=xl(t.parallel)[n];o&&o.parallelAxisDefault&&k(e,o.parallelAxisDefault,!1)}})}(t)}),t_.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var o=t.encodeDefine=Q();O(n.dimensions,function(t){var e=function(t){return+t.replace("dim","")}(t);o.set(t,e)})}}}(n,this),ay(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),o=[];return e.eachActiveState(n,function(e,l){t===e&&o.push(n.getRawIndex(l))}),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),h_.extend({type:"parallel",init:function(){this._dataGroup=new Nn,this.group.add(this._dataGroup),this._data,this._initialized},render:function(t,e,n,o){var l=this._dataGroup,i=t.getData(),a=this._data,s=t.coordinateSystem,r=s.dimensions,c=YT(t);if(i.diff(a).add(function(t){XT(KT(i,l,t,r,s),i,t,c)}).update(function(e,n){var l=a.getItemGraphicEl(n),u=WT(i,e,r,s);i.setItemGraphicEl(e,l),or(l,{shape:{points:u}},o&&!1===o.animation?null:t,e),XT(l,i,e,c)}).remove(function(t){var e=a.getItemGraphicEl(t);l.remove(e)}).execute(),!this._initialized){this._initialized=!0;var u=function(t,e,n){var o=t.model,l=t.getRect(),i=new Qa({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),a="horizontal"===o.get("layout")?"width":"height";return i.setShape(a,0),lr(i,{shape:{width:l.width,height:l.height}},e,n),i}(s,t,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(u)}this._data=i},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var o=e.getData(),l=e.coordinateSystem,i=l.dimensions,a=YT(e),s=t.start;s<t.end;s++){var r=KT(o,this._dataGroup,s,i,l);r.incremental=!0,XT(r,o,s,a)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var $T=["lineStyle","normal","opacity"];ph({seriesType:"parallel",reset:function(t,e,n){var o=t.getModel("itemStyle"),l=t.getModel("lineStyle"),i=e.get("color"),a=l.get("color")||o.get("color")||i[t.seriesIndex%i.length],s=t.get("inactiveOpacity"),r=t.get("activeOpacity"),c=t.getModel("lineStyle").getLineStyle(),u=t.coordinateSystem,_=t.getData(),d={normal:c.opacity,active:r,inactive:s};return _.setVisual("color",a),{progress:function(t,e){u.eachActiveState(e,function(t,n){var o=d[t];if("normal"===t&&e.hasItemOption){var l=e.getItemModel(n).get($T,!0);null!=l&&(o=l)}e.setItemVisual(n,"opacity",o)},t.start,t.end)}}}});var zT=t_.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){for(var n=t.edges||t.links,o=t.data||t.nodes,l=t.levels,i=this.levelModels={},a=0;a<l.length;a++)null!=l[a].depth&&0<=l[a].depth&&(i[l[a].depth]=new vr(l[a],this,e));if(o&&n)return Sb(o,n,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,o=n.getData().getItemLayout(e).depth;return n.levelModels[o]||this.parentModel}),t}),e.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,o=n.getGraph().getEdgeByIndex(e).node1.getLayout().depth;return n.levelModels[o]||this.parentModel}),t})}).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var o=this.getDataParams(t,n),l=o.data,i=l.source+" -- "+l.target;return o.value&&(i+=" : "+o.value),Jr(i)}if("node"!==n)return zT.superCall(this,"formatTooltip",t,e);var a=this.getGraph().getNodeByIndex(t).getLayout().value,s=this.getDataParams(t,n).data.name;return a&&(i=s+" : "+a),Jr(i)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},getDataParams:function(t,e){var n=zT.superCall(this,"getDataParams",t,e);if(null==n.value&&"node"===e){var o=this.getGraph().getNodeByIndex(t).getLayout().value;n.value=o}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),qT=["itemStyle","opacity"],JT=["emphasis","itemStyle","opacity"],ZT=["lineStyle","opacity"],QT=["emphasis","lineStyle","opacity"];function tE(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function eE(t,e,n){var o=t.getGraphicEl(),l=tE(t,e);null!=n&&(null==l&&(l=1),l*=n),o.downplay&&o.downplay(),o.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",l)})}function nE(t,e){var n=tE(t,e),o=t.getGraphicEl();o.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)}),o.highlight&&o.highlight()}var oE=vs({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function lE(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&0<=e.depth}function iE(t,e,n,o,l){var i="vertical"===l?"x":"y";O(t,function(t){var a,s,r;t.sort(function(t,e){return t.getLayout()[i]-e.getLayout()[i]});for(var c=0,u=t.length,_="vertical"===l?"dx":"dy",d=0;d<u;d++)0<(r=c-(s=t[d]).getLayout()[i])&&(a=s.getLayout()[i]+r,"vertical"===l?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[i]+s.getLayout()[_]+e;if(0<(r=c-e-("vertical"===l?o:n)))for(a=s.getLayout()[i]-r,"vertical"===l?s.setLayout({x:a},!0):s.setLayout({y:a},!0),c=a,d=u-2;0<=d;--d)0<(r=(s=t[d]).getLayout()[i]+s.getLayout()[_]+e-c)&&(a=s.getLayout()[i]-r,"vertical"===l?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[i]})}function aE(t,e,n){O(t.slice().reverse(),function(t){O(t,function(t){if(t.outEdges.length){var o=hE(t.outEdges,sE,n)/hE(t.outEdges,dE,n);if(isNaN(o)){var l=t.outEdges.length;o=l?hE(t.outEdges,rE,n)/l:0}if("vertical"===n){var i=t.getLayout().x+(o-_E(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(o-_E(t,n))*e;t.setLayout({y:a},!0)}}})})}function sE(t,e){return _E(t.node2,e)*t.getValue()}function rE(t,e){return _E(t.node2,e)}function cE(t,e){return _E(t.node1,e)*t.getValue()}function uE(t,e){return _E(t.node1,e)}function _E(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function dE(t){return t.getValue()}function hE(t,e,n){for(var o=0,l=t.length,i=-1;++i<l;){var a=+e.call(t,t[i],n);isNaN(a)||(o+=a)}return o}function yE(t,e,n){O(t,function(t){O(t,function(t){if(t.inEdges.length){var o=hE(t.inEdges,cE,n)/hE(t.inEdges,dE,n);if(isNaN(o)){var l=t.inEdges.length;o=l?hE(t.inEdges,uE,n)/l:0}if("vertical"===n){var i=t.getLayout().x+(o-_E(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(o-_E(t,n))*e;t.setLayout({y:a},!0)}}})})}vh({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var o=this,l=t.getGraph(),i=this.group,a=t.layoutInfo,s=a.width,r=a.height,c=t.getData(),u=t.getData("edge"),_=t.get("orient");this._model=t,i.removeAll(),i.attr("position",[a.x,a.y]),l.eachEdge(function(e){var n=new oE;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var o,l,a,c,d,h,y,p,m=e.getModel("lineStyle"),k=m.get("curveness"),g=e.node1.getLayout(),f=e.node1.getModel(),b=f.get("localX"),v=f.get("localY"),T=e.node2.getLayout(),E=e.node2.getModel(),B=E.get("localX"),I=E.get("localY"),R=e.getLayout();switch(n.shape.extent=Math.max(1,R.dy),p="vertical"===(n.shape.orient=_)?(o=(null!=b?b*s:g.x)+R.sy,l=(null!=v?v*r:g.y)+g.dy,a=(null!=B?B*s:T.x)+R.ty,d=o,h=l*(1-k)+(c=null!=I?I*r:T.y)*k,y=a,l*k+c*(1-k)):(o=(null!=b?b*s:g.x)+g.dx,l=(null!=v?v*r:g.y)+R.sy,d=o*(1-k)+(a=null!=B?B*s:T.x)*k,h=l,y=o*k+a*(1-k),c=(null!=I?I*r:T.y)+R.ty),n.setShape({x1:o,y1:l,x2:a,y2:c,cpx1:d,cpy1:h,cpx2:y,cpy2:p}),n.setStyle(m.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}js(n,e.getModel("emphasis.lineStyle").getItemStyle()),i.add(n),u.setItemGraphicEl(e.dataIndex,n)}),l.eachNode(function(e){var n=e.getLayout(),o=e.getModel(),l=o.get("localX"),a=o.get("localY"),u=o.getModel("label"),_=o.getModel("emphasis.label"),d=new Qa({shape:{x:null!=l?l*s:n.x,y:null!=a?a*r:n.y,width:n.dx,height:n.dy},style:o.getModel("itemStyle").getItemStyle()}),h=e.getModel("emphasis.itemStyle").getItemStyle();Xs(d.style,h,u,_,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),d.setStyle("fill",e.getVisual("color")),js(d,h),i.add(d),c.setItemGraphicEl(e.dataIndex,d),d.dataType="node"}),c.eachItemGraphicEl(function(e,l){var i=c.getItemModel(l);i.get("draggable")&&(e.drift=function(e,i){o._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=i,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:c.getRawIndex(l),localX:this.shape.x/s,localY:this.shape.y/r})},e.ondragend=function(){o._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),e.highlight=function(){this.trigger("emphasis")},e.downplay=function(){this.trigger("normal")},e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),i.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){o._focusAdjacencyDisabled||(o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){o._focusAdjacencyDisabled||o._dispatchUnfocus(n)}))}),u.eachItemGraphicEl(function(e,l){var i=u.getItemModel(l);e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),i.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){o._focusAdjacencyDisabled||(o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){o._focusAdjacencyDisabled||o._dispatchUnfocus(n)}))}),!this._data&&t.get("animation")&&i.setClipPath(function(t,e,n){var o=new Qa({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return lr(o,{shape:{width:t.width+20}},e,function(){i.removeClipPath()}),o}(i.getBoundingRect(),t)),this._data=t.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(t){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){e._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,o){var l=t.getData(),i=l.graph,a=o.dataIndex,s=l.getItemModel(a),r=o.edgeDataIndex;if(null!=a||null!=r){var c=i.getNodeByIndex(a),u=i.getEdgeByIndex(r);if(i.eachNode(function(t){eE(t,qT,.1)}),i.eachEdge(function(t){eE(t,ZT,.1)}),c){nE(c,JT);var _=s.get("focusNodeAdjacency");"outEdges"===_?O(c.outEdges,function(t){t.dataIndex<0||(nE(t,QT),nE(t.node2,JT))}):"inEdges"===_?O(c.inEdges,function(t){t.dataIndex<0||(nE(t,QT),nE(t.node1,JT))}):"allEdges"===_&&O(c.edges,function(t){t.dataIndex<0||(nE(t,QT),t.node1!==c&&nE(t.node1,JT),t.node2!==c&&nE(t.node2,JT))})}u&&(nE(u,QT),nE(u.node1,JT),nE(u.node2,JT))}},unfocusNodeAdjacency:function(t,e,n,o){var l=t.getGraph();l.eachNode(function(t){eE(t,qT)}),l.eachEdge(function(t){eE(t,ZT)})}}),dh({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),yh(function(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),o=t.get("nodeGap"),l=function(t,e){return yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),i=(t.layoutInfo=l).width,a=l.height,s=t.getGraph(),r=s.nodes,c=s.edges;!function(t){O(t,function(t){var e=hE(t.outEdges,dE),n=hE(t.inEdges,dE),o=t.getValue()||0,l=Math.max(e,n,o);t.setLayout({value:l},!0)})}(r),function(t,e,n,o,l,i,a,s,r){(function(t,e,n,o,l,i,a){for(var s=[],r=[],c=[],u=[],_=0,d=0;d<e.length;d++)s[d]=1;for(d=0;d<t.length;d++)r[d]=t[d].inEdges.length,0===r[d]&&c.push(t[d]);for(var h=-1;c.length;){for(var y=0;y<c.length;y++){var p=c[y],m=p.hostGraph.data.getRawDataItem(p.dataIndex),k=null!=m.depth&&0<=m.depth;k&&m.depth>h&&(h=m.depth),p.setLayout({depth:k?m.depth:_},!0),"vertical"===i?p.setLayout({dy:n},!0):p.setLayout({dx:n},!0);for(var g=0;g<p.outEdges.length;g++){var f=p.outEdges[g];s[e.indexOf(f)]=0;var b=f.node2;0==--r[t.indexOf(b)]&&u.indexOf(b)<0&&u.push(b)}}++_,c=u,u=[]}for(d=0;d<s.length;d++)if(1===s[d])throw new Error("Sankey is a DAG, the original data has cycle!");var v=_-1<h?h:_-1;a&&"left"!==a&&function(t,e,n,o){if("right"===e){for(var l=[],i=t,a=0;i.length;){for(var s=0;s<i.length;s++){var r=i[s];r.setLayout({skNodeHeight:a},!0);for(var c=0;c<r.inEdges.length;c++){var u=r.inEdges[c];l.indexOf(u.node1)<0&&l.push(u.node1)}}i=l,l=[],++a}O(t,function(t){lE(t)||t.setLayout({depth:Math.max(0,o-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&function(t,e){O(t,function(t){lE(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}(t,o)}(t,a,0,v),function(t,e,n){O(t,function(t){var o=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:o},!0):t.setLayout({x:o},!0)})}(t,"vertical"===i?(l-n)/v:(o-n)/v,i)})(t,e,n,l,i,s,r),function(t,e,n,o,l,i,a){var s=function(t,e){var n=[],o="vertical"===e?"y":"x",l=ql(t,function(t){return t.getLayout()[o]});return l.keys.sort(function(t,e){return t-e}),O(l.keys,function(t){n.push(l.buckets.get(t))}),n}(t,a);(function(t,e,n,o,l,i){var a=1/0;O(t,function(t){var e=t.length,s=0;O(t,function(t){s+=t.getLayout().value});var r="vertical"===i?(o-(e-1)*l)/s:(n-(e-1)*l)/s;r<a&&(a=r)}),O(t,function(t){O(t,function(t,e){var n=t.getLayout().value*a;"vertical"===i?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),O(e,function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)})})(s,e,n,o,l,a),iE(s,l,n,o,a);for(var r=1;0<i;i--)aE(s,r*=.99,a),iE(s,l,n,o,a),yE(s,r,a),iE(s,l,n,o,a)}(t,e,i,l,o,a,s),function(t,e){var n="vertical"===e?"x":"y";O(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),O(t,function(t){var e=0,n=0;O(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),O(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,s)}(r,c,n,o,i,a,0!==w(r,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))})}),ph(function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,o=-1/0;O(e,function(t){var e=t.getLayout().value;e<n&&(n=e),o<e&&(o=e)}),O(e,function(e){var l=new qf({type:"color",mappingMethod:"linear",dataExtent:[n,o],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),i=e.getModel().get("itemStyle.color");null!=i?e.setVisual("color",i):e.setVisual("color",l)})}})});var pE={_baseAxisDim:null,getInitialData:function(t,e){var n,o,l=e.getComponent("xAxis",this.get("xAxisIndex")),i=e.getComponent("yAxis",this.get("yAxisIndex")),a=l.get("type"),s=i.get("type");"category"===a?(t.layout="horizontal",n=l.getOrdinalMeta(),o=!0):"category"===s?(t.layout="vertical",n=i.getOrdinalMeta(),o=!0):t.layout=t.layout||"horizontal";var r=["x","y"],c="horizontal"===t.layout?0:1,u=this._baseAxisDim=r[c],_=r[1-c],d=[l,i],h=d[c].get("type"),y=d[1-c].get("type"),p=t.data;if(p&&o){var m=[];O(p,function(t,e){var n;t.value&&P(t.value)?(n=t.value.slice(),t.value.unshift(e)):P(t)?(n=t.slice(),t.unshift(e)):n=t,m.push(n)}),t.data=m}var k=this.defaultValueDimensions,g=[{name:u,type:Oh(h),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:_,type:Oh(y),dimsDef:k.slice()}];return Sk(this,{coordDimensions:g,dimensionsCount:k.length+1,encodeDefaulter:S(Kc,g,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};I(t_.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),pE,!0);var mE=["itemStyle"],kE=["emphasis","itemStyle"],gE=(h_.extend({type:"boxplot",render:function(t,e,n){var o=t.getData(),l=this.group,i=this._data;this._data||l.removeAll();var a="horizontal"===t.get("layout")?1:0;o.diff(i).add(function(t){if(o.hasValue(t)){var e=fE(o.getItemLayout(t),o,t,a,!0);o.setItemGraphicEl(t,e),l.add(e)}}).update(function(t,e){var n=i.getItemGraphicEl(e);if(o.hasValue(t)){var s=o.getItemLayout(t);n?bE(s,n,o,t):n=fE(s,o,t,a),l.add(n),o.setItemGraphicEl(t,n)}else l.remove(n)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&l.remove(e)}).execute(),this._data=o},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:et}),va.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,o=0;for(t.moveTo(n[o][0],n[o][1]),o++;o<4;o++)t.lineTo(n[o][0],n[o][1]);for(t.closePath();o<n.length;o++)t.moveTo(n[o][0],n[o][1]),o++,t.lineTo(n[o][0],n[o][1])}}));function fE(t,e,n,o,l){var i=t.ends,a=new gE({shape:{points:l?function(t,e,n){return C(t,function(t){return(t=t.slice())[e]=n.initBaseline,t})}(i,o,t):i}});return bE(t,a,e,n,l),a}function bE(t,e,n,o,l){var i=n.hostModel;(0,yr[l?"initProps":"updateProps"])(e,{shape:{points:t.ends}},i,o);var a=n.getItemModel(o),s=a.getModel(mE),r=n.getItemVisual(o,"color"),c=s.getItemStyle(["borderColor"]);c.stroke=r,c.strokeNoScale=!0,e.useStyle(c),e.z2=100,js(e,a.getModel(kE).getItemStyle())}var vE=["itemStyle","borderColor"],TE=O;ph(function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var o=n[e.seriesIndex%n.length],l=e.getData();l.setVisual({legendSymbol:"roundRect",color:e.get(vE)||o}),t.isSeriesFiltered(e)||l.each(function(t){var e=l.getItemModel(t);l.setItemVisual(t,{color:e.get(vE,!0)})})})}),yh(function(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var o=t.getBaseAxis(),l=E(n,o);l<0&&(l=n.length,n[l]=o,e[l]={axis:o,seriesModels:[]}),e[l].seriesModels.push(t)}),e}(t);TE(e,function(t){var e=t.seriesModels;e.length&&(function(t){var e,n,o=t.axis,l=t.seriesModels,i=l.length,a=t.boxWidthList=[],s=t.boxOffsetList=[],r=[];if("category"===o.type)n=o.getBandWidth();else{var c=0;TE(l,function(t){c=Math.max(c,t.getData().count())}),e=o.getExtent(),Math.abs(e[1]-e[0])}TE(l,function(t){var e=t.get("boxWidth");P(e)||(e=[e,e]),r.push([Cr(e[0],n)||0,Cr(e[1],n)||0])});var u=.8*n-2,_=u/i*.3,d=(u-_*(i-1))/i,h=d/2-u/2;TE(l,function(t,e){s.push(h),h+=_+d,a.push(Math.min(Math.max(d,r[e][0]),r[e][1]))})}(t),TE(e,function(e,n){!function(t,e,n){var o=t.coordinateSystem,l=t.getData(),i=n/2,a="horizontal"===t.get("layout")?0:1,s=1-a,r=["x","y"],c=l.mapDimension(r[a]),u=l.mapDimension(r[s],!0);if(!(null==c||u.length<5))for(var _=0;_<l.count();_++){var d=l.get(c,_),h=f(d,u[2],_),y=f(d,u[0],_),p=f(d,u[1],_),m=f(d,u[3],_),k=f(d,u[4],_),g=[];b(g,p,0),b(g,m,1),g.push(y,p,k,m),v(g,y),v(g,k),v(g,h),l.setItemLayout(_,{initBaseline:h[s],ends:g})}function f(t,n,i){var r,c=l.get(n,i),u=[];return u[a]=t,u[s]=c,isNaN(t)||isNaN(c)?r=[NaN,NaN]:(r=o.dataToPoint(u))[a]+=e,r}function b(t,e,n){var o=e.slice(),l=e.slice();o[a]+=i,l[a]-=i,n?t.push(o,l):t.push(l,o)}function v(t,e){var n=e.slice(),o=e.slice();n[a]-=i,o[a]+=i,t.push(n,o)}}(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}),I(t_.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var o=e.getItemLayout(t);return o&&n.rect(o.brushRect)}}),pE,!0);var EE=["itemStyle"],BE=["emphasis","itemStyle"],IE=["color","color0","borderColor","borderColor0"],RE=(h_.extend({type:"candlestick",render:function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,o){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,o=this.group,l=e.getLayout("isSimpleBox"),i=t.get("clip",!0),a=t.coordinateSystem,s=a.getArea&&a.getArea();this._data||o.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var a,r=e.getItemLayout(n);if(i&&CE(s,r))return;lr(a=OE(r,n,!0),{shape:{points:r.ends}},t,n),NE(a,e,n,l),o.add(a),e.setItemGraphicEl(n,a)}}).update(function(a,r){var c=n.getItemGraphicEl(r);if(e.hasValue(a)){var u=e.getItemLayout(a);i&&CE(s,u)?o.remove(c):(c?or(c,{shape:{points:u.ends}},t,a):c=OE(u,a),NE(c,e,a,l),o.add(c),e.setItemGraphicEl(a,c))}else o.remove(c)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&o.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),AE(t,this.group);var e=t.get("clip",!0)?_m(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var n,o=e.getData(),l=o.getLayout("isSimpleBox");null!=(n=t.next());){var i;NE(i=OE(o.getItemLayout(n),n),o,n,l),i.incremental=!0,this.group.add(i)}},_incrementalRenderLarge:function(t,e){AE(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:et}),va.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}}));function OE(t,e,n){var o=t.ends;return new RE({shape:{points:n?function(t,e){return C(t,function(t){return(t=t.slice())[1]=e.initBaseline,t})}(o,t):o},z2:100})}function CE(t,e){for(var n=!0,o=0;o<e.ends.length;o++)if(t.contain(e.ends[o][0],e.ends[o][1])){n=!1;break}return n}function NE(t,e,n,o){var l=e.getItemModel(n),i=l.getModel(EE),a=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||a,r=i.getItemStyle(IE);t.useStyle(r),t.style.strokeNoScale=!0,t.style.fill=a,t.style.stroke=s,t.__simpleBox=o,js(t,l.getModel(BE).getItemStyle())}var wE=va.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,o=0;o<n.length;)if(this.__sign===n[o++]){var l=n[o++];t.moveTo(l,n[o++]),t.lineTo(l,n[o++])}else o+=3}});function AE(t,e,n){var o=t.getData(),l=o.getLayout("largePoints"),i=new wE({shape:{points:l},__sign:1});e.add(i);var a=new wE({shape:{points:l},__sign:-1});e.add(a),ME(1,i,t,o),ME(-1,a,t,o),n&&(i.incremental=!0,a.incremental=!0)}function ME(t,e,n,o){var l=0<t?"P":"N",i=o.getVisual("borderColor"+l)||o.getVisual("color"+l),a=n.getModel(EE).getItemStyle(IE);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var SE=["itemStyle","borderColor"],PE=["itemStyle","borderColor0"],xE=["itemStyle","color"],DE=["itemStyle","color0"],LE={seriesType:"candlestick",plan:u_(),performRawSeries:!0,reset:function(t,e){if(t.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:o(1,t),borderColorN:o(-1,t)}),!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var l;null!=(l=t.next());){var i=e.getItemModel(l),a=e.getItemLayout(l).sign;e.setItemVisual(l,{color:n(a,i),borderColor:o(a,i)})}}};function n(t,e){return e.get(0<t?xE:DE)}function o(t,e){return e.get(0<t?SE:PE)}}},UE="undefined"!=typeof Float32Array?Float32Array:Array,FE={seriesType:"candlestick",plan:u_(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),o=function(t,e){var n,o=t.getBaseAxis(),l="category"===o.type?o.getBandWidth():(n=o.getExtent(),Math.abs(n[1]-n[0])/e.count()),i=Cr(j(t.get("barMaxWidth"),l),l),a=Cr(j(t.get("barMinWidth"),1),l),s=t.get("barWidth");return null!=s?Cr(s,l):Math.max(Math.min(l/2,i),a)}(t,n),l=["x","y"],i=n.mapDimension(l[0]),a=n.mapDimension(l[1],!0),s=a[0],r=a[1],c=a[2],u=a[3];if(n.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),!(null==i||a.length<4))return{progress:t.pipelineContext.large?function(t,n){for(var o,l,a=new UE(4*t.count),_=0,d=[],h=[];null!=(l=t.next());){var y=n.get(i,l),p=n.get(s,l),m=n.get(r,l),k=n.get(c,l),g=n.get(u,l);isNaN(y)||isNaN(k)||isNaN(g)?(a[_++]=NaN,_+=3):(a[_++]=HE(n,l,p,m,r),d[0]=y,d[1]=k,o=e.dataToPoint(d,null,h),a[_++]=o?o[0]:NaN,a[_++]=o?o[1]:NaN,d[1]=g,o=e.dataToPoint(d,null,h),a[_++]=o?o[1]:NaN)}n.setLayout("largePoints",a)}:function(t,n){for(var l;null!=(l=t.next());){var a=n.get(i,l),_=n.get(s,l),d=n.get(r,l),h=n.get(c,l),y=n.get(u,l),p=Math.min(_,d),m=Math.max(_,d),k=T(p,a),g=T(m,a),f=T(h,a),b=T(y,a),v=[];E(v,g,0),E(v,k,1),v.push(I(b),I(g),I(f),I(k)),n.setItemLayout(l,{sign:HE(n,l,_,d,r),initBaseline:d<_?g[1]:k[1],ends:v,brushRect:B(h,y,a)})}function T(t,n){var o=[];return o[0]=n,o[1]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(o)}function E(t,e,n){var l=e.slice(),i=e.slice();l[0]=Ns(l[0]+o/2,1,!1),i[0]=Ns(i[0]-o/2,1,!0),n?t.push(l,i):t.push(i,l)}function B(t,e,n){var l=T(t,n),i=T(e,n);return l[0]-=o/2,i[0]-=o/2,{x:l[0],y:l[1],width:o,height:i[1]-l[1]}}function I(t){return t[0]=Ns(t[0],1),t}}}}};function HE(t,e,n,o,l){return o<n?-1:n<o?1:0<e?t.get(l,e-1)<=o?1:-1:1}function VE(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}function GE(t,e){Nn.call(this);var n=new Pp(t,e),o=new Nn;this.add(n),this.add(o),o.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}uh(function(t){t&&P(t.series)&&O(t.series,function(t){L(t)&&"k"===t.type&&(t.type="candlestick")})}),ph(LE),yh(FE),t_.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return ay(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var jE=GE.prototype;jE.stopEffectAnimation=function(){this.childAt(1).removeAll()},jE.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,o=this.childAt(1),l=0;l<3;l++){var i=dp(e,-1,-1,2,2,n);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var a=-l/3*t.period+t.effectOffset;i.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(a).start(),i.animateStyle(!0).when(t.period,{opacity:0}).delay(a).start(),o.add(i)}VE(o,t)},jE.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),o=["symbolType","period","rippleScale"],l=0;l<o.length;l++){var i=o[l];if(e[i]!==t[i])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}VE(n,t)},jE.highlight=function(){this.trigger("emphasis")},jE.downplay=function(){this.trigger("normal")},jE.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var o=this.childAt(1),l=t.getItemModel(e),i=t.getItemVisual(e,"symbol"),a=function(t){return P(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"color");o.attr("scale",a),o.traverse(function(t){t.attr({fill:s})});var r=l.getShallow("symbolOffset");if(r){var c=o.position;c[0]=Cr(r[0],a[0]),c[1]=Cr(r[1],a[1])}var u=t.getItemVisual(e,"symbolRotate");o.rotation=(u||0)*Math.PI/180||0;var _={};if(_.showEffectOn=n.get("showEffectOn"),_.rippleScale=l.get("rippleEffect.scale"),_.brushType=l.get("rippleEffect.brushType"),_.period=1e3*l.get("rippleEffect.period"),_.effectOffset=e/t.count(),_.z=l.getShallow("z")||0,_.zlevel=l.getShallow("zlevel")||0,_.symbolType=i,_.color=s,_.rippleEffectColor=l.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===_.showEffectOn)this._effectCfg?this.updateEffectAnimation(_):this.startEffectAnimation(_),this._effectCfg=_;else{this._effectCfg=null,this.stopEffectAnimation();var d=this.childAt(0),h=function(){d.highlight(),"render"!==_.showEffectOn&&this.startEffectAnimation(_)},y=function(){d.downplay(),"render"!==_.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",h,this).on("mouseout",y,this).on("emphasis",h,this).on("normal",y,this)}this._effectCfg=_},jE.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},B(GE,Nn),vh({type:"effectScatter",init:function(){this._symbolDraw=new Wp(GE)},render:function(t,e,n){var o=t.getData(),l=this._symbolDraw;l.updateData(o),this.group.add(l.group)},updateTransform:function(t,e,n){var o=t.getData();this.group.dirty();var l=gm().reset(t);l.progress&&l.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=he(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),ph(km("effectScatter","circle")),yh(gm("effectScatter"));var WE="undefined"==typeof Uint32Array?Array:Uint32Array,KE="undefined"==typeof Float64Array?Array:Float64Array;function YE(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=C(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),g([e,t[0],t[1]])}))}var XE=t_.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],YE(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),XE.superApply(this,"init",arguments)},mergeOption:function(t){if(YE(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}XE.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=tt(this._flatCoords,e.flatCoords),this._flatCoordsOffset=tt(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],o=this._flatCoordsOffset[2*t+1],l=0;l<o;l++)e[l]=e[l]||[],e[l][0]=this._flatCoords[n+2*l],e[l][1]=this._flatCoords[n+2*l+1];return o}var i=this._getCoordsFromItemModel(t);for(l=0;l<i.length;l++)e[l]=e[l]||[],e[l][0]=i[l][0],e[l][1]=i[l][1];return i.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"!=typeof t[0])return{flatCoordsOffset:null,flatCoords:null,count:t.length};for(var n=t.length,o=new WE(n),l=new KE(n),i=0,a=0,s=0,r=0;r<n;){s++;var c=t[r++];o[a++]=i+e,o[a++]=c;for(var u=0;u<c;u++){var _=t[r++],d=t[r++];l[i++]=_,l[i++]=d}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,a),flatCoords:l,count:s}},getInitialData:function(t,e){var n=new Fh(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,o,l){if(t instanceof Array)return NaN;n.hasItemOption=!0;var i=t.value;return null!=i?i instanceof Array?i[l]:i:void 0}),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var o=e.get("fromName"),l=e.get("toName"),i=[];return null!=o&&i.push(o),null!=l&&i.push(l),Jr(i.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function $E(t,e,n){Nn.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}var zE=$E.prototype;function qE(t,e,n){Nn.call(this),this._createPolyline(t,e,n)}zE.createLine=function(t,e,n){return new qb(t,e,n)},zE._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),o=n.get("symbolSize"),l=n.get("symbol");P(o)||(o=[o,o]);var i=n.get("color")||t.getItemVisual(e,"color"),a=this.childAt(1);this._symbolType!==l&&(this.remove(a),(a=dp(l,-.5,-.5,1,1,i)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",i),a.setStyle(n.getItemStyle(["color"])),a.attr("scale",o),a.setColor(i),a.attr("scale",o),this._symbolType=l,this._symbolScale=o,this._updateEffectAnimation(t,n,e))},zE._updateEffectAnimation=function(t,e,n){var o=this.childAt(1);if(o){var l=this,i=t.getItemLayout(n),a=1e3*e.get("period"),s=e.get("loop"),r=e.get("constantSpeed"),c=G(e.get("delay"),function(e){return e/t.count()*a/3}),u="function"==typeof c;if(o.ignore=!0,this.updateAnimationPoints(o,i),0<r&&(a=this.getLineLength(o)/r*1e3),a!==this._period||s!==this._loop){o.stopAnimation();var _=c;u&&(_=c(n)),0<o.__t&&(_=-a*o.__t),o.__t=0;var d=o.animate("",s).when(a,{__t:1}).delay(_).during(function(){l.updateSymbolPosition(o)});s||d.done(function(){l.remove(o)}),d.start()}this._period=a,this._loop=s}},zE.getLineLength=function(t){return gt(t.__p1,t.__cp1)+gt(t.__cp1,t.__p2)},zE.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},zE.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},zE.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,o=t.__cp1,l=t.__t,i=t.position,a=[i[0],i[1]],s=Ii,r=Ri;i[0]=s(e[0],o[0],n[0],l),i[1]=s(e[1],o[1],n[1],l);var c=r(e[0],o[0],n[0],l),u=r(e[1],o[1],n[1],l);if(t.rotation=-Math.atan2(u,c)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==t.__lastT&&t.__lastT<t.__t){var _=1.05*gt(a,i);t.attr("scale",[t.scale[0],_]),1===l&&(i[0]=a[0]+(i[0]-a[0])/2,i[1]=a[1]+(i[1]-a[1])/2)}else 1===t.__lastT?(_=2*gt(e,i),t.attr("scale",[t.scale[0],_])):t.attr("scale",this._symbolScale);t.__lastT=t.__t,t.ignore=!1},zE.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},B($E,Nn);var JE=qE.prototype;function ZE(t,e,n){$E.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}JE._createPolyline=function(t,e,n){var o=t.getItemLayout(e),l=new Xa({shape:{points:o}});this.add(l),this._updateCommonStl(t,e,n)},JE.updateData=function(t,e,n){var o=t.hostModel;or(this.childAt(0),{shape:{points:t.getItemLayout(e)}},o,e),this._updateCommonStl(t,e,n)},JE._updateCommonStl=function(t,e,n){var o=this.childAt(0),l=t.getItemModel(e),i=t.getItemVisual(e,"color"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!t.hasItemOption||(a=l.getModel("lineStyle").getLineStyle(),s=l.getModel("emphasis.lineStyle").getLineStyle()),o.useStyle(b({strokeNoScale:!0,fill:"none",stroke:i},a)),o.hoverStyle=s,js(this)},JE.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},B(qE,Nn);var QE=ZE.prototype;QE.createLine=function(t,e,n){return new qE(t,e,n)},QE.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],o=0,l=1;l<e.length;l++){var i=e[l-1],a=e[l];o+=gt(i,a),n.push(o)}if(0!==o){for(l=0;l<n.length;l++)n[l]/=o;this._offsets=n,this._length=o}},QE.getLineLength=function(t){return this._length},QE.updateSymbolPosition=function(t){var e=t.__t,n=this._points,o=this._offsets,l=n.length;if(o){var i=this._lastFrame;if(e<this._lastFramePercent){for(a=Math.min(i+1,l-1);0<=a&&!(o[a]<=e);a--);a=Math.min(a,l-2)}else{for(var a=i;a<l&&!(o[a]>e);a++);a=Math.min(a-1,l-2)}vt(t.position,n[a],n[a+1],(e-o[a])/(o[a+1]-o[a]));var s=n[a+1][0]-n[a][0],r=n[a+1][1]-n[a][1];t.rotation=-Math.atan2(r,s)-Math.PI/2,this._lastFrame=a,this._lastFramePercent=e,t.ignore=!1}},B(ZE,$E);var tB=vs({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,o=e.curveness;if(e.polyline)for(var l=0;l<n.length;){var i=n[l++];if(0<i){t.moveTo(n[l++],n[l++]);for(var a=1;a<i;a++)t.lineTo(n[l++],n[l++])}}else for(l=0;l<n.length;){var s=n[l++],r=n[l++],c=n[l++],u=n[l++];if(t.moveTo(s,r),0<o){var _=(s+c)/2-(r-u)*o,d=(r+u)/2-(c-s)*o;t.quadraticCurveTo(_,d,c,u)}else t.lineTo(c,u)}},findDataIndex:function(t,e){var n=this.shape,o=n.segs,l=n.curveness;if(n.polyline)for(var i=0,a=0;a<o.length;){var s=o[a++];if(0<s)for(var r=o[a++],c=o[a++],u=1;u<s;u++)if(na(r,c,_=o[a++],d=o[a++]))return i;i++}else for(i=0,a=0;a<o.length;){r=o[a++],c=o[a++];var _=o[a++],d=o[a++];if(0<l){if(la(r,c,(r+_)/2-(c-d)*l,(c+d)/2-(_-r)*l,_,d))return i}else if(na(r,c,_,d))return i;i++}return-1}});function eB(){this.group=new Nn}var nB=eB.prototype;nB.isPersistent=function(){return!this._incremental},nB.updateData=function(t){this.group.removeAll();var e=new tB({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},nB.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),5e5<t.count()?(this._incremental||(this._incremental=new us({silent:!0})),this.group.add(this._incremental)):this._incremental=null},nB.incrementalUpdate=function(t,e){var n=new tB;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},nB.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},nB._setCommon=function(t,e,n){var o=e.hostModel;t.setShape({polyline:o.get("polyline"),curveness:o.get("lineStyle.curveness")}),t.useStyle(o.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var l=e.getVisual("color");l&&t.setStyle("stroke",l),t.setStyle("fill"),n||(t.seriesIndex=o.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<n&&(t.dataIndex=n+t.__startIndex)}))},nB._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var oB={seriesType:"lines",plan:u_(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),o=t.pipelineContext.large;return{progress:function(l,i){var a=[];if(o){var s,r=l.end-l.start;if(n){for(var c=0,u=l.start;u<l.end;u++)c+=t.getLineCoordsCount(u);s=new Float32Array(r+2*c)}else s=new Float32Array(4*r);var _=0,d=[];for(u=l.start;u<l.end;u++){var h=t.getLineCoords(u,a);n&&(s[_++]=h);for(var y=0;y<h;y++)d=e.dataToPoint(a[y],!1,d),s[_++]=d[0],s[_++]=d[1]}i.setLayout("linesPoints",s)}else for(u=l.start;u<l.end;u++){var p=i.getItemModel(u),m=(h=t.getLineCoords(u,a),[]);if(n)for(var k=0;k<h;k++)m.push(e.dataToPoint(a[k]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var g=p.get("lineStyle.curveness");+g&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*g,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*g])}i.setItemLayout(u,m)}}}}};function lB(t){return t instanceof Array||(t=[t,t]),t}vh({type:"lines",init:function(){},render:function(t,e,n){var o=t.getData(),l=this._updateLineDraw(o,t),i=t.get("zlevel"),a=t.get("effect.trailLength"),s=n.getZr(),r="svg"===s.painter.getType();r||s.painter.getLayer(i).clear(!0),null==this._lastZlevel||r||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a&&(r||s.configLayer(i,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),l.updateData(o);var c=t.get("clip",!0)&&_m(t.coordinateSystem,!1,t);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=i,this._finished=!0},incrementalPrepareRender:function(t,e,n){var o=t.getData();this._updateLineDraw(o,t).incrementalPrepareUpdate(o),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var o=t.getData(),l=t.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var i=oB.reset(t);i.progress&&i.progress({start:0,end:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,o=this._showEffect(e),l=!!e.get("polyline"),i=e.pipelineContext.large;return n&&o===this._hasEffet&&l===this._isPolyline&&i===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=i?new eB:new Zb(l?o?ZE:qE:o?$E:qb),this._hasEffet=o,this._isPolyline=l,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});var iB="lineStyle.opacity".split("."),aB={seriesType:"lines",reset:function(t,e,n){var o=lB(t.get("symbol")),l=lB(t.get("symbolSize")),i=t.getData();return i.setVisual("fromSymbol",o&&o[0]),i.setVisual("toSymbol",o&&o[1]),i.setVisual("fromSymbolSize",l&&l[0]),i.setVisual("toSymbolSize",l&&l[1]),i.setVisual("opacity",t.get(iB)),{dataEach:i.hasItemOption?function(t,e){var n=t.getItemModel(e),o=lB(n.getShallow("symbol",!0)),l=lB(n.getShallow("symbolSize",!0)),i=n.get(iB);o[0]&&t.setItemVisual(e,"fromSymbol",o[0]),o[1]&&t.setItemVisual(e,"toSymbol",o[1]),l[0]&&t.setItemVisual(e,"fromSymbolSize",l[0]),l[1]&&t.setItemVisual(e,"toSymbolSize",l[1]),t.setItemVisual(e,"opacity",i)}:null}}};function sB(){var t=v();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}yh(oB),ph(aB),t_.extend({type:"series.heatmap",getInitialData:function(t,e){return ay(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=nu.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),sB.prototype={update:function(t,e,n,o,l,i){var a=this._getBrush(),s=this._getGradient(t,l,"inRange"),r=this._getGradient(t,l,"outOfRange"),c=this.pointSize+this.blurSize,u=this.canvas,_=u.getContext("2d"),d=t.length;u.width=e,u.height=n;for(var h=0;h<d;++h){var y=t[h],p=y[0],m=y[1],k=o(y[2]);_.globalAlpha=k,_.drawImage(a,p-c,m-c)}if(!u.width||!u.height)return u;for(var g=_.getImageData(0,0,u.width,u.height),f=g.data,b=0,v=f.length,T=this.minOpacity,E=this.maxOpacity-T;b<v;){k=f[b+3]/256;var B=4*Math.floor(255*k);if(0<k){var I=i(k)?s:r;0<k&&(k=k*E+T),f[b++]=I[B],f[b++]=I[1+B],f[b++]=I[2+B],f[b++]=I[3+B]*k*256}else b+=4}return _.putImageData(g,0,0),u},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=v()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var o=t.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),t},_getGradient:function(t,e,n){for(var o=this._gradientPixels,l=o[n]||(o[n]=new Uint8ClampedArray(1024)),i=[0,0,0,0],a=0,s=0;s<256;s++)e[n](s/255,!0,i),l[a++]=i[0],l[a++]=i[1],l[a++]=i[2],l[a++]=i[3];return l}},vh({type:"heatmap",render:function(t,e,n){var o;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(o=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var l=t.coordinateSystem;"cartesian2d"===l.type||"calendar"===l.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}(l)&&this._renderOnGeo(l,t,o,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,o){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,o,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,o,l){var i,a,s=t.coordinateSystem;if("cartesian2d"===s.type){var r=s.getAxis("x"),c=s.getAxis("y");i=r.getBandWidth(),a=c.getBandWidth()}for(var u=this.group,_=t.getData(),d="emphasis.itemStyle",h="emphasis.label",y=t.getModel("itemStyle").getItemStyle(["color"]),p=t.getModel(d).getItemStyle(),m=t.getModel("label"),k=t.getModel(h),g=s.type,b="cartesian2d"===g?[_.mapDimension("x"),_.mapDimension("y"),_.mapDimension("value")]:[_.mapDimension("time"),_.mapDimension("value")],v=n;v<o;v++){var T;if("cartesian2d"===g){if(isNaN(_.get(b[2],v)))continue;var E=s.dataToPoint([_.get(b[0],v),_.get(b[1],v)]);T=new Qa({shape:{x:Math.floor(Math.round(E[0])-i/2),y:Math.floor(Math.round(E[1])-a/2),width:Math.ceil(i),height:Math.ceil(a)},style:{fill:_.getItemVisual(v,"color"),opacity:_.getItemVisual(v,"opacity")}})}else{if(isNaN(_.get(b[1],v)))continue;T=new Qa({z2:1,shape:s.dataToRect([_.get(b[0],v)]).contentShape,style:{fill:_.getItemVisual(v,"color"),opacity:_.getItemVisual(v,"opacity")}})}var B=_.getItemModel(v);_.hasItemOption&&(y=B.getModel("itemStyle").getItemStyle(["color"]),p=B.getModel(d).getItemStyle(),m=B.getModel("label"),k=B.getModel(h));var I=t.getRawValue(v),R="-";I&&null!=I[2]&&(R=I[2]),Xs(y,p,m,k,{labelFetcher:t,labelDataIndex:v,defaultText:R,isRectText:!0}),T.setStyle(y),js(T,_.hasItemOption?p:f({},p)),(T.incremental=l)&&(T.useHoverLayer=!0),u.add(T),_.setItemGraphicEl(v,T)}},_renderOnGeo:function(t,e,n,o){var l=n.targetVisuals.inRange,i=n.targetVisuals.outOfRange,a=e.getData(),s=this._hmLayer||this._hmLayer||new sB;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var r=t.getViewRect().clone(),c=t.getRoamTransform();r.applyTransform(c);var u=Math.max(r.x,0),_=Math.max(r.y,0),d=Math.min(r.width+r.x,o.getWidth()),h=Math.min(r.height+r.y,o.getHeight()),y=d-u,p=h-_,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],k=a.mapArray(m,function(e,n,o){var l=t.dataToPoint([e,n]);return l[0]-=u,l[1]-=_,l.push(o),l}),g=n.getExtent(),f="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(g,n.option.range):function(t,e,n){var o=t[1]-t[0],l=(e=C(e,function(e){return{interval:[(e.interval[0]-t[0])/o,(e.interval[1]-t[0])/o]}})).length,i=0;return function(t){for(var o=i;o<l;o++)if((a=e[o].interval)[0]<=t&&t<=a[1]){i=o;break}if(o===l)for(o=i-1;0<=o;o--){var a;if((a=e[o].interval)[0]<=t&&t<=a[1]){i=o;break}}return 0<=o&&o<l&&n[o]}}(g,n.getPieceList(),n.option.selected);s.update(k,y,p,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:i.color.getColorMapper()},f);var b=new Jo({style:{width:y,height:p,x:u,y:_,image:s.canvas},silent:!0});this.group.add(b)},dispose:function(){}});var rB=dk.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,rB.superApply(this,"getInitialData",arguments)}}),cB=["itemStyle","borderWidth"],uB=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],_B=new Ha;function dB(t,e,n,o){var l=t.getItemLayout(e),i=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",r=(n.get("symbolRotate")||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,u=n.isAnimationEnabled(),_={dataIndex:e,layout:l,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:r,animationModel:u?n:null,hoverAnimation:u&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(t,e,n,o,l){var i,a=o.valueDim,s=t.get("symbolBoundingData"),r=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),c=r.toGlobalCoord(r.dataToCoord(0)),u=1-+(n[a.wh]<=0);if(P(s)){var _=[hB(r,s[0])-c,hB(r,s[1])-c];_[1]<_[0]&&_.reverse(),i=_[u]}else i=null!=s?hB(r,s)-c:e?o.coordSysExtent[a.index][u]-c:n[a.wh];l.boundingLength=i,e&&(l.repeatCutLength=n[a.wh]),l.pxSign=0<i?1:i<0?-1:0}(n,i,l,o,_),function(t,e,n,o,l,i,a,s,r,c){var u=r.valueDim,_=r.categoryDim,d=Math.abs(n[_.wh]),h=t.getItemVisual(e,"symbolSize");(h=P(h)?h.slice():(null==h&&(h="100%"),[h,h]))[_.index]=Cr(h[_.index],d),h[u.index]=Cr(h[u.index],o?d:Math.abs(i)),c.symbolSize=h,(c.symbolScale=[h[0]/s,h[1]/s])[u.index]*=(r.isHorizontal?-1:1)*a}(t,e,l,i,0,_.boundingLength,_.pxSign,c,o,_),function(t,e,n,o,l){var i=t.get(cB)||0;i&&(_B.attr({scale:e.slice(),rotation:n}),_B.updateTransform(),i/=_B.getLineScale(),i*=e[o.valueDim.index]),l.valueLineWidth=i}(n,_.symbolScale,r,o,_);var d=_.symbolSize,h=n.get("symbolOffset");return P(h)&&(h=[Cr(h[0],d[0]),Cr(h[1],d[1])]),function(t,e,n,o,l,i,a,s,r,c,u,_){var d=u.categoryDim,h=u.valueDim,y=_.pxSign,p=Math.max(e[h.index]+s,0),m=p;if(o){var k=Math.abs(r),g=G(t.get("symbolMargin"),"15%")+"",b=!1;g.lastIndexOf("!")===g.length-1&&(b=!0,g=g.slice(0,g.length-1)),g=Cr(g,e[h.index]);var v=Math.max(p+2*g,0),T=b?0:2*g,E=Wr(o),B=E?o:NB((k+T)/v);v=p+2*(g=(k-B*p)/2/(b?B:B-1)),T=b?0:2*g,E||"fixed"===o||(B=c?NB((Math.abs(c)+T)/v):0),m=B*v-T,_.repeatTimes=B,_.symbolMargin=g}var I=y*(m/2),R=_.pathPosition=[];R[d.index]=n[d.wh]/2,R[h.index]="start"===a?I:"end"===a?r-I:r/2,i&&(R[0]+=i[0],R[1]+=i[1]);var O=_.bundlePosition=[];O[d.index]=n[d.xy],O[h.index]=n[h.xy];var C=_.barRectShape=f({},n);C[h.wh]=y*Math.max(Math.abs(n[h.wh]),Math.abs(R[h.index]+I)),C[d.wh]=n[d.wh];var N=_.clipShape={};N[d.xy]=-n[d.xy],N[d.wh]=u.ecSize[d.wh],N[h.xy]=0,N[h.wh]=n[h.wh]}(n,d,l,i,0,h,s,_.valueLineWidth,_.boundingLength,_.repeatCutLength,o,_),_}function hB(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function yB(t){var e=t.symbolPatternSize,n=dp(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function pB(t,e,n,o){var l=t.__pictorialBundle,i=n.symbolSize,a=n.valueLineWidth,s=n.pathPosition,r=e.valueDim,c=n.repeatTimes||0,u=0,_=i[e.valueDim.index]+a+2*n.symbolMargin;for(RB(t,function(t){t.__pictorialAnimationIndex=u,t.__pictorialRepeatTimes=c,u<c?OB(t,null,y(u),n,o):OB(t,null,{scale:[0,0]},n,o,function(){l.remove(t)}),TB(t,n),u++});u<c;u++){var d=yB(n);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=c,l.add(d);var h=y(u);OB(d,{position:h.position,scale:[0,0]},{scale:h.scale,rotation:h.rotation},n,o),d.on("mouseover",p).on("mouseout",m),TB(d,n)}function y(t){var e=s.slice(),o=n.pxSign,l=t;return("start"===n.symbolRepeatDirection?0<o:o<0)&&(l=c-1-t),e[r.index]=_*(l-c/2+.5)+s[r.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}function p(){RB(t,function(t){t.trigger("emphasis")})}function m(){RB(t,function(t){t.trigger("normal")})}}function mB(t,e,n,o){var l=t.__pictorialBundle,i=t.__pictorialMainPath;i?OB(i,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,o):(i=t.__pictorialMainPath=yB(n),l.add(i),OB(i,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,o),i.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),TB(i,n)}function kB(t,e,n){var o=f({},e.barRectShape),l=t.__pictorialBarRect;l?OB(l,null,{shape:o},e,n):(l=t.__pictorialBarRect=new Qa({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(l))}function gB(t,e,n,o){if(n.symbolClip){var l=t.__pictorialClipPath,i=f({},n.clipShape),a=e.valueDim,s=n.animationModel,r=n.dataIndex;if(l)or(l,{shape:i},s,r);else{i[a.wh]=0,l=new Qa({shape:i}),t.__pictorialBundle.setClipPath(l),t.__pictorialClipPath=l;var c={};c[a.wh]=n.clipShape[a.wh],yr[o?"updateProps":"initProps"](l,{shape:c},s,r)}}}function fB(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=bB,n.isAnimationEnabled=vB,n}function bB(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function vB(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function TB(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function EB(t,e,n,o){var l=new Nn,i=new Nn;return l.add(i),(l.__pictorialBundle=i).attr("position",n.bundlePosition.slice()),n.symbolRepeat?pB(l,e,n):mB(l,0,n),kB(l,n,o),gB(l,e,n,o),l.__pictorialShapeStr=IB(t,n),l.__pictorialSymbolMeta=n,l}function BB(t,e,n,o){var l=o.__pictorialBarRect;l&&(l.style.text=null);var i=[];RB(o,function(t){i.push(t)}),o.__pictorialMainPath&&i.push(o.__pictorialMainPath),o.__pictorialClipPath&&(n=null),O(i,function(t){or(t,{scale:[0,0]},n,e,function(){o.parent&&o.parent.remove(o)})}),t.setItemGraphicEl(e,null)}function IB(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function RB(t,e,n){O(t.__pictorialBundle.children(),function(o){o!==t.__pictorialBarRect&&e.call(n,o)})}function OB(t,e,n,o,l,i){e&&t.attr(e),o.symbolClip&&!l?n&&t.attr(n):n&&yr[l?"updateProps":"initProps"](t,n,o.animationModel,o.dataIndex,i)}function CB(t,e,n){var o=n.color,l=n.dataIndex,i=n.itemModel,a=i.getModel("itemStyle").getItemStyle(["color"]),s=i.getModel("emphasis.itemStyle").getItemStyle(),r=i.getShallow("cursor");RB(t,function(t){t.setColor(o),t.setStyle(b({fill:o,opacity:n.opacity},a)),js(t,s),r&&(t.cursor=r),t.z2=n.z2});var c={},u=(e.valueDim.posDesc[+(0<n.boundingLength)],t.__pictorialBarRect);hk(u.style,c,i,o,e.seriesModel,l),js(u,c)}function NB(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function wB(t,e,n,o,l){Cp.call(this,t,e,n),this.type=o||"value",this.position=l||"bottom",this.orient=null}function AB(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(t,e,n),this.model=t}function MB(t,e){e=e||{};var n=t.coordinateSystem,o=t.axis,l={},i=o.position,a=o.orient,s=n.getRect(),r=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:r[2],bottom:r[3]},vertical:{left:r[0],right:r[1]}};l.position=["vertical"===a?c.vertical[i]:r[0],"horizontal"===a?c.horizontal[i]:r[3]],l.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],l.labelDirection=l.tickDirection=l.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],t.get("axisTick.inside")&&(l.tickDirection=-l.tickDirection),G(e.labelInside,t.get("axisLabel.inside"))&&(l.labelDirection=-l.labelDirection);var u=e.rotate;return null==u&&(u=t.get("axisLabel.rotate")),l.labelRotation="top"===i?-u:u,l.z2=1,l}vh({type:"pictorialBar",render:function(t,e,n){var o=this.group,l=t.getData(),i=this._data,a=t.coordinateSystem,s=!!a.getBaseAxis().isHorizontal(),r=a.grid.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[r.x,r.x+r.width],[r.y,r.y+r.height]],isHorizontal:s,valueDim:uB[+s],categoryDim:uB[1-s]};return l.diff(i).add(function(t){if(l.hasValue(t)){var e=fB(l,t),n=dB(l,t,e,c),i=EB(l,c,n);l.setItemGraphicEl(t,i),o.add(i),CB(i,c,n)}}).update(function(t,e){var n=i.getItemGraphicEl(e);if(l.hasValue(t)){var a=fB(l,t),s=dB(l,t,a,c),r=IB(l,s);n&&r!==n.__pictorialShapeStr&&(o.remove(n),l.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var o=n.animationModel,l=n.dataIndex;or(t.__pictorialBundle,{position:n.bundlePosition.slice()},o,l),n.symbolRepeat?pB(t,e,n,!0):mB(t,e,n,!0),kB(t,n,!0),gB(t,e,n,!0)}(n,c,s):n=EB(l,c,s,!0),l.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,o.add(n),CB(n,c,s)}else o.remove(n)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&BB(i,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=l,this.group},dispose:et,remove:function(t,e){var n=this.group,o=this._data;t.get("animation")?o&&o.eachItemGraphicEl(function(e){BB(o,e.dataIndex,t,e)}):n.removeAll()}}),yh(S(Cy,"pictorialBar")),ph(km("pictorialBar","roundRect")),wB.prototype={constructor:wB,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},B(wB,Cp),nu.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(o,l){var i=new AB(o,t,e);i.name="single_"+l,i.resize(o,e),o.coordinateSystem=i,n.push(i)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}}),n},dimensions:(AB.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:AB,_init:function(t,e,n){var o=new wB(this.dimension,Zy(t),[0,0],t.get("type"),t.get("position")),l="category"===o.type;o.onBand=l&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),(t.axis=o).model=t,(o.coordinateSystem=this)._axis=o},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();O(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),Jy(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=yc({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),o=n?[0,t.width]:[0,t.height],l=e.reverse?1:0;e.setExtent(o[l],o[1-l]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),o=n[0]+n[1],l=t.isHorizontal();t.toGlobalCoord=l?function(t){return t+e}:function(t){return o-t+e},t.toLocalCoord=l?function(t){return t-e}:function(t){return o-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),o=[],l="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),o[l]=e.toGlobalCoord(e.dataToCoord(+t)),o[1-l]=0==l?n.y+n.height/2:n.x+n.width/2,o}}).dimensions});var SB=["axisLine","axisTickLabel","axisName"],PB=["splitArea","splitLine"],xB=nk.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,o){var l=this.group;l.removeAll();var i=this._axisGroup;this._axisGroup=new Nn;var a=MB(t),s=new Hm(t,a);O(SB,s.add,s),l.add(this._axisGroup),l.add(s.getGroup()),O(PB,function(e){t.get(e+".show")&&this["_"+e](t)},this),rr(i,this._axisGroup,t),xB.superCall(this,"render",t,e,n,o)},remove:function(){rk(this)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),o=n.getModel("lineStyle"),l=o.get("width"),i=o.get("color");i=i instanceof Array?i:[i];for(var a=t.coordinateSystem.getRect(),s=e.isHorizontal(),r=[],c=0,u=e.getTicksCoords({tickModel:n}),_=[],d=[],h=0;h<u.length;++h){var y=e.toGlobalCoord(u[h].coord);s?(_[0]=y,_[1]=a.y,d[0]=y,d[1]=a.y+a.height):(_[0]=a.x,_[1]=y,d[0]=a.x+a.width,d[1]=y);var p=c++%i.length;r[p]=r[p]||[],r[p].push(new es({subPixelOptimize:!0,shape:{x1:_[0],y1:_[1],x2:d[0],y2:d[1]},style:{lineWidth:l},silent:!0}))}for(h=0;h<r.length;++h)this.group.add(Os(r[h],{style:{stroke:i[h%i.length],lineDash:o.getLineDash(l),lineWidth:l},silent:!0}))}},_splitArea:function(t){sk(this,this._axisGroup,t,t)}}),DB=Ec.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function LB(t,e){var n,o=[],l=t.seriesIndex;if(null==l||!(n=e.getSeriesByIndex(l)))return{point:[]};var i=n.getData(),a=jl(i,t);if(null==a||a<0||P(a))return{point:[]};var s=i.getItemGraphicEl(a),r=n.coordinateSystem;if(n.getTooltipPosition)o=n.getTooltipPosition(a)||[];else if(r&&r.dataToPoint)o=r.dataToPoint(i.getValues(C(r.dimensions,function(t){return i.mapDimension(t)}),a,!0))||[];else if(s){var c=s.getBoundingRect().clone();c.applyTransform(s.transform),o=[c.x+c.width/2,c.y+c.height/2]}return{point:o,el:s}}k(DB.prototype,op),Om("single",DB,function(t,e){return e.type||(e.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var UB=O,FB=S,HB=Wl();function VB(t,e,n,o,l){var i=t.axis;if(!i.scale.isBlank()&&i.containData(e))if(t.involveSeries){var a=function(t,e){var n=e.axis,o=n.dim,l=t,i=[],a=Number.MAX_VALUE,s=-1;return UB(e.seriesModels,function(e,r){var c,u,_=e.getData().mapDimension(o,!0);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(_,t,n);u=d.dataIndices,c=d.nestestValue}else{if(!(u=e.getData().indicesOfNearest(_[0],t,"category"===n.type?.5:null)).length)return;c=e.getData().get(_[0],u[0])}if(null!=c&&isFinite(c)){var h=t-c,y=Math.abs(h);y<=a&&((y<a||0<=h&&s<0)&&(a=y,s=h,l=c,i.length=0),UB(u,function(t){i.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:i,snapToValue:l}}(e,t),s=a.payloadBatch,r=a.snapToValue;s[0]&&null==l.seriesIndex&&f(l,s[0]),!o&&t.snap&&i.containData(r)&&null!=r&&(e=r),n.showPointer(t,e,s,l),n.showTooltip(t,a,r)}else n.showPointer(t,e)}function GB(t,e,n,o){t[e.key]={value:n,payloadBatch:o}}function jB(t,e,n,o){var l=n.payloadBatch,i=e.axis,a=i.model,s=e.axisPointerModel;if(e.triggerTooltip&&l.length){var r=e.coordSys.model,c=ek(r),u=t.map[c];u||(u=t.map[c]={coordSysId:r.id,coordSysIndex:r.componentIndex,coordSysType:r.type,coordSysMainType:r.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:o,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:l.slice()})}}function WB(t){var e=t.axis.model,n={},o=n.axisDim=t.axis.dim;return n.axisIndex=n[o+"AxisIndex"]=e.componentIndex,n.axisName=n[o+"AxisName"]=e.name,n.axisId=n[o+"AxisId"]=e.id,n}function KB(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}gh({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var YB=Wl(),XB=O;function $B(t,e,n){if(!l.node){var o=e.getZr();YB(o).records||(YB(o).records={}),function(t,e){function n(n,o){t.on(n,function(n){var l=function(t){var e={showTip:[],hideTip:[]},n=function(o){var l=e[o.type];l?l.push(o):(o.dispatchAction=n,t.dispatchAction(o))};return{dispatchAction:n,pendings:e}}(e);XB(YB(t).records,function(t){t&&o(t,n,l.dispatchAction)}),function(t,e){var n,o=t.showTip.length,l=t.hideTip.length;o?n=t.showTip[o-1]:l&&(n=t.hideTip[l-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(l.pendings,e)})}YB(t).initialized||(YB(t).initialized=!0,n("click",S(qB,"click")),n("mousemove",S(qB,"mousemove")),n("globalout",zB))}(o,e),(YB(o).records[t]||(YB(o).records[t]={})).handler=n}}function zB(t,e,n){t.handler("leave",null,n)}function qB(t,e,n,o){e.handler(t,n,o)}function JB(t,e){if(!l.node){var n=e.getZr();(YB(n).records||{})[t]&&(YB(n).records[t]=null)}}var ZB=fh({type:"axisPointer",render:function(t,e,n){var o=e.getComponent("tooltip"),l=t.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";$B("axisPointer",n,function(t,e,n){"none"!==l&&("leave"===t||0<=l.indexOf(t))&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){JB(e.getZr(),"axisPointer"),ZB.superApply(this._model,"remove",arguments)},dispose:function(t,e){JB("axisPointer",e),ZB.superApply(this._model,"dispose",arguments)}}),QB=Wl(),tI=m,eI=M;function nI(){}function oI(t,e,n,o){!function t(e,n){if(L(e)&&L(n)){var o=!0;return O(n,function(n,l){o=o&&t(e[l],n)}),!!o}return e===n}(QB(n).lastProp,o)&&(QB(n).lastProp=o,e?or(n,o,t):(n.stopAnimation(),n.attr(o)))}function lI(t,e){t[e.get("label.show")?"show":"hide"]()}function iI(t){return{position:t.position.slice(),rotation:t.rotation||0}}function aI(t,e,n){var o=e.get("z"),l=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=o&&(t.z=o),null!=l&&(t.zlevel=l),t.silent=n)})}function sI(t){var e,n=t.get("type"),o=t.getModel(n+"Style");return"line"===n?(e=o.getLineStyle()).fill=null:"shadow"===n&&((e=o.getAreaStyle()).stroke=null),e}function rI(t,e,n,o,l){var i=cI(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=$r(a.get("padding")||0),r=a.getFont(),c=ho(i,r),u=l.position,_=c.width+s[1]+s[3],d=c.height+s[0]+s[2],h=l.align;"right"===h&&(u[0]-=_),"center"===h&&(u[0]-=_/2);var y=l.verticalAlign;"bottom"===y&&(u[1]-=d),"middle"===y&&(u[1]-=d/2),function(t,e,n,o){var l=o.getWidth(),i=o.getHeight();t[0]=Math.min(t[0]+e,l)-e,t[1]=Math.min(t[1]+n,i)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(u,_,d,o);var p=a.get("backgroundColor");p&&"auto"!==p||(p=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:_,height:d,r:a.get("borderRadius")},position:u.slice(),style:{text:i,textFont:r,textFill:a.getTextColor(),textPosition:"inside",textPadding:s,fill:p,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function cI(t,e,n,o,l){t=e.scale.parse(t);var i=e.scale.getLabel(t,{precision:l.precision}),a=l.formatter;if(a){var s={value:tp(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};O(o,function(t){var e=n.getSeriesByIndex(t.seriesIndex),o=t.dataIndexInside,l=e&&e.getDataParams(o);l&&s.seriesData.push(l)}),D(a)?i=a.replace("{value}",i):x(a)&&(i=a(s))}return i}function uI(t,e,n){var o=ie();return ue(o,o,n.rotation),ce(o,o,n.position),ar([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],o)}function _I(t,e,n,o,l,i){var a=Hm.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=l.get("label.margin"),rI(e,o,l,i,{position:uI(o.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function dI(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function hI(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function yI(t,e,n,o,l,i){return{cx:t,cy:e,r0:n,r:o,startAngle:l,endAngle:i,clockwise:!0}}Ql((nI.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,o){var l=e.get("value"),i=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,o||this._lastValue!==l||this._lastStatus!==i){this._lastValue=l,this._lastStatus=i;var a=this._group,s=this._handle;if(!i||"hide"===i)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var r={};this.makeElOption(r,l,t,e,n);var c=r.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var u=this._moveAnimation=this.determineAnimation(t,e);if(a){var _=S(oI,e,u);this.updatePointerEl(a,r,_,e),this.updateLabelEl(a,r,_,e)}else a=this._group=new Nn,this.createPointerEl(a,r,t,e),this.createLabelEl(a,r,t,e),n.getZr().add(a);aI(a,e,!0),this._renderHandle(l)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),o=t.axis,l="category"===o.type,i=e.get("snap");if(!i&&!l)return!1;if("auto"!==n&&null!=n)return!0===n;var a=this.animationThreshold;if(l&&o.getBandWidth()>a)return!0;if(i){var s=Qm(t).seriesDataCount,r=o.getExtent();return Math.abs(r[0]-r[1])/s>a}return!1},makeElOption:function(t,e,n,o,l){},createPointerEl:function(t,e,n,o){var l=e.pointer;if(l){var i=QB(t).pointerEl=new yr[l.type](tI(e.pointer));t.add(i)}},createLabelEl:function(t,e,n,o){if(e.label){var l=QB(t).labelEl=new Qa(tI(e.label));t.add(l),lI(l,o)}},updatePointerEl:function(t,e,n){var o=QB(t).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),n(o,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,o){var l=QB(t).labelEl;l&&(l.setStyle(e.label.style),n(l,{shape:e.label.shape,position:e.label.position}),lI(l,o))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,o=this._api.getZr(),l=this._handle,i=n.getModel("handle"),a=n.get("status");if(!i.get("show")||!a||"hide"===a)return l&&o.remove(l),void(this._handle=null);this._handle||(e=!0,l=this._handle=ur(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){Yt(t.event)},onmousedown:eI(this._onHandleDragMove,this,0,0),drift:eI(this._onHandleDragMove,this),ondragend:eI(this._onHandleDragEnd,this)}),o.add(l)),aI(l,n,!1),l.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=i.get("size");P(s)||(s=[s,s]),l.attr("scale",[s[0]/2,s[1]/2]),B_(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){oI(this._axisPointerModel,!e&&this._moveAnimation,this._handle,iI(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var o=this.updateHandleTransform(iI(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(iI(o)),QB(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,o=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=nI);var pI=nI.extend({makeElOption:function(t,e,n,o,l){var i=n.axis,a=i.grid,s=o.get("type"),r=mI(a,i).getOtherAxis(i).getGlobalExtent(),c=i.toGlobalCoord(i.dataToCoord(e,!0));if(s&&"none"!==s){var u=sI(o),_=kI[s](i,c,r);_.style=u,t.graphicKey=_.type,t.pointer=_}_I(e,t,ak(a.model,n),n,o,l)},getHandleTransform:function(t,e,n){var o=ak(e.axis.grid.model,e,{labelInside:!1});return o.labelMargin=n.get("handle.margin"),{position:uI(e.axis,t,o),rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,o){var l=n.axis,i=l.grid,a=l.getGlobalExtent(!0),s=mI(i,l).getOtherAxis(l).getGlobalExtent(),r="x"===l.dim?0:1,c=t.position;c[r]+=e[r],c[r]=Math.min(a[1],c[r]),c[r]=Math.max(a[0],c[r]);var u=(s[1]+s[0])/2,_=[u,u];return _[r]=c[r],{position:c,rotation:t.rotation,cursorPoint:_,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][r]}}});function mI(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var kI={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:dI([e,n[0]],[e,n[1]],gI(t))}},shadow:function(t,e,n){var o=Math.max(1,t.getBandWidth()),l=n[1]-n[0];return{type:"Rect",shape:hI([e-o/2,n[0]],[o,l],gI(t))}}};function gI(t){return"x"===t.dim?0:1}nk.registerAxisPointerClass("CartesianAxisPointer",pI),uh(function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var e=t.axisPointer.link;e&&!P(e)&&(t.axisPointer.link=[e])}}),_h(Ed.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var o=e.getComponent("tooltip"),l=e.getComponent("axisPointer"),i=l.get("link",!0)||[],a=[];qm(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var s=ek(n.model),r=t.coordSysAxesInfo[s]={},c=(t.coordSysMap[s]=n).model.getModel("tooltip",o);if(qm(n.getAxes(),Jm(h,!1,null)),n.getTooltipAxes&&o&&c.get("show")){var u="axis"===c.get("trigger"),_="cross"===c.get("axisPointer.type"),d=n.getTooltipAxes(c.get("axisPointer.axis"));(u||_)&&qm(d.baseAxes,Jm(h,!_||"cross",u)),_&&qm(d.otherAxes,Jm(h,"cross",!1))}}function h(o,s,u){var _=u.model.getModel("axisPointer",l),d=_.get("show");if(d&&("auto"!==d||o||tk(_))){null==s&&(s=_.get("triggerTooltip"));var h=(_=o?function(t,e,n,o,l,i){var a=e.getModel("axisPointer"),s={};qm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=m(a.get(t))}),s.snap="category"!==t.type&&!!i,"cross"===a.get("type")&&(s.type="line");var r=s.label||(s.label={});if(null==r.show&&(r.show=!1),"cross"===l){var c=a.get("label.show");if(r.show=null==c||c,!i){var u=s.lineStyle=a.get("crossStyle");u&&b(r,u.textStyle)}}return t.model.getModel("axisPointer",new vr(s,n,o))}(u,c,l,e,o,s):_).get("snap"),y=ek(u.model),p=s||h||"category"===u.type,k=t.axesInfo[y]={key:y,axis:u,coordSys:n,axisPointerModel:_,triggerTooltip:s,involveSeries:p,snap:h,useHandle:tk(_),seriesModels:[]};r[y]=k,t.seriesInvolved|=p;var g=function(t,e){for(var n=e.model,o=e.dim,l=0;l<t.length;l++){var i=t[l]||{};if(Zm(i[o+"AxisId"],n.id)||Zm(i[o+"AxisIndex"],n.componentIndex)||Zm(i[o+"AxisName"],n.name))return l}}(i,u);if(null!=g){var f=a[g]||(a[g]={axesInfo:{}});f.axesInfo[y]=k,f.mapper=i[g].mapper,k.linkGroup=f}}}})}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,o=e.get("tooltip.trigger",!0),l=e.get("tooltip.show",!0);n&&"none"!==o&&!1!==o&&"item"!==o&&!1!==l&&!1!==e.get("axisPointer.show",!0)&&qm(t.coordSysAxesInfo[ek(n.model)],function(t){var o=t.axis;n.getAxis(o.dim)===o&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}(n,t),n}(t,e)}),dh({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(t,e,n){var o=t.currTrigger,l=[t.x,t.y],i=t,a=t.dispatchAction||M(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){KB(l)&&(l=LB({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var r=KB(l),c=i.axesInfo,u=s.axesInfo,_="leave"===o||KB(l),d={},h={},y={list:[],map:{}},p={showPointer:FB(GB,h),showTooltip:FB(jB,y)};UB(s.coordSysMap,function(t,e){var n=r||t.containPoint(l);UB(s.coordSysAxesInfo[e],function(t,e){var o=t.axis,i=function(t,e){for(var n=0;n<(t||[]).length;n++){var o=t[n];if(e.axis.dim===o.axisDim&&e.axis.model.componentIndex===o.axisIndex)return o}}(c,t);if(!_&&n&&(!c||i)){var a=i&&i.value;null!=a||r||(a=o.pointToData(l)),null!=a&&VB(t,a,p,!1,d)}})});var m={};return UB(u,function(t,e){var n=t.linkGroup;n&&!h[e]&&UB(n.axesInfo,function(e,o){var l=h[o];if(e!==t&&l){var i=l.value;n.mapper&&(i=t.axis.scale.parse(n.mapper(i,WB(e),WB(t)))),m[t.key]=i}})}),UB(m,function(t,e){VB(u[e],t,p,!0,d)}),function(t,e,n){var o=n.axesInfo=[];UB(e,function(e,n){var l=e.axisPointerModel.option,i=t[n];i?(e.useHandle||(l.status="show"),l.value=i.value,l.seriesDataIndices=(i.payloadBatch||[]).slice()):e.useHandle||(l.status="hide"),"show"===l.status&&o.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:l.value})})}(h,u,d),function(t,e,n,o){if(KB(e)||!t.list.length)return o({type:"hideTip"});var l=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:t.list})}(y,l,t,a),function(t,e,n){var o=n.getZr(),l="axisPointerLastHighlights",i=HB(o)[l]||{},a=HB(o)[l]={};UB(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&UB(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var s=[],r=[];O(i,function(t,e){a[e]||r.push(t)}),O(a,function(t,e){i[e]||s.push(t)}),r.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:r}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(u,0,n),d}});var fI=["x","y"],bI=["width","height"],vI=nI.extend({makeElOption:function(t,e,n,o,l){var i=n.axis,a=i.coordinateSystem,s=BI(a,1-EI(i)),r=a.dataToPoint(e)[0],c=o.get("type");if(c&&"none"!==c){var u=sI(o),_=TI[c](i,r,s);_.style=u,t.graphicKey=_.type,t.pointer=_}_I(e,t,MB(n),n,o,l)},getHandleTransform:function(t,e,n){var o=MB(e,{labelInside:!1});return o.labelMargin=n.get("handle.margin"),{position:uI(e.axis,t,o),rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,o){var l=n.axis,i=l.coordinateSystem,a=EI(l),s=BI(i,a),r=t.position;r[a]+=e[a],r[a]=Math.min(s[1],r[a]),r[a]=Math.max(s[0],r[a]);var c=BI(i,1-a),u=(c[1]+c[0])/2,_=[u,u];return _[a]=r[a],{position:r,rotation:t.rotation,cursorPoint:_,tooltipOption:{verticalAlign:"middle"}}}}),TI={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:dI([e,n[0]],[e,n[1]],EI(t))}},shadow:function(t,e,n){var o=t.getBandWidth(),l=n[1]-n[0];return{type:"Rect",shape:hI([e-o/2,n[0]],[o,l],EI(t))}}};function EI(t){return t.isHorizontal()?0:1}function BI(t,e){var n=t.getRect();return[n[fI[e]],n[fI[e]]+n[bI[e]]]}nk.registerAxisPointerClass("SingleAxisPointer",vI),fh({type:"single"});var II=t_.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){II.superApply(this,"init",arguments),this.legendVisualProvider=new xk(M(this.getData,this),M(this.getRawData,this))},fixData:function(t){var e=t.length,n={},o=ql(t,function(t){return n.hasOwnProperty(t[0])||(n[t[0]]=-1),t[2]}),l=[];o.buckets.each(function(t,e){l.push({name:e,dataList:t})});for(var i=l.length,a=0;a<i;++a){for(var s=l[a].name,r=0;r<l[a].dataList.length;++r){var c=l[a].dataList[r][0];n[c]=a}for(var c in n)n.hasOwnProperty(c)&&n[c]!==a&&(n[c]=a,t[e]=[],t[e][0]=c,t[e][1]=0,t[e][2]=s,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),o=w(t.data,function(t){return void 0!==t[2]}),l=this.fixData(o||[]),i=[],a=this.nameMap=Q(),s=0,r=0;r<l.length;++r)i.push(l[r][2]),a.get(l[r][2])||(a.set(l[r][2],s),s++);var c=Qh(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Oh(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),u=new Fh(c,this);return u.initData(l),u},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],o=0;o<e;++o)n[o]=o;var l=t.mapDimension("single"),i=ql(n,function(e){return t.get("name",e)}),a=[];return i.buckets.each(function(e,n){e.sort(function(e,n){return t.get(l,e)-t.get(l,n)}),a.push({name:n,indices:e})}),a},getAxisTooltipData:function(t,e,n){P(t)||(t=t?[t]:[]);for(var o,l=this.getData(),i=this.getLayerSeries(),a=[],s=i.length,r=0;r<s;++r){for(var c=Number.MAX_VALUE,u=-1,_=i[r].indices.length,d=0;d<_;++d){var h=l.get(t[0],i[r].indices[d]),y=Math.abs(h-e);y<=c&&(o=h,c=y,u=i[r].indices[d])}a.push(u)}return{dataIndices:a,nestestValue:o}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),o=e.get(e.mapDimension("value"),t);return!isNaN(o)&&null!=o||(o="-"),Jr(n+" : "+o)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function RI(t,e,n){if(t.count())for(var o,l=e.coordinateSystem,i=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),r=C(i,function(e){return C(e.indices,function(e){var n=l.dataToPoint(t.get(a,e));return n[1]=t.get(s,e),n})}),c=function(t){for(var e=t.length,n=t[0].length,o=[],l=[],i=0,a={},s=0;s<n;++s){for(var r=0,c=0;r<e;++r)c+=t[r][s][1];i<c&&(i=c),o.push(c)}for(var u=0;u<n;++u)l[u]=(i-o[u])/2;for(var _=i=0;_<n;++_){var d=o[_]+l[_];i<d&&(i=d)}return a.y0=l,a.max=i,a}(r),u=c.y0,_=n/c.max,d=i.length,h=i[0].indices.length,y=0;y<h;++y){o=u[y]*_,t.setItemLayout(i[0].indices[y],{layerIndex:0,x:r[0][y][0],y0:o,y:r[0][y][1]*_});for(var p=1;p<d;++p)o+=r[p-1][y][1]*_,t.setItemLayout(i[p].indices[y],{layerIndex:p,x:r[p][y][0],y0:o,y:r[p][y][1]*_})}}vh({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){var o=t.getData(),l=this.group,i=t.getLayerSeries(),a=o.getLayout("layoutInfo"),s=a.rect,r=a.boundaryGap;function c(t){return t.name}l.attr("position",[0,s.y+r[0]]);var u=new Eh(this._layersSeries||[],i,c,c),_={};function d(e,n,a){var s=this._layers;if("remove"!==e){for(var r,c,u,d=[],h=[],y=i[n].indices,p=0;p<y.length;p++){var m=o.getItemLayout(y[p]),k=m.x,g=m.y0,b=m.y;d.push([k,g]),h.push([k,g+b]),r=o.getItemVisual(y[p],"color")}var v=o.getItemLayout(y[0]),T=o.getItemModel(y[p-1]),E=T.getModel("label"),B=E.get("margin");if("add"===e){var I=_[n]=new Nn;c=new rm({shape:{points:d,stackedOnPoints:h,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),u=new Ua({style:{x:v.x-B,y:v.y0+v.y/2}}),I.add(c),I.add(u),l.add(I),c.setClipPath(function(t,e,n){var o=new Qa({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return lr(o,{shape:{width:t.width+20,height:t.height+20}},e,function(){c.removeClipPath()}),o}(c.getBoundingRect(),t))}else I=s[a],c=I.childAt(0),u=I.childAt(1),l.add(I),_[n]=I,or(c,{shape:{points:d,stackedOnPoints:h}},t),or(u,{style:{x:v.x-B,y:v.y0+v.y/2}},t);var R=T.getModel("emphasis.itemStyle"),O=T.getModel("itemStyle");zs(u.style,E,{text:E.get("show")?t.getFormattedLabel(y[p-1],"normal")||o.getName(y[p-1]):null,textVerticalAlign:"middle"}),c.setStyle(f({fill:r},O.getItemStyle(["color"]))),js(c,R.getItemStyle())}else l.remove(s[n])}u.add(M(d,this,"add")).update(M(d,this,"update")).remove(M(d,this,"remove")).execute(),this._layersSeries=i,this._layers=_},dispose:function(){}}),yh(function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,o={},l=n.getRect();o.rect=l;var i=t.get("boundaryGap"),a=n.getAxis();o.boundaryGap=i,"horizontal"===a.orient?(i[0]=Cr(i[0],l.height),i[1]=Cr(i[1],l.height),RI(e,t,l.height-i[0]-i[1])):(i[0]=Cr(i[0],l.width),i[1]=Cr(i[1],l.width),RI(e,t,l.width-i[0]-i[1])),e.setLayout("layoutInfo",o)})}),ph(function(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.getRawData(),o=t.get("color"),l=Q();e.each(function(t){l.set(e.getRawIndex(t),t)}),n.each(function(i){var a=n.getName(i),s=o[(t.nameMap.get(a)-1)%o.length];n.setItemVisual(i,"color",s);var r=l.get(i);null!=r&&e.setItemVisual(r,"color",s)})})}),_h($k("themeRiver")),t_.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;O(e.children,function(e){t(e);var o=e.value;P(o)&&(o=o[0]),n+=o});var o=e.value;P(o)&&(o=o[0]),null!=o&&!isNaN(o)||(o=n),o<0&&(o=0),P(e.value)?e.value[0]=o:e.value=o}(n);var o=C(t.levels||[],function(t){return new vr(t,this,e)},this),l=df.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=l.getNodeByDataIndex(e),i=o[n.depth];return i&&(t.parentModel=i),t})});return l.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=t_.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=Af(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var OI="none";function CI(t,e,n){Nn.call(this);var o=new Ga({z2:2});o.seriesIndex=e.seriesIndex;var l=new Ua({z2:4,silent:t.getModel("label").get("silent")});function i(){l.ignore=l.hoverIgnore}function a(){l.ignore=l.normalIgnore}this.add(o),this.add(l),this.updateData(!0,t,"normal",e,n),this.on("emphasis",i).on("normal",a).on("mouseover",i).on("mouseout",a)}var NI=CI.prototype;NI.updateData=function(t,e,n,o,l){(this.node=e).piece=this,o=o||this._seriesModel,l=l||this._ecModel;var i=this.childAt(0);i.dataIndex=e.dataIndex;var a=e.getModel(),s=e.getLayout(),r=f({},s);r.label=null;var c=function(t,e,n){var o=t.getVisual("color"),l=t.getVisual("visualMeta");l&&0!==l.length||(o=null);var i=t.getModel("itemStyle").get("color");if(i)return i;if(o)return o;if(0===t.depth)return n.option.color[0];var a=n.option.color.length;return i=n.option.color[function(t){for(var e=t;1<e.depth;)e=e.parentNode;return E(t.getAncestors()[0].children,e)}(t)%a]}(e,0,l);!function(t,e,n){e.getData().setItemVisual(t.dataIndex,"color",n)}(e,o,c);var u,_=a.getModel("itemStyle").getItemStyle();u=b({lineJoin:"bevel",fill:(u="normal"===n?_:k(a.getModel(n+".itemStyle").getItemStyle(),_)).fill||c},u),t?(i.setShape(r),i.shape.r=s.r0,or(i,{shape:{r:s.r}},o,e.dataIndex),i.useStyle(u)):"object"==typeof u.fill&&u.fill.type||"object"==typeof i.style.fill&&i.style.fill.type?(or(i,{shape:r},o),i.useStyle(u)):or(i,{shape:r,style:u},o),this._updateLabel(o,c,n);var d=a.getShallow("cursor");if(d&&i.attr("cursor",d),t){var h=o.getShallow("highlightPolicy");this._initEvents(i,e,o,h)}this._seriesModel=o||this._seriesModel,this._ecModel=l||this._ecModel,js(this)},NI.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(t,e,n){return n!==OI&&("self"===n?t===e:"ancestor"===n?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):t!==OI&&n.piece.childAt(0).trigger("downplay"))})},NI.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},NI.onHighlight=function(){this.updateData(!1,this.node,"highlight")},NI.onDownplay=function(){this.updateData(!1,this.node,"downplay")},NI._updateLabel=function(t,e,n){var o=this.node.getModel(),l=o.getModel("label"),i="normal"===n||"emphasis"===n?l:o.getModel(n+".label"),a=o.getModel("emphasis.label"),s=i.get("formatter")?n:"normal",r=G(t.getFormattedLabel(this.node.dataIndex,s,null,null,"label"),this.node.name);!1===B("show")&&(r="");var c=this.node.getLayout(),u=i.get("minAngle");null==u&&(u=l.get("minAngle")),u=u/180*Math.PI;var _=c.endAngle-c.startAngle;null!=u&&Math.abs(_)<u&&(r="");var d=this.childAt(1);Xs(d.style,d.hoverStyle||{},l,a,{defaultText:i.getShallow("show")?r:null,autoColor:e,useInsideStyle:!0});var h,y=(c.startAngle+c.endAngle)/2,p=Math.cos(y),m=Math.sin(y),k=B("position"),g=B("distance")||0,f=B("align");"outside"===k?(h=c.r+g,f=y>Math.PI/2?"right":"left"):f&&"center"!==f?"left"===f?(h=c.r0+g,y>Math.PI/2&&(f="right")):"right"===f&&(h=c.r-g,y>Math.PI/2&&(f="left")):(h=(c.r+c.r0)/2,f="center"),d.attr("style",{text:r,textAlign:f,textVerticalAlign:B("verticalAlign")||"middle",opacity:B("opacity")});var b=h*p+c.cx,v=h*m+c.cy;d.attr("position",[b,v]);var T=B("rotate"),E=0;function B(t){var e=i.get(t);return null==e?l.get(t):e}"radial"===T?(E=-y)<-Math.PI/2&&(E+=Math.PI):"tangential"===T?(E=Math.PI/2-y)>Math.PI/2?E-=Math.PI:E<-Math.PI/2&&(E+=Math.PI):"number"==typeof T&&(E=T*Math.PI/180),d.attr("rotation",E)},NI._initEvents=function(t,e,n,o){function l(){a.onEmphasis(o)}function i(){a.onNormal()}t.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;n.isAnimationEnabled()&&t.on("mouseover",l).on("mouseout",i).on("emphasis",l).on("normal",i).on("downplay",function(){a.onDownplay()}).on("highlight",function(){a.onHighlight()})},B(CI,Nn),h_.extend({type:"sunburst",init:function(){},render:function(t,e,n,o){var l=this;this.seriesModel=t,this.api=n,this.ecModel=e;var i=t.getData(),a=i.tree.root,s=t.getViewRoot(),r=this.group,c=t.get("renderLabelForZeroData"),u=[];s.eachNode(function(t){u.push(t)});var _=this._oldChildren||[];if(function(n,o){function l(t){return t.getId()}function s(l,s){!function(n,o){if(c||!n||n.getValue()||(n=null),n!==a&&o!==a)if(o&&o.piece)n?(o.piece.updateData(!1,n,"normal",t,e),i.setItemGraphicEl(n.dataIndex,o.piece)):function(t){t&&t.piece&&(r.remove(t.piece),t.piece=null)}(o);else if(n){var l=new CI(n,t,e);r.add(l),i.setItemGraphicEl(n.dataIndex,l)}}(null==l?null:n[l],null==s?null:o[s])}0===n.length&&0===o.length||new Eh(o,n,l,l).add(s).update(s).remove(S(s,null)).execute()}(u,_),function(n,o){if(0<o.depth){l.virtualPiece?l.virtualPiece.updateData(!1,n,"normal",t,e):(l.virtualPiece=new CI(n,t,e),r.add(l.virtualPiece)),o.piece._onclickEvent&&o.piece.off("click",o.piece._onclickEvent);var i=function(t){l._rootToNode(o.parentNode)};o.piece._onclickEvent=i,l.virtualPiece.on("click",i)}else l.virtualPiece&&(r.remove(l.virtualPiece),l.virtualPiece=null)}(a,s),o&&o.highlight&&o.highlight.piece){var d=t.getShallow("highlightPolicy");o.highlight.piece.onEmphasis(d)}else if(o&&o.unhighlight){var h=this.virtualPiece;!h&&a.children.length&&(h=a.children[0].piece),h&&h.onNormal()}this._initEvents(),this._oldChildren=u},dispose:function(){},_initEvents:function(){function t(t){var n=!1;e.seriesModel.getViewRoot().eachNode(function(o){if(!n&&o.piece&&o.piece.childAt(0)===t.target){var l=o.getModel().get("nodeClick");if("rootToNode"===l)e._rootToNode(o);else if("link"===l){var i=o.getModel(),a=i.get("link");a&&sc(a,i.get("target",!0)||"_blank")}n=!0}})}var e=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var o=t[0]-n.cx,l=t[1]-n.cy,i=Math.sqrt(o*o+l*l);return i<=n.r&&i>=n.r0}}});var wI="sunburstRootToNode";dh({type:wI,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var o=Cf(t,[wI],e);if(o){var l=e.getViewRoot();l&&(t.direction=wf(l,o.node)?"rollUp":"drillDown"),e.resetViewRoot(o.node)}})});var AI="sunburstHighlight";dh({type:AI,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var o=Cf(t,[AI],e);o&&(t.highlight=o.node)})}),dh({type:"sunburstUnhighlight",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){t.unhighlight=!0})});var MI=Math.PI/180;function SI(t,e){return e=e||[0,0],C(["x","y"],function(n,o){var l=this.getAxis(n),i=e[o],a=t[o]/2;return"category"===l.type?l.getBandWidth():Math.abs(l.dataToCoord(i-a)-l.dataToCoord(i+a))},this)}function PI(t,e){return e=e||[0,0],C([0,1],function(n){var o=e[n],l=t[n]/2,i=[],a=[];return i[n]=o-l,a[n]=o+l,i[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(a)[n])},this)}function xI(t,e){var n=this.getAxis(),o=e instanceof Array?e[0]:e,l=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(o-l)-n.dataToCoord(o+l))}function DI(t,e){return C(["Radius","Angle"],function(n,o){var l=this["get"+n+"Axis"](),i=e[o],a=t[o]/2,s="dataTo"+n,r="category"===l.type?l.getBandWidth():Math.abs(l[s](i-a)-l[s](i+a));return"Angle"===n&&(r=r*Math.PI/180),r},this)}ph(S(Gk,"sunburst")),yh(S(function(t,e,n,o){e.eachSeriesByType(t,function(t){var e=t.get("center"),o=t.get("radius");P(o)||(o=[0,o]),P(e)||(e=[e,e]);var l=n.getWidth(),i=n.getHeight(),a=Math.min(l,i),s=Cr(e[0],l),r=Cr(e[1],i),c=Cr(o[0],a/2),u=Cr(o[1],a/2),_=-t.get("startAngle")*MI,d=t.get("minAngle")*MI,h=t.getData().tree.root,y=t.getViewRoot(),p=y.depth,m=t.get("sort");null!=m&&function t(e,n){var o=e.children||[];e.children=function(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(t,e){var o=(t.getValue()-e.getValue())*(n?1:-1);return 0==o?(t.dataIndex-e.dataIndex)*(n?-1:1):o})}(o,n),o.length&&O(e.children,function(e){t(e,n)})}(y,m);var k=0;O(y.children,function(t){isNaN(t.getValue())||k++});var g=y.getValue(),f=Math.PI/(g||k)*2,b=0<y.depth,v=y.height-(b?-1:1),T=(u-c)/(v||1),E=t.get("clockwise"),B=t.get("stillShowZeroSum"),I=E?1:-1,R=function(t,e){if(t){var n=e;if(t!==h){var o=t.getValue(),l=0===g&&B?f:o*f;l<d&&(l=d),n=e+I*l;var i=t.depth-p-(b?-1:1),u=c+T*i,_=c+T*(1+i),y=t.getModel();null!=y.get("r0")&&(u=Cr(y.get("r0"),a/2)),null!=y.get("r")&&(_=Cr(y.get("r"),a/2)),t.setLayout({angle:l,startAngle:e,endAngle:n,clockwise:E,cx:s,cy:r,r0:u,r:_})}if(t.children&&t.children.length){var m=0;O(t.children,function(t){m+=R(t,e+m)})}return n-e}};if(b){var C=c,N=c+T,w=2*Math.PI;h.setLayout({angle:w,startAngle:_,endAngle:_+w,clockwise:E,cx:s,cy:r,r0:C,r:N})}R(y,_)})},"sunburst")),_h(S($k,"sunburst"));var LI=ps,UI=["itemStyle"],FI=["emphasis","itemStyle"],HI=["label"],VI=["emphasis","label"],GI={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:M(SI,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:M(PI,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:M(xI,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),o=e.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:o[1],r0:o[0]},api:{coord:M(function(o){var l=e.dataToRadius(o[0]),i=n.dataToAngle(o[1]),a=t.coordToPoint([l,i]);return a.push(l,i*Math.PI/180),a}),size:M(DI,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};function jI(t,e,n,o,l){null==n[t]||l||(e[t]=n[t],n[t]=o[t])}function WI(t,e,n,o){var l=t.get("renderItem"),i=t.coordinateSystem,a={};i&&(a=i.prepareCustoms?i.prepareCustoms():GI[i.type](i));var s,r,c,u,_,d=b({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:function(t,n){return null==n&&(n=s),e.get(e.getDimension(t||0),n)},style:function(n,o){null==o&&(o=s),p(o);var l=r.getModel(UI).getItemStyle();null!=_&&(l.fill=_);var i=e.getItemVisual(o,"opacity");null!=i&&(l.opacity=i);var a=n?zI(n,c):c;return zs(l,a,null,{autoColor:_,isRectText:!0}),l.text=a.getShallow("show")?j(t.getFormattedLabel(o,"normal"),Sp(e,o)):null,n&&qI(l,n),l},styleEmphasis:function(n,o){null==o&&(o=s),p(o);var l=r.getModel(FI).getItemStyle(),i=n?zI(n,u):u;return zs(l,i,null,{isRectText:!0},!0),l.text=i.getShallow("show")?W(t.getFormattedLabel(o,"emphasis"),t.getFormattedLabel(o,"normal"),Sp(e,o)):null,n&&qI(l,n),l},visual:function(t,n){return null==n&&(n=s),e.getItemVisual(n,t)},barLayout:function(t){if(i.getBaseAxis)return function(t){var e=[],n=t.axis;if("category"===n.type){for(var o=n.getBandWidth(),l=0;l<t.count;l++)e.push(b({bandWidth:o,axisKey:"axis0",stackId:by+l},t));var i=Ry(e),a=[];for(l=0;l<t.count;l++){var s=i.axis0[by+l];s.offsetCenter=s.offset+s.width/2,a.push(s)}return a}}(b({axis:i.getBaseAxis()},t))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return er(t,n)}},a.api||{}),h={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:function(t){var e={};return O(t.dimensions,function(n,o){var l=t.getDimensionInfo(n);if(!l.isExtraCoord){var i=l.coordDim;(e[i]=e[i]||[])[l.coordDimIndex]=o}}),e}(t.getData())},y=!0;return function(t,n){return s=t,y=!0,l&&l(b({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},h),d)};function p(t){null==t&&(t=s),y&&(r=e.getItemModel(t),c=r.getModel(HI),u=r.getModel(VI),_=e.getItemVisual(t,"color"),y=!1)}}function KI(t,e,n,o,l,i){return(t=YI(t,e,n,o,l,i,!0))&&i.setItemGraphicEl(e,t),t}function YI(t,e,n,o,l,i,a){var s=!n,r=(n=n||{}).type,c=n.shape,u=n.style;if(t&&(s||null!=r&&r!==t.__customGraphicType||"path"===r&&function(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}(c)&&ZI(c)!==t.__customPathData||"image"===r&&QI(u,"image")&&u.image!==t.__customImagePath||"text"===r&&QI(c,"text")&&u.text!==t.__customText)&&(l.remove(t),t=null),!s){var _=!t;return function(t,e,n,o,l,i,a){var s={},r=n.style||{};if(n.shape&&(s.shape=m(n.shape)),n.position&&(s.position=n.position.slice()),n.scale&&(s.scale=n.scale.slice()),n.origin&&(s.origin=n.origin.slice()),n.rotation&&(s.rotation=n.rotation),"image"===t.type&&n.style){var c=s.style={};O(["x","y","width","height"],function(e){jI(e,c,r,t.style,i)})}if("text"===t.type&&n.style&&(c=s.style={},O(["x","y"],function(e){jI(e,c,r,t.style,i)}),!r.hasOwnProperty("textFill")&&r.fill&&(r.textFill=r.fill),!r.hasOwnProperty("textStroke")&&r.stroke&&(r.textStroke=r.stroke)),"group"!==t.type&&(t.useStyle(r),i)){t.style.opacity=0;var u=r.opacity;null==u&&(u=1),lr(t,{style:{opacity:u}},o,e)}i?t.attr(s):or(t,s,o,e),n.hasOwnProperty("z2")&&t.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&t.attr("silent",n.silent),n.hasOwnProperty("invisible")&&t.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&t.attr("ignore",n.ignore),n.hasOwnProperty("info")&&t.attr("info",n.info);var _=n.styleEmphasis;Ls(t,_),a&&Ws(t,!1!==_)}(t=t||function(t){var e,n=t.type;if("path"===n){var o=t.shape,l=null!=o.width&&null!=o.height?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,i=ZI(o);(e=Bs(i,null,l,o.layout||"center")).__customPathData=i}else if("image"===n)(e=new Jo({})).__customImagePath=t.style.image;else if("text"===n)(e=new Ua({})).__customText=t.style.text;else if("group"===n)e=new Nn;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');e=new(Es(n))}return e.__customGraphicType=n,e.name=t.name,e}(n),e,n,o,0,_,a),"group"===r&&function(t,e,n,o,l){var i=n.children,a=i?i.length:0,s=n.$mergeChildren,r="byName"===s||n.diffChildrenByName,c=!1===s;if(a||r||c){if(r)return function(t){new Eh(t.oldChildren,t.newChildren,XI,XI,t).add($I).update($I).remove(JI).execute()}({oldChildren:t.children()||[],newChildren:i||[],dataIndex:e,animatableModel:o,group:t,data:l});c&&t.removeAll();for(var u=0;u<a;u++)i[u]&&YI(t.childAt(u),e,i[u],o,t,l)}}(t,e,n,o,i),l.add(t),t}}function XI(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function $I(t,e){var n=this.context,o=null!=t?n.newChildren[t]:null;YI(null!=e?n.oldChildren[e]:null,n.dataIndex,o,n.animatableModel,n.group,n.data)}function zI(t,e){var n=new vr({},e);return O(LI,function(e,o){t.hasOwnProperty(e)&&(n.option[o]=t[e])}),n}function qI(t,e){for(var n in e)!e.hasOwnProperty(n)&&LI.hasOwnProperty(n)||(t[n]=e[n])}function JI(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function ZI(t){return t&&(t.pathData||t.d)}function QI(t,e){return t&&t.hasOwnProperty(e)}function tR(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function eR(t,e){return e.dim+t.model.componentIndex}function nR(t,e){Cp.call(this,"radius",t,e),this.type="category"}t_.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(t,e){return ay(this.getSource(),this)},getDataParams:function(t,e,n){var o=t_.prototype.getDataParams.apply(this,arguments);return n&&(o.info=n.info),o}}),h_.extend({type:"custom",_data:null,render:function(t,e,n,o){var l=this._data,i=t.getData(),a=this.group,s=WI(t,i,e,n);i.diff(l).add(function(e){KI(null,e,s(e,o),t,a,i)}).update(function(e,n){KI(l.getItemGraphicEl(n),e,s(e,o),t,a,i)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&a.remove(e)}).execute();var r=t.get("clip",!0)?_m(t.coordinateSystem,!1,t):null;r?a.setClipPath(r):a.removeClipPath(),this._data=i},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,o,l){var i=e.getData(),a=WI(e,i,n,o);function s(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)}for(var r=t.start;r<t.end;r++)KI(null,r,a(r,l),e,this.group,i).traverse(s)},dispose:et,filterForExposedEvent:function(t,e,n,o){var l=e.element;if(null==l||n.name===l)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===l)return!0;return!1}}),nR.prototype={constructor:nR,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:Cp.prototype.dataToCoord,radiusToData:Cp.prototype.coordToData},B(nR,Cp);var oR=Wl();function lR(t,e){Cp.call(this,"angle",t,e=e||[0,360]),this.type="category"}function iR(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new nR,this._angleAxis=new lR,this._radiusAxis.polar=this._angleAxis.polar=this}lR.prototype={constructor:lR,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:Cp.prototype.dataToCoord,angleToData:Cp.prototype.coordToData,calculateCategoryInterval:function(){var t=this.getLabelModel(),e=this.scale,n=e.getExtent(),o=e.count();if(n[1]-n[0]<1)return 0;var l=n[0],i=this.dataToCoord(l+1)-this.dataToCoord(l),a=Math.abs(i),s=ho(l,t.getFont(),"center","top"),r=Math.max(s.height,7)/a;isNaN(r)&&(r=1/0);var c=Math.max(0,Math.floor(r)),u=oR(this.model),_=u.lastAutoInterval,d=u.lastTickCount;return null!=_&&null!=d&&Math.abs(_-c)<=1&&Math.abs(d-o)<=1&&c<_?c=_:(u.lastTickCount=o,u.lastAutoInterval=c),c}},B(lR,Cp),iR.prototype={type:"polar",axisPointerEnabled:!0,constructor:iR,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===t&&e.push(n),o.scale.type===t&&e.push(o),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,o=this.getAngleAxis(),l=o.getExtent(),i=Math.min(l[0],l[1]),a=Math.max(l[0],l[1]);o.inverse?i=a-360:a=i+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var r=Math.atan2(-n,e)/Math.PI*180,c=r<i?1:-1;r<i||a<r;)r+=360*c;return[s,r]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},getArea:function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*o,endAngle:-n[1]*o,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,o=e-this.cy,l=n*n+o*o,i=this.r,a=this.r0;return l<=i*i&&a*a<=l}}}};var aR=Ec.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});k(aR.prototype,op);function sR(t,e){return e.type||(e.data?"category":"value")}function rR(t,e){var n=this,o=n.getAngleAxis(),l=n.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();O(e.mapDimension("radius",!0),function(t){l.scale.unionExtentFromData(e,iy(e,t))}),O(e.mapDimension("angle",!0),function(t){o.scale.unionExtentFromData(e,iy(e,t))})}}),Jy(o.scale,o.model),Jy(l.scale,l.model),"category"===o.type&&!o.onBand){var i=o.getExtent(),a=360/o.scale.count();o.inverse?i[1]+=a:i[1]-=a,o.setExtent(i[0],i[1])}}function cR(t,e){if(t.type=e.get("type"),t.scale=Zy(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}(e.axis=t).model=e}Om("angle",aR,sR,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Om("radius",aR,sR,{splitNumber:5}),gh({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),nu.register("polar",{dimensions:iR.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,o){var l=new iR(o);l.update=rR;var i=l.getRadiusAxis(),a=l.getAngleAxis(),s=t.findAxisModel("radiusAxis"),r=t.findAxisModel("angleAxis");cR(i,s),cR(a,r),function(t,e,n){var o=e.get("center"),l=n.getWidth(),i=n.getHeight();t.cx=Cr(o[0],l),t.cy=Cr(o[1],i);var a=t.getRadiusAxis(),s=Math.min(l,i)/2,r=e.get("radius");null==r?r=[0,"100%"]:P(r)||(r=[0,r]),r=[Cr(r[0],s),Cr(r[1],s)],a.inverse?a.setExtent(r[1],r[0]):a.setExtent(r[0],r[1])}(l,t,e),n.push(l),(t.coordinateSystem=l).model=t}),t.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var uR=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function _R(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var o=t.coordToPoint([e[0],n]),l=t.coordToPoint([e[1],n]);return{x1:o[0],y1:o[1],x2:l[0],y2:l[1]}}function dR(t){return t.getRadiusAxis().inverse?0:1}function hR(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}nk.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,o=n.polar,l=o.getRadiusAxis().getExtent(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=C(n.getViewLabels(),function(t){return(t=m(t)).coord=n.dataToCoord(t.tickValue),t});hR(s),hR(i),O(uR,function(e){!t.get(e+".show")||n.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,o,i,a,l,s)},this)}},_axisLine:function(t,e,n,o,l){var i,a=t.getModel("axisLine.lineStyle"),s=dR(e),r=s?0:1;(i=0===l[r]?new Ha({shape:{cx:e.cx,cy:e.cy,r:l[s]},style:a.getLineStyle(),z2:1,silent:!0}):new ja({shape:{cx:e.cx,cy:e.cy,r:l[s],r0:l[r]},style:a.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(i)},_axisTick:function(t,e,n,o,l){var i=t.getModel("axisTick"),a=(i.get("inside")?-1:1)*i.get("length"),s=l[dR(e)],r=C(n,function(t){return new es({shape:_R(e,[s,s+a],t.coord)})});this.group.add(Os(r,{style:b(i.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_minorTick:function(t,e,n,o,l){if(o.length){for(var i=t.getModel("axisTick"),a=t.getModel("minorTick"),s=(i.get("inside")?-1:1)*a.get("length"),r=l[dR(e)],c=[],u=0;u<o.length;u++)for(var _=0;_<o[u].length;_++)c.push(new es({shape:_R(e,[r,r+s],o[u][_].coord)}));this.group.add(Os(c,{style:b(a.getModel("lineStyle").getLineStyle(),b(i.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(t,e,n,o,l,i){var a=t.getCategories(!0),s=t.getModel("axisLabel"),r=s.get("margin"),c=t.get("triggerEvent");O(i,function(n,o){var i=s,u=n.tickValue,_=l[dR(e)],d=e.coordToPoint([_+r,n.coord]),h=e.cx,y=e.cy,p=Math.abs(d[0]-h)/_<.3?"center":d[0]>h?"left":"right",m=Math.abs(d[1]-y)/_<.3?"middle":d[1]>y?"top":"bottom";a&&a[u]&&a[u].textStyle&&(i=new vr(a[u].textStyle,s,s.ecModel));var k=new Ua({silent:Hm.isLabelSilent(t)});this.group.add(k),zs(k.style,i,{x:d[0],y:d[1],textFill:i.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:p,textVerticalAlign:m}),c&&(k.eventData=Hm.makeAxisEventDataBase(t),k.eventData.targetType="axisLabel",k.eventData.value=n.rawLabel)},this)},_splitLine:function(t,e,n,o,l){var i=t.getModel("splitLine").getModel("lineStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var r=[],c=0;c<n.length;c++){var u=s++%a.length;r[u]=r[u]||[],r[u].push(new es({shape:_R(e,l,n[c].coord)}))}for(c=0;c<r.length;c++)this.group.add(Os(r[c],{style:b({stroke:a[c%a.length]},i.getLineStyle()),silent:!0,z:t.get("z")}))},_minorSplitLine:function(t,e,n,o,l){if(o.length){for(var i=t.getModel("minorSplitLine").getModel("lineStyle"),a=[],s=0;s<o.length;s++)for(var r=0;r<o[s].length;r++)a.push(new es({shape:_R(e,l,o[s][r].coord)}));this.group.add(Os(a,{style:i.getLineStyle(),silent:!0,z:t.get("z")}))}},_splitArea:function(t,e,n,o,l){if(n.length){var i=t.getModel("splitArea").getModel("areaStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var r=[],c=Math.PI/180,u=-n[0].coord*c,_=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]),h=t.get("clockwise"),y=1;y<n.length;y++){var p=s++%a.length;r[p]=r[p]||[],r[p].push(new Ga({shape:{cx:e.cx,cy:e.cy,r0:_,r:d,startAngle:u,endAngle:-n[y].coord*c,clockwise:h},silent:!0})),u=-n[y].coord*c}for(y=0;y<r.length;y++)this.group.add(Os(r[y],{style:b({fill:a[y%a.length]},i.getAreaStyle()),silent:!0}))}}});var yR=["axisLine","axisTickLabel","axisName"],pR=["splitLine","splitArea","minorSplitLine"];nk.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,o=n.polar,l=o.getAngleAxis(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=l.getExtent()[0],r=n.getExtent(),c=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(o,t,s),u=new Hm(t,c);O(yR,u.add,u),this.group.add(u.getGroup()),O(pR,function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,o,s,r,i,a)},this)}},_splitLine:function(t,e,n,o,l){var i=t.getModel("splitLine").getModel("lineStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var r=[],c=0;c<l.length;c++){var u=s++%a.length;r[u]=r[u]||[],r[u].push(new Ha({shape:{cx:e.cx,cy:e.cy,r:l[c].coord}}))}for(c=0;c<r.length;c++)this.group.add(Os(r[c],{style:b({stroke:a[c%a.length],fill:null},i.getLineStyle()),silent:!0}))},_minorSplitLine:function(t,e,n,o,l,i){if(i.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],r=0;r<i.length;r++)for(var c=0;c<i[r].length;c++)s.push(new Ha({shape:{cx:e.cx,cy:e.cy,r:i[r][c].coord}}));this.group.add(Os(s,{style:b({fill:null},a.getLineStyle()),silent:!0}))}},_splitArea:function(t,e,n,o,l){if(l.length){var i=t.getModel("splitArea").getModel("areaStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var r=[],c=l[0].coord,u=1;u<l.length;u++){var _=s++%a.length;r[_]=r[_]||[],r[_].push(new Ga({shape:{cx:e.cx,cy:e.cy,r0:c,r:l[u].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=l[u].coord}for(u=0;u<r.length;u++)this.group.add(Os(r[u],{style:b({fill:a[u%a.length]},i.getAreaStyle()),silent:!0}))}}});var mR=nI.extend({makeElOption:function(t,e,n,o,l){var i=n.axis;"angle"===i.dim&&(this.animationThreshold=Math.PI/18);var a,s=i.polar,r=s.getOtherAxis(i).getExtent();a=i["dataTo"+ic(i.dim)](e);var c=o.get("type");if(c&&"none"!==c){var u=sI(o),_=kR[c](i,s,a,r,u);_.style=u,t.graphicKey=_.type,t.pointer=_}var d=o.get("label.margin");rI(t,n,o,l,function(t,e,n,o,l){var i=e.axis,a=i.dataToCoord(t),s=o.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var r,c,u,_=o.getRadiusAxis().getExtent();if("radius"===i.dim){var d=ie();ue(d,d,s),ce(d,d,[o.cx,o.cy]),r=ar([a,-l],d);var h=e.getModel("axisLabel").get("rotate")||0,y=Hm.innerTextLayout(s,h*Math.PI/180,-1);c=y.textAlign,u=y.textVerticalAlign}else{var p=_[1];r=o.coordToPoint([p+l,a]);var m=o.cx,k=o.cy;c=Math.abs(r[0]-m)/p<.3?"center":r[0]>m?"left":"right",u=Math.abs(r[1]-k)/p<.3?"middle":r[1]>k?"top":"bottom"}return{position:r,align:c,verticalAlign:u}}(e,n,0,s,d))}}),kR={line:function(t,e,n,o,l){return"angle"===t.dim?{type:"Line",shape:dI(e.coordToPoint([o[0],n]),e.coordToPoint([o[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,o,l){var i=Math.max(1,t.getBandWidth()),a=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:yI(e.cx,e.cy,o[0],o[1],(-n-i/2)*a,(i/2-n)*a)}:{type:"Sector",shape:yI(e.cx,e.cy,n-i/2,n+i/2,0,2*Math.PI)}}};function gR(t,e){e.update="updateView",dh(e,function(e,n){var o={};return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name),O(n.coordinateSystem.regions,function(t){o[t.name]=n.isSelected(t.name)||!1})}),{selected:o,name:e.name}})}function fR(t,e,n){this._model=t}function bR(t,e,n,o){var l=n.calendarModel,i=n.seriesModel,a=l?l.coordinateSystem:i?i.coordinateSystem:null;return a===this?a[t](o):null}nk.registerAxisPointerClass("PolarAxisPointer",mR),yh(S(function(t,e,n){var o={},l=function(t){var e={};O(t,function(t,n){var o=t.getData(),l=t.coordinateSystem,i=l.getBaseAxis(),a=eR(l,i),s=i.getExtent(),r="category"===i.type?i.getBandWidth():Math.abs(s[1]-s[0])/o.count(),c=e[a]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=c.stacks;e[a]=c;var _=tR(t);u[_]||c.autoWidthCount++,u[_]=u[_]||{width:0,maxWidth:0};var d=Cr(t.get("barWidth"),r),h=Cr(t.get("barMaxWidth"),r),y=t.get("barGap"),p=t.get("barCategoryGap");d&&!u[_].width&&(d=Math.min(c.remainedWidth,d),u[_].width=d,c.remainedWidth-=d),h&&(u[_].maxWidth=h),null!=y&&(c.gap=y),null!=p&&(c.categoryGap=p)});var n={};return O(e,function(t,e){n[e]={};var o=t.stacks,l=t.bandWidth,i=Cr(t.categoryGap,l),a=Cr(t.gap,1),s=t.remainedWidth,r=t.autoWidthCount,c=(s-i)/(r+(r-1)*a);c=Math.max(c,0),O(o,function(t,e){var n=t.maxWidth;n&&n<c&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,r--)}),c=(s-i)/(r+(r-1)*a),c=Math.max(c,0);var u,_=0;O(o,function(t,e){t.width||(t.width=c),_+=(u=t).width*(1+a)}),u&&(_-=u.width*a);var d=-_/2;O(o,function(t,o){n[e][o]=n[e][o]||{offset:d,width:t.width},d+=t.width*(1+a)})}),n}(w(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),a=eR(n,i),s=tR(t),r=l[a][s],c=r.offset,u=r.width,_=n.getOtherAxis(i),d=t.coordinateSystem.cx,h=t.coordinateSystem.cy,y=t.get("barMinHeight")||0,p=t.get("barMinAngle")||0;o[s]=o[s]||[];for(var m=e.mapDimension(_.dim),k=e.mapDimension(i.dim),g=ly(e,m),f="radius"!==i.dim||!t.get("roundCap",!0),b="radius"===_.dim?_.dataToRadius(0):_.dataToAngle(0),v=0,T=e.count();v<T;v++){var E,B,I,R,O=e.get(m,v),C=e.get(k,v),N=0<=O?"p":"n",w=b;if(g&&(o[s][C]||(o[s][C]={p:b,n:b}),w=o[s][C][N]),"radius"===_.dim){var A=_.dataToRadius(O)-b,M=i.dataToAngle(C);Math.abs(A)<y&&(A=(A<0?-1:1)*y),B=(E=w)+A,R=(I=M-c)-u,g&&(o[s][C][N]=B)}else{var S=_.dataToAngle(O,f)-b,P=i.dataToRadius(C);Math.abs(S)<p&&(S=(S<0?-1:1)*p),B=(E=P+c)+u,R=(I=w)+S,g&&(o[s][C][N]=R)}e.setItemLayout(v,{cx:d,cy:h,r0:E,r:B,startAngle:-I*Math.PI/180,endAngle:-R*Math.PI/180})}}},this)},"bar")),fh({type:"polar"}),I(Ec.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){Ec.prototype.init.apply(this,arguments),Dl(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=Qg.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=N(t.regions||[],function(t,n){return n.name&&t.set(n.name,new vr(n,e)),t},Q()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new vr(null,this,this.ecModel)},getFormattedLabel:function(t,e){e=e||"normal";var n=this.getRegionModel(t).get(("normal"===e?"":e+".")+"label.formatter"),o={name:t};return"function"==typeof n?(o.status=e,n(o)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}}),Pk),fh({type:"geo",init:function(t,e){var n=new Fg(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,o){if(!o||"geoToggleSelect"!==o.type||o.from!==this.uid){var l=this._mapDraw;t.get("show")?l.draw(t,e,n,this,o):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),gR("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),gR("select",{type:"geoSelect",event:"geoselected"}),gR("unSelect",{type:"geoUnSelect",event:"geounselected"}),fR.prototype={constructor:fR,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=Fr(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var o=t.getDate();o=o<10?"0"+o:o;var l=t.getDay();return{y:e,m:n,d:o,day:l=Math.abs((l+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+o,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],l=this._model.get("cellSize").slice(),i=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];O([0,1],function(t){c(l,t)&&(i[o[t]]=l[t]*a[t])});var s={width:e.getWidth(),height:e.getHeight()},r=this._rect=yc(i,s);function c(t,e){return null!=t[e]&&"auto"!==t[e]}O([0,1],function(t){c(l,t)||(l[t]=r[o[t]]/a[t])}),this._sw=l[0],this._sh=l[1]},dataToPoint:function(t,e){P(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),o=this._rangeInfo,l=n.formatedDate;if(e&&!(n.time>=o.start.time&&n.time<o.end.time+864e5))return[NaN,NaN];var i=n.day,a=this._getRangeInfo([o.start.time,l]).nthWeek;return"vertical"===this._orient?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,o):this._getDateByWeeksAndDay(e,n-1,o)},convertToPixel:S(bR,"dataToPoint"),convertFromPixel:S(bR,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(P(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),o=n.date;o.setMonth(o.getMonth()+1);var l=this.getNextNDay(o,-1);t=[n.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var i=this._getRangeInfo(t);return i.start.time>i.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,o=new Date(t[0].time),l=o.getDate(),i=t[1].date.getDate();o.setDate(l+n-1);var a=o.getDate();if(a!==i)for(var s=0<o.getTime()-t[1].time?1:-1;(a=o.getDate())!==i&&0<(o.getTime()-t[1].time)*s;)n-=s,o.setDate(a-s);var r=Math.floor((n+t[0].day+6)/7),c=e?1-r:r-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:r,nthWeek:c,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var o=this._getRangeInfo(n);if(t>o.weeks||0===t&&e<o.fweek||t===o.weeks&&e>o.lweek)return!1;var l=7*(t-1)-o.fweek+e,i=new Date(o.start.time);return i.setDate(o.start.d+l),this.getDateInfo(i)}},fR.dimensions=fR.prototype.dimensions,fR.getDimensionsInfo=fR.prototype.getDimensionsInfo,fR.create=function(t,e){var n=[];return t.eachComponent("calendar",function(o){var l=new fR(o,t,e);n.push(l),o.coordinateSystem=l}),t.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},nu.register("calendar",fR);var vR=Ec.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,o){var l=kc(t);vR.superApply(this,"init",arguments),TR(t,l)},mergeOption:function(t,e){vR.superApply(this,"mergeOption",arguments),TR(this.option,t)}});function TR(t,e){var n=t.cellSize;P(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var o=C([0,1],function(t){return function(t,e){return null!=t[_c[e][0]]||null!=t[_c[e][1]]&&null!=t[_c[e][2]]}(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});mc(t,e,{type:"box",ignoreSize:o})}var ER={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},BR={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};fh({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var o=this.group;o.removeAll();var l=t.coordinateSystem,i=l.getRangeInfo(),a=l.getOrient();this._renderDayRect(t,i,o),this._renderLines(t,i,a,o),this._renderYearText(t,i,a,o),this._renderMonthText(t,a,o),this._renderWeekText(t,i,a,o)},_renderDayRect:function(t,e,n){for(var o=t.coordinateSystem,l=t.getModel("itemStyle").getItemStyle(),i=o.getCellWidth(),a=o.getCellHeight(),s=e.start.time;s<=e.end.time;s=o.getNextNDay(s,1).time){var r=o.dataToRect([s],!1).tl,c=new Qa({shape:{x:r[0],y:r[1],width:i,height:a},cursor:"default",style:l});n.add(c)}},_renderLines:function(t,e,n,o){var l=this,i=t.coordinateSystem,a=t.getModel("splitLine.lineStyle").getLineStyle(),s=t.get("splitLine.show"),r=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){d(c.formatedDate),0===u&&(c=i.getDateInfo(e.start.y+"-"+e.start.m));var _=c.date;_.setMonth(_.getMonth()+1),c=i.getDateInfo(_)}function d(e){l._firstDayOfMonth.push(i.getDateInfo(e)),l._firstDayPoints.push(i.dataToRect([e],!1).tl);var r=l._getLinePointsOfOneWeek(t,e,n);l._tlpoints.push(r[0]),l._blpoints.push(r[r.length-1]),s&&l._drawSplitline(r,a,o)}d(i.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,r,n),a,o),s&&this._drawSplitline(l._getEdgesPoints(l._blpoints,r,n),a,o)},_getEdgesPoints:function(t,e,n){var o=[t[0].slice(),t[t.length-1].slice()],l="horizontal"===n?0:1;return o[0][l]=o[0][l]-e/2,o[1][l]=o[1][l]+e/2,o},_drawSplitline:function(t,e,n){var o=new Xa({z2:20,shape:{points:t},style:e});n.add(o)},_getLinePointsOfOneWeek:function(t,e,n){var o=t.coordinateSystem;e=o.getDateInfo(e);for(var l=[],i=0;i<7;i++){var a=o.getNextNDay(e.time,i),s=o.dataToRect([a.time],!1);l[2*a.day]=s.tl,l[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return l},_formatterLabel:function(t,e){return"string"==typeof t&&t?ec(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,o,l){e=e.slice();var i=["center","bottom"];"bottom"===o?(e[1]+=l,i=["center","top"]):"left"===o?e[0]-=l:"right"===o?(e[0]+=l,i=["center","top"]):e[1]-=l;var a=0;return"left"!==o&&"right"!==o||(a=Math.PI/2),{rotation:a,position:e,style:{textAlign:i[0],textVerticalAlign:i[1]}}},_renderYearText:function(t,e,n,o){var l=t.getModel("yearLabel");if(l.get("show")){var i=l.get("margin"),a=l.get("position");a=a||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],r=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===n?0:1,_={top:[r,s[u][1]],bottom:[r,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},d=e.start.y;+e.end.y>+e.start.y&&(d=d+"-"+e.end.y);var h=l.get("formatter"),y={start:e.start.y,end:e.end.y,nameMap:d},p=this._formatterLabel(h,y),m=new Ua({z2:30});zs(m.style,l,{text:p}),m.attr(this._yearTextPositionControl(m,_[a],n,a,i)),o.add(m)}},_monthTextPositionControl:function(t,e,n,o,l){var i="left",a="top",s=t[0],r=t[1];return"horizontal"===n?(r+=l,e&&(i="center"),"start"===o&&(a="bottom")):(s+=l,e&&(a="middle"),"start"===o&&(i="right")),{x:s,y:r,textAlign:i,textVerticalAlign:a}},_renderMonthText:function(t,e,n){var o=t.getModel("monthLabel");if(o.get("show")){var l=o.get("nameMap"),i=o.get("margin"),a=o.get("position"),s=o.get("align"),r=[this._tlpoints,this._blpoints];D(l)&&(l=ER[l.toUpperCase()]||[]);var c="start"===a?0:1,u="horizontal"===e?0:1;i="start"===a?-i:i;for(var _="center"===s,d=0;d<r[c].length-1;d++){var h=r[c][d].slice(),y=this._firstDayOfMonth[d];if(_){var p=this._firstDayPoints[d];h[u]=(p[u]+r[0][d+1][u])/2}var m=o.get("formatter"),k=l[+y.m-1],g={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:k},b=this._formatterLabel(m,g),v=new Ua({z2:30});f(zs(v.style,o,{text:b}),this._monthTextPositionControl(h,_,e,a,i)),n.add(v)}}},_weekTextPositionControl:function(t,e,n,o,l){var i="center",a="middle",s=t[0],r=t[1],c="start"===n;return"horizontal"===e?(s=s+o+(c?1:-1)*l[0]/2,i=c?"right":"left"):(r=r+o+(c?1:-1)*l[1]/2,a=c?"bottom":"top"),{x:s,y:r,textAlign:i,textVerticalAlign:a}},_renderWeekText:function(t,e,n,o){var l=t.getModel("dayLabel");if(l.get("show")){var i=t.coordinateSystem,a=l.get("position"),s=l.get("nameMap"),r=l.get("margin"),c=i.getFirstDayOfWeek();D(s)&&(s=BR[s.toUpperCase()]||[]);var u=i.getNextNDay(e.end.time,7-e.lweek).time,_=[i.getCellWidth(),i.getCellHeight()];r=Cr(r,_["horizontal"===n?0:1]),"start"===a&&(u=i.getNextNDay(e.start.time,-(7+e.fweek)).time,r=-r);for(var d=0;d<7;d++){var h,y=i.getNextNDay(u,d),p=i.dataToRect([y.time],!1).center;h=Math.abs((d+c)%7);var m=new Ua({z2:30});f(zs(m.style,l,{text:s[h]}),this._weekTextPositionControl(p,n,a,r,_)),o.add(m)}}}});var IR={path:null,compoundPath:null,group:Nn,image:Jo,text:Ua};uh(function(t){var e=t.graphic;P(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var RR=gh({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,RR.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,o=(e?n:t).elements,l=n.elements=e?[]:n.elements,i=[];this._flatten(o,i);var a=Fl(l,i);Hl(a);var s=this._elOptionsToUpdate=[];O(a,function(t,e){var n=t.option;n&&(s.push(n),function(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var o=e.parentOption;o?e.parentId=o.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var o=f({},n),l=t[e],i=n.$action||"merge";"merge"===i?l?(k(l,o,!0),mc(l,o,{ignoreSize:!0}),gc(n,l)):t[e]=o:"replace"===i?t[e]=o:"remove"===i&&l&&(t[e]=null)}(l,e,n),function(t,e){t&&(t.hv=e.hv=[NR(e,["left","right"]),NR(e,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}(l[e],n))},this);for(var r=l.length-1;0<=r;r--)null==l[r]?l.splice(r,1):delete l[r].$action},_flatten:function(t,e,n){O(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var o=t.children;"group"===t.type&&o&&this._flatten(o,e,t),delete t.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});function OR(t,e,n,o){var l=n.type,i=new(IR.hasOwnProperty(l)?IR[l]:Es(l))(n);e.add(i),o.set(t,i),i.__ecGraphicId=t}function CR(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){CR(t,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function NR(t,e){var n;return O(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}fh({type:"graphic",init:function(t,e){this._elMap=Q(),this._lastGraphicModel},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,o=this.group;O(e,function(e){var l=e.$action,i=e.id,a=n.get(i),s=e.parentId,r=null!=s?n.get(s):o,c=e.style;"text"===e.type&&c&&(e.hv&&e.hv[1]&&(c.textVerticalAlign=c.textBaseline=null),!c.hasOwnProperty("textFill")&&c.fill&&(c.textFill=c.fill),!c.hasOwnProperty("textStroke")&&c.stroke&&(c.textStroke=c.stroke));var u=function(t){return t=f({},t),O(["id","parentId","$action","hv","bounding"].concat(uc),function(e){delete t[e]}),t}(e);l&&"merge"!==l?"replace"===l?(CR(a,n),OR(i,r,u,n)):"remove"===l&&CR(a,n):a?a.attr(u):OR(i,r,u,n);var _=n.get(i);_&&(_.__ecGraphicWidthOption=e.width,_.__ecGraphicHeightOption=e.height,function(t,e){var n=t.eventData;t.silent||t.ignore||n||(n=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=t.info)}(_,t))})}},_relocate:function(t,e){for(var n=t.option.elements,o=this.group,l=this._elMap,i=e.getWidth(),a=e.getHeight(),s=0;s<n.length;s++){var r=n[s];if((u=l.get(r.id))&&u.isGroup){var c=(_=u.parent)===o;u.__ecGraphicWidth=Cr(u.__ecGraphicWidthOption,c?i:_.__ecGraphicWidth)||0,u.__ecGraphicHeight=Cr(u.__ecGraphicHeightOption,c?a:_.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var u,_;r=n[s],(u=l.get(r.id))&&pc(u,r,(_=u.parent)===o?{width:i,height:a}:{width:_.__ecGraphicWidth,height:_.__ecGraphicHeight},null,{hv:r.hv,boundingMode:r.bounding})}},_clear:function(){var t=this._elMap;t.each(function(e){CR(e,t)}),this._elMap=Q()},dispose:function(){this._clear()}});var wR={};function AR(t,e){wR[t]=e}function MR(t){return wR[t]}var SR=gh({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){SR.superApply(this,"optionUpdated",arguments),O(this.option.feature,function(t,e){var n=MR(e);n&&k(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function PR(t,e){var n=$r(e.get("padding")),o=e.getItemStyle(["color","opacity"]);return o.fill=e.get("backgroundColor"),new Qa({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:o,silent:!0,z2:-1})}fh({type:"toolbox",render:function(t,e,n,o){var l=this.group;if(l.removeAll(),t.get("show")){var i=+t.get("itemSize"),a=t.get("feature")||{},s=this._features||(this._features={}),r=[];O(a,function(t,e){r.push(e)}),new Eh(this._featureNames||[],r).add(c).update(c).remove(S(c,null)).execute(),this._featureNames=r,function(t,e,n){var o=e.getBoxLayoutParams(),l=e.get("padding"),i={width:n.getWidth(),height:n.getHeight()},a=yc(o,i,l);hc(e.get("orient"),t,e.get("itemGap"),a.width,a.height),pc(t,o,i,l)}(l,t,n),l.add(PR(l.getBoundingRect(),t)),l.eachChild(function(t){var e=t.__title,o=t.hoverStyle;if(o&&e){var a=ho(e,Io(o)),s=t.position[0]+l.position[0],r=!1;t.position[1]+l.position[1]+i+a.height>n.getHeight()&&(o.textPosition="top",r=!0);var c=r?-5-a.height:i+8;s+a.width/2>n.getWidth()?(o.textPosition=["100%",c],o.textAlign="right"):s-a.width/2<0&&(o.textPosition=[0,c],o.textAlign="left")}})}function c(c,u){var _,d=r[c],h=r[u],y=a[d],p=new vr(y,t,t.ecModel);if(o&&null!=o.newTitle&&o.featureName===d&&(y.title=o.newTitle),d&&!h){if(function(t){return 0===t.indexOf("my")}(d))_={model:p,onclick:p.option.onclick,featureName:d};else{var m=MR(d);if(!m)return;_=new m(p,e,n)}s[d]=_}else{if(!(_=s[h]))return;_.model=p,_.ecModel=e,_.api=n}d||!h?p.get("show")&&!_.unusable?(function(o,a,s){var r=o.getModel("iconStyle"),c=o.getModel("emphasis.iconStyle"),u=a.getIcons?a.getIcons():o.get("icon"),_=o.get("title")||{};if("string"==typeof u){var d=u,h=_;_={},(u={})[s]=d,_[s]=h}var y=o.iconPaths={};O(u,function(s,u){var d=ur(s,{},{x:-i/2,y:-i/2,width:i,height:i});d.setStyle(r.getItemStyle()),d.hoverStyle=c.getItemStyle(),d.setStyle({text:_[u],textAlign:c.get("textAlign"),textBorderRadius:c.get("textBorderRadius"),textPadding:c.get("textPadding"),textFill:null});var h=t.getModel("tooltip");h&&h.get("show")&&d.attr("tooltip",f({content:_[u],formatter:h.get("formatter",!0)||function(){return _[u]},formatterParams:{componentType:"toolbox",name:u,title:_[u],$vars:["name","title"]},position:h.get("position",!0)||"bottom"},h.option)),js(d),t.get("showTitle")&&(d.__title=_[u],d.on("mouseover",function(){var e=c.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";d.setStyle({textFill:c.get("textFill")||e.fill||e.stroke||"#000",textBackgroundColor:c.get("textBackgroundColor"),textPosition:c.get("textPosition")||n})}).on("mouseout",function(){d.setStyle({textFill:null,textBackgroundColor:null})})),d.trigger(o.get("iconStatus."+u)||"normal"),l.add(d),d.on("click",M(a.onclick,a,e,n,u)),y[u]=d})}(p,_,d),p.setIconStatus=function(t,e){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,o[t]&&o[t].trigger(e)},_.render&&_.render(p,e,n,o)):_.remove&&_.remove(e,n):_.dispose&&_.dispose(e,n)}},updateView:function(t,e,n,o){O(this._features,function(t){t.updateView&&t.updateView(t.model,e,n,o)})},remove:function(t,e){O(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){O(this._features,function(n){n.dispose&&n.dispose(t,e)})}});var xR=O_.toolbox.saveAsImage;function DR(t){this.model=t}DR.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:xR.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:xR.lang.slice()},DR.prototype.unusable=!l.canvasSupported,DR.prototype.onclick=function(t,e){var n=this.model,o=n.get("name")||t.get("title.0.text")||"echarts",i="svg"===e.getZr().painter.getType()?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:i,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||l.browser.ie||l.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(a.split(",")[1]),r=s.length,c=new Uint8Array(r);r--;)c[r]=s.charCodeAt(r);var u=new Blob([c]);window.navigator.msSaveOrOpenBlob(u,o+"."+i)}else{var _=n.get("lang"),d='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>';window.open().document.write(d)}else{var h=document.createElement("a");h.download=o+"."+i,h.target="_blank",h.href=a;var y=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(y)}},AR("saveAsImage",DR);var LR=O_.toolbox.magicType,UR="__ec_magicType_stack__";function FR(t){this.model=t}FR.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:m(LR.title),option:{},seriesIndex:{}};var HR=FR.prototype;HR.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return O(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n};var VR={line:function(t,e,n,o){if("bar"===t)return k({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get("option.line")||{},!0)},bar:function(t,e,n,o){if("line"===t)return k({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get("option.bar")||{},!0)},stack:function(t,e,n,o){var l=n.get("stack")===UR;if("line"===t||"bar"===t)return o.setIconStatus("stack",l?"normal":"emphasis"),k({id:e,stack:l?"":UR},o.get("option.stack")||{},!0)}},GR=[["line","bar"],["stack"]];HR.onclick=function(t,e,n){var o=this.model,l=o.get("seriesIndex."+n);if(VR[n]){var i,a={series:[]};O(GR,function(t){0<=E(t,n)&&O(t,function(t){o.setIconStatus(t,"normal")})}),o.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==l?null:{seriesIndex:l}},function(e){var l=e.subType,i=e.id,s=VR[n](l,i,e,o);s&&(b(s,e.option),a.series.push(s));var r=e.coordinateSystem;if(r&&"cartesian2d"===r.type&&("line"===n||"bar"===n)){var c=r.getAxesByScale("ordinal")[0];if(c){var u=c.dim+"Axis",_=t.queryComponents({mainType:u,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;a[u]=a[u]||[];for(var d=0;d<=_;d++)a[u][_]=a[u][_]||{};a[u][_].boundaryGap="bar"===n}}}),"stack"===n&&(i=a.series&&a.series[0]&&a.series[0].stack===UR?k({stack:LR.title.tiled},LR.title):m(LR.title)),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:i,featureName:"magicType"})}},dh({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),AR("magicType",FR);var jR=O_.toolbox.dataView,WR=new Array(60).join("-"),KR="\t";function YR(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var XR=new RegExp("[\t]+","g");function $R(t){this._dom=null,this.model=t}$R.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:m(jR.title),lang:m(jR.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},$R.prototype.onclick=function(t,e){var n=e.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",l.style.backgroundColor=o.get("backgroundColor")||"#fff";var i=document.createElement("h4"),a=o.get("lang")||[];i.innerHTML=a[0]||o.get("title"),i.style.cssText="margin: 10px 20px;",i.style.color=o.get("textColor");var s=document.createElement("div"),r=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var c=o.get("optionToContent"),u=o.get("contentToOption"),_=function(t){var e=function(t){var e={},n=[],o=[];return t.eachRawSeries(function(t){var l=t.coordinateSystem;if(!l||"cartesian2d"!==l.type&&"polar"!==l.type)n.push(t);else{var i=l.getBaseAxis();if("category"===i.type){var a=i.dim+"_"+i.index;e[a]||(e[a]={categoryAxis:i,valueAxis:l.getOtherAxis(i),series:[]},o.push({axisDim:i.dim,axisIndex:i.index})),e[a].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:o}}(t);return{value:w([function(t){var e=[];return O(t,function(t,n){var o=t.categoryAxis,l=t.valueAxis.dim,i=[" "].concat(C(t.series,function(t){return t.name})),a=[o.model.getCategories()];O(t.series,function(t){var e=t.getRawData();a.push(t.getRawData().mapArray(e.mapDimension(l),function(t){return t}))});for(var s=[i.join(KR)],r=0;r<a[0].length;r++){for(var c=[],u=0;u<a.length;u++)c.push(a[u][r]);s.push(c.join(KR))}e.push(s.join("\n"))}),e.join("\n\n"+WR+"\n\n")}(e.seriesGroupByCategoryAxis),function(t){return C(t,function(t){var e=t.getRawData(),n=[t.name],o=[];return e.each(e.dimensions,function(){for(var t=arguments.length,l=arguments[t-1],i=e.getName(l),a=0;a<t-1;a++)o[a]=arguments[a];n.push((i?i+KR:"")+o.join(KR))}),n.join("\n")}).join("\n\n"+WR+"\n\n")}(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+WR+"\n\n"),meta:e.meta}}(t);if("function"==typeof c){var d=c(e.getOption());"string"==typeof d?s.innerHTML=d:H(d)&&s.appendChild(d)}else s.appendChild(r),r.readOnly=o.get("readOnly"),r.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",r.style.color=o.get("textColor"),r.style.borderColor=o.get("textareaBorderColor"),r.style.backgroundColor=o.get("textareaColor"),r.value=_.value;var h=_.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:0;left:0;right:0;";var p="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),k=document.createElement("div");p+=";background-color:"+o.get("buttonColor"),p+=";color:"+o.get("buttonTextColor");var g=this;function f(){n.removeChild(l),g._dom=null}Kt(m,"click",f),Kt(k,"click",function(){var t;try{t="function"==typeof u?u(s,e.getOption()):function(t,e){var n=t.split(new RegExp("\n*"+WR+"\n*","g")),o={series:[]};return O(n,function(t,n){if(function(t){if(0<=t.slice(0,t.indexOf("\n")).indexOf(KR))return!0}(t)){var l=function(t){for(var e=t.split(/\n+/g),n=[],o=C(YR(e.shift()).split(XR),function(t){return{name:t,data:[]}}),l=0;l<e.length;l++){var i=YR(e[l]).split(XR);n.push(i.shift());for(var a=0;a<i.length;a++)o[a]&&(o[a].data[l]=i[a])}return{series:o,categories:n}}(t),i=e[n],a=i.axisDim+"Axis";i&&(o[a]=o[a]||[],o[a][i.axisIndex]={data:l.categories},o.series=o.series.concat(l.series))}else l=function(t){for(var e=t.split(/\n+/g),n=YR(e.shift()),o=[],l=0;l<e.length;l++){var i=YR(e[l]);if(i){var a,s=i.split(XR),r="",c=!1;a=isNaN(s[0])?(c=!0,r=s[0],s=s.slice(1),o[l]={name:r,value:[]},o[l].value):o[l]=[];for(var u=0;u<s.length;u++)a.push(+s[u]);1===a.length&&(c?o[l].value=a[0]:o[l]=a[0])}}return{name:n,data:o}}(t),o.series.push(l)}),o}(r.value,h)}catch(t){throw f(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),f()}),m.innerHTML=a[1],k.innerHTML=a[2],k.style.cssText=p,m.style.cssText=p,o.get("readOnly")||y.appendChild(k),y.appendChild(m),l.appendChild(i),l.appendChild(s),l.appendChild(y),s.style.height=n.clientHeight-80+"px",n.appendChild(l),this._dom=l},$R.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},$R.prototype.dispose=function(t,e){this.remove(t,e)},AR("dataView",$R),dh({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];O(t.newOption.series,function(t){var o=e.getSeriesByName(t.name)[0];if(o){var l=o.get("data");n.push({name:t.name,data:function(t,e){return C(t,function(t,n){var o=e&&e[n];if(!L(o)||P(o))return t;L(t)&&!P(t)||(t={value:t});var l=null!=o.name&&null==t.name;return t=b(t,o),l&&delete t.name,t})}(t.data,l)})}else n.push(f({type:"scatter"},t))}),e.mergeOption(b({series:n},t.newOption))});var zR=O,qR=E,JR=S,ZR=["dataToPoint","pointToData"],QR=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function tO(t,e,n){var o=this._targetInfoList=[],l={},i=oO(e,t);zR(lO,function(t,e){n&&n.include&&!(0<=qR(n.include,e))||t(i,o,l)})}var eO=tO.prototype;function nO(t){return t[0]>t[1]&&t.reverse(),t}function oO(t,e){return Yl(t,e,{includeMainTypes:QR})}eO.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var o=sO[t.brushType](0,n,e);t.__rangeOffset={offset:cO[t.brushType](o.values,t.range,[1,1]),xyMinMax:o.xyMinMax}}})},eO.matchOutputRanges=function(t,e,n){zR(t,function(t){var o=this.findTargetInfo(t,e);o&&!0!==o&&O(o.coordSyses,function(o){var l=sO[t.brushType](1,o,t.range);n(t,l.values,o,e)})},this)},eO.setInputRanges=function(t,e){zR(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var o=sO[t.brushType](0,n.coordSys,t.coordRange),l=t.__rangeOffset;t.range=l?cO[t.brushType](o.values,l.offset,function(t,e){var n=_O(t),o=_O(e),l=[n[0]/o[0],n[1]/o[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}(o.xyMinMax,l.xyMinMax)):o.values}},this)},eO.makePanelOpts=function(t,e){return C(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:DT(o),isTargetByCursor:UT(o,t,n.coordSysModel),getLinearBrushOtherExtent:LT(o)}})},eO.controlSeries=function(t,e,n){var o=this.findTargetInfo(t,n);return!0===o||o&&0<=qR(o.coordSyses,e.coordinateSystem)},eO.findTargetInfo=function(t,e){for(var n=this._targetInfoList,o=oO(e,t),l=0;l<n.length;l++){var i=n[l],a=t.panelId;if(a){if(i.panelId===a)return i}else for(l=0;l<iO.length;l++)if(iO[l](o,i))return i}return!0};var lO={grid:function(t,e){var n=t.xAxisModels,o=t.yAxisModels,l=t.gridModels,i=Q(),a={},s={};(n||o||l)&&(zR(n,function(t){var e=t.axis.grid.model;i.set(e.id,e),a[e.id]=!0}),zR(o,function(t){var e=t.axis.grid.model;i.set(e.id,e),s[e.id]=!0}),zR(l,function(t){i.set(t.id,t),a[t.id]=!0,s[t.id]=!0}),i.each(function(t){var l=t.coordinateSystem,i=[];zR(l.getCartesians(),function(t,e){(0<=qR(n,t.getAxis("x").model)||0<=qR(o,t.getAxis("y").model))&&i.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:i[0],coordSyses:i,getPanelRect:aO.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){zR(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:aO.geo})})}},iO=[function(t,e){var n=t.xAxisModel,o=t.yAxisModel,l=t.gridModel;return!l&&n&&(l=n.axis.grid.model),!l&&o&&(l=o.axis.grid.model),l&&l===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],aO={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(ir(t)),e}},sO={lineX:JR(rO,0),lineY:JR(rO,1),rect:function(t,e,n){var o=e[ZR[t]]([n[0][0],n[1][0]]),l=e[ZR[t]]([n[0][1],n[1][1]]),i=[nO([o[0],l[0]]),nO([o[1],l[1]])];return{values:i,xyMinMax:i}},polygon:function(t,e,n){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:C(n,function(n){var l=e[ZR[t]](n);return o[0][0]=Math.min(o[0][0],l[0]),o[1][0]=Math.min(o[1][0],l[1]),o[0][1]=Math.max(o[0][1],l[0]),o[1][1]=Math.max(o[1][1],l[1]),l}),xyMinMax:o}}};function rO(t,e,n,o){var l=n.getAxis(["x","y"][t]),i=nO(C([0,1],function(t){return e?l.coordToData(l.toLocalCoord(o[t])):l.toGlobalCoord(l.dataToCoord(o[t]))})),a=[];return a[t]=i,a[1-t]=[NaN,NaN],{values:i,xyMinMax:a}}var cO={lineX:JR(uO,0),lineY:JR(uO,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return C(t,function(t,o){return[t[0]-n[0]*e[o][0],t[1]-n[1]*e[o][1]]})}};function uO(t,e,n,o){return[e[0]-o[t]*n[0],e[1]-o[t]*n[1]]}function _O(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var dO=O,hO="\0_ec_hist_store";function yO(t){var e=t[hO];return e||(t[hO]=[{}])}Ec.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var pO,mO,kO,gO,fO=["cartesian2d","polar","singleAxis"],bO=(mO=["axisIndex","axis","index","id"],kO=C(pO=(pO=["x","y","z","radius","angle","single"]).slice(),ic),gO=C(mO=(mO||[]).slice(),ic),function(t,e){O(pO,function(n,o){for(var l={name:n,capital:kO[o]},i=0;i<mO.length;i++)l[mO[i]]=n+gO[i];t.call(e,l)})});function vO(t,e,n,o){this._dimName=t,this._axisIndex=e,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=o,this._dataZoomModel=n}var TO=O,EO=wr;function BO(t,e){var n=t.getAxisModel(),o=t._percentWindow,l=t._valueWindow;if(o){var i=Sr(l,[0,500]);i=Math.min(i,20);var a=e||0===o[0]&&100===o[1];n.setRange(a?null:+l[0].toFixed(i),a?null:+l[1].toFixed(i))}}vO.prototype={constructor:vO,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(function(t){return 0<=E(fO,t)}(n.get("coordinateSystem"))){var o=this._dimName,l=e.queryComponents({mainType:o+"Axis",index:n.get(o+"AxisIndex"),id:n.get(o+"AxisId")})[0];this._axisIndex===(l&&l.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,o=this._dimName,l=this.ecModel,i=this.getAxisModel();return t="x"===o||"y"===o?(e="gridIndex","x"===o?"y":"x"):(e="polarIndex","angle"===o?"radius":"angle"),l.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(i.get(e)||0)&&(n=t)}),n},getMinMaxSpan:function(){return m(this._minMaxSpan)},calculateDataWindow:function(t){var e,n=this._dataExtent,o=this.getAxisModel().axis.scale,l=this._dataZoomModel.getRangePropMode(),i=[0,100],a=[],s=[];TO(["start","end"],function(r,c){var u=t[r],_=t[r+"Value"];"percent"===l[c]?(null==u&&(u=i[c]),_=o.parse(Or(u,i,n))):(e=!0,u=Or(_=null==_?n[c]:o.parse(_),n,i)),s[c]=_,a[c]=u}),EO(s),EO(a);var r=this._minMaxSpan;function c(t,e,n,l,i){var a=i?"Span":"ValueSpan";Dv(0,t,n,"all",r["min"+a],r["max"+a]);for(var s=0;s<2;s++)e[s]=Or(t[s],n,l,!0),i&&(e[s]=o.parse(e[s]))}return e?c(s,a,n,i,!1):c(a,s,i,n,!0),{valueWindow:s,percentWindow:a}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var o=[1/0,-1/0];return TO(n,function(t){var n=t.getData();n&&TO(n.mapDimension(e,!0),function(t){var e=n.getApproximateExtent(t);e[0]<o[0]&&(o[0]=e[0]),e[1]>o[1]&&(o[1]=e[1])})}),o[1]<o[0]&&(o=[NaN,NaN]),function(t,e){var n=t.getAxisModel(),o=n.getMin(!0),l="category"===n.get("type"),i=l&&n.getCategories().length;null!=o&&"dataMin"!==o&&"function"!=typeof o?e[0]=o:l&&(e[0]=0<i?0:NaN);var a=n.getMax(!0);null!=a&&"dataMax"!==a&&"function"!=typeof a?e[1]=a:l&&(e[1]=0<i?i-1:NaN),n.get("scale",!0)||(0<e[0]&&(e[0]=0),e[1]<0&&(e[1]=0))}(t,o),o}(this,this._dimName,e),function(t){var e=t._minMaxSpan={},n=t._dataZoomModel,o=t._dataExtent;TO(["min","max"],function(l){var i=n.get(l+"Span"),a=n.get(l+"ValueSpan");null!=a&&(a=t.getAxisModel().axis.scale.parse(a)),null!=a?i=Or(o[0]+a,o,[0,100],!0):null!=i&&(a=Or(i,[0,100],o,!0)-o[0]),e[l+"Span"]=i,e[l+"ValueSpan"]=a})}(this);var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,BO(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,BO(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),l=t.get("filterMode"),i=this._valueWindow;"none"!==l&&TO(o,function(t){var e=t.getData(),o=e.mapDimension(n,!0);o.length&&("weakFilter"===l?e.filterSelf(function(t){for(var n,l,a,s=0;s<o.length;s++){var r=e.get(o[s],t),c=!isNaN(r),u=r<i[0],_=r>i[1];if(c&&!u&&!_)return!0;c&&(a=!0),u&&(n=!0),_&&(l=!0)}return a&&n&&l}):TO(o,function(n){if("empty"===l)t.setData(e=e.map(n,function(t){return function(t){return t>=i[0]&&t<=i[1]}(t)?t:NaN}));else{var o={};o[n]=i,e.selectRange(o)}}),TO(o,function(t){e.setApproximateExtent(i,t)}))})}}};var IO=O,RO=bO,OO=gh({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var o=CO(t);this.settledOption=o,this.mergeDefaultAndTheme(t,n),this.doInit(o)},mergeOption:function(t){var e=CO(t);k(this.option,t,!0),k(this.settledOption,e,!0),this.doInit(e)},doInit:function(t){var e=this.option;l.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),NO(this,t);var n=this.settledOption;IO([["start","startValue"],["end","endValue"]],function(t,o){"value"===this._rangePropMode[o]&&(e[t[0]]=n[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,o,l){var i=this.dependentModels[e.axis][n],a=i.__dzAxisProxy||(i.__dzAxisProxy=new vO(e.name,n,this,l));t[e.name+"_"+n]=a},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();RO(function(e){var n=e.axisIndex;t[n]=xl(t[n])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;RO(function(n){null!=t[n.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,o=this.dependentModels;if(t){var l="vertical"===e?"y":"x";o[l+"Axis"].length?(n[l+"AxisIndex"]=[0],t=!1):IO(o.singleAxis,function(o){t&&o.get("orient",!0)===e&&(n.singleAxisIndex=[o.componentIndex],t=!1)})}t&&RO(function(e){if(t){var o=[],l=this.dependentModels[e.axis];if(l.length&&!o.length)for(var i=0,a=l.length;i<a;i++)"category"===l[i].get("type")&&o.push(i);(n[e.axisIndex]=o).length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&RO(function(e){var o=n[e.axisIndex],l=t.get(e.axisIndex),i=t.get(e.axisId);E(o,l=t.ecModel.queryComponents({mainType:e.axis,index:l,id:i})[0].componentIndex)<0&&o.push(l)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){t=t||e.name},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return RO(function(o){var l=t.get(o.axisIndex),i=this.dependentModels[o.axis][l];i&&i.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&0<e.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var t;return RO(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;RO(function(o){IO(this.get(o.axisIndex),function(l){t.call(e,o,l,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t){var e=this.option,n=this.settledOption;IO([["start","startValue"],["end","endValue"]],function(o){null==t[o[0]]&&null==t[o[1]]||(e[o[0]]=n[o[0]]=t[o[0]],e[o[1]]=n[o[1]]=t[o[1]])},this),NO(this,t)},setCalculatedRange:function(t){var e=this.option;IO(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function CO(t){var e={};return IO(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function NO(t,e){var n=t._rangePropMode,o=t.get("rangeMode");IO([["start","startValue"],["end","endValue"]],function(t,l){var i=null!=e[t[0]],a=null!=e[t[1]];i&&!a?n[l]="percent":!i&&a?n[l]="value":o?n[l]=o[l]:i&&(n[l]="percent")})}var wO=r_.extend({type:"dataZoom",render:function(t,e,n,o){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var t=this.dataZoomModel,e=this.ecModel,n={};return t.eachTargetAxis(function(t,o){var l=e.getComponent(t.axis,o);if(l){var i=l.getCoordSysModel();i&&function(t,e,n,o){for(var l,i=0;i<n.length;i++)if(n[i].model===t){l=n[i];break}l||n.push(l={model:t,axisModels:[],coordIndex:o}),l.axisModels.push(e)}(i,l,n[i.mainType]||(n[i.mainType]=[]),i.componentIndex)}},this),n}});OO.extend({type:"dataZoom.select"}),wO.extend({type:"dataZoom.select"}),_h({getTargetSeries:function(t){var e=Q();return t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,o){O(o.getAxisProxy(t.name,n).getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,o){o.getAxisProxy(t.name,n).reset(o,e)}),t.eachTargetAxis(function(t,n,o){o.getAxisProxy(t.name,n).filterData(o,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),o=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})})}}),dh("dataZoom",function(t,e){var n=function(t,e,n){return function(l){var i,a={nodes:[],records:{}};if(e(function(t){a.records[t.name]={}}),!l)return a;for(o(l,a);i=!1,t(s),i;);function s(t){!function(t,e){return 0<=E(e.nodes,t)}(t,a)&&function(t,o){var l=!1;return e(function(e){O(n(t,e)||[],function(t){o.records[e.name][t]&&(l=!0)})}),l}(t,a)&&(o(t,a),i=!0)}return a};function o(t,o){o.nodes.push(t),e(function(e){O(n(t,e)||[],function(t){o.records[e.name][t]=!0})})}}(M(e.eachComponent,e,"dataZoom"),bO,function(t,e){return t.get(e.axisIndex)}),o=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){o.push.apply(o,n(t).nodes)}),O(o,function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var AO=O_.toolbox.dataZoom,MO=O;function SO(t,e,n){(this._brushController=new aT(n.getZr())).on("brush",M(this._onBrush,this)).mount(),this._isZoomActive}SO.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:m(AO.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var PO=SO.prototype;PO.render=function(t,e,n,o){this.model=t,this.ecModel=e,this.api=n,function(t,e,n,o,l){var i=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(i="dataZoomSelect"===o.key&&o.dataZoomSelectActive),n._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var a=new tO(DO(t.option),e,{include:["grid"]});n._brushController.setPanels(a.makePanelOpts(l,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!i&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,o,n),function(t,e){t.setIconStatus("back",1<function(t){return yO(t).length}(e)?"emphasis":"normal")}(t,e)},PO.onclick=function(t,e,n){xO[n].call(this)},PO.remove=function(t,e){this._brushController.unmount()},PO.dispose=function(t,e){this._brushController.dispose()};var xO={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=yO(t),n=e[e.length-1];1<e.length&&e.pop();var o={};return dO(n,function(t,n){for(var l=e.length-1;0<=l;l--)if(t=e[l][n]){o[n]=t;break}}),o}(this.ecModel))}};function DO(t){var e={};return O(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),!1!==e[n]&&"none"!==e[n]||(e[n]=[])}),e}PO._onBrush=function(t,e){if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new tO(DO(this.model.option),o,{include:["grid"]}).matchOutputRanges(t,o,function(t,e,n){if("cartesian2d"===n.type){var o=t.brushType;"rect"===o?(l("x",n,e[0]),l("y",n,e[1])):l({lineX:"x",lineY:"y"}[o],n,e)}}),function(t,e){var n=yO(t);dO(e,function(e,o){for(var l=n.length-1;0<=l&&!n[l][o];l--);if(l<0){var i=t.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(i){var a=i.getPercentRange();n[0][o]={dataZoomId:o,start:a[0],end:a[1]}}}}),n.push(e)}(o,n),this._dispatchZoomAction(n)}function l(t,e,l){var i=e.getAxis(t),a=i.model,s=function(t,e,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(o=n)}),o}(t,a,o),r=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==r.minValueSpan&&null==r.maxValueSpan||(l=Dv(0,l.slice(),i.scale.getExtent(),0,r.minValueSpan,r.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:l[0],endValue:l[1]})}},PO._dispatchZoomAction=function(t){var e=[];MO(t,function(t,n){e.push(m(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},AR("dataZoom",SO),uh(function(t){if(t){var e=t.dataZoom||(t.dataZoom=[]);P(e)||(t.dataZoom=e=[e]);var n=t.toolbox;if(n&&(P(n)&&(n=n[0]),n&&n.feature)){var o=n.feature.dataZoom;l("xAxis",o),l("yAxis",o)}}function l(n,o){if(o){var l=n+"Index",i=o[l];null==i||"all"===i||P(i)||(i=!1===i||"none"===i?[]:[i]),function(a,s){var r=t[a];P(r)||(r=r?[r]:[]),MO(r,function(t,a){if(null==i||"all"===i||-1!==E(i,a)){var s={type:"select",$fromToolbox:!0,filterMode:o.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+n+a};s[l]=a,e.push(s)}})}(n)}}});var LO=O_.toolbox.restore;function UO(t){this.model=t}UO.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:LO.title},UO.prototype.onclick=function(t,e,n){!function(t){t[hO]=null}(t),e.dispatchAction({type:"restore",from:this.uid})},AR("restore",UO),dh({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")}),gh({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var FO=O,HO=Xr,VO=["","-webkit-","-moz-","-o-"];function GO(t,e,n,o,l){var i=e&&e.painter;if(n){var a=i&&i.getViewportRoot();a&&function(t,e,n,o,l){Dt(xt,e,o,l,!0)&&Dt(t,n,xt[0],xt[1])}(t,a,document.body,o,l)}else{t[0]=o,t[1]=l;var s=i&&i.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function jO(t,e,n){if(l.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var i=this._zr=e.getZr(),a=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],GO(this._styleCoord,i,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(o):t.appendChild(o),this._container=t,this._show=!1,this._hideTimeout;var s=this;o.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},o.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=i.handler;Wt(i.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},o.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function WO(t,e,n,o){t[0]=n,t[1]=o,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function KO(t){var e=this._zr=t.getZr();this._styleCoord=[0,0,0,0],WO(this._styleCoord,e,t.getWidth()/2,t.getHeight()/2),this._show=!1,this._hideTimeout}jO.prototype={constructor:jO,_enterable:!0,update:function(t){var e=this._container,n=e.currentStyle||document.defaultView.getComputedStyle(e),o=e.style;"absolute"!==o.position&&"absolute"!==n.position&&(o.position="relative"),t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],n=t*this._zr.getWidth(),o=e*this._zr.getHeight();this.moveTo(n,o)},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,n=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(t){var e=[],n=t.get("transitionDuration"),o=t.get("backgroundColor"),i=t.getModel("textStyle"),a=t.get("padding");return n&&e.push(function(t){var e="cubic-bezier(0.23, 1, 0.32, 1)",n="left "+t+"s "+e+",top "+t+"s "+e;return C(VO,function(t){return t+"transition:"+n}).join(";")}(n)),o&&(l.canvasSupported?e.push("background-Color:"+o):(e.push("background-Color:#"+We(o)),e.push("filter:alpha(opacity=70)"))),FO(["width","color","radius"],function(n){var o="border-"+n,l=HO(o),i=t.get(l);null!=i&&e.push(o+":"+i+("color"===n?"":"px"))}),e.push(function(t){var e=[],n=t.get("fontSize"),o=t.getTextColor();o&&e.push("color:"+o),e.push("font:"+t.getFont());var l=t.get("lineHeight");null==l&&(l=Math.round(3*n/2)),n&&e.push("line-height:"+l+"px");var i=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,s=t.get("textShadowOffsetX")||0,r=t.get("textShadowOffsetY")||0;return a&&e.push("text-shadow:"+s+"px "+r+"px "+a+"px "+i),FO(["decoration","align"],function(n){var o=t.get(n);o&&e.push("text-"+n+":"+o)}),e.join(";")}(i)),null!=a&&e.push("padding:"+$r(a).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n=this._styleCoord;GO(n,this._zr,this._appendToBody,t,e);var o=this.el.style;o.left=n[0]+"px",o.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(M(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}},KO.prototype={constructor:KO,_enterable:!0,update:function(t){t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],n=t*this._zr.getWidth(),o=e*this._zr.getHeight();this.moveTo(n,o)},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var o={},l=t,i="{marker",a=l.indexOf(i);0<=a;){var s=l.indexOf("|}"),r=l.substr(a+i.length,s-a-i.length);-1<r.indexOf("sub")?o["marker"+r]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[r],textOffset:[3,0]}:o["marker"+r]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[r]},a=(l=l.substr(s+1)).indexOf("{marker")}var c=n.getModel("textStyle"),u=c.get("fontSize"),_=n.get("textLineHeight");null==_&&(_=Math.round(3*u/2)),this.el=new Ua({style:zs({},c,{rich:o,text:t,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:_}),z:n.get("z")}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){var n=this._styleCoord;WO(n,this._zr,t,e),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(M(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var YO=M,XO=O,$O=Cr,zO=new Qa({shape:{x:-1,y:-1,width:2,height:2}});function qO(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(vr.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new vr(n,e,e.ecModel))}return e}function JO(t,e){return t.dispatchAction||M(e.dispatchAction,e)}function ZO(t){return"center"===t||"middle"===t}fh({type:"tooltip",init:function(t,e){if(!l.node){var n,o=t.getComponent("tooltip"),i=o.get("renderMode");this._renderMode=zl(i),"html"===this._renderMode?(n=new jO(e.getDom(),e,{appendToBody:o.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new KO(e),this._newLine="\n"),this._tooltipContent=n}},render:function(t,e,n){if(!l.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var o=this._tooltipContent;o.update(t),o.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");$B("itemTooltip",this._api,YO(function(e,n,o){"none"!==t&&(0<=t.indexOf(e)?this._tryShow(n,o):"leave"===e&&this._hide(o))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||o.manuallyShowTip(t,e,n,{x:o._lastX,y:o._lastY})})}},manuallyShowTip:function(t,e,n,o){if(o.from!==this.uid&&!l.node){var i=JO(o,n);this._ticket="";var a=o.dataByCoordSys;if(o.tooltip&&null!=o.x&&null!=o.y){var s=zO;s.position=[o.x,o.y],s.update(),s.tooltip=o.tooltip,this._tryShow({offsetX:o.x,offsetY:o.y,target:s},i)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:o.dataByCoordSys,tooltipOption:o.tooltipOption},i);else if(null!=o.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,o))return;var r=LB(o,e),c=r.point[0],u=r.point[1];null!=c&&null!=u&&this._tryShow({offsetX:c,offsetY:u,position:o.position,target:r.el},i)}else null!=o.x&&null!=o.y&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},i))}},manuallyHideTip:function(t,e,n,o){var l=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,o.from!==this.uid&&this._hide(JO(o,n))},_manuallyAxisShowTip:function(t,e,n,o){var l=o.seriesIndex,i=o.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=l&&null!=i&&null!=a){var s=e.getSeriesByIndex(l);if(s&&"axis"===(t=qO([s.getData().getItemModel(i),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:i,position:o.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;o&&o.length?this._showAxisTooltip(o,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=M(e,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,o=this._tooltipModel,l=[e.offsetX,e.offsetY],i=[],a=[],s=qO([e.tooltipOption,o]),r=this._renderMode,c=this._newLine,u={};XO(t,function(t){XO(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),o=t.value,l=[];if(e&&null!=o){var s=cI(o,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);O(t.seriesDataIndices,function(i){var c=n.getSeriesByIndex(i.seriesIndex),_=i.dataIndexInside,d=c&&c.getDataParams(_);if(d.axisDim=t.axisDim,d.axisIndex=t.axisIndex,d.axisType=t.axisType,d.axisId=t.axisId,d.axisValue=tp(e.axis,o),d.axisValueLabel=s,d){a.push(d);var h,y=c.formatTooltip(_,!0,null,r);if(L(y)){h=y.html;var p=y.markers;k(u,p)}else h=y;l.push(h)}});var _=s;"html"!==r?i.push(l.join(c)):i.push((_?Jr(_)+c:"")+l.join(c))}})},this),i.reverse(),i=i.join(this._newLine+this._newLine);var _=e.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(s,_,l[0],l[1],this._tooltipContent,a):this._showTooltipContent(s,i,a,Math.random(),l[0],l[1],_,void 0,u)})},_showSeriesItemTooltip:function(t,e,n){var o=this._ecModel,l=e.seriesIndex,i=o.getSeriesByIndex(l),a=e.dataModel||i,s=e.dataIndex,r=e.dataType,c=a.getData(r),u=qO([c.getItemModel(s),a,i&&(i.coordinateSystem||{}).model,this._tooltipModel]),_=u.get("trigger");if(null==_||"item"===_){var d,h,y=a.getDataParams(s,r),p=a.formatTooltip(s,!1,r,this._renderMode);h=L(p)?(d=p.html,p.markers):(d=p,null);var m="item_"+a.name+"_"+s;this._showOrMove(u,function(){this._showTooltipContent(u,d,y,m,t.offsetX,t.offsetY,t.position,t.target,h)}),n({type:"showTip",dataIndexInside:s,dataIndex:c.getRawIndex(s),seriesIndex:l,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var o=e.tooltip;"string"==typeof o&&(o={content:o,formatter:o});var l=new vr(o,this._tooltipModel,this._ecModel),i=l.get("content"),a=Math.random();this._showOrMove(l,function(){this._showTooltipContent(l,i,l.get("formatterParams")||{},a,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,o,l,i,a,s,r){if(this._ticket="",t.get("showContent")&&t.get("show")){var c=this._tooltipContent,u=t.get("formatter");a=a||t.get("position");var _=e;if(u&&"string"==typeof u)_=tc(u,n,!0);else if("function"==typeof u){var d=YO(function(e,o){e===this._ticket&&(c.setContent(o,r,t),this._updatePosition(t,a,l,i,c,n,s))},this);this._ticket=o,_=u(n,o,d)}c.setContent(_,r,t),c.show(t),this._updatePosition(t,a,l,i,c,n,s)}},_updatePosition:function(t,e,n,o,l,i,a){var s=this._api.getWidth(),r=this._api.getHeight();e=e||t.get("position");var c=l.getSize(),u=t.get("align"),_=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),"function"==typeof e&&(e=e([n,o],i,l.el,d,{viewSize:[s,r],contentSize:c.slice()})),P(e))n=$O(e[0],s),o=$O(e[1],r);else if(L(e)){e.width=c[0],e.height=c[1];var h=yc(e,{width:s,height:r});n=h.x,o=h.y,_=u=null}else if("string"==typeof e&&a)n=(y=function(t,e,n){var o=n[0],l=n[1],i=0,a=0,s=e.width,r=e.height;switch(t){case"inside":i=e.x+s/2-o/2,a=e.y+r/2-l/2;break;case"top":i=e.x+s/2-o/2,a=e.y-l-5;break;case"bottom":i=e.x+s/2-o/2,a=e.y+r+5;break;case"left":i=e.x-o-5,a=e.y+r/2-l/2;break;case"right":i=e.x+s+5,a=e.y+r/2-l/2}return[i,a]}(e,d,c))[0],o=y[1];else{var y;n=(y=function(t,e,n,o,l,i,a){var s=n.getOuterSize(),r=s.width,c=s.height;return null!=i&&(o<t+r+i?t-=r+i:t+=i),null!=a&&(l<e+c+a?e-=c+a:e+=a),[t,e]}(n,o,l,s,r,u?null:20,_?null:20))[0],o=y[1]}u&&(n-=ZO(u)?c[0]/2:"right"===u?c[0]:0),_&&(o-=ZO(_)?c[1]/2:"bottom"===_?c[1]:0),t.get("confine")&&(n=(y=function(t,e,n,o,l){var i=n.getOuterSize(),a=i.width,s=i.height;return t=Math.min(t+a,o)-a,e=Math.min(e+s,l)-s,[t=Math.max(t,0),e=Math.max(e,0)]}(n,o,l,s,r))[0],o=y[1]),l.moveTo(n,o)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&XO(e,function(e,o){var l=e.dataByAxis||{},i=(t[o]||{}).dataByAxis||[];(n&=l.length===i.length)&&XO(l,function(t,e){var o=i[e]||{},l=t.seriesDataIndices||[],a=o.seriesDataIndices||[];(n&=t.value===o.value&&t.axisType===o.axisType&&t.axisId===o.axisId&&l.length===a.length)&&XO(l,function(t,e){var o=a[e];n&=t.seriesIndex===o.seriesIndex&&t.dataIndex===o.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){l.node||(this._tooltipContent.dispose(),JB("itemTooltip",e))}}),dh({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),dh({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var QO=["rect","polygon","keep","clear"],tC=O;function eC(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function nC(t,e,n){var o={};return tC(e,function(e){var l=o[e]=function(){function t(){}return t.prototype.__hidden=t.prototype,new t}();tC(t[e],function(t,o){if(qf.isValidType(o)){var i={type:o,visual:t};n&&n(i,e),l[o]=new qf(i),"opacity"===o&&((i=m(i)).type="colorAlpha",l.__hidden.__alphaForOpacity=new qf(i))}})}),o}function oC(t,e,n){var o;O(n,function(t){e.hasOwnProperty(t)&&eC(e[t])&&(o=!0)}),o&&O(n,function(n){e.hasOwnProperty(n)&&eC(e[n])?t[n]=m(e[n]):delete t[n]})}var lC={lineX:iC(0),lineY:iC(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&mp(n.range,t[0],t[1])},rect:function(t,e,n){var o=n.range;if(!t||o.length<=1)return!1;var l=t.x,i=t.y,a=t.width,s=t.height,r=o[0];return!!(mp(o,l,i)||mp(o,l+a,i)||mp(o,l,i+s)||mp(o,l+a,i+s)||Cn.create(t).contain(r[0],r[1])||_r(l,i,l+a,i,o)||_r(l,i,l,i+s,o)||_r(l+a,i,l+a,i+s,o)||_r(l,i+s,l+a,i+s,o))||void 0}}};function iC(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,o){if(e){var l=o.range;return aC(e[t],l)}},rect:function(o,l,i){if(o){var a=i.range,s=[o[e[t]],o[e[t]]+o[n[t]]];return s[1]<s[0]&&s.reverse(),aC(s[0],a)||aC(s[1],a)||aC(a[0],s)||aC(a[1],s)}}}}function aC(t,e){return e[0]<=t&&t<=e[1]}var sC=["inBrush","outOfBrush"],rC="__ecBrushSelect",cC="__ecInBrushSelectEvent",uC=Ed.VISUAL.BRUSH;function _C(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new tO(e.option,t)).setInputRanges(e.areas,t)})}function dC(t,e){if(!t.isDisposed()){var n=t.getZr();n[cC]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[cC]=!1}}function hC(t,e,n,o){for(var l=0,i=e.length;l<i;l++){var a=e[l];if(t[a.brushType](o,n,a.selectors,a))return!0}}function yC(t){var e=t.brushSelector;if(D(e)){var n=[];return O(lC,function(t,o){n[o]=function(n,o,l,i){var a=o.getItemLayout(n);return t[e](a,l,i)}}),n}if(x(e)){var o={};return O(lC,function(t,n){o[n]=e}),o}return e}yh(uC,function(t,e,n){t.eachComponent({mainType:"brush"},function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),_C(t)}),ph(uC,function(t,e,n){var o,l,i=[];t.eachComponent({mainType:"brush"},function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:m(e.areas),selected:[]};i.push(a);var s=e.option,r=s.brushLink,c=[],u=[],_=[],d=0;n||(o=s.throttleType,l=s.throttleDelay);var h=C(e.areas,function(t){return function(t){var e=t.selectors={};return O(lC[t.brushType],function(n,o){e[o]=function(o){return n(o,e,t)}}),t}(b({boundingRect:pC[t.brushType](t)},t))}),y=nC(e.option,sC,function(t){t.mappingMethod="fixed"});function p(t){return"all"===r||c[t]}function k(t){return!!t.length}P(r)&&O(r,function(t){c[t]=1}),t.eachSeries(function(n,o){var l=_[o]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;d|=n.hasAxisBrushed(),p(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(u[e]=1)})}(n,o):function(n,o,l){var i=yC(n);if(i&&!function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(P(n)?E(n,e)<0:e!==n)}(e,o)&&(O(h,function(o){i[o.brushType]&&e.brushTargetManager.controlSeries(o,n,t)&&l.push(o),d|=k(l)}),p(o)&&k(l))){var a=n.getData();a.each(function(t){hC(i,l,a,t)&&(u[t]=1)})}}(n,o,l)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var o=yC(t),l=_[e],i=t.getData(),s=p(e)?function(t){return u[t]?(n.dataIndex.push(i.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return hC(o,l,i,t)?(n.dataIndex.push(i.getRawIndex(t)),"inBrush"):"outOfBrush"};(p(e)?d:k(l))&&function(t,e,n,o,l,i){var a,s={};function r(t){return n.getItemVisual(a,t)}function c(t,e){n.setItemVisual(a,t,e)}function u(t,l){a=t;var i=n.getRawDataItem(a);if(!i||!1!==i.visualMap)for(var u=o.call(undefined,t),_=e[u],d=s[u],h=0,y=d.length;h<y;h++){var p=d[h];_[p]&&_[p].applyVisual(t,r,c)}}O(t,function(t){var n=qf.prepareVisualTypes(e[t]);s[t]=n}),n.each(u)}(sC,y,i,s)})}),function(t,e,n,o,l){if(l){var i=t.getZr();i[cC]||(i[rC]||(i[rC]=dC),B_(i,rC,n,e)(t,o))}}(e,o,l,i,n)});var pC={lineX:et,lineY:et,rect:function(t){return mC(t.range)},polygon:function(t){for(var e,n=t.range,o=0,l=n.length;o<l;o++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=n[o];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&mC(e)}};function mC(t){return new Cn(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var kC=["#ddd"];function gC(t,e){return k({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new vr(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function fC(t,e,n,o){o&&o.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}gh({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;e||oC(n,t,["inBrush","outOfBrush"]);var o=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:kC},o.hasOwnProperty("liftZ")||(o.liftZ=5)},setAreas:function(t){t&&(this.areas=C(t,function(t){return gC(this.option,t)},this))},setBrushOption:function(t){this.brushOption=gC(this.option,t),this.brushType=this.brushOption.brushType}}),fh({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new aT(e.getZr())).on("brush",M(this._onBrush,this)).mount()},render:function(t){return this.model=t,fC.apply(this,arguments)},updateTransform:function(t,e){return _C(e),fC.apply(this,arguments)},updateView:fC,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:m(t),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:m(t),$from:n})}}),dh({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),dh({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),dh({type:"brushEnd",event:"brushEnd",update:"none"},function(){});var bC=O_.toolbox.brush;function vC(t,e,n){this.model=t,this.ecModel=e,this.api=n,this._brushType,this._brushMode}vC.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:m(bC.title)};var TC=vC.prototype;function EC(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),o=t.label||t.label||{},l=o.normal||(o.normal={}),i={normal:1,emphasis:1};O(o,function(t,e){i[e]||BC(l,e)||(l[e]=t)}),n.label&&!BC(o,"emphasis")&&(o.emphasis=n.label,delete n.label)}function BC(t,e){return t.hasOwnProperty(e)}TC.render=TC.updateView=function(t,e,n){var o,l,i;e.eachComponent({mainType:"brush"},function(t){o=t.brushType,l=t.brushOption.brushMode||"single",i|=t.areas.length}),this._brushType=o,this._brushMode=l,O(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===l:"clear"===e?i:e===o)?"emphasis":"normal")})},TC.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return O(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},TC.onclick=function(t,e,n){var o=this._brushType,l=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?o:o!==n&&n,brushMode:"keep"===n?"multiple"===l?"single":"multiple":l}})},AR("brush",vC),uh(function(t,e){var n=t&&t.brush;if(P(n)||(n=n?[n]:[]),n.length){var o=[];O(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(o=o.concat(e))});var l=t&&t.toolbox;P(l)&&(l=l[0]),l||(l={feature:{}},t.toolbox=[l]);var i=l.feature||(l.feature={}),a=i.brush||(i.brush={}),s=a.type||(a.type=[]);s.push.apply(s,o),function(t){var e={};O(t,function(t){e[t]=1}),t.length=0,O(e,function(e,n){t.push(n)})}(s),e&&!s.length&&s.push.apply(s,QO)}}),gh({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),fh({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var o=this.group,l=t.getModel("textStyle"),i=t.getModel("subtextStyle"),a=t.get("textAlign"),s=j(t.get("textBaseline"),t.get("textVerticalAlign")),r=new Ua({style:zs({},l,{text:t.get("text"),textFill:l.getTextColor()},{disableBox:!0}),z2:10}),c=r.getBoundingRect(),u=t.get("subtext"),_=new Ua({style:zs({},i,{text:u,textFill:i.getTextColor(),y:c.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),h=t.get("sublink"),y=t.get("triggerEvent",!0);r.silent=!d&&!y,_.silent=!h&&!y,d&&r.on("click",function(){sc(d,"_"+t.get("target"))}),h&&_.on("click",function(){sc(h,"_"+t.get("subtarget"))}),r.eventData=_.eventData=y?{componentType:"title",componentIndex:t.componentIndex}:null,o.add(r),u&&o.add(_);var p=o.getBoundingRect(),m=t.getBoxLayoutParams();m.width=p.width,m.height=p.height;var k=yc(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?k.x+=k.width:"center"===a&&(k.x+=k.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?k.y+=k.height:"middle"===s&&(k.y+=k.height/2),s=s||"top"),o.attr("position",[k.x,k.y]);var g={textAlign:a,textVerticalAlign:s};r.setStyle(g),_.setStyle(g),p=o.getBoundingRect();var f=k.margin,b=t.getItemStyle(["color","opacity"]);b.fill=t.get("backgroundColor");var v=new Qa({shape:{x:p.x-f[3],y:p.y-f[0],width:p.width+f[1]+f[3],height:p.height+f[0]+f[2],r:t.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});o.add(v)}}}),Ec.registerSubTypeDefaulter("timeline",function(){return"slider"}),dh({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),b({currentIndex:n.option.currentIndex},t)}),dh({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)});var IC=Ec.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this._data,this._names,this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){IC.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(e<=t&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,o=this._names=[];if("category"===n){var l=[];O(e,function(t,e){var n,i=Ul(t);L(t)?(n=m(t)).value=e:n=e,l.push(n),D(i)||null!=i&&!isNaN(i)||(i=""),o.push(i+"")}),e=l}var i={category:"ordinal",time:"time"}[n]||"number";(this._data=new Fh([{name:"value",type:i}],this)).initData(e,o)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function RC(t,e,n,o){Cp.call(this,t,e,n),this.type=o||"value",this.model=null}I(IC.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Fu);var OC=r_.extend({type:"timeline"});RC.prototype={constructor:RC,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},B(RC,Cp);var CC=M,NC=O,wC=Math.PI;function AC(t,e,n,o,l,i){var a=e.get("color");l?(l.setColor(a),n.add(l),i&&i.onUpdate(l)):((l=dp(t.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(l),i&&i.onCreate(l));var s=e.getItemStyle(["color","symbol","symbolSize"]);l.setStyle(s),o=k({rectHover:!0,z2:100},o,!0);var r=t.get("symbolSize");(r=r instanceof Array?r.slice():[+r,+r])[0]/=2,r[1]/=2,o.scale=r;var c=t.get("symbolOffset");if(c){var u=o.position=o.position||[0,0];u[0]+=Cr(c[0],r[0]),u[1]+=Cr(c[1],r[1])}var _=t.get("symbolRotate");return o.rotation=(_||0)*Math.PI/180||0,l.attr(o),l.updateTransform(),l}function MC(t,e,n,o,l){if(!t.dragging){var i=o.getModel("checkpointStyle"),a=n.dataToCoord(o.getData().get(["value"],e));l||!i.get("animation",!0)?t.attr({position:[a,0]}):(t.stopAnimation(!0),t.animateTo({position:[a,0]},i.get("animationDuration",!0),i.get("animationEasing",!0)))}}OC.extend({type:"timeline.slider",init:function(t,e){this.api=e,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(t,e,n,o){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var l=this._layout(t,n),i=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(l,t);t.formatTooltip=function(t){return Jr(s.scale.getLabel(t))},NC(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](l,i,s,t)},this),this._renderAxisLabel(l,a,s,t),this._position(l,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),o=t.get("orient"),l=function(t,e){return yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e);null==n||"auto"===n?n="horizontal"===o?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][n]);var i,a,s,r,c={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},u={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},_={horizontal:0,vertical:wC/2},d="vertical"===o?l.height:l.width,h=t.getModel("controlStyle"),y=h.get("show",!0),p=y?h.get("itemSize"):0,m=y?h.get("itemGap"):0,k=p+m,g=t.get("label.rotate")||0;g=g*wC/180;var f=h.get("position",!0),b=y&&h.get("showPlayBtn",!0),v=y&&h.get("showPrevBtn",!0),T=0,E=d;return"left"===f||"bottom"===f?(b&&(i=[0,0],T+=k),v&&(a=[T,0],T+=k)):(b&&(i=[E-p,0],E-=k),v&&(a=[0,0],T+=k)),y&&h.get("showNextBtn",!0)&&(s=[E-p,0],E-=k),r=[T,E],t.get("inverse")&&r.reverse(),{viewRect:l,mainLength:d,orient:o,rotation:_[o],labelRotation:g,labelPosOpt:n,labelAlign:t.get("label.align")||c[o],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||u[o],playPosition:i,prevBtnPosition:a,nextBtnPosition:s,axisExtent:r,controlSize:p,controlGap:m}},_position:function(t,e){var n=this._mainGroup,o=this._labelGroup,l=t.viewRect;if("vertical"===t.orient){var i=ie(),a=l.x,s=l.y+l.height;ce(i,i,[-a,-s]),ue(i,i,-wC/2),ce(i,i,[a,s]),(l=l.clone()).applyTransform(i)}var r=m(l),c=m(n.getBoundingRect()),u=m(o.getBoundingRect()),_=n.position,d=o.position;d[0]=_[0]=r[0][0];var h,y=t.labelPosOpt;function p(t){var e=t.position;t.origin=[r[0][0]-e[0],r[1][0]-e[1]]}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function k(t,e,n,o,l){t[o]+=n[o][l]-e[o][l]}isNaN(y)?(k(_,c,r,1,h="+"===y?0:1),k(d,u,r,1,1-h)):(k(_,c,r,1,h=0<=y?0:1),d[1]=_[1]+y),n.attr("position",_),o.attr("position",d),n.rotation=o.rotation=t.rotation,p(n),p(o)},_createAxis:function(t,e){var n=e.getData(),o=e.get("axisType"),l=Zy(e,o);l.getTicks=function(){return n.mapArray(["value"],function(t){return t})};var i=n.getDataExtent("value");l.setExtent(i[0],i[1]),l.niceTicks();var a=new RC("value",l,t.axisExtent,o);return a.model=e,a},_createGroup:function(t){var e=this["_"+t]=new Nn;return this.group.add(e),e},_renderAxisLine:function(t,e,n,o){var l=n.getExtent();o.get("lineStyle.show")&&e.add(new es({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:f({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,o){var l=o.getData(),i=n.scale.getTicks();NC(i,function(t){var i=n.dataToCoord(t),a=l.getItemModel(t),s=a.getModel("itemStyle"),r=a.getModel("emphasis.itemStyle"),c={position:[i,0],onclick:CC(this._changeTimeline,this,t)},u=AC(a,s,e,c);js(u,r.getItemStyle()),a.get("tooltip")?(u.dataIndex=t,u.dataModel=o):u.dataIndex=u.dataModel=null},this)},_renderAxisLabel:function(t,e,n,o){if(n.getLabelModel().get("show")){var l=o.getData(),i=n.getViewLabels();NC(i,function(o){var i=o.tickValue,a=l.getItemModel(i),s=a.getModel("label"),r=a.getModel("emphasis.label"),c=n.dataToCoord(o.tickValue),u=new Ua({position:[c,0],rotation:t.labelRotation-t.rotation,onclick:CC(this._changeTimeline,this,i),silent:!1});zs(u.style,s,{text:o.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(u),js(u,zs({},r))},this)}},_renderControl:function(t,e,n,o){var l=t.controlSize,i=t.rotation,a=o.getModel("controlStyle").getItemStyle(),s=o.getModel("emphasis.controlStyle").getItemStyle(),r=[0,-l/2,l,l],c=o.getPlayState(),u=o.get("inverse",!0);function _(t,n,c,u){if(t){var _=function(t,e,n,o){var l=o.style,i=ur(t.get(e),o||{},new Cn(n[0],n[1],n[2],n[3]));return l&&i.setStyle(l),i}(o,n,r,{position:t,origin:[l/2,0],rotation:u?-i:0,rectHover:!0,style:a,onclick:c});e.add(_),js(_,s)}}_(t.nextBtnPosition,"controlStyle.nextIcon",CC(this._changeTimeline,this,u?"-":"+")),_(t.prevBtnPosition,"controlStyle.prevIcon",CC(this._changeTimeline,this,u?"+":"-")),_(t.playPosition,"controlStyle."+(c?"stopIcon":"playIcon"),CC(this._handlePlayClick,this,!c),!0)},_renderCurrentPointer:function(t,e,n,o){var l=o.getData(),i=o.getCurrentIndex(),a=l.getItemModel(i).getModel("checkpointStyle"),s=this,r={onCreate:function(t){t.draggable=!0,t.drift=CC(s._handlePointerDrag,s),t.ondragend=CC(s._handlePointerDragend,s),MC(t,i,n,o,!0)},onUpdate:function(t){MC(t,i,n,o)}};this._currentPointer=AC(a,a,this._mainGroup,{},this._currentPointer,r)},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],o=wr(this._axis.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var l=this._findNearestTick(n),i=this.model;(e||l!==i.getCurrentIndex()&&i.get("realtime"))&&this._changeTimeline(l)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(CC(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(t){return ar(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(t){var e,n=this.model.getData(),o=1/0,l=this._axis;return n.each(["value"],function(n,i){var a=l.dataToCoord(n),s=Math.abs(a-t);s<o&&(o=s,e=i)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),uh(function(t){var e=t&&t.timeline;P(e)||(e=e?[e]:[]),O(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),EC(t),BC(t,"controlPosition")){var o=t.controlStyle||(t.controlStyle={});BC(o,"position")||(o.position=t.controlPosition),"none"!==o.position||BC(o,"show")||(o.show=!1,delete o.position),delete t.controlPosition}O(t.data||[],function(t){L(t)&&!P(t)&&(!BC(t,"value")&&BC(t,"name")&&(t.value=t.name),EC(t))})}(t)})});var SC=Yr,PC=Jr;function xC(t){Dl(t,"label",["show"])}var DC=gh({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},isAnimationEnabled:function(){if(l.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e){this._mergeOption(t,e,!1,!1)},_mergeOption:function(t,e,n,o){var l=this.constructor,i=this.mainType+"Model";n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),a=t[i];n&&n.data?(a?a._mergeOption(n,e,!0):(o&&xC(n),O(n.data,function(t){t instanceof Array?(xC(t[0]),xC(t[1])):xC(t)}),f(a=new l(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),a.__hostSeries=t),t[i]=a):t[i]=null},this)},formatTooltip:function(t,e,n,o){var l=this.getData(),i=this.getRawValue(t),a=P(i)?C(i,SC).join(", "):SC(i),s=l.getName(t),r=PC(this.name);return null==i&&!s||(r+="html"===o?"<br/>":"\n"),s&&(r+=PC(s),null!=i&&(r+=" : ")),null!=i&&(r+=PC(a)),r},getData:function(){return this._data},setData:function(t){this._data=t}});I(DC,Fu),DC.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var LC=E;function UC(t,e,n,o,l,i){var a=[],s=ly(e,o)?e.getCalculationInfo("stackResultDimension"):o,r=KC(e,s,t),c=e.indicesOfNearest(s,r)[0];a[l]=e.get(n,c),a[i]=e.get(s,c);var u=e.get(o,c),_=Ar(e.get(o,c));return 0<=(_=Math.min(_,20))&&(a[i]=+a[i].toFixed(_)),[a,u]}var FC=S,HC={min:FC(UC,"min"),max:FC(UC,"max"),average:FC(UC,"average")};function VC(t,e){var n=t.getData(),o=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!P(e.coord)&&o){var l=o.dimensions,i=GC(e,n,o,t);if((e=m(e)).type&&HC[e.type]&&i.baseAxis&&i.valueAxis){var a=LC(l,i.baseAxis.dim),s=LC(l,i.valueAxis.dim),r=HC[e.type](n,i.baseDataDim,i.valueDataDim,a,s);e.coord=r[0],e.value=r[1]}else{for(var c=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],u=0;u<2;u++)HC[c[u]]&&(c[u]=KC(n,n.mapDimension(l[u]),c[u]));e.coord=c}}return e}function GC(t,e,n,o){var l={};return null!=t.valueIndex||null!=t.valueDim?(l.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,l.valueAxis=n.getAxis(function(t,e){var n=t.getData(),o=n.dimensions;e=n.getDimension(e);for(var l=0;l<o.length;l++){var i=n.getDimensionInfo(o[l]);if(i.name===e)return i.coordDim}}(o,l.valueDataDim)),l.baseAxis=n.getOtherAxis(l.valueAxis),l.baseDataDim=e.mapDimension(l.baseAxis.dim)):(l.baseAxis=o.getBaseAxis(),l.valueAxis=n.getOtherAxis(l.baseAxis),l.baseDataDim=e.mapDimension(l.baseAxis.dim),l.valueDataDim=e.mapDimension(l.valueAxis.dim)),l}function jC(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function WC(t,e,n,o){return o<2?t.coord&&t.coord[o]:t.value}function KC(t,e,n){if("average"!==n)return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0];var o=0,l=0;return t.each(e,function(t,e){isNaN(t)||(o+=t,l++)}),o/l}var YC=fh({type:"marker",init:function(){this.markerGroupMap=Q()},render:function(t,e,n){var o=this.markerGroupMap;o.each(function(t){t.__keep=!1});var l=this.type+"Model";e.eachSeries(function(t){var o=t[l];o&&this.renderSeries(t,o,e,n)},this),o.each(function(t){t.__keep||this.group.remove(t.group)},this)},renderSeries:function(){}});function XC(t,e,n){var o=e.coordinateSystem;t.each(function(l){var i,a=t.getItemModel(l),s=Cr(a.get("x"),n.getWidth()),r=Cr(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(r)){if(e.getMarkerPosition)i=e.getMarkerPosition(t.getValues(t.dimensions,l));else if(o){var c=t.get(o.dimensions[0],l),u=t.get(o.dimensions[1],l);i=o.dataToPoint([c,u])}}else i=[s,r];isNaN(s)||(i[0]=s),isNaN(r)||(i[1]=r),t.setItemLayout(l,i)})}function $C(t,e,n,o){var l=t.getData(),i=o.type;if(!P(o)&&("min"===i||"max"===i||"average"===i||"median"===i||null!=o.xAxis||null!=o.yAxis)){var a,s;if(null!=o.yAxis||null!=o.xAxis)a=e.getAxis(null!=o.yAxis?"y":"x"),s=G(o.yAxis,o.xAxis);else{var r=GC(o,l,e,t);a=r.valueAxis,s=KC(l,iy(l,r.valueDataDim),i)}var c="x"===a.dim?0:1,u=1-c,_=m(o),d={};_.type=null,_.coord=[],d.coord=[],_.coord[u]=-1/0,d.coord[u]=1/0;var h=n.get("precision");0<=h&&"number"==typeof s&&(s=+s.toFixed(Math.min(h,20))),_.coord[c]=d.coord[c]=s,o=[_,d,{type:i,valueIndex:o.valueIndex,value:s}]}return(o=[VC(t,o[0]),VC(t,o[1]),f({},o[2])])[2].type=o[2].type||"",k(o[2],o[0]),k(o[2],o[1]),o}function zC(t){return!isNaN(t)&&!isFinite(t)}function qC(t,e,n,o){var l=1-t,i=o.dimensions[t];return zC(e[l])&&zC(n[l])&&e[t]===n[t]&&o.getAxis(i).containData(e[t])}function JC(t,e){if("cartesian2d"===t.type){var n=e[0].coord,o=e[1].coord;if(n&&o&&(qC(1,n,o,t)||qC(0,n,o,t)))return!0}return jC(t,e[0])&&jC(t,e[1])}function ZC(t,e,n,o,l){var i,a=o.coordinateSystem,s=t.getItemModel(e),r=Cr(s.get("x"),l.getWidth()),c=Cr(s.get("y"),l.getHeight());if(isNaN(r)||isNaN(c)){if(o.getMarkerPosition)i=o.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=a.dimensions,_=t.get(u[0],e),d=t.get(u[1],e);i=a.dataToPoint([_,d])}if("cartesian2d"===a.type){var h=a.getAxis("x"),y=a.getAxis("y");u=a.dimensions,zC(t.get(u[0],e))?i[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):zC(t.get(u[1],e))&&(i[1]=y.toGlobalCoord(y.getExtent()[n?0:1]))}isNaN(r)||(i[0]=r),isNaN(c)||(i[1]=c)}else i=[r,c];t.setItemLayout(e,i)}function QC(t,e,n,o){var l=VC(t,o[0]),i=VC(t,o[1]),a=G,s=l.coord,r=i.coord;s[0]=a(s[0],-1/0),s[1]=a(s[1],-1/0),r[0]=a(r[0],1/0),r[1]=a(r[1],1/0);var c=g([{},l,i]);return c.coord=[l.coord,i.coord],c.x0=l.x,c.y0=l.y,c.x1=i.x,c.y1=i.y,c}function tN(t){return!isNaN(t)&&!isFinite(t)}function eN(t,e,n){var o=1-t;return tN(e[o])&&tN(n[o])}function nN(t,e){var n=e.coord[0],o=e.coord[1];return!("cartesian2d"!==t.type||!n||!o||!eN(1,n,o)&&!eN(0,n,o))||jC(t,{coord:n,x:e.x0,y:e.y0})||jC(t,{coord:o,x:e.x1,y:e.y1})}function oN(t,e,n,o,l){var i,a=o.coordinateSystem,s=t.getItemModel(e),r=Cr(s.get(n[0]),l.getWidth()),c=Cr(s.get(n[1]),l.getHeight());if(isNaN(r)||isNaN(c)){if(o.getMarkerPosition)i=o.getMarkerPosition(t.getValues(n,e));else{var u=[h=t.get(n[0],e),y=t.get(n[1],e)];a.clampData&&a.clampData(u,u),i=a.dataToPoint(u,!0)}if("cartesian2d"===a.type){var _=a.getAxis("x"),d=a.getAxis("y"),h=t.get(n[0],e),y=t.get(n[1],e);tN(h)?i[0]=_.toGlobalCoord(_.getExtent()["x0"===n[0]?0:1]):tN(y)&&(i[1]=d.toGlobalCoord(d.getExtent()["y0"===n[1]?0:1]))}isNaN(r)||(i[0]=r),isNaN(c)||(i[1]=c)}else i=[r,c];return i}YC.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markPointModel;e&&(XC(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeries:function(t,e,n,o){var l=t.coordinateSystem,i=t.id,a=t.getData(),s=this.markerGroupMap,r=s.get(i)||s.set(i,new Wp),c=function(t,e,n){var o;o=t?C(t&&t.dimensions,function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var l=new Fh(o,n),i=C(n.get("data"),S(VC,e));return t&&(i=w(i,S(jC,t))),l.initData(i,null,t?WC:function(t){return t.value}),l}(l,t,e);e.setData(c),XC(e.getData(),t,o),c.each(function(t){var n=c.getItemModel(t),o=n.getShallow("symbol"),l=n.getShallow("symbolSize"),i=n.getShallow("symbolRotate"),s=x(o),r=x(l),u=x(i);if(s||r||u){var _=e.getRawValue(t),d=e.getDataParams(t);s&&(o=o(_,d)),r&&(l=l(_,d)),u&&(i=i(_,d))}c.setItemVisual(t,{symbol:o,symbolSize:l,symbolRotate:i,color:n.get("itemStyle.color")||a.getVisual("color")})}),r.updateData(c),this.group.add(r.group),c.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),r.__keep=!0,r.group.silent=e.get("silent")||t.get("silent")}}),uh(function(t){t.markPoint=t.markPoint||{}}),DC.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),YC.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markLineModel;if(e){var o=e.getData(),l=e.__from,i=e.__to;l.each(function(e){ZC(l,e,!0,t,n),ZC(i,e,!1,t,n)}),o.each(function(t){o.setItemLayout(t,[l.getItemLayout(t),i.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,n,o){var l=t.coordinateSystem,i=t.id,a=t.getData(),s=this.markerGroupMap,r=s.get(i)||s.set(i,new Zb);this.group.add(r.group);var c=function(t,e,n){var o;o=t?C(t&&t.dimensions,function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var l=new Fh(o,n),i=new Fh(o,n),a=new Fh([],n),s=C(n.get("data"),S($C,e,t,n));t&&(s=w(s,S(JC,t)));var r=t?WC:function(t){return t.value};return l.initData(C(s,function(t){return t[0]}),null,r),i.initData(C(s,function(t){return t[1]}),null,r),a.initData(C(s,function(t){return t[2]})),a.hasItemOption=!0,{from:l,to:i,line:a}}(l,t,e),u=c.from,_=c.to,d=c.line;e.__from=u,e.__to=_,e.setData(d);var h=e.get("symbol"),y=e.get("symbolSize");function p(e,n,l){var i=e.getItemModel(n);ZC(e,n,l,t,o),e.setItemVisual(n,{symbolRotate:i.get("symbolRotate"),symbolSize:i.get("symbolSize")||y[l?0:1],symbol:i.get("symbol",!0)||h[l?0:1],color:i.get("itemStyle.color")||a.getVisual("color")})}P(h)||(h=[h,h]),"number"==typeof y&&(y=[y,y]),c.from.each(function(t){p(u,t,!0),p(_,t,!1)}),d.each(function(t){var e=d.getItemModel(t).get("lineStyle.color");d.setItemVisual(t,{color:e||u.getItemVisual(t,"color")}),d.setItemLayout(t,[u.getItemLayout(t),_.getItemLayout(t)]),d.setItemVisual(t,{fromSymbolRotate:u.getItemVisual(t,"symbolRotate"),fromSymbolSize:u.getItemVisual(t,"symbolSize"),fromSymbol:u.getItemVisual(t,"symbol"),toSymbolRotate:_.getItemVisual(t,"symbolRotate"),toSymbolSize:_.getItemVisual(t,"symbolSize"),toSymbol:_.getItemVisual(t,"symbol")})}),r.updateData(d),c.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){t.dataModel=e})}),r.__keep=!0,r.group.silent=e.get("silent")||t.get("silent")}}),uh(function(t){t.markLine=t.markLine||{}}),DC.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var lN=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];YC.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var o=e.getData();o.each(function(e){var l=C(lN,function(l){return oN(o,e,l,t,n)});o.setItemLayout(e,l),o.getItemGraphicEl(e).setShape("points",l)})}},this)},renderSeries:function(t,e,n,o){var l=t.coordinateSystem,i=t.id,a=t.getData(),s=this.markerGroupMap,r=s.get(i)||s.set(i,{group:new Nn});this.group.add(r.group),r.__keep=!0;var c=function(t,e,n){var o,l;l=t?(o=C(t&&t.dimensions,function(t){var n=e.getData();return b({name:t},n.getDimensionInfo(n.mapDimension(t))||{})}),new Fh(C(["x0","y0","x1","y1"],function(t,e){return{name:t,type:o[e%2].type}}),n)):new Fh(o=[{name:"value",type:"float"}],n);var i=C(n.get("data"),S(QC,e,t,n));t&&(i=w(i,S(nN,t)));var a=t?function(t,e,n,o){return t.coord[Math.floor(o/2)][o%2]}:function(t){return t.value};return l.initData(i,null,a),l.hasItemOption=!0,l}(l,t,e);e.setData(c),c.each(function(e){var n=C(lN,function(n){return oN(c,e,n,t,o)}),i=!0;O(lN,function(t){if(i){var n=c.get(t[0],e),o=c.get(t[1],e);(tN(n)||l.getAxis("x").containData(n))&&(tN(o)||l.getAxis("y").containData(o))&&(i=!1)}}),c.setItemLayout(e,{points:n,allClipped:i}),c.setItemVisual(e,{color:a.getVisual("color")})}),c.diff(r.__data).add(function(t){var e=c.getItemLayout(t);if(!e.allClipped){var n=new Ya({shape:{points:e.points}});c.setItemGraphicEl(t,n),r.group.add(n)}}).update(function(t,n){var o=r.__data.getItemGraphicEl(n),l=c.getItemLayout(t);l.allClipped?o&&r.group.remove(o):(o?or(o,{shape:{points:l.points}},e,t):o=new Ya({shape:{points:l.points}}),c.setItemGraphicEl(t,o),r.group.add(o))}).remove(function(t){var e=r.__data.getItemGraphicEl(t);r.group.remove(e)}).execute(),c.eachItemGraphicEl(function(t,n){var o=c.getItemModel(n),l=o.getModel("label"),i=o.getModel("emphasis.label"),a=c.getItemVisual(n,"color");t.useStyle(b(o.getModel("itemStyle").getItemStyle(),{fill:qe(a,.4),stroke:a})),t.hoverStyle=o.getModel("emphasis.itemStyle").getItemStyle(),Xs(t.style,t.hoverStyle,l,i,{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",isRectText:!0,autoColor:a}),js(t,{}),t.dataModel=e}),r.__data=c,r.group.silent=e.get("silent")||t.get("silent")}}),uh(function(t){t.markArea=t.markArea||{}});var iN=O_.legend.selector,aN={all:{type:"all",title:m(iN.all)},inverse:{type:"inverse",title:m(iN.inverse)}},sN=gh({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){sN.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;!0===e&&(e=t.selector=["all","inverse"]),P(e)&&O(e,function(t,n){D(t)&&(t={type:t}),e[n]=k(t,aN[t.type])})},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var o=t[n].get("name");if(this.isSelected(o)){this.select(o),e=!0;break}}e||this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(o){var l,i=o.name;if(n.push(i),o.legendVisualProvider){var a=o.legendVisualProvider.getAllNames();t.isSeriesFiltered(o)||(n=n.concat(a)),a.length?e=e.concat(a):l=!0}else l=!0;l&&Vl(o)&&e.push(o.name)}),this._availableNames=n;var o=C(this.get("data")||e,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new vr(t,this,this.ecModel)},this);this._data=o},getData:function(){return this._data},select:function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&O(this._data,function(t){e[t.get("name")]=!1}),e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var t=this._data,e=this.option.selected;O(t,function(t){e[t.get("name",!0)]=!0})},inverseSelect:function(){var t=this._data,e=this.option.selected;O(t,function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=E(this._availableNames,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function rN(t,e,n){var o,l={},i="toggleSelected"===t;return n.eachComponent("legend",function(n){i&&null!=o?n[o?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),o=n.isSelected(e.name)),O(n.getData(),function(t){var e=t.get("name");if("\n"!==e&&""!==e){var o=n.isSelected(e);l.hasOwnProperty(e)?l[e]=l[e]&&o:l[e]=o}})}),"allSelect"===t||"inverseSelect"===t?{selected:l}:{name:e.name,selected:l}}dh("legendToggleSelect","legendselectchanged",S(rN,"toggleSelected")),dh("legendAllSelect","legendselectall",S(rN,"allSelect")),dh("legendInverseSelect","legendinverseselect",S(rN,"inverseSelect")),dh("legendSelect","legendselected",S(rN,"select")),dh("legendUnSelect","legendunselected",S(rN,"unSelect"));var cN=S,uN=O,_N=Nn,dN=fh({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new _N),this._backgroundEl,this.group.add(this._selectorGroup=new _N),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,n){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var l=t.get("align"),i=t.get("orient");l&&"auto"!==l||(l="right"===t.get("left")&&"vertical"===i?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===i?"end":"start"),this.renderInner(l,t,e,n,a,i,s);var r=t.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},u=t.get("padding"),_=yc(r,c,u),d=this.layoutInner(t,l,_,o,a,s),h=yc(b({width:d.width,height:d.height},r),c,u);this.group.attr("position",[h.x-d.x,h.y-d.y]),this.group.add(this._backgroundEl=PR(d,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,n,o,l,i,a){var s=this.getContentGroup(),r=Q(),c=e.get("selectedMode"),u=[];n.eachRawSeries(function(t){t.get("legendHoverLink")||u.push(t.id)}),uN(e.getData(),function(l,i){var a=l.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var _=n.getSeriesByName(a)[0];if(!r.get(a))if(_){var d=_.getData(),h=d.getVisual("color"),y=d.getVisual("borderColor");"function"==typeof h&&(h=h(_.getDataParams(0))),"function"==typeof y&&(y=y(_.getDataParams(0)));var p=d.getVisual("legendSymbol")||"roundRect",m=d.getVisual("symbol");this._createItem(a,i,l,e,p,m,t,h,y,c).on("click",cN(yN,a,null,o,u)).on("mouseover",cN(pN,_.name,null,o,u)).on("mouseout",cN(mN,_.name,null,o,u)),r.set(a,!0)}else n.eachRawSeries(function(n){if(!r.get(a)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(a))return;var _=s.indexOfName(a),d=s.getItemVisual(_,"color"),h=s.getItemVisual(_,"borderColor");this._createItem(a,i,l,e,"roundRect",null,t,d,h,c).on("click",cN(yN,null,a,o,u)).on("mouseover",cN(pN,null,a,o,u)).on("mouseout",cN(mN,null,a,o,u)),r.set(a,!0)}},this)}else s.add(new _N({newline:!0}))},this),l&&this._createSelector(l,e,o,i,a)},_createSelector:function(t,e,n,o,l){var i=this.getSelectorGroup();uN(t,function(t){!function(t){var o=t.type,l=new Ua({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===o?"legendAllSelect":"legendInverseSelect"})}});i.add(l);var a=e.getModel("selectorLabel"),s=e.getModel("emphasis.selectorLabel");Xs(l.style,l.hoverStyle={},a,s,{defaultText:t.title,isRectText:!1}),js(l)}(t)})},_createItem:function(t,e,n,o,l,i,a,s,r,c){var u=o.get("itemWidth"),_=o.get("itemHeight"),d=o.get("inactiveColor"),h=o.get("inactiveBorderColor"),y=o.get("symbolKeepAspect"),p=o.getModel("itemStyle"),m=o.isSelected(t),k=new _N,g=n.getModel("textStyle"),b=n.get("icon"),v=n.getModel("tooltip"),T=v.parentModel,E=dp(l=b||l,0,0,u,_,m?s:d,null==y||y);if(k.add(hN(E,l,p,r,h,m)),!b&&i&&(i!==l||"none"===i)){var B=.8*_;"none"===i&&(i="circle");var I=dp(i,(u-B)/2,(_-B)/2,B,B,m?s:d,null==y||y);k.add(hN(I,i,p,r,h,m))}var R="left"===a?u+5:-5,O=a,C=o.get("formatter"),N=t;"string"==typeof C&&C?N=C.replace("{name}",null!=t?t:""):"function"==typeof C&&(N=C(t)),k.add(new Ua({style:zs({},g,{text:N,x:R,y:_/2,textFill:m?g.getTextColor():d,textAlign:O,textVerticalAlign:"middle"})}));var w=new Qa({shape:k.getBoundingRect(),invisible:!0,tooltip:v.get("show")?f({content:t,formatter:T.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:o.componentIndex,name:t,$vars:["name"]}},v.option):null});return k.add(w),k.eachChild(function(t){t.silent=!0}),w.silent=!c,this.getContentGroup().add(k),js(k),k.__legendDataIndex=e,k},layoutInner:function(t,e,n,o,l,i){var a=this.getContentGroup(),s=this.getSelectorGroup();hc(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var r=a.getBoundingRect(),c=[-r.x,-r.y];if(l){hc("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),_=[-u.x,-u.y],d=t.get("selectorButtonGap",!0),h=t.getOrient().index,y=0===h?"width":"height",p=0===h?"height":"width",m=0===h?"y":"x";"end"===i?_[h]+=r[y]+d:c[h]+=u[y]+d,_[1-h]+=r[p]/2-u[p]/2,s.attr("position",_),a.attr("position",c);var k={x:0,y:0};return k[y]=r[y]+d+u[y],k[p]=Math.max(r[p],u[p]),k[m]=Math.min(0,u[m]+_[1-h]),k}return a.attr("position",c),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function hN(t,e,n,o,l,i){var a;return"line"!==e&&e.indexOf("empty")<0?(a=n.getItemStyle(),t.style.stroke=o,i||(a.stroke=l)):a=n.getItemStyle(["borderWidth","borderColor"]),t.setStyle(a)}function yN(t,e,n,o){mN(t,e,n,o),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),pN(t,e,n,o)}function pN(t,e,n,o){var l=n.getZr().storage.getDisplayList()[0];l&&l.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:o})}function mN(t,e,n,o){var l=n.getZr().storage.getDisplayList()[0];l&&l.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:o})}_h(Ed.PROCESSOR.SERIES_FILTER,function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}),Ec.registerSubTypeDefaulter("legend",function(){return"plain"});var kN=sN.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,o){var l=kc(t);kN.superCall(this,"init",t,e,n,o),gN(this,t,l)},mergeOption:function(t,e){kN.superCall(this,"mergeOption",t,e),gN(this,this.option,t)}});function gN(t,e,n){var o=[1,1];o[t.getOrient().index]=0,mc(e,n,{type:"box",ignoreSize:o})}var fN=Nn,bN=["width","height"],vN=["x","y"],TN=dN.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){TN.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new fN),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new fN),this._showController},resetInner:function(){TN.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,o,l,i,a){var s=this;TN.superCall(this,"renderInner",t,e,n,o,l,i,a);var r=this._controllerGroup,c=e.get("pageIconSize",!0);P(c)||(c=[c,c]),_("pagePrev",0);var u=e.getModel("pageTextStyle");function _(t,n){var l=t+"DataIndex",i=ur(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:M(s._pageGo,s,l,e,o)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});i.name=t,r.add(i)}r.add(new Ua({name:"pageText",style:{textFill:u.getTextColor(),font:u.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),_("pageNext",1)},layoutInner:function(t,e,n,o,l,i){var a=this.getSelectorGroup(),s=t.getOrient().index,r=bN[s],c=vN[s],u=bN[1-s],_=vN[1-s];l&&hc("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),h=a.getBoundingRect(),y=[-h.x,-h.y],p=m(n);l&&(p[r]=n[r]-h[r]-d);var k=this._layoutContentAndController(t,o,p,s,r,u,_);if(l){if("end"===i)y[s]+=k[r]+d;else{var g=h[r]+d;y[s]-=g,k[c]-=g}k[r]+=h[r]+d,y[1-s]+=k[_]+k[u]/2-h[u]/2,k[u]=Math.max(k[u],h[u]),k[_]=Math.min(k[_],h[_]+y[1-s]),a.attr("position",y)}return k},_layoutContentAndController:function(t,e,n,o,l,i,a){var s=this.getContentGroup(),r=this._containerGroup,c=this._controllerGroup;hc(t.get("orient"),s,t.get("itemGap"),o?n.width:null,o?null:n.height),hc("horizontal",c,t.get("pageButtonItemGap",!0));var u=s.getBoundingRect(),_=c.getBoundingRect(),d=this._showController=u[l]>n[l],h=[-u.x,-u.y];e||(h[o]=s.position[o]);var y=[0,0],p=[-_.x,-_.y],m=j(t.get("pageButtonGap",!0),t.get("itemGap",!0));d&&("end"===t.get("pageButtonPosition",!0)?p[o]+=n[l]-_[l]:y[o]+=_[l]+m),p[1-o]+=u[i]/2-_[i]/2,s.attr("position",h),r.attr("position",y),c.attr("position",p);var k={x:0,y:0};if(k[l]=d?n[l]:u[l],k[i]=Math.max(u[i],_[i]),k[a]=Math.min(0,_[a]+p[1-o]),r.__rectSize=n[l],d){var g={x:0,y:0};g[l]=Math.max(n[l]-_[l]-m,0),g[i]=k[i],r.setClipPath(new Qa({shape:g})),r.__rectSize=g[l]}else c.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var f=this._getPageInfo(t);return null!=f.pageIndex&&or(s,{position:f.contentPosition},d&&t),this._updatePageInfoView(t,f),k},_pageGo:function(t,e,n){var o=this._getPageInfo(e)[t];null!=o&&n.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;O(["pagePrev","pageNext"],function(o){var l=null!=e[o+"DataIndex"],i=n.childOfName(o);i&&(i.setStyle("fill",l?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),i.cursor=l?"pointer":"default")});var o=n.childOfName("pageText"),l=t.get("pageFormatter"),i=e.pageIndex,a=null!=i?i+1:0,s=e.pageCount;o&&l&&o.setStyle("text",D(l)?l.replace("{current}",a).replace("{total}",s):l({current:a,total:s}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),o=this._containerGroup.__rectSize,l=t.getOrient().index,i=bN[l],a=vN[l],s=this._findTargetItemIndex(e),r=n.children(),c=r[s],u=r.length,_=u?1:0,d={contentPosition:n.position.slice(),pageCount:_,pageIndex:_-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return d;var h=g(c);d.contentPosition[l]=-h.s;for(var y=s+1,p=h,m=h,k=null;y<=u;++y)(!(k=g(r[y]))&&m.e>p.s+o||k&&!f(k,p.s))&&(p=m.i>p.i?m:k)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=p.i),++d.pageCount),m=k;for(y=s-1,p=h,m=h,k=null;-1<=y;--y)(k=g(r[y]))&&f(m,k.s)||!(p.i<m.i)||(m=p,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=p.i),++d.pageCount,++d.pageIndex),p=k;return d;function g(t){if(t){var e=t.getBoundingRect(),n=e[a]+t.position[l];return{s:n,e:n+e[i],i:t.__legendDataIndex}}}function f(t,e){return t.e>=e&&t.s<=e+o}},_findTargetItemIndex:function(t){return this._showController?(this.getContentGroup().eachChild(function(o,l){var i=o.__legendDataIndex;null==n&&null!=i&&(n=l),i===t&&(e=l)}),null!=e?e:n):0;var e,n}});dh("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})}),OO.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var EN=Qa,BN=Or,IN=wr,RN=M,ON=O,CN="horizontal",NN="vertical",wN=["line","bar","candlestick","scatter"],AN=wO.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=e},render:function(t,e,n,o){AN.superApply(this,"render",arguments),B_(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){AN.superApply(this,"remove",arguments),I_(this,"_dispatchZoomAction")},dispose:function(){AN.superApply(this,"dispose",arguments),I_(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new Nn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),o={width:e.getWidth(),height:e.getHeight()},l=this._orient===CN?{right:o.width-n.x-n.width,top:o.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},i=kc(t.option);O(["right","top","width","height"],function(t){"ph"===i[t]&&(i[t]=l[t])});var a=yc(i,o,t.padding);this._location={x:a.x,y:a.y},this._size=[a.width,a.height],this._orient===NN&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),l=o&&o.get("inverse"),i=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;i.attr(n!==CN||l?n===CN&&l?{scale:a?[-1,1]:[-1,-1]}:n!==NN||l?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=t.getBoundingRect([i]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.barGroup;n.add(new EN({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40})),n.add(new EN({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:M(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,o=n.getRawData(),l=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=l){var i=o.getDataExtent(l),a=.3*(i[1]-i[0]);i=[i[0]-a,i[1]+a];var s,r=[0,e[1]],c=[0,e[0]],u=[[e[0],0],[0,0]],_=[],d=c[1]/(o.count()-1),h=0,y=Math.round(o.count()/e[0]);o.each([l],function(t,e){if(0<y&&e%y)h+=d;else{var n=null==t||isNaN(t)||""===t,o=n?0:BN(t,i,r,!0);n&&!s&&e?(u.push([u[u.length-1][0],0]),_.push([_[_.length-1][0],0])):!n&&s&&(u.push([h,0]),_.push([h,0])),u.push([h,o]),_.push([h,o]),h+=d,s=n}});var p=this.dataZoomModel;this._displayables.barGroup.add(new Ya({shape:{points:u},style:b({fill:p.get("dataBackgroundColor")},p.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Xa({shape:{points:_},style:p.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,o=this.ecModel;return t.eachTargetAxis(function(l,i){O(t.getAxisProxy(l.name,i).getTargetSeriesModels(),function(t){if(!(n||!0!==e&&E(wN,t.get("type"))<0)){var a,s=o.getComponent(l.axis,i).axis,r=function(t){return{x:"y",y:"x",radius:"angle",angle:"radius"}[t]}(l.name),c=t.coordinateSystem;null!=r&&c.getOtherAxis&&(a=c.getOtherAxis(s).inverse),r=t.getData().mapDimension(r),n={thisAxis:s,series:t,thisDim:l.name,otherDim:r,otherAxisInverse:a}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],o=this._displayables.barGroup,l=this._size,i=this.dataZoomModel;o.add(t.filler=new EN({draggable:!0,cursor:MN(this._orient),drift:RN(this._onDragMove,this,"all"),ondragstart:RN(this._showDataInfo,this,!0),ondragend:RN(this._onDragEnd,this),onmouseover:RN(this._showDataInfo,this,!0),onmouseout:RN(this._showDataInfo,this,!1),style:{fill:i.get("fillerColor"),textPosition:"inside"}})),o.add(new EN({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1]},style:{stroke:i.get("dataBackgroundColor")||i.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),ON([0,1],function(t){var l=ur(i.get("handleIcon"),{cursor:MN(this._orient),draggable:!0,drift:RN(this._onDragMove,this,t),ondragend:RN(this._onDragEnd,this),onmouseover:RN(this._showDataInfo,this,!0),onmouseout:RN(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),a=l.getBoundingRect();this._handleHeight=Cr(i.get("handleSize"),this._size[1]),this._handleWidth=a.width/a.height*this._handleHeight,l.setStyle(i.getModel("handleStyle").getItemStyle());var s=i.get("handleColor");null!=s&&(l.style.fill=s),o.add(e[t]=l);var r=i.textStyleModel;this.group.add(n[t]=new Ua({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:r.getTextColor(),textFont:r.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[BN(t[0],[0,100],e,!0),BN(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,o=this._handleEnds,l=this._getViewExtent(),i=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];Dv(e,o,l,n.get("zoomLock")?"all":t,null!=i.minSpan?BN(i.minSpan,a,l,!0):null,null!=i.maxSpan?BN(i.maxSpan,a,l,!0):null);var s=this._range,r=this._range=IN([BN(o[0],l,a,!0),BN(o[1],l,a,!0)]);return!s||s[0]!==r[0]||s[1]!==r[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,o=IN(n.slice()),l=this._size;ON([0,1],function(t){var o=e.handles[t],i=this._handleHeight;o.attr({scale:[i/2,i/2],position:[n[t],l[1]/2-i/2]})},this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:l[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel,n=this._displayables,o=n.handleLabels,l=this._orient,i=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,r=this._range,c=t?a.calculateDataWindow({start:r[0],end:r[1]}).valueWindow:a.getDataValueWindow();i=[this._formatLabel(c[0],s),this._formatLabel(c[1],s)]}}var u=IN(this._handleEnds.slice());function _(t){var e=ir(n.handles[t].parent,this.group),a=sr(0===t?"right":"left",e),s=this._handleWidth/2+5,r=ar([u[t]+(0===t?-s:s),this._size[1]/2],e);o[t].setStyle({x:r[0],y:r[1],textVerticalAlign:l===CN?"middle":a,textAlign:l===CN?a:"center",text:i[t]})}_.call(this,0),_.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,o=n.get("labelFormatter"),l=n.get("labelPrecision");null!=l&&"auto"!==l||(l=e.getPixelPrecision());var i=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(l,20));return x(o)?o(t,i):D(o)?o.replace("{value}",i):i},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n,o){this._dragging=!0,Yt(o.event);var l=ar([e,n],this._displayables.barGroup.getLocalTransform(),!0),i=this._updateInterval(t,l[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),i&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var o=this._handleEnds,l=(o[0]+o[1])/2,i=this._updateInterval("all",n[0]-l);this._updateView(),i&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(ON(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}});function MN(t){return"vertical"===t?"ns-resize":"ew-resize"}OO.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var SN="\0_ec_dataZoom_roams";function PN(t,e){var n=DN(t),o=e.dataZoomId,l=e.coordId;O(n,function(t,n){var i=t.dataZoomInfos;i[o]&&E(e.allCoordIds,l)<0&&(delete i[o],t.count--)}),LN(n);var i=n[l];i||((i=n[l]={coordId:l,dataZoomInfos:{},count:0}).controller=function(t,e){var n=new Bg(t.getZr());return O(["pan","zoom","scrollMove"],function(t){n.on(t,function(n){var o=[];O(e.dataZoomInfos,function(l){if(n.isAvailableBehavior(l.dataZoomModel.option)){var i=(l.getRange||{})[t],a=i&&i(e.controller,n);!l.dataZoomModel.get("disabled",!0)&&a&&o.push({dataZoomId:l.dataZoomId,start:a[0],end:a[1]})}}),o.length&&e.dispatchAction(o)})}),n}(t,i),i.dispatchAction=S(UN,t)),i.dataZoomInfos[o]||i.count++,i.dataZoomInfos[o]=e;var a=function(t){var e,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return O(t,function(t){var l=t.dataZoomModel,i=!l.get("disabled",!0)&&(!l.get("zoomLock",!0)||"move");n["type_"+e]<n["type_"+i]&&(e=i),o&=l.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(i.dataZoomInfos);i.controller.enable(a.controlType,a.opt),i.controller.setPointerChecker(e.containsPoint),B_(i,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}function xN(t){return t.type+"\0_"+t.id}function DN(t){var e=t.getZr();return e[SN]||(e[SN]={})}function LN(t){O(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function UN(t,e){t.dispatchAction({type:"dataZoom",batch:e})}var FN=M,HN=wO.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(t,e,n,o){HN.superApply(this,"render",arguments),this._range=t.getPercentRange(),O(this.getTargetCoordInfo(),function(e,o){var l=C(e,function(t){return xN(t.model)});O(e,function(e){var i=e.model,a={};O(["pan","zoom","scrollMove"],function(t){a[t]=FN(VN[t],this,e,o)},this),PN(n,{coordId:xN(i),allCoordIds:l,containsPoint:function(t,e,n){return i.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,dataZoomModel:t,getRange:a})},this)},this)},dispose:function(){!function(t,e){var n=DN(t);O(n,function(t){t.controller.dispose();var n=t.dataZoomInfos;n[e]&&(delete n[e],t.count--)}),LN(n)}(this.api,this.dataZoomModel.id),HN.superApply(this,"dispose",arguments),this._range=null}}),VN={zoom:function(t,e,n,o){var l=this._range,i=l.slice(),a=t.axisModels[0];if(a){var s=WN[e](null,[o.originX,o.originY],a,n,t),r=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],c=Math.max(1/o.scale,0);i[0]=(i[0]-r)*c+r,i[1]=(i[1]-r)*c+r;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Dv(0,i,[0,100],0,u.minSpan,u.maxSpan),this._range=i,l[0]!==i[0]||l[1]!==i[1]?i:void 0}},pan:GN(function(t,e,n,o,l,i){var a=WN[o]([i.oldX,i.oldY],[i.newX,i.newY],e,l,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:GN(function(t,e,n,o,l,i){return WN[o]([0,0],[i.scrollDelta,i.scrollDelta],e,l,n).signal*(t[1]-t[0])*i.scrollDelta})};function GN(t){return function(e,n,o,l){var i=this._range,a=i.slice(),s=e.axisModels[0];if(s)return Dv(t(a,s,e,n,o,l),a,[0,100],"all"),this._range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}}function jN(t){var e=t&&t.visualMap;P(e)||(e=e?[e]:[]),KN(e,function(t){if(t){YN(t,"splitList")&&!YN(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&P(e)&&KN(e,function(t){L(t)&&(YN(t,"start")&&!YN(t,"min")&&(t.min=t.start),YN(t,"end")&&!YN(t,"max")&&(t.max=t.end))})}})}var WN={grid:function(t,e,n,o,l){var i=n.axis,a={},s=l.model.coordinateSystem.getRect();return t=t||[0,0],"x"===i.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=i.inverse?-1:1),a},polar:function(t,e,n,o,l){var i=n.axis,a={},s=l.model.coordinateSystem,r=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=r[1]-r[0],a.pixelStart=r[0],a.signal=i.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=i.inverse?-1:1),a},singleAxis:function(t,e,n,o,l){var i=n.axis,a=l.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===i.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=i.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=i.inverse?-1:1),s}},KN=O;function YN(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}Ec.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?0<t.pieces.length:0<t.splitNumber)&&!t.calculable?"piecewise":"continuous"});var XN=Ed.VISUAL.COMPONENT;function $N(t,e,n,o){for(var l=e.targetVisuals[o],i=qf.prepareVisualTypes(l),a={color:t.getData().getVisual("color")},s=0,r=i.length;s<r;s++){var c=i[s],u=l["opacity"===c?"__alphaForOpacity":c];u&&u.applyVisual(n,_,d)}return a.color;function _(t){return a[t]}function d(t,e){a[t]=e}}ph(XN,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var o=t.pipelineContext;!e.isTargetSeries(t)||o&&o.large||n.push(function(t,e,n,o){var l={};return O(t,function(t){var n=qf.prepareVisualTypes(e[t]);l[t]=n}),{progress:function(t,i){function a(t){return i.getItemVisual(r,t)}function s(t,e){i.setItemVisual(r,t,e)}var r;for(null!=o&&(o=i.getDimension(o));null!=(r=t.next());){var c=i.getRawDataItem(r);if(!c||!1!==c.visualMap)for(var u=null!=o?i.get(o,r,!0):r,_=n(u),d=e[_],h=l[_],y=0,p=h.length;y<p;y++){var m=h[y];d[m]&&d[m].applyVisual(u,a,s)}}}}}(e.stateList,e.targetVisuals,M(e.getValueState,e),e.getDataDimension(t.getData())))}),n}}),ph(XN,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),o=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var l=e.getVisualMeta(M($N,null,t,e))||{stops:[],outerColors:[]},i=e.getDataDimension(n),a=n.getDimensionInfo(i);null!=a&&(l.dimension=a.index,o.push(l))}}),t.getData().setVisual("visualMeta",o)}});var zN=function(t,e,n){var o=m((qN[t]||{})[e]);return n&&P(o)?o[o.length-1]:o},qN={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},JN=qf.mapVisual,ZN=qf.eachVisual,QN=P,tw=O,ew=wr,nw=Or,ow=gh({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;l.canvasSupported||(n.realtime=!1),e||oC(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=M(t,this),this.controllerVisuals=nC(this.option.controller,e,t),this.targetVisuals=nC(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=xl(t),e},eachTargetSeries:function(t,e){O(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){var o,l,i=this.option,a=i.precision,s=this.dataBound,r=i.formatter;return n=n||["<",">"],P(t)&&(t=t.slice(),o=!0),l=e?t:o?[c(t[0]),c(t[1])]:c(t),D(r)?r.replace("{value}",o?l[0]:l).replace("{value2}",o?l[1]:l):x(r)?o?r(t[0],t[1]):r(t):o?t[0]===s[0]?n[0]+" "+l[1]:t[1]===s[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function c(t){return t===s[0]?"min":t===s[1]?"max":(+t).toFixed(Math.min(a,20))}},resetExtent:function(){var t=this.option,e=ew([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var o=t.dimensions,l=o.length-1;0<=l;l--){var i=o[l];if(!t.getDimensionInfo(i).isCalculationCoord)return i}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},o=e.target||(e.target={}),l=e.controller||(e.controller={});k(o,n),k(l,n);var i=this.isCategory();function a(n){QN(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")},tw(this.stateList,function(t){var e=n[t];if(D(e)){var o=zN(e,"active",i);o?(n[t]={},n[t][e]=o):delete n[t]}},this)}a.call(this,o),a.call(this,l),function(t,e,n){var o=t[e],l=t[n];o&&!l&&(l=t[n]={},tw(o,function(t,e){if(qf.isValidType(e)){var n=zN(e,"inactive",i);null!=n&&(l[e]=n,"color"!==e||l.hasOwnProperty("opacity")||l.hasOwnProperty("colorAlpha")||(l.opacity=[0,0]))}}))}.call(this,o,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,o=this.get("inactiveColor");tw(this.stateList,function(l){var a=this.itemSize,s=t[l];null==(s=s||(t[l]={color:i?o:[o]})).symbol&&(s.symbol=e&&m(e)||(i?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&m(n)||(i?a[0]:[a[0],a[0]])),s.symbol=JN(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var r=s.symbolSize;if(null!=r){var c=-1/0;ZN(r,function(t){c<t&&(c=t)}),s.symbolSize=JN(r,function(t){return nw(t,[0,c],[0,a[0]],!0)})}},this)}.call(this,l)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:et,getValueState:et,getVisualMeta:et}),lw=[20,140],iw=ow.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){iw.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){iw.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),null!=t[0]&&!isNaN(t[0])||(t[0]=lw[0]),null!=t[1]&&!isNaN(t[1])||(t[1]=lw[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):P(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){ow.prototype.completeVisualOption.apply(this,arguments),O(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=wr((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var o=[],l=n.getData();l.each(this.getDataDimension(l),function(e,n){t[0]<=e&&e<=t[1]&&o.push(n)},this),e.push({seriesId:n.id,dataIndex:o})},this),e},getVisualMeta:function(t){var e=aw(this,"outOfRange",this.getExtent()),n=aw(this,"inRange",this.option.range.slice()),o=[];function l(e,n){o.push({value:e,color:t(e,n)})}for(var i=0,a=0,s=n.length,r=e.length;a<r&&(!n.length||e[a]<=n[0]);a++)e[a]<n[i]&&l(e[a],"outOfRange");for(var c=1;i<s;i++,c=0)c&&o.length&&l(n[i],"outOfRange"),l(n[i],"inRange");for(c=1;a<r;a++)(!n.length||n[n.length-1]<e[a])&&(c&&(o.length&&l(o[o.length-1].value,"outOfRange"),c=0),l(e[a],"outOfRange"));var u=o.length;return{stops:o,outerColors:[u?o[0].color:"transparent",u?o[u-1].color:"transparent"]}}});function aw(t,e,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,l=n[0],i=[],a=0;a<=200&&l<n[1];a++)i.push(l),l+=o;return i.push(n[1]),i}var sw=fh({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e,this.visualMapModel},render:function(t,e,n,o){!1!==(this.visualMapModel=t).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=$r(e.get("padding")||0),o=t.getBoundingRect();t.add(new Qa({z2:-1,silent:!0,shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[3]+n[1],height:o.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){var o=(n=n||{}).forceState,l=this.visualMapModel,i={};if("symbol"===e&&(i.symbol=l.get("itemSymbol")),"color"===e){var a=l.get("contentColor");i.color=a}function s(t){return i[t]}function r(t,e){i[t]=e}var c=l.controllerVisuals[o||l.getValueState(t)];return O(qf.prepareVisualTypes(c),function(o){var l=c[o];n.convertOpacityToAlpha&&"opacity"===o&&(o="colorAlpha",l=c.__alphaForOpacity),qf.dependsOn(o,e)&&l&&l.applyVisual(t,s,r)}),i[e]},positionGroup:function(t){var e=this.visualMapModel,n=this.api;pc(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:et});function rw(t,e,n){var o=t.option,l=o.align;if(null!=l&&"auto"!==l)return l;for(var i={width:e.getWidth(),height:e.getHeight()},a="horizontal"===o.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],r=s[a],c=[0,null,10],u={},_=0;_<3;_++)u[s[1-a][_]]=c[_],u[r[_]]=2===_?n[0]:o[r[_]];var d=[["x","width",3],["y","height",0]][a],h=yc(u,i,o.padding);return r[(h.margin[d[2]]||0)+h[d[0]]+.5*h[d[1]]<.5*i[d[1]]?0:1]}function cw(t,e){return O(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var uw=Or,_w=O,dw=Math.min,hw=Math.max,yw=sw.extend({type:"visualMap.continuous",init:function(){yw.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(t,e,n,o){o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var o=e[1-n];o=null!=o?o+"":"";var l=this.visualMapModel,i=l.get("textGap"),a=l.itemSize,s=this._shapes.barGroup,r=this._applyTransform([a[0]/2,0===n?-i:a[1]+i],s),c=this._applyTransform(0===n?"bottom":"top",s),u=this._orient,_=this.visualMapModel.textStyleModel;this.group.add(new Ua({style:{x:r[0],y:r[1],textVerticalAlign:"horizontal"===u?"middle":c,textAlign:"horizontal"===u?c:"center",text:o,textFont:_.getFont(),textFill:_.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,o=e.itemSize,l=this._orient,i=this._useHandle,a=rw(e,this.api,o),s=n.barGroup=this._createBarGroup(a);s.add(n.outOfRange=pw()),s.add(n.inRange=pw(null,i?kw(this._orient):null,M(this._dragHandle,this,"all",!1),M(this._dragHandle,this,"all",!0)));var r=e.textStyleModel.getTextRect("\u56fd"),c=hw(r.width,r.height);i&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,o,c,l,a),this._createHandle(s,1,o,c,l,a)),this._createIndicator(s,o,c,l),t.add(s)},_createHandle:function(t,e,n,o,l){var i=M(this._dragHandle,this,e,!1),a=M(this._dragHandle,this,e,!0),s=pw(function(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}(e,o),kw(this._orient),i,a);s.position[0]=n[0],t.add(s);var r=this.visualMapModel.textStyleModel,c=new Ua({draggable:!0,drift:i,onmousemove:function(t){Yt(t.event)},ondragend:a,style:{x:0,y:0,text:"",textFont:r.getFont(),textFill:r.getTextColor()}});this.group.add(c);var u=["horizontal"===l?o/2:1.5*o,"horizontal"===l?0===e?-1.5*o:1.5*o:0===e?-o/2:o/2],_=this._shapes;_.handleThumbs[e]=s,_.handleLabelPoints[e]=u,_.handleLabels[e]=c},_createIndicator:function(t,e,n,o){var l=pw([[0,0]],"move");l.position[0]=e[0],l.attr({invisible:!0,silent:!0}),t.add(l);var i=this.visualMapModel.textStyleModel,a=new Ua({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:i.getFont(),textFill:i.getTextColor()}});this.group.add(a);var s=["horizontal"===o?n/2:9,0],r=this._shapes;r.indicator=l,r.indicatorLabel=a,r.indicatorLabelPoint=s},_dragHandle:function(t,e,n,o){if(this._useHandle){if(this._dragging=!e,!e){var l=this._applyTransform([n,o],this._shapes.barGroup,!0);this._updateInterval(t,l[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?this._hovering||this._clearHoverLinkToSeries():mw(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),o=[0,t.itemSize[1]];this._handleEnds=[uw(e[0],n,o,!0),uw(e[1],n,o,!0)]},_updateInterval:function(t,e){e=e||0;var n=this.visualMapModel,o=this._handleEnds,l=[0,n.itemSize[1]];Dv(e,o,l,t,0);var i=n.getExtent();this._dataInterval=[uw(o[0],l,i,!0),uw(o[1],l,i,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),o=this._shapes,l=[0,e.itemSize[1]],i=t?l:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,i,"inRange"),s=this._createBarVisual(n,n,l,"outOfRange");o.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),o.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(i,a)},_createBarVisual:function(t,e,n,o){var l={forceState:o,convertOpacityToAlpha:!0},i=this._makeColorGradient(t,l),a=[this.getControllerVisual(t[0],"symbolSize",l),this.getControllerVisual(t[1],"symbolSize",l)],s=this._createBarPoints(n,a);return{barColor:new rs(0,0,0,1,i),barPoints:s,handlesColor:[i[0].color,i[i.length-1].color]}},_makeColorGradient:function(t,e){var n=[],o=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var l=1;l<100;l++){var i=t[0]+o*l;if(i>t[1])break;n.push({color:this.getControllerVisual(i,"color",e),offset:l/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Nn("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,l=n.handleThumbs,i=n.handleLabels;_w([0,1],function(a){var s=l[a];s.setStyle("fill",e.handlesColor[a]),s.position[1]=t[a];var r=ar(n.handleLabelPoints[a],ir(s,this.group));i[a].setStyle({x:r[0],y:r[1],text:o.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,o){var l=this.visualMapModel,i=l.getExtent(),a=l.itemSize,s=[0,a[1]],r=uw(t,i,s,!0),c=this._shapes,u=c.indicator;if(u){u.position[1]=r,u.attr("invisible",!1),u.setShape("points",function(t,e,n,o){return t?[[0,-dw(e,hw(n,0))],[6,0],[0,dw(e,hw(o-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,o,r,a[1]));var _=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});u.setStyle("fill",_);var d=ar(c.indicatorLabelPoint,ir(u,this.group)),h=c.indicatorLabel;h.attr("invisible",!1);var y=this._applyTransform("left",c.barGroup),p=this._orient;h.setStyle({text:(n||"")+l.formatValueText(e),textVerticalAlign:"horizontal"===p?y:"middle",textAlign:"horizontal"===p?"center":y,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,o=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);o[1]=dw(hw(0,o[1]),n[1]),t._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var l=[0,o[1]],i=n.getExtent();t=dw(hw(l[0],t),l[1]);var a=function(t,e,n){var o=6,l=t.get("hoverLinkDataSize");return l&&(o=uw(l,e,n,!0)/2),o}(n,i,l),s=[t-a,t+a],r=uw(t,l,i,!0),c=[uw(s[0],l,i,!0),uw(s[1],l,i,!0)];s[0]<l[0]&&(c[0]=-1/0),l[1]<s[1]&&(c[1]=1/0),e&&(c[0]===-1/0?this._showIndicator(r,c[1],"< ",a):c[1]===1/0?this._showIndicator(r,c[0],"> ",a):this._showIndicator(r,r,"\u2248 ",a));var u=this._hoverLinkDataIndices,_=[];(e||mw(n))&&(_=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var d=function(t,e){var n={},o={};return l(t||[],n),l(e||[],o,n),[i(n),i(o)];function l(t,e,n){for(var o=0,l=t.length;o<l;o++)for(var i=t[o].seriesId,a=xl(t[o].dataIndex),s=n&&n[i],r=0,c=a.length;r<c;r++){var u=a[r];s&&s[u]?s[u]=null:(e[i]||(e[i]={}))[u]=1}}function i(t,e){var n=[];for(var o in t)if(t.hasOwnProperty(o)&&null!=t[o])if(e)n.push(+o);else{var l=i(t[o],!0);l.length&&n.push({seriesId:o,dataIndex:l})}return n}}(u,_);this._dispatchHighDown("downplay",cw(d[0],n)),this._dispatchHighDown("highlight",cw(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var o=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(o)){var l=o.getData(e.dataType),i=l.get(n.getDataDimension(l),e.dataIndex,!0);isNaN(i)||this._showIndicator(i,i)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",cw(t,this.visualMapModel)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,o){var l=ir(e,o?null:this.group);return yr[P(t)?"applyTransform":"transformDirection"](t,l,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function pw(t,e,n,o){return new Ya({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){Yt(t.event)},ondragend:o})}function mw(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function kw(t){return"vertical"===t?"ns-resize":"ew-resize"}dh({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})}),uh(jN);var gw=ow.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){gw.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();fw[this._mode].call(this),this._resetSelected(t,e);var o=this.option.categories;this.resetVisual(function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=m(o)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=C(this._pieceList,function(t){return t=m(t),"inRange"!==e&&(t.visual=null),t}))})},completeVisualOption:function(){var t=this.option,e={},n=qf.listVisualTypes(),o=this.isCategory();function l(t,e,n){return t&&t[e]&&(L(t[e])?t[e].hasOwnProperty(n):t[e]===n)}O(t.pieces,function(t){O(n,function(n){t.hasOwnProperty(n)&&(e[n]=1)})}),O(e,function(e,n){var i=0;O(this.stateList,function(e){i|=l(t,e,n)||l(t.target,e,n)},this),i||O(this.stateList,function(e){(t[e]||(t[e]={}))[n]=zN(n,"inRange"===e?"active":"inactive",o)})},this),ow.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,o=this._pieceList,l=(e?n:t).selected||{};if(n.selected=l,O(o,function(t,e){var n=this.getSelectedMapKey(t);l.hasOwnProperty(n)||(l[n]=!0)},this),"single"===n.selectedMode){var i=!1;O(o,function(t,e){var n=this.getSelectedMapKey(t);l[n]&&(i?l[n]=!1:i=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&0<t.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=m(t)},getValueState:function(t){var e=qf.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var o=[],l=n.getData();l.each(this.getDataDimension(l),function(e,n){qf.findPieceIndex(e,this._pieceList)===t&&o.push(n)},this),e.push({seriesId:n.id,dataIndex:o})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){if(!this.isCategory()){var e=[],n=[],o=this,l=this._pieceList.slice();if(l.length){var i=l[0].interval[0];i!==-1/0&&l.unshift({interval:[-1/0,i]}),(i=l[l.length-1].interval[1])!==1/0&&l.push({interval:[i,1/0]})}else l.push({interval:[-1/0,1/0]});var a=-1/0;return O(l,function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])},this),{stops:e,outerColors:n}}function s(l,i){var a=o.getRepresentValue({interval:l});i=i||o.getValueState(a);var s=t(a,i);l[0]===-1/0?n[0]=s:l[1]===1/0?n[1]=s:e.push({value:l[0],color:s},{value:l[1],color:s})}}}),fw={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),o=this.getExtent(),l=t.splitNumber;l=Math.max(parseInt(l,10),1),t.splitNumber=l;for(var i=(o[1]-o[0])/l;+i.toFixed(n)!==i&&n<5;)n++;t.precision=n,i=+i.toFixed(n),t.minOpen&&e.push({interval:[-1/0,o[0]],close:[0,0]});for(var a=0,s=o[0];a<l;s+=i,a++){var r=a===l-1?o[1]:s+i;e.push({interval:[s,r],close:[1,1]})}t.maxOpen&&e.push({interval:[o[1],1/0],close:[0,0]}),jr(e),O(e,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;O(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),bw(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;O(t.pieces,function(t,n){L(t)||(t={value:t});var o={text:"",index:n};if(null!=t.label&&(o.text=t.label),t.hasOwnProperty("value")){var l=o.value=t.value;o.interval=[l,l],o.close=[1,1]}else{for(var i=o.interval=[],a=o.close=[0,0],s=[1,0,1],r=[-1/0,1/0],c=[],u=0;u<2;u++){for(var _=[["gte","gt","min"],["lte","lt","max"]][u],d=0;d<3&&null==i[u];d++)i[u]=t[_[d]],a[u]=s[d],c[u]=2===d;null==i[u]&&(i[u]=r[u])}c[0]&&i[1]===1/0&&(a[0]=0),c[1]&&i[0]===-1/0&&(a[1]=0),i[0]===i[1]&&a[0]&&a[1]&&(o.value=i[0])}o.visual=qf.retrieveVisuals(t),e.push(o)},this),bw(t,e),jr(e),O(e,function(t){var e=t.close,n=[["<","\u2264"][e[1]],[">","\u2265"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}};function bw(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}sw.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),o=e.textStyleModel,l=o.getFont(),i=o.getTextColor(),a=this._getItemAlign(),s=e.itemSize,r=this._getViewData(),c=r.endsText,u=G(e.get("showLabel",!0),!c);c&&this._renderEndsText(t,c[0],s,u,a),O(r.viewPieceList,function(o){var r=o.piece,c=new Nn;c.onclick=M(this._onItemClick,this,r),this._enableHoverLink(c,o.indexInModelPieceList);var _=e.getRepresentValue(r);if(this._createItemSymbol(c,_,[0,0,s[0],s[1]]),u){var d=this.visualMapModel.getValueState(_);c.add(new Ua({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:r.text,textVerticalAlign:"middle",textAlign:a,textFont:l,textFill:i,opacity:"outOfRange"===d?.5:1}}))}t.add(c)},this),c&&this._renderEndsText(t,c[1],s,u,a),hc(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:cw(n.findTargetDataIndices(e),n)})}t.on("mouseover",M(n,this,"highlight")).on("mouseout",M(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return rw(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,o,l){if(e){var i=new Nn,a=this.visualMapModel.textStyleModel;i.add(new Ua({style:{x:o?"right"===l?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:o?l:"center",text:e,textFont:a.getFont(),textFill:a.getTextColor()}})),t.add(i)}},_getViewData:function(){var t=this.visualMapModel,e=C(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),o=t.get("orient"),l=t.get("inverse");return("horizontal"===o?l:!l)?e.reverse():n=n&&n.slice().reverse(),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(dp(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,o=m(n.selected),l=e.getSelectedMapKey(t);"single"===n.selectedMode?(o[l]=!0,O(o,function(t,e){o[e]=e===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}}),uh(jN);var vw,Tw="urn:schemas-microsoft-com:vml",Ew="undefined"==typeof window?null:window,Bw=!1,Iw=Ew&&Ew.document;function Rw(t){return vw(t)}if(Iw&&!l.canvasSupported)try{Iw.namespaces.zrvml||Iw.namespaces.add("zrvml",Tw),vw=function(t){return Iw.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){vw=function(t){return Iw.createElement("<"+t+' xmlns="'+Tw+'" class="zrvml">')}}var Ow,Cw=ea.CMD,Nw=Math.round,ww=Math.sqrt,Aw=Math.abs,Mw=Math.cos,Sw=Math.sin,Pw=Math.max;if(!l.canvasSupported){var xw=",",Dw="progid:DXImageTransform.Microsoft",Lw=21600,Uw=Lw/2,Fw=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=Lw+","+Lw,t.coordorigin="0,0"},Hw=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},Vw=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},Gw=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},jw=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},Ww=Ko,Kw=function(t,e,n){var o=Ve(e);n=+n,isNaN(n)&&(n=1),o&&(t.color=Hw(o[0],o[1],o[2]),t.opacity=n*o[3])},Yw=function(t,e,n,o){var l="fill"===e,i=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(l||!l&&n.lineWidth)?(t[l?"filled":"stroked"]="true",n[e]instanceof ls&&Gw(t,i),i=i||Rw(e),l?function(t,e,n){var o,l=e.fill;if(null!=l)if(l instanceof ls){var i,a=0,s=[0,0],r=0,c=1,u=n.getBoundingRect(),_=u.width,d=u.height;if("linear"===l.type){i="gradient";var h=n.transform,y=[l.x*_,l.y*d],p=[l.x2*_,l.y2*d];h&&(Tt(y,y,h),Tt(p,p,h));var m=p[0]-y[0],k=p[1]-y[1];(a=180*Math.atan2(m,k)/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{i="gradientradial",y=[l.x*_,l.y*d],h=n.transform;var g=n.scale,f=_,b=d;s=[(y[0]-u.x)/f,(y[1]-u.y)/b],h&&Tt(y,y,h),f/=g[0]*Lw,b/=g[1]*Lw;var v=Pw(f,b);r=0/v,c=2*l.r/v-r}var T=l.colorStops.slice();T.sort(function(t,e){return t.offset-e.offset});for(var E=T.length,B=[],I=[],R=0;R<E;R++){var O=T[R],C=(o=Ve(O.color),[Hw(o[0],o[1],o[2]),o[3]]);I.push(O.offset*c+r+" "+C[0]),0!==R&&R!==E-1||B.push(C)}if(2<=E){var N=B[0][0],w=B[1][0],A=B[0][1]*e.opacity,M=B[1][1]*e.opacity;t.type=i,t.method="none",t.focus="100%",t.angle=a,t.color=N,t.color2=w,t.colors=I.join(","),t.opacity=M,t.opacity2=A}"radial"===i&&(t.focusposition=s.join(","))}else Kw(t,l,e.opacity)}(i,n,o):function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof ls||Kw(t,e.stroke,e.opacity)}(i,n),Vw(t,i)):(t[l?"filled":"stroked"]="false",Gw(t,i))},Xw=[[],[],[]];va.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=Rw("shape"),Fw(n),this._vmlEl=n),Yw(n,"fill",e,this),Yw(n,"stroke",e,this);var o=this.transform,l=null!=o,i=n.getElementsByTagName("stroke")[0];if(i){var a=e.lineWidth;if(l&&!e.strokeNoScale){var s=o[0]*o[3]-o[1]*o[2];a*=ww(Aw(s))}i.weight=a+"px"}var r=this.path||(this.path=new ea);this.__dirtyPath&&(r.beginPath(),r.subPixelOptimize=!1,this.buildPath(r,this.shape),r.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,o,l,i,a,s,r=Cw.M,c=Cw.C,u=Cw.L,_=Cw.A,d=Cw.Q,h=[],y=t.data,p=t.len();for(i=0;i<p;){switch(o="",n=0,l=y[i++]){case r:o=" m ",n=1,a=y[i++],s=y[i++],Xw[0][0]=a,Xw[0][1]=s;break;case u:o=" l ",n=1,a=y[i++],s=y[i++],Xw[0][0]=a,Xw[0][1]=s;break;case d:case c:o=" c ",n=3;var m,k,g=y[i++],f=y[i++],b=y[i++],v=y[i++];l===d?(b=((m=b)+2*g)/3,v=((k=v)+2*f)/3,g=(a+2*g)/3,f=(s+2*f)/3):(m=y[i++],k=y[i++]),Xw[0][0]=g,Xw[0][1]=f,Xw[1][0]=b,Xw[1][1]=v,a=Xw[2][0]=m,s=Xw[2][1]=k;break;case _:var T=0,E=0,B=1,I=1,R=0;e&&(T=e[4],E=e[5],B=ww(e[0]*e[0]+e[1]*e[1]),I=ww(e[2]*e[2]+e[3]*e[3]),R=Math.atan2(-e[1]/I,e[0]/B));var O=y[i++],C=y[i++],N=y[i++],w=y[i++],A=y[i++]+R,M=y[i++]+A+R;i++;var S=y[i++],P=O+Mw(A)*N,x=C+Sw(A)*w,D=(g=O+Mw(M)*N,f=C+Sw(M)*w,S?" wa ":" at ");Math.abs(P-g)<1e-4&&(.01<Math.abs(M-A)?S&&(P+=.0125):Math.abs(x-C)<1e-4?S&&P<O||!S&&O<P?f-=.0125:f+=.0125:S&&x<C||!S&&C<x?g+=.0125:g-=.0125),h.push(D,Nw(((O-N)*B+T)*Lw-Uw),xw,Nw(((C-w)*I+E)*Lw-Uw),xw,Nw(((O+N)*B+T)*Lw-Uw),xw,Nw(((C+w)*I+E)*Lw-Uw),xw,Nw((P*B+T)*Lw-Uw),xw,Nw((x*I+E)*Lw-Uw),xw,Nw((g*B+T)*Lw-Uw),xw,Nw((f*I+E)*Lw-Uw)),a=g,s=f;break;case Cw.R:var L=Xw[0],U=Xw[1];L[0]=y[i++],L[1]=y[i++],U[0]=L[0]+y[i++],U[1]=L[1]+y[i++],e&&(Tt(L,L,e),Tt(U,U,e)),L[0]=Nw(L[0]*Lw-Uw),U[0]=Nw(U[0]*Lw-Uw),L[1]=Nw(L[1]*Lw-Uw),U[1]=Nw(U[1]*Lw-Uw),h.push(" m ",L[0],xw,L[1]," l ",U[0],xw,L[1]," l ",U[0],xw,U[1]," l ",L[0],xw,U[1]);break;case Cw.Z:h.push(" x ")}if(0<n){h.push(o);for(var F=0;F<n;F++){var H=Xw[F];e&&Tt(H,H,e),h.push(Nw(H[0]*Lw-Uw),xw,Nw(H[1]*Lw-Uw),F<n-1?xw:"")}}}return h.join("")}(r,this.transform),n.style.zIndex=jw(this.zlevel,this.z,this.z2),Vw(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},va.prototype.onRemove=function(t){Gw(t,this._vmlEl),this.removeRectText(t)},va.prototype.onAdd=function(t){Vw(t,this._vmlEl),this.appendRectText(t)},Jo.prototype.brushVML=function(t){var e,n,o=this.style,l=o.image;if(function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()}(l)){var i=l.src;if(i===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var a=l.runtimeStyle,s=a.width,r=a.height;a.width="auto",a.height="auto",e=l.width,n=l.height,a.width=s,a.height=r,this._imageSrc=i,this._imageWidth=e,this._imageHeight=n}l=i}else l===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(l){var c=o.x||0,u=o.y||0,_=o.width,d=o.height,h=o.sWidth,y=o.sHeight,p=o.sx||0,m=o.sy||0,k=h&&y,g=this._vmlEl;g||(g=Iw.createElement("div"),Fw(g),this._vmlEl=g);var f,b=g.style,v=!1,T=1,E=1;if(this.transform&&(f=this.transform,T=ww(f[0]*f[0]+f[1]*f[1]),E=ww(f[2]*f[2]+f[3]*f[3]),v=f[1]||f[2]),v){var B=[c,u],I=[c+_,u],R=[c,u+d],O=[c+_,u+d];Tt(B,B,f),Tt(I,I,f),Tt(R,R,f),Tt(O,O,f);var C=Pw(B[0],I[0],R[0],O[0]),N=Pw(B[1],I[1],R[1],O[1]),w=[];w.push("M11=",f[0]/T,xw,"M12=",f[2]/E,xw,"M21=",f[1]/T,xw,"M22=",f[3]/E,xw,"Dx=",Nw(c*T+f[4]),xw,"Dy=",Nw(u*E+f[5])),b.padding="0 "+Nw(C)+"px "+Nw(N)+"px 0",b.filter=Dw+".Matrix("+w.join("")+", SizingMethod=clip)"}else f&&(c=c*T+f[4],u=u*E+f[5]),b.filter="",b.left=Nw(c)+"px",b.top=Nw(u)+"px";var A=this._imageEl,M=this._cropEl;A||(A=Iw.createElement("div"),this._imageEl=A);var S=A.style;if(k){if(e&&n)S.width=Nw(T*e*_/h)+"px",S.height=Nw(E*n*d/y)+"px";else{var P=new Image,x=this;P.onload=function(){P.onload=null,e=P.width,n=P.height,S.width=Nw(T*e*_/h)+"px",S.height=Nw(E*n*d/y)+"px",x._imageWidth=e,x._imageHeight=n,x._imageSrc=l},P.src=l}M||((M=Iw.createElement("div")).style.overflow="hidden",this._cropEl=M);var D=M.style;D.width=Nw((_+p*_/h)*T),D.height=Nw((d+m*d/y)*E),D.filter=Dw+".Matrix(Dx="+-p*_/h*T+",Dy="+-m*d/y*E+")",M.parentNode||g.appendChild(M),A.parentNode!==M&&M.appendChild(A)}else S.width=Nw(T*_)+"px",S.height=Nw(E*d)+"px",g.appendChild(A),M&&M.parentNode&&(g.removeChild(M),this._cropEl=null);var L="",U=o.opacity;U<1&&(L+=".Alpha(opacity="+Nw(100*U)+") "),L+=Dw+".AlphaImageLoader(src="+l+", SizingMethod=scale)",S.filter=L,g.style.zIndex=jw(this.zlevel,this.z,this.z2),Vw(t,g),null!=o.text&&this.drawRectText(t,this.getBoundingRect())}},Jo.prototype.onRemove=function(t){Gw(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Jo.prototype.onAdd=function(t){Vw(t,this._vmlEl),this.appendRectText(t)};var $w,zw="normal",qw={},Jw=0,Zw=document.createElement("div");Ow=function(t,e){var n=Iw;$w||(($w=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",Iw.body.appendChild($w));try{$w.style.font=e}catch(t){}return $w.innerHTML="",$w.appendChild(n.createTextNode(t)),{width:$w.offsetWidth}},uo.measureText=Ow;for(var Qw=new Cn,tA=function(t,e,n,o){var l=this.style;this.__dirty&&So(l);var i=l.text;if(null!=i&&(i+=""),i){if(l.rich){var a=Eo(i,l);i=[];for(var s=0;s<a.lines.length;s++){for(var r=a.lines[s].tokens,c=[],u=0;u<r.length;u++)c.push(r[u].text);i.push(c.join(""))}i=i.join("\n")}var _,d,h=l.textAlign,y=l.textVerticalAlign,p=function(t){var e=qw[t];if(!e){100<Jw&&(Jw=0,qw={});var n,o=Zw.style;try{o.font=t,n=o.fontFamily.split(",")[0]}catch(t){}e={style:o.fontStyle||zw,variant:o.fontVariant||zw,weight:o.fontWeight||zw,size:0|parseFloat(o.fontSize||12),family:n||"Microsoft YaHei"},qw[t]=e,Jw++}return e}(l.font),m=p.style+" "+p.variant+" "+p.weight+" "+p.size+'px "'+p.family+'"';n=n||ho(i,m,h,y,l.textPadding,l.textLineHeight);var k=this.transform;if(k&&!o&&(Qw.copy(e),Qw.applyTransform(k),e=Qw),o)_=e.x,d=e.y;else{var g=l.textPosition;if(g instanceof Array)_=e.x+Ww(g[0],e.width),d=e.y+Ww(g[1],e.height),h=h||"left";else{var f=this.calculateTextPosition?this.calculateTextPosition({},l,e):mo({},l,e);_=f.x,d=f.y,h=h||f.textAlign,y=y||f.textVerticalAlign}}_=yo(_,n.width,h),d=po(d,n.height,y),d+=n.height/2;var b,v,T,E=Rw,B=this._textVmlEl;B?v=(b=(T=B.firstChild).nextSibling).nextSibling:(B=E("line"),b=E("path"),v=E("textpath"),T=E("skew"),v.style["v-text-align"]="left",Fw(B),b.textpathok=!0,v.on=!0,B.from="0 0",B.to="1000 0.05",Vw(B,T),Vw(B,b),Vw(B,v),this._textVmlEl=B);var I=[_,d],R=B.style;k&&o?(Tt(I,I,k),T.on=!0,T.matrix=k[0].toFixed(3)+xw+k[2].toFixed(3)+xw+k[1].toFixed(3)+xw+k[3].toFixed(3)+",0,0",T.offset=(Nw(I[0])||0)+","+(Nw(I[1])||0),T.origin="0 0",R.left="0px",R.top="0px"):(T.on=!1,R.left=Nw(_)+"px",R.top=Nw(d)+"px"),v.string=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(i);try{v.style.font=m}catch(t){}Yw(B,"fill",{fill:l.textFill,opacity:l.opacity},this),Yw(B,"stroke",{stroke:l.textStroke,opacity:l.opacity,lineDash:l.lineDash||null},this),B.style.zIndex=jw(this.zlevel,this.z,this.z2),Vw(t,B)}},eA=function(t){Gw(t,this._textVmlEl),this._textVmlEl=null},nA=function(t){Vw(t,this._textVmlEl)},oA=[$o,qo,Jo,va,Ua],lA=0;lA<oA.length;lA++){var iA=oA[lA].prototype;iA.drawRectText=tA,iA.removeRectText=eA,iA.appendRectText=nA}Ua.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},Ua.prototype.onRemove=function(t){this.removeRectText(t)},Ua.prototype.onAdd=function(t){this.appendRectText(t)}}function aA(t){return parseInt(t,10)}function sA(t,e){!function(){if(!Bw&&Iw){Bw=!0;var t=Iw.styleSheets;t.length<31?Iw.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=t,this.storage=e;var n=document.createElement("div"),o=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",o.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=o,this._vmlViewport=n,this.resize();var l=e.delFromStorage,i=e.addToStorage;e.delFromStorage=function(t){l.call(e,t),t&&t.onRemove&&t.onRemove(o)},e.addToStorage=function(t){t.onAdd&&t.onAdd(o),i.call(e,t)},this._firstPaint=!0}function rA(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}sA.prototype={constructor:sA,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var o=t[n];o.invisible||o.ignore?(o.__alreadyNotVisible||o.onRemove(e),o.__alreadyNotVisible=!0):(o.__alreadyNotVisible&&o.onAdd(e),o.__alreadyNotVisible=!1,o.__dirty&&(o.beforeBrush&&o.beforeBrush(),(o.brushVML||o.brush).call(o,e),o.afterBrush&&o.afterBrush())),o.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||aA(e.width))-aA(e.paddingLeft)-aA(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||aA(e.height))-aA(e.paddingTop)-aA(e.paddingBottom)|0}},O(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){sA.prototype[t]=function(t){return function(){kn('In IE8.0 VML mode painter not support method "'+t+'"')}}(t)}),Cl("vml",sA);var cA=ea.CMD,uA=Array.prototype.join,_A="none",dA=Math.round,hA=Math.sin,yA=Math.cos,pA=Math.PI,mA=2*Math.PI,kA=180/pA,gA=1e-4;function fA(t){return dA(1e4*t)/1e4}function bA(t){return t<gA&&-gA<t}function vA(t,e){e&&TA(t,"transform","matrix("+uA.call(e,",")+")")}function TA(t,e,n){n&&("linear"===n.type||"radial"===n.type)||t.setAttribute(e,n)}function EA(t,e,n,o){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==_A}(e,n)){var l=n?e.textFill:e.fill;TA(t,"fill",l="transparent"===l?_A:l),TA(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else TA(t,"fill",_A);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==_A}(e,n)){var i=n?e.textStroke:e.stroke;TA(t,"stroke",i="transparent"===i?_A:i),TA(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?o.getLineScale():1)),TA(t,"paint-order",n?"stroke":"fill"),TA(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(TA(t,"stroke-dasharray",e.lineDash.join(",")),TA(t,"stroke-dashoffset",dA(e.lineDashOffset||0))):TA(t,"stroke-dasharray",""),e.lineCap&&TA(t,"stroke-linecap",e.lineCap),e.lineJoin&&TA(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&TA(t,"stroke-miterlimit",e.miterLimit)}else TA(t,"stroke",_A)}var BA={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=rA("path"),t.__svgEl=n),t.path||t.createPathProxy();var o=t.path;if(t.__dirtyPath){o.beginPath(),o.subPixelOptimize=!1,t.buildPath(o,t.shape),t.__dirtyPath=!1;var l=function(t){for(var e=[],n=t.data,o=t.len(),l=0;l<o;){var i="",a=0;switch(n[l++]){case cA.M:i="M",a=2;break;case cA.L:i="L",a=2;break;case cA.Q:i="Q",a=4;break;case cA.C:i="C",a=6;break;case cA.A:var s=n[l++],r=n[l++],c=n[l++],u=n[l++],_=n[l++],d=n[l++],h=n[l++],y=n[l++],p=Math.abs(d),m=bA(p-mA)||(y?mA<=d:mA<=-d),k=0<d?d%mA:d%mA+mA,g=!1;g=!!m||!bA(p)&&pA<=k==!!y;var f=fA(s+c*yA(_)),b=fA(r+u*hA(_));m&&(d=y?mA-1e-4:1e-4-mA,g=!0,9===l&&e.push("M",f,b));var v=fA(s+c*yA(_+d)),T=fA(r+u*hA(_+d));e.push("A",fA(c),fA(u),dA(h*kA),+g,+y,v,T);break;case cA.Z:i="Z";break;case cA.R:v=fA(n[l++]),T=fA(n[l++]);var E=fA(n[l++]),B=fA(n[l++]);e.push("M",v,T,"L",v+E,T,"L",v+E,T+B,"L",v,T+B,"L",v,T)}i&&e.push(i);for(var I=0;I<a;I++)e.push(fA(n[l++]))}return e.join(" ")}(o);l.indexOf("NaN")<0&&TA(n,"d",l)}EA(n,e,!1,t),vA(n,t.transform),null!=e.text?AA(t,t.getBoundingRect()):SA(t)}},IA={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var o=e.x||0,l=e.y||0,i=e.width,a=e.height,s=t.__svgEl;s||(s=rA("image"),t.__svgEl=s),n!==t.__imageSrc&&(function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink","href",n)}(s,0,n),t.__imageSrc=n),TA(s,"width",i),TA(s,"height",a),TA(s,"x",o),TA(s,"y",l),vA(s,t.transform),null!=e.text?AA(t,t.getBoundingRect()):SA(t)}}},RA={},OA=new Cn,CA={},NA=[],wA={left:"start",right:"end",center:"middle",middle:"middle"},AA=function(t,e){var n=t.style,o=t.transform,l=t instanceof Ua||n.transformText;t.__dirty&&So(n);var i=n.text;if(null!=i&&(i+=""),Xo(i,n)){null==i&&(i=""),!l&&o&&(OA.copy(e),OA.applyTransform(o),e=OA);var a=t.__textSvgEl;a||(a=rA("text"),t.__textSvgEl=a);var s=a.style,r=n.font||co,c=a.__computedFont;r!==a.__styleFont&&(s.font=a.__styleFont=r,c=a.__computedFont=s.font);var u=n.textPadding,_=n.textLineHeight,d=t.__textCotentBlock;d&&!t.__dirtyText||(d=t.__textCotentBlock=To(i,c,u,_,n.truncate));var h=d.outerHeight,y=d.lineHeight;Vo(CA,t,n,e);var p=CA.baseX,m=CA.baseY,k=CA.textAlign||"left",g=CA.textVerticalAlign;!function(t,e,n,o,l,i,a){ae(NA),e&&n&&se(NA,n);var s=o.textRotation;if(l&&s){var r=o.textOrigin;"center"===r?(i=l.width/2+l.x,a=l.height/2+l.y):r&&(i=r[0]+l.x,a=r[1]+l.y),NA[4]-=i,NA[5]-=a,ue(NA,NA,s),NA[4]+=i,NA[5]+=a}vA(t,NA)}(a,l,o,n,e,p,m);var f=p,b=po(m,h,g);u&&(f=function(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}(p,k,u),b+=u[0]),b+=y/2,EA(a,n,!0,t);var v=d.canCacheByTextString,T=t.__tspanList||(t.__tspanList=[]),E=T.length;if(v&&t.__canCacheByTextString&&t.__text===i){if(t.__dirtyText&&E)for(var B=0;B<E;++B)MA(T[B],k,f,b+B*y)}else{t.__text=i,t.__canCacheByTextString=v;var I=d.lines,R=I.length;for(B=0;B<R;B++){var O=T[B],C=I[B];O?O.__zrText!==C&&(O.innerHTML="",O.appendChild(document.createTextNode(C))):(O=T[B]=rA("tspan"),a.appendChild(O),O.appendChild(document.createTextNode(C))),MA(O,k,f,b+B*y)}if(R<E){for(;B<E;B++)a.removeChild(T[B]);T.length=R}}}};function MA(t,e,n,o){TA(t,"dominant-baseline","middle"),TA(t,"text-anchor",wA[e]),TA(t,"x",n),TA(t,"y",o)}function SA(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}function PA(){}function xA(t,e){for(var n=0,o=e.length,l=0,i=0;n<o;n++){var a=e[n];if(a.removed){for(s=[],r=i;r<i+a.count;r++)s.push(r);a.indices=s,i+=a.count}else{for(var s=[],r=l;r<l+a.count;r++)s.push(r);a.indices=s,l+=a.count,a.added||(i+=a.count)}}return e}RA.drawRectText=AA,RA.brush=function(t){null!=t.style.text?AA(t,!1):SA(t)},PA.prototype={diff:function(t,e,n){n=n||function(t,e){return t===e},this.equals=n;var o=this;t=t.slice();var l=(e=e.slice()).length,i=t.length,a=1,s=l+i,r=[{newPos:-1,components:[]}],c=this.extractCommon(r[0],e,t,0);if(r[0].newPos+1>=l&&i<=c+1){for(var u=[],_=0;_<e.length;_++)u.push(_);return[{indices:u,count:e.length}]}function d(){for(var n=-1*a;n<=a;n+=2){var s,c=r[n-1],u=r[n+1],_=(u?u.newPos:0)-n;c&&(r[n-1]=void 0);var d=c&&c.newPos+1<l,h=u&&0<=_&&_<i;if(d||h){if(!d||h&&c.newPos<u.newPos?(s={newPos:(y=u).newPos,components:y.components.slice(0)},o.pushComponent(s.components,void 0,!0)):((s=c).newPos++,o.pushComponent(s.components,!0,void 0)),_=o.extractCommon(s,e,t,n),s.newPos+1>=l&&i<=_+1)return xA(0,s.components);r[n]=s}else r[n]=void 0}var y;a++}for(;a<=s;){var h=d();if(h)return h}},pushComponent:function(t,e,n){var o=t[t.length-1];o&&o.added===e&&o.removed===n?t[t.length-1]={count:o.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,o){for(var l=e.length,i=n.length,a=t.newPos,s=a-o,r=0;a+1<l&&s+1<i&&this.equals(e[a+1],n[s+1]);)a++,s++,r++;return r&&t.components.push({count:r}),t.newPos=a,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var DA=new PA;function LA(t,e,n,o,l){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=o,this._domName=l||"_dom",this.nextId=0}function UA(t,e){LA.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function FA(t,e){LA.call(this,t,e,"clipPath","__clippath_in_use__")}function HA(t,e){LA.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function VA(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function GA(t){return parseInt(t,10)}function jA(t,e){return e&&t&&e.parentNode!==t}function WA(t,e,n){if(jA(t,e)&&n){var o=n.nextSibling;o?t.insertBefore(e,o):t.appendChild(e)}}function KA(t,e){if(jA(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function YA(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function XA(t){return t.__textSvgEl}function $A(t){return t.__svgEl}function zA(t,e,n,o){this.root=t,this.storage=e,this._opts=n=f({},n||{});var l=rA("svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("version","1.1"),l.setAttribute("baseProfile","full"),l.style.cssText="user-select:none;position:absolute;left:0;top:0;";var i=rA("g");l.appendChild(i);var a=rA("g");l.appendChild(a),this.gradientManager=new UA(o,a),this.clipPathManager=new FA(o,a),this.shadowManager=new HA(o,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=l,this._svgRoot=a,this._backgroundRoot=i,this._viewport=s,t.appendChild(s),s.appendChild(l),this.resize(n.width,n.height),this._visibleList=[]}LA.prototype.createElement=rA,LA.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var o=e.length-1;0<=o;--o)if(e[o]===t)return!0;return!1}),n):null:n[0]},LA.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var o=this.add(t);o&&(t[this._domName]=o)}}},LA.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},LA.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},LA.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return O(this._tagNames,function(n){var o=t.getElementsByTagName(n);e=e.concat([].slice.call(o))}),e},LA.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;O(t,function(t){t[e._markLabel]="0"})},LA.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},LA.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;O(e,function(e){"1"!==e[n._markLabel]&&t.removeChild(e)})}},LA.prototype.getSvgProxy=function(t){return t instanceof va?BA:t instanceof Jo?IA:t instanceof Ua?RA:BA},LA.prototype.getTextSvgElement=function(t){return t.__textSvgEl},LA.prototype.getSvgElement=function(t){return t.__svgEl},B(UA,LA),UA.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;O(["fill","stroke"],function(o){if(e.style[o]&&("linear"===e.style[o].type||"radial"===e.style[o].type)){var l,i=e.style[o],a=n.getDefs(!0);i._dom?(l=i._dom,a.contains(i._dom)||n.addDom(l)):l=n.add(i),n.markUsed(e);var s=l.getAttribute("id");t.setAttribute(o,"url(#"+s+")")}})}},UA.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return kn("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},UA.prototype.update=function(t){var e=this;LA.prototype.update.call(this,t,function(){var n=t.type,o=t._dom.tagName;"linear"===n&&"linearGradient"===o||"radial"===n&&"radialGradient"===o?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},UA.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return void kn("Illegal gradient type.");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,o=0,l=n.length;o<l;++o){var i=this.createElement("stop");i.setAttribute("offset",100*n[o].offset+"%");var a=n[o].color;if(-1<a.indexOf("rgba")){var s=Ve(a)[3],r=We(a);i.setAttribute("stop-color","#"+r),i.setAttribute("stop-opacity",s)}else i.setAttribute("stop-color",n[o].color);e.appendChild(i)}t._dom=e},UA.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&LA.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&LA.prototype.markUsed.call(this,e._dom)}},B(FA,LA),FA.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},FA.prototype.updateDom=function(t,e,n){if(e&&0<e.length){var o,l,i=this.getDefs(!0),a=e[0],s=n?"_textDom":"_dom";a[s]?(l=a[s].getAttribute("id"),o=a[s],i.contains(o)||i.appendChild(o)):(l="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(o=this.createElement("clipPath")).setAttribute("id",l),i.appendChild(o),a[s]=o);var r=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var c=Array.prototype.slice.call(a.transform);re(a.transform,a.parent.invTransform,a.transform),r.brush(a),a.transform=c}else r.brush(a);var u=this.getSvgElement(a);o.innerHTML="",o.appendChild(u.cloneNode()),t.setAttribute("clip-path","url(#"+l+")"),1<e.length&&this.updateDom(o,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},FA.prototype.markUsed=function(t){var e=this;t.__clipPaths&&O(t.__clipPaths,function(t){t._dom&&LA.prototype.markUsed.call(e,t._dom),t._textDom&&LA.prototype.markUsed.call(e,t._textDom)})},B(HA,LA),HA.prototype.addWithoutUpdate=function(t,e){if(e&&VA(e.style)){var n;e._shadowDom?(n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var o=n.getAttribute("id");t.style.filter="url(#"+o+")"}},HA.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},HA.prototype.update=function(t,e){if(VA(e.style)){var n=this;LA.prototype.update.call(this,e,function(){n.updateDom(e,e._shadowDom)})}else this.remove(t,e)},HA.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},HA.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var o,l,i,a,s=t.style,r=t.scale&&t.scale[0]||1,c=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)o=s.shadowOffsetX||0,l=s.shadowOffsetY||0,i=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);o=s.textShadowOffsetX||0,l=s.textShadowOffsetY||0,i=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",o/r),n.setAttribute("dy",l/c),n.setAttribute("flood-color",a);var u=i/2/r+" "+i/2/c;n.setAttribute("stdDeviation",u),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(i/2*200)+"%"),e.setAttribute("height",Math.ceil(i/2*200)+"%"),e.appendChild(n),t._shadowDom=e},HA.prototype.markUsed=function(t){t._shadowDom&&LA.prototype.markUsed.call(this,t._shadowDom)},zA.prototype={constructor:zA,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=rA("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0),e.style.fill=t,this._backgroundRoot.appendChild(e),this._backgroundNode=e},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,o=this._svgRoot,l=this._visibleList,i=t.length,a=[];for(e=0;e<i;e++){var s=t[e],r=(n=s)instanceof va?BA:n instanceof Jo?IA:n instanceof Ua?RA:BA,c=$A(s)||XA(s);s.invisible||(s.__dirty&&(r&&r.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(c,s)),s.__dirty=!1),a.push(s))}var u,_=function(t,e,n){return DA.diff(t,e,void 0)}(l,a);for(e=0;e<_.length;e++)if((y=_[e]).removed)for(var d=0;d<y.count;d++){c=$A(s=l[y.indices[d]]);var h=XA(s);YA(o,c),YA(o,h)}for(e=0;e<_.length;e++){var y;if((y=_[e]).added)for(d=0;d<y.count;d++)c=$A(s=a[y.indices[d]]),h=XA(s),u?WA(o,c,u):KA(o,c),c?WA(o,h,c):u?WA(o,h,u):KA(o,h),WA(o,h,c),u=h||c||u,this.gradientManager.addWithoutUpdate(c||h,s),this.shadowManager.addWithoutUpdate(c||h,s),this.clipPathManager.markUsed(s);else if(!y.removed)for(d=0;d<y.count;d++)c=$A(s=a[y.indices[d]]),h=XA(s),c=$A(s),h=XA(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(c||h,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(c||h,s),this.clipPathManager.markUsed(s),h&&WA(o,h,c),u=c||h||u}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e,n=this._svgDom;return 0!==(e=n.getElementsByTagName("defs")).length?e[0]:t?((e=n.insertBefore(rA("defs"),n.firstChild)).contains||(e.contains=function(t){var n=e.children;if(!n)return!1;for(var o=n.length-1;0<=o;--o)if(n[o]===t)return!0;return!1}),e):null},resize:function(t,e){var n=this._viewport;n.style.display="none";var o=this._opts;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var l=n.style;l.width=t+"px",l.height=e+"px";var i=this._svgDom;i.setAttribute("width",t),i.setAttribute("height",e)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],o=["clientWidth","clientHeight"][t],l=["paddingLeft","paddingTop"][t],i=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[o]||GA(s[n])||GA(a.style[n]))-(GA(s[l])||0)-(GA(s[i])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},O(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(t){zA.prototype[t]=function(t){return function(){kn('In SVG mode painter not support method "'+t+'"')}}(t)}),Cl("svg",zA),t.version="4.9.0",t.dependencies={zrender:"4.3.2"},t.PRIORITY=Ed,t.init=function(t,e,n){var o=rh(t);if(o)return o;var l=new Nd(t,e,n);return l.id="ec_"+oh++,eh[l.id]=l,$l(t,ih,l.id),function(t){var e="__connectUpdateStatus";function n(t,n){for(var o=0;o<t.length;o++)t[o][e]=n}fd($d,function(o,l){t._messageCenter.on(l,function(o){if(nh[t.group]&&0!==t[e]){if(o&&o.escapeConnect)return;var l=t.makeActionFromEvent(o),i=[];fd(eh,function(e){e!==t&&e.group===t.group&&i.push(e)}),n(i,0),fd(i,function(t){1!==t[e]&&t.dispatchAction(l)}),n(i,2)}})})}(l),l},t.connect=function(t){if(P(t)){var e=t;t=null,fd(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+lh++,fd(e,function(e){e.group=t})}return nh[t]=!0,t},t.disConnect=ah,t.disconnect=sh,t.dispose=function(t){"string"==typeof t?t=eh[t]:t instanceof Nd||(t=rh(t)),t instanceof Nd&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=rh,t.getInstanceById=function(t){return eh[t]},t.registerTheme=ch,t.registerPreprocessor=uh,t.registerProcessor=_h,t.registerPostUpdate=function(t){Jd.push(t)},t.registerAction=dh,t.registerCoordinateSystem=hh,t.getCoordinateSystemDimensions=function(t){var e=nu.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},t.registerLayout=yh,t.registerVisual=ph,t.registerLoading=kh,t.extendComponentModel=gh,t.extendComponentView=fh,t.extendSeriesModel=bh,t.extendChartView=vh,t.setCanvasCreator=function(t){p("createCanvas",t)},t.registerMap=function(t,e,n){pd(t,e,n)},t.getMap=function(t){var e=md(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},t.dataTool={},t.zrender=wl,t.number=Kr,t.format=rc,t.throttle=E_,t.helper=yp,t.matrix=ye,t.vector=It,t.color=Ze,t.parseGeoJSON=fp,t.parseGeoJson=wp,t.util=Ap,t.graphic=Mp,t.List=Fh,t.Model=vr,t.Axis=Cp,t.env=l});
{"version":3,"sources":["constants/index.js","actions/global.action.js","reducers/global.js","actions/modal.action.js","reducers/modal.js","actions/burn.action.js","reducers/burn.js","actions/stdout.action.js","reducers/stdout.js","actions/firmware.action.js","reducers/firmware.js","reducers/index.js","ipc/events.js","components/PreferencePanel/PreferencePanel.js","components/PreferencePanel/index.js","containers/TopBar/TopBar.js","containers/TopBar/index.js","components/HeaderFormItem/HeaderFormSelector.js","components/SerialLog/SerialLog.js","components/SerialLog/index.js","components/HeaderForm/HeaderForm.js","components/HeaderForm/index.js","containers/Header/Header.js","containers/Header/index.js","components/DeviceList/DeviceList.js","components/DeviceList/index.js","components/Searchbox/Searchbox.js","components/Searchbox/index.js","components/FirmwareItem/FirmwareItem.js","components/FirmwareItem/index.js","components/FirmwareList/FirmwareList.js","components/FirmwareList/index.js","components/Loading/Loading.js","containers/Firmware/Firmware.js","containers/DynamicModal/DynamicModal.js","App.js","index.js"],"names":["Theme","AnimationState","DownloadStatus","BaudrateOptions","GlobalActionTypes","setTheme","payload","type","setBurnParams","initialState","theme","language","burnParams","flashMode","flashFrequency","flashSize","version","lastest","ModalActionTypes","openModal","setAnimation","visiable","component","animation","BurnActionTypes","setBaudrate","com","baudrate","StdoutActionTypes","startStdout","appendStdout","message","FirmwareActionTypes","list","core","stickc","atom","raw","selected","keyword","reducers","combineReducers","global","state","action","modal","burn","stdout","firmware","newList","JSON","parse","stringify","newState","forEach","name","item","versions","find","v","downloadStatus","progress","exist","currentList","device","filter","f","toUpperCase","includes","store","createStore","ipcRenderer","window","require","CommandTypes","sendCommand","cmd","args","callback","eventName","eventNames","on","ev","data","send","sendCommandOnce","once","sendCommandWithCustom","sub","PreferencePanel","connect","config","props","onClose","onChange","onUpdate","panelRef","useRef","useEffect","timer","setTimeout","current","classList","add","remove","clearTimeout","hidePanelHandler","changeBurnParams","key","value","className","onClick","ref","stopPropagation","target","TopBar","maximize","bind","minimize","quit","update","openPreferencePanel","changeSelectorHandler","this","closePanelHandler","hideModal","swal","title","text","icon","buttons","confirm","closeModal","cancel","visible","closeOnClickOutside","closeOnEsc","then","result","getState","actions","stopLoading","close","document","getElementsByClassName","style","display","innerText","src","React","Component","dispatch","_","HeaderFormSelector","field","options","cs","map","opt","SerialLog","logRef","scrollTo","scrollHeight","footer","HeaderForm","coms","ssid","localStorage","getItem","password","changeCOMHandler","changeBaudrateHandler","refreshCOMs","erase","watchCOM","updateSSID","updatePassword","_getPorts","setState","port","path","length","setCOM","preventDefault","closeModalHandler","footerButtons","startStdoutMessage","appendStdoutMessage","_this","sendHandler","content","getElementById","id","onKeyPress","charCode","ctrlKey","setItem","Header","DeviceList","setSelected","light","dark","alt","draggable","Searchbox","placeholder","FirmwareItem","selectedType","downloadHanlder","removeHandler","sort","a","b","Date","publishAt","useState","selectedVersion","setSelectedVersion","selectRef","index","findIndex","versionSelector","publisher","description","off","listeners","getTokenHandler","undefined","burnHandler","styles","width","downloadButton","FirmwareList","firmwareList","Loading","Firmware","loading","removeHanlder","_updateFirmwares","setCurrentDevice","inputChangeHandler","_getFirmwares","getFirmwares","updateFirmwares","ok","r","callbackSubscribe","updateFirmwareDownloadStatus","setSelectedDeviceType","searchFirmware","firmwares","updateDownloadStatus","DynamicModal","beforeCloseModal","newProps","params","setVersion","setLastestVersion","console","log","Root","ReactDOM","render"],"mappings":"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","file":"static/js/main.1cabeb61.chunk.js","sourcesContent":["export const Theme = {\r\n    Light: 'light',\r\n    Dark: 'dark'\r\n}\r\n\r\nexport const Language = {\r\n    en: 'en',\r\n    cn: 'zh-cn'\r\n}\r\n\r\nexport const AnimationState = {\r\n    NONE: '',\r\n    FADE_IN: 'fade-in',\r\n    FADE_OUT: 'fade-out'\r\n}\r\n\r\nexport const DownloadStatus = {\r\n    WAITING: 'waiting',\r\n    DOWNLOADING: 'downloading',\r\n    END: 'end',\r\n    ERROR: 'error'\r\n}\r\n\r\nexport const BaudrateOptions = [\r\n    '1500000', '921600', '750000', '512000', '256000', '230400', '115200'\r\n];","export const GlobalActionTypes = {\r\n    SET_THEME: 'SET_THEME',\r\n    SET_LANGUAGE: 'SET_LANGUAGE',\r\n    SET_BURN_PARAMS: 'SET_BURN_PARAMS',\r\n    SET_VERSION: 'SET_VERSION',\r\n    SET_LASTEST_VERSION: 'SET_LASTEST_VERSION'\r\n}\r\n\r\nexport function setTheme(payload) {\r\n    return {\r\n        type: GlobalActionTypes.SET_THEME,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function setLanguage(payload) {\r\n    return {\r\n        type: GlobalActionTypes.SET_LANGUAGE,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function setBurnParams(payload) {\r\n    return {\r\n        type: GlobalActionTypes.SET_BURN_PARAMS,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function setVersion(payload) {\r\n    return {\r\n        type: GlobalActionTypes.SET_VERSION,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function setLastestVersion(payload) {\r\n    return {\r\n        type: GlobalActionTypes.SET_LASTEST_VERSION,\r\n        payload\r\n    }\r\n}","import { Theme, Language } from '../constants';\r\nimport { GlobalActionTypes } from '../actions/global.action';\r\n\r\nconst initialState = {\r\n    theme: Theme.Light,\r\n    language: Language.en,\r\n    burnParams: {\r\n        flashMode: 'dio',\r\n        flashFrequency: '80m',\r\n        flashSize: 'detect'\r\n    },\r\n    version: '',\r\n    lastest: ''\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case GlobalActionTypes.SET_THEME:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n\r\n        case GlobalActionTypes.SET_LANGUAGE:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n\r\n        case GlobalActionTypes.SET_BURN_PARAMS:\r\n            return {\r\n                ...state,\r\n                burnParams: {\r\n                    ...state.burnParams,\r\n                    ...action.payload\r\n                }\r\n            };\r\n        case GlobalActionTypes.SET_VERSION:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case GlobalActionTypes.SET_LASTEST_VERSION:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","export const ModalActionTypes = {\r\n    OPEN_MODAL: 'OPEN_MODAL',\r\n    CLOSE_MODAL: 'CLOSE_MODAL',\r\n    SET_ANIMATION: 'SET_ANIMATION_STATE'\r\n}\r\n\r\nexport function openModal(payload) {\r\n    return {\r\n        type: ModalActionTypes.OPEN_MODAL,\r\n        ...payload\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    return {\r\n        type: ModalActionTypes.CLOSE_MODAL\r\n    }\r\n}\r\n\r\nexport function setAnimation(payload) {\r\n    return {\r\n        type: ModalActionTypes.SET_ANIMATION,\r\n        ...payload\r\n    }\r\n}","import { ModalActionTypes } from \"../actions/modal.action\";\r\n\r\nconst initialState = {\r\n    visiable: false,\r\n    component: null,\r\n    animation: ''\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case ModalActionTypes.OPEN_MODAL:\r\n            return {\r\n                ...state,\r\n                visiable: true,\r\n                component: action.component\r\n            }\r\n\r\n        case ModalActionTypes.CLOSE_MODAL:\r\n            return {\r\n                ...state,\r\n                visiable: false,\r\n                component: null\r\n            }\r\n            \r\n        case ModalActionTypes.SET_ANIMATION:\r\n            return {\r\n                ...state,\r\n                animation: action.animation\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","export const BurnActionTypes = {\r\n    SET_COM: 'SET_COM',\r\n    SET_BAUDRATE: 'SET_BAUDRATE'\r\n}\r\n\r\nexport function setCOM(payload) {\r\n    return {\r\n        type: BurnActionTypes.SET_COM,\r\n        ...payload\r\n    }\r\n}\r\n\r\nexport function setBaudrate(payload) {\r\n    return {\r\n        type: BurnActionTypes.SET_BAUDRATE,\r\n        ...payload\r\n    }\r\n}\r\n","import { BurnActionTypes } from '../actions/burn.action';\r\n\r\nconst initialState = {\r\n    com: '',\r\n    baudrate: '1500000'\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case BurnActionTypes.SET_COM:\r\n            return {\r\n                ...state,\r\n                com: action.com\r\n            }\r\n\r\n        case BurnActionTypes.SET_BAUDRATE:\r\n            return {\r\n                ...state,\r\n                baudrate: action.baudrate\r\n            }\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}","export const StdoutActionTypes = {\r\n    START_STDOUT: 'START_STDOUT',\r\n    APPEND_STDOUT: 'APPEND_STDOUT'\r\n}\r\n\r\nexport function startStdout(payload) {\r\n    return {\r\n        type: StdoutActionTypes.START_STDOUT,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function appendStdout(payload) {\r\n    return {\r\n        type: StdoutActionTypes.APPEND_STDOUT,\r\n        payload\r\n    }\r\n}","import { StdoutActionTypes } from \"../actions/stdout.action\";\r\n\r\nconst initialState = {\r\n    message: ''\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case StdoutActionTypes.START_STDOUT:\r\n            return {\r\n                message: action.payload.message\r\n            }\r\n        case StdoutActionTypes.APPEND_STDOUT:\r\n            return {\r\n                message: state.message + action.payload.message\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","export const FirmwareActionTypes = {\r\n    GET_FIRMWARE: 'GET_FIRMWARE',\r\n    UPDATE_FIRMWARES: 'UPDATE_FIRMWARES',\r\n    SELECT_FIRMWARE_TYPE: 'SELECT_FIRMWARE_TYPE',\r\n    UPDATE_DOWNLOAD_STATUS: 'UPDATE_DOWNLOAD_STATUS',\r\n    SEARCH_FIRMWARE: 'SEARCH_FIRMWARE'\r\n}\r\n\r\nexport function getFirmware(payload) {\r\n    return {\r\n        type: FirmwareActionTypes.GET_FIRMWARE,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function updateFirmwares(payload) {\r\n    return {\r\n        type: FirmwareActionTypes.UPDATE_FIRMWARES,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function selectDeviceType(payload) {\r\n    return {\r\n        type: FirmwareActionTypes.SELECT_FIRMWARE_TYPE,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function updateDownloadStatus(payload) {\r\n    return {\r\n        type: FirmwareActionTypes.UPDATE_DOWNLOAD_STATUS,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function searchFirmware(payload) {\r\n    return {\r\n        type: FirmwareActionTypes.SEARCH_FIRMWARE,\r\n        payload\r\n    }\r\n}","import { FirmwareActionTypes } from \"../actions/firmware.action\";\r\nimport { DownloadStatus } from \"../constants\";\r\n\r\nconst initialState = {\r\n    list: {\r\n        core: [],\r\n        stickc: [],\r\n        atom: []\r\n    },\r\n    raw: {\r\n        core: [],\r\n        stickc: [],\r\n        atom: []\r\n    },\r\n    selected: 'core',\r\n    keyword: ''\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case FirmwareActionTypes.GET_FIRMWARE:\r\n            return {\r\n                ...state,\r\n                list: action.payload,\r\n                raw: action.payload\r\n            }\r\n        case FirmwareActionTypes.UPDATE_FIRMWARES:\r\n            var newList = JSON.parse(JSON.stringify(action.payload));\r\n            return {\r\n                ...state,\r\n                list: newList\r\n            }\r\n        case FirmwareActionTypes.SELECT_FIRMWARE_TYPE:\r\n            return {\r\n                ...state,\r\n                selected: action.payload\r\n            }\r\n        case FirmwareActionTypes.UPDATE_DOWNLOAD_STATUS:\r\n            var newState = JSON.parse(JSON.stringify(state));\r\n            var newList = newState.list[action.payload.type];\r\n            newList.forEach(firmware => {\r\n                if(firmware.name === action.payload.name) {\r\n                    var item = firmware.versions.find(v => v.version === action.payload.version);\r\n                    item.downloadStatus = action.payload.downloadStatus;\r\n                    item.progress = action.payload.progress;\r\n                    if(action.payload.downloadStatus === DownloadStatus.END) {\r\n                        item.exist = true;\r\n                    }\r\n                }\r\n            });\r\n            return {\r\n                ...state,\r\n                ...newState\r\n            }\r\n        case FirmwareActionTypes.SEARCH_FIRMWARE:\r\n            var newState = JSON.parse(JSON.stringify(state));\r\n            if(action.payload === '') {\r\n                return {\r\n                    ...newState,\r\n                    list: newState.raw\r\n                }\r\n            }\r\n            let currentList = {}\r\n            for(let device in newState.list) {\r\n                currentList[device] = newState.raw[device].filter(f => f.name.toUpperCase().includes(action.payload.toUpperCase()));\r\n            }\r\n            return {\r\n                ...newState,\r\n                list: currentList\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { createStore, combineReducers } from 'redux';\r\nimport Global from './global';\r\nimport Modal from './modal';\r\nimport Burn from './burn';\r\nimport Stdout from './stdout';\r\nimport Firmware from './firmware';\r\n\r\nconst reducers = combineReducers({\r\n    global: Global,\r\n    modal: Modal,\r\n    burn: Burn,\r\n    stdout: Stdout,\r\n    firmware: Firmware\r\n});\r\n\r\nexport const store = createStore(reducers);","const electron = window.require('electron');\r\nconst { ipcRenderer } = electron;\r\n\r\nexport const CommandTypes = {\r\n    minimize: 'Minimize',\r\n    maximize: 'Maximize',\r\n    quit: 'Quit',\r\n    getPorts: 'GetPorts',\r\n    erase: 'Erase',\r\n    burn: 'Burn',\r\n    cancelBurn: 'CancelBurn',\r\n    saveConfig: 'SaveConfig',\r\n    loadConfig: 'loadConfig',\r\n    loadAllConfig: 'LoadAllConfig',\r\n    watchCOM: 'WatchCOM',\r\n    closeCOM: 'CloseCOM',\r\n    getFirmwares: 'GetFirmwares',\r\n    downloadFirmware: 'DownloadFirmware',\r\n    removeFirmware: 'RemoveFirmware',\r\n    writeCOM: 'WriteCOM',\r\n    update: 'Update',\r\n    getSttToken: 'GetSttToken'\r\n}\r\n\r\n/**\r\n * Send command with a callback event\r\n * @param {CommandTypes} cmd Command\r\n * @param {*} args Arguments\r\n * @param {Function} callback Callback event\r\n */\r\nexport const sendCommand = (cmd, args, callback) => {\r\n    let eventName = `${cmd}Callback`;\r\n    if(!ipcRenderer.eventNames().includes(eventName)) {\r\n        ipcRenderer.on(eventName, (ev, data) => {\r\n            if(callback) {\r\n                callback(data);\r\n            }\r\n        });\r\n    }\r\n    ipcRenderer.send(cmd, args);\r\n}\r\n\r\nexport const sendCommandOnce = (cmd, args, callback) => {\r\n    let eventName = `${cmd}Callback`;\r\n    if(!ipcRenderer.eventNames().includes(eventName)) {\r\n        ipcRenderer.once(eventName, (ev, data) => {\r\n            if(callback) {\r\n                callback(data);\r\n            }\r\n        });\r\n    }\r\n    ipcRenderer.send(cmd, args);\r\n}\r\n\r\nexport const sendCommandWithCustom = (sub, cmd, args, callback) => {\r\n    let eventName = `${cmd}Callback-${sub}`;\r\n    if(!ipcRenderer.eventNames().includes(eventName)) {\r\n        ipcRenderer.on(eventName, (ev, data) => {\r\n            if(callback) {\r\n                callback(data);\r\n            }\r\n        });\r\n    }\r\n    ipcRenderer.send(cmd, args);\r\n}\r\n\r\n/**\r\n * Send command sync handler\r\n * @param {CommandTypes} cmd Command\r\n * @param {*} args Arguments\r\n * @param {Function} callback Callback event\r\n */\r\nexport const sendCommandSync = (cmd, args, callback) => {\r\n    let response = ipcRenderer.sendSync(cmd, args);\r\n    if(callback) {\r\n        callback(response);\r\n    }\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Theme } from '../../constants';\r\n\r\nimport './PreferencePanel.scss';\r\n\r\nfunction PreferencePanel(props) {\r\n    const { onClose, config, onChange, onUpdate } = props;\r\n    const panelRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            panelRef.current.classList.add('slide-in');\r\n        });\r\n        return () => {\r\n            panelRef.current.classList.remove('slide-in');\r\n            panelRef.current.classList.add('slide-out');\r\n            clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    const hidePanelHandler = () => {\r\n        panelRef.current.classList.remove('slide-in');\r\n        panelRef.current.classList.add('slide-out');\r\n        setTimeout(() => {\r\n            onClose();\r\n        }, 250);\r\n    }\r\n\r\n    const changeTheme = ev => {\r\n        onChange('theme', ev.target.value);\r\n    }\r\n\r\n    const changeBurnParams = (key, value) => {\r\n        onChange(key, value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper-panel-preference\" onClick={hidePanelHandler}>\r\n            <div className=\"panel-preference\" ref={panelRef} onClick={ev => ev.stopPropagation()}>\r\n                <h2>Preference</h2>\r\n                <form className=\"form-preference\">\r\n                    <h3>General</h3>\r\n                    <div className=\"form-item\">\r\n                        <label>Theme</label>\r\n                        <select value={config.theme} onChange={changeTheme}>\r\n                            <option value={Theme.Light}>Light</option>\r\n                            <option value={Theme.Dark}>Dark</option>\r\n                        </select>\r\n                    </div>\r\n                    <h3>Advanced</h3>\r\n                    <div className=\"form-item\">\r\n                        <label>Flash Frequency</label>\r\n                        <select\r\n                            value={config.burnParams.flashFrequency}\r\n                            onChange={ev => changeBurnParams('flashFrequency', ev.target.value)}\r\n                        >\r\n                            <option value=\"80m\">80m</option>\r\n                            <option value=\"40m\">40m</option>\r\n                            <option value=\"26m\">26m</option>\r\n                            <option value=\"20m\">20m</option>\r\n                            <option value=\"keep\">Keep</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"form-item\">\r\n                        <label>Flash Size</label>\r\n                        <select\r\n                            value={config.burnParams.flashSize}\r\n                            onChange={ev => changeBurnParams('flashSize', ev.target.value)}\r\n                        >\r\n                            <option value=\"detect\">Detect</option>\r\n                            <option value=\"16mb\">16MB</option>\r\n                            <option value=\"4mb\">4MB</option>\r\n                            <option value=\"2mb\">2MB</option>\r\n                            <option value=\"1mb\">1MB</option>\r\n                        </select>\r\n                    </div>\r\n                    <h3>Version</h3>\r\n                    <div className=\"form-item\">\r\n                        <label>Current: {config.version}</label>\r\n                    </div>\r\n                    <div className=\"form-item\">\r\n                        <label>Lastest: {config.lastest}</label>\r\n                        {\r\n                            config.lastest > config.version ?\r\n                            <a className=\"btn-update\" onClick={onUpdate}>Update</a>:\r\n                            null\r\n                        }\r\n                        \r\n                    </div>\r\n                </form>\r\n                <footer>\r\n                    <button className=\"btn cancel\" onClick={hidePanelHandler}>Back</button>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        config: state.global\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {})(PreferencePanel);","import PreferencePanel from './PreferencePanel';\r\n\r\nexport default PreferencePanel;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AnimationState } from '../../constants';\r\nimport { CommandTypes, sendCommand } from '../../ipc/events';\r\nimport { openModal, setAnimation } from '../../actions/modal.action';\r\nimport { setTheme, setBurnParams } from '../../actions/global.action';\r\nimport PreferencePanel from '../../components/PreferencePanel';\r\n\r\nimport './TopBar.scss';\r\n\r\nclass TopBar extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.maximize = this.maximize.bind(this);\r\n        this.minimize = this.minimize.bind(this);\r\n        this.quit = this.quit.bind(this);\r\n        this.update = this.update.bind(this);\r\n        this.openPreferencePanel = this.openPreferencePanel.bind(this);\r\n        this.changeSelectorHandler = this.changeSelectorHandler.bind(this);\r\n    }\r\n\r\n    openPreferencePanel() {\r\n        if(!this.props.modal.visiable) {\r\n            const closePanelHandler = this.props.hideModal;\r\n            this.props.openModal(\r\n                <PreferencePanel\r\n                    onChange={this.changeSelectorHandler}\r\n                    onClose={closePanelHandler}\r\n                    onUpdate={this.update}\r\n                />\r\n            );\r\n        }\r\n    }\r\n\r\n    changeSelectorHandler(key, value) {\r\n        if(key === 'theme') {\r\n            this.props.setTheme(value);\r\n            sendCommand(CommandTypes.saveConfig, { key, value });\r\n        } else {\r\n            this.props.setBurnParams(key, value);\r\n            sendCommand(CommandTypes.saveConfig, { key: 'burnParams', value: { [key]: value } });\r\n        }\r\n    }\r\n\r\n    maximize() {\r\n        sendCommand(CommandTypes.maximize, null, null);\r\n    }\r\n\r\n    minimize() {\r\n        sendCommand(CommandTypes.minimize, null, null);\r\n    }\r\n\r\n    quit() {\r\n        sendCommand(CommandTypes.quit, null, null);\r\n    }\r\n\r\n    update() {\r\n        window.swal({\r\n            title: 'Tips',\r\n            text: 'Do you sure to update?',\r\n            icon: 'warning',\r\n            buttons: {\r\n                confirm: {\r\n                    text: 'Yes',\r\n                    closeModal: false,\r\n                    value: true\r\n                },\r\n                cancel: {\r\n                    text: 'No',\r\n                    closeModal: false,\r\n                    value: false,\r\n                    visible: true\r\n                }\r\n            },\r\n            closeOnClickOutside: false,\r\n            closeOnEsc: false\r\n        })\r\n        .then(result => {\r\n            if(!result) {\r\n                window.swal.getState().actions.cancel.closeModal = true;\r\n                window.swal.stopLoading();\r\n                window.swal.close();\r\n                return;\r\n            }\r\n            let title = document.getElementsByClassName('swal-title')[0];\r\n            title.style.display = 'none';\r\n            sendCommand(CommandTypes.update, { lastest: this.props.global.lastest }, data => {\r\n                let text = document.getElementsByClassName('swal-text')[0];\r\n                if(data === false) {\r\n                    text.innerText = 'Download update failed.';\r\n                    window.swal.getState().actions.confirm.closeModal = true;\r\n                    window.swal.getState().actions.cancel.closeModal = true;\r\n                    window.swal.stopLoading();\r\n                    return;\r\n                }\r\n                if(data === true) {\r\n                    text.innerText = 'Update successfully. Restart takes effect';\r\n                    window.swal.getState().actions.confirm.closeModal = true;\r\n                    window.swal.getState().actions.cancel.closeModal = true;\r\n                    window.swal.stopLoading();\r\n                    return;\r\n                }\r\n                text.innerText = `Update ... (${data * 100}%)`;\r\n            });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-top-bar\">\r\n                <div className=\"logo\">\r\n                    <img className=\"topbar-logo\" src=\"assets/images/logo.png\" />\r\n                    <span>M5Burner-Beta</span>\r\n                </div>\r\n                <div className=\"control-box\">\r\n                    <button className=\"btn-control btn-setting\" onClick={this.openPreferencePanel}>\r\n                        <i className=\"iconfont icon-setting\"></i>\r\n                    </button>\r\n                    <button className=\"btn-control btn-min\" onClick={this.minimize}>\r\n                        <i className=\"iconfont icon-zuixiaohua\"></i>\r\n                    </button>\r\n                    <button className=\"btn-control btn-max\" onClick={this.maximize}>\r\n                        <i className=\"iconfont icon-zuidahua\"></i>\r\n                    </button>\r\n                    <button className=\"btn-control btn-close\" onClick={this.quit}>\r\n                        <i className=\"iconfont icon-guanbi\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modal,\r\n        global: state.global\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        openModal: component => dispatch(openModal({ component })),\r\n        hideModal: _ => dispatch(setAnimation({animation: AnimationState.FADE_OUT})),\r\n        setTheme: theme => dispatch(setTheme({ theme })),\r\n        setBurnParams: (key, value) => dispatch(setBurnParams({[key]: value}))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopBar);","import Component from './TopBar';\r\n\r\nexport default Component;","import React from 'react';\r\nimport cs from 'classnames';\r\n\r\nfunction HeaderFormSelector(props) {\r\n    let { icon, field, value, options, onChange, onClick } = props;\r\n    return (\r\n        <li className=\"header-form-item\">\r\n            <i className={cs('iconfont', icon)}></i>\r\n            <span>{field}:</span>\r\n            <select value={value} onChange={onChange} onClick={onClick}>\r\n                {\r\n                    options.map(opt => {\r\n                        return (<option key={opt} value={opt}>{opt}</option>)\r\n                    })\r\n                }\r\n            </select>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default HeaderFormSelector;","import React, { useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './SerialLog.scss';\r\n\r\nfunction SerialLog(props) {\r\n    const logRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        logRef.current.scrollTo(0, logRef.current.scrollHeight);\r\n    }, [props.stdout.message]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"wrapper-serial-log\" ref={logRef}>\r\n                <pre>{props.stdout.message}</pre>\r\n            </div>\r\n            { props.footer }\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stdout: state.stdout\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SerialLog);","import SerialLog from './SerialLog';\r\n\r\nexport default SerialLog;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { sendCommand, CommandTypes } from '../../ipc/events';\r\nimport { AnimationState, BaudrateOptions } from '../../constants';\r\nimport { HeaderFormSelector } from '../HeaderFormItem';\r\nimport SerialLog from '../SerialLog';\r\nimport { openModal, setAnimation } from '../../actions/modal.action';\r\nimport { setBaudrate, setCOM } from '../../actions/burn.action';\r\nimport { startStdout, appendStdout } from '../../actions/stdout.action';\r\n\r\nimport './HeaderForm.scss';\r\n\r\nconst electron = window.require('electron');\r\nconst { ipcRenderer } = electron;\r\n\r\nclass HeaderForm extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            coms: [],\r\n            ssid: localStorage.getItem('ssid') || '',\r\n            password: localStorage.getItem('password') || ''\r\n        }\r\n\r\n        this.changeCOMHandler = this.changeCOMHandler.bind(this);\r\n        this.changeBaudrateHandler = this.changeBaudrateHandler.bind(this);\r\n        this.refreshCOMs = this.refreshCOMs.bind(this);\r\n        this.erase = this.erase.bind(this);\r\n        this.watchCOM = this.watchCOM.bind(this);\r\n        this.updateSSID = this.updateSSID.bind(this);\r\n        this.updatePassword = this.updatePassword.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n        this._getPorts();\r\n    }\r\n\r\n    _getPorts() {\r\n        sendCommand(CommandTypes.getPorts, null, data => {\r\n            this.setState({\r\n                coms: data.map(port => port.path)\r\n            }, () => {\r\n                if(data.length > 0 && this.props.com === '') {\r\n                    this.props.setCOM(this.state.coms[0]);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    refreshCOMs() {\r\n        this._getPorts();\r\n    }\r\n\r\n    changeCOMHandler(ev) {\r\n        this.props.setCOM(ev.target.value);\r\n    }\r\n\r\n    changeBaudrateHandler(ev) {\r\n        this.props.setBaudrate(ev.target.value);\r\n        sendCommand(CommandTypes.saveConfig, { key: 'baudrate', value: ev.target.value });\r\n    }\r\n\r\n    erase(ev) {\r\n        ev.preventDefault();\r\n\r\n        let closeModalHandler = this.props.closeModal;\r\n        const footerButtons = (function() {\r\n            return(\r\n                <>\r\n                    <div className=\"footer-btn\">\r\n                        <button onClick={closeModalHandler}>Close</button>\r\n                    </div>\r\n                </>\r\n            )\r\n        })();\r\n\r\n        this.props.openModal(\r\n            <SerialLog footer={footerButtons}/>\r\n        );\r\n\r\n        this.props.startStdoutMessage('=================\\nErase now\\n=================\\n');\r\n        sendCommand(CommandTypes.erase, { com: this.props.com }, data => {\r\n            this.props.appendStdoutMessage(data);\r\n        });\r\n    }\r\n\r\n    watchCOM(ev) {\r\n        ev.preventDefault();\r\n\r\n        let _this = this;\r\n        let closeModalHandler = this.props.closeModal;\r\n        const footerButtons = (function() {\r\n\r\n            const sendHandler = () => {\r\n                let content = document.getElementById('_sendbox').value;\r\n                sendCommand(CommandTypes.writeCOM, {\r\n                    com: _this.props.com,\r\n                    data: content\r\n                }, null);\r\n            }\r\n\r\n            const keydownHandler = (ev) => {\r\n                if(ev.charCode === 13 && ev.ctrlKey) {\r\n                    sendHandler();\r\n                }\r\n            }\r\n\r\n            return(\r\n                <>\r\n                    <div className=\"footer-btn\">\r\n                        <textarea id=\"_sendbox\" className=\"sendbox\" type=\"text\" onKeyPress={keydownHandler}></textarea>\r\n                        <button className=\"send\" onClick={sendHandler}>Send</button>\r\n                        <button onClick={() => {\r\n                            if(ipcRenderer.eventNames().includes(`${CommandTypes.watchCOM}Callback`)) {\r\n                                sendCommand(CommandTypes.closeCOM, null);\r\n                            }\r\n                            closeModalHandler();\r\n                        }}>Close</button>\r\n                    </div>\r\n                </>\r\n            )\r\n        })();\r\n\r\n        this.props.openModal(<SerialLog footer={footerButtons} com={this.props.com} />);\r\n\r\n        this.props.startStdoutMessage(`=================\\n${this.props.com}\\n=================\\n`);\r\n        sendCommand(CommandTypes.watchCOM, { com: this.props.com }, data => {\r\n            this.props.appendStdoutMessage(data);\r\n        });\r\n    }\r\n\r\n    updateSSID(ev) {\r\n        this.setState({\r\n            ssid: ev.target.value\r\n        });\r\n        localStorage.setItem('ssid', ev.target.value);\r\n    }\r\n\r\n    updatePassword(ev) {\r\n        this.setState({\r\n            password: ev.target.value\r\n        });\r\n        localStorage.setItem('password', ev.target.value);\r\n    }\r\n\r\n    render() {\r\n        const { com, baudrate } = this.props;\r\n        \r\n        return (\r\n            <form className=\"header-form\">\r\n                <HeaderFormSelector\r\n                    icon='icon-usb'\r\n                    field='COM'\r\n                    value={com}\r\n                    options={this.state.coms}\r\n                    onChange={this.changeCOMHandler}\r\n                    onClick={this.refreshCOMs}\r\n                />\r\n                <HeaderFormSelector\r\n                    icon=''\r\n                    field='Baudrate'\r\n                    value={baudrate}\r\n                    options={BaudrateOptions}\r\n                    onChange={this.changeBaudrateHandler}\r\n                />\r\n                <li className=\"header-form-item\">\r\n                    <span>SSID:</span>\r\n                    <input type=\"text\" value={this.state.ssid} onChange={this.updateSSID} />\r\n                </li>\r\n                <li className=\"header-form-item\">\r\n                    <span>Password:</span>\r\n                    <input type=\"text\" value={this.state.password} onChange={this.updatePassword} />\r\n                </li>\r\n                <button className=\"btn erase\" onClick={this.erase}>\r\n                    <i className=\"iconfont icon-erase\"></i>\r\n                    <span>Erase</span>\r\n                </button>\r\n                <button className=\"btn open\" onClick={this.watchCOM}>\r\n                    <i className=\"iconfont icon-usb\"></i>\r\n                    <span>COM Monitor</span>\r\n                </button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        com: state.burn.com,\r\n        baudrate: state.burn.baudrate\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        openModal: component => dispatch(openModal({component})),\r\n        closeModal: _ => dispatch(setAnimation({animation: AnimationState.FADE_OUT})),\r\n        setBaudrate: baudrate => dispatch(setBaudrate({baudrate})),\r\n        setCOM: com => dispatch(setCOM({com})),\r\n        startStdoutMessage: message => dispatch(startStdout({message})),\r\n        appendStdoutMessage: message => dispatch(appendStdout({message}))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderForm);","import HeaderForm from './HeaderForm';\r\n\r\nexport default HeaderForm;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport HeaderForm from '../../components/HeaderForm';\r\n\r\nimport './Header.scss';\r\n\r\nclass Header extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-header\">\r\n                <HeaderForm />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","import Component from './Header';\r\n\r\nexport default Component;","import React from 'react';\r\nimport cs from 'classnames';\r\n\r\nimport './DeviceList.scss';\r\n\r\nfunction DeviceList(props) {\r\n    const { selected, setSelected } = props;\r\n\r\n    const devices = [\r\n        {\r\n            name: 'core',\r\n            light: 'light-core.png',\r\n            dark: 'dark-core.png'\r\n        },\r\n        {\r\n            name: 'stickc',\r\n            light: 'light-stickc.png',\r\n            dark: 'dark-stickc.png'\r\n        },\r\n        {\r\n            name: 'atom',\r\n            light: 'light-atom.png',\r\n            dark: 'dark-atom.png'\r\n        }\r\n    ];\r\n\r\n    const list = devices.map(device => {\r\n        return (\r\n            <li\r\n                key={device.name}\r\n                className={cs('item-device', selected === device.name ? 'selected' : '')}\r\n                onClick={() => setSelected(device.name)}\r\n            >\r\n                <figure>\r\n                    <img className=\"avatar\" src={'./assets/images/' + device.light} alt={device.name} draggable=\"false\" />\r\n                    <figcaption>{ device.name.toUpperCase() }</figcaption>\r\n                </figure>\r\n            </li>\r\n        )\r\n    });\r\n    \r\n    return (\r\n        <ul className=\"list-device\">\r\n            { list }\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default DeviceList;","import DeviceList from './DeviceList';\r\n\r\nexport default DeviceList;","import React from 'react';\r\n\r\nimport './Searchbox.scss';\r\n\r\nfunction Searchbox(props) {\r\n    let { onChange } = props;\r\n    return (\r\n        <div className=\"search-box\">\r\n            <input placeholder=\"Search ... \" onChange={onChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Searchbox;","import Searchbox from './Searchbox';\r\n\r\nexport default Searchbox;","import React, { useState, useEffect, useRef } from 'react';\r\nimport cs from 'classnames';\r\nimport { connect } from 'react-redux';\r\nimport { CommandTypes, sendCommandWithCustom } from '../../ipc/events';\r\nimport { openModal, setAnimation } from '../../actions/modal.action';\r\nimport { startStdout, appendStdout } from '../../actions/stdout.action';\r\nimport SerialLog from '../SerialLog';\r\nimport { AnimationState, DownloadStatus } from '../../constants';\r\n\r\nimport './FirmwareItem.scss';\r\n\r\nconst electron = window.require('electron');\r\nconst { ipcRenderer } = electron;\r\n\r\nconst burnHandler = (props) => {\r\n    let closeModalHandler = props.closeModal;\r\n    let payload = {\r\n        com: props.com,\r\n        name: props.firmware.name,\r\n        version: props.version,\r\n        type: props.type\r\n    }\r\n\r\n    let ssid = localStorage.getItem('ssid');\r\n    let password = localStorage.getItem('password');\r\n    if(ssid != undefined && password != undefined && ssid != '' && password != '') {\r\n        payload.ssid = ssid;\r\n        payload.password = password;\r\n    }\r\n\r\n    const footerButtons = (function() {\r\n        return(\r\n            <>\r\n                <div className=\"footer-btn\">\r\n                    <button onClick={() => {\r\n                        let sub = `${CommandTypes.burn}Callback-${payload.com}`;\r\n                        if(ipcRenderer.eventNames().includes(sub)) {\r\n                            ipcRenderer.off(sub, ipcRenderer.listeners(sub)[0]);\r\n                        }\r\n                        closeModalHandler();\r\n                    }}>Close</button>\r\n                </div>\r\n            </>\r\n        )\r\n    })();\r\n\r\n    props.openModal(<SerialLog footer={footerButtons} com={payload.com} />);\r\n\r\n    props.startStdoutMessage(`=================\\nStart Burn\\n=================\\n`);\r\n    sendCommandWithCustom(payload.com, CommandTypes.burn, payload, data => {\r\n        props.appendStdoutMessage(data);\r\n    });\r\n}\r\n\r\nconst getTokenHandler = (props) => {\r\n    let closeModalHandler = props.closeModal;\r\n    let payload = {\r\n        com: props.com\r\n    }\r\n\r\n    const footerButtons = (function() {\r\n        return(\r\n            <>\r\n                <div className=\"footer-btn\">\r\n                    <button onClick={() => {\r\n                        let sub = `${CommandTypes.getSttToken}Callback-${payload.com}`;\r\n                        if(ipcRenderer.eventNames().includes(sub)) {\r\n                            ipcRenderer.off(sub, ipcRenderer.listeners(sub)[0]);\r\n                        }\r\n                        closeModalHandler();\r\n                    }}>Close</button>\r\n                </div>\r\n            </>\r\n        )\r\n    })();\r\n\r\n    props.openModal(<SerialLog footer={footerButtons} com={payload.com} />);\r\n\r\n    props.startStdoutMessage(`=================\\nGet Echo STT Token\\n=================\\n`);\r\n    sendCommandWithCustom(payload.com, CommandTypes.getSttToken, payload, data => {\r\n        props.appendStdoutMessage(data);\r\n    });\r\n}\r\n\r\nconst downloadButton = (props) => {\r\n    let { selectedVersion } = props;\r\n    if(!selectedVersion.downloadStatus) {\r\n        return (\r\n            <>\r\n                <i className=\"iconfont icon-clouddownload\"></i>\r\n                <span>Download</span>\r\n            </>\r\n        );\r\n    }\r\n    switch(selectedVersion.downloadStatus) {\r\n        case DownloadStatus.DOWNLOADING:\r\n            let styles = {\r\n                width: (115 * selectedVersion.progress) + 'px'\r\n            }\r\n            return (\r\n                <>\r\n                    <div className=\"progress\" style={styles}></div>\r\n                    <span>Downloading</span>\r\n                </>\r\n            );\r\n        case DownloadStatus.ERROR:\r\n            return (\r\n                <>\r\n                    <i className=\"iconfont icon-clouddownload\"></i>\r\n                    <span>Retry</span>\r\n                </>\r\n            );\r\n        default:\r\n            return (\r\n                <>\r\n                    <i className=\"iconfont icon-clouddownload\"></i>\r\n                    <span>Download</span>\r\n                </>\r\n            );\r\n    }\r\n}\r\n\r\nfunction FirmwareItem(props) {\r\n    let { firmware, downloadHanlder, removeHandler, device, selectedType } = props;\r\n    firmware.versions.sort((a, b) => Date.parse(new Date(b.publishAt)) - Date.parse(new Date(a.publishAt)));\r\n    let [selectedVersion, setSelectedVersion] = useState({});\r\n    let selectRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        let index = 0;\r\n        if(selectRef != null) {\r\n            index = firmware['versions'].findIndex(v => v.version === selectRef.current.value)\r\n        }\r\n        setSelectedVersion(firmware['versions'][index]);\r\n    }, [firmware, selectedVersion]);\r\n    \r\n    const versionSelector = firmware.versions\r\n                            .map(v => {\r\n                                return (<option key={v.version}>{v.version}</option>)\r\n                            });\r\n\r\n    const selectVersion = ev => {\r\n        setSelectedVersion(props.firmware.versions.find(v => v.version === ev.target.value));\r\n    }\r\n\r\n    const btnGetToken = () => {\r\n        if(firmware.name.toUpperCase() === 'ECHOSTT') {\r\n            return (\r\n                <button\r\n                        className=\"btn remove\"\r\n                        onClick={() => {\r\n                            getTokenHandler(props);\r\n                        }}\r\n                    >\r\n                        <div className=\"mask\"></div>\r\n                        <span>Get Token</span>\r\n                    </button>\r\n            )\r\n        }\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={cs('wrapper-item-firmware')}>\r\n            <article className=\"item\">\r\n                <h2>\r\n                    <span>{firmware.name}</span>\r\n                    {\r\n                        firmware.publisher === 'M5Stack' ?\r\n                        <span className=\"tag\">official</span> : null\r\n                    }\r\n                    <select className=\"selector-version\" onChange={selectVersion} ref={selectRef}>\r\n                        {versionSelector}\r\n                    </select>\r\n                </h2>\r\n                <p>{firmware.description}</p>\r\n                <div className=\"footer\">\r\n                    {/* <span className=\"more\">More</span> */}\r\n                    {\r\n                        selectedVersion['exist'] ?\r\n                        <>\r\n                            <button\r\n                                className=\"btn remove\"\r\n                                onClick={() => removeHandler({\r\n                                    name: firmware.name,\r\n                                    version: selectedVersion.version\r\n                                })}\r\n                            >\r\n                                <div className=\"mask\"></div>\r\n                                <i className=\"iconfont icon-delete\"></i>\r\n                                <span>Remove</span>\r\n                            </button>\r\n                            { btnGetToken() }\r\n                            <button\r\n                                className=\"btn burn\"\r\n                                onClick={() => burnHandler({\r\n                                    ...props,\r\n                                    version: selectedVersion.version,\r\n                                    type: device\r\n                                })}\r\n                            >\r\n                                <div className=\"mask\"></div>\r\n                                <i className=\"iconfont icon-hot-or-burn-interface-symbol\"></i>\r\n                                <span>Burn</span>\r\n                            </button>\r\n                        </>\r\n                        :\r\n                        <button\r\n                            className={cs('btn', 'download', selectedVersion.downloadStatus === DownloadStatus.DOWNLOADING ? 'downloading' : '')}\r\n                            onClick={() => downloadHanlder({\r\n                                name: firmware.name,\r\n                                version: selectedVersion.version,\r\n                                type: device\r\n                            })}\r\n                        >\r\n                            <div className=\"mask\"></div>\r\n                            {downloadButton({selectedVersion})}\r\n                        </button>\r\n                    }\r\n                </div>\r\n            </article>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        com: state.burn.com,\r\n        selectedType: state.firmware.selected\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        openModal: component => dispatch(openModal({component})),\r\n        closeModal: _ => dispatch(setAnimation({animation: AnimationState.FADE_OUT})),\r\n        startStdoutMessage: message => dispatch(startStdout({message})),\r\n        appendStdoutMessage: message => dispatch(appendStdout({message}))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FirmwareItem);","import FirmwareItem from './FirmwareItem';\r\n\r\nexport default FirmwareItem;\r\n","import React from 'react';\r\nimport FirmwareItem from '../FirmwareItem';\r\n\r\nimport './FirmwareList.scss';\r\n\r\nfunction FirmwareList(props) {\r\n    const { firmwareList,  downloadHanlder, removeHandler, device } = props;\r\n    const list = firmwareList.map((firmware, index) => {\r\n        return (\r\n            <FirmwareItem\r\n                key={index}\r\n                device={device}\r\n                firmware={firmware}\r\n                downloadHanlder={downloadHanlder}\r\n                removeHandler={removeHandler}\r\n            />\r\n        )\r\n    });\r\n    return (\r\n        <div className=\"list-firmware\">\r\n            { list }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FirmwareList;","import FirmwareList from './FirmwareList';\r\n\r\nexport default FirmwareList;","import React from 'react';\r\n\r\nimport './Loading.scss';\r\n\r\nexport default function Loading() {\r\n    return (\r\n        <div className=\"ball-pulse-sync\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport cs from 'classnames';\r\nimport { sendCommand, CommandTypes, sendCommandOnce } from '../../ipc/events';\r\nimport { getFirmware, selectDeviceType, updateDownloadStatus, updateFirmwares, searchFirmware } from '../../actions/firmware.action';\r\nimport DeviceList from '../../components/DeviceList';\r\nimport Searchbox from '../../components/Searchbox';\r\nimport FirmwareList from '../../components/FirmwareList';\r\nimport Loading from '../../components/Loading/Loading';\r\nimport { DownloadStatus } from '../../constants';\r\n\r\nimport './Firmware.scss';\r\nimport { setBaudrate } from '../../actions/burn.action';\r\n\r\nconst electron = window.require('electron');\r\nconst ipcRenderer = electron.ipcRenderer;\r\n\r\nclass Firmware extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loading: true\r\n        }\r\n\r\n        this.downloadHanlder = this.downloadHanlder.bind(this);\r\n        this.removeHanlder = this.removeHanlder.bind(this);\r\n        this._updateFirmwares = this._updateFirmwares.bind(this);\r\n        this.setCurrentDevice = this.setCurrentDevice.bind(this);\r\n        this.inputChangeHandler = this.inputChangeHandler.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n        this._getFirmwares();\r\n    }\r\n\r\n    _getFirmwares() {\r\n        this.setState({\r\n            loading: true\r\n        });\r\n        sendCommandOnce(CommandTypes.getFirmwares, null, data => {\r\n            this.setState({\r\n                loading: false\r\n            });\r\n            if(data === null) return;\r\n            this.props.getFirmwares(data);\r\n        });\r\n    }\r\n\r\n    _updateFirmwares() {\r\n        sendCommandOnce(CommandTypes.getFirmwares, null, data => {\r\n            if(data === null) return;\r\n            this.props.updateFirmwares(data);\r\n        });\r\n    }\r\n\r\n    removeHanlder(payload) {\r\n        let _updateFirmwares = this._updateFirmwares;\r\n        window.swal({\r\n            title: 'Tips',\r\n            text: 'Do you sure to delete this firmware?',\r\n            icon: 'warning',\r\n            buttons: {\r\n                ok: 'Yes',\r\n                cancel: 'No'\r\n            }\r\n        })\r\n        .then(r => {\r\n            if(r == 'ok') {\r\n                let { name, version } = payload;\r\n                let selectedType = this.props.firmware.selected;\r\n                let data = {\r\n                    firmware: name,\r\n                    version: version,\r\n                    type: selectedType\r\n                }\r\n                sendCommand(CommandTypes.removeFirmware, data, data => {\r\n                    if(data) {\r\n                        _updateFirmwares();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    downloadHanlder(payload) {\r\n        let _updateFirmwares = this._updateFirmwares;\r\n        let { name, version, type } = payload;\r\n        let callbackSubscribe = `${CommandTypes.downloadFirmware}Callback-${name}-${type}-${version}`;\r\n        let updateFirmwareDownloadStatus = this.props.updateFirmwareDownloadStatus;\r\n        ipcRenderer.send(CommandTypes.downloadFirmware, {\r\n            firmware: name,\r\n            version: version,\r\n            type: type\r\n        });\r\n        if(ipcRenderer.eventNames().includes(callbackSubscribe)) {\r\n            return;\r\n        }\r\n        ipcRenderer.on(callbackSubscribe, function(ev, progress) {\r\n            // Download status\r\n            // return null as duplicate download\r\n            // return 'end' as failed\r\n            // return 0-1 is the progress of download\r\n            if(progress === null) {\r\n                return;\r\n            }\r\n            if(progress === 'end') {\r\n                // When download error\r\n                updateFirmwareDownloadStatus({\r\n                    name,\r\n                    version,\r\n                    type,\r\n                    downloadStatus: DownloadStatus.ERROR,\r\n                    progress: 0\r\n                });\r\n                ipcRenderer.off(callbackSubscribe, this.listeners(callbackSubscribe)[0]);\r\n                return;\r\n            }\r\n            if(progress == 1) {\r\n                // When download finish\r\n                updateFirmwareDownloadStatus({\r\n                    name,\r\n                    version,\r\n                    type,\r\n                    downloadStatus: DownloadStatus.END,\r\n                    progress: 1\r\n                });\r\n                ipcRenderer.off(callbackSubscribe, this.listeners(callbackSubscribe)[0]);\r\n                _updateFirmwares();\r\n                return;\r\n            }\r\n            updateFirmwareDownloadStatus({\r\n                name,\r\n                version,\r\n                type,\r\n                downloadStatus: DownloadStatus.DOWNLOADING,\r\n                progress\r\n            });\r\n        });\r\n    }\r\n\r\n    setCurrentDevice(type) {\r\n        let baudrate = '1500000';\r\n        switch(type) {\r\n            case 'core':\r\n                baudrate = '1500000';\r\n                break;\r\n            case 'stickc':\r\n                baudrate = '750000';\r\n                break;\r\n            case 'atom':\r\n                baudrate = '750000';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.props.setSelectedDeviceType(type);\r\n        this.props.setBaudrate(baudrate);\r\n        sendCommand(CommandTypes.saveConfig, { key: 'baudrate', value: baudrate });\r\n    }\r\n\r\n    inputChangeHandler(ev) {\r\n        this.props.searchFirmware(ev.target.value);\r\n    }\r\n\r\n    render() {\r\n        const { loading } = this.state;\r\n        const { list, selected } = this.props.firmware;\r\n        return (\r\n            <div className=\"container-firmware\">\r\n                <DeviceList selected={selected} setSelected={this.setCurrentDevice} />\r\n                <div className=\"wrapper-firmware-list\">\r\n                    {\r\n                        loading ?\r\n                        <Loading /> :\r\n                        <>\r\n                            <Searchbox onChange={this.inputChangeHandler} />\r\n                            <div className={cs('list', selected === 'core' ? 'active' : '')}>\r\n                                <FirmwareList\r\n                                    device={'core'}\r\n                                    firmwareList={list['core']}\r\n                                    downloadHanlder={this.downloadHanlder}\r\n                                    removeHandler={this.removeHanlder}\r\n                                />\r\n                            </div>\r\n                            <div className={cs('list', selected === 'stickc' ? 'active' : '')}>\r\n                                <FirmwareList\r\n                                    device={'stickc'}\r\n                                    firmwareList={list['stickc']}\r\n                                    downloadHanlder={this.downloadHanlder}\r\n                                    removeHandler={this.removeHanlder}\r\n                                />\r\n                            </div>\r\n                            <div className={cs('list', selected === 'atom' ? 'active' : '')}>\r\n                                <FirmwareList\r\n                                    device={'atom'}\r\n                                    firmwareList={list['atom']}\r\n                                    downloadHanlder={this.downloadHanlder}\r\n                                    removeHandler={this.removeHanlder}\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        firmware: state.firmware\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getFirmwares: firmwares => dispatch(getFirmware(firmwares)),\r\n        updateFirmwares: firmwares => dispatch(updateFirmwares(firmwares)),\r\n        setSelectedDeviceType: type => dispatch(selectDeviceType(type)),\r\n        updateFirmwareDownloadStatus: payload => dispatch(updateDownloadStatus(payload)),\r\n        setBaudrate: baudrate => dispatch(setBaudrate({baudrate})),\r\n        searchFirmware: keyword => dispatch(searchFirmware(keyword))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Firmware);","import React from 'react';\r\nimport cs from 'classnames';\r\nimport { connect } from 'react-redux';\r\nimport { closeModal, setAnimation } from '../../actions/modal.action';\r\nimport { AnimationState } from '../../constants';\r\n\r\nimport './DynamicModal.scss';\r\n\r\nclass DynamicModal extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.beforeCloseModal = this.beforeCloseModal.bind(this);\r\n    }\r\n\r\n    beforeCloseModal() {\r\n        this.props.setAnimation(AnimationState.FADE_OUT);\r\n    }\r\n\r\n    shouldComponentUpdate(newProps) {\r\n        // When open mdoal\r\n        if(this.props.modal.visiable !== newProps.modal.visiable && newProps.modal.visiable) {\r\n            setTimeout(() => {\r\n                this.props.setAnimation(AnimationState.FADE_IN);\r\n            });\r\n        }\r\n\r\n        // When close modal, set `opacity` to 0 before set `display` to none\r\n        if(this.props.modal.animation !== newProps.modal.animation &&\r\n            newProps.modal.animation === AnimationState.FADE_OUT) {\r\n                setTimeout(() => {\r\n                    this.props.closeModal();\r\n                }, 250);\r\n            }\r\n            \r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        const { visiable, component, animation } = this.props.modal;\r\n        if(!visiable) {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className={cs('full-main', animation)}>\r\n                <div className=\"mask\" onClick={this.beforeCloseModal}></div>\r\n                <div className=\"modal\">\r\n                    { component }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.modal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        closeModal: _ => dispatch(closeModal()),\r\n        setAnimation: animation => dispatch(setAnimation({animation}))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DynamicModal);","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport cs from 'classnames';\r\nimport { sendCommand, CommandTypes } from './ipc/events';\r\nimport TopBar from './containers/TopBar';\r\nimport Header from './containers/Header';\r\nimport Firmware from './containers/Firmware/Firmware';\r\nimport DynamicModal from './containers/DynamicModal/DynamicModal';\r\nimport { setTheme, setBurnParams, setVersion, setLastestVersion } from './actions/global.action';\r\nimport { setBaudrate } from './actions/burn.action';\r\n\r\nrequire('./common.scss');\r\n\r\nconst App = (props) => {\r\n    const { theme, setTheme, setBurnParams, setBaudrate, setVersion, setLastestVersion } = props;\r\n\r\n    useEffect(() => {\r\n        sendCommand(CommandTypes.loadAllConfig, null, data => {\r\n            console.log(data);\r\n            setTheme(data['theme']);\r\n            setBurnParams(data['burnParams']);\r\n            setBaudrate(data['baudrate']);\r\n            setVersion(data['version']);\r\n            setLastestVersion(data['lastest'])\r\n        });\r\n    }, []);\r\n    \r\n    return (\r\n        <div className={cs('main', theme)}>\r\n            <TopBar />\r\n            <Header />\r\n            <Firmware />\r\n            <DynamicModal />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        theme: state.global.theme\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setTheme: theme => dispatch(setTheme({theme})),\r\n        setBaudrate: baudrate => dispatch(setBaudrate({baudrate})),\r\n        setBurnParams: params => dispatch(setBurnParams({...params})),\r\n        setVersion: version => dispatch(setVersion({version})),\r\n        setLastestVersion: lastest => dispatch(setLastestVersion({lastest}))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './reducers';\r\n\r\nimport App from './App';\r\n\r\nconst Root = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    )\r\n}\r\n\r\nReactDOM.render(<Root />, document.getElementById('app'));"],"sourceRoot":""}
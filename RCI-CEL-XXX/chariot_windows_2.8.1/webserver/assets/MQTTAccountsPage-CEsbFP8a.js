import{Q as A,a as P,b as N,c as L}from"./QTabPanels-Cp3Ya--g.js";import{_ as V,d as F,Q as C,N as h,f as t,O as a,Y as b,U as s,V as o,P as r,X as p,S as m,aq as $,aN as M,aO as O,M as U,ar as S,as as D,aE as y,F as B,$ as j,ax as E,au as I,at as R}from"./index-NBAmjDPo.js";import{Q as G}from"./QPage-vWYdfFDK.js";import{P as H}from"./PageHeader-Bnmx8R_2.js";import{Q}from"./QSelect-DFMwG8q_.js";import{Q as n}from"./QTooltip-B6ZEMbHi.js";import{a as w,Q as W}from"./QTable-BxDh1Klk.js";import{Q as u}from"./QItemLabel-Bs93CYCt.js";import{Q as k}from"./QForm-2fLQLKgE.js";import{u as z,r as X}from"./index-UpHJnuVP.js";import{B as Y}from"./BasicModal-C1PQ0FKo.js";import{S as J}from"./SelectWithAdd-C8gMwKTW.js";import{C as K}from"./ConfirmationModal-Dz1SD7zn.js";import{Q as Z}from"./QBanner-Dqi8v0pG.js";import{Q as _}from"./QExpansionItem-DjKZC-Oq.js";import"./QResizeObserver-D41I_oPa.js";import"./QMenu-ikSdQUIb.js";import"./QList-Dp5SD6bt.js";import"./QMarkupTable-ByLNg887.js";import"./QToolbar-CdQr3U-3.js";import"./ClosePopup-BPFWk25n.js";const x=F({name:"MQTTCredentialsTab",setup:()=>({v$:z()}),components:{BasicModal:Y,SelectWithAdd:J},data(){return{loading:!1,showPassword:!0,showEditCredentials:!1,selectedCredentials:null,searchText:"",filterField:{value:"username",label:"Username"},filterOptions:[{value:"username",label:"Username"},{value:"acl_publish",label:"Publish"},{value:"acl_subscribe",label:"Subscribe"}],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:O("mqttcredentials"),rowsNumber:0},credentialsForm:{username:"",password:"",acl:{publishTopics:[],subscribeTopics:[]}},rows:[],columns:[{name:"username",label:"Username",field:"username",align:"left",sortable:!1},{name:"pubTopics",align:"left",label:"Publish Topics",field:"pubTopics",sortable:!1},{name:"subTopics",align:"left",label:"Subscribe Topics",field:"subTopics",sortable:!1},{name:"actions",label:"",field:"actions",sortable:!1}]}},validations(){return{credentialsForm:{username:{required:X},password:{required:(function(){return this.selectedCredentials===null?this.credentialsForm.password.length>0:!0})}}}},async created(){this.updateGrid({pagination:this.pagination}),this.$route.query.username&&this.openRoutedCredentials()},methods:{async updateGrid(e){const{page:l,rowsPerPage:f,sortBy:q,descending:v}=e.pagination;this.loading=!0,this.pagination.page=l,this.pagination.rowsPerPage=f,this.pagination.sortBy=q,this.pagination.descending=v;let c=`/mqttusers?limit=${this.pagination.rowsPerPage}&offset=${this.pagination.rowsPerPage*(this.pagination.page-1)}`;this.searchText.length>0&&(c+=`&filterField=${this.filterField.value}&filterValue=${encodeURIComponent(this.searchText)}`);try{const i=await this.$api.get(c);this.rows=i.data.results,this.pagination.rowsNumber=i.data.info.total}catch(i){this.$q.notify({type:"negative",message:i.response.data.message})}this.loading=!1},async onSaveCredentialsResponse(){const e={...this.credentialsForm};if(await this.v$.$validate()){e.password&&e.password.length===0&&delete e.password,this.loading=!0;try{this.selectedCredentials===null?(await this.$api.post(`/mqttusers/${this.credentialsForm.username}`,e),this.$q.notify({type:"positive",message:this.$t("mqttCredentials.messages.createSuccess")})):(await this.$api.put(`/mqttusers/${this.credentialsForm.username}`,e),this.$q.notify({type:"positive",message:this.$t("mqttCredentials.messages.updateSuccess")})),this.updateGrid({pagination:{...this.pagination,page:1}}),this.$refs.credentialsFormModal.toggle()}catch(f){this.$q.notify({type:"negative",message:f.response.data.message})}this.loading=!1}},async onSaveDeleteCredentials(){try{await this.$api.delete(`/mqttusers/${this.selectedCredentials.username}`),this.updateGrid({pagination:{...this.pagination,page:1}}),this.$q.notify({type:"positive",message:"Successfully deleted MQTT Credentials"})}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}this.selectedCredentials=null},onClickEditCredentials(e){this.selectedCredentials={...e},this.credentialsForm={...e},this.showEditCredentials=!0},onClickDeleteCredentials(e){this.selectedCredentials=e,this.$q.dialog({component:K,componentProps:{message:"Are you sure you want to delete these MQTT Credentials?",title:"Delete MQTT Credentials",type:"error",okText:this.$t("shared.delete")}}).onOk(()=>{this.onSaveDeleteCredentials()}).onDismiss(()=>{this.selectedCredentials=null})},onClickAddCredentials(){this.showEditCredentials=!0},onCloseCredentials(){this.v$.$reset(),this.showEditCredentials=!1,this.credentialsForm={username:"",password:"",acl:{publishTopics:[],subscribeTopics:[]}},this.selectedCredentials=null,this.$route.query.username&&this.$router.replace({name:"mqttaccounts",query:{tab:"credentials"}})},async openRoutedCredentials(){const e=this.$route.query.username;try{const l=await this.$api.get(`/mqttusers/${e}`);this.onClickEditCredentials(l.data)}catch(l){this.$q.notify({type:"negative",message:l.response.data.message})}}},watch:{"pagination.rowsPerPage":{handler(){M("mqttcredentials",this.pagination.rowsPerPage)}},searchText(){this.pagination.page=1,this.updateGrid({pagination:this.pagination})}}}),ee={class:"chariot-table-header"},te={class:"chariot-table-header-search"},ae={style:{width:"400px"},class:"ellipsis"},le={style:{width:"400px"},class:"ellipsis"},se={class:"chariot-form-input"},oe={class:"chariot-form-input"},ie={class:"chariot-form-input"},re={class:"chariot-form-input q-mt-md"};function de(e,l,f,q,v,c){const i=$("SelectWithAdd"),T=$("BasicModal");return h(),C("div",null,[t(W,{pagination:e.pagination,"onUpdate:pagination":l[2]||(l[2]=d=>e.pagination=d),onRequest:e.updateGrid,loading:e.loading,rows:e.rows,columns:e.columns,"row-key":"username","rows-per-page-options":[5,10,20,50,100]},{top:a(()=>[r("div",ee,[t(b,{style:{height:"36px","min-width":"150px"},color:"primary",label:"Add Credential",onClick:e.onClickAddCredentials},null,8,["onClick"]),r("div",te,[t(Q,{style:{width:"160px"},class:"q-mr-sm",label:"Search By",dense:"",outlined:"",for:"mqttCredsentialsFilter",modelValue:e.filterField,"onUpdate:modelValue":l[0]||(l[0]=d=>e.filterField=d),options:e.filterOptions},null,8,["modelValue","options"]),t(p,{style:{width:"250px"},debounce:"500",for:"mqttCedentialsSearch",modelValue:e.searchText,"onUpdate:modelValue":l[1]||(l[1]=d=>e.searchText=d),dense:"",outlined:"",label:"Search"},null,8,["modelValue"])])])]),"body-cell-pubTopics":a(d=>[t(w,{props:d},{default:a(()=>[r("div",ae,[s(o(d.row.acl.publishTopics.join(","))+" ",1),t(n,{style:{"word-wrap":"break-word"}},{default:a(()=>[s(o(d.row.acl.publishTopics.join(",")),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-subTopics":a(d=>[t(w,{props:d},{default:a(()=>[r("div",le,[s(o(d.row.acl.subscribeTopics.join(","))+" ",1),t(n,{style:{"word-wrap":"break-word"}},{default:a(()=>[s(o(d.row.acl.subscribeTopics.join(",")),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-actions":a(d=>[t(w,{props:d},{default:a(()=>[t(b,{onClick:g=>e.onClickEditCredentials(d.row),flat:"",round:"",color:"primary-light",icon:"edit"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttCredentials.editMqttCredentials")),1)]),_:1})]),_:1},8,["onClick"]),t(b,{onClick:g=>e.onClickDeleteCredentials(d.row),flat:"",round:"",color:"negative",icon:"delete"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttCredentials.deleteMqttCredentials")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","onRequest","loading","rows","columns"]),t(T,{ref:"credentialsFormModal",open:e.showEditCredentials,"show-footer":!0,loading:e.loading,title:e.selectedCredentials===null?e.$t("mqttCredentials.addCredential"):e.$t("mqttCredentials.editCredential"),onOnClose:e.onCloseCredentials,onOnSave:e.onSaveCredentialsResponse},{default:a(()=>[t(k,{class:"q-gutter-y-md column"},{default:a(()=>[r("div",null,[r("label",se,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("shared.username"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttCredentials.tooltips.username")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.v$.credentialsForm.username.$model,"onUpdate:modelValue":l[3]||(l[3]=d=>e.v$.credentialsForm.username.$model=d),error:e.v$.credentialsForm.username.$error,disable:e.selectedCredentials!==null,"error-message":e.$t("shared.validation.required"),dense:"",outlined:""},null,8,["modelValue","error","disable","error-message"])]),r("label",oe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("shared.password")),1)]),_:1}),t(p,{modelValue:e.v$.credentialsForm.password.$model,"onUpdate:modelValue":l[5]||(l[5]=d=>e.v$.credentialsForm.password.$model=d),error:e.v$.credentialsForm.password.$error,"error-message":e.$t("shared.validation.required"),outlined:"",dense:"",type:e.showPassword?"password":"text"},{append:a(()=>[t(b,{flat:"",dense:"",rounded:"",icon:e.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[4]||(l[4]=d=>e.showPassword=!e.showPassword)},null,8,["icon"])]),_:1},8,["modelValue","error","error-message","type"])]),r("label",ie,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttCredentials.publishTopics"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttCredentials.tooltips.publishTopics")),1)]),_:1})]),_:1})]),_:1}),t(i,{modelValue:e.credentialsForm.acl.publishTopics,"onUpdate:modelValue":l[6]||(l[6]=d=>e.credentialsForm.acl.publishTopics=d)},null,8,["modelValue"])]),r("label",re,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttCredentials.subscribeTopics"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttCredentials.tooltips.subscribeTopics")),1)]),_:1})]),_:1})]),_:1}),t(i,{modelValue:e.credentialsForm.acl.subscribeTopics,"onUpdate:modelValue":l[7]||(l[7]=d=>e.credentialsForm.acl.subscribeTopics=d)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["open","loading","title","onOnClose","onOnSave"])])}const ne=V(x,[["render",de]]),ue=F({name:"MQTTLdapTab",components:{},data(){return{loading:!1,isConnected:null,livePoll:null,showPassword:!0,sourceOptions:[{label:"Microsoft Active Directory",value:"ad"},{label:"LDAP",value:"ldap"}],ldapForm:{id:null,sourceType:{label:"Microsoft Active Directory",value:"ad"},enabled:!1,domain:null,host:"localhost",port:"389",useTls:!1,sysUsername:null,sysPassword:null,referral:"follow",connectTimeout:1e4,readTimeout:5e3,autoSuffix:!0,systemSuffixPrefix:!0,usernameSuffix:"",usernamePrefix:"",usernameAttributeName:null,pubTopicAttributeName:"clsPubTopicFilter",subTopicAttributeName:"clsSubTopicFilter",credentialObjectClassName:"clsMqttCredential",aclCheckInterval:1e4,baseDn:null}}},async created(){this.loading=!0;try{const e=await this.$api.get("/mqttauth/ldap");this.updateStatus(),this.ldapForm={...e.data,sourceType:this.sourceOptions.find(l=>l.value===e.data.sourceType)||this.sourceOptions[0]},this.loading=!1}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}},unmounted(){this.stopPoll()},methods:{async onUpdateLdapConfiguration(){const e={...this.ldapForm};e.sourceType=e.sourceType.value,this.loading=!0;try{await this.$api.put("/mqttauth/ldap",e),this.$q.notify({type:"positive",message:this.$t("mqttServerLdap.ldapSave")})}catch(l){this.$q.notify({type:"negative",message:l.response.data.message})}this.loading=!1},async updateStatus(){this.stopPoll();try{const e=await this.$api.get("/mqttauth/ldapstatus"),{connected:l,errorMsg:f}=e.data;this.isConnected=l,!l&&f&&this.$q.notify({type:"negative",message:f}),this.startPoll()}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}},startPoll(){this.livePoll=setTimeout(()=>{this.updateStatus()},1e4)},stopPoll(){clearTimeout(this.livePoll)}},watch:{"ldapForm.sourceType"(e){e.value==="ad"?(this.ldapForm.pubTopicAttributeName="clsPubTopicFilter",this.ldapForm.subTopicAttributeName="clsSubTopicFilter",this.ldapForm.credentialObjectClassName="clsMqttCredential",this.ldapForm.autoSuffix=!0,this.ldapForm.systemSuffixPrefix=!0):e.value==="ldap"&&(this.ldapForm.pubTopicAttributeName="cls-pubTopicFilter",this.ldapForm.subTopicAttributeName="cls-subTopicFilter",this.ldapForm.credentialObjectClassName="cls-mqttCredential",this.ldapForm.autoSuffix=!1,this.ldapForm.systemSuffixPrefix=!1)}}}),me={class:"chariot-form-input q-mt-md"},pe={class:"chariot-form-input q-mt-md"},fe={class:"chariot-form-input"},he={class:"chariot-form-input q-mt-md"},be={class:"chariot-form-input q-mt-md"},ce={class:"chariot-form-input"},ge={class:"chariot-form-input q-mt-md"},$e={class:"chariot-form-input q-mt-md"},qe={class:"chariot-form-input q-mt-md"},ve={class:"chariot-form-input q-mt-md"},ye={class:"chariot-form-input q-mt-md"},Ce={class:"chariot-form-input q-mt-md"},Te={key:0,class:"chariot-form-input q-mt-md"},Se={class:"chariot-form-input"},we={class:"chariot-form-input"},Ve={class:"chariot-form-input"},Fe={class:"chariot-form-input q-mt-md"},Pe={class:"chariot-form-input q-mt-md"},Le={class:"chariot-form-input q-mt-md"},Ue={class:"chariot-form-input q-mt-md"},Qe={class:"chariot-form-input q-mt-md"},ke={class:"q-mt-md row justify-end"};function Ae(e,l,f,q,v,c){return h(),C("div",null,[e.isConnected!==null?(h(),U(Z,{key:0,"inline-actions":"",rounded:"",class:D([{"bg-negative text-white":!e.isConnected,"bg-positive":e.isConnected}])},{avatar:a(()=>[t(m,{name:e.isConnected?"check":"cancel"},null,8,["name"])]),default:a(()=>[s(" "+o(e.isConnected?"Connected":"Not Connected"),1)]),_:1},8,["class"])):S("",!0),t(k,{onSubmit:e.onUpdateLdapConfiguration},{default:a(()=>[r("label",me,[t(u,null,{default:a(()=>[...l[22]||(l[22]=[s(" Source Type ",-1)])]),_:1}),t(Q,{class:"q-mt-sm",outlined:"",dense:"",modelValue:e.ldapForm.sourceType,"onUpdate:modelValue":l[0]||(l[0]=i=>e.ldapForm.sourceType=i),options:e.sourceOptions},null,8,["modelValue","options"])]),r("label",pe,[t(u,null,{default:a(()=>[s(o(e.$t("shared.enabled"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.enabled")),1)]),_:1})]),_:1})]),_:1}),t(y,{modelValue:e.ldapForm.enabled,"onUpdate:modelValue":l[1]||(l[1]=i=>e.ldapForm.enabled=i)},null,8,["modelValue"])]),r("label",fe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.host"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.host")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.host,"onUpdate:modelValue":l[2]||(l[2]=i=>e.ldapForm.host=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",he,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("shared.port"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.port")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.port,"onUpdate:modelValue":l[3]||(l[3]=i=>e.ldapForm.port=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",be,[t(u,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.useTls"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.useTls")),1)]),_:1})]),_:1})]),_:1}),t(y,{modelValue:e.ldapForm.useTls,"onUpdate:modelValue":l[4]||(l[4]=i=>e.ldapForm.useTls=i)},null,8,["modelValue"])]),r("label",ce,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.systemUsername"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.systemUsername")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.sysUsername,"onUpdate:modelValue":l[5]||(l[5]=i=>e.ldapForm.sysUsername=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",ge,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.systemPassword"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.systemPassword")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.sysPassword,"onUpdate:modelValue":l[7]||(l[7]=i=>e.ldapForm.sysPassword=i),outlined:"",dense:"",type:e.showPassword?"password":"text"},{append:a(()=>[t(b,{flat:"",dense:"",rounded:"",icon:e.showPassword?"visibility_off":"visibility",onClick:l[6]||(l[6]=i=>e.showPassword=!e.showPassword)},null,8,["icon"])]),_:1},8,["modelValue","type"])]),r("label",$e,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.baseDn"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.baseDn")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.baseDn,"onUpdate:modelValue":l[8]||(l[8]=i=>e.ldapForm.baseDn=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",qe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.usernameAttributeName"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.usernameAttributeName")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.usernameAttributeName,"onUpdate:modelValue":l[9]||(l[9]=i=>e.ldapForm.usernameAttributeName=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",ve,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.subTopicAttributeName"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.subTopicAttributeName")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.subTopicAttributeName,"onUpdate:modelValue":l[10]||(l[10]=i=>e.ldapForm.subTopicAttributeName=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",ye,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.pubTopicAttributeName"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.pubTopicAttributeName")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.pubTopicAttributeName,"onUpdate:modelValue":l[11]||(l[11]=i=>e.ldapForm.pubTopicAttributeName=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",Ce,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.credentialObjectClass"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.credentialObjectClass")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.credentialObjectClassName,"onUpdate:modelValue":l[12]||(l[12]=i=>e.ldapForm.credentialObjectClassName=i),dense:"",outlined:""},null,8,["modelValue"])]),e.ldapForm.sourceType.value==="ad"?(h(),C("label",Te,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.domain"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.domain")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.domain,"onUpdate:modelValue":l[13]||(l[13]=i=>e.ldapForm.domain=i),dense:"",outlined:""},null,8,["modelValue"])])):S("",!0),t(_,{dense:"","header-class":"chariot-form-collapse-group"},{header:a(()=>[s(o(e.$t("mqttServerLdap.advancedOptions")),1)]),default:a(()=>[e.ldapForm.sourceType.value==="ad"?(h(),C(B,{key:0},[r("label",Se,[t(u,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.autoSuffix"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.autoSuffix")),1)]),_:1})]),_:1})]),_:1}),t(y,{modelValue:e.ldapForm.autoSuffix,"onUpdate:modelValue":l[14]||(l[14]=i=>e.ldapForm.autoSuffix=i)},null,8,["modelValue"])]),r("label",we,[t(u,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.systemSuffixPrefix"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.systemSuffixPrefix")),1)]),_:1})]),_:1})]),_:1}),t(y,{modelValue:e.ldapForm.systemSuffixPrefix,"onUpdate:modelValue":l[15]||(l[15]=i=>e.ldapForm.systemSuffixPrefix=i)},null,8,["modelValue"])]),r("label",Ve,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.usernameSuffix"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.usernameSuffix")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.usernameSuffix,"onUpdate:modelValue":l[16]||(l[16]=i=>e.ldapForm.usernameSuffix=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",Fe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.usernamePrefix"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.usernamePrefix")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.usernamePrefix,"onUpdate:modelValue":l[17]||(l[17]=i=>e.ldapForm.usernamePrefix=i),dense:"",outlined:""},null,8,["modelValue"])])],64)):S("",!0),r("label",Pe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.referral"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.referral")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.referral,"onUpdate:modelValue":l[18]||(l[18]=i=>e.ldapForm.referral=i),dense:"",outlined:""},null,8,["modelValue"])]),r("label",Le,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.connectionTimeout"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.connectionTimeout")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.connectTimeout,"onUpdate:modelValue":l[19]||(l[19]=i=>e.ldapForm.connectTimeout=i),modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue"])]),r("label",Ue,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.readTimeout"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.readTimeout")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.readTimeout,"onUpdate:modelValue":l[20]||(l[20]=i=>e.ldapForm.readTimeout=i),modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue"])]),r("label",Qe,[t(u,{class:"q-mb-sm"},{default:a(()=>[s(o(e.$t("mqttServerLdap.aclCheckInterval"))+" ",1),t(m,{color:"light",name:"help"},{default:a(()=>[t(n,null,{default:a(()=>[s(o(e.$t("mqttServerLdap.tooltips.aclCheckInterval")),1)]),_:1})]),_:1})]),_:1}),t(p,{modelValue:e.ldapForm.aclCheckInterval,"onUpdate:modelValue":l[21]||(l[21]=i=>e.ldapForm.aclCheckInterval=i),modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue"])])]),_:1}),r("div",ke,[t(b,{label:"Update",type:"submit",color:"primary",loading:e.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])])}const Ne=V(ue,[["render",Ae]]),Me=F({name:"MQTTAccountsPage",components:{CredentialsTab:ne,LdapTab:Ne,PageHeader:H},data(){let e="credentials";return this.$route?.query?.tab?e=this.$route?.query?.tab:this.$router.replace({name:"mqttaccounts",query:{tab:e}}),{tab:e}},computed:{...j(E,["helpUrl"])},watch:{tab(){this.$router.push({name:"mqttaccounts",query:{...this.$route.query,tab:this.tab}})},$route:{handler(){this.$route.query.tab&&(this.tab=this.$route.query.tab)}}}}),Oe=["href"];function De(e,l,f,q,v,c){const i=$("PageHeader"),T=$("CredentialsTab"),d=$("LdapTab");return h(),U(G,{class:"chariot-page-container"},{default:a(()=>[t(i,{title:e.$t("mqttCredentials.title"),icon:"credit_score",help:!0},{popover:a(()=>[r("p",null,o(e.$t("mqttCredentials.help")),1),l[2]||(l[2]=s()),r("a",{target:"_blank",href:`${e.helpUrl}/Chariot+MQTT+Server+Configuration#ChariotMQTTServerConfiguration-MQTTCredentialsConfiguration`},o(e.$t("shared.moreDetails"))+"...",9,Oe)]),_:1},8,["title"]),t(I,{class:"chariot-page-container-body"},{default:a(()=>[t(A,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=g=>e.tab=g),dense:"","active-color":"primary-light",align:"justify"},{default:a(()=>[t(P,{name:"credentials",label:e.$t("mqttCredentials.credentials")},null,8,["label"]),t(P,{name:"ldap",label:"LDAP"})]),_:1},8,["modelValue"]),t(R),t(N,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=g=>e.tab=g)},{default:a(()=>[t(L,{name:"credentials"},{default:a(()=>[t(T)]),_:1}),t(L,{name:"ldap"},{default:a(()=>[t(d)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const ot=V(Me,[["render",De]]);export{ot as default};

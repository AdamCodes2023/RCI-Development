const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sigma.esm-DnGi9WQK.js","assets/index-236c62ad.esm-CCiV41DP.js","assets/index-NBAmjDPo.js","assets/index-XviOXESA.css","assets/QList-Dp5SD6bt.js","assets/QMenu-ikSdQUIb.js","assets/QBanner-Dqi8v0pG.js","assets/QTabPanels-Cp3Ya--g.js","assets/QResizeObserver-D41I_oPa.js","assets/QSelect-DFMwG8q_.js","assets/QItemLabel-Bs93CYCt.js","assets/QPage-vWYdfFDK.js","assets/ClosePopup-BPFWk25n.js","assets/PageHeader-Bnmx8R_2.js","assets/PageHeader-vN9JvgLv.css","assets/QTable-BxDh1Klk.js","assets/QMarkupTable-ByLNg887.js","assets/QToolbar-CdQr3U-3.js","assets/utility-BvzlK3Wi.js","assets/dayjs.min-CaSXwhts.js","assets/ConfirmationModal-Dz1SD7zn.js","assets/ConfirmationModal-CDw1ox_0.css","assets/QTooltip-B6ZEMbHi.js","assets/QInnerLoading-DLOuihN2.js","assets/copy-to-clipboard-Deab3tYM.js","assets/BasicModal-C1PQ0FKo.js","assets/QForm-2fLQLKgE.js","assets/index-UpHJnuVP.js","assets/sigma-node-image.esm-Cf-F9N9q.js","assets/sigma-rendering.esm-TsJM0Ftn.js"])))=>i.map(i=>d[i]);
import{Q as ae,a as P,b as R}from"./QList-Dp5SD6bt.js";import{Q as lt}from"./QMenu-ikSdQUIb.js";import{_ as Ne,d as Le,Q as W,N as I,f as a,O as d,Y as ie,M as q,P as N,X as we,U as m,V as w,aF as ve,S as de,au as ge,aN as It,aO as _t,aq as te,ar as be,q as Se,k as $i,c as ki,h as Di,L as Si,ap as Ii,bf as Jt,bg as Xt,F as re,R as dt,as as Et,$ as xt,a0 as _i,aC as Bt,aK as fe,bl as yt,aB as nt,at as Ct,b6 as Ei,W as qt,ax as Ci}from"./index-NBAmjDPo.js";import{Q as Ot}from"./QBanner-Dqi8v0pG.js";import{Q as Gi,a as ot,b as Ni,c as st}from"./QTabPanels-Cp3Ya--g.js";import{Q as Li}from"./QPage-vWYdfFDK.js";import{C as Pe}from"./ClosePopup-BPFWk25n.js";import{Q as Ri,P as Ai}from"./PageHeader-Bnmx8R_2.js";import{Q as ht,a as Ti}from"./QSelect-DFMwG8q_.js";import{a as De,Q as Gt}from"./QTable-BxDh1Klk.js";import{Q as Ce,a as Ge}from"./QToolbar-CdQr3U-3.js";import{Q as k}from"./QItemLabel-Bs93CYCt.js";import{r as ei,c as ti}from"./utility-BvzlK3Wi.js";import{C as ut}from"./ConfirmationModal-Dz1SD7zn.js";import{Q as ye}from"./QTooltip-B6ZEMbHi.js";import{Q as Nt}from"./QInnerLoading-DLOuihN2.js";import{c as Lt}from"./copy-to-clipboard-Deab3tYM.js";import{B as ct}from"./BasicModal-C1PQ0FKo.js";import{Q as Pi}from"./QForm-2fLQLKgE.js";import{u as Bi,r as wt}from"./index-UpHJnuVP.js";const qi=Le({name:"HostTab",components:{},data(){return{pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:_t("hosts"),rowsNumber:0},hostsSelected:[],rows:[],livePoll:null,messageText:"",filterField:{label:this.$t("sparkplug.stateTopic"),value:"stateTopic"},columns:[{name:"hostId",label:"Host ID",field:"hostId",align:"left",sortable:!1},{name:"stateTopic",label:"State Topic",field:"stateTopic",align:"left",sortable:!1},{name:"clientId",label:"Client ID",field:"clientId",align:"left",sortable:!1},{name:"ipAddress",label:"IP",field:"ipAddress",align:"left",sortable:!1},{name:"online",label:"Online",field:"online",align:"left",sortable:!1}],filterOptions:[{label:this.$t("shared.hostId"),value:"hostId"},{label:this.$t("sparkplug.stateTopic"),value:"stateTopic"},{label:this.$t("sparkplug.clientId"),value:"clientId"},{label:"IP",value:"ipAddress"}]}},async created(){this.updateGrid({pagination:this.pagination})},unmounted(){this.stopPoll()},mounted(){this.$route?.query?.stateTopic&&(this.messageText=this.$route?.query?.stateTopic,this.$router.replace({name:"sparkplug",query:{tab:"hosts"}}))},methods:{convertTimestamp:ti,readableBoolean:ei,async updateGrid(e){this.stopPoll();const{page:t,rowsPerPage:i,sortBy:n,descending:o}=e.pagination;this.loading=!0,this.pagination.page=t,this.pagination.rowsPerPage=i,this.pagination.sortBy=n,this.pagination.descending=o;let s=`/sparkplug/hosts?limit=${this.pagination.rowsPerPage}&offset=${this.pagination.rowsPerPage*(this.pagination.page-1)}`;try{this.messageText.length>0&&(s+=`&filterField=${this.filterField.value}&filterValue=${this.messageText}`);const r=await this.$api.get(s);this.rows=r.data.results,this.pagination.rowsNumber=r.data.info.total,this.$router.currentRoute.value.name==="sparkplug"&&this.startPoll()}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}this.loading=!1},async onDeleteSelected(){this.$q.dialog({component:ut,componentProps:{message:this.$t("sparkplug.bulkHostDeleteMessage",{nodeCount:this.hostsSelected.length}),title:"Delete Hosts",type:"error",okText:this.$t("shared.delete")}}).onOk(()=>{let e=this.hostsSelected.map(t=>t.stateTopic);try{this.$api.post("/sparkplug/hosts?action=delete",{stateTopics:e}),this.$q.notify({type:"positive",message:"Successfully deleted selected hosts"})}catch(t){this.$q.notify({type:"negative",message:t.response.data.message})}this.pagination.page=1,this.updateGrid({pagination:this.pagination}),this.hostsSelected=[]})},stopPoll(){clearTimeout(this.livePoll)},startPoll(){this.livePoll=setTimeout(()=>{this.updateGrid({pagination:this.pagination})},3e3)}},computed:{hostSelectedRow(){return this.hostsSelected.length>0?this.hostsSelected[0]:null}},watch:{messageText(){this.pagination.page=1,this.stopPoll(),this.updateGrid({pagination:this.pagination})},"pagination.rowsPerPage":{handler(){It("hosts",this.pagination.rowsPerPage)}}}}),Oi={class:"chariot-host-table-header"},zi={class:"chariot-host-table-header-filter"};function Ui(e,t,i,n,o,s){return I(),W("div",null,[a(Gt,{pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=r=>e.pagination=r),selected:e.hostsSelected,"onUpdate:selected":t[3]||(t[3]=r=>e.hostsSelected=r),"row-key":"stateTopic",onRequest:e.updateGrid,selection:"multiple",loading:e.loading,rows:e.rows,columns:e.columns,"rows-per-page-options":[5,10,20,50,100]},{top:d(()=>[N("div",Oi,[N("div",zi,[a(we,{debounce:"500",class:"chariot-host-table-header-filter-text",modelValue:e.messageText,"onUpdate:modelValue":t[0]||(t[0]=r=>e.messageText=r),dense:"",outlined:"",label:"Filter"},null,8,["modelValue"]),a(ht,{class:"chariot-host-table-header-filter-select q-ml-md",dense:"",outlined:"",label:"Filter Field",modelValue:e.filterField,"onUpdate:modelValue":t[1]||(t[1]=r=>e.filterField=r),options:e.filterOptions},null,8,["modelValue","options"])]),a(ie,{dense:"",style:{width:"180px"},disabled:this.hostsSelected.length===0,color:"negative",label:"Delete selected",onClick:e.onDeleteSelected},null,8,["disabled","onClick"])])]),"body-cell-online":d(r=>[a(De,{props:r},{default:d(()=>[r.row.online===!0?(I(),q(de,{key:0,color:"positive",name:"check"})):(I(),q(de,{key:1,name:"close",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-clientId":d(r=>[a(De,{props:r},{default:d(()=>[a(ie,{flat:"",dense:"","no-caps":"",class:"chariot-grid-resource",label:r.row.clientId,color:"primary-light",to:`/mqttstatus?tab=clients&clientId=${r.row.clientId}`},null,8,["label","to"])]),_:2},1032,["props"])]),_:1},8,["pagination","selected","onRequest","loading","rows","columns"]),a(ge,{class:"q-mt-lg"},{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.hostDetails")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("shared.hostId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.hostId?e.hostSelectedRow.hostId:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.stateTopic")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.stateTopic?e.hostSelectedRow.stateTopic:"-"),1)]),_:1})]),_:1})]),_:1}),e.hostSelectedRow&&e.hostSelectedRow.clientId?(I(),q(P,{key:0,to:`/mqttstatus?tab=clients&clientId=${e.hostSelectedRow.clientId}`},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.clientId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.clientId!==null?e.hostSelectedRow.clientId:"-"),1)]),_:1})]),_:1}),a(R,{avatar:""},{default:d(()=>[a(de,{color:"light",name:"link"})]),_:1})]),_:1},8,["to"])):(I(),q(P,{key:1},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.clientId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[...t[4]||(t[4]=[m("-",-1)])]),_:1})]),_:1})]),_:1})),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.ipAddress")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.ipAddress?e.hostSelectedRow.ipAddress:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.rebirthsRequested")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow?e.hostSelectedRow.rebirthsRequested:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.online")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow?e.readableBoolean(e.hostSelectedRow.online):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastOnline")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.lastOnline?e.convertTimestamp(e.hostSelectedRow.lastOnline):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastOffline")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.hostSelectedRow&&e.hostSelectedRow.lastOffline?e.convertTimestamp(e.hostSelectedRow.lastOffline):"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Mi=Ne(qi,[["render",Ui]]),Hi=Le({name:"NodeBirthDetailsModal",emits:["close","copied"],components:{BasicModal:ct},props:{groupId:{type:String,required:!0},edgeNodeId:{type:String,required:!0}},data(){return{nodeBirthDetails:null,loading:!1,disabled:!1,disabledMessage:"Node birth payload not available in LITE mode"}},async mounted(){this.loading=!0;try{const e=await this.$api.get(`/sparkplug/nbirth?groupId=${this.groupId}&edgeNodeId=${this.edgeNodeId}`);this.nodeBirthDetails=e.data,this.nodeBirthDetails.length===0&&(this.disabled=!0,this.disabledMessage="Node birth payload is empty, next publish or rebirth will resolve this")}catch(e){console.log(e),this.$q.notify({type:"negative",message:e.response.data.message}),this.disabled=!0,this.disabledMessage="Node birth payload not available in LITE mode"}this.loading=!1},methods:{onCloseNodeBirthDetails(){this.$emit("close")},async onClickBirthCopy(e){try{await Lt(JSON.stringify(e,4)),this.$emit("copied"),this.$q.notify({type:"positive",message:"Successfully copied birth details"})}catch{this.$q.notify({type:"negative",message:"Failed to copy birth details"})}}}}),Vi={class:"q-gutter-y-md column"},ji={class:"chariot-modal-body-node-details"},Fi={key:0},Wi={key:1,class:"text-center text-bold"};function Qi(e,t,i,n,o,s){const r=te("BasicModal");return I(),q(r,{"show-footer":!e.disabled,open:!0,title:"Node Birth Payload","save-text":"Copy",onOnClose:e.onCloseNodeBirthDetails,onOnSave:t[0]||(t[0]=l=>e.onClickBirthCopy(e.nodeBirthDetails))},{default:d(()=>[N("div",Vi,[N("div",null,[N("div",ji,[e.disabled?(I(),W("div",Wi,w(e.disabledMessage),1)):(I(),W("pre",Fi,w(e.nodeBirthDetails),1))])]),a(Nt,{showing:e.loading,color:"primary",label:"Loading Node Birth Payload...","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1},8,["show-footer","onOnClose"])}const ii=Ne(Hi,[["render",Qi]]),Ki=Le({name:"DeviceBirthDetailsModal",emits:["close","copied"],components:{BasicModal:ct},props:{groupId:{type:String,required:!0},edgeNodeId:{type:String,required:!0},deviceId:{type:String,required:!0}},data(){return{deviceBirthDetails:null,loading:!1,disabled:!1,disabledMessage:"Device birth payload not available in LITE mode"}},async mounted(){this.loading=!0;try{const e=await this.$api.get(`/sparkplug/dbirth?groupId=${this.groupId}&edgeNodeId=${this.edgeNodeId}&deviceId=${this.deviceId}`);this.deviceBirthDetails=e.data,this.deviceBirthDetails.length===0&&(this.disabled=!0,this.disabledMessage="Device birth payload is empty, next publish or rebirth will resolve this")}catch(e){this.$q.notify({type:"negative",message:e.response.data.message}),this.disabled=!0,this.disabledMessage="Device birth payload not available in LITE mode"}this.loading=!1},methods:{onCloseNodeBirthDetails(){this.$emit("close")},async onClickBirthCopy(e){try{await Lt(JSON.stringify(e,4)),this.$emit("copied"),this.$q.notify({type:"positive",message:"Successfully copied birth details"})}catch{this.$q.notify({type:"negative",message:"Failed to copy birth details"})}}}}),Zi={class:"q-gutter-y-md column"},Yi={class:"chariot-modal-body-node-details"},Ji={key:0},Xi={key:1,class:"text-center text-bold"};function xi(e,t,i,n,o,s){const r=te("BasicModal");return I(),q(r,{"show-footer":!e.disabled,open:!0,title:"Device Birth Payload","save-text":"Copy",onOnClose:e.onCloseNodeBirthDetails,onOnSave:t[0]||(t[0]=l=>e.onClickBirthCopy(e.deviceBirthDetails))},{default:d(()=>[N("div",Zi,[N("div",null,[N("div",Yi,[e.disabled?(I(),W("div",Xi,w(e.disabledMessage),1)):(I(),W("pre",Ji,w(e.deviceBirthDetails),1))])]),a(Nt,{showing:e.loading,color:"primary",label:"Loading Device Birth Payload...","label-style":"font-size: 1.1em"},null,8,["showing"])])]),_:1},8,["show-footer","onOnClose"])}const ni=Ne(Ki,[["render",xi]]),en=Le({name:"SampleCompressionModal",emits:["close","compression"],components:{BasicModal:ct},props:{groupId:{type:String,required:!0},edgeNodeId:{type:String,required:!0}},data(){return{compressionDuration:30,displayGroupId:this.groupId,displayEdgeNodeId:this.edgeNodeId}},methods:{onCloseSampleCompression(){this.$emit("close")},async onClickStartSampleCompression(){try{await this.$api.post(`/sparkplug?action=sampleCompression&duration=${this.compressionDuration}&groupId=${this.groupId}&edgeNodeId=${this.edgeNodeId}`),this.$q.notify({type:"positive",message:this.$t("sparkplug.startSamplingSuccess",{groupId:this.groupId,edgeNodeId:this.edgeNodeId,duration:this.compressionDuration})}),this.$emit("compression")}catch(e){this.$q.notify({type:"negative",message:e?.response?.data?.message??this.$t("sparkplug.failedSampling")})}}}}),tn={class:"q-gutter-y-md column"},nn={class:"chariot-form-input"},on={class:"chariot-form-input q-mt-md"},sn={class:"chariot-form-input q-mt-md"};function rn(e,t,i,n,o,s){const r=te("BasicModal");return I(),q(r,{ref:"compressionModal","show-footer":!0,open:!0,title:"Sample Compression","save-text":"Start Sampling",onOnClose:e.onCloseSampleCompression,onOnSave:e.onClickStartSampleCompression},{default:d(()=>[N("div",tn,[N("div",null,[N("div",nn,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("sparkplug.groupId")),1)]),_:1}),a(we,{modelValue:e.displayGroupId,"onUpdate:modelValue":t[0]||(t[0]=l=>e.displayGroupId=l),disable:!0,dense:"",outlined:""},null,8,["modelValue"])]),N("div",on,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("sparkplug.edgeNodeId")),1)]),_:1}),a(we,{modelValue:e.displayEdgeNodeId,"onUpdate:modelValue":t[1]||(t[1]=l=>e.displayEdgeNodeId=l),disable:!0,dense:"",outlined:""},null,8,["modelValue"])]),N("div",sn,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("sparkplug.duration")),1)]),_:1}),a(we,{type:"number",modelValue:e.compressionDuration,"onUpdate:modelValue":t[2]||(t[2]=l=>e.compressionDuration=l),modelModifiers:{number:!0},dense:"",outlined:""},null,8,["modelValue"])])])])]),_:1},8,["onOnClose","onOnSave"])}const oi=Ne(en,[["render",rn]]),an=Le({name:"EdgeTab",components:{NodeBirthDetailsModal:ii,DeviceBirthDetailsModal:ni,SampleCompressionModal:oi},data(){return{pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:_t("edgenodes"),rowsNumber:0},devicePagination:{rowsPerPage:_t("edgenodedevices")},edgeSelected:[],edgeRows:[],deviceSelected:[],livePoll:null,messageText:"",showNodeBirth:!1,nodeBirthRow:null,deviceBirthRow:null,compressionRow:null,showDeviceBirth:!1,showCompression:!1,compressionDuration:30,filterField:{label:this.$t("sparkplug.clientId"),value:"clientId"},columns:[{name:"groupId",label:this.$t("sparkplug.groupId"),field:"groupId",align:"left",sortable:!1},{name:"edgeNodeId",label:this.$t("sparkplug.edgeNodeId"),field:"edgeNodeId",align:"left",sortable:!1},{name:"clientId",label:this.$t("sparkplug.clientId"),field:"clientId",align:"left",sortable:!1},{name:"ipAddress",label:"IP",field:"ipAddress",align:"left",sortable:!1},{name:"online",label:this.$t("sparkplug.online"),field:"online",align:"left",sortable:!1},{name:"primaryId",label:this.$t("sparkplug.primaryId"),field:"primaryId",align:"left",sortable:!1},{name:"actions",label:"",field:"actions",align:"left",sortable:!1}],deviceColumns:[{name:"deviceId",label:this.$t("sparkplug.deviceId"),field:"deviceId",align:"left",sortable:!1},{name:"lastBirthReceived",label:this.$t("sparkplug.lastBirth"),field:"lastBirthReceived",align:"left",sortable:!1},{name:"lastDeathReceived",label:this.$t("sparkplug.lastDeath"),field:"lastDeathReceived",align:"left",sortable:!1},{name:"online",label:"Online",field:"online",align:"left",sortable:!1},{name:"actions",label:"",field:"actions",align:"left",sortable:!1}],filterOptions:[{label:this.$t("sparkplug.clientId"),value:"clientId"},{label:this.$t("sparkplug.groupId"),value:"groupId"},{label:this.$t("sparkplug.edgeNodeId"),value:"edgeNodeId"},{label:"IP",value:"ipAddress"}]}},async created(){this.updateGrid({pagination:this.pagination})},mounted(){this.$route?.query?.clientId&&(this.messageText=this.$route?.query?.clientId,this.$router.replace({name:"sparkplug",query:{tab:"edge"}}))},unmounted(){this.stopPoll()},methods:{convertTimestamp:ti,readableBoolean:ei,async updateGrid(e){this.stopPoll();const{page:t,rowsPerPage:i,sortBy:n,descending:o}=e.pagination;this.loading=!0,this.pagination.page=t,this.pagination.rowsPerPage=i,this.pagination.sortBy=n,this.pagination.descending=o;let s=`/sparkplug/edges?limit=${this.pagination.rowsPerPage}&offset=${this.pagination.rowsPerPage*(this.pagination.page-1)}`;try{this.messageText.length>0&&(s+=`&filterField=${this.filterField.value}&filterValue=${this.messageText}`);const r=await this.$api.get(s);this.edgeRows=r.data.results,this.pagination.rowsNumber=r.data.info.total,this.$router.currentRoute.value.name==="sparkplug"&&this.startPoll()}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}this.loading=!1},generateRowKey(e){return`${e.groupId}/${e.edgeNodeId}`},onDeleteSelected(){this.$q.dialog({component:ut,componentProps:{message:this.$t("sparkplug.bulkEdgeNodeDeleteMessage",{nodeCount:this.edgeSelected.length}),title:"Delete Edge Nodes",type:"error",okText:this.$t("shared.delete")}}).onOk(()=>{let e=this.edgeSelected.map(t=>`${t.groupId}/${t.edgeNodeId}`);try{this.$api.post("/sparkplug/edges?action=delete",{edgeNodeDescriptors:e}),this.$q.notify({type:"positive",message:"Successfully deleted selected hosts"})}catch(t){this.$q.notify({type:"negative",message:t.response.data.message})}this.edgeSelected=[],this.deviceSelected=[]})},onClickSampleCompression(e){this.compressionRow=e,this.showCompression=!0},onCloseSampleCompression(){this.compressionRow=null,this.showCompression=!1},async onClickRequestRebirth(e){try{await this.$api.post(`/sparkplug?action=requestRebirth&groupId=${e.groupId}&edgeNodeId=${e.edgeNodeId}`),this.$q.notify({type:"positive",message:"Rebirth requested successfully"})}catch(t){this.$q.notify({type:"negative",message:t.response.data.message})}},onClickNodeBirthDetails(e){this.nodeBirthRow=e,this.showNodeBirth=!0},onCloseNodeBirthDetails(){this.nodeBirthRow=null,this.showNodeBirth=!1},onClickDeviceBirthDetails(e){this.deviceBirthRow=e,this.showDeviceBirth=!0},onCloseDeviceBirthDetails(){this.deviceBirthRow=null,this.showDeviceBirth=!1},onClickBirthCopy(e){Lt(JSON.stringify(e,4)).then(()=>{this.$q.notify({type:"positive",message:"Successfully copied birth details"})}).catch(()=>{this.$q.notify({type:"negative",message:"Failed to copy birth details"})})},stopPoll(){clearTimeout(this.livePoll)},startPoll(){this.livePoll=setTimeout(()=>{this.updateGrid({pagination:this.pagination})},3e3)}},computed:{edgeSelectedRow(){return this.edgeSelected.length>0?this.edgeSelected[0]:null},deviceRows(){return this.edgeSelectedRow?this.edgeSelectedRow.devices:[]},deviceSelectedRow(){return this.deviceSelected.length>0?this.deviceSelected[0]:null}},watch:{messageText(){this.pagination.page=1,this.stopPoll(),this.updateGrid({pagination:this.pagination})},edgeSelected(){this.deviceSelected=[]},"pagination.rowsPerPage":{handler(){It("edgenodes",this.pagination.rowsPerPage)}},"devicePagination.rowsPerPage":{handler(){It("edgenodedevices",this.devicePagination.rowsPerPage)}}}}),dn={class:"chariot-edges-table-header"},ln={class:"chariot-edges-table-header-filter"},un={class:"row items-center"},hn={class:"row items-center"},cn={class:"row"},pn={class:"col-4 q-pr-md q-mt-lg"},fn={class:"col-4 q-pr-md q-mt-lg"},gn={class:"col-4 q-pr-md q-mt-lg"},mn={class:"row"},yn={class:"col-6 q-pr-md q-mt-lg"},wn={class:"col-6 q-pr-md q-mt-lg"};function vn(e,t,i,n,o,s){const r=te("DeviceBirthDetailsModal"),l=te("SampleCompressionModal"),h=te("NodeBirthDetailsModal");return I(),W("div",null,[a(Gt,{pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=u=>e.pagination=u),selected:e.edgeSelected,"onUpdate:selected":t[3]||(t[3]=u=>e.edgeSelected=u),"row-key":e.generateRowKey,onRequest:e.updateGrid,selection:"multiple",loading:e.loading,rows:e.edgeRows,columns:e.columns,"rows-per-page-options":[5,10,20,50,100]},{top:d(()=>[N("div",dn,[N("div",ln,[a(we,{debounce:"500",class:"chariot-edges-table-header-filter-text",modelValue:e.messageText,"onUpdate:modelValue":t[0]||(t[0]=u=>e.messageText=u),dense:"",outlined:"",label:"Filter"},null,8,["modelValue"]),a(ht,{class:"chariot-edges-table-header-filter-select q-ml-md",dense:"",outlined:"",label:"Filter Field",modelValue:e.filterField,"onUpdate:modelValue":t[1]||(t[1]=u=>e.filterField=u),options:e.filterOptions},null,8,["modelValue","options"])]),a(ie,{dense:"",style:{width:"180px"},disabled:this.edgeSelected.length===0,color:"negative",label:"Delete selected",onClick:e.onDeleteSelected},null,8,["disabled","onClick"])])]),"body-cell-clientId":d(u=>[a(De,{props:u},{default:d(()=>[a(ie,{flat:"",dense:"","no-caps":"",class:"chariot-grid-resource",label:u.row.clientId,color:"primary-light",to:`/mqttstatus?tab=clients&clientId=${u.row.clientId}`},null,8,["label","to"])]),_:2},1032,["props"])]),"body-cell-online":d(u=>[a(De,{props:u},{default:d(()=>[u.row.online===!0?(I(),q(de,{key:0,color:"positive",name:"check"})):(I(),q(de,{key:1,name:"close",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-actions":d(u=>[a(De,{props:u},{default:d(()=>[a(ie,{icon:"more_vert",color:"primary-light",flat:"",dense:""},{default:d(()=>[a(lt,null,{default:d(()=>[a(ae,{style:{"min-width":"180px"}},{default:d(()=>[Se((I(),q(P,{clickable:""},{default:d(()=>[a(R,{onClick:p=>e.onClickSampleCompression(u.row)},{default:d(()=>[N("div",un,w(e.$t("sparkplug.sample")),1)]),_:1},8,["onClick"])]),_:2},1024)),[[Pe]]),Se((I(),q(P,{clickable:""},{default:d(()=>[a(R,{onClick:p=>e.onClickNodeBirthDetails(u.row)},{default:d(()=>[N("div",hn,w(e.$t("sparkplug.nodeBirthDetails")),1)]),_:1},8,["onClick"])]),_:2},1024)),[[Pe]]),Se((I(),q(P,{clickable:""},{default:d(()=>[a(R,{onClick:p=>e.onClickRequestRebirth(u.row)},{default:d(()=>[...t[6]||(t[6]=[N("div",{class:"row items-center"}," Request Rebirth ",-1)])]),_:1},8,["onClick"])]),_:2},1024)),[[Pe]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["pagination","selected","row-key","onRequest","loading","rows","columns"]),N("div",cn,[N("div",pn,[a(ge,null,{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.nodeDetails")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.groupId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.groupId!==null?e.edgeSelectedRow.groupId:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.stateTopic")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.edgeNodeId!==null?e.edgeSelectedRow.edgeNodeId:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.online")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow!==null?e.readableBoolean(e.edgeSelectedRow.online):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.primaryId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.primaryId!==null?e.edgeSelectedRow.primaryId:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.metricsCount")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.metricsCount!==null?e.edgeSelectedRow.metricsCount:"-"),1)]),_:1})]),_:1})]),_:1}),e.edgeSelectedRow&&e.edgeSelectedRow.clientId?(I(),q(P,{key:0,to:`/mqttstatus?tab=clients&clientId=${e.edgeSelectedRow.clientId}`},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.clientId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.clientId!==null?e.edgeSelectedRow.clientId:"-"),1)]),_:1})]),_:1}),a(R,{avatar:""},{default:d(()=>[a(de,{color:"light",name:"link"})]),_:1})]),_:1},8,["to"])):(I(),q(P,{key:1},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.clientId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[...t[7]||(t[7]=[m("-",-1)])]),_:1})]),_:1})]),_:1})),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.ipAddress")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.ipAddress!==null?e.edgeSelectedRow.ipAddress:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastBirth")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.lastBirthReceived!==null?e.convertTimestamp(e.edgeSelectedRow.lastBirthReceived):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastDeath")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.lastDeathReceived!==null?e.convertTimestamp(e.edgeSelectedRow.lastDeathReceived):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastSeqNumber")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.lastSeqNumber!==null?e.edgeSelectedRow.lastSeqNumber:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.offlineCount")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.offlineCount!==null?e.edgeSelectedRow.offlineCount:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),N("div",fn,[a(ge,null,{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.historical")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.sessionHistoricalMetrics")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.sessionHistoricalMetrics!==null?e.edgeSelectedRow.sessionHistoricalMetrics:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lifetimeHistoricalMetrics")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.lifetimeHistoricalMetrics!==null?e.edgeSelectedRow.lifetimeHistoricalMetrics:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),N("div",gn,[a(ge,null,{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.compression")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.sampling")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow?e.readableBoolean(e.edgeSelectedRow.samplingCompression):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.average")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.averageCompression!==null?e.edgeSelectedRow.averageCompression:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.count")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.edgeSelectedRow&&e.edgeSelectedRow.sampledCount!==null?e.edgeSelectedRow.sampledCount:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),a(Gt,{class:"q-mt-lg",pagination:e.devicePagination,"onUpdate:pagination":t[4]||(t[4]=u=>e.devicePagination=u),selected:e.deviceSelected,"onUpdate:selected":t[5]||(t[5]=u=>e.deviceSelected=u),"row-key":"deviceId",selection:"single",rows:e.deviceRows,columns:e.deviceColumns,"rows-per-page-options":[5,10,20,50,100]},{"body-cell-actions":d(u=>[a(De,{props:u},{default:d(()=>[a(ie,{onClick:()=>e.onClickDeviceBirthDetails(u.row),flat:"",round:"",color:"primary-light",icon:"settings_input_antenna"},{default:d(()=>[a(ye,null,{default:d(()=>[m(w(e.$t("sparkplug.nodeDetails")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),"body-cell-lastBirthReceived":d(u=>[a(De,{props:u},{default:d(()=>[m(w(e.convertTimestamp(u.row.lastBirthReceived)),1)]),_:2},1032,["props"])]),"body-cell-lastDeathReceived":d(u=>[a(De,{props:u},{default:d(()=>[m(w(e.convertTimestamp(u.row.lastDeathReceived)),1)]),_:2},1032,["props"])]),"body-cell-online":d(u=>[a(De,{props:u},{default:d(()=>[u.row.online===!0?(I(),q(de,{key:0,color:"positive",name:"check"})):(I(),q(de,{key:1,name:"close",color:"negative"}))]),_:2},1032,["props"])]),_:1},8,["pagination","selected","rows","columns"]),N("div",mn,[N("div",yn,[a(ge,null,{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.deviceDetails")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.deviceId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.deviceId!==null?e.deviceSelectedRow.deviceId:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.online")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.online!==null?e.readableBoolean(e.deviceSelectedRow.online):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.metricsCount")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.metricsCount!==null?e.deviceSelectedRow.metricsCount:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastBirth")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.lastBirthReceived!==null?e.convertTimestamp(e.deviceSelectedRow.lastBirthReceived):"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lastDeath")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.lastDeathReceived!==null?e.convertTimestamp(e.deviceSelectedRow.lastDeathReceived):"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),N("div",wn,[a(ge,null,{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[m(w(e.$t("sparkplug.historical")),1)]),_:1})]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.sessionHistoricalMetrics")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.sessionHistoricalMetrics!==null?e.deviceSelectedRow.sessionHistoricalMetrics:"-"),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.lifetimeHistoricalMetrics")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.deviceSelectedRow&&e.deviceSelectedRow.lifetimeHistoricalMetrics!==null?e.deviceSelectedRow.lifetimeHistoricalMetrics:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),e.showDeviceBirth?(I(),q(r,{key:0,"group-id":e.edgeSelectedRow.groupId,"edge-node-id":e.edgeSelectedRow.edgeNodeId,"device-id":e.deviceBirthRow.deviceId,onClose:e.onCloseDeviceBirthDetails},null,8,["group-id","edge-node-id","device-id","onClose"])):be("",!0),e.showCompression?(I(),q(l,{key:1,"group-id":e.compressionRow.groupId,"edge-node-id":e.compressionRow.edgeNodeId,onClose:e.onCloseSampleCompression},null,8,["group-id","edge-node-id","onClose"])):be("",!0),e.showNodeBirth?(I(),q(h,{key:2,"group-id":e.nodeBirthRow.groupId,"edge-node-id":e.nodeBirthRow.edgeNodeId,onClose:e.onCloseNodeBirthDetails},null,8,["group-id","edge-node-id","onClose"])):be("",!0)])}const bn=Ne(an,[["render",vn]]),zt=$i({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const i=ki(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${n.length!==0?" "+n:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>Di("div",{class:i.value},Si(t.default))}});var rt={exports:{}},Ut;function $n(){if(Ut)return rt.exports;Ut=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(v,C,L){return Function.prototype.apply.call(v,C,L)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:i=function(v){return Object.getOwnPropertyNames(v)};function n($){console&&console.warn&&console.warn($)}var o=Number.isNaN||function(v){return v!==v};function s(){s.init.call(this)}rt.exports=s,rt.exports.once=F,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var r=10;function l($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function($){if(typeof $!="number"||$<0||o($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");r=$}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||o(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function h($){return $._maxListeners===void 0?s.defaultMaxListeners:$._maxListeners}s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(v){for(var C=[],L=1;L<arguments.length;L++)C.push(arguments[L]);var U=v==="error",M=this._events;if(M!==void 0)U=U&&M.error===void 0;else if(!U)return!1;if(U){var H;if(C.length>0&&(H=C[0]),H instanceof Error)throw H;var le=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw le.context=H,le}var Q=M[v];if(Q===void 0)return!1;if(typeof Q=="function")t(Q,this,C);else for(var c=Q.length,Be=E(Q,c),L=0;L<c;++L)t(Be[L],this,C);return!0};function u($,v,C,L){var U,M,H;if(l(C),M=$._events,M===void 0?(M=$._events=Object.create(null),$._eventsCount=0):(M.newListener!==void 0&&($.emit("newListener",v,C.listener?C.listener:C),M=$._events),H=M[v]),H===void 0)H=M[v]=C,++$._eventsCount;else if(typeof H=="function"?H=M[v]=L?[C,H]:[H,C]:L?H.unshift(C):H.push(C),U=h($),U>0&&H.length>U&&!H.warned){H.warned=!0;var le=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");le.name="MaxListenersExceededWarning",le.emitter=$,le.type=v,le.count=H.length,n(le)}return $}s.prototype.addListener=function(v,C){return u(this,v,C,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(v,C){return u(this,v,C,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g($,v,C){var L={fired:!1,wrapFn:void 0,target:$,type:v,listener:C},U=p.bind(L);return U.listener=C,L.wrapFn=U,U}s.prototype.once=function(v,C){return l(C),this.on(v,g(this,v,C)),this},s.prototype.prependOnceListener=function(v,C){return l(C),this.prependListener(v,g(this,v,C)),this},s.prototype.removeListener=function(v,C){var L,U,M,H,le;if(l(C),U=this._events,U===void 0)return this;if(L=U[v],L===void 0)return this;if(L===C||L.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete U[v],U.removeListener&&this.emit("removeListener",v,L.listener||C));else if(typeof L!="function"){for(M=-1,H=L.length-1;H>=0;H--)if(L[H]===C||L[H].listener===C){le=L[H].listener,M=H;break}if(M<0)return this;M===0?L.shift():z(L,M),L.length===1&&(U[v]=L[0]),U.removeListener!==void 0&&this.emit("removeListener",v,le||C)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(v){var C,L,U;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[v]),this;if(arguments.length===0){var M=Object.keys(L),H;for(U=0;U<M.length;++U)H=M[U],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=L[v],typeof C=="function")this.removeListener(v,C);else if(C!==void 0)for(U=C.length-1;U>=0;U--)this.removeListener(v,C[U]);return this};function b($,v,C){var L=$._events;if(L===void 0)return[];var U=L[v];return U===void 0?[]:typeof U=="function"?C?[U.listener||U]:[U]:C?j(U):E(U,U.length)}s.prototype.listeners=function(v){return b(this,v,!0)},s.prototype.rawListeners=function(v){return b(this,v,!1)},s.listenerCount=function($,v){return typeof $.listenerCount=="function"?$.listenerCount(v):_.call($,v)},s.prototype.listenerCount=_;function _($){var v=this._events;if(v!==void 0){var C=v[$];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function E($,v){for(var C=new Array(v),L=0;L<v;++L)C[L]=$[L];return C}function z($,v){for(;v+1<$.length;v++)$[v]=$[v+1];$.pop()}function j($){for(var v=new Array($.length),C=0;C<v.length;++C)v[C]=$[C].listener||$[C];return v}function F($,v){return new Promise(function(C,L){function U(H){$.removeListener(v,M),L(H)}function M(){typeof $.removeListener=="function"&&$.removeListener("error",U),C([].slice.call(arguments))}J($,v,M,{once:!0}),v!=="error"&&V($,U,{once:!0})})}function V($,v,C){typeof $.on=="function"&&J($,"error",v,C)}function J($,v,C,L){if(typeof $.on=="function")L.once?$.once(v,C):$.on(v,C);else if(typeof $.addEventListener=="function")$.addEventListener(v,function U(M){L.once&&$.removeEventListener(v,U),C(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return rt.exports}var kn=$n();function Dn(){const e=arguments[0];for(let t=1,i=arguments.length;t<i;t++)if(arguments[t])for(const n in arguments[t])e[n]=arguments[t][n];return e}let ne=Dn;typeof Object.assign=="function"&&(ne=Object.assign);function ce(e,t,i,n){const o=e._nodes.get(t);let s=null;return o&&(n==="mixed"?s=o.out&&o.out[i]||o.undirected&&o.undirected[i]:n==="directed"?s=o.out&&o.out[i]:s=o.undirected&&o.undirected[i]),s}function oe(e){return typeof e=="object"&&e!==null}function si(e){let t;for(t in e)return!1;return!0}function he(e,t,i){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:i})}function pe(e,t,i){const n={enumerable:!0,configurable:!0};typeof i=="function"?n.get=i:(n.value=i,n.writable=!1),Object.defineProperty(e,t,n)}function Mt(e){return!(!oe(e)||e.attributes&&!Array.isArray(e.attributes))}function Sn(){let e=Math.floor(Math.random()*256)&255;return()=>e++}function Ie(){const e=arguments;let t=null,i=-1;return{[Symbol.iterator](){return this},next(){let n=null;do{if(t===null){if(i++,i>=e.length)return{done:!0};t=e[i][Symbol.iterator]()}if(n=t.next(),n.done){t=null;continue}break}while(!0);return n}}}function He(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class Rt extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class G extends Rt{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,G.prototype.constructor)}}class D extends Rt{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,D.prototype.constructor)}}class A extends Rt{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,A.prototype.constructor)}}function ri(e,t){this.key=e,this.attributes=t,this.clear()}ri.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function ai(e,t){this.key=e,this.attributes=t,this.clear()}ai.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function di(e,t){this.key=e,this.attributes=t,this.clear()}di.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ve(e,t,i,n,o){this.key=t,this.attributes=o,this.undirected=e,this.source=i,this.target=n}Ve.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const i=this.source.key,n=this.target.key;this.source[e][n]=this,!(this.undirected&&i===n)&&(this.target[t][i]=this)};Ve.prototype.attachMulti=function(){let e="out",t="in";const i=this.source.key,n=this.target.key;this.undirected&&(e=t="undirected");const o=this.source[e],s=o[n];if(typeof s>"u"){o[n]=this,this.undirected&&i===n||(this.target[t][i]=this);return}s.previous=this,this.next=s,o[n]=this,this.target[t][i]=this};Ve.prototype.detach=function(){const e=this.source.key,t=this.target.key;let i="out",n="in";this.undirected&&(i=n="undirected"),delete this.source[i][t],delete this.target[n][e]};Ve.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let i="out",n="in";this.undirected&&(i=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[i][t],delete this.target[n][e]):(this.next.previous=void 0,this.source[i][t]=this.next,this.target[n][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const li=0,ui=1,In=2,hi=3;function _e(e,t,i,n,o,s,r){let l,h,u,p;if(n=""+n,i===li){if(l=e._nodes.get(n),!l)throw new D(`Graph.${t}: could not find the "${n}" node in the graph.`);u=o,p=s}else if(i===hi){if(o=""+o,h=e._edges.get(o),!h)throw new D(`Graph.${t}: could not find the "${o}" edge in the graph.`);const g=h.source.key,b=h.target.key;if(n===g)l=h.target;else if(n===b)l=h.source;else throw new D(`Graph.${t}: the "${n}" node is not attached to the "${o}" edge (${g}, ${b}).`);u=s,p=r}else{if(h=e._edges.get(n),!h)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`);i===ui?l=h.source:l=h.target,u=o,p=s}return[l,u,p]}function _n(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);return r.attributes[l]}}function En(e,t,i){e.prototype[t]=function(n,o){const[s]=_e(this,t,i,n,o);return s.attributes}}function Cn(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);return r.attributes.hasOwnProperty(l)}}function Gn(e,t,i){e.prototype[t]=function(n,o,s,r){const[l,h,u]=_e(this,t,i,n,o,s,r);return l.attributes[h]=u,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function Nn(e,t,i){e.prototype[t]=function(n,o,s,r){const[l,h,u]=_e(this,t,i,n,o,s,r);if(typeof u!="function")throw new G(`Graph.${t}: updater should be a function.`);const p=l.attributes,g=u(p[h]);return p[h]=g,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function Ln(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);return delete r.attributes[l],this.emit("nodeAttributesUpdated",{key:r.key,type:"remove",attributes:r.attributes,name:l}),this}}function Rn(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);if(!oe(l))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return r.attributes=l,this.emit("nodeAttributesUpdated",{key:r.key,type:"replace",attributes:r.attributes}),this}}function An(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);if(!oe(l))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return ne(r.attributes,l),this.emit("nodeAttributesUpdated",{key:r.key,type:"merge",attributes:r.attributes,data:l}),this}}function Tn(e,t,i){e.prototype[t]=function(n,o,s){const[r,l]=_e(this,t,i,n,o,s);if(typeof l!="function")throw new G(`Graph.${t}: provided updater is not a function.`);return r.attributes=l(r.attributes),this.emit("nodeAttributesUpdated",{key:r.key,type:"update",attributes:r.attributes}),this}}const Pn=[{name:e=>`get${e}Attribute`,attacher:_n},{name:e=>`get${e}Attributes`,attacher:En},{name:e=>`has${e}Attribute`,attacher:Cn},{name:e=>`set${e}Attribute`,attacher:Gn},{name:e=>`update${e}Attribute`,attacher:Nn},{name:e=>`remove${e}Attribute`,attacher:Ln},{name:e=>`replace${e}Attributes`,attacher:Rn},{name:e=>`merge${e}Attributes`,attacher:An},{name:e=>`update${e}Attributes`,attacher:Tn}];function Bn(e){Pn.forEach(function({name:t,attacher:i}){i(e,t("Node"),li),i(e,t("Source"),ui),i(e,t("Target"),In),i(e,t("Opposite"),hi)})}function qn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return s.attributes[o]}}function On(e,t,i){e.prototype[t]=function(n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,r=""+arguments[1];if(o=ce(this,s,r,i),!o)throw new D(`Graph.${t}: could not find an edge for the given path ("${s}" - "${r}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return o.attributes}}function zn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return s.attributes.hasOwnProperty(o)}}function Un(e,t,i){e.prototype[t]=function(n,o,s){let r;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,h=""+o;if(o=arguments[2],s=arguments[3],r=ce(this,l,h,i),!r)throw new D(`Graph.${t}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return r.attributes[o]=s,this.emit("edgeAttributesUpdated",{key:r.key,type:"set",attributes:r.attributes,name:o}),this}}function Mn(e,t,i){e.prototype[t]=function(n,o,s){let r;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,h=""+o;if(o=arguments[2],s=arguments[3],r=ce(this,l,h,i),!r)throw new D(`Graph.${t}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof s!="function")throw new G(`Graph.${t}: updater should be a function.`);return r.attributes[o]=s(r.attributes[o]),this.emit("edgeAttributesUpdated",{key:r.key,type:"set",attributes:r.attributes,name:o}),this}}function Hn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return delete s.attributes[o],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:o}),this}}function Vn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!oe(o))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function jn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!oe(o))throw new G(`Graph.${t}: provided attributes are not a plain object.`);return ne(s.attributes,o),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:o}),this}}function Fn(e,t,i){e.prototype[t]=function(n,o){let s;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new A(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new A(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,l=""+o;if(o=arguments[2],s=ce(this,r,l,i),!s)throw new D(`Graph.${t}: could not find an edge for the given path ("${r}" - "${l}").`)}else{if(i!=="mixed")throw new A(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new D(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof o!="function")throw new G(`Graph.${t}: provided updater is not a function.`);return s.attributes=o(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Wn=[{name:e=>`get${e}Attribute`,attacher:qn},{name:e=>`get${e}Attributes`,attacher:On},{name:e=>`has${e}Attribute`,attacher:zn},{name:e=>`set${e}Attribute`,attacher:Un},{name:e=>`update${e}Attribute`,attacher:Mn},{name:e=>`remove${e}Attribute`,attacher:Hn},{name:e=>`replace${e}Attributes`,attacher:Vn},{name:e=>`merge${e}Attributes`,attacher:jn},{name:e=>`update${e}Attributes`,attacher:Fn}];function Qn(e){Wn.forEach(function({name:t,attacher:i}){i(e,t("Edge"),"mixed"),i(e,t("DirectedEdge"),"directed"),i(e,t("UndirectedEdge"),"undirected")})}const Kn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Zn(e,t,i,n){let o=!1;for(const s in t){if(s===n)continue;const r=t[s];if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),e&&o)return r.key}}function Yn(e,t,i,n){let o,s,r,l=!1;for(const h in t)if(h!==n){o=t[h];do{if(s=o.source,r=o.target,l=i(o.key,o.attributes,s.key,r.key,s.attributes,r.attributes,o.undirected),e&&l)return o.key;o=o.next}while(o!==void 0)}}function vt(e,t){const i=Object.keys(e),n=i.length;let o,s=0;return{[Symbol.iterator](){return this},next(){do if(o)o=o.next;else{if(s>=n)return{done:!0};const r=i[s++];if(r===t){o=void 0;continue}o=e[r]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}}}}function Jn(e,t,i,n){const o=t[i];if(!o)return;const s=o.source,r=o.target;if(n(o.key,o.attributes,s.key,r.key,s.attributes,r.attributes,o.undirected)&&e)return o.key}function Xn(e,t,i,n){let o=t[i];if(!o)return;let s=!1;do{if(s=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),e&&s)return o.key;o=o.next}while(o!==void 0)}function bt(e,t){let i=e[t];if(i.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!i)return{done:!0};const o={edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected};return i=i.next,{done:!1,value:o}}};let n=!1;return{[Symbol.iterator](){return this},next(){return n===!0?{done:!0}:(n=!0,{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}})}}}function xn(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return Array.from(e._edges.keys());const i=t==="undirected"?e.undirectedSize:e.directedSize,n=new Array(i),o=t==="undirected",s=e._edges.values();let r=0,l,h;for(;l=s.next(),l.done!==!0;)h=l.value,h.undirected===o&&(n[r++]=h.key);return n}function ci(e,t,i,n){if(t.size===0)return;const o=i!=="mixed"&&i!==t.type,s=i==="undirected";let r,l,h=!1;const u=t._edges.values();for(;r=u.next(),r.done!==!0;){if(l=r.value,o&&l.undirected!==s)continue;const{key:p,attributes:g,source:b,target:_}=l;if(h=n(p,g,b.key,_.key,b.attributes,_.attributes,l.undirected),e&&h)return p}}function eo(e,t){if(e.size===0)return He();const i=t!=="mixed"&&t!==e.type,n=t==="undirected",o=e._edges.values();return{[Symbol.iterator](){return this},next(){let s,r;for(;;){if(s=o.next(),s.done)return s;if(r=s.value,!(i&&r.undirected!==n))break}return{value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected},done:!1}}}}function At(e,t,i,n,o,s){const r=t?Yn:Zn;let l;if(i!=="undirected"&&(n!=="out"&&(l=r(e,o.in,s),e&&l)||n!=="in"&&(l=r(e,o.out,s,n?void 0:o.key),e&&l))||i!=="directed"&&(l=r(e,o.undirected,s),e&&l))return l}function to(e,t,i,n){const o=[];return At(!1,e,t,i,n,function(s){o.push(s)}),o}function io(e,t,i){let n=He();return e!=="undirected"&&(t!=="out"&&typeof i.in<"u"&&(n=Ie(n,vt(i.in))),t!=="in"&&typeof i.out<"u"&&(n=Ie(n,vt(i.out,t?void 0:i.key)))),e!=="directed"&&typeof i.undirected<"u"&&(n=Ie(n,vt(i.undirected))),n}function Tt(e,t,i,n,o,s,r){const l=i?Xn:Jn;let h;if(t!=="undirected"&&(typeof o.in<"u"&&n!=="out"&&(h=l(e,o.in,s,r),e&&h)||typeof o.out<"u"&&n!=="in"&&(n||o.key!==s)&&(h=l(e,o.out,s,r),e&&h))||t!=="directed"&&typeof o.undirected<"u"&&(h=l(e,o.undirected,s,r),e&&h))return h}function no(e,t,i,n,o){const s=[];return Tt(!1,e,t,i,n,o,function(r){s.push(r)}),s}function oo(e,t,i,n){let o=He();return e!=="undirected"&&(typeof i.in<"u"&&t!=="out"&&n in i.in&&(o=Ie(o,bt(i.in,n))),typeof i.out<"u"&&t!=="in"&&n in i.out&&(t||i.key!==n)&&(o=Ie(o,bt(i.out,n)))),e!=="directed"&&typeof i.undirected<"u"&&n in i.undirected&&(o=Ie(o,bt(i.undirected,n))),o}function so(e,t){const{name:i,type:n,direction:o}=t;e.prototype[i]=function(s,r){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return xn(this,n);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new D(`Graph.${i}: could not find the "${s}" node in the graph.`);return to(this.multi,n==="mixed"?this.type:n,o,l)}if(arguments.length===2){s=""+s,r=""+r;const l=this._nodes.get(s);if(!l)throw new D(`Graph.${i}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(r))throw new D(`Graph.${i}:  could not find the "${r}" target node in the graph.`);return no(n,this.multi,o,l,r)}throw new G(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ro(e,t){const{name:i,type:n,direction:o}=t,s="forEach"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[s]=function(u,p,g){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return g=u,ci(!1,this,n,g);if(arguments.length===2){u=""+u,g=p;const b=this._nodes.get(u);if(typeof b>"u")throw new D(`Graph.${s}: could not find the "${u}" node in the graph.`);return At(!1,this.multi,n==="mixed"?this.type:n,o,b,g)}if(arguments.length===3){u=""+u,p=""+p;const b=this._nodes.get(u);if(!b)throw new D(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(p))throw new D(`Graph.${s}:  could not find the "${p}" target node in the graph.`);return Tt(!1,n,this.multi,o,b,p,g)}throw new G(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const r="map"+i[0].toUpperCase()+i.slice(1);e.prototype[r]=function(){const u=Array.prototype.slice.call(arguments),p=u.pop();let g;if(u.length===0){let b=0;n!=="directed"&&(b+=this.undirectedSize),n!=="undirected"&&(b+=this.directedSize),g=new Array(b);let _=0;u.push((E,z,j,F,V,J,$)=>{g[_++]=p(E,z,j,F,V,J,$)})}else g=[],u.push((b,_,E,z,j,F,V)=>{g.push(p(b,_,E,z,j,F,V))});return this[s].apply(this,u),g};const l="filter"+i[0].toUpperCase()+i.slice(1);e.prototype[l]=function(){const u=Array.prototype.slice.call(arguments),p=u.pop(),g=[];return u.push((b,_,E,z,j,F,V)=>{p(b,_,E,z,j,F,V)&&g.push(b)}),this[s].apply(this,u),g};const h="reduce"+i[0].toUpperCase()+i.slice(1);e.prototype[h]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new G(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new G(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,g;u.length===2?(p=u[0],g=u[1],u=[]):u.length===3?(p=u[1],g=u[2],u=[u[0]]):u.length===4&&(p=u[2],g=u[3],u=[u[0],u[1]]);let b=g;return u.push((_,E,z,j,F,V,J)=>{b=p(b,_,E,z,j,F,V,J)}),this[s].apply(this,u),b}}function ao(e,t){const{name:i,type:n,direction:o}=t,s="find"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[s]=function(h,u,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return p=h,ci(!0,this,n,p);if(arguments.length===2){h=""+h,p=u;const g=this._nodes.get(h);if(typeof g>"u")throw new D(`Graph.${s}: could not find the "${h}" node in the graph.`);return At(!0,this.multi,n==="mixed"?this.type:n,o,g,p)}if(arguments.length===3){h=""+h,u=""+u;const g=this._nodes.get(h);if(!g)throw new D(`Graph.${s}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(u))throw new D(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return Tt(!0,n,this.multi,o,g,u,p)}throw new G(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const r="some"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[r]=function(){const h=Array.prototype.slice.call(arguments),u=h.pop();return h.push((g,b,_,E,z,j,F)=>u(g,b,_,E,z,j,F)),!!this[s].apply(this,h)};const l="every"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[l]=function(){const h=Array.prototype.slice.call(arguments),u=h.pop();return h.push((g,b,_,E,z,j,F)=>!u(g,b,_,E,z,j,F)),!this[s].apply(this,h)}}function lo(e,t){const{name:i,type:n,direction:o}=t,s=i.slice(0,-1)+"Entries";e.prototype[s]=function(r,l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return He();if(!arguments.length)return eo(this,n);if(arguments.length===1){r=""+r;const h=this._nodes.get(r);if(!h)throw new D(`Graph.${s}: could not find the "${r}" node in the graph.`);return io(n,o,h)}if(arguments.length===2){r=""+r,l=""+l;const h=this._nodes.get(r);if(!h)throw new D(`Graph.${s}:  could not find the "${r}" source node in the graph.`);if(!this._nodes.has(l))throw new D(`Graph.${s}:  could not find the "${l}" target node in the graph.`);return oo(n,o,h,l)}throw new G(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function uo(e){Kn.forEach(t=>{so(e,t),ro(e,t),ao(e,t),lo(e,t)})}const ho=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function pt(){this.A=null,this.B=null}pt.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};pt.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function Qe(e,t,i,n,o){for(const s in n){const r=n[s],l=r.source,h=r.target,u=l===i?h:l;if(t&&t.has(u.key))continue;const p=o(u.key,u.attributes);if(e&&p)return u.key}}function Pt(e,t,i,n,o){if(t!=="mixed"){if(t==="undirected")return Qe(e,null,n,n.undirected,o);if(typeof i=="string")return Qe(e,null,n,n[i],o)}const s=new pt;let r;if(t!=="undirected"){if(i!=="out"){if(r=Qe(e,null,n,n.in,o),e&&r)return r;s.wrap(n.in)}if(i!=="in"){if(r=Qe(e,s,n,n.out,o),e&&r)return r;s.wrap(n.out)}}if(t!=="directed"&&(r=Qe(e,s,n,n.undirected,o),e&&r))return r}function co(e,t,i){if(e!=="mixed"){if(e==="undirected")return Object.keys(i.undirected);if(typeof t=="string")return Object.keys(i[t])}const n=[];return Pt(!1,e,t,i,function(o){n.push(o)}),n}function Ke(e,t,i){const n=Object.keys(i),o=n.length;let s=0;return{[Symbol.iterator](){return this},next(){let r=null;do{if(s>=o)return e&&e.wrap(i),{done:!0};const l=i[n[s++]],h=l.source,u=l.target;if(r=h===t?u:h,e&&e.has(r.key)){r=null;continue}}while(r===null);return{done:!1,value:{neighbor:r.key,attributes:r.attributes}}}}}function po(e,t,i){if(e!=="mixed"){if(e==="undirected")return Ke(null,i,i.undirected);if(typeof t=="string")return Ke(null,i,i[t])}let n=He();const o=new pt;return e!=="undirected"&&(t!=="out"&&(n=Ie(n,Ke(o,i,i.in))),t!=="in"&&(n=Ie(n,Ke(o,i,i.out)))),e!=="directed"&&(n=Ie(n,Ke(o,i,i.undirected))),n}function fo(e,t){const{name:i,type:n,direction:o}=t;e.prototype[i]=function(s){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];s=""+s;const r=this._nodes.get(s);if(typeof r>"u")throw new D(`Graph.${i}: could not find the "${s}" node in the graph.`);return co(n==="mixed"?this.type:n,o,r)}}function go(e,t){const{name:i,type:n,direction:o}=t,s="forEach"+i[0].toUpperCase()+i.slice(1,-1);e.prototype[s]=function(u,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;u=""+u;const g=this._nodes.get(u);if(typeof g>"u")throw new D(`Graph.${s}: could not find the "${u}" node in the graph.`);Pt(!1,n==="mixed"?this.type:n,o,g,p)};const r="map"+i[0].toUpperCase()+i.slice(1);e.prototype[r]=function(u,p){const g=[];return this[s](u,(b,_)=>{g.push(p(b,_))}),g};const l="filter"+i[0].toUpperCase()+i.slice(1);e.prototype[l]=function(u,p){const g=[];return this[s](u,(b,_)=>{p(b,_)&&g.push(b)}),g};const h="reduce"+i[0].toUpperCase()+i.slice(1);e.prototype[h]=function(u,p,g){if(arguments.length<3)throw new G(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let b=g;return this[s](u,(_,E)=>{b=p(b,_,E)}),b}}function mo(e,t){const{name:i,type:n,direction:o}=t,s=i[0].toUpperCase()+i.slice(1,-1),r="find"+s;e.prototype[r]=function(u,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;u=""+u;const g=this._nodes.get(u);if(typeof g>"u")throw new D(`Graph.${r}: could not find the "${u}" node in the graph.`);return Pt(!0,n==="mixed"?this.type:n,o,g,p)};const l="some"+s;e.prototype[l]=function(u,p){return!!this[r](u,p)};const h="every"+s;e.prototype[h]=function(u,p){return!this[r](u,(b,_)=>!p(b,_))}}function yo(e,t){const{name:i,type:n,direction:o}=t,s=i.slice(0,-1)+"Entries";e.prototype[s]=function(r){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return He();r=""+r;const l=this._nodes.get(r);if(typeof l>"u")throw new D(`Graph.${s}: could not find the "${r}" node in the graph.`);return po(n==="mixed"?this.type:n,o,l)}}function wo(e){ho.forEach(t=>{fo(e,t),go(e,t),mo(e,t),yo(e,t)})}function at(e,t,i,n,o){const s=n._nodes.values(),r=n.type;let l,h,u,p,g,b;for(;l=s.next(),l.done!==!0;){let _=!1;if(h=l.value,r!=="undirected"){p=h.out;for(u in p){g=p[u];do b=g.target,_=!0,o(h.key,b.key,h.attributes,b.attributes,g.key,g.attributes,g.undirected),g=g.next;while(g)}}if(r!=="directed"){p=h.undirected;for(u in p)if(!(t&&h.key>u)){g=p[u];do b=g.target,b.key!==u&&(b=g.source),_=!0,o(h.key,b.key,h.attributes,b.attributes,g.key,g.attributes,g.undirected),g=g.next;while(g)}}i&&!_&&o(h.key,null,h.attributes,null,null,null,null)}}function vo(e,t){const i={key:e};return si(t.attributes)||(i.attributes=ne({},t.attributes)),i}function bo(e,t,i){const n={key:t,source:i.source.key,target:i.target.key};return si(i.attributes)||(n.attributes=ne({},i.attributes)),e==="mixed"&&i.undirected&&(n.undirected=!0),n}function $o(e){if(!oe(e))throw new G('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new G("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!oe(e.attributes)||e.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ko(e){if(!oe(e))throw new G('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new G("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new G("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!oe(e.attributes)||e.attributes===null))throw new G("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new G("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Do=Sn(),So=new Set(["directed","undirected","mixed"]),Ht=new Set(["domain","_events","_eventsCount","_maxListeners"]),Io=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],_o={allowSelfLoops:!0,multi:!1,type:"mixed"};function Eo(e,t,i){if(i&&!oe(i))throw new G(`Graph.addNode: invalid attributes. Expecting an object but got "${i}"`);if(t=""+t,i=i||{},e._nodes.has(t))throw new A(`Graph.addNode: the "${t}" node already exist in the graph.`);const n=new e.NodeDataClass(t,i);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:i}),n}function Vt(e,t,i){const n=new e.NodeDataClass(t,i);return e._nodes.set(t,n),e.emit("nodeAdded",{key:t,attributes:i}),n}function pi(e,t,i,n,o,s,r,l){if(!n&&e.type==="undirected")throw new A(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new A(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!oe(l))throw new G(`Graph.${t}: invalid attributes. Expecting an object but got "${l}"`);if(s=""+s,r=""+r,l=l||{},!e.allowSelfLoops&&s===r)throw new A(`Graph.${t}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=e._nodes.get(s),u=e._nodes.get(r);if(!h)throw new D(`Graph.${t}: source node "${s}" not found.`);if(!u)throw new D(`Graph.${t}: target node "${r}" not found.`);const p={key:null,undirected:n,source:s,target:r,attributes:l};if(i)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new A(`Graph.${t}: the "${o}" edge already exists in the graph.`);if(!e.multi&&(n?typeof h.undirected[r]<"u":typeof h.out[r]<"u"))throw new A(`Graph.${t}: an edge linking "${s}" to "${r}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const g=new Ve(n,o,h,u,l);e._edges.set(o,g);const b=s===r;return n?(h.undirectedDegree++,u.undirectedDegree++,b&&(h.undirectedLoops++,e._undirectedSelfLoopCount++)):(h.outDegree++,u.inDegree++,b&&(h.directedLoops++,e._directedSelfLoopCount++)),e.multi?g.attachMulti():g.attach(),n?e._undirectedSize++:e._directedSize++,p.key=o,e.emit("edgeAdded",p),o}function Co(e,t,i,n,o,s,r,l,h){if(!n&&e.type==="undirected")throw new A(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&e.type==="directed")throw new A(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(h){if(typeof l!="function")throw new G(`Graph.${t}: invalid updater function. Expecting a function but got "${l}"`)}else if(!oe(l))throw new G(`Graph.${t}: invalid attributes. Expecting an object but got "${l}"`)}s=""+s,r=""+r;let u;if(h&&(u=l,l=void 0),!e.allowSelfLoops&&s===r)throw new A(`Graph.${t}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=e._nodes.get(s),g=e._nodes.get(r),b,_;if(!i&&(b=e._edges.get(o),b)){if((b.source.key!==s||b.target.key!==r)&&(!n||b.source.key!==r||b.target.key!==s))throw new A(`Graph.${t}: inconsistency detected when attempting to merge the "${o}" edge with "${s}" source & "${r}" target vs. ("${b.source.key}", "${b.target.key}").`);_=b}if(!_&&!e.multi&&p&&(_=n?p.undirected[r]:p.out[r]),_){const V=[_.key,!1,!1,!1];if(h?!u:!l)return V;if(h){const J=_.attributes;_.attributes=u(J),e.emit("edgeAttributesUpdated",{type:"replace",key:_.key,attributes:_.attributes})}else ne(_.attributes,l),e.emit("edgeAttributesUpdated",{type:"merge",key:_.key,attributes:_.attributes,data:l});return V}l=l||{},h&&u&&(l=u(l));const E={key:null,undirected:n,source:s,target:r,attributes:l};if(i)o=e._edgeKeyGenerator();else if(o=""+o,e._edges.has(o))throw new A(`Graph.${t}: the "${o}" edge already exists in the graph.`);let z=!1,j=!1;p||(p=Vt(e,s,{}),z=!0,s===r&&(g=p,j=!0)),g||(g=Vt(e,r,{}),j=!0),b=new Ve(n,o,p,g,l),e._edges.set(o,b);const F=s===r;return n?(p.undirectedDegree++,g.undirectedDegree++,F&&(p.undirectedLoops++,e._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,F&&(p.directedLoops++,e._directedSelfLoopCount++)),e.multi?b.attachMulti():b.attach(),n?e._undirectedSize++:e._directedSize++,E.key=o,e.emit("edgeAdded",E),[o,!0,z,j]}function Me(e,t){e._edges.delete(t.key);const{source:i,target:n,attributes:o}=t,s=t.undirected,r=i===n;s?(i.undirectedDegree--,n.undirectedDegree--,r&&(i.undirectedLoops--,e._undirectedSelfLoopCount--)):(i.outDegree--,n.inDegree--,r&&(i.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),s?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:o,source:i.key,target:n.key,undirected:s})}class Y extends kn.EventEmitter{constructor(t){if(super(),t=ne({},_o,t),typeof t.multi!="boolean")throw new G(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!So.has(t.type))throw new G(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new G(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const i=t.type==="mixed"?ri:t.type==="directed"?ai:di;he(this,"NodeDataClass",i);const n="geid_"+Do()+"_";let o=0;const s=()=>{let r;do r=n+o++;while(this._edges.has(r));return r};he(this,"_attributes",{}),he(this,"_nodes",new Map),he(this,"_edges",new Map),he(this,"_directedSize",0),he(this,"_undirectedSize",0),he(this,"_directedSelfLoopCount",0),he(this,"_undirectedSelfLoopCount",0),he(this,"_edgeKeyGenerator",s),he(this,"_options",t),Ht.forEach(r=>he(this,r,this[r])),pe(this,"order",()=>this._nodes.size),pe(this,"size",()=>this._edges.size),pe(this,"directedSize",()=>this._directedSize),pe(this,"undirectedSize",()=>this._undirectedSize),pe(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),pe(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),pe(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),pe(this,"multi",this._options.multi),pe(this,"type",this._options.type),pe(this,"allowSelfLoops",this._options.allowSelfLoops),pe(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,i){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&!o.undirected}else if(arguments.length===2){t=""+t,i=""+i;const n=this._nodes.get(t);return n?n.out.hasOwnProperty(i):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,i){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+t,o=this._edges.get(n);return!!o&&o.undirected}else if(arguments.length===2){t=""+t,i=""+i;const n=this._nodes.get(t);return n?n.undirected.hasOwnProperty(i):!1}throw new G(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,i){if(arguments.length===1){const n=""+t;return this._edges.has(n)}else if(arguments.length===2){t=""+t,i=""+i;const n=this._nodes.get(t);return n?typeof n.out<"u"&&n.out.hasOwnProperty(i)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(i):!1}throw new G(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,i){if(this.type==="undirected")return;if(t=""+t,i=""+i,this.multi)throw new A("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new D(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new D(`Graph.directedEdge: could not find the "${i}" target node in the graph.`);const o=n.out&&n.out[i]||void 0;if(o)return o.key}undirectedEdge(t,i){if(this.type==="directed")return;if(t=""+t,i=""+i,this.multi)throw new A("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new D(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new D(`Graph.undirectedEdge: could not find the "${i}" target node in the graph.`);const o=n.undirected&&n.undirected[i]||void 0;if(o)return o.key}edge(t,i){if(this.multi)throw new A("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new D(`Graph.edge: could not find the "${i}" target node in the graph.`);const o=n.out&&n.out[i]||n.undirected&&n.undirected[i]||void 0;if(o)return o.key}areDirectedNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in n.in||i in n.out}areOutNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in n.out}areInNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in n.in}areUndirectedNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:i in n.undirected}areNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(i in n.in||i in n.out)||this.type!=="directed"&&i in n.undirected}areInboundNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in n.in||this.type!=="directed"&&i in n.undirected}areOutboundNeighbors(t,i){t=""+t,i=""+i;const n=this._nodes.get(t);if(!n)throw new D(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in n.out||this.type!=="directed"&&i in n.undirected}inDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree}outDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree}directedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree}undirectedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree}inboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=i.undirectedDegree),this.type!=="undirected"&&(n+=i.inDegree),n}outboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=i.undirectedDegree),this.type!=="undirected"&&(n+=i.outDegree),n}degree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=i.undirectedDegree),this.type!=="undirected"&&(n+=i.inDegree+i.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree-i.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree-i.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree-i.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree-i.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=i.undirectedDegree,o+=i.undirectedLoops*2),this.type!=="undirected"&&(n+=i.inDegree,o+=i.directedLoops),n-o}outboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=i.undirectedDegree,o+=i.undirectedLoops*2),this.type!=="undirected"&&(n+=i.outDegree,o+=i.directedLoops),n-o}degreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=i.undirectedDegree,o+=i.undirectedLoops*2),this.type!=="undirected"&&(n+=i.inDegree+i.outDegree,o+=i.directedLoops*2),n-o}source(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.source: could not find the "${t}" edge in the graph.`);return i.source.key}target(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.target: could not find the "${t}" edge in the graph.`);return i.target.key}extremities(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[i.source.key,i.target.key]}opposite(t,i){t=""+t,i=""+i;const n=this._edges.get(i);if(!n)throw new D(`Graph.opposite: could not find the "${i}" edge in the graph.`);const o=n.source.key,s=n.target.key;if(t===o)return s;if(t===s)return o;throw new D(`Graph.opposite: the "${t}" node is not attached to the "${i}" edge (${o}, ${s}).`)}hasExtremity(t,i){t=""+t,i=""+i;const n=this._edges.get(t);if(!n)throw new D(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===i||n.target.key===i}isUndirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return i.undirected}isDirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!i.undirected}isSelfLoop(t){t=""+t;const i=this._edges.get(t);if(!i)throw new D(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return i.source===i.target}addNode(t,i){return Eo(this,t,i).key}mergeNode(t,i){if(i&&!oe(i))throw new G(`Graph.mergeNode: invalid attributes. Expecting an object but got "${i}"`);t=""+t,i=i||{};let n=this._nodes.get(t);return n?(i&&(ne(n.attributes,i),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:i})),[t,!1]):(n=new this.NodeDataClass(t,i),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0])}updateNode(t,i){if(i&&typeof i!="function")throw new G(`Graph.updateNode: invalid updater function. Expecting a function but got "${i}"`);t=""+t;let n=this._nodes.get(t);if(n){if(i){const s=n.attributes;n.attributes=i(s),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const o=i?i({}):{};return n=new this.NodeDataClass(t,o),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:o}),[t,!0]}dropNode(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new D(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if(this.type!=="undirected"){for(const o in i.out){n=i.out[o];do Me(this,n),n=n.next;while(n)}for(const o in i.in){n=i.in[o];do Me(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const o in i.undirected){n=i.undirected[o];do Me(this,n),n=n.next;while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:i.attributes})}dropEdge(t){let i;if(arguments.length>1){const n=""+arguments[0],o=""+arguments[1];if(i=ce(this,n,o,this.type),!i)throw new D(`Graph.dropEdge: could not find the "${n}" -> "${o}" edge in the graph.`)}else if(t=""+t,i=this._edges.get(t),!i)throw new D(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Me(this,i),this}dropDirectedEdge(t,i){if(arguments.length<2)throw new A("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new A("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,i=""+i;const n=ce(this,t,i,"directed");if(!n)throw new D(`Graph.dropDirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Me(this,n),this}dropUndirectedEdge(t,i){if(arguments.length<2)throw new A("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new A("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=ce(this,t,i,"undirected");if(!n)throw new D(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Me(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let i;for(;i=t.next(),i.done!==!0;)i.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,i){return this._attributes[t]=i,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,i){if(typeof i!="function")throw new G("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=i(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!oe(t))throw new G("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!oe(t))throw new G("Graph.mergeAttributes: provided attributes are not a plain object.");return ne(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new G("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,i){if(typeof t!="function")throw new G("Graph.updateEachNodeAttributes: expecting an updater function.");if(i&&!Mt(i))throw new G("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let o,s;for(;o=n.next(),o.done!==!0;)s=o.value,s.attributes=t(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:i||null})}updateEachEdgeAttributes(t,i){if(typeof t!="function")throw new G("Graph.updateEachEdgeAttributes: expecting an updater function.");if(i&&!Mt(i))throw new G("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let o,s,r,l;for(;o=n.next(),o.done!==!0;)s=o.value,r=s.source,l=s.target,s.attributes=t(s.key,s.attributes,r.key,l.key,r.attributes,l.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:i||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new G("Graph.forEachAdjacencyEntry: expecting a callback.");at(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new G("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");at(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new G("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");at(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new G("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");at(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new G("Graph.forEachNode: expecting a callback.");const i=this._nodes.values();let n,o;for(;n=i.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)}findNode(t){if(typeof t!="function")throw new G("Graph.findNode: expecting a callback.");const i=this._nodes.values();let n,o;for(;n=i.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return o.key}mapNodes(t){if(typeof t!="function")throw new G("Graph.mapNode: expecting a callback.");const i=this._nodes.values();let n,o;const s=new Array(this.order);let r=0;for(;n=i.next(),n.done!==!0;)o=n.value,s[r++]=t(o.key,o.attributes);return s}someNode(t){if(typeof t!="function")throw new G("Graph.someNode: expecting a callback.");const i=this._nodes.values();let n,o;for(;n=i.next(),n.done!==!0;)if(o=n.value,t(o.key,o.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new G("Graph.everyNode: expecting a callback.");const i=this._nodes.values();let n,o;for(;n=i.next(),n.done!==!0;)if(o=n.value,!t(o.key,o.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new G("Graph.filterNodes: expecting a callback.");const i=this._nodes.values();let n,o;const s=[];for(;n=i.next(),n.done!==!0;)o=n.value,t(o.key,o.attributes)&&s.push(o.key);return s}reduceNodes(t,i){if(typeof t!="function")throw new G("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new G("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=i;const o=this._nodes.values();let s,r;for(;s=o.next(),s.done!==!0;)r=s.value,n=t(n,r.key,r.attributes);return n}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const i=t.next();if(i.done)return i;const n=i.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let i=0;this._nodes.forEach((o,s)=>{t[i++]=vo(s,o)});const n=new Array(this._edges.size);return i=0,this._edges.forEach((o,s)=>{n[i++]=bo(this.type,s,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,i=!1){if(t instanceof Y)return t.forEachNode((h,u)=>{i?this.mergeNode(h,u):this.addNode(h,u)}),t.forEachEdge((h,u,p,g,b,_,E)=>{i?E?this.mergeUndirectedEdgeWithKey(h,p,g,u):this.mergeDirectedEdgeWithKey(h,p,g,u):E?this.addUndirectedEdgeWithKey(h,p,g,u):this.addDirectedEdgeWithKey(h,p,g,u)}),this;if(!oe(t))throw new G("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!oe(t.attributes))throw new G("Graph.import: invalid attributes. Expecting a plain object.");i?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,o,s,r,l;if(t.nodes){if(s=t.nodes,!Array.isArray(s))throw new G("Graph.import: invalid nodes. Expecting an array.");for(n=0,o=s.length;n<o;n++){r=s[n],$o(r);const{key:h,attributes:u}=r;i?this.mergeNode(h,u):this.addNode(h,u)}}if(t.edges){let h=!1;if(this.type==="undirected"&&(h=!0),s=t.edges,!Array.isArray(s))throw new G("Graph.import: invalid edges. Expecting an array.");for(n=0,o=s.length;n<o;n++){l=s[n],ko(l);const{source:u,target:p,attributes:g,undirected:b=h}=l;let _;"key"in l?(_=i?b?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:b?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,_.call(this,l.key,u,p,g)):(_=i?b?this.mergeUndirectedEdge:this.mergeDirectedEdge:b?this.addUndirectedEdge:this.addDirectedEdge,_.call(this,u,p,g))}}return this}nullCopy(t){const i=new Y(ne({},this._options,t));return i.replaceAttributes(ne({},this.getAttributes())),i}emptyCopy(t){const i=this.nullCopy(t);return this._nodes.forEach((n,o)=>{const s=ne({},n.attributes);n=new i.NodeDataClass(o,s),i._nodes.set(o,n)}),i}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new A(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new A("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new A("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const i=this.emptyCopy(t),n=this._edges.values();let o,s;for(;o=n.next(),o.done!==!0;)s=o.value,pi(i,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,ne({},s.attributes));return i}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((s,r)=>{t[r]=s.attributes});const i={},n={};this._edges.forEach((s,r)=>{const l=s.undirected?"--":"->";let h="",u=s.source.key,p=s.target.key,g;s.undirected&&u>p&&(g=u,u=p,p=g);const b=`(${u})${l}(${p})`;r.startsWith("geid_")?this.multi&&(typeof n[b]>"u"?n[b]=0:n[b]++,h+=`${n[b]}. `):h+=`[${r}]: `,h+=b,i[h]=s.attributes});const o={};for(const s in this)this.hasOwnProperty(s)&&!Ht.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(o[s]=this[s]);return o.attributes=this._attributes,o.nodes=t,o.edges=i,he(o,"constructor",this.constructor),o}}typeof Symbol<"u"&&(Y.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y.prototype.inspect);Io.forEach(e=>{["add","merge","update"].forEach(t=>{const i=e.name(t),n=t==="add"?pi:Co;e.generateKey?Y.prototype[i]=function(o,s,r){return n(this,i,!0,(e.type||this.type)==="undirected",null,o,s,r,t==="update")}:Y.prototype[i]=function(o,s,r,l){return n(this,i,!1,(e.type||this.type)==="undirected",o,s,r,l,t==="update")}})});Bn(Y);Qn(Y);uo(Y);wo(Y);class fi extends Y{constructor(t){const i=ne({type:"directed"},t);if("multi"in i&&i.multi!==!1)throw new G("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="directed")throw new G('DirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class gi extends Y{constructor(t){const i=ne({type:"undirected"},t);if("multi"in i&&i.multi!==!1)throw new G("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="undirected")throw new G('UndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class mi extends Y{constructor(t){const i=ne({multi:!0},t);if("multi"in i&&i.multi!==!0)throw new G("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(i)}}class yi extends Y{constructor(t){const i=ne({type:"directed",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new G("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="directed")throw new G('MultiDirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class wi extends Y{constructor(t){const i=ne({type:"undirected",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new G("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="undirected")throw new G('MultiUndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}function je(e){e.from=function(t,i){const n=ne({},t.options,i),o=new e(n);return o.import(t),o}}je(Y);je(fi);je(gi);je(mi);je(yi);je(wi);Y.Graph=Y;Y.DirectedGraph=fi;Y.UndirectedGraph=gi;Y.MultiGraph=mi;Y.MultiDirectedGraph=yi;Y.MultiUndirectedGraph=wi;Y.InvalidArgumentsGraphError=G;Y.NotFoundGraphError=D;Y.UsageGraphError=A;var $t,jt;function Go(){return jt||(jt=1,$t=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),$t}var Ze={},Ft;function No(){if(Ft)return Ze;Ft=1;function e(n){return typeof n!="number"||isNaN(n)?1:n}function t(n,o){var s={},r=function(u){return typeof u>"u"?o:u};typeof o=="function"&&(r=o);var l=function(u){return r(u[n])},h=function(){return r(void 0)};return typeof n=="string"?(s.fromAttributes=l,s.fromGraph=function(u,p){return l(u.getNodeAttributes(p))},s.fromEntry=function(u,p){return l(p)}):typeof n=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(u,p){return r(n(p,u.getNodeAttributes(p)))},s.fromEntry=function(u,p){return r(n(u,p))}):(s.fromAttributes=h,s.fromGraph=h,s.fromEntry=h),s}function i(n,o){var s={},r=function(u){return typeof u>"u"?o:u};typeof o=="function"&&(r=o);var l=function(u){return r(u[n])},h=function(){return r(void 0)};return typeof n=="string"?(s.fromAttributes=l,s.fromGraph=function(u,p){return l(u.getEdgeAttributes(p))},s.fromEntry=function(u,p){return l(p)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof n=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(u,p){var g=u.extremities(p);return r(n(p,u.getEdgeAttributes(p),g[0],g[1],u.getNodeAttributes(g[0]),u.getNodeAttributes(g[1]),u.isUndirected(p)))},s.fromEntry=function(u,p,g,b,_,E,z){return r(n(u,p,g,b,_,E,z))},s.fromPartialEntry=function(u,p,g,b){return r(n(u,p,g,b))},s.fromMinimalEntry=function(u,p){return r(n(u,p))}):(s.fromAttributes=h,s.fromGraph=h,s.fromEntry=h,s.fromMinimalEntry=h),s}return Ze.createNodeValueGetter=t,Ze.createEdgeValueGetter=i,Ze.createEdgeWeightGetter=function(n){return i(n,e)},Ze}var kt,Wt;function Lo(){if(Wt)return kt;Wt=1;var e=0,t=1,i=2,n=3,o=4,s=5,r=6,l=7,h=8,u=9,p=0,g=1,b=2,_=0,E=1,z=2,j=3,F=4,V=5,J=6,$=7,v=8,C=3,L=10,U=3,M=9,H=10;return kt=function(Q,c,Be){var ft,S,f,X,ee,Ee,qe,se,O,gt,me=c.length,vi=Be.length,Fe=Q.adjustSizes,bi=Q.barnesHutTheta*Q.barnesHutTheta,Ye,x,K,Z,$e,B,T,y=[];for(f=0;f<me;f+=L)c[f+o]=c[f+i],c[f+s]=c[f+n],c[f+i]=0,c[f+n]=0;if(Q.outboundAttractionDistribution){for(Ye=0,f=0;f<me;f+=L)Ye+=c[f+r];Ye/=me/L}if(Q.barnesHutOptimize){var Re=1/0,Oe=-1/0,Ae=1/0,ze=-1/0,ue,Ue,mt;for(f=0;f<me;f+=L)Re=Math.min(Re,c[f+e]),Oe=Math.max(Oe,c[f+e]),Ae=Math.min(Ae,c[f+t]),ze=Math.max(ze,c[f+t]);var Je=Oe-Re,Xe=ze-Ae;for(Je>Xe?(Ae-=(Je-Xe)/2,ze=Ae+Je):(Re-=(Xe-Je)/2,Oe=Re+Xe),y[0+_]=-1,y[0+E]=(Re+Oe)/2,y[0+z]=(Ae+ze)/2,y[0+j]=Math.max(Oe-Re,ze-Ae),y[0+F]=-1,y[0+V]=-1,y[0+J]=0,y[0+$]=0,y[0+v]=0,ft=1,f=0;f<me;f+=L)for(S=0,mt=C;;)if(y[S+V]>=0){c[f+e]<y[S+E]?c[f+t]<y[S+z]?ue=y[S+V]:ue=y[S+V]+M:c[f+t]<y[S+z]?ue=y[S+V]+M*2:ue=y[S+V]+M*3,y[S+$]=(y[S+$]*y[S+J]+c[f+e]*c[f+r])/(y[S+J]+c[f+r]),y[S+v]=(y[S+v]*y[S+J]+c[f+t]*c[f+r])/(y[S+J]+c[f+r]),y[S+J]+=c[f+r],S=ue;continue}else if(y[S+_]<0){y[S+_]=f;break}else{if(y[S+V]=ft*M,se=y[S+j]/2,O=y[S+V],y[O+_]=-1,y[O+E]=y[S+E]-se,y[O+z]=y[S+z]-se,y[O+j]=se,y[O+F]=O+M,y[O+V]=-1,y[O+J]=0,y[O+$]=0,y[O+v]=0,O+=M,y[O+_]=-1,y[O+E]=y[S+E]-se,y[O+z]=y[S+z]+se,y[O+j]=se,y[O+F]=O+M,y[O+V]=-1,y[O+J]=0,y[O+$]=0,y[O+v]=0,O+=M,y[O+_]=-1,y[O+E]=y[S+E]+se,y[O+z]=y[S+z]-se,y[O+j]=se,y[O+F]=O+M,y[O+V]=-1,y[O+J]=0,y[O+$]=0,y[O+v]=0,O+=M,y[O+_]=-1,y[O+E]=y[S+E]+se,y[O+z]=y[S+z]+se,y[O+j]=se,y[O+F]=y[S+F],y[O+V]=-1,y[O+J]=0,y[O+$]=0,y[O+v]=0,ft+=4,c[y[S+_]+e]<y[S+E]?c[y[S+_]+t]<y[S+z]?ue=y[S+V]:ue=y[S+V]+M:c[y[S+_]+t]<y[S+z]?ue=y[S+V]+M*2:ue=y[S+V]+M*3,y[S+J]=c[y[S+_]+r],y[S+$]=c[y[S+_]+e],y[S+v]=c[y[S+_]+t],y[ue+_]=y[S+_],y[S+_]=-1,c[f+e]<y[S+E]?c[f+t]<y[S+z]?Ue=y[S+V]:Ue=y[S+V]+M:c[f+t]<y[S+z]?Ue=y[S+V]+M*2:Ue=y[S+V]+M*3,ue===Ue)if(mt--){S=ue;continue}else{mt=C;break}y[Ue+_]=f;break}}if(Q.barnesHutOptimize)for(x=Q.scalingRatio,f=0;f<me;f+=L)for(S=0;;)if(y[S+V]>=0)if(B=Math.pow(c[f+e]-y[S+$],2)+Math.pow(c[f+t]-y[S+v],2),gt=y[S+j],4*gt*gt/B<bi){if(K=c[f+e]-y[S+$],Z=c[f+t]-y[S+v],Fe===!0?B>0?(T=x*c[f+r]*y[S+J]/B,c[f+i]+=K*T,c[f+n]+=Z*T):B<0&&(T=-x*c[f+r]*y[S+J]/Math.sqrt(B),c[f+i]+=K*T,c[f+n]+=Z*T):B>0&&(T=x*c[f+r]*y[S+J]/B,c[f+i]+=K*T,c[f+n]+=Z*T),S=y[S+F],S<0)break;continue}else{S=y[S+V];continue}else{if(Ee=y[S+_],Ee>=0&&Ee!==f&&(K=c[f+e]-c[Ee+e],Z=c[f+t]-c[Ee+t],B=K*K+Z*Z,Fe===!0?B>0?(T=x*c[f+r]*c[Ee+r]/B,c[f+i]+=K*T,c[f+n]+=Z*T):B<0&&(T=-x*c[f+r]*c[Ee+r]/Math.sqrt(B),c[f+i]+=K*T,c[f+n]+=Z*T):B>0&&(T=x*c[f+r]*c[Ee+r]/B,c[f+i]+=K*T,c[f+n]+=Z*T)),S=y[S+F],S<0)break;continue}else for(x=Q.scalingRatio,X=0;X<me;X+=L)for(ee=0;ee<X;ee+=L)K=c[X+e]-c[ee+e],Z=c[X+t]-c[ee+t],Fe===!0?(B=Math.sqrt(K*K+Z*Z)-c[X+h]-c[ee+h],B>0?(T=x*c[X+r]*c[ee+r]/B/B,c[X+i]+=K*T,c[X+n]+=Z*T,c[ee+i]-=K*T,c[ee+n]-=Z*T):B<0&&(T=100*x*c[X+r]*c[ee+r],c[X+i]+=K*T,c[X+n]+=Z*T,c[ee+i]-=K*T,c[ee+n]-=Z*T)):(B=Math.sqrt(K*K+Z*Z),B>0&&(T=x*c[X+r]*c[ee+r]/B/B,c[X+i]+=K*T,c[X+n]+=Z*T,c[ee+i]-=K*T,c[ee+n]-=Z*T));for(O=Q.gravity/Q.scalingRatio,x=Q.scalingRatio,f=0;f<me;f+=L)T=0,K=c[f+e],Z=c[f+t],B=Math.sqrt(Math.pow(K,2)+Math.pow(Z,2)),Q.strongGravityMode?B>0&&(T=x*c[f+r]*O):B>0&&(T=x*c[f+r]*O/B),c[f+i]-=K*T,c[f+n]-=Z*T;for(x=1*(Q.outboundAttractionDistribution?Ye:1),qe=0;qe<vi;qe+=U)X=Be[qe+p],ee=Be[qe+g],se=Be[qe+b],$e=Math.pow(se,Q.edgeWeightInfluence),K=c[X+e]-c[ee+e],Z=c[X+t]-c[ee+t],Fe===!0?(B=Math.sqrt(K*K+Z*Z)-c[X+h]-c[ee+h],Q.linLogMode?Q.outboundAttractionDistribution?B>0&&(T=-x*$e*Math.log(1+B)/B/c[X+r]):B>0&&(T=-x*$e*Math.log(1+B)/B):Q.outboundAttractionDistribution?B>0&&(T=-x*$e/c[X+r]):B>0&&(T=-x*$e)):(B=Math.sqrt(Math.pow(K,2)+Math.pow(Z,2)),Q.linLogMode?Q.outboundAttractionDistribution?B>0&&(T=-x*$e*Math.log(1+B)/B/c[X+r]):B>0&&(T=-x*$e*Math.log(1+B)/B):Q.outboundAttractionDistribution?(B=1,T=-x*$e/c[X+r]):(B=1,T=-x*$e)),B>0&&(c[X+i]+=K*T,c[X+n]+=Z*T,c[ee+i]-=K*T,c[ee+n]-=Z*T);var xe,We,et,Te,tt,it;if(Fe===!0)for(f=0;f<me;f+=L)c[f+u]!==1&&(xe=Math.sqrt(Math.pow(c[f+i],2)+Math.pow(c[f+n],2)),xe>H&&(c[f+i]=c[f+i]*H/xe,c[f+n]=c[f+n]*H/xe),We=c[f+r]*Math.sqrt((c[f+o]-c[f+i])*(c[f+o]-c[f+i])+(c[f+s]-c[f+n])*(c[f+s]-c[f+n])),et=Math.sqrt((c[f+o]+c[f+i])*(c[f+o]+c[f+i])+(c[f+s]+c[f+n])*(c[f+s]+c[f+n]))/2,Te=.1*Math.log(1+et)/(1+Math.sqrt(We)),tt=c[f+e]+c[f+i]*(Te/Q.slowDown),c[f+e]=tt,it=c[f+t]+c[f+n]*(Te/Q.slowDown),c[f+t]=it);else for(f=0;f<me;f+=L)c[f+u]!==1&&(We=c[f+r]*Math.sqrt((c[f+o]-c[f+i])*(c[f+o]-c[f+i])+(c[f+s]-c[f+n])*(c[f+s]-c[f+n])),et=Math.sqrt((c[f+o]+c[f+i])*(c[f+o]+c[f+i])+(c[f+s]+c[f+n])*(c[f+s]+c[f+n]))/2,Te=c[f+l]*Math.log(1+et)/(1+Math.sqrt(We)),c[f+l]=Math.min(1,Math.sqrt(Te*(Math.pow(c[f+i],2)+Math.pow(c[f+n],2))/(1+Math.sqrt(We)))),tt=c[f+e]+c[f+i]*(Te/Q.slowDown),c[f+e]=tt,it=c[f+t]+c[f+n]*(Te/Q.slowDown),c[f+t]=it);return{}},kt}var ke={},Qt;function Ro(){if(Qt)return ke;Qt=1;var e=10,t=3;return ke.assign=function(i){i=i||{};var n=Array.prototype.slice.call(arguments).slice(1),o,s,r;for(o=0,r=n.length;o<r;o++)if(n[o])for(s in n[o])i[s]=n[o][s];return i},ke.validateSettings=function(i){return"linLogMode"in i&&typeof i.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in i&&typeof i.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in i&&typeof i.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in i&&typeof i.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in i&&!(typeof i.scalingRatio=="number"&&i.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in i&&typeof i.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in i&&!(typeof i.gravity=="number"&&i.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in i&&!(typeof i.slowDown=="number"||i.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in i&&typeof i.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in i&&!(typeof i.barnesHutTheta=="number"&&i.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},ke.graphToByteArrays=function(i,n){var o=i.order,s=i.size,r={},l,h=new Float32Array(o*e),u=new Float32Array(s*t);return l=0,i.forEachNode(function(p,g){r[p]=l,h[l]=g.x,h[l+1]=g.y,h[l+2]=0,h[l+3]=0,h[l+4]=0,h[l+5]=0,h[l+6]=1,h[l+7]=1,h[l+8]=g.size||1,h[l+9]=g.fixed?1:0,l+=e}),l=0,i.forEachEdge(function(p,g,b,_,E,z,j){var F=r[b],V=r[_],J=n(p,g,b,_,E,z,j);h[F+6]+=J,h[V+6]+=J,u[l]=F,u[l+1]=V,u[l+2]=J,l+=t}),{nodes:h,edges:u}},ke.assignLayoutChanges=function(i,n,o){var s=0;i.updateEachNodeAttributes(function(r,l){return l.x=n[s],l.y=n[s+1],s+=e,o?o(r,l):l})},ke.readGraphPositions=function(i,n){var o=0;i.forEachNode(function(s,r){n[o]=r.x,n[o+1]=r.y,o+=e})},ke.collectLayoutChanges=function(i,n,o){for(var s=i.nodes(),r={},l=0,h=0,u=n.length;l<u;l+=e){if(o){var p=Object.assign({},i.getNodeAttributes(s[h]));p.x=n[l],p.y=n[l+1],p=o(s[h],p),r[s[h]]={x:p.x,y:p.y}}else r[s[h]]={x:n[l],y:n[l+1]};h++}return r},ke.createWorker=function(n){var o=window.URL||window.webkitURL,s=n.toString(),r=o.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),l=new Worker(r);return o.revokeObjectURL(r),l},ke}var Dt,Kt;function Ao(){return Kt||(Kt=1,Dt={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Dt}var St,Zt;function To(){if(Zt)return St;Zt=1;var e=Go(),t=No().createEdgeWeightGetter,i=Lo(),n=Ro(),o=Ao();function s(h,u,p){if(!e(u))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof p=="number"&&(p={iterations:p});var g=p.iterations;if(typeof g!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(g<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var b=t("getEdgeWeight"in p?p.getEdgeWeight:"weight").fromEntry,_=typeof p.outputReducer=="function"?p.outputReducer:null,E=n.assign({},o,p.settings),z=n.validateSettings(E);if(z)throw new Error("graphology-layout-forceatlas2: "+z.message);var j=n.graphToByteArrays(u,b),F;for(F=0;F<g;F++)i(E,j.nodes,j.edges);if(h){n.assignLayoutChanges(u,j.nodes,_);return}return n.collectLayoutChanges(u,j.nodes)}function r(h){var u=typeof h=="number"?h:h.order;return{barnesHutOptimize:u>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(u)}}var l=s.bind(null,!1);return l.assign=s.bind(null,!0),l.inferSettings=r,St=l,St}var Po=To();const Yt=Ii(Po),Bo={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#e3e3e3"};function qo(e,t){return I(),W("svg",Bo,[...t[0]||(t[0]=[N("path",{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},null,-1),N("path",{d:"M16 4.2c1.5 0 3 .6 4.2 1.7l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2m-3.3 2.5.8.8c.7-.7 1.6-1 2.5-1s1.8.3 2.5 1l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4M19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2m0 6H5v-4h14zM6 16h2v2H6zm3.5 0h2v2h-2zm3.5 0h2v2h-2z"},null,-1)])])}const Oo={render:qo},zo={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#e3e3e3"};function Uo(e,t){return I(),W("svg",zo,[...t[0]||(t[0]=[N("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),N("path",{d:"m21 7-9-5-9 5v10l9 5 9-5zm-9-2.71 5.91 3.28-3.01 1.67C14.17 8.48 13.14 8 12 8s-2.17.48-2.9 1.24L6.09 7.57zm-1 14.87-6-3.33V9.26L8.13 11c-.09.31-.13.65-.13 1 0 1.86 1.27 3.43 3 3.87zM10 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2m3 7.16v-3.28c1.73-.44 3-2.01 3-3.87 0-.35-.04-.69-.13-1.01L19 9.26v6.57z"},null,-1)])])}const Mo={render:Uo},Ho={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#e3e3e3"};function Vo(e,t){return I(),W("svg",Ho,[...t[0]||(t[0]=[N("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),N("path",{d:"M21 6.5a2.996 2.996 0 0 0-2.99 3.21l-2.03.68a4.47 4.47 0 0 0-3.22-2.32V5.91A3.02 3.02 0 0 0 15 3c0-1.66-1.34-3-3-3S9 1.34 9 3c0 1.4.96 2.57 2.25 2.91v2.16c-1.4.23-2.58 1.11-3.22 2.32l-2.04-.68C6 9.64 6 9.57 6 9.5c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3c1.06 0 1.98-.55 2.52-1.37l2.03.68c-.2 1.29.17 2.66 1.09 3.69l-1.41 1.77Q6.66 17 6 17c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3c0-.68-.22-1.3-.6-1.8l1.41-1.77c1.36.76 3.02.75 4.37 0l1.41 1.77c-.37.5-.59 1.12-.59 1.8 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3c-.44 0-.85.09-1.23.26l-1.41-1.77a4.49 4.49 0 0 0 1.09-3.69l2.03-.68c.53.82 1.46 1.37 2.52 1.37 1.66 0 3-1.34 3-3S22.66 6.5 21 6.5m-18 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1M6 21c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m5-18c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m1 12a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5m6 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m3-8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"},null,-1)])])}const jo={render:Vo},Fo={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#e3e3e3"};function Wo(e,t){return I(),W("svg",Fo,[...t[0]||(t[0]=[N("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),N("path",{d:"M3 6h18V4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3zm10 6H9v1.78c-.61.55-1 1.33-1 2.22s.39 1.67 1 2.22V20h4v-1.78c.61-.55 1-1.34 1-2.22s-.39-1.67-1-2.22zm-2 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M22 8h-6c-.5 0-1 .5-1 1v10c0 .5.5 1 1 1h6c.5 0 1-.5 1-1V9c0-.5-.5-1-1-1m-1 10h-4v-8h4z"},null,-1)])])}const Qo={render:Wo},Ko={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#e3e3e3"};function Zo(e,t){return I(),W("svg",Ko,[...t[0]||(t[0]=[N("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),N("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"},null,-1)])])}const Yo={render:Zo},Jo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M0%200h24v24H0V0zm0%200h24v24H0V0z'%20fill='none'/%3e%3cpath%20d='M16%204.2c1.5%200%203%20.6%204.2%201.7l.8-.8C19.6%203.7%2017.8%203%2016%203s-3.6.7-5%202.1l.8.8C13%204.8%2014.5%204.2%2016%204.2zm-3.3%202.5l.8.8c.7-.7%201.6-1%202.5-1s1.8.3%202.5%201l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3%201.4zM19%2013h-2V9h-2v4H5c-1.1%200-2%20.9-2%202v4c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2v-4c0-1.1-.9-2-2-2zm0%206H5v-4h14v4zM6%2016h2v2H6zm3.5%200h2v2h-2zm3.5%200h2v2h-2z'/%3e%3c/svg%3e",Xo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e3e3e3'%3e%3crect%20fill='none'%20height='24'%20width='24'%20y='0'/%3e%3cpath%20d='M21,7l-9-5L3,7v10l9,5l9-5L21,7z%20M12,4.29l5.91,3.28L14.9,9.24C14.17,8.48,13.14,8,12,8S9.83,8.48,9.1,9.24L6.09,7.57%20L12,4.29z%20M11,19.16l-6-3.33V9.26l3.13,1.74C8.04,11.31,8,11.65,8,12c0,1.86,1.27,3.43,3,3.87V19.16z%20M10,12c0-1.1,0.9-2,2-2%20s2,0.9,2,2s-0.9,2-2,2S10,13.1,10,12z%20M13,19.16v-3.28c1.73-0.44,3-2.01,3-3.87c0-0.35-0.04-0.69-0.13-1.01L19,9.26l0,6.57L13,19.16%20z'/%3e%3c/svg%3e",xo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2024%2024'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e3e3e3'%3e%3crect%20fill='none'%20height='24'%20width='24'/%3e%3cpath%20d='M21,6.5c-1.66,0-3,1.34-3,3c0,0.07,0,0.14,0.01,0.21l-2.03,0.68c-0.64-1.21-1.82-2.09-3.22-2.32V5.91%20C14.04,5.57,15,4.4,15,3c0-1.66-1.34-3-3-3S9,1.34,9,3c0,1.4,0.96,2.57,2.25,2.91v2.16c-1.4,0.23-2.58,1.11-3.22,2.32L5.99,9.71%20C6,9.64,6,9.57,6,9.5c0-1.66-1.34-3-3-3s-3,1.34-3,3s1.34,3,3,3c1.06,0,1.98-0.55,2.52-1.37l2.03,0.68%20c-0.2,1.29,0.17,2.66,1.09,3.69l-1.41,1.77C6.85,17.09,6.44,17,6,17c-1.66,0-3,1.34-3,3s1.34,3,3,3s3-1.34,3-3%20c0-0.68-0.22-1.3-0.6-1.8l1.41-1.77c1.36,0.76,3.02,0.75,4.37,0l1.41,1.77C15.22,18.7,15,19.32,15,20c0,1.66,1.34,3,3,3s3-1.34,3-3%20s-1.34-3-3-3c-0.44,0-0.85,0.09-1.23,0.26l-1.41-1.77c0.93-1.04,1.29-2.4,1.09-3.69l2.03-0.68c0.53,0.82,1.46,1.37,2.52,1.37%20c1.66,0,3-1.34,3-3S22.66,6.5,21,6.5z%20M3,10.5c-0.55,0-1-0.45-1-1c0-0.55,0.45-1,1-1s1,0.45,1,1C4,10.05,3.55,10.5,3,10.5z%20M6,21%20c-0.55,0-1-0.45-1-1c0-0.55,0.45-1,1-1s1,0.45,1,1C7,20.55,6.55,21,6,21z%20M11,3c0-0.55,0.45-1,1-1s1,0.45,1,1c0,0.55-0.45,1-1,1%20S11,3.55,11,3z%20M12,15c-1.38,0-2.5-1.12-2.5-2.5c0-1.38,1.12-2.5,2.5-2.5s2.5,1.12,2.5,2.5C14.5,13.88,13.38,15,12,15z%20M18,19%20c0.55,0,1,0.45,1,1c0,0.55-0.45,1-1,1s-1-0.45-1-1C17,19.45,17.45,19,18,19z%20M21,10.5c-0.55,0-1-0.45-1-1c0-0.55,0.45-1,1-1%20s1,0.45,1,1C22,10.05,21.55,10.5,21,10.5z'/%3e%3c/svg%3e",es="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M0%200h24v24H0V0z'%20fill='none'/%3e%3cpath%20d='M3%206h18V4H3c-1.1%200-2%20.9-2%202v12c0%201.1.9%202%202%202h4v-2H3V6zm10%206H9v1.78c-.61.55-1%201.33-1%202.22%200%20.89.39%201.67%201%202.22V20h4v-1.78c.61-.55%201-1.34%201-2.22s-.39-1.67-1-2.22V12zm-2%205.5c-.83%200-1.5-.67-1.5-1.5s.67-1.5%201.5-1.5%201.5.67%201.5%201.5-.67%201.5-1.5%201.5zM22%208h-6c-.5%200-1%20.5-1%201v10c0%20.5.5%201%201%201h6c.5%200%201-.5%201-1V9c0-.5-.5-1-1-1zm-1%2010h-4v-8h4v8z'/%3e%3c/svg%3e",ts="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M0%200h24v24H0V0z'%20fill='none'/%3e%3cpath%20d='M12%205.69l5%204.5V18h-2v-6H9v6H7v-7.81l5-4.5M12%203L2%2012h3v8h6v-6h2v6h6v-8h3L12%203z'/%3e%3c/svg%3e",is=Le({name:"OverviewTab",emits:["fullscreenClick","refresh"],components:{hostIcon:Oo,edgeIcon:Mo,groupIcon:jo,deviceIcon:Qo,homeIcon:Yo,NodeBirthDetailsModal:ii,DeviceBirthDetailsModal:ni,SampleCompressionModal:oi},data(){return{nodes:{},filterNodeList:[],allNodeList:[],searchedNode:null,hostDetails:null,edgeDetails:null,sigmaInstance:null,graph:null,loading:!1,isFullscreen:!1,showDevices:nt("sparkplugShowDevice")?nt("sparkplugShowDevice"):!1,showLineHighlight:nt("sparkplugLineHighlight")?nt("sparkplugLineHighlight"):!1,hoveredNode:null,hoveredNeighbors:new Set,loadingText:"Drawing...",group_nodes:{},edge_nodes:{},device_nodes:{},host_nodes:{},links:[],noneDeviceLinks:{},deviceLinks:{},selected_node:null,previewItems:[],hostCount:0,hostOnline:0,edgeNodeCount:0,edgeNodesOnline:0,groupCount:0,deviceCount:0,devicesOnline:0,showContextMenu:!1,contextMenu:[],nodeBirthSelection:null,showNodeBirth:!1,deviceBirthSelection:null,showDeviceBirth:!1,compressionSelection:null,showCompression:!1}},async created(){await this.getData(),this.drawGraph()},beforeUnmount(){this.sigmaInstance&&this.sigmaInstance.kill()},methods:{async getData(){this.loadingText="Gathering Data...",this.loading=!0;try{const e=await this.$api.get("/sparkplug/status");this.deviceCount=e.data.deviceCount,this.devicesOnline=e.data.devicesOnline,this.edgeNodeCount=e.data.edgeNodeCount,this.edgeNodesOnline=e.data.edgeNodesOnline,this.groupCount=e.data.groupCount,this.hostCount=e.data.hostCount,this.hostOnline=e.data.hostOnline,this.hostDetails=await this.$api.get("/sparkplug/hosts"),this.generateHostNodes(this.hostDetails.data),this.edgeDetails=await this.$api.get("/sparkplug/edges"),this.generateEdgeNodes(this.edgeDetails.data)}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}this.loading=!1},generateHostNodes(e){e.forEach((t,i)=>{this.host_nodes[`${t.stateTopic}-host`]={id:`${t.stateTopic}-host`,meta:{type:"host",data:t},name:t.stateTopic,icon:"host",online:t.online?"online":"offline"},this.noneDeviceLinks[`edge-host-${i}`]={source:"chariot",target:`${t.stateTopic}-host`}})},generateEdgeNodes(e){const t={};e.forEach((i,n)=>{t[i.groupId]||(t[i.groupId]=[i.groupId],this.group_nodes[`${i.groupId}-group`]={id:`${i.groupId}-group`,meta:{type:"group",data:{}},name:`${i.groupId}`,icon:"group"},this.noneDeviceLinks[`edge-group-${n}`]={source:"chariot",target:`${i.groupId}-group`}),this.edge_nodes[`${i.groupId}/${i.edgeNodeId}-edgenode`]={id:`${i.groupId}/${i.edgeNodeId}-edgenode`,showDevices:this.showDevices,meta:{type:"edge",data:{descriptor:`${i.groupId}/${i.edgeNodeId}`,...i}},name:`${i.edgeNodeId}`,icon:"edge",online:i.online?"online":"offline"},this.noneDeviceLinks[`edge-${n}`]={source:`${i.groupId}-group`,target:`${i.groupId}/${i.edgeNodeId}-edgenode`},i.devices.forEach(o=>{this.device_nodes[`${i.groupId}/${i.edgeNodeId}-${o.deviceId}-device`]={id:`${i.groupId}/${i.edgeNodeId}-${o.deviceId}-device`,name:`${o.deviceId}`,shown:this.showDevices,meta:{type:"device",data:{edgeNodeId:i.edgeNodeId,groupId:i.groupId,descriptor:`${i.groupId}/${i.edgeNodeId}/${o.deviceId}`,...o}}},this.edge_nodes[`${i.groupId}/${i.edgeNodeId}-edgenode`]!==void 0&&(this.deviceLinks[`${i.groupId}/${i.edgeNodeId}-${o.deviceId}-device`]={source:`${i.groupId}/${i.edgeNodeId}-edgenode`,target:`${i.groupId}/${i.edgeNodeId}-${o.deviceId}-device`})})})},async drawGraph(){const{default:e}=await yt(async()=>{const{default:l}=await import("./sigma.esm-DnGi9WQK.js");return{default:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])),{createNodeImageProgram:t}=await yt(async()=>{const{createNodeImageProgram:l}=await import("./sigma-node-image.esm-Cf-F9N9q.js");return{createNodeImageProgram:l}},__vite__mapDeps([28,1,4,2,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])),{NodeCircleProgram:i,createNodeCompoundProgram:n}=await yt(async()=>{const{NodeCircleProgram:l,createNodeCompoundProgram:h}=await import("./sigma-rendering.esm-TsJM0Ftn.js");return{NodeCircleProgram:l,createNodeCompoundProgram:h}},__vite__mapDeps([29,1]));this.setupGraph(),await this.clusteredLayout(this.graph);const o=Yt.inferSettings(this.graph);Yt.assign(this.graph,{settings:o,iterations:500});const s=t({padding:.25,size:{mode:"force",value:256},drawingMode:"color",colorAttribute:"pictoColor"}),r=n([i,s]);this.sigmaInstance=new e(this.graph,this.$refs.sigmaContainer,{settings:{defaultNodeSize:10,scalingMode:"outside"},labelColor:{color:this.getDarkMode?"#f0f0f0":"#425b65"},defaultNodeType:"pictogram",nodeProgramClasses:{pictogram:r},defaultDrawNodeHover:(l,h)=>{const u=h.size*1.4,p=h.x,g=h.y;l.beginPath(),l.arc(p,g,u,0,Math.PI*2,!0),l.closePath(),l.fillStyle=this.getDarkMode?"rgba(0, 87, 255, 0.5)":"rgba(3, 14, 90, 0.5)",l.fill()}}),this.sigmaInstance.on("clickNode",({node:l})=>{let h=this.getDarkMode?"#4c4c68":"#e2dfdf",u=this.getDarkMode?"#a1a0a0":"#bbb";this.selected_node&&this.graph.setNodeAttribute(this.selected_node.id,"color",h),this.graph.setNodeAttribute(l,"color",u),this.onNodeClick(l)}),this.sigmaInstance.on("enterNode",({node:l})=>{this.setHoveredNode(l),this.graph.setNodeAttribute(l,"labelColor","red")}),this.sigmaInstance.on("leaveNode",()=>{this.setHoveredNode(void 0)}),this.sigmaInstance.on("rightClickNode",({node:l})=>{this.showContextMenu=!0,this.rightClickNode=l,this.setContextMenu(this.rightClickNode)}),this.sigmaInstance.on("downStage",()=>{this.showContextMenu=!1,this.rightClickNode=null}),this.sigmaInstance.setSetting("nodeReducer",(l,h)=>{const u={...h};return this.showLineHighlight&&(this.searchedNode?.id===l?u.highlighted=!0:this.hoveredNeighbors&&!this.hoveredNeighbors.has(l)&&this.hoveredNode!==l&&this.hoveredNode!==null&&(u.label="",u.color=this.getDarkMode?"#2d2d3e":"white",u.pictoColor=this.getDarkMode?"#4c4c68":"#eeeeee")),u}),this.sigmaInstance.setSetting("edgeReducer",(l,h)=>{const u={...h};return this.showLineHighlight&&this.hoveredNode&&!this.graph.extremities(l).every(p=>p===this.hoveredNode||this.graph.areNeighbors(p,this.hoveredNode))&&(u.hidden=!0),u}),this.sigmaInstance.getCamera().animatedUnzoom({duration:600}),this.loading=!1},setupGraph(){this.graph=new Y,this.nodes={},this.allNodeList=[],this.filterNodeList=[];let e=fe.pickBy(this.device_nodes,i=>i.shown),t={};fe.each(e,(i,n)=>{this.deviceLinks[n]!==void 0&&(t[n]=this.deviceLinks[n])}),this.nodes={chariot:{id:"chariot",name:"Chariot",x:0,y:0,fixed:!0,icon:"home",meta:{type:"root",data:{}}},...this.host_nodes,...this.group_nodes,...this.edge_nodes,...e},this.allNodeList=fe.values(this.nodes),this.filterNodeList=fe.values(this.nodes),Object.values(this.nodes).forEach(i=>{let n=null,o=this.getDarkMode?"#f0f0f0":"#425b65",s=this.getDarkMode?"#4c4c68":"#e2dfdf",r=this.getDarkMode?"#6cf681":"#15977F",l=this.getDarkMode?"#f46f6f":"#97152D",h=18,u=fe.keys(this.nodes).length,p=u>100?11:u>50?15:16;switch(i.meta.type){case"host":n=Jo,o=i.online==="online"?r:l,h=p;break;case"edge":n=Xo,o=i.online==="online"?r:l,h=p;break;case"group":n=xo,h=p;break;case"device":n=es,o=i.meta.data.online?r:l,h=p-2;break;default:n=ts}this.graph.addNode(i.id,{label:i.name,size:h,pictoColor:o,color:s,meta:i.meta,image:n})}),fe.each(this.noneDeviceLinks,i=>{this.graph.addEdge(i.source,i.target,{size:1,color:this.getDarkMode?"rgba(0, 87, 255, 0.5)":"rgba(3, 14, 90, 0.5)"})}),fe.each(t,i=>{this.graph.addEdge(i.source,i.target,{size:1,color:this.getDarkMode?"rgba(0, 87, 255, 0.5)":"rgba(3, 14, 90, 0.5)"})})},svgToDataURI(e){const t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)},positionGroups(e,t,i,n){return new Promise(o=>{const s=e.filterNodes((l,h)=>h.meta&&h.meta.type==="group"),r=2*Math.PI/s.length;s.forEach((l,h)=>{const u=h*r,p=t+Math.cos(u)*n,g=i+Math.sin(u)*n;e.setNodeAttribute(l,"x",p),e.setNodeAttribute(l,"y",g)}),o()})},positionHosts(e,t){return new Promise(i=>{e.forEachNode((n,o)=>{const r=e.getNodeAttributes("chariot");if(o.meta&&o.meta.type==="host"){const l=Math.random()*2*Math.PI,h=r.x+Math.cos(l)*t,u=r.y+Math.sin(l)*t;e.setNodeAttribute(n,"x",h),e.setNodeAttribute(n,"y",u)}}),i()})},positionEdgeNodes(e,t){return new Promise(i=>{e.forEachNode((n,o)=>{if(o.meta&&o.meta.type==="edge"){const s=`${o.meta.data.groupId}-group`,r=e.getNodeAttributes(s);if(r){const l=Math.random()*2*Math.PI,h=r.x+Math.cos(l)*t,u=r.y+Math.sin(l)*t;e.setNodeAttribute(n,"x",h),e.setNodeAttribute(n,"y",u)}}}),i()})},positionDevices(e,t){return new Promise(i=>{e.forEachNode((n,o)=>{if(o.meta&&o.meta.type==="device"){const s=`${o.meta.data.groupId}/${o.meta.data.edgeNodeId}-edgenode`,r=e.getNodeAttributes(s);if(r){const l=Math.random()*2*Math.PI,h=r.x+Math.cos(l)*t,u=r.y+Math.sin(l)*t;e.setNodeAttribute(n,"x",h),e.setNodeAttribute(n,"y",u)}}}),i()})},async clusteredLayout(e){e.setNodeAttribute("chariot","x",0),e.setNodeAttribute("chariot","y",0),this.loadingText="Positioning groups...",await new Promise(l=>setTimeout(l,50)),await this.positionGroups(e,0,0,250),this.loadingText="Positioning hosts...",await new Promise(l=>setTimeout(l,50)),await this.positionHosts(e,50),this.loadingText="Positioning edges...",await new Promise(l=>setTimeout(l,50)),await this.positionEdgeNodes(e,20),this.loadingText="Positioning devices...",await new Promise(l=>setTimeout(l,50)),await this.positionDevices(e,50)},setHoveredNode(e){e&&(this.hoveredNode=e,this.hoveredNeighbors=new Set(this.graph.neighbors(e))),e||(this.hoveredNode=void 0,this.hoveredNeighbors=void 0),this.sigmaInstance.refresh({skipIndexation:!0})},setContextMenu(e){let t=this.sigmaInstance.getNodeDisplayData(e);this.contextMenu=[],t.meta.type==="edge"?this.contextMenu=[{label:this.edge_nodes[`${t.meta.data.groupId}/${t.meta.data.edgeNodeId}-edgenode`].showDevices?"Hide Device Nodes":"Show Device Nodes",action:()=>{this.onClickToggleDeviceNodes(e)}},{label:"Zoom to Node",action:()=>{this.onClickZoomToNode(e)}},{divider:!0},{label:"Edge Node Details",action:()=>{this.onClickEdgeNodeDetails(e)}},{label:"Node Birth Payload",action:()=>{this.onClickNodeBirthDetails(e)}},{label:"Sample Compression",action:()=>{this.onClickSampleCompression(e)}},{label:"Request Rebirth",action:()=>{this.onClickRequestRebirth(e)}},{divider:!0},{label:'<span class="text-negative">Delete Edge Node</span>',action:()=>{this.onDeleteEdgeNode(e)}}]:t.meta.type==="host"?this.contextMenu=[{label:"Zoom to Node",action:()=>{this.onClickZoomToNode(e)}},{divider:!0},{label:"Host Details",action:()=>{this.onClickHostNodeDetails(e)}},{divider:!0},{label:'<span class="text-negative">Delete Host</span>',action:()=>{this.onDeleteHost(e)}}]:t.meta.type==="device"?this.contextMenu=[{label:"Zoom to Node",action:()=>{this.onClickZoomToNode(e)}},{divider:!0},{label:"Device Birth Payload",action:()=>{this.onClickDeviceBirthDetails(e)}}]:this.contextMenu=[{label:"Zoom to Node",action:()=>{this.onClickZoomToNode(e)}}]},onClickEdgeNodeDetails(e){let t=this.sigmaInstance.getNodeDisplayData(e);this.$router.push({name:"sparkplug",query:{...this.$route.query,tab:"edge",clientId:t.meta.data.clientId}})},onClickHostNodeDetails(e){let t=this.sigmaInstance.getNodeDisplayData(e);this.$router.push({name:"sparkplug",query:{...this.$route.query,tab:"hosts",stateTopic:t.meta.data.stateTopic}})},onClickSampleCompression(e){this.compressionSelection=this.sigmaInstance.getNodeDisplayData(e),this.showCompression=!0},async onFireCompression(){this.$emit("refresh")},onCloseSampleCompression(){this.compressionSelection=null,this.showCompression=!1},onClickNodeBirthDetails(e){this.nodeBirthSelection=this.sigmaInstance.getNodeDisplayData(e),this.showNodeBirth=!0},onCloseNodeBirthDetails(){this.nodeBirthSelection=null,this.showNodeBirth=!1},onClickDeviceBirthDetails(e){this.deviceBirthSelection=this.sigmaInstance.getNodeDisplayData(e),this.showDeviceBirth=!0},onCloseDeviceBirthDetails(){this.deviceBirthSelection=null,this.showDeviceBirth=!1},async onClickRequestRebirth(e){let t=this.sigmaInstance.getNodeDisplayData(e);try{await this.$api.post(`/sparkplug?action=requestRebirth&groupId=${t.meta.data.groupId}&edgeNodeId=${t.meta.data.edgeNodeId}`),this.$q.notify({type:"positive",message:"Rebirth requested successfully"})}catch(i){this.$q.notify({type:"negative",message:i.response.data.message})}},onClickZoomToNode(e){const t=this.sigmaInstance.getCamera(),i=this.sigmaInstance.getNodeDisplayData(e);t.animate({x:i.x,y:i.y,ratio:.3},{duration:500,ratio:5})},onClickToggleDeviceNodes(e){let t=this.sigmaInstance.getNodeDisplayData(e);this.edge_nodes[`${t.meta.data.groupId}/${t.meta.data.edgeNodeId}-edgenode`].showDevices=!this.edge_nodes[`${t.meta.data.groupId}/${t.meta.data.edgeNodeId}-edgenode`].showDevices,t.meta.data.devices.forEach(i=>{this.device_nodes[`${t.meta.data.descriptor}-${i.deviceId}-device`].shown=this.edge_nodes[`${t.meta.data.groupId}/${t.meta.data.edgeNodeId}-edgenode`].showDevices}),this.reloadGraph()},onDeleteEdgeNode(e){let t=this.sigmaInstance.getNodeDisplayData(e),i=`${t.meta.data.groupId}/${t.meta.data.edgeNodeId}`;this.$q.dialog({component:ut,componentProps:{message:this.$t("sparkplug.singleEdgeNodeDelete",{edgeNodeId:i}),title:"Delete Edge Node",type:"error",okText:this.$t("shared.delete")}}).onOk(async()=>{try{await this.$api.post("/sparkplug/edges?action=delete",{edgeNodeDescriptors:[i]}),this.$q.notify({type:"positive",message:`Successfully deleted ${i} edge node`}),this.$emit("refresh")}catch(n){this.$q.notify({type:"negative",message:n.response.data.message})}})},onDeleteHost(e){let i=this.sigmaInstance.getNodeDisplayData(e).meta.data.stateTopic;this.$q.dialog({component:ut,componentProps:{message:`Are you sure you want to delete "${i}" host?`,title:"Delete Host",type:"error",okText:this.$t("shared.delete")}}).onOk(async()=>{try{await this.$api.post("/sparkplug/hosts?action=delete",{stateTopics:[i]}),this.$q.notify({type:"positive",message:`Successfully deleted ${i} host`}),this.$emit("refresh")}catch(n){this.$q.notify({type:"negative",message:n.response.data.message})}})},onSelectChange(){if(this.searchedNode){const e=this.sigmaInstance.getCamera(),t=this.sigmaInstance.getNodeDisplayData(this.searchedNode.id);e.animate({x:t.x,y:t.y,ratio:.1},{duration:500,ratio:5})}this.sigmaInstance.refresh({skipIndexation:!0})},onNodeClick(e){if(this.nodes[e]){this.selected_node=this.nodes[e];const t={edge:["groupId","edgeNodeId","online","primaryId","clientId","ipAddress","metricsCount","descriptor","averageCompression","sampledCount","samplingCompression"],host:["hostId","stateTopic","online","clientId","ipAddress"],device:["deviceId","online","metricsCount","descriptor"]};if(t[this.nodes[e].meta.type]!==void 0){let i=this.nodes[e].meta.data;const n=fe.pick(i,t[this.nodes[e].meta.type]);this.previewItems=Object.keys(n).map(o=>({field:o,value:n[o]}))}else this.previewItems=[]}},onSelectFilter(e,t,i){if(e.length<2){i();return}t(()=>{const n=e.toLowerCase();this.filterNodeList=this.allNodeList.filter(o=>o.name.toLowerCase().indexOf(n)>-1||o?.meta?.data?.descriptor?.toLowerCase().indexOf(n)>-1)})},onClickFullScreen(){this.isFullscreen=!this.isFullscreen,this.$nextTick(()=>{this.sigmaInstance.refresh({skipIndexation:!0})})},onClickShowDevices(){this.showDevices=!this.showDevices,Bt("sparkplugShowDevice",this.showDevices),fe.each(this.device_nodes,e=>{e.shown=this.showDevices}),fe.each(this.edge_nodes,e=>{e.showDevices=this.showDevices}),this.reloadGraph()},onClickToggleLineHighlight(){this.showLineHighlight=!this.showLineHighlight,Bt("sparkplugLineHighlight",this.showLineHighlight)},reloadGraph(){this.showContextMenu=!1,this.searchedNode=null,this.selected_node=null,this.previewItems=[],this.sigmaInstance.kill(),this.loading=!0,setTimeout(()=>{this.drawGraph()},100)},onClickZoom(){this.sigmaInstance.getCamera().animatedZoom({duration:600})},onClickUnzoom(){this.sigmaInstance.getCamera().animatedUnzoom({duration:600})},onClickReset(){const e=this.sigmaInstance.getCamera(),t=this.sigmaInstance.getNodeDisplayData("chariot");e.animate({x:t.x,y:t.y,ratio:1.1},{duration:500})},onClickRefreshGraph(){this.$emit("refresh")},onClickContextMenu(){this.setContextMenu(this.selected_node.id)}},computed:{...xt(_i,["username","email","getDarkMode"])},watch:{getDarkMode(){this.$emit("refresh")}}}),ns={class:"chariot-overview-header"},os={class:"chariot-overview-detail-panel"},ss=["innerHTML"],rs=["innerHTML"],as={ref:"sigmaContainer",class:"chariot-sigma-container"};function ds(e,t,i,n,o,s){const r=te("hostIcon"),l=te("groupIcon"),h=te("homeIcon"),u=te("edgeIcon"),p=te("deviceIcon"),g=te("SampleCompressionModal"),b=te("NodeBirthDetailsModal"),_=te("DeviceBirthDetailsModal");return I(),W("div",{class:Et(["chariot-overview-graph-body",{fullscreen:e.isFullscreen}])},[N("div",ns,[a(ie,{class:"q-mr-sm",onClick:e.onClickRefreshGraph,dense:"",icon:"refresh",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[1]||(t[1]=[m(" Refresh Graph ",-1)])]),_:1})]),_:1},8,["onClick"]),a(zt,{class:"q-mr-sm",push:""},{default:d(()=>[a(ie,{onClick:e.onClickShowDevices,dense:"",icon:e.showDevices?"phonelink_off":"phonelink",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[2]||(t[2]=[m(" Toggle Devices ",-1)])]),_:1})]),_:1},8,["onClick","icon"]),a(ie,{onClick:e.onClickToggleLineHighlight,dense:"",icon:e.showLineHighlight?"near_me_disabled":"near_me",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[3]||(t[3]=[m(" Toggle Path Highlight ",-1)])]),_:1})]),_:1},8,["onClick","icon"])]),_:1}),a(zt,{class:"q-mr-sm",push:""},{default:d(()=>[a(ie,{onClick:e.onClickZoom,dense:"",icon:"zoom_in",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[4]||(t[4]=[m(" Zoom In ",-1)])]),_:1})]),_:1},8,["onClick"]),a(ie,{onClick:e.onClickReset,dense:"",icon:"my_location",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[5]||(t[5]=[m(" Reset View ",-1)])]),_:1})]),_:1},8,["onClick"]),a(ie,{onClick:e.onClickUnzoom,dense:"",icon:"zoom_out",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[6]||(t[6]=[m(" Zoom Out ",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1}),a(ie,{onClick:e.onClickFullScreen,dense:"",icon:e.isFullscreen?"fullscreen_exit":"fullscreen",color:"primary"},{default:d(()=>[a(ye,null,{default:d(()=>[...t[7]||(t[7]=[m(" Toggle Fullscreen ",-1)])]),_:1})]),_:1},8,["onClick","icon"])]),N("div",os,[a(ge,{class:"chariot-overview-detail-panel-preview"},{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[...t[8]||(t[8]=[m("Sparkplug Nodes",-1)])]),_:1})]),_:1}),a(ve,{class:"q-pb-none"},{default:d(()=>[a(ht,{modelValue:e.searchedNode,"onUpdate:modelValue":[t[0]||(t[0]=E=>e.searchedNode=E),e.onSelectChange],label:"Select Edge, Device, Host or Group",clearable:"","use-input":"","fill-input":"","hide-selected":"","input-debounce":"0",onFilter:e.onSelectFilter,hint:"Two or more characters to search",dense:"","option-value":"id","option-label":"name",outlined:"",options:e.filterNodeList},{option:d(E=>[a(P,Jt(Xt(E.itemProps)),{default:d(()=>[a(R,{style:{"min-width":"25px"},avatar:""},{default:d(()=>[E.opt.icon==="host"?(I(),q(r,{key:0,class:"status-list-name"})):E.opt.icon==="group"?(I(),q(l,{key:1,class:"status-list-name"})):E.opt.icon==="home"?(I(),q(h,{key:2,class:"status-list-name"})):E.opt.icon==="edge"?(I(),q(u,{key:3,class:"status-list-name"})):(I(),q(p,{key:4,class:"status-list-name"}))]),_:2},1024),a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(E.opt.name),1)]),_:2},1024),a(k,{caption:""},{default:d(()=>[m(w(E.opt.meta.data.descriptor),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","onFilter","options","onUpdate:modelValue"])]),_:1}),a(ve,null,{default:d(()=>[a(ae,{separator:""},{default:d(()=>[a(P,null,{default:d(()=>[a(R,{style:{"min-width":"32px"},class:"q-pr-none",avatar:""},{default:d(()=>[a(r,{class:"status-list-name"})]),_:1}),a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[...t[9]||(t[9]=[m("Hosts",-1)])]),_:1}),a(k,{caption:""},{default:d(()=>[N("strong",null,w(e.hostOnline),1),m(" / "+w(e.hostCount),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,{style:{"min-width":"32px"},class:"q-pr-none",avatar:""},{default:d(()=>[a(u,{class:"status-list-name"})]),_:1}),a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[...t[10]||(t[10]=[m("Edges",-1)])]),_:1}),a(k,{caption:""},{default:d(()=>[N("strong",null,w(e.edgeNodesOnline),1),m(" / "+w(e.edgeNodeCount),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,{style:{"min-width":"32px"},class:"q-pr-none",avatar:""},{default:d(()=>[a(l,{class:"status-list-name"})]),_:1}),a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[...t[11]||(t[11]=[m("Groups",-1)])]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(e.groupCount),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:d(()=>[a(R,{style:{"min-width":"32px"},class:"q-pr-none",avatar:""},{default:d(()=>[a(p,{class:"status-list-name"})]),_:1}),a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[...t[12]||(t[12]=[m("Devices",-1)])]),_:1}),a(k,{caption:""},{default:d(()=>[N("strong",null,w(e.devicesOnline),1),m(" / "+w(e.deviceCount),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(ge,{class:"chariot-overview-detail-panel-preview"},{default:d(()=>[a(Ce,null,{default:d(()=>[a(Ge,null,{default:d(()=>[...t[13]||(t[13]=[m("Sparkplug Node Details",-1)])]),_:1}),this.selected_node&&(this.selected_node.meta.type==="edge"||this.selected_node.meta.type==="host"||this.selected_node.meta.type==="device")?(I(),q(ie,{key:0,onClick:e.onClickContextMenu,flat:"",dense:"",icon:"more_vert",color:"primary-light",size:"sm"},{default:d(()=>[a(lt,{"auto-close":""},{default:d(()=>[a(ae,{dense:"",style:{"min-width":"200px"}},{default:d(()=>[(I(!0),W(re,null,dt(e.contextMenu,(E,z)=>(I(),W(re,{key:`contextMenu_details_${z}`},[E.divider?(I(),q(Ct,{key:0})):(I(),q(P,{key:1,clickable:""},{default:d(()=>[a(R,{onClick:E.action},{default:d(()=>[N("span",{innerHTML:E.label},null,8,ss)]),_:2},1032,["onClick"])]),_:2},1024))],64))),128))]),_:1})]),_:1})]),_:1},8,["onClick"])):be("",!0)]),_:1}),a(ae,{style:{"max-height":"330px","overflow-y":"auto"},class:"status-list q-mb-none"},{default:d(()=>[e.previewItems.length===0?(I(),q(P,{key:0},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.selectNodeSelect")),1)]),_:1})]),_:1})]),_:1})):(I(!0),W(re,{key:1},dt(e.previewItems,(E,z)=>(I(),W(re,{key:z},[E.field==="clientId"&&E.value?(I(),q(P,{key:0,to:`/mqttstatus?tab=clients&clientId=${E.value}`},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t("sparkplug.clientId")),1)]),_:1}),a(k,{caption:""},{default:d(()=>[m(w(E.value),1)]),_:2},1024)]),_:2},1024),a(R,{avatar:""},{default:d(()=>[a(de,{color:"light",name:"link"})]),_:1})]),_:2},1032,["to"])):(I(),q(P,{key:1},{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(e.$t(`sparkplug.fields.${E.field}`)),1)]),_:2},1024),a(k,{caption:""},{default:d(()=>[typeof E.value=="number"&&E.value.toString().length===13?(I(),W(re,{key:0},[m(w(E.value),1)],64)):typeof E.value=="boolean"?(I(),W(re,{key:1},[E.value?(I(),q(de,{key:0,name:"check_circle",class:"text-positive"})):(I(),q(de,{key:1,name:"cancel",class:"text-negative"}))],64)):E.value===null?(I(),W(re,{key:2},[m("-")],64)):typeof E.value=="object"?(I(),W(re,{key:3},[m(w(Object.keys(E.value).length),1)],64)):(I(),W(re,{key:4},[m(w(E.value),1)],64))]),_:2},1024)]),_:2},1024)]),_:2},1024))],64))),128))]),_:1})]),_:1})]),e.showContextMenu?(I(),q(lt,{key:0,target:e.$refs.sigmaContainer,"touch-position":"","context-menu":"","auto-close":""},{default:d(()=>[a(ae,{dense:"",style:{"min-width":"200px"}},{default:d(()=>[(I(!0),W(re,null,dt(e.contextMenu,(E,z)=>(I(),W(re,{key:`contextMenu_node_${z}`},[E.divider?(I(),q(Ct,{key:0})):(I(),q(P,{key:1,clickable:""},{default:d(()=>[a(R,{onClick:E.action},{default:d(()=>[N("span",{innerHTML:E.label},null,8,rs)]),_:2},1032,["onClick"])]),_:2},1024))],64))),128))]),_:1})]),_:1},8,["target"])):be("",!0),N("div",as,null,512),a(Nt,{showing:e.loading,color:"primary",label:e.loadingText,"label-style":"font-size: 1.1em"},null,8,["showing","label"]),e.showCompression?(I(),q(g,{key:1,"group-id":e.compressionSelection.meta.data.groupId,"edge-node-id":e.compressionSelection.meta.data.edgeNodeId,onCompression:e.onFireCompression,onClose:e.onCloseSampleCompression},null,8,["group-id","edge-node-id","onCompression","onClose"])):be("",!0),e.showNodeBirth?(I(),q(b,{key:2,"group-id":e.nodeBirthSelection.meta.data.groupId,"edge-node-id":e.nodeBirthSelection.meta.data.edgeNodeId,onClose:e.onCloseNodeBirthDetails},null,8,["group-id","edge-node-id","onClose"])):be("",!0),e.showDeviceBirth?(I(),q(_,{key:3,"group-id":e.deviceBirthSelection.meta.data.groupId,"edge-node-id":e.deviceBirthSelection.meta.data.edgeNodeId,"device-id":e.deviceBirthSelection.meta.data.deviceId,onClose:e.onCloseDeviceBirthDetails},null,8,["group-id","edge-node-id","device-id","onClose"])):be("",!0)],2)}const ls=Ne(is,[["render",ds]]),us=Le({name:"ToolTab",setup:()=>({v$:Bi()}),components:{BasicModal:ct},data(){return{apiService:{},showPassword:!0,modalTitle:"",ACLType:"",dropdownGroupId:"",dropdownEdgeId:"",showACLModal:!1,formData:{username:"",password:"",hostId:null},formEdgeIds:[],edgeNodeList:[]}},validations(){return{formData:{username:{required:wt},password:{required:wt},hostId:{required:wt}}}},async created(){let e=[];try{(await this.$api.get("/sparkplug/edges")).data.forEach(i=>{this.edgeNodeList.push({edgeNodeId:i.edgeNodeId,groupId:i.groupId}),e.push(i.groupId)}),e=fe.uniq(e),e.forEach(i=>{this.edgeNodeList.push({groupId:i})})}catch(t){this.$q.notify({type:"negative",message:t.response.data.message})}},methods:{showGenerateModal(e){this.ACLType=e,this.modalTitle=this.ACLType==="edgenode"?this.$t("sparkplug.edgeNodeACLTitle"):this.$t("sparkplug.hostACLTitle"),this.showACLModal=!0},async onSaveGenerateACL(){if(await this.v$.$validate()){const t=this.ACLType==="edgenode"?"generateEdgeCreds":"generateHostCreds",i={...this.formData,sparkplugIds:this.formEdgeIds};try{const n=await this.$api.post(`/sparkplug?action=${t}`,i);this.$q.notify({type:"positive",message:n.data.message}),this.onCloseGenerateACL(),this.$router.push({path:"/mqttaccounts"})}catch(n){this.$q.notify({type:"negative",message:n.response.data.message})}}},onCloseGenerateACL(){this.showACLModal=!1,this.formData={username:"",password:"",hostId:null},this.formEdgeIds=[],this.v$.$reset()},addNode(e){let t={};e===void 0?t={edgeNodeId:this.dropdownEdgeId.length>0?this.dropdownEdgeId:null,groupId:this.dropdownGroupId.length>0?this.dropdownGroupId:null}:t={...e},this.formEdgeIds.push(t),this.dropdownEdgeId="",this.dropdownGroupId=""}},computed:{filteredNodeList(){return this.dropdownGroupId.length>0?this.edgeNodeList.filter(e=>e.groupId.includes(this.dropdownGroupId)):this.edgeNodeList}}}),hs={class:"row"},cs={class:"col-6"},ps={class:"q-hoverable"},fs={class:"col-6"},gs={class:"q-hoverable"},ms={class:"chariot-form-input"},ys={class:"chariot-form-input"},ws={class:"chariot-form-input"},vs={class:"chariot-form-input"},bs={class:"q-pa-md"},$s={class:"chariot-form-input"},ks={class:"chariot-form-input q-mt-md"},Ds={class:"chariot-add-popover-list"},Ss={key:0,class:"chariot-empty-list"},Is={key:0,style:{width:"235px"},class:"ellipsis"},_s={key:1,style:{width:"235px"},class:"ellipsis"};function Es(e,t,i,n,o,s){const r=te("BasicModal");return I(),W("div",null,[N("div",hs,[N("div",cs,[a(ge,{onClick:t[0]||(t[0]=l=>e.showGenerateModal("edgenode")),class:Et(["chariot-clickable-card","q-mr-md"])},{default:d(()=>[Se((I(),W("div",ps,[t[11]||(t[11]=N("span",{class:"q-focus-helper"},null,-1)),a(ve,null,{default:d(()=>[a(de,{class:"text-primary",size:"75px",name:"add_home"}),N("h5",null,w(e.$t("sparkplug.edgeNodeACLTitle")),1)]),_:1})])),[[qt]])]),_:1})]),N("div",fs,[a(ge,{onClick:t[1]||(t[1]=l=>e.showGenerateModal("host")),class:Et(["chariot-clickable-card","q-mr-md"])},{default:d(()=>[Se((I(),W("div",gs,[t[12]||(t[12]=N("span",{class:"q-focus-helper"},null,-1)),a(ve,null,{default:d(()=>[a(de,{class:"text-primary",size:"75px",name:"add_home_work"}),N("h5",null,w(e.$t("sparkplug.hostACLTitle")),1)]),_:1})])),[[qt]])]),_:1})])]),a(r,{ref:"toolFormModal",open:e.showACLModal,"show-footer":!0,title:e.modalTitle,onOnClose:e.onCloseGenerateACL,onOnSave:e.onSaveGenerateACL},{default:d(()=>[a(Pi,{class:"q-gutter-y-md column"},{default:d(()=>[N("div",null,[N("label",ms,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("shared.username")),1)]),_:1}),a(we,{modelValue:e.v$.formData.username.$model,"onUpdate:modelValue":t[2]||(t[2]=l=>e.v$.formData.username.$model=l),error:e.v$.formData.username.$error,"error-message":e.$t("shared.validation.required"),dense:"",outlined:""},null,8,["modelValue","error","error-message"])]),N("label",ys,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("shared.password")),1)]),_:1}),a(we,{modelValue:e.v$.formData.password.$model,"onUpdate:modelValue":t[4]||(t[4]=l=>e.v$.formData.password.$model=l),error:e.v$.formData.password.$error,"error-message":e.$t("shared.validation.required"),outlined:"",dense:"",type:e.showPassword?"password":"text"},{append:d(()=>[a(ie,{flat:"",dense:"",rounded:"",icon:e.showPassword?"visibility_off":"visibility",onClick:t[3]||(t[3]=l=>e.showPassword=!e.showPassword)},null,8,["icon"])]),_:1},8,["modelValue","error","error-message","type"])]),N("label",ws,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("shared.hostId")),1)]),_:1}),a(we,{modelValue:e.v$.formData.hostId.$model,"onUpdate:modelValue":t[5]||(t[5]=l=>e.v$.formData.hostId.$model=l),error:e.v$.formData.hostId.$error,"error-message":e.$t("shared.validation.required"),dense:"",outlined:""},null,8,["modelValue","error","error-message"])]),N("label",vs,[a(k,{class:"q-mb-sm"},{default:d(()=>[m(w(e.$t("sparkplug.sparkplugIds")),1)]),_:1}),a(ht,{modelValue:e.formEdgeIds,"onUpdate:modelValue":t[10]||(t[10]=l=>e.formEdgeIds=l),dense:"",outlined:"",options:e.formEdgeIds,"use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0"},{"selected-item":d(l=>[a(Ti,{removable:"",dense:"",onRemove:h=>l.removeAtIndex(l.index),tabindex:l.tabindex,color:"primary","text-color":"white",class:"q-ma-none"},{default:d(()=>[m(w(e.formEdgeIds[l.index].edgeNodeId?`${e.formEdgeIds[l.index].groupId}/${e.formEdgeIds[l.index].edgeNodeId}`:`${e.formEdgeIds[l.index].groupId}`),1)]),_:2},1032,["onRemove","tabindex"])]),option:d(l=>[a(P,Jt(Xt(l.itemProps)),{default:d(()=>[a(R,null,{default:d(()=>[a(k,null,{default:d(()=>[m(w(l.opt.groupId)+" "+w(l.opt.edgeNodeId),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),append:d(()=>[a(ie,{align:"left",flat:"",dense:"",round:"",icon:"domain_add",onClick:t[9]||(t[9]=Ei(()=>{},["stop","prevent"])),class:"cursor-pointer"},{default:d(()=>[a(Ri,null,{default:d(()=>[N("div",bs,[N("div",$s,[a(we,{label:e.$t("sparkplug.groupId"),modelValue:e.dropdownGroupId,"onUpdate:modelValue":t[6]||(t[6]=l=>e.dropdownGroupId=l),dense:"",outlined:""},null,8,["label","modelValue"])]),N("div",ks,[a(we,{label:e.$t("sparkplug.edgeNodeId"),modelValue:e.dropdownEdgeId,"onUpdate:modelValue":t[7]||(t[7]=l=>e.dropdownEdgeId=l),dense:"",outlined:""},null,8,["label","modelValue"])]),Se(a(ie,{onClick:t[8]||(t[8]=l=>e.addNode(void 0)),class:"q-mt-md",flat:"",round:"",label:"add"},null,512),[[Pe]])]),N("div",Ds,[e.filteredNodeList.length===0?(I(),W("div",Ss," No available nodes ")):(I(),q(ae,{key:1,style:{"min-width":"100px"}},{default:d(()=>[(I(!0),W(re,null,dt(e.filteredNodeList,(l,h)=>Se((I(),q(P,{key:h,clickable:"",onClick:u=>e.addNode(l)},{default:d(()=>[l.edgeNodeId?(I(),W("div",Is,[m(w(`${l.groupId}/${l.edgeNodeId}`)+" ",1),a(ye,{style:{"word-wrap":"break-word"}},{default:d(()=>[m(w(`${l.groupId}/${l.edgeNodeId}`),1)]),_:2},1024)])):(I(),W("div",_s,[m(w(`${l.groupId}`)+" ",1),a(ye,{style:{"word-wrap":"break-word"}},{default:d(()=>[m(w(`${l.groupId}`),1)]),_:2},1024)]))]),_:2},1032,["onClick"])),[[Pe]])),128))]),_:1}))])]),_:1})]),_:1})]),_:1},8,["modelValue","options"])])])]),_:1})]),_:1},8,["open","title","onOnClose","onOnSave"])])}const Cs=Ne(us,[["render",Es]]),Gs=Le({name:"SparkplugPage",components:{PageHeader:Ai,HostTab:Mi,EdgeTab:bn,OverviewTab:ls,ToolTab:Cs},data(){let e="overview";return this.$route?.query?.tab?e=this.$route?.query?.tab:this.$router.replace({name:"sparkplug",query:{tab:e}}),{tab:e,sparkplugEnabled:!0,sparkplugLite:!1,loading:!1,overviewIndex:0}},async created(){try{const e=await this.$api.get("/config/sparkplug");this.sparkplugEnabled=e.data.enabled,this.sparkplugLite=e.data.mode==="LITE"}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}},methods:{toggleSparkplug(){this.sparkplugEnabled=!this.sparkplugEnabled,this.updateSparkplug()},toggleMode(){this.sparkplugLite=!this.sparkplugLite,this.updateSparkplug()},async updateSparkplug(){try{await this.$api.put("/config/sparkplug",{enabled:this.sparkplugEnabled,mode:this.sparkplugLite?"LITE":"NORMAL"})}catch(e){this.$q.notify({type:"negative",message:e.response.data.message})}}},computed:{...xt(Ci,["helpUrl"])},watch:{tab(){this.$router.push({name:"sparkplug",query:{...this.$route.query,tab:this.tab}})},$route:{handler(){this.$route.query.tab&&(this.tab=this.$route.query.tab)}}}}),Ns={class:"row items-center"},Ls=["href"],Rs={class:"q-ma-none"};function As(e,t,i,n,o,s){const r=te("PageHeader"),l=te("OverviewTab"),h=te("HostTab"),u=te("EdgeTab"),p=te("ToolTab");return I(),q(Li,{class:"chariot-page-container"},{default:d(()=>[a(r,{title:"Sparkplug",icon:"bolt",help:!0},{append:d(()=>[e.sparkplugEnabled?(I(),q(ie,{key:0,color:"primary-light",icon:"more_vert",flat:"",dense:"",rounded:""},{default:d(()=>[a(lt,null,{default:d(()=>[a(ae,{style:{"min-width":"100px"}},{default:d(()=>[Se((I(),q(P,{clickable:""},{default:d(()=>[a(R,{onClick:e.toggleSparkplug},{default:d(()=>[...t[3]||(t[3]=[N("div",{class:"row items-center"}," Disable Sparkplug ",-1)])]),_:1},8,["onClick"])]),_:1})),[[Pe]]),Se((I(),q(P,{clickable:""},{default:d(()=>[a(R,{onClick:e.toggleMode},{default:d(()=>[N("div",Ns,w(e.sparkplugLite?"Disable Lite Mode":"Enable Lite Mode"),1)]),_:1},8,["onClick"])]),_:1})),[[Pe]])]),_:1})]),_:1})]),_:1})):be("",!0)]),popover:d(()=>[N("p",null,[m(w(e.$t("sparkplug.help"))+" ",1),N("a",{target:"_blank",href:`${e.helpUrl}/Chariot+MQTT+Server+Usage#ChariotMQTTServerUsage-Sparkplug`},w(e.$t("shared.moreDetails"))+"...",9,Ls)])]),_:1}),e.sparkplugLite&&e.sparkplugEnabled?(I(),q(Ot,{key:0,class:"bg-primary text-white q-mb-md"},{default:d(()=>[...t[4]||(t[4]=[m(" Lite mode is currently enabled, some features and information may be limited. ",-1)])]),_:1})):be("",!0),a(ge,{class:"chariot-page-container-body"},{default:d(()=>[e.sparkplugEnabled?(I(),W(re,{key:0},[a(Gi,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=g=>e.tab=g),dense:"","active-color":"primary-light",align:"justify"},{default:d(()=>[a(ot,{name:"overview",label:"Overview"}),a(ot,{name:"hosts",label:"Host Applications"}),a(ot,{name:"edge",label:"Edge Nodes"}),a(ot,{name:"tools",label:"Tools"})]),_:1},8,["modelValue"]),a(Ct),a(Ni,{modelValue:e.tab,"onUpdate:modelValue":t[2]||(t[2]=g=>e.tab=g)},{default:d(()=>[a(st,{class:"q-pa-none",name:"overview"},{default:d(()=>[(I(),q(l,{onRefresh:t[1]||(t[1]=()=>{e.overviewIndex++}),key:`overview-${e.overviewIndex}}`}))]),_:1}),a(st,{name:"hosts"},{default:d(()=>[a(h)]),_:1}),a(st,{name:"edge"},{default:d(()=>[a(u)]),_:1}),a(st,{name:"tools"},{default:d(()=>[a(p)]),_:1})]),_:1},8,["modelValue"])],64)):(I(),q(Ot,{key:1,class:"bg-warning text-black"},{action:d(()=>[a(ie,{onClick:e.toggleSparkplug,outline:"",color:"black",label:"Enable Sparkplug"},null,8,["onClick"])]),default:d(()=>[N("h6",Rs,w(e.$t("sparkplug.sparkplugTrackingDisabled")),1),m(" "+w(e.$t("sparkplug.sparkplugTrackingMessage"))+" ",1)]),_:1}))]),_:1})]),_:1})}const Ts=Ne(Gs,[["render",As]]),tr=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"}));export{tr as S,kn as e,Go as r};

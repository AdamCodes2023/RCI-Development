import{_ as _export_sfc,d as defineComponent,Q as createElementBlock,N as openBlock,f as createVNode,O as withCtx,M as createBlock,Y as QBtn,U as createTextVNode,V as toDisplayString,P as createBaseVNode,S as QIcon,X as QInput,aE as QToggle,b8 as QRadio,aq as resolveComponent,aw as mapActions,aN as setPerPage,aK as lodashExports,az as useMqttClientStore,aO as getPerPage,b9 as commonjsGlobal,ar as createCommentVNode,q as withDirectives,aF as QCardSection,au as QCard,$ as mapState,a0 as useUserStore,F as Fragment,Z as QCardActions,b6 as withModifiers,k as createComponent,u as useDarkProps,g as getCurrentInstance,t as useDark,r as ref,ba as onBeforeUpdate,c as computed,w as watch,h,J as nextTick,bb as shouldIgnoreKey,bc as QSpinner,bd as QCheckbox,b5 as stopAndPrevent,b7 as vShow,be as injectProp,ax as useAuthStore,bf as normalizeProps,bg as guardReactiveProps,at as QSeparator}from"./index-NBAmjDPo.js";import{Q as QList,a as QItem,b as QItemSection}from"./QList-Dp5SD6bt.js";import{Q as QItemLabel}from"./QItemLabel-Bs93CYCt.js";import{Q as QSelect}from"./QSelect-DFMwG8q_.js";import{Q as QTabs,a as QTab,b as QTabPanels,c as QTabPanel}from"./QTabPanels-Cp3Ya--g.js";import{Q as QPage}from"./QPage-vWYdfFDK.js";import{P as PageHeader}from"./PageHeader-Bnmx8R_2.js";import{a as QTd,Q as QTable}from"./QTable-BxDh1Klk.js";import{Q as QTooltip}from"./QTooltip-B6ZEMbHi.js";import{Q as QExpansionItem,a as QSlideTransition}from"./QExpansionItem-DjKZC-Oq.js";import{Q as QForm}from"./QForm-2fLQLKgE.js";import{u as useVuelidate,r as required}from"./index-UpHJnuVP.js";import{B as BasicModal}from"./BasicModal-C1PQ0FKo.js";import{C as ConfirmationModal}from"./ConfirmationModal-Dz1SD7zn.js";import{Q as QToolbar,a as QToolbarTitle}from"./QToolbar-CdQr3U-3.js";import{Q as QBanner}from"./QBanner-Dqi8v0pG.js";import{Q as QMenu}from"./QMenu-ikSdQUIb.js";import{C as ClosePopup}from"./ClosePopup-BPFWk25n.js";import{r as readableBoolean}from"./utility-BvzlK3Wi.js";import"./QResizeObserver-D41I_oPa.js";import"./QMarkupTable-ByLNg887.js";import"./dayjs.min-CaSXwhts.js";const _sfc_main$8=defineComponent({name:"MQTTClientConnectionsTab",setup:()=>({v$:useVuelidate()}),emits:["connection-updated"],components:{BasicModal},data(){return{loading:!1,showEditConnection:!1,selectedConnection:null,showPassword:!0,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:getPerPage("mqttclientconnections"),rowsNumber:0},connectionForm:{name:"",username:"",password:"",address:"localhost",port:1883,useTls:!1,clientId:"",keepAlive:60,cleanSession:!0,autoSubscribe:!0,lwtFlag:!1,lwtTopic:"",lwtPayload:"",lwtQos:0},options:[],rows:[],columns:[{name:"name",label:this.$t("shared.name"),field:"name",align:"left",sortable:!1},{name:"address",label:this.$t("shared.address"),field:"address",align:"left",sortable:!1},{name:"port",label:this.$t("shared.port"),field:"port",align:"left",sortable:!1},{name:"clientId",label:this.$t("mqttClients.clientId"),field:"clientId",align:"left",sortable:!1},{name:"connectedStatus",label:this.$t("mqttClients.connected"),field:"connectedStatus",align:"left",sortable:!1},{name:"actions",label:"",field:"actions",align:"left",sortable:!1}]}},validations(){return{connectionForm:{name:{required}}}},created(){this.updateGrid({pagination:this.pagination})},methods:{...mapActions(useMqttClientStore,["getMqttStatus","setMqttStatus","setCurrentBroker","addBrokerIfAbsent","setBrokerSubscriptions","setSelectedBroker","removeBroker","clearConnectionMessages"]),async updateGrid(r){const{page:o,rowsPerPage:w,sortBy:p,descending:f}=r.pagination;this.loading=!0,this.pagination.page=o,this.pagination.rowsPerPage=w,this.pagination.sortBy=p,this.pagination.descending=f;try{const m=await this.$api.get(`/client/profiles?limit=${this.pagination.rowsPerPage}&offset=${this.pagination.rowsPerPage*(this.pagination.page-1)}`);this.rows=m.data.results,m.data.results.forEach(c=>this.addBrokerIfAbsent(c)),this.pagination.rowsNumber=m.data.info.total}catch(m){this.$q.notify({type:"negative",message:m.response.data.message})}this.loading=!1},async onClickConnectBroker(r){try{const o=await this.$api.post(`/client?action=connect&serverName=${r.name}`);this.setBrokerSubscriptions(o.data.client.serverId,o.data.client.subscriptionTopics),this.setMqttStatus(r.name,"CONNECTED")}catch(o){this.$q.notify({type:"negative",message:o.response.data.message||"Failed to connect"})}},async onClickDisconnectBroker(r){try{await this.$api.post(`/client?action=disconnect&serverName=${r.name}`),this.setMqttStatus(r.name,"DISCONNECTED")}catch(o){this.$q.notify({type:"negative",message:o.response.data.message})}},async onSaveConnection(){if(await this.v$.$validate())try{if(this.selectedConnection===null){const o=await this.$api.post(`/client/profiles/${this.connectionForm.name}`,this.connectionForm);this.addBrokerIfAbsent(o.data),this.$q.notify({type:"positive",message:this.$t("mqttClients.messages.successfulAdd")})}else{let o=lodashExports.pick(this.connectionForm,["address","clientId","password","autoSubscribe","cleanSession","port","useTls","username","keepAlive","lwtFlag","lwtTopic","lwtPayload","lwtQos"]);o.password!==void 0&&o.password.length===0&&delete o.password,await this.$api.put(`/client/profiles/${this.connectionForm.name}`,o),this.$q.notify({type:"positive",message:this.$t("mqttClients.messages.successfulUpdate")})}this.updateGrid({pagination:{...this.pagination,page:1}}),this.$refs.connectionFormModal.toggle(),this.$emit("connection-updated")}catch(o){this.$q.notify({type:"negative",message:o.response.data.message})}},async onSaveDeleteConnection(){try{const r=await this.$api.delete(`/client/profiles/${this.selectedConnection.name}`);this.removeBroker(r.data.name),this.clearConnectionMessages(r.data.name),this.updateGrid({pagination:{...this.pagination,page:1}}),this.$q.notify({type:"positive",message:this.$t("mqttClients.messages.successfulDelete")}),this.$emit("connection-updated")}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}},onClickEditConnection(r){this.selectedConnection={...r},this.connectionForm={...r},this.showEditConnection=!0},onClickDeleteConnection(r){this.selectedConnection=r,this.$q.dialog({component:ConfirmationModal,componentProps:{message:this.$t("mqttClients.messages.confirmDelete"),title:this.$t("mqttClients.messages.deleteHeader"),type:"error",okText:this.$t("shared.delete")}}).onOk(()=>{this.onSaveDeleteConnection()}).onDismiss(()=>{this.selectedConnection=null})},onClickAddConnection(){this.showEditConnection=!0},onCloseEditConnection(){this.showEditConnection=!1,this.connectionForm={name:"",username:"",password:"",address:"localhost",port:1883,useTls:!1,clientId:"",keepAlive:60,cleanSession:!0,autoSubscribe:!0,lwtFlag:!1,lwtTopic:"",lwtPayload:"",lwtQos:0},this.v$.$reset(),this.selectedConnection=null}},watch:{"pagination.rowsPerPage":{handler(){setPerPage("mqttclientconnections",this.pagination.rowsPerPage)}}}}),_hoisted_1$8={class:"chariot-form-input"},_hoisted_2$8={class:"chariot-form-input"},_hoisted_3$7={class:"chariot-form-input q-mt-md"},_hoisted_4$5={class:"chariot-form-input q-mt-md"},_hoisted_5$4={class:"chariot-form-input q-mt-md"},_hoisted_6$3={class:"chariot-form-input q-mt-md"},_hoisted_7$2={class:"chariot-form-input"},_hoisted_8$1={class:"chariot-form-input q-mt-md"},_hoisted_9={class:"chariot-form-input q-mt-md"},_hoisted_10={class:"chariot-form-input"},_hoisted_11={class:"chariot-form-input"},_hoisted_12={class:"chariot-form-input q-mt-md"};function _sfc_render$8(r,o,w,p,f,m){const c=resolveComponent("BasicModal");return openBlock(),createElementBlock("div",null,[createVNode(QTable,{pagination:r.pagination,"onUpdate:pagination":o[0]||(o[0]=s=>r.pagination=s),onRequest:r.updateGrid,loading:r.loading,rows:r.rows,columns:r.columns,"row-key":"name","rows-per-page-options":[5,10,20,50,100]},{top:withCtx(()=>[createVNode(QBtn,{color:"primary",label:"Add Connection",onClick:r.onClickAddConnection},null,8,["onClick"])]),"body-cell-connectedStatus":withCtx(s=>[createVNode(QTd,{props:s},{default:withCtx(()=>[r.getMqttStatus(s.row.name)==="CONNECTED"?(openBlock(),createBlock(QIcon,{key:0,color:"positive",name:"check"})):(openBlock(),createBlock(QIcon,{key:1,name:"close",color:"negative"}))]),_:2},1032,["props"])]),"body-cell-actions":withCtx(s=>[createVNode(QTd,{props:s},{default:withCtx(()=>[createVNode(QBtn,{onClick:N=>r.onClickEditConnection(s.row),flat:"",round:"",color:"primary-light",icon:"edit"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.editConnection")),1)]),_:1})]),_:1},8,["onClick"]),r.getMqttStatus(s.row.name)==="CONNECTED"?(openBlock(),createBlock(QBtn,{key:0,onClick:N=>r.onClickDisconnectBroker(s.row),flat:"",round:"",color:"negative",icon:"wifi_off"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.disconnect")),1)]),_:1})]),_:1},8,["onClick"])):(openBlock(),createBlock(QBtn,{key:1,onClick:N=>r.onClickConnectBroker(s.row),flat:"",round:"",color:"positive",icon:"wifi"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.connect")),1)]),_:1})]),_:1},8,["onClick"])),createVNode(QBtn,{onClick:N=>r.onClickDeleteConnection(s.row),flat:"",round:"",color:"negative",icon:"delete"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.deleteConnection")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","onRequest","loading","rows","columns"]),createVNode(c,{ref:"connectionFormModal",open:r.showEditConnection,"show-footer":!0,title:r.selectedConnection===null?"Create Connection":"Edit Connection",onOnClose:r.onCloseEditConnection,onOnSave:r.onSaveConnection},{default:withCtx(()=>[createVNode(QForm,{class:"q-gutter-y-md column"},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("label",_hoisted_1$8,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.name"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.name")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.v$.connectionForm.name.$model,"onUpdate:modelValue":o[1]||(o[1]=s=>r.v$.connectionForm.name.$model=s),error:r.v$.connectionForm.name.$error,disable:r.selectedConnection!==null,"error-message":r.$t("shared.validation.required"),dense:"",outlined:""},null,8,["modelValue","error","disable","error-message"])]),createBaseVNode("label",_hoisted_2$8,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.username"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.username")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.username,"onUpdate:modelValue":o[2]||(o[2]=s=>r.connectionForm.username=s),dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_3$7,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.password"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.password")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.password,"onUpdate:modelValue":o[4]||(o[4]=s=>r.connectionForm.password=s),outlined:"",dense:"",type:r.showPassword?"password":"text"},{append:withCtx(()=>[createVNode(QBtn,{flat:"",dense:"",rounded:"",icon:r.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[3]||(o[3]=s=>r.showPassword=!r.showPassword)},null,8,["icon"])]),_:1},8,["modelValue","type"])]),createBaseVNode("label",_hoisted_4$5,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.address"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.address")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.address,"onUpdate:modelValue":o[5]||(o[5]=s=>r.connectionForm.address=s),dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_5$4,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.port"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.port")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.port,"onUpdate:modelValue":o[6]||(o[6]=s=>r.connectionForm.port=s),modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_6$3,[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.useTls"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.useTls")),1)]),_:1})]),_:1})]),_:1}),createVNode(QToggle,{modelValue:r.connectionForm.useTls,"onUpdate:modelValue":o[7]||(o[7]=s=>r.connectionForm.useTls=s)},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_7$2,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.clientId"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.clientId")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.clientId,"onUpdate:modelValue":o[8]||(o[8]=s=>r.connectionForm.clientId=s),dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_8$1,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.keepAlive"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.keepAlive")),1)]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.keepAlive,"onUpdate:modelValue":o[9]||(o[9]=s=>r.connectionForm.keepAlive=s),modelModifiers:{number:!0},type:"number",dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_9,[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.cleanSession"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.cleanSession")),1)]),_:1})]),_:1})]),_:1}),createVNode(QToggle,{modelValue:r.connectionForm.cleanSession,"onUpdate:modelValue":o[10]||(o[10]=s=>r.connectionForm.cleanSession=s)},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_10,[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.autoSubscribe"))+" ",1),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.tooltips.autoSubscribe")),1)]),_:1})]),_:1})]),_:1}),createVNode(QToggle,{modelValue:r.connectionForm.autoSubscribe,"onUpdate:modelValue":o[11]||(o[11]=s=>r.connectionForm.autoSubscribe=s)},null,8,["modelValue"])]),createVNode(QExpansionItem,{dense:"","header-class":"chariot-form-collapse-group"},{header:withCtx(()=>[...o[18]||(o[18]=[createTextVNode(" LWT Settings ",-1)])]),default:withCtx(()=>[createVNode(QItemLabel,{class:"q-mt-md"},{default:withCtx(()=>[o[20]||(o[20]=createTextVNode(" LWT Flag ",-1)),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[...o[19]||(o[19]=[createTextVNode(" Whether to register a Last Will and Testament (LWT) message with the MQTT Server ",-1)])]),_:1})]),_:1})]),_:1}),createVNode(QToggle,{modelValue:r.connectionForm.lwtFlag,"onUpdate:modelValue":o[12]||(o[12]=s=>r.connectionForm.lwtFlag=s)},null,8,["modelValue"]),createBaseVNode("label",_hoisted_11,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[o[22]||(o[22]=createTextVNode(" LWT Topic ",-1)),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[...o[21]||(o[21]=[createTextVNode(" The topic to publish the LWT message on ",-1)])]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.lwtTopic,"onUpdate:modelValue":o[13]||(o[13]=s=>r.connectionForm.lwtTopic=s),dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_12,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[o[24]||(o[24]=createTextVNode(" LWT Payload ",-1)),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[...o[23]||(o[23]=[createTextVNode(" The payload of the LWT message ",-1)])]),_:1})]),_:1})]),_:1}),createVNode(QInput,{modelValue:r.connectionForm.lwtPayload,"onUpdate:modelValue":o[14]||(o[14]=s=>r.connectionForm.lwtPayload=s),dense:"",outlined:""},null,8,["modelValue"])]),createVNode(QItemLabel,{class:"q-mt-md"},{default:withCtx(()=>[o[26]||(o[26]=createTextVNode(" LWT QoS ",-1)),createVNode(QIcon,{color:"light",name:"help"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[...o[25]||(o[25]=[createTextVNode(" The quality of service (QoS) to publish the LWT message on ",-1)])]),_:1})]),_:1})]),_:1}),createVNode(QRadio,{modelValue:r.connectionForm.lwtQos,"onUpdate:modelValue":o[15]||(o[15]=s=>r.connectionForm.lwtQos=s),val:0,label:"0"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.connectionForm.lwtQos,"onUpdate:modelValue":o[16]||(o[16]=s=>r.connectionForm.lwtQos=s),val:1,label:"1"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.connectionForm.lwtQos,"onUpdate:modelValue":o[17]||(o[17]=s=>r.connectionForm.lwtQos=s),val:2,label:"2"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["open","title","onOnClose","onOnSave"])])}const MQTTClientConnectionsTab=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]);var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=s,base64Js.toByteArray=T,base64Js.fromByteArray=n;for(var r=[],o=[],w=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,m=p.length;f<m;++f)r[f]=p[f],o[p.charCodeAt(f)]=f;o[45]=62,o[95]=63;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.indexOf("=");l===-1&&(l=t);var b=l===t?0:4-l%4;return[l,b]}function s(e){var t=c(e),l=t[0],b=t[1];return(l+b)*3/4-b}function N(e,t,l){return(t+l)*3/4-l}function T(e){var t,l=c(e),b=l[0],P=l[1],q=new w(N(e,b,P)),$=0,oe=P>0?b-4:b,X;for(X=0;X<oe;X+=4)t=o[e.charCodeAt(X)]<<18|o[e.charCodeAt(X+1)]<<12|o[e.charCodeAt(X+2)]<<6|o[e.charCodeAt(X+3)],q[$++]=t>>16&255,q[$++]=t>>8&255,q[$++]=t&255;return P===2&&(t=o[e.charCodeAt(X)]<<2|o[e.charCodeAt(X+1)]>>4,q[$++]=t&255),P===1&&(t=o[e.charCodeAt(X)]<<10|o[e.charCodeAt(X+1)]<<4|o[e.charCodeAt(X+2)]>>2,q[$++]=t>>8&255,q[$++]=t&255),q}function y(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[e&63]}function u(e,t,l){for(var b,P=[],q=t;q<l;q+=3)b=(e[q]<<16&16711680)+(e[q+1]<<8&65280)+(e[q+2]&255),P.push(y(b));return P.join("")}function n(e){for(var t,l=e.length,b=l%3,P=[],q=16383,$=0,oe=l-b;$<oe;$+=q)P.push(u(e,$,$+q>oe?oe:$+q));return b===1?(t=e[l-1],P.push(r[t>>2]+r[t<<4&63]+"==")):b===2&&(t=(e[l-2]<<8)+e[l-1],P.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),P.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(r,o,w,p,f){var m,c,s=f*8-p-1,N=(1<<s)-1,T=N>>1,y=-7,u=w?f-1:0,n=w?-1:1,e=r[o+u];for(u+=n,m=e&(1<<-y)-1,e>>=-y,y+=s;y>0;m=m*256+r[o+u],u+=n,y-=8);for(c=m&(1<<-y)-1,m>>=-y,y+=p;y>0;c=c*256+r[o+u],u+=n,y-=8);if(m===0)m=1-T;else{if(m===N)return c?NaN:(e?-1:1)*(1/0);c=c+Math.pow(2,p),m=m-T}return(e?-1:1)*c*Math.pow(2,m-p)},ieee754.write=function(r,o,w,p,f,m){var c,s,N,T=m*8-f-1,y=(1<<T)-1,u=y>>1,n=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,e=p?0:m-1,t=p?1:-1,l=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,c=y):(c=Math.floor(Math.log(o)/Math.LN2),o*(N=Math.pow(2,-c))<1&&(c--,N*=2),c+u>=1?o+=n/N:o+=n*Math.pow(2,1-u),o*N>=2&&(c++,N/=2),c+u>=y?(s=0,c=y):c+u>=1?(s=(o*N-1)*Math.pow(2,f),c=c+u):(s=o*Math.pow(2,u-1)*Math.pow(2,f),c=0));f>=8;r[w+e]=s&255,e+=t,s/=256,f-=8);for(c=c<<f|s,T+=f;T>0;r[w+e]=c&255,e+=t,c/=256,T-=8);r[w+e-t]|=l*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(r){var o=requireBase64Js(),w=requireIeee754(),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=q,r.INSPECT_MAX_BYTES=50;var f=2147483647;r.kMaxLength=f,s.TYPED_ARRAY_SUPPORT=m(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{var d=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(d,i),d.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function c(d){if(d>f)throw new RangeError('The value "'+d+'" is invalid for option "size"');var i=new Uint8Array(d);return Object.setPrototypeOf(i,s.prototype),i}function s(d,i,a){if(typeof d=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(d)}return N(d,i,a)}s.poolSize=8192;function N(d,i,a){if(typeof d=="string")return n(d,i);if(ArrayBuffer.isView(d))return t(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(U(d,ArrayBuffer)||d&&U(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(d,SharedArrayBuffer)||d&&U(d.buffer,SharedArrayBuffer)))return l(d,i,a);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var V=d.valueOf&&d.valueOf();if(V!=null&&V!==d)return s.from(V,i,a);var C=b(d);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return s.from(d[Symbol.toPrimitive]("string"),i,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}s.from=function(d,i,a){return N(d,i,a)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function T(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function y(d,i,a){return T(d),d<=0?c(d):i!==void 0?typeof a=="string"?c(d).fill(i,a):c(d).fill(i):c(d)}s.alloc=function(d,i,a){return y(d,i,a)};function u(d){return T(d),c(d<0?0:P(d)|0)}s.allocUnsafe=function(d){return u(d)},s.allocUnsafeSlow=function(d){return u(d)};function n(d,i){if((typeof i!="string"||i==="")&&(i="utf8"),!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var a=$(d,i)|0,V=c(a),C=V.write(d,i);return C!==a&&(V=V.slice(0,C)),V}function e(d){for(var i=d.length<0?0:P(d.length)|0,a=c(i),V=0;V<i;V+=1)a[V]=d[V]&255;return a}function t(d){if(U(d,Uint8Array)){var i=new Uint8Array(d);return l(i.buffer,i.byteOffset,i.byteLength)}return e(d)}function l(d,i,a){if(i<0||d.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<i+(a||0))throw new RangeError('"length" is outside of buffer bounds');var V;return i===void 0&&a===void 0?V=new Uint8Array(d):a===void 0?V=new Uint8Array(d,i):V=new Uint8Array(d,i,a),Object.setPrototypeOf(V,s.prototype),V}function b(d){if(s.isBuffer(d)){var i=P(d.length)|0,a=c(i);return a.length===0||d.copy(a,0,0,i),a}if(d.length!==void 0)return typeof d.length!="number"||z(d.length)?c(0):e(d);if(d.type==="Buffer"&&Array.isArray(d.data))return e(d.data)}function P(d){if(d>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return d|0}function q(d){return+d!=d&&(d=0),s.alloc(+d)}s.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==s.prototype},s.compare=function(i,a){if(U(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),U(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(i)||!s.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===a)return 0;for(var V=i.length,C=a.length,_=0,E=Math.min(V,C);_<E;++_)if(i[_]!==a[_]){V=i[_],C=a[_];break}return V<C?-1:C<V?1:0},s.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(i,a){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return s.alloc(0);var V;if(a===void 0)for(a=0,V=0;V<i.length;++V)a+=i[V].length;var C=s.allocUnsafe(a),_=0;for(V=0;V<i.length;++V){var E=i[V];if(U(E,Uint8Array))_+E.length>C.length?s.from(E).copy(C,_):Uint8Array.prototype.set.call(C,E,_);else if(s.isBuffer(E))E.copy(C,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=E.length}return C};function $(d,i){if(s.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||U(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);var a=d.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&a===0)return 0;for(var C=!1;;)switch(i){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return v(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return M(d).length;default:if(C)return V?-1:v(d).length;i=(""+i).toLowerCase(),C=!0}}s.byteLength=$;function oe(d,i,a){var V=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,i>>>=0,a<=i))return"";for(d||(d="utf8");;)switch(d){case"hex":return ne(this,i,a);case"utf8":case"utf-8":return G(this,i,a);case"ascii":return ie(this,i,a);case"latin1":case"binary":return ae(this,i,a);case"base64":return A(this,i,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,i,a);default:if(V)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),V=!0}}s.prototype._isBuffer=!0;function X(d,i,a){var V=d[i];d[i]=d[a],d[a]=V}s.prototype.swap16=function(){var i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<i;a+=2)X(this,a,a+1);return this},s.prototype.swap32=function(){var i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<i;a+=4)X(this,a,a+3),X(this,a+1,a+2);return this},s.prototype.swap64=function(){var i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<i;a+=8)X(this,a,a+7),X(this,a+1,a+6),X(this,a+2,a+5),X(this,a+3,a+4);return this},s.prototype.toString=function(){var i=this.length;return i===0?"":arguments.length===0?G(this,0,i):oe.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(i){if(!s.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:s.compare(this,i)===0},s.prototype.inspect=function(){var i="",a=r.INSPECT_MAX_BYTES;return i=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(i+=" ... "),"<Buffer "+i+">"},p&&(s.prototype[p]=s.prototype.inspect),s.prototype.compare=function(i,a,V,C,_){if(U(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(a===void 0&&(a=0),V===void 0&&(V=i?i.length:0),C===void 0&&(C=0),_===void 0&&(_=this.length),a<0||V>i.length||C<0||_>this.length)throw new RangeError("out of range index");if(C>=_&&a>=V)return 0;if(C>=_)return-1;if(a>=V)return 1;if(a>>>=0,V>>>=0,C>>>=0,_>>>=0,this===i)return 0;for(var E=_-C,H=V-a,ee=Math.min(E,H),te=this.slice(C,_),ue=i.slice(a,V),le=0;le<ee;++le)if(te[le]!==ue[le]){E=te[le],H=ue[le];break}return E<H?-1:H<E?1:0};function ce(d,i,a,V,C){if(d.length===0)return-1;if(typeof a=="string"?(V=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,z(a)&&(a=C?0:d.length-1),a<0&&(a=d.length+a),a>=d.length){if(C)return-1;a=d.length-1}else if(a<0)if(C)a=0;else return-1;if(typeof i=="string"&&(i=s.from(i,V)),s.isBuffer(i))return i.length===0?-1:se(d,i,a,V,C);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(d,i,a):Uint8Array.prototype.lastIndexOf.call(d,i,a):se(d,[i],a,V,C);throw new TypeError("val must be string, number or Buffer")}function se(d,i,a,V,C){var _=1,E=d.length,H=i.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(d.length<2||i.length<2)return-1;_=2,E/=2,H/=2,a/=2}function ee(de,pe){return _===1?de[pe]:de.readUInt16BE(pe*_)}var te;if(C){var ue=-1;for(te=a;te<E;te++)if(ee(d,te)===ee(i,ue===-1?0:te-ue)){if(ue===-1&&(ue=te),te-ue+1===H)return ue*_}else ue!==-1&&(te-=te-ue),ue=-1}else for(a+H>E&&(a=E-H),te=a;te>=0;te--){for(var le=!0,fe=0;fe<H;fe++)if(ee(d,te+fe)!==ee(i,fe)){le=!1;break}if(le)return te}return-1}s.prototype.includes=function(i,a,V){return this.indexOf(i,a,V)!==-1},s.prototype.indexOf=function(i,a,V){return ce(this,i,a,V,!0)},s.prototype.lastIndexOf=function(i,a,V){return ce(this,i,a,V,!1)};function re(d,i,a,V){a=Number(a)||0;var C=d.length-a;V?(V=Number(V),V>C&&(V=C)):V=C;var _=i.length;V>_/2&&(V=_/2);for(var E=0;E<V;++E){var H=parseInt(i.substr(E*2,2),16);if(z(H))return E;d[a+E]=H}return E}function F(d,i,a,V){return L(v(i,d.length-a),d,a,V)}function B(d,i,a,V){return L(S(i),d,a,V)}function g(d,i,a,V){return L(M(i),d,a,V)}function I(d,i,a,V){return L(x(i,d.length-a),d,a,V)}s.prototype.write=function(i,a,V,C){if(a===void 0)C="utf8",V=this.length,a=0;else if(V===void 0&&typeof a=="string")C=a,V=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(V)?(V=V>>>0,C===void 0&&(C="utf8")):(C=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _=this.length-a;if((V===void 0||V>_)&&(V=_),i.length>0&&(V<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");for(var E=!1;;)switch(C){case"hex":return re(this,i,a,V);case"utf8":case"utf-8":return F(this,i,a,V);case"ascii":case"latin1":case"binary":return B(this,i,a,V);case"base64":return g(this,i,a,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,i,a,V);default:if(E)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),E=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(d,i,a){return i===0&&a===d.length?o.fromByteArray(d):o.fromByteArray(d.slice(i,a))}function G(d,i,a){a=Math.min(d.length,a);for(var V=[],C=i;C<a;){var _=d[C],E=null,H=_>239?4:_>223?3:_>191?2:1;if(C+H<=a){var ee,te,ue,le;switch(H){case 1:_<128&&(E=_);break;case 2:ee=d[C+1],(ee&192)===128&&(le=(_&31)<<6|ee&63,le>127&&(E=le));break;case 3:ee=d[C+1],te=d[C+2],(ee&192)===128&&(te&192)===128&&(le=(_&15)<<12|(ee&63)<<6|te&63,le>2047&&(le<55296||le>57343)&&(E=le));break;case 4:ee=d[C+1],te=d[C+2],ue=d[C+3],(ee&192)===128&&(te&192)===128&&(ue&192)===128&&(le=(_&15)<<18|(ee&63)<<12|(te&63)<<6|ue&63,le>65535&&le<1114112&&(E=le))}}E===null?(E=65533,H=1):E>65535&&(E-=65536,V.push(E>>>10&1023|55296),E=56320|E&1023),V.push(E),C+=H}return j(V)}var K=4096;function j(d){var i=d.length;if(i<=K)return String.fromCharCode.apply(String,d);for(var a="",V=0;V<i;)a+=String.fromCharCode.apply(String,d.slice(V,V+=K));return a}function ie(d,i,a){var V="";a=Math.min(d.length,a);for(var C=i;C<a;++C)V+=String.fromCharCode(d[C]&127);return V}function ae(d,i,a){var V="";a=Math.min(d.length,a);for(var C=i;C<a;++C)V+=String.fromCharCode(d[C]);return V}function ne(d,i,a){var V=d.length;(!i||i<0)&&(i=0),(!a||a<0||a>V)&&(a=V);for(var C="",_=i;_<a;++_)C+=W[d[_]];return C}function Y(d,i,a){for(var V=d.slice(i,a),C="",_=0;_<V.length-1;_+=2)C+=String.fromCharCode(V[_]+V[_+1]*256);return C}s.prototype.slice=function(i,a){var V=this.length;i=~~i,a=a===void 0?V:~~a,i<0?(i+=V,i<0&&(i=0)):i>V&&(i=V),a<0?(a+=V,a<0&&(a=0)):a>V&&(a=V),a<i&&(a=i);var C=this.subarray(i,a);return Object.setPrototypeOf(C,s.prototype),C};function J(d,i,a){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+i>a)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(i,a,V){i=i>>>0,a=a>>>0,V||J(i,a,this.length);for(var C=this[i],_=1,E=0;++E<a&&(_*=256);)C+=this[i+E]*_;return C},s.prototype.readUintBE=s.prototype.readUIntBE=function(i,a,V){i=i>>>0,a=a>>>0,V||J(i,a,this.length);for(var C=this[i+--a],_=1;a>0&&(_*=256);)C+=this[i+--a]*_;return C},s.prototype.readUint8=s.prototype.readUInt8=function(i,a){return i=i>>>0,a||J(i,1,this.length),this[i]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(i,a){return i=i>>>0,a||J(i,2,this.length),this[i]|this[i+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(i,a){return i=i>>>0,a||J(i,2,this.length),this[i]<<8|this[i+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(i,a){return i=i>>>0,a||J(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(i,a){return i=i>>>0,a||J(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},s.prototype.readIntLE=function(i,a,V){i=i>>>0,a=a>>>0,V||J(i,a,this.length);for(var C=this[i],_=1,E=0;++E<a&&(_*=256);)C+=this[i+E]*_;return _*=128,C>=_&&(C-=Math.pow(2,8*a)),C},s.prototype.readIntBE=function(i,a,V){i=i>>>0,a=a>>>0,V||J(i,a,this.length);for(var C=a,_=1,E=this[i+--C];C>0&&(_*=256);)E+=this[i+--C]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*a)),E},s.prototype.readInt8=function(i,a){return i=i>>>0,a||J(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},s.prototype.readInt16LE=function(i,a){i=i>>>0,a||J(i,2,this.length);var V=this[i]|this[i+1]<<8;return V&32768?V|4294901760:V},s.prototype.readInt16BE=function(i,a){i=i>>>0,a||J(i,2,this.length);var V=this[i+1]|this[i]<<8;return V&32768?V|4294901760:V},s.prototype.readInt32LE=function(i,a){return i=i>>>0,a||J(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},s.prototype.readInt32BE=function(i,a){return i=i>>>0,a||J(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},s.prototype.readFloatLE=function(i,a){return i=i>>>0,a||J(i,4,this.length),w.read(this,i,!0,23,4)},s.prototype.readFloatBE=function(i,a){return i=i>>>0,a||J(i,4,this.length),w.read(this,i,!1,23,4)},s.prototype.readDoubleLE=function(i,a){return i=i>>>0,a||J(i,8,this.length),w.read(this,i,!0,52,8)},s.prototype.readDoubleBE=function(i,a){return i=i>>>0,a||J(i,8,this.length),w.read(this,i,!1,52,8)};function O(d,i,a,V,C,_){if(!s.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>C||i<_)throw new RangeError('"value" argument is out of bounds');if(a+V>d.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(i,a,V,C){if(i=+i,a=a>>>0,V=V>>>0,!C){var _=Math.pow(2,8*V)-1;O(this,i,a,V,_,0)}var E=1,H=0;for(this[a]=i&255;++H<V&&(E*=256);)this[a+H]=i/E&255;return a+V},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(i,a,V,C){if(i=+i,a=a>>>0,V=V>>>0,!C){var _=Math.pow(2,8*V)-1;O(this,i,a,V,_,0)}var E=V-1,H=1;for(this[a+E]=i&255;--E>=0&&(H*=256);)this[a+E]=i/H&255;return a+V},s.prototype.writeUint8=s.prototype.writeUInt8=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,1,255,0),this[a]=i&255,a+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,2,65535,0),this[a]=i&255,this[a+1]=i>>>8,a+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,2,65535,0),this[a]=i>>>8,this[a+1]=i&255,a+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,4,4294967295,0),this[a+3]=i>>>24,this[a+2]=i>>>16,this[a+1]=i>>>8,this[a]=i&255,a+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,4,4294967295,0),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=i&255,a+4},s.prototype.writeIntLE=function(i,a,V,C){if(i=+i,a=a>>>0,!C){var _=Math.pow(2,8*V-1);O(this,i,a,V,_-1,-_)}var E=0,H=1,ee=0;for(this[a]=i&255;++E<V&&(H*=256);)i<0&&ee===0&&this[a+E-1]!==0&&(ee=1),this[a+E]=(i/H>>0)-ee&255;return a+V},s.prototype.writeIntBE=function(i,a,V,C){if(i=+i,a=a>>>0,!C){var _=Math.pow(2,8*V-1);O(this,i,a,V,_-1,-_)}var E=V-1,H=1,ee=0;for(this[a+E]=i&255;--E>=0&&(H*=256);)i<0&&ee===0&&this[a+E+1]!==0&&(ee=1),this[a+E]=(i/H>>0)-ee&255;return a+V},s.prototype.writeInt8=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,1,127,-128),i<0&&(i=255+i+1),this[a]=i&255,a+1},s.prototype.writeInt16LE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,2,32767,-32768),this[a]=i&255,this[a+1]=i>>>8,a+2},s.prototype.writeInt16BE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,2,32767,-32768),this[a]=i>>>8,this[a+1]=i&255,a+2},s.prototype.writeInt32LE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,4,2147483647,-2147483648),this[a]=i&255,this[a+1]=i>>>8,this[a+2]=i>>>16,this[a+3]=i>>>24,a+4},s.prototype.writeInt32BE=function(i,a,V){return i=+i,a=a>>>0,V||O(this,i,a,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[a]=i>>>24,this[a+1]=i>>>16,this[a+2]=i>>>8,this[a+3]=i&255,a+4};function D(d,i,a,V,C,_){if(a+V>d.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function k(d,i,a,V,C){return i=+i,a=a>>>0,C||D(d,i,a,4),w.write(d,i,a,V,23,4),a+4}s.prototype.writeFloatLE=function(i,a,V){return k(this,i,a,!0,V)},s.prototype.writeFloatBE=function(i,a,V){return k(this,i,a,!1,V)};function R(d,i,a,V,C){return i=+i,a=a>>>0,C||D(d,i,a,8),w.write(d,i,a,V,52,8),a+8}s.prototype.writeDoubleLE=function(i,a,V){return R(this,i,a,!0,V)},s.prototype.writeDoubleBE=function(i,a,V){return R(this,i,a,!1,V)},s.prototype.copy=function(i,a,V,C){if(!s.isBuffer(i))throw new TypeError("argument should be a Buffer");if(V||(V=0),!C&&C!==0&&(C=this.length),a>=i.length&&(a=i.length),a||(a=0),C>0&&C<V&&(C=V),C===V||i.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),i.length-a<C-V&&(C=i.length-a+V);var _=C-V;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,V,C):Uint8Array.prototype.set.call(i,this.subarray(V,C),a),_},s.prototype.fill=function(i,a,V,C){if(typeof i=="string"){if(typeof a=="string"?(C=a,a=0,V=this.length):typeof V=="string"&&(C=V,V=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!s.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(i.length===1){var _=i.charCodeAt(0);(C==="utf8"&&_<128||C==="latin1")&&(i=_)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(a<0||this.length<a||this.length<V)throw new RangeError("Out of range index");if(V<=a)return this;a=a>>>0,V=V===void 0?this.length:V>>>0,i||(i=0);var E;if(typeof i=="number")for(E=a;E<V;++E)this[E]=i;else{var H=s.isBuffer(i)?i:s.from(i,C),ee=H.length;if(ee===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(E=0;E<V-a;++E)this[E+a]=H[E%ee]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function Z(d){if(d=d.split("=")[0],d=d.trim().replace(Q,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function v(d,i){i=i||1/0;for(var a,V=d.length,C=null,_=[],E=0;E<V;++E){if(a=d.charCodeAt(E),a>55295&&a<57344){if(!C){if(a>56319){(i-=3)>-1&&_.push(239,191,189);continue}else if(E+1===V){(i-=3)>-1&&_.push(239,191,189);continue}C=a;continue}if(a<56320){(i-=3)>-1&&_.push(239,191,189),C=a;continue}a=(C-55296<<10|a-56320)+65536}else C&&(i-=3)>-1&&_.push(239,191,189);if(C=null,a<128){if((i-=1)<0)break;_.push(a)}else if(a<2048){if((i-=2)<0)break;_.push(a>>6|192,a&63|128)}else if(a<65536){if((i-=3)<0)break;_.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((i-=4)<0)break;_.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return _}function S(d){for(var i=[],a=0;a<d.length;++a)i.push(d.charCodeAt(a)&255);return i}function x(d,i){for(var a,V,C,_=[],E=0;E<d.length&&!((i-=2)<0);++E)a=d.charCodeAt(E),V=a>>8,C=a%256,_.push(C),_.push(V);return _}function M(d){return o.toByteArray(Z(d))}function L(d,i,a,V){for(var C=0;C<V&&!(C+a>=i.length||C>=d.length);++C)i[C+a]=d[C];return C}function U(d,i){return d instanceof i||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===i.name}function z(d){return d!==d}var W=(function(){for(var d="0123456789abcdef",i=new Array(256),a=0;a<16;++a)for(var V=a*16,C=0;C<16;++C)i[V+C]=d[a]+d[C];return i})()})(buffer)),buffer}var bufferExports=requireBuffer(),sparkplugPayload={},sparkplugbpayload={},indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=r;function r(o,w){for(var p=new Array(arguments.length-1),f=0,m=2,c=!0;m<arguments.length;)p[f++]=arguments[m++];return new Promise(function(N,T){p[f]=function(u){if(c)if(c=!1,u)T(u);else{for(var n=new Array(arguments.length-1),e=0;e<n.length;)n[e++]=arguments[e];N.apply(null,n)}};try{o.apply(w||null,p)}catch(y){c&&(c=!1,T(y))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,(function(r){var o=r;o.length=function(s){var N=s.length;if(!N)return 0;for(var T=0;--N%4>1&&s.charAt(N)==="=";)++T;return Math.ceil(s.length*3)/4-T};for(var w=new Array(64),p=new Array(123),f=0;f<64;)p[w[f]=f<26?f+65:f<52?f+71:f<62?f-4:f-59|43]=f++;o.encode=function(s,N,T){for(var y=null,u=[],n=0,e=0,t;N<T;){var l=s[N++];switch(e){case 0:u[n++]=w[l>>2],t=(l&3)<<4,e=1;break;case 1:u[n++]=w[t|l>>4],t=(l&15)<<2,e=2;break;case 2:u[n++]=w[t|l>>6],u[n++]=w[l&63],e=0;break}n>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,u)),n=0)}return e&&(u[n++]=w[t],u[n++]=61,e===1&&(u[n++]=61)),y?(n&&y.push(String.fromCharCode.apply(String,u.slice(0,n))),y.join("")):String.fromCharCode.apply(String,u.slice(0,n))};var m="invalid encoding";o.decode=function(s,N,T){for(var y=T,u=0,n,e=0;e<s.length;){var t=s.charCodeAt(e++);if(t===61&&u>1)break;if((t=p[t])===void 0)throw Error(m);switch(u){case 0:n=t,u=1;break;case 1:N[T++]=n<<2|(t&48)>>4,n=t,u=2;break;case 2:N[T++]=(n&15)<<4|(t&60)>>2,n=t,u=3;break;case 3:N[T++]=(n&3)<<6|t,u=0;break}}if(u===1)throw Error(m);return T-y},o.test=function(s){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)}})(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=r;function r(){this._listeners={}}return r.prototype.on=function(w,p,f){return(this._listeners[w]||(this._listeners[w]=[])).push({fn:p,ctx:f||this}),this},r.prototype.off=function(w,p){if(w===void 0)this._listeners={};else if(p===void 0)this._listeners[w]=[];else for(var f=this._listeners[w],m=0;m<f.length;)f[m].fn===p?f.splice(m,1):++m;return this},r.prototype.emit=function(w){var p=this._listeners[w];if(p){for(var f=[],m=1;m<arguments.length;)f.push(arguments[m++]);for(m=0;m<p.length;)p[m].fn.apply(p[m++].ctx,f)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=r(r);function r(m){return typeof Float32Array<"u"?(function(){var c=new Float32Array([-0]),s=new Uint8Array(c.buffer),N=s[3]===128;function T(e,t,l){c[0]=e,t[l]=s[0],t[l+1]=s[1],t[l+2]=s[2],t[l+3]=s[3]}function y(e,t,l){c[0]=e,t[l]=s[3],t[l+1]=s[2],t[l+2]=s[1],t[l+3]=s[0]}m.writeFloatLE=N?T:y,m.writeFloatBE=N?y:T;function u(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],c[0]}function n(e,t){return s[3]=e[t],s[2]=e[t+1],s[1]=e[t+2],s[0]=e[t+3],c[0]}m.readFloatLE=N?u:n,m.readFloatBE=N?n:u})():(function(){function c(N,T,y,u){var n=T<0?1:0;if(n&&(T=-T),T===0)N(1/T>0?0:2147483648,y,u);else if(isNaN(T))N(2143289344,y,u);else if(T>34028234663852886e22)N((n<<31|2139095040)>>>0,y,u);else if(T<11754943508222875e-54)N((n<<31|Math.round(T/1401298464324817e-60))>>>0,y,u);else{var e=Math.floor(Math.log(T)/Math.LN2),t=Math.round(T*Math.pow(2,-e)*8388608)&8388607;N((n<<31|e+127<<23|t)>>>0,y,u)}}m.writeFloatLE=c.bind(null,o),m.writeFloatBE=c.bind(null,w);function s(N,T,y){var u=N(T,y),n=(u>>31)*2+1,e=u>>>23&255,t=u&8388607;return e===255?t?NaN:n*(1/0):e===0?n*1401298464324817e-60*t:n*Math.pow(2,e-150)*(t+8388608)}m.readFloatLE=s.bind(null,p),m.readFloatBE=s.bind(null,f)})(),typeof Float64Array<"u"?(function(){var c=new Float64Array([-0]),s=new Uint8Array(c.buffer),N=s[7]===128;function T(e,t,l){c[0]=e,t[l]=s[0],t[l+1]=s[1],t[l+2]=s[2],t[l+3]=s[3],t[l+4]=s[4],t[l+5]=s[5],t[l+6]=s[6],t[l+7]=s[7]}function y(e,t,l){c[0]=e,t[l]=s[7],t[l+1]=s[6],t[l+2]=s[5],t[l+3]=s[4],t[l+4]=s[3],t[l+5]=s[2],t[l+6]=s[1],t[l+7]=s[0]}m.writeDoubleLE=N?T:y,m.writeDoubleBE=N?y:T;function u(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],s[4]=e[t+4],s[5]=e[t+5],s[6]=e[t+6],s[7]=e[t+7],c[0]}function n(e,t){return s[7]=e[t],s[6]=e[t+1],s[5]=e[t+2],s[4]=e[t+3],s[3]=e[t+4],s[2]=e[t+5],s[1]=e[t+6],s[0]=e[t+7],c[0]}m.readDoubleLE=N?u:n,m.readDoubleBE=N?n:u})():(function(){function c(N,T,y,u,n,e){var t=u<0?1:0;if(t&&(u=-u),u===0)N(0,n,e+T),N(1/u>0?0:2147483648,n,e+y);else if(isNaN(u))N(0,n,e+T),N(2146959360,n,e+y);else if(u>17976931348623157e292)N(0,n,e+T),N((t<<31|2146435072)>>>0,n,e+y);else{var l;if(u<22250738585072014e-324)l=u/5e-324,N(l>>>0,n,e+T),N((t<<31|l/4294967296)>>>0,n,e+y);else{var b=Math.floor(Math.log(u)/Math.LN2);b===1024&&(b=1023),l=u*Math.pow(2,-b),N(l*4503599627370496>>>0,n,e+T),N((t<<31|b+1023<<20|l*1048576&1048575)>>>0,n,e+y)}}}m.writeDoubleLE=c.bind(null,o,0,4),m.writeDoubleBE=c.bind(null,w,4,0);function s(N,T,y,u,n){var e=N(u,n+T),t=N(u,n+y),l=(t>>31)*2+1,b=t>>>20&2047,P=4294967296*(t&1048575)+e;return b===2047?P?NaN:l*(1/0):b===0?l*5e-324*P:l*Math.pow(2,b-1075)*(P+4503599627370496)}m.readDoubleLE=s.bind(null,p,0,4),m.readDoubleBE=s.bind(null,f,4,0)})(),m}function o(m,c,s){c[s]=m&255,c[s+1]=m>>>8&255,c[s+2]=m>>>16&255,c[s+3]=m>>>24}function w(m,c,s){c[s]=m>>>24,c[s+1]=m>>>16&255,c[s+2]=m>>>8&255,c[s+3]=m&255}function p(m,c){return(m[c]|m[c+1]<<8|m[c+2]<<16|m[c+3]<<24)>>>0}function f(m,c){return(m[c]<<24|m[c+1]<<16|m[c+2]<<8|m[c+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,(function(r){var o=r;o.length=function(p){for(var f=0,m=0,c=0;c<p.length;++c)m=p.charCodeAt(c),m<128?f+=1:m<2048?f+=2:(m&64512)===55296&&(p.charCodeAt(c+1)&64512)===56320?(++c,f+=4):f+=3;return f},o.read=function(p,f,m){var c=m-f;if(c<1)return"";for(var s=null,N=[],T=0,y;f<m;)y=p[f++],y<128?N[T++]=y:y>191&&y<224?N[T++]=(y&31)<<6|p[f++]&63:y>239&&y<365?(y=((y&7)<<18|(p[f++]&63)<<12|(p[f++]&63)<<6|p[f++]&63)-65536,N[T++]=55296+(y>>10),N[T++]=56320+(y&1023)):N[T++]=(y&15)<<12|(p[f++]&63)<<6|p[f++]&63,T>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,N)),T=0);return s?(T&&s.push(String.fromCharCode.apply(String,N.slice(0,T))),s.join("")):String.fromCharCode.apply(String,N.slice(0,T))},o.write=function(p,f,m){for(var c=m,s,N,T=0;T<p.length;++T)s=p.charCodeAt(T),s<128?f[m++]=s:s<2048?(f[m++]=s>>6|192,f[m++]=s&63|128):(s&64512)===55296&&((N=p.charCodeAt(T+1))&64512)===56320?(s=65536+((s&1023)<<10)+(N&1023),++T,f[m++]=s>>18|240,f[m++]=s>>12&63|128,f[m++]=s>>6&63|128,f[m++]=s&63|128):(f[m++]=s>>12|224,f[m++]=s>>6&63|128,f[m++]=s&63|128);return m-c}})(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=r;function r(o,w,p){var f=p||8192,m=f>>>1,c=null,s=f;return function(T){if(T<1||T>m)return o(T);s+T>f&&(c=o(f),s=0);var y=w.call(c,s,s+=T);return s&7&&(s=(s|7)+1),y}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=o;var r=requireMinimal$1();function o(m,c){this.lo=m>>>0,this.hi=c>>>0}var w=o.zero=new o(0,0);w.toNumber=function(){return 0},w.zzEncode=w.zzDecode=function(){return this},w.length=function(){return 1};var p=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(c){if(c===0)return w;var s=c<0;s&&(c=-c);var N=c>>>0,T=(c-N)/4294967296>>>0;return s&&(T=~T>>>0,N=~N>>>0,++N>4294967295&&(N=0,++T>4294967295&&(T=0))),new o(N,T)},o.from=function(c){if(typeof c=="number")return o.fromNumber(c);if(r.isString(c))if(r.Long)c=r.Long.fromString(c);else return o.fromNumber(parseInt(c,10));return c.low||c.high?new o(c.low>>>0,c.high>>>0):w},o.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var s=~this.lo+1>>>0,N=~this.hi>>>0;return s||(N=N+1>>>0),-(s+N*4294967296)}return this.lo+this.hi*4294967296},o.prototype.toLong=function(c){return r.Long?new r.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var f=String.prototype.charCodeAt;return o.fromHash=function(c){return c===p?w:new o((f.call(c,0)|f.call(c,1)<<8|f.call(c,2)<<16|f.call(c,3)<<24)>>>0,(f.call(c,4)|f.call(c,5)<<8|f.call(c,6)<<16|f.call(c,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},o.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},o.prototype.length=function(){var c=this.lo,s=(this.lo>>>28|this.hi<<4)>>>0,N=this.hi>>>24;return N===0?s===0?c<16384?c<128?1:2:c<2097152?3:4:s<16384?s<128?5:6:s<2097152?7:8:N<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,(function(r){var o=r;o.asPromise=requireAspromise(),o.base64=requireBase64(),o.EventEmitter=requireEventemitter(),o.float=requireFloat(),o.inquire=requireInquire(),o.utf8=requireUtf8(),o.pool=requirePool(),o.LongBits=requireLongbits(),o.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),o.global=o.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(m){return typeof m=="number"&&isFinite(m)&&Math.floor(m)===m},o.isString=function(m){return typeof m=="string"||m instanceof String},o.isObject=function(m){return m&&typeof m=="object"},o.isset=o.isSet=function(m,c){var s=m[c];return s!=null&&m.hasOwnProperty(c)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},o.Buffer=(function(){try{var f=o.inquire("buffer").Buffer;return f.prototype.utf8Write?f:null}catch{return null}})(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(m){return typeof m=="number"?o.Buffer?o._Buffer_allocUnsafe(m):new o.Array(m):o.Buffer?o._Buffer_from(m):typeof Uint8Array>"u"?m:new Uint8Array(m)},o.Array=typeof Uint8Array<"u"?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(m){return m?o.LongBits.from(m).toHash():o.LongBits.zeroHash},o.longFromHash=function(m,c){var s=o.LongBits.fromHash(m);return o.Long?o.Long.fromBits(s.lo,s.hi,c):s.toNumber(!!c)};function w(f,m,c){for(var s=Object.keys(m),N=0;N<s.length;++N)(f[s[N]]===void 0||!c)&&(f[s[N]]=m[s[N]]);return f}o.merge=w,o.lcFirst=function(m){return m.charAt(0).toLowerCase()+m.substring(1)};function p(f){function m(c,s){if(!(this instanceof m))return new m(c,s);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,m):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&w(this,s)}return(m.prototype=Object.create(Error.prototype)).constructor=m,Object.defineProperty(m.prototype,"name",{get:function(){return f}}),m.prototype.toString=function(){return this.name+": "+this.message},m}o.newError=p,o.ProtocolError=p("ProtocolError"),o.oneOfGetter=function(m){for(var c={},s=0;s<m.length;++s)c[m[s]]=1;return function(){for(var N=Object.keys(this),T=N.length-1;T>-1;--T)if(c[N[T]]===1&&this[N[T]]!==void 0&&this[N[T]]!==null)return N[T]}},o.oneOfSetter=function(m){return function(c){for(var s=0;s<m.length;++s)m[s]!==c&&delete this[m[s]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var f=o.Buffer;if(!f){o._Buffer_from=o._Buffer_allocUnsafe=null;return}o._Buffer_from=f.from!==Uint8Array.from&&f.from||function(c,s){return new f(c,s)},o._Buffer_allocUnsafe=f.allocUnsafe||function(c){return new f(c)}}})(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=N;var r=requireMinimal$1(),o,w=r.LongBits,p=r.base64,f=r.utf8;function m(b,P,q){this.fn=b,this.len=P,this.next=void 0,this.val=q}function c(){}function s(b){this.head=b.head,this.tail=b.tail,this.len=b.len,this.next=b.states}function N(){this.len=0,this.head=new m(c,0,0),this.tail=this.head,this.states=null}var T=function(){return r.Buffer?function(){return(N.create=function(){return new o})()}:function(){return new N}};N.create=T(),N.alloc=function(P){return new r.Array(P)},r.Array!==Array&&(N.alloc=r.pool(N.alloc,r.Array.prototype.subarray)),N.prototype._push=function(P,q,$){return this.tail=this.tail.next=new m(P,q,$),this.len+=q,this};function y(b,P,q){P[q]=b&255}function u(b,P,q){for(;b>127;)P[q++]=b&127|128,b>>>=7;P[q]=b}function n(b,P){this.len=b,this.next=void 0,this.val=P}n.prototype=Object.create(m.prototype),n.prototype.fn=u,N.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new n((P=P>>>0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},N.prototype.int32=function(P){return P<0?this._push(e,10,w.fromNumber(P)):this.uint32(P)},N.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)};function e(b,P,q){for(;b.hi;)P[q++]=b.lo&127|128,b.lo=(b.lo>>>7|b.hi<<25)>>>0,b.hi>>>=7;for(;b.lo>127;)P[q++]=b.lo&127|128,b.lo=b.lo>>>7;P[q++]=b.lo}N.prototype.uint64=function(P){var q=w.from(P);return this._push(e,q.length(),q)},N.prototype.int64=N.prototype.uint64,N.prototype.sint64=function(P){var q=w.from(P).zzEncode();return this._push(e,q.length(),q)},N.prototype.bool=function(P){return this._push(y,1,P?1:0)};function t(b,P,q){P[q]=b&255,P[q+1]=b>>>8&255,P[q+2]=b>>>16&255,P[q+3]=b>>>24}N.prototype.fixed32=function(P){return this._push(t,4,P>>>0)},N.prototype.sfixed32=N.prototype.fixed32,N.prototype.fixed64=function(P){var q=w.from(P);return this._push(t,4,q.lo)._push(t,4,q.hi)},N.prototype.sfixed64=N.prototype.fixed64,N.prototype.float=function(P){return this._push(r.float.writeFloatLE,4,P)},N.prototype.double=function(P){return this._push(r.float.writeDoubleLE,8,P)};var l=r.Array.prototype.set?function(P,q,$){q.set(P,$)}:function(P,q,$){for(var oe=0;oe<P.length;++oe)q[$+oe]=P[oe]};return N.prototype.bytes=function(P){var q=P.length>>>0;if(!q)return this._push(y,1,0);if(r.isString(P)){var $=N.alloc(q=p.length(P));p.decode(P,$,0),P=$}return this.uint32(q)._push(l,q,P)},N.prototype.string=function(P){var q=f.length(P);return q?this.uint32(q)._push(f.write,q,P):this._push(y,1,0)},N.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new m(c,0,0),this.len=0,this},N.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new m(c,0,0),this.len=0),this},N.prototype.ldelim=function(){var P=this.head,q=this.tail,$=this.len;return this.reset().uint32($),$&&(this.tail.next=P.next,this.tail=q,this.len+=$),this},N.prototype.finish=function(){for(var P=this.head.next,q=this.constructor.alloc(this.len),$=0;P;)P.fn(P.val,q,$),$+=P.len,P=P.next;return q},N._configure=function(b){o=b,N.create=T(),o._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=w;var r=requireWriter();(w.prototype=Object.create(r.prototype)).constructor=w;var o=requireMinimal$1();function w(){r.call(this)}w._configure=function(){w.alloc=o._Buffer_allocUnsafe,w.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(m,c,s){c.set(m,s)}:function(m,c,s){if(m.copy)m.copy(c,s,0,m.length);else for(var N=0;N<m.length;)c[s++]=m[N++]}},w.prototype.bytes=function(m){o.isString(m)&&(m=o._Buffer_from(m,"base64"));var c=m.length>>>0;return this.uint32(c),c&&this._push(w.writeBytesBuffer,c,m),this};function p(f,m,c){f.length<40?o.utf8.write(f,m,c):m.utf8Write?m.utf8Write(f,c):m.write(f,c)}return w.prototype.string=function(m){var c=o.Buffer.byteLength(m);return this.uint32(c),c&&this._push(p,c,m),this},w._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=m;var r=requireMinimal$1(),o,w=r.LongBits,p=r.utf8;function f(u,n){return RangeError("index out of range: "+u.pos+" + "+(n||1)+" > "+u.len)}function m(u){this.buf=u,this.pos=0,this.len=u.length}var c=typeof Uint8Array<"u"?function(n){if(n instanceof Uint8Array||Array.isArray(n))return new m(n);throw Error("illegal buffer")}:function(n){if(Array.isArray(n))return new m(n);throw Error("illegal buffer")},s=function(){return r.Buffer?function(e){return(m.create=function(l){return r.Buffer.isBuffer(l)?new o(l):c(l)})(e)}:c};m.create=s(),m.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,m.prototype.uint32=(function(){var n=4294967295;return function(){if(n=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(n=(n|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,f(this,10);return n}})(),m.prototype.int32=function(){return this.uint32()|0},m.prototype.sint32=function(){var n=this.uint32();return n>>>1^-(n&1)|0};function N(){var u=new w(0,0),n=0;if(this.len-this.pos>4){for(;n<4;++n)if(u.lo=(u.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return u;if(u.lo=(u.lo|(this.buf[this.pos]&127)<<28)>>>0,u.hi=(u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return u;n=0}else{for(;n<3;++n){if(this.pos>=this.len)throw f(this);if(u.lo=(u.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return u}return u.lo=(u.lo|(this.buf[this.pos++]&127)<<n*7)>>>0,u}if(this.len-this.pos>4){for(;n<5;++n)if(u.hi=(u.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return u}else for(;n<5;++n){if(this.pos>=this.len)throw f(this);if(u.hi=(u.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return u}throw Error("invalid varint encoding")}m.prototype.bool=function(){return this.uint32()!==0};function T(u,n){return(u[n-4]|u[n-3]<<8|u[n-2]<<16|u[n-1]<<24)>>>0}m.prototype.fixed32=function(){if(this.pos+4>this.len)throw f(this,4);return T(this.buf,this.pos+=4)},m.prototype.sfixed32=function(){if(this.pos+4>this.len)throw f(this,4);return T(this.buf,this.pos+=4)|0};function y(){if(this.pos+8>this.len)throw f(this,8);return new w(T(this.buf,this.pos+=4),T(this.buf,this.pos+=4))}return m.prototype.float=function(){if(this.pos+4>this.len)throw f(this,4);var n=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n},m.prototype.double=function(){if(this.pos+8>this.len)throw f(this,4);var n=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n},m.prototype.bytes=function(){var n=this.uint32(),e=this.pos,t=this.pos+n;if(t>this.len)throw f(this,n);return this.pos+=n,Array.isArray(this.buf)?this.buf.slice(e,t):e===t?new this.buf.constructor(0):this._slice.call(this.buf,e,t)},m.prototype.string=function(){var n=this.bytes();return p.read(n,0,n.length)},m.prototype.skip=function(n){if(typeof n=="number"){if(this.pos+n>this.len)throw f(this,n);this.pos+=n}else do if(this.pos>=this.len)throw f(this);while(this.buf[this.pos++]&128);return this},m.prototype.skipType=function(u){switch(u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(u=this.uint32()&7)!==4;)this.skipType(u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+u+" at offset "+this.pos)}return this},m._configure=function(u){o=u,m.create=s(),o._configure();var n=r.Long?"toLong":"toNumber";r.merge(m.prototype,{int64:function(){return N.call(this)[n](!1)},uint64:function(){return N.call(this)[n](!0)},sint64:function(){return N.call(this).zzDecode()[n](!1)},fixed64:function(){return y.call(this)[n](!0)},sfixed64:function(){return y.call(this)[n](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=w;var r=requireReader();(w.prototype=Object.create(r.prototype)).constructor=w;var o=requireMinimal$1();function w(p){r.call(this,p)}return w._configure=function(){o.Buffer&&(w.prototype._slice=o.Buffer.prototype.slice)},w.prototype.string=function(){var f=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+f,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+f,this.len))},w._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=o;var r=requireMinimal$1();(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o;function o(w,p,f){if(typeof w!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=w,this.requestDelimited=!!p,this.responseDelimited=!!f}return o.prototype.rpcCall=function w(p,f,m,c,s){if(!c)throw TypeError("request must be specified");var N=this;if(!s)return r.asPromise(w,N,p,f,m,c);if(!N.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return N.rpcImpl(p,f[N.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(y,u){if(y)return N.emit("error",y,p),s(y);if(u===null){N.end(!0);return}if(!(u instanceof m))try{u=m[N.responseDelimited?"decodeDelimited":"decode"](u)}catch(n){return N.emit("error",n,p),s(n)}return N.emit("data",u,p),s(null,u)})}catch(T){N.emit("error",T,p),setTimeout(function(){s(T)},0);return}},o.prototype.end=function(p){return this.rpcImpl&&(p||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,(function(r){var o=r;o.Service=requireService()})(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,(function(r){var o=r;o.build="minimal",o.Writer=requireWriter(),o.BufferWriter=requireWriter_buffer(),o.Reader=requireReader(),o.BufferReader=requireReader_buffer(),o.util=requireMinimal$1(),o.rpc=requireRpc(),o.roots=requireRoots(),o.configure=w;function w(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}w()})(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var sparkplugPayloadProto,hasRequiredSparkplugPayloadProto;function requireSparkplugPayloadProto(){if(hasRequiredSparkplugPayloadProto)return sparkplugPayloadProto;hasRequiredSparkplugPayloadProto=1;var r=requireMinimal(),o=r.Reader,w=r.Writer,p=r.util,f=r.roots.default||(r.roots.default={});return f.org=(function(){var m={};return m.eclipse=(function(){var c={};return c.tahu=(function(){var s={};return s.protobuf=(function(){var N={};return N.DataType=(function(){var T={},y=Object.create(T);return y[T[0]="Unknown"]=0,y[T[1]="Int8"]=1,y[T[2]="Int16"]=2,y[T[3]="Int32"]=3,y[T[4]="Int64"]=4,y[T[5]="UInt8"]=5,y[T[6]="UInt16"]=6,y[T[7]="UInt32"]=7,y[T[8]="UInt64"]=8,y[T[9]="Float"]=9,y[T[10]="Double"]=10,y[T[11]="Boolean"]=11,y[T[12]="String"]=12,y[T[13]="DateTime"]=13,y[T[14]="Text"]=14,y[T[15]="UUID"]=15,y[T[16]="DataSet"]=16,y[T[17]="Bytes"]=17,y[T[18]="File"]=18,y[T[19]="Template"]=19,y[T[20]="PropertySet"]=20,y[T[21]="PropertySetList"]=21,y[T[22]="Int8Array"]=22,y[T[23]="Int16Array"]=23,y[T[24]="Int32Array"]=24,y[T[25]="Int64Array"]=25,y[T[26]="UInt8Array"]=26,y[T[27]="UInt16Array"]=27,y[T[28]="UInt32Array"]=28,y[T[29]="UInt64Array"]=29,y[T[30]="FloatArray"]=30,y[T[31]="DoubleArray"]=31,y[T[32]="BooleanArray"]=32,y[T[33]="StringArray"]=33,y[T[34]="DateTimeArray"]=34,y})(),N.Payload=(function(){function T(y){if(this.metrics=[],y)for(var u=Object.keys(y),n=0;n<u.length;++n)y[u[n]]!=null&&(this[u[n]]=y[u[n]])}return T.prototype.timestamp=p.Long?p.Long.fromBits(0,0,!0):0,T.prototype.metrics=p.emptyArray,T.prototype.seq=p.Long?p.Long.fromBits(0,0,!0):0,T.prototype.uuid="",T.prototype.body=p.newBuffer([]),T.create=function(u){return new T(u)},T.encode=function(u,n){if(n||(n=w.create()),u.timestamp!=null&&Object.hasOwnProperty.call(u,"timestamp")&&n.uint32(8).uint64(u.timestamp),u.metrics!=null&&u.metrics.length)for(var e=0;e<u.metrics.length;++e)f.org.eclipse.tahu.protobuf.Payload.Metric.encode(u.metrics[e],n.uint32(18).fork()).ldelim();return u.seq!=null&&Object.hasOwnProperty.call(u,"seq")&&n.uint32(24).uint64(u.seq),u.uuid!=null&&Object.hasOwnProperty.call(u,"uuid")&&n.uint32(34).string(u.uuid),u.body!=null&&Object.hasOwnProperty.call(u,"body")&&n.uint32(42).bytes(u.body),n},T.encodeDelimited=function(u,n){return this.encode(u,n).ldelim()},T.decode=function(u,n){u instanceof o||(u=o.create(u));for(var e=n===void 0?u.len:u.pos+n,t=new f.org.eclipse.tahu.protobuf.Payload;u.pos<e;){var l=u.uint32();switch(l>>>3){case 1:t.timestamp=u.uint64();break;case 2:t.metrics&&t.metrics.length||(t.metrics=[]),t.metrics.push(f.org.eclipse.tahu.protobuf.Payload.Metric.decode(u,u.uint32()));break;case 3:t.seq=u.uint64();break;case 4:t.uuid=u.string();break;case 5:t.body=u.bytes();break;default:u.skipType(l&7);break}}return t},T.decodeDelimited=function(u){return u instanceof o||(u=new o(u)),this.decode(u,u.uint32())},T.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.timestamp!=null&&u.hasOwnProperty("timestamp")&&!p.isInteger(u.timestamp)&&!(u.timestamp&&p.isInteger(u.timestamp.low)&&p.isInteger(u.timestamp.high)))return"timestamp: integer|Long expected";if(u.metrics!=null&&u.hasOwnProperty("metrics")){if(!Array.isArray(u.metrics))return"metrics: array expected";for(var n=0;n<u.metrics.length;++n){var e=f.org.eclipse.tahu.protobuf.Payload.Metric.verify(u.metrics[n]);if(e)return"metrics."+e}}return u.seq!=null&&u.hasOwnProperty("seq")&&!p.isInteger(u.seq)&&!(u.seq&&p.isInteger(u.seq.low)&&p.isInteger(u.seq.high))?"seq: integer|Long expected":u.uuid!=null&&u.hasOwnProperty("uuid")&&!p.isString(u.uuid)?"uuid: string expected":u.body!=null&&u.hasOwnProperty("body")&&!(u.body&&typeof u.body.length=="number"||p.isString(u.body))?"body: buffer expected":null},T.fromObject=function(u){if(u instanceof f.org.eclipse.tahu.protobuf.Payload)return u;var n=new f.org.eclipse.tahu.protobuf.Payload;if(u.timestamp!=null&&(p.Long?(n.timestamp=p.Long.fromValue(u.timestamp)).unsigned=!0:typeof u.timestamp=="string"?n.timestamp=parseInt(u.timestamp,10):typeof u.timestamp=="number"?n.timestamp=u.timestamp:typeof u.timestamp=="object"&&(n.timestamp=new p.LongBits(u.timestamp.low>>>0,u.timestamp.high>>>0).toNumber(!0))),u.metrics){if(!Array.isArray(u.metrics))throw TypeError(".org.eclipse.tahu.protobuf.Payload.metrics: array expected");n.metrics=[];for(var e=0;e<u.metrics.length;++e){if(typeof u.metrics[e]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.metrics: object expected");n.metrics[e]=f.org.eclipse.tahu.protobuf.Payload.Metric.fromObject(u.metrics[e])}}return u.seq!=null&&(p.Long?(n.seq=p.Long.fromValue(u.seq)).unsigned=!0:typeof u.seq=="string"?n.seq=parseInt(u.seq,10):typeof u.seq=="number"?n.seq=u.seq:typeof u.seq=="object"&&(n.seq=new p.LongBits(u.seq.low>>>0,u.seq.high>>>0).toNumber(!0))),u.uuid!=null&&(n.uuid=String(u.uuid)),u.body!=null&&(typeof u.body=="string"?p.base64.decode(u.body,n.body=p.newBuffer(p.base64.length(u.body)),0):u.body.length&&(n.body=u.body)),n},T.toObject=function(u,n){n||(n={});var e={};if((n.arrays||n.defaults)&&(e.metrics=[]),n.defaults){if(p.Long){var t=new p.Long(0,0,!0);e.timestamp=n.longs===String?t.toString():n.longs===Number?t.toNumber():t}else e.timestamp=n.longs===String?"0":0;if(p.Long){var t=new p.Long(0,0,!0);e.seq=n.longs===String?t.toString():n.longs===Number?t.toNumber():t}else e.seq=n.longs===String?"0":0;e.uuid="",n.bytes===String?e.body="":(e.body=[],n.bytes!==Array&&(e.body=p.newBuffer(e.body)))}if(u.timestamp!=null&&u.hasOwnProperty("timestamp")&&(typeof u.timestamp=="number"?e.timestamp=n.longs===String?String(u.timestamp):u.timestamp:e.timestamp=n.longs===String?p.Long.prototype.toString.call(u.timestamp):n.longs===Number?new p.LongBits(u.timestamp.low>>>0,u.timestamp.high>>>0).toNumber(!0):u.timestamp),u.metrics&&u.metrics.length){e.metrics=[];for(var l=0;l<u.metrics.length;++l)e.metrics[l]=f.org.eclipse.tahu.protobuf.Payload.Metric.toObject(u.metrics[l],n)}return u.seq!=null&&u.hasOwnProperty("seq")&&(typeof u.seq=="number"?e.seq=n.longs===String?String(u.seq):u.seq:e.seq=n.longs===String?p.Long.prototype.toString.call(u.seq):n.longs===Number?new p.LongBits(u.seq.low>>>0,u.seq.high>>>0).toNumber(!0):u.seq),u.uuid!=null&&u.hasOwnProperty("uuid")&&(e.uuid=u.uuid),u.body!=null&&u.hasOwnProperty("body")&&(e.body=n.bytes===String?p.base64.encode(u.body,0,u.body.length):n.bytes===Array?Array.prototype.slice.call(u.body):u.body),e},T.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},T.Template=(function(){function y(u){if(this.metrics=[],this.parameters=[],u)for(var n=Object.keys(u),e=0;e<n.length;++e)u[n[e]]!=null&&(this[n[e]]=u[n[e]])}return y.prototype.version="",y.prototype.metrics=p.emptyArray,y.prototype.parameters=p.emptyArray,y.prototype.templateRef="",y.prototype.isDefinition=!1,y.create=function(n){return new y(n)},y.encode=function(n,e){if(e||(e=w.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&e.uint32(10).string(n.version),n.metrics!=null&&n.metrics.length)for(var t=0;t<n.metrics.length;++t)f.org.eclipse.tahu.protobuf.Payload.Metric.encode(n.metrics[t],e.uint32(18).fork()).ldelim();if(n.parameters!=null&&n.parameters.length)for(var t=0;t<n.parameters.length;++t)f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.encode(n.parameters[t],e.uint32(26).fork()).ldelim();return n.templateRef!=null&&Object.hasOwnProperty.call(n,"templateRef")&&e.uint32(34).string(n.templateRef),n.isDefinition!=null&&Object.hasOwnProperty.call(n,"isDefinition")&&e.uint32(40).bool(n.isDefinition),e},y.encodeDelimited=function(n,e){return this.encode(n,e).ldelim()},y.decode=function(n,e){n instanceof o||(n=o.create(n));for(var t=e===void 0?n.len:n.pos+e,l=new f.org.eclipse.tahu.protobuf.Payload.Template;n.pos<t;){var b=n.uint32();switch(b>>>3){case 1:l.version=n.string();break;case 2:l.metrics&&l.metrics.length||(l.metrics=[]),l.metrics.push(f.org.eclipse.tahu.protobuf.Payload.Metric.decode(n,n.uint32()));break;case 3:l.parameters&&l.parameters.length||(l.parameters=[]),l.parameters.push(f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.decode(n,n.uint32()));break;case 4:l.templateRef=n.string();break;case 5:l.isDefinition=n.bool();break;default:n.skipType(b&7);break}}return l},y.decodeDelimited=function(n){return n instanceof o||(n=new o(n)),this.decode(n,n.uint32())},y.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.version!=null&&n.hasOwnProperty("version")&&!p.isString(n.version))return"version: string expected";if(n.metrics!=null&&n.hasOwnProperty("metrics")){if(!Array.isArray(n.metrics))return"metrics: array expected";for(var e=0;e<n.metrics.length;++e){var t=f.org.eclipse.tahu.protobuf.Payload.Metric.verify(n.metrics[e]);if(t)return"metrics."+t}}if(n.parameters!=null&&n.hasOwnProperty("parameters")){if(!Array.isArray(n.parameters))return"parameters: array expected";for(var e=0;e<n.parameters.length;++e){var t=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.verify(n.parameters[e]);if(t)return"parameters."+t}}return n.templateRef!=null&&n.hasOwnProperty("templateRef")&&!p.isString(n.templateRef)?"templateRef: string expected":n.isDefinition!=null&&n.hasOwnProperty("isDefinition")&&typeof n.isDefinition!="boolean"?"isDefinition: boolean expected":null},y.fromObject=function(n){if(n instanceof f.org.eclipse.tahu.protobuf.Payload.Template)return n;var e=new f.org.eclipse.tahu.protobuf.Payload.Template;if(n.version!=null&&(e.version=String(n.version)),n.metrics){if(!Array.isArray(n.metrics))throw TypeError(".org.eclipse.tahu.protobuf.Payload.Template.metrics: array expected");e.metrics=[];for(var t=0;t<n.metrics.length;++t){if(typeof n.metrics[t]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Template.metrics: object expected");e.metrics[t]=f.org.eclipse.tahu.protobuf.Payload.Metric.fromObject(n.metrics[t])}}if(n.parameters){if(!Array.isArray(n.parameters))throw TypeError(".org.eclipse.tahu.protobuf.Payload.Template.parameters: array expected");e.parameters=[];for(var t=0;t<n.parameters.length;++t){if(typeof n.parameters[t]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Template.parameters: object expected");e.parameters[t]=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.fromObject(n.parameters[t])}}return n.templateRef!=null&&(e.templateRef=String(n.templateRef)),n.isDefinition!=null&&(e.isDefinition=!!n.isDefinition),e},y.toObject=function(n,e){e||(e={});var t={};if((e.arrays||e.defaults)&&(t.metrics=[],t.parameters=[]),e.defaults&&(t.version="",t.templateRef="",t.isDefinition=!1),n.version!=null&&n.hasOwnProperty("version")&&(t.version=n.version),n.metrics&&n.metrics.length){t.metrics=[];for(var l=0;l<n.metrics.length;++l)t.metrics[l]=f.org.eclipse.tahu.protobuf.Payload.Metric.toObject(n.metrics[l],e)}if(n.parameters&&n.parameters.length){t.parameters=[];for(var l=0;l<n.parameters.length;++l)t.parameters[l]=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.toObject(n.parameters[l],e)}return n.templateRef!=null&&n.hasOwnProperty("templateRef")&&(t.templateRef=n.templateRef),n.isDefinition!=null&&n.hasOwnProperty("isDefinition")&&(t.isDefinition=n.isDefinition),t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y.Parameter=(function(){function u(e){if(e)for(var t=Object.keys(e),l=0;l<t.length;++l)e[t[l]]!=null&&(this[t[l]]=e[t[l]])}u.prototype.name="",u.prototype.type=0,u.prototype.intValue=null,u.prototype.longValue=null,u.prototype.floatValue=null,u.prototype.doubleValue=null,u.prototype.booleanValue=null,u.prototype.stringValue=null,u.prototype.extensionValue=null;var n;return Object.defineProperty(u.prototype,"value",{get:p.oneOfGetter(n=["intValue","longValue","floatValue","doubleValue","booleanValue","stringValue","extensionValue"]),set:p.oneOfSetter(n)}),u.create=function(t){return new u(t)},u.encode=function(t,l){return l||(l=w.create()),t.name!=null&&Object.hasOwnProperty.call(t,"name")&&l.uint32(10).string(t.name),t.type!=null&&Object.hasOwnProperty.call(t,"type")&&l.uint32(16).uint32(t.type),t.intValue!=null&&Object.hasOwnProperty.call(t,"intValue")&&l.uint32(24).uint32(t.intValue),t.longValue!=null&&Object.hasOwnProperty.call(t,"longValue")&&l.uint32(32).uint64(t.longValue),t.floatValue!=null&&Object.hasOwnProperty.call(t,"floatValue")&&l.uint32(45).float(t.floatValue),t.doubleValue!=null&&Object.hasOwnProperty.call(t,"doubleValue")&&l.uint32(49).double(t.doubleValue),t.booleanValue!=null&&Object.hasOwnProperty.call(t,"booleanValue")&&l.uint32(56).bool(t.booleanValue),t.stringValue!=null&&Object.hasOwnProperty.call(t,"stringValue")&&l.uint32(66).string(t.stringValue),t.extensionValue!=null&&Object.hasOwnProperty.call(t,"extensionValue")&&f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension.encode(t.extensionValue,l.uint32(74).fork()).ldelim(),l},u.encodeDelimited=function(t,l){return this.encode(t,l).ldelim()},u.decode=function(t,l){t instanceof o||(t=o.create(t));for(var b=l===void 0?t.len:t.pos+l,P=new f.org.eclipse.tahu.protobuf.Payload.Template.Parameter;t.pos<b;){var q=t.uint32();switch(q>>>3){case 1:P.name=t.string();break;case 2:P.type=t.uint32();break;case 3:P.intValue=t.uint32();break;case 4:P.longValue=t.uint64();break;case 5:P.floatValue=t.float();break;case 6:P.doubleValue=t.double();break;case 7:P.booleanValue=t.bool();break;case 8:P.stringValue=t.string();break;case 9:P.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension.decode(t,t.uint32());break;default:t.skipType(q&7);break}}return P},u.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},u.verify=function(t){if(typeof t!="object"||t===null)return"object expected";var l={};if(t.name!=null&&t.hasOwnProperty("name")&&!p.isString(t.name))return"name: string expected";if(t.type!=null&&t.hasOwnProperty("type")&&!p.isInteger(t.type))return"type: integer expected";if(t.intValue!=null&&t.hasOwnProperty("intValue")&&(l.value=1,!p.isInteger(t.intValue)))return"intValue: integer expected";if(t.longValue!=null&&t.hasOwnProperty("longValue")){if(l.value===1)return"value: multiple values";if(l.value=1,!p.isInteger(t.longValue)&&!(t.longValue&&p.isInteger(t.longValue.low)&&p.isInteger(t.longValue.high)))return"longValue: integer|Long expected"}if(t.floatValue!=null&&t.hasOwnProperty("floatValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.floatValue!="number")return"floatValue: number expected"}if(t.doubleValue!=null&&t.hasOwnProperty("doubleValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.doubleValue!="number")return"doubleValue: number expected"}if(t.booleanValue!=null&&t.hasOwnProperty("booleanValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.booleanValue!="boolean")return"booleanValue: boolean expected"}if(t.stringValue!=null&&t.hasOwnProperty("stringValue")){if(l.value===1)return"value: multiple values";if(l.value=1,!p.isString(t.stringValue))return"stringValue: string expected"}if(t.extensionValue!=null&&t.hasOwnProperty("extensionValue")){if(l.value===1)return"value: multiple values";l.value=1;{var b=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension.verify(t.extensionValue);if(b)return"extensionValue."+b}}return null},u.fromObject=function(t){if(t instanceof f.org.eclipse.tahu.protobuf.Payload.Template.Parameter)return t;var l=new f.org.eclipse.tahu.protobuf.Payload.Template.Parameter;if(t.name!=null&&(l.name=String(t.name)),t.type!=null&&(l.type=t.type>>>0),t.intValue!=null&&(l.intValue=t.intValue>>>0),t.longValue!=null&&(p.Long?(l.longValue=p.Long.fromValue(t.longValue)).unsigned=!0:typeof t.longValue=="string"?l.longValue=parseInt(t.longValue,10):typeof t.longValue=="number"?l.longValue=t.longValue:typeof t.longValue=="object"&&(l.longValue=new p.LongBits(t.longValue.low>>>0,t.longValue.high>>>0).toNumber(!0))),t.floatValue!=null&&(l.floatValue=Number(t.floatValue)),t.doubleValue!=null&&(l.doubleValue=Number(t.doubleValue)),t.booleanValue!=null&&(l.booleanValue=!!t.booleanValue),t.stringValue!=null&&(l.stringValue=String(t.stringValue)),t.extensionValue!=null){if(typeof t.extensionValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Template.Parameter.extensionValue: object expected");l.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension.fromObject(t.extensionValue)}return l},u.toObject=function(t,l){l||(l={});var b={};return l.defaults&&(b.name="",b.type=0),t.name!=null&&t.hasOwnProperty("name")&&(b.name=t.name),t.type!=null&&t.hasOwnProperty("type")&&(b.type=t.type),t.intValue!=null&&t.hasOwnProperty("intValue")&&(b.intValue=t.intValue,l.oneofs&&(b.value="intValue")),t.longValue!=null&&t.hasOwnProperty("longValue")&&(typeof t.longValue=="number"?b.longValue=l.longs===String?String(t.longValue):t.longValue:b.longValue=l.longs===String?p.Long.prototype.toString.call(t.longValue):l.longs===Number?new p.LongBits(t.longValue.low>>>0,t.longValue.high>>>0).toNumber(!0):t.longValue,l.oneofs&&(b.value="longValue")),t.floatValue!=null&&t.hasOwnProperty("floatValue")&&(b.floatValue=l.json&&!isFinite(t.floatValue)?String(t.floatValue):t.floatValue,l.oneofs&&(b.value="floatValue")),t.doubleValue!=null&&t.hasOwnProperty("doubleValue")&&(b.doubleValue=l.json&&!isFinite(t.doubleValue)?String(t.doubleValue):t.doubleValue,l.oneofs&&(b.value="doubleValue")),t.booleanValue!=null&&t.hasOwnProperty("booleanValue")&&(b.booleanValue=t.booleanValue,l.oneofs&&(b.value="booleanValue")),t.stringValue!=null&&t.hasOwnProperty("stringValue")&&(b.stringValue=t.stringValue,l.oneofs&&(b.value="stringValue")),t.extensionValue!=null&&t.hasOwnProperty("extensionValue")&&(b.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension.toObject(t.extensionValue,l),l.oneofs&&(b.value="extensionValue")),b},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u.ParameterValueExtension=(function(){function e(t){if(t)for(var l=Object.keys(t),b=0;b<l.length;++b)t[l[b]]!=null&&(this[l[b]]=t[l[b]])}return e.create=function(l){return new e(l)},e.encode=function(l,b){return b||(b=w.create()),b},e.encodeDelimited=function(l,b){return this.encode(l,b).ldelim()},e.decode=function(l,b){l instanceof o||(l=o.create(l));for(var P=b===void 0?l.len:l.pos+b,q=new f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension;l.pos<P;){var $=l.uint32();switch($>>>3){default:l.skipType($&7);break}}return q},e.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},e.verify=function(l){return typeof l!="object"||l===null?"object expected":null},e.fromObject=function(l){return l instanceof f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension?l:new f.org.eclipse.tahu.protobuf.Payload.Template.Parameter.ParameterValueExtension},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e})(),u})(),y})(),T.DataSet=(function(){function y(u){if(this.columns=[],this.types=[],this.rows=[],u)for(var n=Object.keys(u),e=0;e<n.length;++e)u[n[e]]!=null&&(this[n[e]]=u[n[e]])}return y.prototype.numOfColumns=p.Long?p.Long.fromBits(0,0,!0):0,y.prototype.columns=p.emptyArray,y.prototype.types=p.emptyArray,y.prototype.rows=p.emptyArray,y.create=function(n){return new y(n)},y.encode=function(n,e){if(e||(e=w.create()),n.numOfColumns!=null&&Object.hasOwnProperty.call(n,"numOfColumns")&&e.uint32(8).uint64(n.numOfColumns),n.columns!=null&&n.columns.length)for(var t=0;t<n.columns.length;++t)e.uint32(18).string(n.columns[t]);if(n.types!=null&&n.types.length)for(var t=0;t<n.types.length;++t)e.uint32(24).uint32(n.types[t]);if(n.rows!=null&&n.rows.length)for(var t=0;t<n.rows.length;++t)f.org.eclipse.tahu.protobuf.Payload.DataSet.Row.encode(n.rows[t],e.uint32(34).fork()).ldelim();return e},y.encodeDelimited=function(n,e){return this.encode(n,e).ldelim()},y.decode=function(n,e){n instanceof o||(n=o.create(n));for(var t=e===void 0?n.len:n.pos+e,l=new f.org.eclipse.tahu.protobuf.Payload.DataSet;n.pos<t;){var b=n.uint32();switch(b>>>3){case 1:l.numOfColumns=n.uint64();break;case 2:l.columns&&l.columns.length||(l.columns=[]),l.columns.push(n.string());break;case 3:if(l.types&&l.types.length||(l.types=[]),(b&7)===2)for(var P=n.uint32()+n.pos;n.pos<P;)l.types.push(n.uint32());else l.types.push(n.uint32());break;case 4:l.rows&&l.rows.length||(l.rows=[]),l.rows.push(f.org.eclipse.tahu.protobuf.Payload.DataSet.Row.decode(n,n.uint32()));break;default:n.skipType(b&7);break}}return l},y.decodeDelimited=function(n){return n instanceof o||(n=new o(n)),this.decode(n,n.uint32())},y.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.numOfColumns!=null&&n.hasOwnProperty("numOfColumns")&&!p.isInteger(n.numOfColumns)&&!(n.numOfColumns&&p.isInteger(n.numOfColumns.low)&&p.isInteger(n.numOfColumns.high)))return"numOfColumns: integer|Long expected";if(n.columns!=null&&n.hasOwnProperty("columns")){if(!Array.isArray(n.columns))return"columns: array expected";for(var e=0;e<n.columns.length;++e)if(!p.isString(n.columns[e]))return"columns: string[] expected"}if(n.types!=null&&n.hasOwnProperty("types")){if(!Array.isArray(n.types))return"types: array expected";for(var e=0;e<n.types.length;++e)if(!p.isInteger(n.types[e]))return"types: integer[] expected"}if(n.rows!=null&&n.hasOwnProperty("rows")){if(!Array.isArray(n.rows))return"rows: array expected";for(var e=0;e<n.rows.length;++e){var t=f.org.eclipse.tahu.protobuf.Payload.DataSet.Row.verify(n.rows[e]);if(t)return"rows."+t}}return null},y.fromObject=function(n){if(n instanceof f.org.eclipse.tahu.protobuf.Payload.DataSet)return n;var e=new f.org.eclipse.tahu.protobuf.Payload.DataSet;if(n.numOfColumns!=null&&(p.Long?(e.numOfColumns=p.Long.fromValue(n.numOfColumns)).unsigned=!0:typeof n.numOfColumns=="string"?e.numOfColumns=parseInt(n.numOfColumns,10):typeof n.numOfColumns=="number"?e.numOfColumns=n.numOfColumns:typeof n.numOfColumns=="object"&&(e.numOfColumns=new p.LongBits(n.numOfColumns.low>>>0,n.numOfColumns.high>>>0).toNumber(!0))),n.columns){if(!Array.isArray(n.columns))throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.columns: array expected");e.columns=[];for(var t=0;t<n.columns.length;++t)e.columns[t]=String(n.columns[t])}if(n.types){if(!Array.isArray(n.types))throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.types: array expected");e.types=[];for(var t=0;t<n.types.length;++t)e.types[t]=n.types[t]>>>0}if(n.rows){if(!Array.isArray(n.rows))throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.rows: array expected");e.rows=[];for(var t=0;t<n.rows.length;++t){if(typeof n.rows[t]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.rows: object expected");e.rows[t]=f.org.eclipse.tahu.protobuf.Payload.DataSet.Row.fromObject(n.rows[t])}}return e},y.toObject=function(n,e){e||(e={});var t={};if((e.arrays||e.defaults)&&(t.columns=[],t.types=[],t.rows=[]),e.defaults)if(p.Long){var l=new p.Long(0,0,!0);t.numOfColumns=e.longs===String?l.toString():e.longs===Number?l.toNumber():l}else t.numOfColumns=e.longs===String?"0":0;if(n.numOfColumns!=null&&n.hasOwnProperty("numOfColumns")&&(typeof n.numOfColumns=="number"?t.numOfColumns=e.longs===String?String(n.numOfColumns):n.numOfColumns:t.numOfColumns=e.longs===String?p.Long.prototype.toString.call(n.numOfColumns):e.longs===Number?new p.LongBits(n.numOfColumns.low>>>0,n.numOfColumns.high>>>0).toNumber(!0):n.numOfColumns),n.columns&&n.columns.length){t.columns=[];for(var b=0;b<n.columns.length;++b)t.columns[b]=n.columns[b]}if(n.types&&n.types.length){t.types=[];for(var b=0;b<n.types.length;++b)t.types[b]=n.types[b]}if(n.rows&&n.rows.length){t.rows=[];for(var b=0;b<n.rows.length;++b)t.rows[b]=f.org.eclipse.tahu.protobuf.Payload.DataSet.Row.toObject(n.rows[b],e)}return t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y.DataSetValue=(function(){function u(e){if(e)for(var t=Object.keys(e),l=0;l<t.length;++l)e[t[l]]!=null&&(this[t[l]]=e[t[l]])}u.prototype.intValue=null,u.prototype.longValue=null,u.prototype.floatValue=null,u.prototype.doubleValue=null,u.prototype.booleanValue=null,u.prototype.stringValue=null,u.prototype.extensionValue=null;var n;return Object.defineProperty(u.prototype,"value",{get:p.oneOfGetter(n=["intValue","longValue","floatValue","doubleValue","booleanValue","stringValue","extensionValue"]),set:p.oneOfSetter(n)}),u.create=function(t){return new u(t)},u.encode=function(t,l){return l||(l=w.create()),t.intValue!=null&&Object.hasOwnProperty.call(t,"intValue")&&l.uint32(8).uint32(t.intValue),t.longValue!=null&&Object.hasOwnProperty.call(t,"longValue")&&l.uint32(16).uint64(t.longValue),t.floatValue!=null&&Object.hasOwnProperty.call(t,"floatValue")&&l.uint32(29).float(t.floatValue),t.doubleValue!=null&&Object.hasOwnProperty.call(t,"doubleValue")&&l.uint32(33).double(t.doubleValue),t.booleanValue!=null&&Object.hasOwnProperty.call(t,"booleanValue")&&l.uint32(40).bool(t.booleanValue),t.stringValue!=null&&Object.hasOwnProperty.call(t,"stringValue")&&l.uint32(50).string(t.stringValue),t.extensionValue!=null&&Object.hasOwnProperty.call(t,"extensionValue")&&f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension.encode(t.extensionValue,l.uint32(58).fork()).ldelim(),l},u.encodeDelimited=function(t,l){return this.encode(t,l).ldelim()},u.decode=function(t,l){t instanceof o||(t=o.create(t));for(var b=l===void 0?t.len:t.pos+l,P=new f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue;t.pos<b;){var q=t.uint32();switch(q>>>3){case 1:P.intValue=t.uint32();break;case 2:P.longValue=t.uint64();break;case 3:P.floatValue=t.float();break;case 4:P.doubleValue=t.double();break;case 5:P.booleanValue=t.bool();break;case 6:P.stringValue=t.string();break;case 7:P.extensionValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension.decode(t,t.uint32());break;default:t.skipType(q&7);break}}return P},u.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},u.verify=function(t){if(typeof t!="object"||t===null)return"object expected";var l={};if(t.intValue!=null&&t.hasOwnProperty("intValue")&&(l.value=1,!p.isInteger(t.intValue)))return"intValue: integer expected";if(t.longValue!=null&&t.hasOwnProperty("longValue")){if(l.value===1)return"value: multiple values";if(l.value=1,!p.isInteger(t.longValue)&&!(t.longValue&&p.isInteger(t.longValue.low)&&p.isInteger(t.longValue.high)))return"longValue: integer|Long expected"}if(t.floatValue!=null&&t.hasOwnProperty("floatValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.floatValue!="number")return"floatValue: number expected"}if(t.doubleValue!=null&&t.hasOwnProperty("doubleValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.doubleValue!="number")return"doubleValue: number expected"}if(t.booleanValue!=null&&t.hasOwnProperty("booleanValue")){if(l.value===1)return"value: multiple values";if(l.value=1,typeof t.booleanValue!="boolean")return"booleanValue: boolean expected"}if(t.stringValue!=null&&t.hasOwnProperty("stringValue")){if(l.value===1)return"value: multiple values";if(l.value=1,!p.isString(t.stringValue))return"stringValue: string expected"}if(t.extensionValue!=null&&t.hasOwnProperty("extensionValue")){if(l.value===1)return"value: multiple values";l.value=1;{var b=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension.verify(t.extensionValue);if(b)return"extensionValue."+b}}return null},u.fromObject=function(t){if(t instanceof f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue)return t;var l=new f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue;if(t.intValue!=null&&(l.intValue=t.intValue>>>0),t.longValue!=null&&(p.Long?(l.longValue=p.Long.fromValue(t.longValue)).unsigned=!0:typeof t.longValue=="string"?l.longValue=parseInt(t.longValue,10):typeof t.longValue=="number"?l.longValue=t.longValue:typeof t.longValue=="object"&&(l.longValue=new p.LongBits(t.longValue.low>>>0,t.longValue.high>>>0).toNumber(!0))),t.floatValue!=null&&(l.floatValue=Number(t.floatValue)),t.doubleValue!=null&&(l.doubleValue=Number(t.doubleValue)),t.booleanValue!=null&&(l.booleanValue=!!t.booleanValue),t.stringValue!=null&&(l.stringValue=String(t.stringValue)),t.extensionValue!=null){if(typeof t.extensionValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.extensionValue: object expected");l.extensionValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension.fromObject(t.extensionValue)}return l},u.toObject=function(t,l){l||(l={});var b={};return t.intValue!=null&&t.hasOwnProperty("intValue")&&(b.intValue=t.intValue,l.oneofs&&(b.value="intValue")),t.longValue!=null&&t.hasOwnProperty("longValue")&&(typeof t.longValue=="number"?b.longValue=l.longs===String?String(t.longValue):t.longValue:b.longValue=l.longs===String?p.Long.prototype.toString.call(t.longValue):l.longs===Number?new p.LongBits(t.longValue.low>>>0,t.longValue.high>>>0).toNumber(!0):t.longValue,l.oneofs&&(b.value="longValue")),t.floatValue!=null&&t.hasOwnProperty("floatValue")&&(b.floatValue=l.json&&!isFinite(t.floatValue)?String(t.floatValue):t.floatValue,l.oneofs&&(b.value="floatValue")),t.doubleValue!=null&&t.hasOwnProperty("doubleValue")&&(b.doubleValue=l.json&&!isFinite(t.doubleValue)?String(t.doubleValue):t.doubleValue,l.oneofs&&(b.value="doubleValue")),t.booleanValue!=null&&t.hasOwnProperty("booleanValue")&&(b.booleanValue=t.booleanValue,l.oneofs&&(b.value="booleanValue")),t.stringValue!=null&&t.hasOwnProperty("stringValue")&&(b.stringValue=t.stringValue,l.oneofs&&(b.value="stringValue")),t.extensionValue!=null&&t.hasOwnProperty("extensionValue")&&(b.extensionValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension.toObject(t.extensionValue,l),l.oneofs&&(b.value="extensionValue")),b},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u.DataSetValueExtension=(function(){function e(t){if(t)for(var l=Object.keys(t),b=0;b<l.length;++b)t[l[b]]!=null&&(this[l[b]]=t[l[b]])}return e.create=function(l){return new e(l)},e.encode=function(l,b){return b||(b=w.create()),b},e.encodeDelimited=function(l,b){return this.encode(l,b).ldelim()},e.decode=function(l,b){l instanceof o||(l=o.create(l));for(var P=b===void 0?l.len:l.pos+b,q=new f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension;l.pos<P;){var $=l.uint32();switch($>>>3){default:l.skipType($&7);break}}return q},e.decodeDelimited=function(l){return l instanceof o||(l=new o(l)),this.decode(l,l.uint32())},e.verify=function(l){return typeof l!="object"||l===null?"object expected":null},e.fromObject=function(l){return l instanceof f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension?l:new f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.DataSetValueExtension},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e})(),u})(),y.Row=(function(){function u(n){if(this.elements=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return u.prototype.elements=p.emptyArray,u.create=function(e){return new u(e)},u.encode=function(e,t){if(t||(t=w.create()),e.elements!=null&&e.elements.length)for(var l=0;l<e.elements.length;++l)f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.encode(e.elements[l],t.uint32(10).fork()).ldelim();return t},u.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},u.decode=function(e,t){e instanceof o||(e=o.create(e));for(var l=t===void 0?e.len:e.pos+t,b=new f.org.eclipse.tahu.protobuf.Payload.DataSet.Row;e.pos<l;){var P=e.uint32();switch(P>>>3){case 1:b.elements&&b.elements.length||(b.elements=[]),b.elements.push(f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.decode(e,e.uint32()));break;default:e.skipType(P&7);break}}return b},u.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},u.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.elements!=null&&e.hasOwnProperty("elements")){if(!Array.isArray(e.elements))return"elements: array expected";for(var t=0;t<e.elements.length;++t){var l=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.verify(e.elements[t]);if(l)return"elements."+l}}return null},u.fromObject=function(e){if(e instanceof f.org.eclipse.tahu.protobuf.Payload.DataSet.Row)return e;var t=new f.org.eclipse.tahu.protobuf.Payload.DataSet.Row;if(e.elements){if(!Array.isArray(e.elements))throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.Row.elements: array expected");t.elements=[];for(var l=0;l<e.elements.length;++l){if(typeof e.elements[l]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.DataSet.Row.elements: object expected");t.elements[l]=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.fromObject(e.elements[l])}}return t},u.toObject=function(e,t){t||(t={});var l={};if((t.arrays||t.defaults)&&(l.elements=[]),e.elements&&e.elements.length){l.elements=[];for(var b=0;b<e.elements.length;++b)l.elements[b]=f.org.eclipse.tahu.protobuf.Payload.DataSet.DataSetValue.toObject(e.elements[b],t)}return l},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u})(),y})(),T.PropertyValue=(function(){function y(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}y.prototype.type=0,y.prototype.isNull=!1,y.prototype.intValue=null,y.prototype.longValue=null,y.prototype.floatValue=null,y.prototype.doubleValue=null,y.prototype.booleanValue=null,y.prototype.stringValue=null,y.prototype.propertysetValue=null,y.prototype.propertysetsValue=null,y.prototype.extensionValue=null;var u;return Object.defineProperty(y.prototype,"value",{get:p.oneOfGetter(u=["intValue","longValue","floatValue","doubleValue","booleanValue","stringValue","propertysetValue","propertysetsValue","extensionValue"]),set:p.oneOfSetter(u)}),y.create=function(e){return new y(e)},y.encode=function(e,t){return t||(t=w.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).uint32(e.type),e.isNull!=null&&Object.hasOwnProperty.call(e,"isNull")&&t.uint32(16).bool(e.isNull),e.intValue!=null&&Object.hasOwnProperty.call(e,"intValue")&&t.uint32(24).uint32(e.intValue),e.longValue!=null&&Object.hasOwnProperty.call(e,"longValue")&&t.uint32(32).uint64(e.longValue),e.floatValue!=null&&Object.hasOwnProperty.call(e,"floatValue")&&t.uint32(45).float(e.floatValue),e.doubleValue!=null&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(49).double(e.doubleValue),e.booleanValue!=null&&Object.hasOwnProperty.call(e,"booleanValue")&&t.uint32(56).bool(e.booleanValue),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(66).string(e.stringValue),e.propertysetValue!=null&&Object.hasOwnProperty.call(e,"propertysetValue")&&f.org.eclipse.tahu.protobuf.Payload.PropertySet.encode(e.propertysetValue,t.uint32(74).fork()).ldelim(),e.propertysetsValue!=null&&Object.hasOwnProperty.call(e,"propertysetsValue")&&f.org.eclipse.tahu.protobuf.Payload.PropertySetList.encode(e.propertysetsValue,t.uint32(82).fork()).ldelim(),e.extensionValue!=null&&Object.hasOwnProperty.call(e,"extensionValue")&&f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension.encode(e.extensionValue,t.uint32(90).fork()).ldelim(),t},y.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var l=t===void 0?e.len:e.pos+t,b=new f.org.eclipse.tahu.protobuf.Payload.PropertyValue;e.pos<l;){var P=e.uint32();switch(P>>>3){case 1:b.type=e.uint32();break;case 2:b.isNull=e.bool();break;case 3:b.intValue=e.uint32();break;case 4:b.longValue=e.uint64();break;case 5:b.floatValue=e.float();break;case 6:b.doubleValue=e.double();break;case 7:b.booleanValue=e.bool();break;case 8:b.stringValue=e.string();break;case 9:b.propertysetValue=f.org.eclipse.tahu.protobuf.Payload.PropertySet.decode(e,e.uint32());break;case 10:b.propertysetsValue=f.org.eclipse.tahu.protobuf.Payload.PropertySetList.decode(e,e.uint32());break;case 11:b.extensionValue=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension.decode(e,e.uint32());break;default:e.skipType(P&7);break}}return b},y.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},y.verify=function(e){if(typeof e!="object"||e===null)return"object expected";var t={};if(e.type!=null&&e.hasOwnProperty("type")&&!p.isInteger(e.type))return"type: integer expected";if(e.isNull!=null&&e.hasOwnProperty("isNull")&&typeof e.isNull!="boolean")return"isNull: boolean expected";if(e.intValue!=null&&e.hasOwnProperty("intValue")&&(t.value=1,!p.isInteger(e.intValue)))return"intValue: integer expected";if(e.longValue!=null&&e.hasOwnProperty("longValue")){if(t.value===1)return"value: multiple values";if(t.value=1,!p.isInteger(e.longValue)&&!(e.longValue&&p.isInteger(e.longValue.low)&&p.isInteger(e.longValue.high)))return"longValue: integer|Long expected"}if(e.floatValue!=null&&e.hasOwnProperty("floatValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.floatValue!="number")return"floatValue: number expected"}if(e.doubleValue!=null&&e.hasOwnProperty("doubleValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.doubleValue!="number")return"doubleValue: number expected"}if(e.booleanValue!=null&&e.hasOwnProperty("booleanValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.booleanValue!="boolean")return"booleanValue: boolean expected"}if(e.stringValue!=null&&e.hasOwnProperty("stringValue")){if(t.value===1)return"value: multiple values";if(t.value=1,!p.isString(e.stringValue))return"stringValue: string expected"}if(e.propertysetValue!=null&&e.hasOwnProperty("propertysetValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.PropertySet.verify(e.propertysetValue);if(l)return"propertysetValue."+l}}if(e.propertysetsValue!=null&&e.hasOwnProperty("propertysetsValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.PropertySetList.verify(e.propertysetsValue);if(l)return"propertysetsValue."+l}}if(e.extensionValue!=null&&e.hasOwnProperty("extensionValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension.verify(e.extensionValue);if(l)return"extensionValue."+l}}return null},y.fromObject=function(e){if(e instanceof f.org.eclipse.tahu.protobuf.Payload.PropertyValue)return e;var t=new f.org.eclipse.tahu.protobuf.Payload.PropertyValue;if(e.type!=null&&(t.type=e.type>>>0),e.isNull!=null&&(t.isNull=!!e.isNull),e.intValue!=null&&(t.intValue=e.intValue>>>0),e.longValue!=null&&(p.Long?(t.longValue=p.Long.fromValue(e.longValue)).unsigned=!0:typeof e.longValue=="string"?t.longValue=parseInt(e.longValue,10):typeof e.longValue=="number"?t.longValue=e.longValue:typeof e.longValue=="object"&&(t.longValue=new p.LongBits(e.longValue.low>>>0,e.longValue.high>>>0).toNumber(!0))),e.floatValue!=null&&(t.floatValue=Number(e.floatValue)),e.doubleValue!=null&&(t.doubleValue=Number(e.doubleValue)),e.booleanValue!=null&&(t.booleanValue=!!e.booleanValue),e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.propertysetValue!=null){if(typeof e.propertysetValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertyValue.propertysetValue: object expected");t.propertysetValue=f.org.eclipse.tahu.protobuf.Payload.PropertySet.fromObject(e.propertysetValue)}if(e.propertysetsValue!=null){if(typeof e.propertysetsValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertyValue.propertysetsValue: object expected");t.propertysetsValue=f.org.eclipse.tahu.protobuf.Payload.PropertySetList.fromObject(e.propertysetsValue)}if(e.extensionValue!=null){if(typeof e.extensionValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertyValue.extensionValue: object expected");t.extensionValue=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension.fromObject(e.extensionValue)}return t},y.toObject=function(e,t){t||(t={});var l={};return t.defaults&&(l.type=0,l.isNull=!1),e.type!=null&&e.hasOwnProperty("type")&&(l.type=e.type),e.isNull!=null&&e.hasOwnProperty("isNull")&&(l.isNull=e.isNull),e.intValue!=null&&e.hasOwnProperty("intValue")&&(l.intValue=e.intValue,t.oneofs&&(l.value="intValue")),e.longValue!=null&&e.hasOwnProperty("longValue")&&(typeof e.longValue=="number"?l.longValue=t.longs===String?String(e.longValue):e.longValue:l.longValue=t.longs===String?p.Long.prototype.toString.call(e.longValue):t.longs===Number?new p.LongBits(e.longValue.low>>>0,e.longValue.high>>>0).toNumber(!0):e.longValue,t.oneofs&&(l.value="longValue")),e.floatValue!=null&&e.hasOwnProperty("floatValue")&&(l.floatValue=t.json&&!isFinite(e.floatValue)?String(e.floatValue):e.floatValue,t.oneofs&&(l.value="floatValue")),e.doubleValue!=null&&e.hasOwnProperty("doubleValue")&&(l.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue,t.oneofs&&(l.value="doubleValue")),e.booleanValue!=null&&e.hasOwnProperty("booleanValue")&&(l.booleanValue=e.booleanValue,t.oneofs&&(l.value="booleanValue")),e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(l.stringValue=e.stringValue,t.oneofs&&(l.value="stringValue")),e.propertysetValue!=null&&e.hasOwnProperty("propertysetValue")&&(l.propertysetValue=f.org.eclipse.tahu.protobuf.Payload.PropertySet.toObject(e.propertysetValue,t),t.oneofs&&(l.value="propertysetValue")),e.propertysetsValue!=null&&e.hasOwnProperty("propertysetsValue")&&(l.propertysetsValue=f.org.eclipse.tahu.protobuf.Payload.PropertySetList.toObject(e.propertysetsValue,t),t.oneofs&&(l.value="propertysetsValue")),e.extensionValue!=null&&e.hasOwnProperty("extensionValue")&&(l.extensionValue=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension.toObject(e.extensionValue,t),t.oneofs&&(l.value="extensionValue")),l},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y.PropertyValueExtension=(function(){function n(e){if(e)for(var t=Object.keys(e),l=0;l<t.length;++l)e[t[l]]!=null&&(this[t[l]]=e[t[l]])}return n.create=function(t){return new n(t)},n.encode=function(t,l){return l||(l=w.create()),l},n.encodeDelimited=function(t,l){return this.encode(t,l).ldelim()},n.decode=function(t,l){t instanceof o||(t=o.create(t));for(var b=l===void 0?t.len:t.pos+l,P=new f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension;t.pos<b;){var q=t.uint32();switch(q>>>3){default:t.skipType(q&7);break}}return P},n.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},n.verify=function(t){return typeof t!="object"||t===null?"object expected":null},n.fromObject=function(t){return t instanceof f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension?t:new f.org.eclipse.tahu.protobuf.Payload.PropertyValue.PropertyValueExtension},n.toObject=function(){return{}},n.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},n})(),y})(),T.PropertySet=(function(){function y(u){if(this.keys=[],this.values=[],u)for(var n=Object.keys(u),e=0;e<n.length;++e)u[n[e]]!=null&&(this[n[e]]=u[n[e]])}return y.prototype.keys=p.emptyArray,y.prototype.values=p.emptyArray,y.create=function(n){return new y(n)},y.encode=function(n,e){if(e||(e=w.create()),n.keys!=null&&n.keys.length)for(var t=0;t<n.keys.length;++t)e.uint32(10).string(n.keys[t]);if(n.values!=null&&n.values.length)for(var t=0;t<n.values.length;++t)f.org.eclipse.tahu.protobuf.Payload.PropertyValue.encode(n.values[t],e.uint32(18).fork()).ldelim();return e},y.encodeDelimited=function(n,e){return this.encode(n,e).ldelim()},y.decode=function(n,e){n instanceof o||(n=o.create(n));for(var t=e===void 0?n.len:n.pos+e,l=new f.org.eclipse.tahu.protobuf.Payload.PropertySet;n.pos<t;){var b=n.uint32();switch(b>>>3){case 1:l.keys&&l.keys.length||(l.keys=[]),l.keys.push(n.string());break;case 2:l.values&&l.values.length||(l.values=[]),l.values.push(f.org.eclipse.tahu.protobuf.Payload.PropertyValue.decode(n,n.uint32()));break;default:n.skipType(b&7);break}}return l},y.decodeDelimited=function(n){return n instanceof o||(n=new o(n)),this.decode(n,n.uint32())},y.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.keys!=null&&n.hasOwnProperty("keys")){if(!Array.isArray(n.keys))return"keys: array expected";for(var e=0;e<n.keys.length;++e)if(!p.isString(n.keys[e]))return"keys: string[] expected"}if(n.values!=null&&n.hasOwnProperty("values")){if(!Array.isArray(n.values))return"values: array expected";for(var e=0;e<n.values.length;++e){var t=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.verify(n.values[e]);if(t)return"values."+t}}return null},y.fromObject=function(n){if(n instanceof f.org.eclipse.tahu.protobuf.Payload.PropertySet)return n;var e=new f.org.eclipse.tahu.protobuf.Payload.PropertySet;if(n.keys){if(!Array.isArray(n.keys))throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertySet.keys: array expected");e.keys=[];for(var t=0;t<n.keys.length;++t)e.keys[t]=String(n.keys[t])}if(n.values){if(!Array.isArray(n.values))throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertySet.values: array expected");e.values=[];for(var t=0;t<n.values.length;++t){if(typeof n.values[t]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertySet.values: object expected");e.values[t]=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.fromObject(n.values[t])}}return e},y.toObject=function(n,e){e||(e={});var t={};if((e.arrays||e.defaults)&&(t.keys=[],t.values=[]),n.keys&&n.keys.length){t.keys=[];for(var l=0;l<n.keys.length;++l)t.keys[l]=n.keys[l]}if(n.values&&n.values.length){t.values=[];for(var l=0;l<n.values.length;++l)t.values[l]=f.org.eclipse.tahu.protobuf.Payload.PropertyValue.toObject(n.values[l],e)}return t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y})(),T.PropertySetList=(function(){function y(u){if(this.propertyset=[],u)for(var n=Object.keys(u),e=0;e<n.length;++e)u[n[e]]!=null&&(this[n[e]]=u[n[e]])}return y.prototype.propertyset=p.emptyArray,y.create=function(n){return new y(n)},y.encode=function(n,e){if(e||(e=w.create()),n.propertyset!=null&&n.propertyset.length)for(var t=0;t<n.propertyset.length;++t)f.org.eclipse.tahu.protobuf.Payload.PropertySet.encode(n.propertyset[t],e.uint32(10).fork()).ldelim();return e},y.encodeDelimited=function(n,e){return this.encode(n,e).ldelim()},y.decode=function(n,e){n instanceof o||(n=o.create(n));for(var t=e===void 0?n.len:n.pos+e,l=new f.org.eclipse.tahu.protobuf.Payload.PropertySetList;n.pos<t;){var b=n.uint32();switch(b>>>3){case 1:l.propertyset&&l.propertyset.length||(l.propertyset=[]),l.propertyset.push(f.org.eclipse.tahu.protobuf.Payload.PropertySet.decode(n,n.uint32()));break;default:n.skipType(b&7);break}}return l},y.decodeDelimited=function(n){return n instanceof o||(n=new o(n)),this.decode(n,n.uint32())},y.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.propertyset!=null&&n.hasOwnProperty("propertyset")){if(!Array.isArray(n.propertyset))return"propertyset: array expected";for(var e=0;e<n.propertyset.length;++e){var t=f.org.eclipse.tahu.protobuf.Payload.PropertySet.verify(n.propertyset[e]);if(t)return"propertyset."+t}}return null},y.fromObject=function(n){if(n instanceof f.org.eclipse.tahu.protobuf.Payload.PropertySetList)return n;var e=new f.org.eclipse.tahu.protobuf.Payload.PropertySetList;if(n.propertyset){if(!Array.isArray(n.propertyset))throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertySetList.propertyset: array expected");e.propertyset=[];for(var t=0;t<n.propertyset.length;++t){if(typeof n.propertyset[t]!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.PropertySetList.propertyset: object expected");e.propertyset[t]=f.org.eclipse.tahu.protobuf.Payload.PropertySet.fromObject(n.propertyset[t])}}return e},y.toObject=function(n,e){e||(e={});var t={};if((e.arrays||e.defaults)&&(t.propertyset=[]),n.propertyset&&n.propertyset.length){t.propertyset=[];for(var l=0;l<n.propertyset.length;++l)t.propertyset[l]=f.org.eclipse.tahu.protobuf.Payload.PropertySet.toObject(n.propertyset[l],e)}return t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y})(),T.MetaData=(function(){function y(u){if(u)for(var n=Object.keys(u),e=0;e<n.length;++e)u[n[e]]!=null&&(this[n[e]]=u[n[e]])}return y.prototype.isMultiPart=!1,y.prototype.contentType="",y.prototype.size=p.Long?p.Long.fromBits(0,0,!0):0,y.prototype.seq=p.Long?p.Long.fromBits(0,0,!0):0,y.prototype.fileName="",y.prototype.fileType="",y.prototype.md5="",y.prototype.description="",y.create=function(n){return new y(n)},y.encode=function(n,e){return e||(e=w.create()),n.isMultiPart!=null&&Object.hasOwnProperty.call(n,"isMultiPart")&&e.uint32(8).bool(n.isMultiPart),n.contentType!=null&&Object.hasOwnProperty.call(n,"contentType")&&e.uint32(18).string(n.contentType),n.size!=null&&Object.hasOwnProperty.call(n,"size")&&e.uint32(24).uint64(n.size),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&e.uint32(32).uint64(n.seq),n.fileName!=null&&Object.hasOwnProperty.call(n,"fileName")&&e.uint32(42).string(n.fileName),n.fileType!=null&&Object.hasOwnProperty.call(n,"fileType")&&e.uint32(50).string(n.fileType),n.md5!=null&&Object.hasOwnProperty.call(n,"md5")&&e.uint32(58).string(n.md5),n.description!=null&&Object.hasOwnProperty.call(n,"description")&&e.uint32(66).string(n.description),e},y.encodeDelimited=function(n,e){return this.encode(n,e).ldelim()},y.decode=function(n,e){n instanceof o||(n=o.create(n));for(var t=e===void 0?n.len:n.pos+e,l=new f.org.eclipse.tahu.protobuf.Payload.MetaData;n.pos<t;){var b=n.uint32();switch(b>>>3){case 1:l.isMultiPart=n.bool();break;case 2:l.contentType=n.string();break;case 3:l.size=n.uint64();break;case 4:l.seq=n.uint64();break;case 5:l.fileName=n.string();break;case 6:l.fileType=n.string();break;case 7:l.md5=n.string();break;case 8:l.description=n.string();break;default:n.skipType(b&7);break}}return l},y.decodeDelimited=function(n){return n instanceof o||(n=new o(n)),this.decode(n,n.uint32())},y.verify=function(n){return typeof n!="object"||n===null?"object expected":n.isMultiPart!=null&&n.hasOwnProperty("isMultiPart")&&typeof n.isMultiPart!="boolean"?"isMultiPart: boolean expected":n.contentType!=null&&n.hasOwnProperty("contentType")&&!p.isString(n.contentType)?"contentType: string expected":n.size!=null&&n.hasOwnProperty("size")&&!p.isInteger(n.size)&&!(n.size&&p.isInteger(n.size.low)&&p.isInteger(n.size.high))?"size: integer|Long expected":n.seq!=null&&n.hasOwnProperty("seq")&&!p.isInteger(n.seq)&&!(n.seq&&p.isInteger(n.seq.low)&&p.isInteger(n.seq.high))?"seq: integer|Long expected":n.fileName!=null&&n.hasOwnProperty("fileName")&&!p.isString(n.fileName)?"fileName: string expected":n.fileType!=null&&n.hasOwnProperty("fileType")&&!p.isString(n.fileType)?"fileType: string expected":n.md5!=null&&n.hasOwnProperty("md5")&&!p.isString(n.md5)?"md5: string expected":n.description!=null&&n.hasOwnProperty("description")&&!p.isString(n.description)?"description: string expected":null},y.fromObject=function(n){if(n instanceof f.org.eclipse.tahu.protobuf.Payload.MetaData)return n;var e=new f.org.eclipse.tahu.protobuf.Payload.MetaData;return n.isMultiPart!=null&&(e.isMultiPart=!!n.isMultiPart),n.contentType!=null&&(e.contentType=String(n.contentType)),n.size!=null&&(p.Long?(e.size=p.Long.fromValue(n.size)).unsigned=!0:typeof n.size=="string"?e.size=parseInt(n.size,10):typeof n.size=="number"?e.size=n.size:typeof n.size=="object"&&(e.size=new p.LongBits(n.size.low>>>0,n.size.high>>>0).toNumber(!0))),n.seq!=null&&(p.Long?(e.seq=p.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?e.seq=parseInt(n.seq,10):typeof n.seq=="number"?e.seq=n.seq:typeof n.seq=="object"&&(e.seq=new p.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.fileName!=null&&(e.fileName=String(n.fileName)),n.fileType!=null&&(e.fileType=String(n.fileType)),n.md5!=null&&(e.md5=String(n.md5)),n.description!=null&&(e.description=String(n.description)),e},y.toObject=function(n,e){e||(e={});var t={};if(e.defaults){if(t.isMultiPart=!1,t.contentType="",p.Long){var l=new p.Long(0,0,!0);t.size=e.longs===String?l.toString():e.longs===Number?l.toNumber():l}else t.size=e.longs===String?"0":0;if(p.Long){var l=new p.Long(0,0,!0);t.seq=e.longs===String?l.toString():e.longs===Number?l.toNumber():l}else t.seq=e.longs===String?"0":0;t.fileName="",t.fileType="",t.md5="",t.description=""}return n.isMultiPart!=null&&n.hasOwnProperty("isMultiPart")&&(t.isMultiPart=n.isMultiPart),n.contentType!=null&&n.hasOwnProperty("contentType")&&(t.contentType=n.contentType),n.size!=null&&n.hasOwnProperty("size")&&(typeof n.size=="number"?t.size=e.longs===String?String(n.size):n.size:t.size=e.longs===String?p.Long.prototype.toString.call(n.size):e.longs===Number?new p.LongBits(n.size.low>>>0,n.size.high>>>0).toNumber(!0):n.size),n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?t.seq=e.longs===String?String(n.seq):n.seq:t.seq=e.longs===String?p.Long.prototype.toString.call(n.seq):e.longs===Number?new p.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.fileName!=null&&n.hasOwnProperty("fileName")&&(t.fileName=n.fileName),n.fileType!=null&&n.hasOwnProperty("fileType")&&(t.fileType=n.fileType),n.md5!=null&&n.hasOwnProperty("md5")&&(t.md5=n.md5),n.description!=null&&n.hasOwnProperty("description")&&(t.description=n.description),t},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y})(),T.Metric=(function(){function y(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}y.prototype.name="",y.prototype.alias=p.Long?p.Long.fromBits(0,0,!0):0,y.prototype.timestamp=p.Long?p.Long.fromBits(0,0,!0):0,y.prototype.datatype=0,y.prototype.isHistorical=!1,y.prototype.isTransient=!1,y.prototype.isNull=!1,y.prototype.metadata=null,y.prototype.properties=null,y.prototype.intValue=null,y.prototype.longValue=null,y.prototype.floatValue=null,y.prototype.doubleValue=null,y.prototype.booleanValue=null,y.prototype.stringValue=null,y.prototype.bytesValue=null,y.prototype.datasetValue=null,y.prototype.templateValue=null,y.prototype.extensionValue=null;var u;return Object.defineProperty(y.prototype,"value",{get:p.oneOfGetter(u=["intValue","longValue","floatValue","doubleValue","booleanValue","stringValue","bytesValue","datasetValue","templateValue","extensionValue"]),set:p.oneOfSetter(u)}),y.create=function(e){return new y(e)},y.encode=function(e,t){return t||(t=w.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),e.alias!=null&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(16).uint64(e.alias),e.timestamp!=null&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint64(e.timestamp),e.datatype!=null&&Object.hasOwnProperty.call(e,"datatype")&&t.uint32(32).uint32(e.datatype),e.isHistorical!=null&&Object.hasOwnProperty.call(e,"isHistorical")&&t.uint32(40).bool(e.isHistorical),e.isTransient!=null&&Object.hasOwnProperty.call(e,"isTransient")&&t.uint32(48).bool(e.isTransient),e.isNull!=null&&Object.hasOwnProperty.call(e,"isNull")&&t.uint32(56).bool(e.isNull),e.metadata!=null&&Object.hasOwnProperty.call(e,"metadata")&&f.org.eclipse.tahu.protobuf.Payload.MetaData.encode(e.metadata,t.uint32(66).fork()).ldelim(),e.properties!=null&&Object.hasOwnProperty.call(e,"properties")&&f.org.eclipse.tahu.protobuf.Payload.PropertySet.encode(e.properties,t.uint32(74).fork()).ldelim(),e.intValue!=null&&Object.hasOwnProperty.call(e,"intValue")&&t.uint32(80).uint32(e.intValue),e.longValue!=null&&Object.hasOwnProperty.call(e,"longValue")&&t.uint32(88).uint64(e.longValue),e.floatValue!=null&&Object.hasOwnProperty.call(e,"floatValue")&&t.uint32(101).float(e.floatValue),e.doubleValue!=null&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(105).double(e.doubleValue),e.booleanValue!=null&&Object.hasOwnProperty.call(e,"booleanValue")&&t.uint32(112).bool(e.booleanValue),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(122).string(e.stringValue),e.bytesValue!=null&&Object.hasOwnProperty.call(e,"bytesValue")&&t.uint32(130).bytes(e.bytesValue),e.datasetValue!=null&&Object.hasOwnProperty.call(e,"datasetValue")&&f.org.eclipse.tahu.protobuf.Payload.DataSet.encode(e.datasetValue,t.uint32(138).fork()).ldelim(),e.templateValue!=null&&Object.hasOwnProperty.call(e,"templateValue")&&f.org.eclipse.tahu.protobuf.Payload.Template.encode(e.templateValue,t.uint32(146).fork()).ldelim(),e.extensionValue!=null&&Object.hasOwnProperty.call(e,"extensionValue")&&f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension.encode(e.extensionValue,t.uint32(154).fork()).ldelim(),t},y.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},y.decode=function(e,t){e instanceof o||(e=o.create(e));for(var l=t===void 0?e.len:e.pos+t,b=new f.org.eclipse.tahu.protobuf.Payload.Metric;e.pos<l;){var P=e.uint32();switch(P>>>3){case 1:b.name=e.string();break;case 2:b.alias=e.uint64();break;case 3:b.timestamp=e.uint64();break;case 4:b.datatype=e.uint32();break;case 5:b.isHistorical=e.bool();break;case 6:b.isTransient=e.bool();break;case 7:b.isNull=e.bool();break;case 8:b.metadata=f.org.eclipse.tahu.protobuf.Payload.MetaData.decode(e,e.uint32());break;case 9:b.properties=f.org.eclipse.tahu.protobuf.Payload.PropertySet.decode(e,e.uint32());break;case 10:b.intValue=e.uint32();break;case 11:b.longValue=e.uint64();break;case 12:b.floatValue=e.float();break;case 13:b.doubleValue=e.double();break;case 14:b.booleanValue=e.bool();break;case 15:b.stringValue=e.string();break;case 16:b.bytesValue=e.bytes();break;case 17:b.datasetValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.decode(e,e.uint32());break;case 18:b.templateValue=f.org.eclipse.tahu.protobuf.Payload.Template.decode(e,e.uint32());break;case 19:b.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension.decode(e,e.uint32());break;default:e.skipType(P&7);break}}return b},y.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},y.verify=function(e){if(typeof e!="object"||e===null)return"object expected";var t={};if(e.name!=null&&e.hasOwnProperty("name")&&!p.isString(e.name))return"name: string expected";if(e.alias!=null&&e.hasOwnProperty("alias")&&!p.isInteger(e.alias)&&!(e.alias&&p.isInteger(e.alias.low)&&p.isInteger(e.alias.high)))return"alias: integer|Long expected";if(e.timestamp!=null&&e.hasOwnProperty("timestamp")&&!p.isInteger(e.timestamp)&&!(e.timestamp&&p.isInteger(e.timestamp.low)&&p.isInteger(e.timestamp.high)))return"timestamp: integer|Long expected";if(e.datatype!=null&&e.hasOwnProperty("datatype")&&!p.isInteger(e.datatype))return"datatype: integer expected";if(e.isHistorical!=null&&e.hasOwnProperty("isHistorical")&&typeof e.isHistorical!="boolean")return"isHistorical: boolean expected";if(e.isTransient!=null&&e.hasOwnProperty("isTransient")&&typeof e.isTransient!="boolean")return"isTransient: boolean expected";if(e.isNull!=null&&e.hasOwnProperty("isNull")&&typeof e.isNull!="boolean")return"isNull: boolean expected";if(e.metadata!=null&&e.hasOwnProperty("metadata")){var l=f.org.eclipse.tahu.protobuf.Payload.MetaData.verify(e.metadata);if(l)return"metadata."+l}if(e.properties!=null&&e.hasOwnProperty("properties")){var l=f.org.eclipse.tahu.protobuf.Payload.PropertySet.verify(e.properties);if(l)return"properties."+l}if(e.intValue!=null&&e.hasOwnProperty("intValue")&&(t.value=1,!p.isInteger(e.intValue)))return"intValue: integer expected";if(e.longValue!=null&&e.hasOwnProperty("longValue")){if(t.value===1)return"value: multiple values";if(t.value=1,!p.isInteger(e.longValue)&&!(e.longValue&&p.isInteger(e.longValue.low)&&p.isInteger(e.longValue.high)))return"longValue: integer|Long expected"}if(e.floatValue!=null&&e.hasOwnProperty("floatValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.floatValue!="number")return"floatValue: number expected"}if(e.doubleValue!=null&&e.hasOwnProperty("doubleValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.doubleValue!="number")return"doubleValue: number expected"}if(e.booleanValue!=null&&e.hasOwnProperty("booleanValue")){if(t.value===1)return"value: multiple values";if(t.value=1,typeof e.booleanValue!="boolean")return"booleanValue: boolean expected"}if(e.stringValue!=null&&e.hasOwnProperty("stringValue")){if(t.value===1)return"value: multiple values";if(t.value=1,!p.isString(e.stringValue))return"stringValue: string expected"}if(e.bytesValue!=null&&e.hasOwnProperty("bytesValue")){if(t.value===1)return"value: multiple values";if(t.value=1,!(e.bytesValue&&typeof e.bytesValue.length=="number"||p.isString(e.bytesValue)))return"bytesValue: buffer expected"}if(e.datasetValue!=null&&e.hasOwnProperty("datasetValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.DataSet.verify(e.datasetValue);if(l)return"datasetValue."+l}}if(e.templateValue!=null&&e.hasOwnProperty("templateValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.Template.verify(e.templateValue);if(l)return"templateValue."+l}}if(e.extensionValue!=null&&e.hasOwnProperty("extensionValue")){if(t.value===1)return"value: multiple values";t.value=1;{var l=f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension.verify(e.extensionValue);if(l)return"extensionValue."+l}}return null},y.fromObject=function(e){if(e instanceof f.org.eclipse.tahu.protobuf.Payload.Metric)return e;var t=new f.org.eclipse.tahu.protobuf.Payload.Metric;if(e.name!=null&&(t.name=String(e.name)),e.alias!=null&&(p.Long?(t.alias=p.Long.fromValue(e.alias)).unsigned=!0:typeof e.alias=="string"?t.alias=parseInt(e.alias,10):typeof e.alias=="number"?t.alias=e.alias:typeof e.alias=="object"&&(t.alias=new p.LongBits(e.alias.low>>>0,e.alias.high>>>0).toNumber(!0))),e.timestamp!=null&&(p.Long?(t.timestamp=p.Long.fromValue(e.timestamp)).unsigned=!0:typeof e.timestamp=="string"?t.timestamp=parseInt(e.timestamp,10):typeof e.timestamp=="number"?t.timestamp=e.timestamp:typeof e.timestamp=="object"&&(t.timestamp=new p.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),e.datatype!=null&&(t.datatype=e.datatype>>>0),e.isHistorical!=null&&(t.isHistorical=!!e.isHistorical),e.isTransient!=null&&(t.isTransient=!!e.isTransient),e.isNull!=null&&(t.isNull=!!e.isNull),e.metadata!=null){if(typeof e.metadata!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Metric.metadata: object expected");t.metadata=f.org.eclipse.tahu.protobuf.Payload.MetaData.fromObject(e.metadata)}if(e.properties!=null){if(typeof e.properties!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Metric.properties: object expected");t.properties=f.org.eclipse.tahu.protobuf.Payload.PropertySet.fromObject(e.properties)}if(e.intValue!=null&&(t.intValue=e.intValue>>>0),e.longValue!=null&&(p.Long?(t.longValue=p.Long.fromValue(e.longValue)).unsigned=!0:typeof e.longValue=="string"?t.longValue=parseInt(e.longValue,10):typeof e.longValue=="number"?t.longValue=e.longValue:typeof e.longValue=="object"&&(t.longValue=new p.LongBits(e.longValue.low>>>0,e.longValue.high>>>0).toNumber(!0))),e.floatValue!=null&&(t.floatValue=Number(e.floatValue)),e.doubleValue!=null&&(t.doubleValue=Number(e.doubleValue)),e.booleanValue!=null&&(t.booleanValue=!!e.booleanValue),e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.bytesValue!=null&&(typeof e.bytesValue=="string"?p.base64.decode(e.bytesValue,t.bytesValue=p.newBuffer(p.base64.length(e.bytesValue)),0):e.bytesValue.length&&(t.bytesValue=e.bytesValue)),e.datasetValue!=null){if(typeof e.datasetValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Metric.datasetValue: object expected");t.datasetValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.fromObject(e.datasetValue)}if(e.templateValue!=null){if(typeof e.templateValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Metric.templateValue: object expected");t.templateValue=f.org.eclipse.tahu.protobuf.Payload.Template.fromObject(e.templateValue)}if(e.extensionValue!=null){if(typeof e.extensionValue!="object")throw TypeError(".org.eclipse.tahu.protobuf.Payload.Metric.extensionValue: object expected");t.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension.fromObject(e.extensionValue)}return t},y.toObject=function(e,t){t||(t={});var l={};if(t.defaults){if(l.name="",p.Long){var b=new p.Long(0,0,!0);l.alias=t.longs===String?b.toString():t.longs===Number?b.toNumber():b}else l.alias=t.longs===String?"0":0;if(p.Long){var b=new p.Long(0,0,!0);l.timestamp=t.longs===String?b.toString():t.longs===Number?b.toNumber():b}else l.timestamp=t.longs===String?"0":0;l.datatype=0,l.isHistorical=!1,l.isTransient=!1,l.isNull=!1,l.metadata=null,l.properties=null}return e.name!=null&&e.hasOwnProperty("name")&&(l.name=e.name),e.alias!=null&&e.hasOwnProperty("alias")&&(typeof e.alias=="number"?l.alias=t.longs===String?String(e.alias):e.alias:l.alias=t.longs===String?p.Long.prototype.toString.call(e.alias):t.longs===Number?new p.LongBits(e.alias.low>>>0,e.alias.high>>>0).toNumber(!0):e.alias),e.timestamp!=null&&e.hasOwnProperty("timestamp")&&(typeof e.timestamp=="number"?l.timestamp=t.longs===String?String(e.timestamp):e.timestamp:l.timestamp=t.longs===String?p.Long.prototype.toString.call(e.timestamp):t.longs===Number?new p.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),e.datatype!=null&&e.hasOwnProperty("datatype")&&(l.datatype=e.datatype),e.isHistorical!=null&&e.hasOwnProperty("isHistorical")&&(l.isHistorical=e.isHistorical),e.isTransient!=null&&e.hasOwnProperty("isTransient")&&(l.isTransient=e.isTransient),e.isNull!=null&&e.hasOwnProperty("isNull")&&(l.isNull=e.isNull),e.metadata!=null&&e.hasOwnProperty("metadata")&&(l.metadata=f.org.eclipse.tahu.protobuf.Payload.MetaData.toObject(e.metadata,t)),e.properties!=null&&e.hasOwnProperty("properties")&&(l.properties=f.org.eclipse.tahu.protobuf.Payload.PropertySet.toObject(e.properties,t)),e.intValue!=null&&e.hasOwnProperty("intValue")&&(l.intValue=e.intValue,t.oneofs&&(l.value="intValue")),e.longValue!=null&&e.hasOwnProperty("longValue")&&(typeof e.longValue=="number"?l.longValue=t.longs===String?String(e.longValue):e.longValue:l.longValue=t.longs===String?p.Long.prototype.toString.call(e.longValue):t.longs===Number?new p.LongBits(e.longValue.low>>>0,e.longValue.high>>>0).toNumber(!0):e.longValue,t.oneofs&&(l.value="longValue")),e.floatValue!=null&&e.hasOwnProperty("floatValue")&&(l.floatValue=t.json&&!isFinite(e.floatValue)?String(e.floatValue):e.floatValue,t.oneofs&&(l.value="floatValue")),e.doubleValue!=null&&e.hasOwnProperty("doubleValue")&&(l.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue,t.oneofs&&(l.value="doubleValue")),e.booleanValue!=null&&e.hasOwnProperty("booleanValue")&&(l.booleanValue=e.booleanValue,t.oneofs&&(l.value="booleanValue")),e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(l.stringValue=e.stringValue,t.oneofs&&(l.value="stringValue")),e.bytesValue!=null&&e.hasOwnProperty("bytesValue")&&(l.bytesValue=t.bytes===String?p.base64.encode(e.bytesValue,0,e.bytesValue.length):t.bytes===Array?Array.prototype.slice.call(e.bytesValue):e.bytesValue,t.oneofs&&(l.value="bytesValue")),e.datasetValue!=null&&e.hasOwnProperty("datasetValue")&&(l.datasetValue=f.org.eclipse.tahu.protobuf.Payload.DataSet.toObject(e.datasetValue,t),t.oneofs&&(l.value="datasetValue")),e.templateValue!=null&&e.hasOwnProperty("templateValue")&&(l.templateValue=f.org.eclipse.tahu.protobuf.Payload.Template.toObject(e.templateValue,t),t.oneofs&&(l.value="templateValue")),e.extensionValue!=null&&e.hasOwnProperty("extensionValue")&&(l.extensionValue=f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension.toObject(e.extensionValue,t),t.oneofs&&(l.value="extensionValue")),l},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y.MetricValueExtension=(function(){function n(e){if(e)for(var t=Object.keys(e),l=0;l<t.length;++l)e[t[l]]!=null&&(this[t[l]]=e[t[l]])}return n.create=function(t){return new n(t)},n.encode=function(t,l){return l||(l=w.create()),l},n.encodeDelimited=function(t,l){return this.encode(t,l).ldelim()},n.decode=function(t,l){t instanceof o||(t=o.create(t));for(var b=l===void 0?t.len:t.pos+l,P=new f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension;t.pos<b;){var q=t.uint32();switch(q>>>3){default:t.skipType(q&7);break}}return P},n.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},n.verify=function(t){return typeof t!="object"||t===null?"object expected":null},n.fromObject=function(t){return t instanceof f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension?t:new f.org.eclipse.tahu.protobuf.Payload.Metric.MetricValueExtension},n.toObject=function(){return{}},n.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},n})(),y})(),T})(),N})(),s})(),c})(),m})(),sparkplugPayloadProto=f,sparkplugPayloadProto}var long,hasRequiredLong;function requireLong(){if(hasRequiredLong)return long;hasRequiredLong=1,long=o;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function o(B,g,I){this.low=B|0,this.high=g|0,this.unsigned=!!I}o.prototype.__isLong__,Object.defineProperty(o.prototype,"__isLong__",{value:!0});function w(B){return(B&&B.__isLong__)===!0}o.isLong=w;var p={},f={};function m(B,g){var I,A,G;return g?(B>>>=0,(G=0<=B&&B<256)&&(A=f[B],A)?A:(I=s(B,(B|0)<0?-1:0,!0),G&&(f[B]=I),I)):(B|=0,(G=-128<=B&&B<128)&&(A=p[B],A)?A:(I=s(B,B<0?-1:0,!1),G&&(p[B]=I),I))}o.fromInt=m;function c(B,g){if(isNaN(B))return g?q:P;if(g){if(B<0)return q;if(B>=t)return se}else{if(B<=-l)return re;if(B+1>=l)return ce}return B<0?c(-B,g).neg():s(B%e|0,B/e|0,g)}o.fromNumber=c;function s(B,g,I){return new o(B,g,I)}o.fromBits=s;var N=Math.pow;function T(B,g,I){if(B.length===0)throw Error("empty string");if(B==="NaN"||B==="Infinity"||B==="+Infinity"||B==="-Infinity")return P;if(typeof g=="number"?(I=g,g=!1):g=!!g,I=I||10,I<2||36<I)throw RangeError("radix");var A;if((A=B.indexOf("-"))>0)throw Error("interior hyphen");if(A===0)return T(B.substring(1),g,I).neg();for(var G=c(N(I,8)),K=P,j=0;j<B.length;j+=8){var ie=Math.min(8,B.length-j),ae=parseInt(B.substring(j,j+ie),I);if(ie<8){var ne=c(N(I,ie));K=K.mul(ne).add(c(ae))}else K=K.mul(G),K=K.add(c(ae))}return K.unsigned=g,K}o.fromString=T;function y(B,g){return typeof B=="number"?c(B,g):typeof B=="string"?T(B,g):s(B.low,B.high,typeof g=="boolean"?g:B.unsigned)}o.fromValue=y;var u=65536,n=1<<24,e=u*u,t=e*e,l=t/2,b=m(n),P=m(0);o.ZERO=P;var q=m(0,!0);o.UZERO=q;var $=m(1);o.ONE=$;var oe=m(1,!0);o.UONE=oe;var X=m(-1);o.NEG_ONE=X;var ce=s(-1,2147483647,!1);o.MAX_VALUE=ce;var se=s(-1,-1,!0);o.MAX_UNSIGNED_VALUE=se;var re=s(0,-2147483648,!1);o.MIN_VALUE=re;var F=o.prototype;return F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*e+(this.low>>>0):this.high*e+(this.low>>>0)},F.toString=function(g){if(g=g||10,g<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(re)){var I=c(g),A=this.div(I),G=A.mul(I).sub(this);return A.toString(g)+G.toInt().toString(g)}else return"-"+this.neg().toString(g);for(var K=c(N(g,6),this.unsigned),j=this,ie="";;){var ae=j.div(K),ne=j.sub(ae.mul(K)).toInt()>>>0,Y=ne.toString(g);if(j=ae,j.isZero())return Y+ie;for(;Y.length<6;)Y="0"+Y;ie=""+Y+ie}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq(re)?64:this.neg().getNumBitsAbs();for(var g=this.high!=0?this.high:this.low,I=31;I>0&&(g&1<<I)==0;I--);return this.high!=0?I+33:I+1},F.isZero=function(){return this.high===0&&this.low===0},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return(this.low&1)===1},F.isEven=function(){return(this.low&1)===0},F.equals=function(g){return w(g)||(g=y(g)),this.unsigned!==g.unsigned&&this.high>>>31===1&&g.high>>>31===1?!1:this.high===g.high&&this.low===g.low},F.eq=F.equals,F.notEquals=function(g){return!this.eq(g)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(g){return this.comp(g)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(g){return this.comp(g)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(g){return this.comp(g)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(g){return this.comp(g)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(g){if(w(g)||(g=y(g)),this.eq(g))return 0;var I=this.isNegative(),A=g.isNegative();return I&&!A?-1:!I&&A?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq(re)?re:this.not().add($)},F.neg=F.negate,F.add=function(g){w(g)||(g=y(g));var I=this.high>>>16,A=this.high&65535,G=this.low>>>16,K=this.low&65535,j=g.high>>>16,ie=g.high&65535,ae=g.low>>>16,ne=g.low&65535,Y=0,J=0,O=0,D=0;return D+=K+ne,O+=D>>>16,D&=65535,O+=G+ae,J+=O>>>16,O&=65535,J+=A+ie,Y+=J>>>16,J&=65535,Y+=I+j,Y&=65535,s(O<<16|D,Y<<16|J,this.unsigned)},F.subtract=function(g){return w(g)||(g=y(g)),this.add(g.neg())},F.sub=F.subtract,F.multiply=function(g){if(this.isZero())return P;if(w(g)||(g=y(g)),r){var I=r.mul(this.low,this.high,g.low,g.high);return s(I,r.get_high(),this.unsigned)}if(g.isZero())return P;if(this.eq(re))return g.isOdd()?re:P;if(g.eq(re))return this.isOdd()?re:P;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(b)&&g.lt(b))return c(this.toNumber()*g.toNumber(),this.unsigned);var A=this.high>>>16,G=this.high&65535,K=this.low>>>16,j=this.low&65535,ie=g.high>>>16,ae=g.high&65535,ne=g.low>>>16,Y=g.low&65535,J=0,O=0,D=0,k=0;return k+=j*Y,D+=k>>>16,k&=65535,D+=K*Y,O+=D>>>16,D&=65535,D+=j*ne,O+=D>>>16,D&=65535,O+=G*Y,J+=O>>>16,O&=65535,O+=K*ne,J+=O>>>16,O&=65535,O+=j*ae,J+=O>>>16,O&=65535,J+=A*Y+G*ne+K*ae+j*ie,J&=65535,s(D<<16|k,J<<16|O,this.unsigned)},F.mul=F.multiply,F.divide=function(g){if(w(g)||(g=y(g)),g.isZero())throw Error("division by zero");if(r){if(!this.unsigned&&this.high===-2147483648&&g.low===-1&&g.high===-1)return this;var I=(this.unsigned?r.div_u:r.div_s)(this.low,this.high,g.low,g.high);return s(I,r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?q:P;var A,G,K;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return q;if(g.gt(this.shru(1)))return oe;K=q}else{if(this.eq(re)){if(g.eq($)||g.eq(X))return re;if(g.eq(re))return $;var j=this.shr(1);return A=j.div(g).shl(1),A.eq(P)?g.isNegative()?$:X:(G=this.sub(g.mul(A)),K=A.add(G.div(g)),K)}else if(g.eq(re))return this.unsigned?q:P;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();K=P}for(G=this;G.gte(g);){A=Math.max(1,Math.floor(G.toNumber()/g.toNumber()));for(var ie=Math.ceil(Math.log(A)/Math.LN2),ae=ie<=48?1:N(2,ie-48),ne=c(A),Y=ne.mul(g);Y.isNegative()||Y.gt(G);)A-=ae,ne=c(A,this.unsigned),Y=ne.mul(g);ne.isZero()&&(ne=$),K=K.add(ne),G=G.sub(Y)}return K},F.div=F.divide,F.modulo=function(g){if(w(g)||(g=y(g)),r){var I=(this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,g.low,g.high);return s(I,r.get_high(),this.unsigned)}return this.sub(this.div(g).mul(g))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return s(~this.low,~this.high,this.unsigned)},F.and=function(g){return w(g)||(g=y(g)),s(this.low&g.low,this.high&g.high,this.unsigned)},F.or=function(g){return w(g)||(g=y(g)),s(this.low|g.low,this.high|g.high,this.unsigned)},F.xor=function(g){return w(g)||(g=y(g)),s(this.low^g.low,this.high^g.high,this.unsigned)},F.shiftLeft=function(g){return w(g)&&(g=g.toInt()),(g&=63)===0?this:g<32?s(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):s(0,this.low<<g-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(g){return w(g)&&(g=g.toInt()),(g&=63)===0?this:g<32?s(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):s(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(g){if(w(g)&&(g=g.toInt()),g&=63,g===0)return this;var I=this.high;if(g<32){var A=this.low;return s(A>>>g|I<<32-g,I>>>g,this.unsigned)}else return g===32?s(I,0,this.unsigned):s(I>>>g-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},F.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var g=this.high,I=this.low;return[I&255,I>>>8&255,I>>>16&255,I>>>24,g&255,g>>>8&255,g>>>16&255,g>>>24]},F.toBytesBE=function(){var g=this.high,I=this.low;return[g>>>24,g>>>16&255,g>>>8&255,g&255,I>>>24,I>>>16&255,I>>>8&255,I&255]},o.fromBytes=function(g,I,A){return A?o.fromBytesLE(g,I):o.fromBytesBE(g,I)},o.fromBytesLE=function(g,I){return new o(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,I)},o.fromBytesBE=function(g,I){return new o(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],I)},long}var hasRequiredSparkplugbpayload;function requireSparkplugbpayload(){if(hasRequiredSparkplugbpayload)return sparkplugbpayload;hasRequiredSparkplugbpayload=1;var r=sparkplugbpayload&&sparkplugbpayload.__createBinding||(Object.create?(function(v,S,x,M){M===void 0&&(M=x);var L=Object.getOwnPropertyDescriptor(S,x);(!L||("get"in L?!S.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return S[x]}}),Object.defineProperty(v,M,L)}):(function(v,S,x,M){M===void 0&&(M=x),v[M]=S[x]})),o=sparkplugbpayload&&sparkplugbpayload.__setModuleDefault||(Object.create?(function(v,S){Object.defineProperty(v,"default",{enumerable:!0,value:S})}):function(v,S){v.default=S}),w=sparkplugbpayload&&sparkplugbpayload.__importStar||function(v){if(v&&v.__esModule)return v;var S={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&r(S,v,x);return o(S,v),S},p=sparkplugbpayload&&sparkplugbpayload.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(sparkplugbpayload,"__esModule",{value:!0}),sparkplugbpayload.decodePayload=sparkplugbpayload.encodePayload=void 0;const f=w(requireSparkplugPayloadProto()),m=p(requireLong()),c=f.org.eclipse.tahu.protobuf.Payload,s=c.Template,N=s.Parameter,T=c.DataSet,y=T.DataSetValue,u=T.Row,n=c.PropertyValue,e=c.PropertySet,t=c.PropertySetList,l=c.MetaData,b=c.Metric;function P(v,S,x){switch(v){case 1:case 2:case 3:case 5:case 6:x.intValue=S;break;case 4:case 7:case 8:case 13:x.longValue=S;break;case 9:x.floatValue=S;break;case 10:x.doubleValue=S;break;case 11:x.booleanValue=S;break;case 12:case 14:case 15:x.stringValue=S;break;case 16:x.datasetValue=B(S);break;case 17:case 18:x.bytesValue=S;break;case 19:x.templateValue=O(S);break;case 20:x.propertysetValue=j(S);break;case 21:x.propertysetsValue=ae(S);break}}function q(v,S){switch(v){case 1:case 2:case 3:return new Int32Array([S.intValue])[0];case 5:case 6:return S.intValue;case 4:return S.longValue instanceof m.default?S.longValue.toSigned():S.longValue;case 7:return S.longValue instanceof m.default?S.longValue.toInt():S.longValue;case 8:case 13:return S.longValue;case 9:return S.floatValue;case 10:return S.doubleValue;case 11:return S.booleanValue;case 12:case 14:case 15:return S.stringValue;case 16:return g(S.datasetValue);case 17:case 18:return S.bytesValue;case 19:return D(S.templateValue);case 20:return ie(S.propertysetValue);case 21:return ne(S.propertysetsValue);default:return null}}function $(v){return v!=null}function oe(v,S){switch(v){case 7:if(S.longValue instanceof m.default)return S.longValue.toInt();if($(S.longValue))return S.longValue;case 4:if($(S.longValue))return S.longValue;case 9:if($(S.floatValue))return S.floatValue;case 10:if($(S.doubleValue))return S.doubleValue;case 11:if($(S.booleanValue))return S.booleanValue;case 12:if($(S.stringValue))return S.stringValue;default:throw new Error(`Invalid DataSetValue: ${JSON.stringify(S)}`)}}function X(v,S){switch(v){case 7:if(S.longValue instanceof m.default)return S.longValue.toInt();if($(S.longValue))return S.longValue;case 4:if($(S.longValue))return S.longValue;case 9:if($(S.floatValue))return S.floatValue;case 10:if($(S.doubleValue))return S.doubleValue;case 11:if($(S.booleanValue))return S.booleanValue;case 12:if($(S.stringValue))return S.stringValue;default:throw new Error(`Invalid Parameter value: ${JSON.stringify(S)}`)}}function ce(v){switch(v.toUpperCase()){case"INT8":return 1;case"INT16":return 2;case"INT32":case"INT":return 3;case"INT64":case"LONG":return 4;case"UINT8":return 5;case"UINT16":return 6;case"UINT32":return 7;case"UINT64":return 8;case"FLOAT":return 9;case"DOUBLE":return 10;case"BOOLEAN":return 11;case"STRING":return 12;case"DATETIME":return 13;case"TEXT":return 14;case"UUID":return 15;case"DATASET":return 16;case"BYTES":return 17;case"FILE":return 18;case"TEMPLATE":return 19;case"PROPERTYSET":return 20;case"PROPERTYSETLIST":return 21;default:return 0}}function se(v){switch(v){case 1:return"Int8";case 2:return"Int16";case 3:return"Int32";case 4:return"Int64";case 5:return"UInt8";case 6:return"UInt16";case 7:return"UInt32";case 8:return"UInt64";case 9:return"Float";case 10:return"Double";case 11:return"Boolean";case 12:return"String";case 13:return"DateTime";case 14:return"Text";case 15:return"UUID";case 16:return"DataSet";case 17:return"Bytes";case 18:return"File";case 19:return"Template";case 20:return"PropertySet";case 21:return"PropertySetList"}}function re(v){for(var S=[],x=0;x<v.length;x++)S.push(ce(v[x]));return S}function F(v){for(var S=[],x=0;x<v.length;x++)S.push(se(v[x]));return S}function B(v){const S=v.numOfColumns;v.columns;const x=re(v.types),M=v.rows,L=T.create({numOfColumns:S,columns:v.columns,types:x}),U=[];for(let z=0;z<M.length;z++){const W=u.create(),d=M[z],i=[];for(let a=0;a<S;a++){const V=y.create();P(x[a],d[a],V),i.push(V)}W.elements=i,U.push(W)}return L.rows=U,L}function g(v){const S=v.types,x={types:F(S),rows:[]},M=F(S),L=v.rows||[],U=v.numOfColumns;for(var z=0;z<L.length;z++){for(var W=L[z],d=W.elements||[],i=[],a=0;a<U;a++)i.push(oe(S[a],d[a]));x.rows.push(i)}return x.numOfColumns=U,x.types=M,x.columns=v.columns,x}function I(v){var S=l.create(),x=v.isMultiPart,M=v.contentType,L=v.size,U=v.seq,z=v.fileName,W=v.fileType,d=v.md5,i=v.description;return x!=null&&(S.isMultiPart=x),M!=null&&(S.contentType=M),L!=null&&(S.size=L),U!=null&&(S.seq=U),z!=null&&(S.fileName=z),W!=null&&(S.fileType=W),d!=null&&(S.md5=d),i!=null&&(S.description=i),S}function A(v){var S={},x=v.isMultiPart,M=v.contentType,L=v.size,U=v.seq,z=v.fileName,W=v.fileType,d=v.md5,i=v.description;return x!=null&&(S.isMultiPart=x),M!=null&&(S.contentType=M),L!=null&&(S.size=L),U!=null&&(S.seq=U),z!=null&&(S.fileName=z),W!=null&&(S.fileType=W),d!=null&&(S.md5=d),i!=null&&(S.description=i),S}function G(v){var S=ce(v.type),x=n.create({type:S});return v.value!==void 0&&v.value===null&&(x.isNull=!0),P(S,v.value,x),x}function K(v){const S={value:q(v.type,v),type:se(v.type)};return v.isNull!==void 0&&v.isNull===!0?S.value=null:S.value=q(v.type,v),S.type=se(v.type),S}function j(v){const S=[],x=[];for(var M in v)v.hasOwnProperty(M)&&(S.push(M),x.push(G(v[M])));return e.create({keys:S,values:x})}function ie(v){const S={},x=v.keys||[],M=v.values||[];for(var L=0;L<x.length;L++)S[x[L]]=K(M[L]);return S}function ae(v){const S=[];for(let x=0;x<v.length;x++)S.push(j(v[x]));return t.create({propertyset:S})}function ne(v){const S=[],x=v.propertyset||[];for(let M=0;M<x.length;M++)S.push(ie(x[M]));return S}function Y(v){const S=ce(v.type),x=N.create({name:v.name,type:S});return P(S,v.value,x),x}function J(v){const S=v.type,x={value:X(S,v),type:se(S)};return x.name=v.name,x.type=se(S),x.value=q(S,v),x}function O(v){let S=s.create(),x=v.metrics;v.parameters;let M=v.isDefinition,L=v.templateRef,U=v.version;if(U!=null&&(S.version=U),L!=null&&(S.templateRef=L),M!=null&&(S.isDefinition=M),v.metrics!==void 0&&v.metrics!==null){const z=[];x=v.metrics;for(let W=0;W<x.length;W++)z.push(k(x[W]));S.metrics=z}if(v.parameters!==void 0&&v.parameters!==null){const z=[];for(let W=0;W<v.parameters.length;W++)z.push(Y(v.parameters[W]));S.parameters=z}return S}function D(v){const S={},x=v.metrics,M=v.parameters,L=v.isDefinition,U=v.templateRef,z=v.version;if(z!=null&&(S.version=z),U!=null&&(S.templateRef=U),L!=null&&(S.isDefinition=L),x!=null){const W=[];for(let d=0;d<x.length;d++)W.push(R(x[d]));S.metrics=W}if(M!=null){const W=[];for(let d=0;d<M.length;d++)W.push(J(M[d]));S.parameters=W}return S}function k(v){const S=b.create({name:v.name}),x=v.value,M=ce(v.type),L=v.alias,U=v.isHistorical,z=v.isTransient,W=v.metadata,d=v.timestamp,i=v.properties;return S.datatype=M,P(M,x,S),d!=null&&(S.timestamp=d),L!=null&&(S.alias=L),U!=null&&(S.isHistorical=U),z!=null&&(S.isTransient=z),x!==void 0&&x===null&&(S.isNull=!0),W!=null&&(S.metadata=I(W)),i!=null&&(S.properties=j(i)),S}function R(v){const S={value:q(v.datatype,v),type:se(v.datatype)};return v.hasOwnProperty("name")&&(S.name=v.name),v.hasOwnProperty("isNull")&&v.isNull===!0?S.value=null:S.value=q(v.datatype,v),v.hasOwnProperty("timestamp")&&(S.timestamp=v.timestamp),v.hasOwnProperty("alias")&&(S.alias=v.alias),v.hasOwnProperty("isHistorical")&&(S.isHistorical=v.isHistorical),v.hasOwnProperty("isTransient")&&(S.isTransient=v.isTransient),v.hasOwnProperty("metadata")&&v.metadata&&(S.metadata=A(v.metadata)),v.hasOwnProperty("properties")&&v.properties&&(S.properties=ie(v.properties)),S}function Q(v){var S=c.create({timestamp:v.timestamp});if(v.metrics!==void 0&&v.metrics!==null){for(var x=[],M=v.metrics,L=0;L<M.length;L++)x.push(k(M[L]));S.metrics=x}return v.seq!==void 0&&v.seq!==null&&(S.seq=v.seq),v.uuid!==void 0&&v.uuid!==null&&(S.uuid=v.uuid),v.body!==void 0&&v.body!==null&&(S.body=v.body),c.encode(S).finish()}sparkplugbpayload.encodePayload=Q;function Z(v){var S=c.decode(v),x={};if(S.hasOwnProperty("timestamp")&&(x.timestamp=S.timestamp),S.hasOwnProperty("metrics")){const L=[];for(var M=0;M<S.metrics.length;M++)L.push(R(S.metrics[M]));x.metrics=L}return S.hasOwnProperty("seq")&&(x.seq=S.seq),S.hasOwnProperty("uuid")&&(x.uuid=S.uuid),S.hasOwnProperty("body")&&(x.body=S.body),x}return sparkplugbpayload.decodePayload=Z,sparkplugbpayload}var hasRequiredSparkplugPayload;function requireSparkplugPayload(){if(hasRequiredSparkplugPayload)return sparkplugPayload;hasRequiredSparkplugPayload=1;var r=sparkplugPayload&&sparkplugPayload.__createBinding||(Object.create?(function(m,c,s,N){N===void 0&&(N=s);var T=Object.getOwnPropertyDescriptor(c,s);(!T||("get"in T?!c.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(m,N,T)}):(function(m,c,s,N){N===void 0&&(N=s),m[N]=c[s]})),o=sparkplugPayload&&sparkplugPayload.__setModuleDefault||(Object.create?(function(m,c){Object.defineProperty(m,"default",{enumerable:!0,value:c})}):function(m,c){m.default=c}),w=sparkplugPayload&&sparkplugPayload.__importStar||function(m){if(m&&m.__esModule)return m;var c={};if(m!=null)for(var s in m)s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)&&r(c,m,s);return o(c,m),c};Object.defineProperty(sparkplugPayload,"__esModule",{value:!0}),sparkplugPayload.get=void 0;const p=w(requireSparkplugbpayload());function f(m){return m!=null&&m==="spBv1.0"?p:null}return sparkplugPayload.get=f,sparkplugPayload}var sparkplugPayloadExports=requireSparkplugPayload();const _sfc_main$7=defineComponent({name:"MQTTClientMessageWidget",components:{},data(){return{loading:!1,selectedDecoder:{value:"plaintext",label:"Plaintext (UTF-8)"},filterText:"",isLive:!0,selectedMessage:[],pagination:{page:1,rowsPerPage:getPerPage("mqttclientmessages"),sortBy:"sequence",descending:!0},decoderOptions:[{value:"plaintext",label:"Plaintext (UTF-8)"},{value:"sparkplugb",label:"SparkplugB"},{value:"hex",label:"Hex"},{value:"base64",label:"Base64"}],columns:[{name:"id",field:"id",label:"Timestamp",sortable:!1,align:"left"},{name:"topic",field:"topic",label:"Topic",sortable:!0,align:"left"},{name:"payload",field:"payload",label:"Payload",sortable:!1,align:"left"},{name:"sequence",field:"sequence",label:"",required:!1,sortable:!1,align:"left"}]}},mounted(){this.isLive=this.isClientLive},methods:{...mapActions(useMqttClientStore,["clearConnectionMessages","addProcessedMessages"]),readableBoolean,generateRowKey(r){return`${r.id}/${r.topic}/${r.sequence}`},decodePayload(r,o){let w,p;try{switch(p=bufferExports.Buffer.from(r,"base64"),o.value){case"sparkplugb":try{const m=sparkplugPayloadExports.get("spBv1.0").decodePayload(p);return JSON.stringify(m,null,2)}catch{return"Invalid Sparkplug B encoding"}case"plaintext":w=p.toString("utf8");break;case"base64":w=p.toString("base64");break;case"hex":w=p.toString("hex");break;default:w=p.toString("utf8");break}try{return w=JSON.stringify(JSON.parse(w),null,2),w}catch{return w}}catch{return`Invalid ${o.value} encoding:`}},onClickDownloadMessages(){try{const r=window.URL.createObjectURL(new Blob([this.filterMessages.map(w=>`${w.id}: ${w.topic}: ${this.decodePayload(w.payload,this.selectedDecoder)}`).join(`
`)])),o=document.createElement("a");o.href=r,o.setAttribute("download","messages.txt"),document.body.appendChild(o),o.click(),o.remove()}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}},onClickClearMessages(){this.selectedMessage=[],this.clearConnectionMessages(this.selectedBroker)}},computed:{...mapState(useUserStore,["username"]),...mapState(useMqttClientStore,["allMessages","selectedBroker","pendingMessages","isClientLive"]),filterMessages(){let r=this.allMessages.filter(o=>o.serverId===this.selectedBroker);return this.filterText.length===0?r:r.filter(o=>o.topic.includes(this.filterText))},messageSelectedRow(){return this.selectedMessage.length>0?this.selectedMessage[0]:null}},watch:{isLive(){const r=useMqttClientStore();if(r.$patch({isClientLive:this.isLive}),this.isLive&&this.pendingMessages.length>0){const o=this.pendingMessages.length;this.addProcessedMessages(this.pendingMessages),r.$patch({pendingMessages:[]}),this.$q.notify({type:"positive",message:`${o} pending messages successfully added`})}},filterText(){this.pagination.page=1},selectedBroker(){this.selectedMessage=[]},"pagination.rowsPerPage":{handler(){setPerPage("mqttclientmessages",this.pagination.rowsPerPage)}}}}),_hoisted_1$7={class:"chariot-mqtt-message-header"},_hoisted_2$7={class:"chariot-mqtt-message-header-filter"},_hoisted_3$6={class:"row items-center"},_hoisted_4$4={class:"row items-center"},_hoisted_5$3={style:{width:"140px"},class:"ellipsis"},_hoisted_6$2={style:{width:"115px"},class:"ellipsis"},_hoisted_7$1={class:"chariot-decoded-message-display"};function _sfc_render$7(r,o,w,p,f,m){return openBlock(),createElementBlock("div",null,[r.pendingMessages.length>0?(openBlock(),createBlock(QBanner,{key:0,"inline-actions":"",rounded:"",class:"bg-warning text-black q-mb-md"},{default:withCtx(()=>[createBaseVNode("b",null,toDisplayString(r.$t("mqttClients.pendingMessages"))+":",1),createTextVNode(" "+toDisplayString(r.pendingMessages.length),1)]),_:1})):createCommentVNode("",!0),createVNode(QTable,{flat:"",pagination:r.pagination,"onUpdate:pagination":o[3]||(o[3]=c=>r.pagination=c),selected:r.selectedMessage,"onUpdate:selected":o[4]||(o[4]=c=>r.selectedMessage=c),selection:"single","row-key":r.generateRowKey,loading:r.loading,rows:r.filterMessages,columns:r.columns,"table-class":"chariot-subscriptions-table"},{top:withCtx(()=>[createBaseVNode("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$7,[createVNode(QSelect,{class:"chariot-mqtt-message-header-filter-select q-mr-md",dense:"",for:"clientMessageDecoder",outlined:"",modelValue:r.selectedDecoder,"onUpdate:modelValue":o[0]||(o[0]=c=>r.selectedDecoder=c),options:r.decoderOptions,label:"Encoding"},null,8,["modelValue","options"]),createVNode(QInput,{debounce:"500",class:"chariot-mqtt-message-header-filter-text",modelValue:r.filterText,"onUpdate:modelValue":o[1]||(o[1]=c=>r.filterText=c),for:"clientMessageFilterText",dense:"",outlined:"",label:"Filter by topic"},null,8,["modelValue"])]),createVNode(QToggle,{modelValue:r.isLive,"onUpdate:modelValue":o[2]||(o[2]=c=>r.isLive=c),label:"Is Live"},null,8,["modelValue"]),createVNode(QBtn,{color:"primary-light",icon:"more_vert",flat:"",dense:"",rounded:""},{default:withCtx(()=>[createVNode(QMenu,null,{default:withCtx(()=>[createVNode(QList,{style:{"min-width":"100px"}},{default:withCtx(()=>[withDirectives((openBlock(),createBlock(QItem,{clickable:""},{default:withCtx(()=>[createVNode(QItemSection,{onClick:r.onClickDownloadMessages},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$6,toDisplayString(r.$t("mqttClients.downloadMessages")),1)]),_:1},8,["onClick"])]),_:1})),[[ClosePopup]]),withDirectives((openBlock(),createBlock(QItem,{clickable:""},{default:withCtx(()=>[createVNode(QItemSection,{onClick:r.onClickClearMessages},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$4,toDisplayString(r.$t("mqttClients.clearMessages")),1)]),_:1},8,["onClick"])]),_:1})),[[ClosePopup]])]),_:1})]),_:1})]),_:1})])]),"body-cell-topic":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$3,[createTextVNode(toDisplayString(c.row.topic)+" ",1),createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(c.row.topic),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-payload":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$2,[createTextVNode(toDisplayString(r.decodePayload(c.row.payload,r.selectedDecoder))+" ",1),createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.decodePayload(c.row.payload,r.selectedDecoder)),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-sequence":withCtx(c=>[createVNode(QTd,{props:c},null,8,["props"])]),_:1},8,["pagination","selected","row-key","loading","rows","columns"]),createVNode(QCard,null,{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.messageDetails")),1)]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(QList,{separator:""},{default:withCtx(()=>[createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.topic")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.topic!==null?r.messageSelectedRow.topic:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.recieved")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.id!==null?r.messageSelectedRow.id:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[...o[5]||(o[5]=[createTextVNode("QoS",-1)])]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.qos!==null?r.messageSelectedRow.qos:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.isDuplicate")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.duplicate!==null?r.readableBoolean(r.messageSelectedRow.duplicate):"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.retained")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.retained!==null?r.readableBoolean(r.messageSelectedRow.retained):"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.payload")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createBaseVNode("pre",_hoisted_7$1,toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.payload!==null?r.decodePayload(r.messageSelectedRow.payload,r.selectedDecoder):"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const MQTTClientMessageWidget=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]),_sfc_main$6=defineComponent({name:"MQTTClientPublishWidget",components:{},data(){return{publishForm:{publishTopic:"",message:"",isRetained:!1,qos:0},deviceForm:{messageFormat:{label:"JSON",value:"json"},deviceType:{label:"Random Integer",value:"randomInt"},interval:3},loading:!1,modalMessage:"",pubMessageCount:0,pubOption:"plaintext",messageFormatOptions:[{label:"JSON",value:"json"},{label:"Plaintext Value",value:"plaintext"}],deviceTypeOptions:[{label:"Random Integer",value:"randomInt"},{label:"Temperature",value:"temperature"},{label:"Fan Speed",value:"fanSpeed"},{label:"On/Off",value:"onOff"}],onOffState:!1,simulationRunning:!1,simulationInterval:null}},computed:{...mapState(useMqttClientStore,["selectedBroker"])},methods:{...mapActions(useMqttClientStore,["getMqttStatus"]),onSavePublish(){this.pubOption==="plaintext"?this.publishMessage():this.toggleSimulation(this.selectedBroker,this.publishForm.publishTopic)},async publishMessage(){try{await this.$api.post(`/client?action=publish&serverName=${this.selectedBroker}`,{topic:this.publishForm.publishTopic,payload:this.publishForm.message,qos:this.publishForm.qos,retained:this.publishForm.isRetained}),this.$q.notify({type:"positive",message:`Message sent to ${this.publishForm.publishTopic}`})}catch(r){const o=r.response?r.response.data.message:r.message;this.$q.notify({type:"negative",message:o})}},simulateTemperature(){return(25+(Math.random()*2-1)*.5).toFixed(2)},simulateFanSpeed(){return(1500+(Math.random()*200-100)).toFixed(0)},simulateOnOff(){return this.onOffState=!this.onOffState,this.onOffState?"ON":"OFF"},shutdownSimulator(r="Device Simulator Stopped"){clearInterval(this.simulationInterval),this.simulationRunning=!1,this.pubMessageCount=0,this.$q.notify({type:"negative",message:r})},async toggleSimulation(r,o){this.simulationRunning?this.shutdownSimulator():(this.simulationRunning=!0,this.simulationInterval=setInterval(async()=>{if(this.selectedBroker!==r){this.shutdownSimulator();return}this.generateSimulatedPayload(r,o)},this.deviceForm.interval*1e3))},async generateSimulatedPayload(r,o){let w;switch(this.deviceForm.deviceType.value){case"randomInt":w=Math.floor(Math.random()*100);break;case"temperature":w=this.simulateTemperature();break;case"fanSpeed":w=this.simulateFanSpeed();break;case"onOff":w=this.simulateOnOff();break;default:w=0}let p;this.deviceForm.messageFormat.value==="json"?p=JSON.stringify({timestamp:Date.now().toLocaleString(),value:w}):p=String(w);try{await this.$api.post(`/client?action=publish&serverName=${r}`,{topic:o,payload:p,qos:this.publishForm.qos,retained:this.publishForm.isRetained}),this.pubMessageCount+=1}catch(f){this.shutdownSimulator();const m=f.response?f.response.data.message:f.message;this.$q.notify({type:"negative",message:m})}}}}),_hoisted_1$6={class:"chariot-form-input"},_hoisted_2$6={class:"chariot-form-input"},_hoisted_3$5={class:"chariot-form-input"},_hoisted_4$3={class:"chariot-form-input q-mt-sm"},_hoisted_5$2={key:0,class:"chariot-form-input q-mt-sm"},_hoisted_6$1={class:"chariot-form-input"},_hoisted_7={class:"chariot-form-input"},_hoisted_8={class:"chariot-form-input"};function _sfc_render$6(r,o,w,p,f,m){return openBlock(),createElementBlock("div",null,[r.simulationRunning?(openBlock(),createBlock(QBanner,{key:0,class:"bg-warning text-black q-mb-lg"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.activelyPublishing"))+": "+toDisplayString(r.pubMessageCount),1)]),_:1})):createCommentVNode("",!0),createVNode(QForm,{onSubmit:withModifiers(r.onSavePublish,["stop"]),class:"q-gutter-y-md column"},{default:withCtx(()=>[createBaseVNode("label",_hoisted_1$6,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.topic")),1)]),_:1}),createVNode(QInput,{disabled:r.simulationRunning,modelValue:r.publishForm.publishTopic,"onUpdate:modelValue":o[0]||(o[0]=c=>r.publishForm.publishTopic=c),for:"publishTopic",dense:"",outlined:""},null,8,["disabled","modelValue"])]),createBaseVNode("label",_hoisted_2$6,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.retained")),1)]),_:1}),createVNode(QToggle,{modelValue:r.publishForm.isRetained,"onUpdate:modelValue":o[1]||(o[1]=c=>r.publishForm.isRetained=c),for:"publishIsRetained",dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_3$5,[createVNode(QItemLabel,null,{default:withCtx(()=>[...o[11]||(o[11]=[createTextVNode(" QoS ",-1)])]),_:1}),createVNode(QRadio,{modelValue:r.publishForm.qos,"onUpdate:modelValue":o[2]||(o[2]=c=>r.publishForm.qos=c),val:0,label:"0"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.publishForm.qos,"onUpdate:modelValue":o[3]||(o[3]=c=>r.publishForm.qos=c),val:1,label:"1"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.publishForm.qos,"onUpdate:modelValue":o[4]||(o[4]=c=>r.publishForm.qos=c),val:2,label:"2"},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_4$3,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.messageType")),1)]),_:1}),createVNode(QRadio,{disable:r.simulationRunning,modelValue:r.pubOption,"onUpdate:modelValue":o[5]||(o[5]=c=>r.pubOption=c),val:"plaintext",label:"Plaintext Message"},null,8,["disable","modelValue"]),createVNode(QRadio,{disable:r.simulationRunning,modelValue:r.pubOption,"onUpdate:modelValue":o[6]||(o[6]=c=>r.pubOption=c),val:"simulator",label:"Device Simulator"},null,8,["disable","modelValue"])]),r.pubOption==="plaintext"?(openBlock(),createElementBlock("label",_hoisted_5$2,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.message")),1)]),_:1}),createVNode(QInput,{modelValue:r.publishForm.message,"onUpdate:modelValue":o[7]||(o[7]=c=>r.publishForm.message=c),type:"textarea",for:"publishMessage",dense:"",outlined:""},null,8,["modelValue"])])):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("label",_hoisted_6$1,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.simulatedDeviceType")),1)]),_:1}),createVNode(QSelect,{modelValue:r.deviceForm.deviceType,"onUpdate:modelValue":o[8]||(o[8]=c=>r.deviceForm.deviceType=c),for:"publishDeviceType",dense:"",outlined:"",options:r.deviceTypeOptions},null,8,["modelValue","options"])]),createBaseVNode("label",_hoisted_7,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.enterInterval")),1)]),_:1}),createVNode(QInput,{modelValue:r.deviceForm.interval,"onUpdate:modelValue":o[9]||(o[9]=c=>r.deviceForm.interval=c),modelModifiers:{number:!0},for:"publishDeviceInterval",type:"number",dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_8,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.payloadFormat")),1)]),_:1}),createVNode(QSelect,{modelValue:r.deviceForm.messageFormat,"onUpdate:modelValue":o[10]||(o[10]=c=>r.deviceForm.messageFormat=c),for:"publishMessageFormat",dense:"",outlined:"",options:r.messageFormatOptions},null,8,["modelValue","options"])])],64)),createVNode(QCardActions,{class:"q-pa-none",align:"right"},{default:withCtx(()=>[r.pubOption==="plaintext"?(openBlock(),createBlock(QBtn,{key:0,disabled:r.publishForm.publishTopic.length===0,type:"submit",label:r.$t("shared.publish"),color:"primary"},null,8,["disabled","label"])):(openBlock(),createBlock(QBtn,{key:1,disabled:r.publishForm.publishTopic.length===0,type:"submit",label:r.simulationRunning?r.$t("shared.stop"):r.$t("shared.start"),color:"primary"},null,8,["disabled","label"]))]),_:1})]),_:1},8,["onSubmit"])])}const MQTTClientPublishWidget=_export_sfc(_sfc_main$6,[["render",_sfc_render$6]]),_sfc_main$5=defineComponent({name:"MQTTClientSubscribeWidget",components:{},data(){return{subscribeForm:{subscribeTopic:"",qos:0},pagination:{rowsPerPage:5},subscriptions:[],subscriptionStatus:{},loading:!1,qosOptions:[{text:"0",value:0},{text:"1",value:1},{text:"2",value:2}],columns:[{name:"topic",field:"topic",label:this.$t("mqttClients.topic"),sortable:!1,align:"left"},{name:"qos",field:"qos",label:"QoS",sortable:!1,align:"left"},{name:"actions",field:"actions",label:"",sortable:!1,align:"right"}]}},computed:{...mapState(useMqttClientStore,["selectedBroker"]),selectedServerSubscriptions(){return this.getMqttStatus(this.selectedBroker)!=="DISCONNECTED"?this.getServerSubscriptions(this.selectedBroker):[]}},methods:{...mapActions(useMqttClientStore,["getServerSubscriptions","getMqttStatus","setBrokerSubscriptions"]),async onSaveSubscribe(){const r={topic:this.subscribeForm.subscribeTopic,qos:this.subscribeForm.qos};try{const o=await this.$api.post(`/client?action=subscribe&serverName=${this.selectedBroker}`,r);this.setBrokerSubscriptions(this.selectedBroker,o.data),this.verifyTopicSubscribe(o.data,this.subscribeForm.subscribeTopic),this.subscribeForm.subscribeTopic=""}catch(o){const w=o.response?o.response.data.message:o.message;this.$q.notify({type:"negative",message:w})}},async onClickDeleteTopic(r){try{const o=await this.$api.post(`/client?action=unsubscribe&delete=true&serverName=${this.selectedBroker}`,{topic:r});this.setBrokerSubscriptions(this.selectedBroker,o.data),this.$q.notify({type:"positive",message:`Succesfully removed ${r} topic`})}catch(o){const w=o.response?o.response.data.message:o.message;this.$q.notify({type:"negative",message:w})}},async onClickSubscribeTopic(r){try{const o=await this.$api.post(`/client?action=subscribe&serverName=${this.selectedBroker}`,r.subscribeTopicFilter);this.setBrokerSubscriptions(this.selectedBroker,o.data),this.verifyTopicSubscribe(o.data,r.subscribeTopicFilter.topic)}catch(o){const w=o.response?o.response.data.message:o.message;this.$q.notify({type:"negative",message:w})}},async onClickUnsubscribeTopic(r){try{const o=await this.$api.post(`/client?action=unsubscribe&serverName=${this.selectedBroker}`,r.subscribeTopicFilter);this.setBrokerSubscriptions(this.selectedBroker,o.data),this.$q.notify({type:"positive",message:`Succesfully unsubscribed to ${r.subscribeTopicFilter.topic} topic`})}catch(o){const w=o.response?o.response.data.message:o.message;this.$q.notify({type:"negative",message:w})}},verifyTopicSubscribe(r,o){r.find(p=>p.subscribeTopicFilter.topic===o).grantedQos===128?this.$q.notify({type:"negative",message:`Failed to subscribe to ${o} topic`}):this.$q.notify({type:"positive",message:`Succesfully subscribed to ${o} topic`})}}}),_hoisted_1$5={class:"chariot-widget-subscribe-body"},_hoisted_2$5={class:"chariot-form-input"},_hoisted_3$4={class:"chariot-form-input"},_hoisted_4$2={style:{width:"115px"},class:"ellipsis"};function _sfc_render$5(r,o,w,p,f,m){return openBlock(),createElementBlock("div",_hoisted_1$5,[createVNode(QForm,{onSubmit:withModifiers(r.onSaveSubscribe,["stop"]),class:"q-gutter-y-md column"},{default:withCtx(()=>[createBaseVNode("label",_hoisted_2$5,[createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.topic")),1)]),_:1}),createVNode(QInput,{modelValue:r.subscribeForm.subscribeTopic,"onUpdate:modelValue":o[0]||(o[0]=c=>r.subscribeForm.subscribeTopic=c),for:"subscribeTopic",dense:"",outlined:""},null,8,["modelValue"])]),createBaseVNode("label",_hoisted_3$4,[createVNode(QItemLabel,null,{default:withCtx(()=>[...o[5]||(o[5]=[createTextVNode(" QoS ",-1)])]),_:1}),createVNode(QRadio,{modelValue:r.subscribeForm.qos,"onUpdate:modelValue":o[1]||(o[1]=c=>r.subscribeForm.qos=c),val:0,label:"0"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.subscribeForm.qos,"onUpdate:modelValue":o[2]||(o[2]=c=>r.subscribeForm.qos=c),val:1,label:"1"},null,8,["modelValue"]),createVNode(QRadio,{modelValue:r.subscribeForm.qos,"onUpdate:modelValue":o[3]||(o[3]=c=>r.subscribeForm.qos=c),val:2,label:"2"},null,8,["modelValue"])]),createVNode(QCardActions,{class:"q-pa-none",align:"right"},{default:withCtx(()=>[createVNode(QBtn,{disabled:r.selectedBroker===null||r.subscribeForm.subscribeTopic.length===0,type:"submit",label:"Subscribe",color:"primary"},null,8,["disabled"])]),_:1})]),_:1},8,["onSubmit"]),createVNode(QItemLabel,{class:"q-mb-sm"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.subscriptions")),1)]),_:1}),createVNode(QTable,{flat:"",pagination:r.pagination,"onUpdate:pagination":o[4]||(o[4]=c=>r.pagination=c),loading:r.loading,rows:r.selectedServerSubscriptions,columns:r.columns,"table-class":"chariot-subscriptions-table"},{"body-cell-topic":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$2,[createTextVNode(toDisplayString(c.row.subscribeTopicFilter.topic)+" ",1),createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(c.row.subscribeTopicFilter.topic),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-qos":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createTextVNode(toDisplayString(c.row.subscribeTopicFilter.qos),1)]),_:2},1032,["props"])]),"body-cell-actions":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[c.row.grantedQos===128?(openBlock(),createBlock(QIcon,{key:0,style:{"font-size":"20px"},color:"negative",name:"error"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[...o[6]||(o[6]=[createTextVNode(" Failed to subscribe to this topic. This may be due to MQTT user permissions. ",-1)])]),_:1})]),_:1})):createCommentVNode("",!0),c.row.isSubscribed?(openBlock(),createBlock(QBtn,{key:1,onClick:s=>r.onClickUnsubscribeTopic(c.row),flat:"",color:"primary-light"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.unsubscribe")),1)]),_:1},8,["onClick"])):(openBlock(),createBlock(QBtn,{key:2,onClick:s=>r.onClickSubscribeTopic(c.row),flat:"",color:"primary-light"},{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.subscribe")),1)]),_:1},8,["onClick"])),createVNode(QBtn,{onClick:s=>r.onClickDeleteTopic(c.row.subscribeTopicFilter.topic),flat:"",round:"",color:"negative",icon:"delete"},{default:withCtx(()=>[createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.deleteTopic")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","loading","rows","columns"])])}const MQTTClientSubscribeWidget=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]),_sfc_main$4=defineComponent({name:"MQTTClientPublishTab",components:{MQTTClientMessageWidget,MQTTClientPublishWidget,MQTTClientSubscribeWidget},data(){return{}}}),_hoisted_1$4={class:"row chariot-mqtt-publish-body"},_hoisted_2$4={class:"col-5"},_hoisted_3$3={class:"col-7"};function _sfc_render$4(r,o,w,p,f,m){const c=resolveComponent("MQTTClientSubscribeWidget"),s=resolveComponent("MQTTClientPublishWidget"),N=resolveComponent("MQTTClientMessageWidget");return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createVNode(QCard,{class:"chariot-widget chariot-widget-subscribe"},{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.subscribe")),1)]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(c)]),_:1})]),_:1}),createVNode(QCard,{class:"chariot-widget q-mt-lg"},{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("shared.publish")),1)]),_:1})]),_:1}),createVNode(QCardSection,{class:"q-mb-lg"},{default:withCtx(()=>[createVNode(s)]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_3$3,[createVNode(QCard,{class:"chariot-widget q-ml-lg"},{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.messageTitle")),1)]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(N)]),_:1})]),_:1})])])}const MQTTClientPublishTab=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),_sfc_main$3=defineComponent({name:"MQTTClientTopicTreeWidget",components:{},props:{messageNode:{type:[null,Object],default:null}},data(){return{selectedDecoder:{value:"plaintext",label:"Plaintext (UTF-8)"},selectedMessage:[],currentNodeId:null,pagination:{rowsPerPage:5,sortBy:"sequence",descending:!0},decoderOptions:[{value:"plaintext",label:"Plaintext (UTF-8)"},{value:"sparkplugb",label:"SparkplugB"},{value:"hex",label:"Hex"},{value:"base64",label:"Base64"}],columns:[{name:"id",field:"id",label:"Timestamp",sortable:!0,align:"left"},{name:"topic",field:"topic",label:"Topic",sortable:!1,align:"left"},{name:"payload",field:"payload",label:"Payload",sortable:!1,align:"left"},{name:"sequence",field:"sequence",label:"",sortable:!1,required:!1,align:"left"}]}},computed:{filterMessages(){return this.messageNode===null?[]:this.messageNode.messages},messageSelectedRow(){return this.selectedMessage.length>0?this.selectedMessage[0]:null}},methods:{readableBoolean,decodePayload(r,o){let w,p;try{switch(p=bufferExports.Buffer.from(r,"base64"),o.value){case"sparkplugb":try{const m=sparkplugPayloadExports.get("spBv1.0").decodePayload(p);return JSON.stringify(m,null,2)}catch{return"Invalid Sparkplug B encoding"}case"plaintext":w=p.toString("utf8");break;case"base64":w=p.toString("base64");break;case"hex":w=p.toString("hex");break;default:w=p.toString("utf8");break}try{return w=JSON.stringify(JSON.parse(w),null,2),w}catch{return w}}catch{return`Invalid ${o.value} encoding:`}},generateRowKey(r){return`${r.id}/${r.topic}/${r.sequence}`},onClickDownloadMessages(){try{const r=window.URL.createObjectURL(new Blob([this.filterMessages.map(w=>`${w.id}: ${w.topic}: ${this.decodePayload(w.payload,this.selectedDecoder)}`).join(`
`)])),o=document.createElement("a");o.href=r,o.setAttribute("download","messages.txt"),document.body.appendChild(o),o.click(),o.remove()}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}}},watch:{messageNode(){this.messageNode!==null&&this.currentNodeId!==this.messageNode.id?(this.currentNodeId=this.messageNode.id,this.selectedMessage=[]):this.messageNode===null&&(this.selectedMessage=[])}}}),_hoisted_1$3={key:0},_hoisted_2$3={key:1},_hoisted_3$2={class:"chariot-mqtt-tree-message-header"},_hoisted_4$1={style:{width:"140px"},class:"ellipsis"},_hoisted_5$1={style:{width:"115px"},class:"ellipsis"},_hoisted_6={class:"chariot-decoded-message-display"};function _sfc_render$3(r,o,w,p,f,m){return r.filterMessages.length===0?(openBlock(),createElementBlock("div",_hoisted_1$3," No available messages ")):(openBlock(),createElementBlock("div",_hoisted_2$3,[createVNode(QTable,{flat:"",pagination:r.pagination,"onUpdate:pagination":o[1]||(o[1]=c=>r.pagination=c),selected:r.selectedMessage,"onUpdate:selected":o[2]||(o[2]=c=>r.selectedMessage=c),selection:"single","row-key":r.generateRowKey,rows:r.filterMessages,columns:r.columns},{top:withCtx(()=>[createBaseVNode("div",_hoisted_3$2,[createVNode(QSelect,{class:"chariot-mqtt-tree-message-header-filter-select q-mr-md",dense:"",outlined:"",modelValue:r.selectedDecoder,"onUpdate:modelValue":o[0]||(o[0]=c=>r.selectedDecoder=c),options:r.decoderOptions,label:"Encoding"},null,8,["modelValue","options"]),createVNode(QBtn,{onClick:r.onClickDownloadMessages,style:{width:"190px"},label:"Download Messages",color:"primary"},null,8,["onClick"])])]),"body-cell-topic":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$1,[createTextVNode(toDisplayString(c.row.topic)+" ",1),createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(c.row.topic),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-payload":withCtx(c=>[createVNode(QTd,{props:c},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$1,[createTextVNode(toDisplayString(r.decodePayload(c.row.payload,r.selectedDecoder))+" ",1),createVNode(QTooltip,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.decodePayload(c.row.payload,r.selectedDecoder)),1)]),_:2},1024)])]),_:2},1032,["props"])]),"body-cell-sequence":withCtx(c=>[createVNode(QTd,{props:c},null,8,["props"])]),_:1},8,["pagination","selected","row-key","rows","columns"]),createVNode(QCard,null,{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.messageDetails")),1)]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(QList,{separator:""},{default:withCtx(()=>[createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.topic")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.topic!==null?r.messageSelectedRow.topic:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.recieved")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.id!==null?r.messageSelectedRow.id:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[...o[3]||(o[3]=[createTextVNode("QoS",-1)])]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.qos!==null?r.messageSelectedRow.qos:"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.isDuplicate")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.duplicate!==null?r.readableBoolean(r.messageSelectedRow.duplicate):"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.retained")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createTextVNode(toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.retained!==null?r.readableBoolean(r.messageSelectedRow.retained):"-"),1)]),_:1})]),_:1})]),_:1}),createVNode(QItem,null,{default:withCtx(()=>[createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(r.$t("mqttClients.payload")),1)]),_:1}),createVNode(QItemLabel,{caption:""},{default:withCtx(()=>[createBaseVNode("pre",_hoisted_6,toDisplayString(r.messageSelectedRow&&r.messageSelectedRow.payload!==null?r.decodePayload(r.messageSelectedRow.payload,r.selectedDecoder):"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}const MQTTClientTopicMessageWidget=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),tickStrategyOptions=["none","strict","leaf","leaf-filtered"],QTree=createComponent({name:"QTree",props:{...useDarkProps,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:r=>tickStrategyOptions.includes(r)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(r,{slots:o,emit:w}){const{proxy:p}=getCurrentInstance(),{$q:f}=p,m=useDark(r,f),c=ref({}),s=ref(r.ticked||[]),N=ref(r.expanded||[]);let T={};onBeforeUpdate(()=>{T={}});const y=computed(()=>`q-tree q-tree--${r.dense===!0?"dense":"standard"}`+(r.noConnectors===!0?" q-tree--no-connectors":"")+(m.value===!0?" q-tree--dark":"")+(r.color!==void 0?` text-${r.color}`:"")),u=computed(()=>r.selected!==void 0),n=computed(()=>r.icon||f.iconSet.tree.icon),e=computed(()=>r.controlColor||r.color),t=computed(()=>r.textColor!==void 0?` text-${r.textColor}`:""),l=computed(()=>{const O=r.selectedColor||r.color;return O?` text-${O}`:""}),b=computed(()=>r.filterMethod!==void 0?r.filterMethod:(O,D)=>{const k=D.toLowerCase();return O[r.labelKey]&&O[r.labelKey].toLowerCase().indexOf(k)!==-1}),P=computed(()=>{const O={},D=(k,R)=>{const Q=k.tickStrategy||(R?R.tickStrategy:r.tickStrategy),Z=k[r.nodeKey],v=k[r.childrenKey]&&Array.isArray(k[r.childrenKey])&&k[r.childrenKey].length!==0,S=k.disabled!==!0&&u.value===!0&&k.selectable!==!1,x=k.disabled!==!0&&k.expandable!==!1,M=Q!=="none",L=Q==="strict",U=Q==="leaf-filtered",z=Q==="leaf"||Q==="leaf-filtered";let W=k.disabled!==!0&&k.tickable!==!1;z===!0&&W===!0&&R&&R.tickable!==!0&&(W=!1);let d=k.lazy;d===!0&&c.value[Z]!==void 0&&Array.isArray(k[r.childrenKey])===!0&&(d=c.value[Z]);const i={key:Z,parent:R,isParent:v,lazy:d,disabled:k.disabled,link:k.disabled!==!0&&(S===!0||x===!0&&(v===!0||d===!0)),children:[],matchesFilter:r.filter?b.value(k,r.filter):!0,selected:Z===r.selected&&S===!0,selectable:S,expanded:v===!0?N.value.includes(Z):!1,expandable:x,noTick:k.noTick===!0||L!==!0&&d&&d!=="loaded",tickable:W,tickStrategy:Q,hasTicking:M,strictTicking:L,leafFilteredTicking:U,leafTicking:z,ticked:L===!0?s.value.includes(Z):v===!0?!1:s.value.includes(Z)};if(O[Z]=i,v===!0&&(i.children=k[r.childrenKey].map(a=>D(a,i)),r.filter&&(i.matchesFilter!==!0?i.matchesFilter=i.children.some(a=>a.matchesFilter):i.noTick!==!0&&i.disabled!==!0&&i.tickable===!0&&U===!0&&i.children.every(a=>a.matchesFilter!==!0||a.noTick===!0||a.tickable!==!0)===!0&&(i.tickable=!1)),i.matchesFilter===!0&&(i.noTick!==!0&&L!==!0&&i.children.every(a=>a.noTick)===!0&&(i.noTick=!0),z))){if(i.ticked=!1,i.indeterminate=i.children.some(a=>a.indeterminate===!0),i.tickable=i.tickable===!0&&i.children.some(a=>a.tickable),i.indeterminate!==!0){const a=i.children.reduce((V,C)=>C.ticked===!0?V+1:V,0);a===i.children.length?i.ticked=!0:a>0&&(i.indeterminate=!0)}i.indeterminate===!0&&(i.indeterminateNextState=i.children.every(a=>a.tickable!==!0||a.ticked!==!0))}return i};return r.nodes.forEach(k=>D(k,null)),O});watch(()=>r.ticked,O=>{s.value=O}),watch(()=>r.expanded,O=>{N.value=O});function q(O){const D=[].reduce,k=(R,Q)=>{if(R||!Q)return R;if(Array.isArray(Q)===!0)return D.call(Object(Q),k,R);if(Q[r.nodeKey]===O)return Q;if(Q[r.childrenKey])return k(null,Q[r.childrenKey])};return k(null,r.nodes)}function $(){return s.value.map(O=>q(O))}function oe(){return N.value.map(O=>q(O))}function X(O){return O&&P.value[O]?P.value[O].expanded:!1}function ce(){r.expanded!==void 0?w("update:expanded",[]):N.value=[]}function se(){const O=[],D=k=>{k[r.childrenKey]&&k[r.childrenKey].length!==0&&k.expandable!==!1&&k.disabled!==!0&&(O.push(k[r.nodeKey]),k[r.childrenKey].forEach(D))};r.nodes.forEach(D),r.expanded!==void 0?w("update:expanded",O):N.value=O}function re(O,D,k=q(O),R=P.value[O]){if(R.lazy&&R.lazy!=="loaded"){if(R.lazy==="loading")return;c.value[O]="loading",Array.isArray(k[r.childrenKey])!==!0&&(k[r.childrenKey]=[]),w("lazyLoad",{node:k,key:O,done:Q=>{c.value[O]="loaded",k[r.childrenKey]=Array.isArray(Q)===!0?Q:[],nextTick(()=>{P.value[O]?.isParent===!0&&F(O,!0)})},fail:()=>{delete c.value[O],k[r.childrenKey].length===0&&delete k[r.childrenKey]}})}else R.isParent===!0&&R.expandable===!0&&F(O,D)}function F(O,D){let k=N.value;const R=r.expanded!==void 0;if(R===!0&&(k=k.slice()),D){if(r.accordion&&P.value[O]){const Q=[];P.value[O].parent?P.value[O].parent.children.forEach(Z=>{Z.key!==O&&Z.expandable===!0&&Q.push(Z.key)}):r.nodes.forEach(Z=>{const v=Z[r.nodeKey];v!==O&&Q.push(v)}),Q.length!==0&&(k=k.filter(Z=>Q.includes(Z)===!1))}k=k.concat([O]).filter((Q,Z,v)=>v.indexOf(Q)===Z)}else k=k.filter(Q=>Q!==O);R===!0?w("update:expanded",k):N.value=k}function B(O){return O&&P.value[O]?P.value[O].ticked:!1}function g(O,D){let k=s.value;const R=r.ticked!==void 0;R===!0&&(k=k.slice()),D?k=k.concat(O).filter((Q,Z,v)=>v.indexOf(Q)===Z):k=k.filter(Q=>O.includes(Q)===!1),R===!0&&w("update:ticked",k)}function I(O,D,k){const R={tree:p,node:O,key:k,color:r.color,dark:m.value};return injectProp(R,"expanded",()=>D.expanded,Q=>{Q!==D.expanded&&re(k,Q)}),injectProp(R,"ticked",()=>D.ticked,Q=>{Q!==D.ticked&&g([k],Q)}),R}function A(O){return(r.filter?O.filter(D=>P.value[D[r.nodeKey]].matchesFilter):O).map(D=>ie(D))}function G(O){if(O.icon!==void 0)return h(QIcon,{class:"q-tree__icon q-mr-sm",name:O.icon,color:O.iconColor});const D=O.img||O.avatar;if(D)return h("img",{class:`q-tree__${O.img?"img":"avatar"} q-mr-sm`,src:D})}function K(){w("afterShow")}function j(){w("afterHide")}function ie(O){const D=O[r.nodeKey],k=P.value[D],R=O.header&&o[`header-${O.header}`]||o["default-header"],Q=k.isParent===!0?A(O[r.childrenKey]):[],Z=Q.length!==0||k.lazy&&k.lazy!=="loaded";let v=O.body&&o[`body-${O.body}`]||o["default-body"];const S=R!==void 0||v!==void 0?I(O,k,D):null;return v!==void 0&&(v=h("div",{class:"q-tree__node-body relative-position"},[h("div",{class:t.value},[v(S)])])),h("div",{key:D,class:`q-tree__node relative-position q-tree__node--${Z===!0?"parent":"child"}`},[h("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(k.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(k.selected===!0?" q-tree__node--selected":"")+(k.disabled===!0?" q-tree__node--disabled":""),tabindex:k.link===!0?0:-1,ariaExpanded:Q.length>0?k.expanded:null,role:"treeitem",onClick:x=>{ne(O,k,x)},onKeypress(x){shouldIgnoreKey(x)!==!0&&(x.keyCode===13?ne(O,k,x,!0):x.keyCode===32&&Y(O,k,x,!0))}},[h("div",{class:"q-focus-helper",tabindex:-1,ref:x=>{T[k.key]=x}}),k.lazy==="loading"?h(QSpinner,{class:"q-tree__spinner",color:e.value}):Z===!0?h(QIcon,{class:"q-tree__arrow"+(k.expanded===!0?" q-tree__arrow--rotate":""),name:n.value,onClick(x){Y(O,k,x)}}):null,k.hasTicking===!0&&k.noTick!==!0?h(QCheckbox,{class:"q-tree__tickbox",modelValue:k.indeterminate===!0?null:k.ticked,color:e.value,dark:m.value,dense:!0,keepColor:!0,disable:k.tickable!==!0,onKeydown:stopAndPrevent,"onUpdate:modelValue":x=>{J(k,x)}}):null,h("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(k.selected===!0?l.value:t.value)},[R?R(S):[G(O),h("div",O[r.labelKey])]])]),Z===!0?r.noTransition===!0?k.expanded===!0?h("div",{class:"q-tree__node-collapsible"+t.value,key:`${D}__q`},[v,h("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":""),role:"group"},Q)]):null:h(QSlideTransition,{duration:r.duration,onShow:K,onHide:j},()=>withDirectives(h("div",{class:"q-tree__node-collapsible"+t.value,key:`${D}__q`},[v,h("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":""),role:"group"},Q)]),[[vShow,k.expanded]])):v])}function ae(O){T[O]?.focus()}function ne(O,D,k,R){R!==!0&&D.selectable!==!1&&ae(D.key),u.value&&D.selectable?r.noSelectionUnset===!1?w("update:selected",D.key!==r.selected?D.key:null):D.key!==r.selected&&w("update:selected",D.key===void 0?null:D.key):Y(O,D,k,R),typeof O.handler=="function"&&O.handler(O)}function Y(O,D,k,R){k!==void 0&&stopAndPrevent(k),R!==!0&&D.selectable!==!1&&ae(D.key),re(D.key,!D.expanded,O,D)}function J(O,D){if(O.indeterminate===!0&&(D=O.indeterminateNextState),O.strictTicking)g([O.key],D);else if(O.leafTicking){const k=[],R=Q=>{Q.isParent?(D!==!0&&Q.noTick!==!0&&Q.tickable===!0&&k.push(Q.key),Q.leafTicking===!0&&Q.children.forEach(R)):Q.noTick!==!0&&Q.tickable===!0&&(Q.leafFilteredTicking!==!0||Q.matchesFilter===!0)&&k.push(Q.key)};R(O),g(k,D)}}return r.defaultExpandAll===!0&&se(),Object.assign(p,{getNodeByKey:q,getTickedNodes:$,getExpandedNodes:oe,isExpanded:X,collapseAll:ce,expandAll:se,setExpanded:re,isTicked:B,setTicked:g}),()=>{const O=A(r.nodes);return h("div",{class:y.value,role:"tree"},O.length===0?r.filter?r.noResultsLabel||f.lang.tree.noResults:r.noNodesLabel||f.lang.tree.noNodes:O)}}}),_sfc_main$2=defineComponent({name:"MQTTClientTopicTreeWidget",emits:["selected-node"],components:{},data(){return{filterText:"",selectedTopic:null,currentNode:null}},methods:{...mapActions(useMqttClientStore,["clearAllMessages"]),onClickClearMessages(){this.selectedTopic=null,this.currentNode=null,this.$emit("selected-node",null),this.clearAllMessages()}},computed:{...mapState(useMqttClientStore,["allMessages","brokers"]),filteredTopics(){const r=new Map,o=[];return this.allMessages.forEach(w=>{let p=r.get(w.serverId);p===void 0?(r.set(w.serverId,{label:w.serverId,id:w.serverId,port:this.brokers[w.serverId].port??"",address:this.brokers[w.serverId].address??"",count:1,children:[],messages:[]}),p=r.get(w.serverId)):p.count++;let f=p,m=w.topic.split("/"),c=w.serverId;m.forEach((s,N)=>{let T=f.children.find(y=>y.label===s);c+=`/${s}`,T===void 0?(T={label:s,id:c,count:1,children:[],messages:[]},f.children.push(T),f=T):(T.count++,f=T),N+1===m.length&&T.messages.push(w)})}),r.forEach(w=>{o.push(w)}),o}},watch:{selectedTopic(){if(this.selectedTopic===null){this.currentNode=null,this.$emit("selected-node",null);return}let r=this.selectedTopic.split("/"),o=this.filteredTopics.find(w=>w.label===r[0]);r.shift(),r.forEach(w=>{o=o.children.find(p=>p.label===w)}),this.currentNode=o,this.$emit("selected-node",this.currentNode)},filteredTopics(){if(this.selectedTopic!==null){let r=this.selectedTopic.split("/"),o=this.filteredTopics.find(w=>w.label===r[0]);r.shift(),r.forEach(w=>{o=o.children.find(p=>p.label===w)}),this.currentNode=o,this.$emit("selected-node",this.currentNode)}}}}),_hoisted_1$2={class:"chariot-mqtt-topic-tree-header"},_hoisted_2$2={class:"chariot-mqtt-topic-tree-container"},_hoisted_3$1={class:"row items-center"},_hoisted_4={key:0,class:"chariot-tree-subheader"},_hoisted_5={key:1,style:{"font-weight":"500","font-size":"12px"}};function _sfc_render$2(r,o,w,p,f,m){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$2,[createVNode(QInput,{debounce:"500",class:"chariot-mqtt-topic-tree-filter-text q-mb-md q-mt-sm",for:"mqttTopicTreeTopic",modelValue:r.filterText,"onUpdate:modelValue":o[0]||(o[0]=c=>r.filterText=c),dense:"",outlined:"",label:"Filter by topic"},{after:withCtx(()=>[createVNode(QBtn,{onClick:r.onClickClearMessages,style:{width:"160px",height:"40px"},color:"negative",label:"Clear Messages"},null,8,["onClick"])]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_2$2,[createVNode(QTree,{nodes:r.filteredTopics,filter:r.filterText,dense:"","default-expand-all":"",selected:r.selectedTopic,"onUpdate:selected":o[1]||(o[1]=c=>r.selectedTopic=c),"node-key":"id"},{"default-header":withCtx(c=>[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",null,[createTextVNode(toDisplayString(c.node.label)+" ",1),c.node.messages.length?(openBlock(),createElementBlock("span",_hoisted_4,"(Messages: "+toDisplayString(c.node.messages.length)+")",1)):createCommentVNode("",!0),c.node.port?(openBlock(),createElementBlock("span",_hoisted_5,"("+toDisplayString(c.node.address)+":"+toDisplayString(c.node.port)+")",1)):createCommentVNode("",!0)])])]),_:1},8,["nodes","filter","selected"])])])}const MQTTClientTopicTreeWidget=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1=defineComponent({name:"MQTTClientTopicTreeTab",components:{MQTTClientTopicMessageWidget,MQTTClientTopicTreeWidget},data(){return{selectedNode:null}},methods:{onSelectNode(r){this.selectedNode=r}}}),_hoisted_1$1={class:"row chariot-mqtt-publish-body"},_hoisted_2$1={class:"col-5"},_hoisted_3={class:"col-7"};function _sfc_render$1(r,o,w,p,f,m){const c=resolveComponent("MQTTClientTopicTreeWidget"),s=resolveComponent("MQTTClientTopicMessageWidget");return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createVNode(QCard,{class:"chariot-widget chariot-widget-subscribe"},{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[...o[0]||(o[0]=[createTextVNode("Topic Tree",-1)])]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(c,{onSelectedNode:r.onSelectNode},null,8,["onSelectedNode"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_3,[createVNode(QCard,{class:"chariot-widget q-ml-lg"},{default:withCtx(()=>[createVNode(QToolbar,null,{default:withCtx(()=>[createVNode(QToolbarTitle,null,{default:withCtx(()=>[...o[1]||(o[1]=[createTextVNode("Messages",-1)])]),_:1})]),_:1}),createVNode(QCardSection,null,{default:withCtx(()=>[createVNode(s,{"message-node":r.selectedNode},null,8,["message-node"])]),_:1})]),_:1})])])}const MQTTClientTopicTreeTab=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main=defineComponent({name:"MQTTClientPage",components:{PageHeader,MQTTClientConnectionsTab,MQTTClientPublishTab,MQTTClientTopicTreeTab},data(){let r="connections";return this.$route?.query?.tab?r=this.$route?.query?.tab:this.$router.replace({name:"mqttclient",query:{tab:r}}),{isLive:!0,tab:r,currentBroker:null,loading:!1}},mounted(){this.getConnectionStatus()},unmounted(){this.isClientLive||this.clearPending()},methods:{...mapActions(useMqttClientStore,["setMqttStatus","setCurrentBroker","setBrokerSubscriptions","setSelectedBroker","addProcessedMessages"]),clearPending(){const r=useMqttClientStore();r.$patch({isClientLive:!0}),this.pendingMessages.length>0&&(this.addProcessedMessages(this.pendingMessages),r.$patch({pendingMessages:[]}))},checkConnectionList(){this.allBrokers.length>0&&this.currentBroker===null?(this.currentBroker=this.allBrokers[0],this.setSelectedBroker(this.currentBroker.name)):this.allBrokers.length===0&&(this.currentBroker=null,this.setSelectedBroker(""))},async getConnectionStatus(){try{(await this.$api.get("/client/status")).data.clients.forEach(o=>{const w=o.serverId,p=o.connected?"CONNECTED":"DISCONNECTED";this.setMqttStatus(w,p),o.connected&&this.setCurrentBroker(w,{clientId:o.clientId,subscriptions:o.subscriptionTopics}),this.allBrokers.length>0&&(this.currentBroker=this.allBrokers[0],this.setSelectedBroker(this.currentBroker.name))})}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}},async onClickConnectBroker(){try{const r=await this.$api.post(`/client?action=connect&serverName=${this.currentBroker.name}`);this.setBrokerSubscriptions(r.data.client.serverId,r.data.client.subscriptionTopics),this.setMqttStatus(this.currentBroker.name,"CONNECTED")}catch(r){this.$q.notify({type:"negative",message:r.response.data.message??"Failed to connect"})}},async onClickDisconnectBroker(){try{await this.$api.post(`/client?action=disconnect&serverName=${this.currentBroker.name}`),this.setMqttStatus(this.currentBroker.name,"DISCONNECTED")}catch(r){this.$q.notify({type:"negative",message:r.response.data.message})}},onChangeCurrentBroker(){this.clearPending(),this.setSelectedBroker(this.currentBroker.name)}},computed:{...mapState(useAuthStore,["helpUrl"]),...mapState(useUserStore,["username"]),...mapState(useMqttClientStore,["brokers","selectedBroker","isClientLive","pendingMessages"]),allBrokers(){return Object.keys(this.brokers).map(r=>({name:r,connected:this.brokers[r].mqttStatus==="CONNECTED"}))}},watch:{tab(){this.$router.push({name:"mqttclient",query:{...this.$route.query,tab:this.tab}})},$route:{handler(){this.$route.query.tab&&(this.tab=this.$route.query.tab)}},brokers:{handler(){this.currentBroker&&this.selectedBroker?this.currentBroker.connected=this.brokers[this.selectedBroker].mqttStatus==="CONNECTED":this.allBrokers.length>0&&(this.selectedBroker===null||this.selectedBroker===void 0)&&(this.currentBroker=this.allBrokers[0],this.setSelectedBroker(this.currentBroker.name))},deep:!0,immediate:!0}}}),_hoisted_1={class:"chariot-mqtt-client-header"},_hoisted_2={class:"q-ml-md"};function _sfc_render(r,o,w,p,f,m){const c=resolveComponent("PageHeader"),s=resolveComponent("MQTTClientConnectionsTab"),N=resolveComponent("MQTTClientPublishTab"),T=resolveComponent("MQTTClientTopicTreeTab");return openBlock(),createBlock(QPage,{class:"chariot-page-container"},{default:withCtx(()=>[createVNode(c,{title:r.$t("mqttClients.clientTitle"),icon:"router"},{append:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createVNode(QSelect,{style:{width:"300px"},modelValue:r.currentBroker,"onUpdate:modelValue":[o[0]||(o[0]=y=>r.currentBroker=y),r.onChangeCurrentBroker],label:"Connection",outlined:"",dense:"",options:r.allBrokers},{"selected-item":withCtx(y=>[createBaseVNode("div",null,[y.opt.connected?(openBlock(),createBlock(QIcon,{key:0,color:"positive",name:"wifi"})):(openBlock(),createBlock(QIcon,{key:1,name:"wifi_off",color:"negative"})),createBaseVNode("span",_hoisted_2,toDisplayString(y.opt.name),1)])]),option:withCtx(y=>[createVNode(QItem,normalizeProps(guardReactiveProps(y.itemProps)),{default:withCtx(()=>[createVNode(QItemSection,{avatar:""},{default:withCtx(()=>[y.opt.connected?(openBlock(),createBlock(QIcon,{key:0,color:"positive",name:"wifi"})):(openBlock(),createBlock(QIcon,{key:1,name:"wifi_off",color:"negative"}))]),_:2},1024),createVNode(QItemSection,null,{default:withCtx(()=>[createVNode(QItemLabel,null,{default:withCtx(()=>[createTextVNode(toDisplayString(y.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","onUpdate:modelValue","options"]),r.currentBroker&&!r.currentBroker.connected?(openBlock(),createBlock(QBtn,{key:0,onClick:r.onClickConnectBroker,style:{width:"120px",height:"40px"},class:"q-ml-md",color:"positive",label:r.$t("mqttClients.connect")},null,8,["onClick","label"])):(openBlock(),createBlock(QBtn,{key:1,onClick:r.onClickDisconnectBroker,disabled:r.allBrokers.length===0,style:{width:"120px",height:"40px"},class:"q-ml-md",color:"negative",label:r.$t("mqttClients.disconnect")},null,8,["onClick","disabled","label"]))])]),_:1},8,["title"]),createVNode(QCard,{class:"chariot-page-container-body"},{default:withCtx(()=>[createVNode(QTabs,{modelValue:r.tab,"onUpdate:modelValue":o[1]||(o[1]=y=>r.tab=y),dense:"","active-color":"primary-light",align:"justify"},{default:withCtx(()=>[createVNode(QTab,{name:"connections",label:r.$t("mqttClients.connections")},null,8,["label"]),createVNode(QTab,{name:"publish",label:"Publish/Subscribe"}),createVNode(QTab,{name:"topic",label:"Topic Tree"})]),_:1},8,["modelValue"]),createVNode(QSeparator),createVNode(QTabPanels,{modelValue:r.tab,"onUpdate:modelValue":o[2]||(o[2]=y=>r.tab=y)},{default:withCtx(()=>[createVNode(QTabPanel,{name:"connections"},{default:withCtx(()=>[createVNode(s,{onConnectionUpdated:r.checkConnectionList},null,8,["onConnectionUpdated"])]),_:1}),createVNode(QTabPanel,{name:"publish"},{default:withCtx(()=>[createVNode(N)]),_:1}),createVNode(QTabPanel,{name:"topic"},{default:withCtx(()=>[createVNode(T)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const MQTTClientPage=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{MQTTClientPage as default};
